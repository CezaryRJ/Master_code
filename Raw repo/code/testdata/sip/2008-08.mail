From sip-bounces@ietf.org  Fri Aug  1 02:43:54 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 05C9E3A6994;
	Fri,  1 Aug 2008 02:43:54 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9F9473A6994
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 02:43:53 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.249
X-Spam-Level: 
X-Spam-Status: No, score=-6.249 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JcNQgh8lv4sr for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 02:43:52 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 735423A67AD
	for <sip@ietf.org>; Fri,  1 Aug 2008 02:43:52 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	3D9D520F42; Fri,  1 Aug 2008 11:43:15 +0200 (CEST)
X-AuditID: c1b4fb3c-ae89cbb00000193b-73-4892da67fcf7
Received: from esealmw129.eemea.ericsson.se (unknown [153.88.254.124])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	A7C6D204D6; Fri,  1 Aug 2008 11:42:00 +0200 (CEST)
Received: from esealmw129.eemea.ericsson.se ([153.88.254.177]) by
	esealmw129.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 11:40:23 +0200
Received: from [164.48.29.235] ([164.48.29.235]) by
	esealmw129.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 11:40:23 +0200
Message-ID: <4892DA07.3080503@ericsson.com>
Date: Fri, 01 Aug 2008 12:40:23 +0300
From: Gonzalo Camarillo <Gonzalo.Camarillo@ericsson.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Paul Kyzivat <pkyzivat@cisco.com>
References: <5D1A7985295922448D5550C94DE2918002196DCC@DEEXC1U01.de.lucent.com>	<48898492.7010601@ericsson.com>
	<5D1A7985295922448D5550C94DE2918002196FF7@DEEXC1U01.de.lucent.com>
	<4889F09B.8050407@cisco.com>
In-Reply-To: <4889F09B.8050407@cisco.com>
X-OriginalArrivalTime: 01 Aug 2008 09:40:23.0638 (UTC)
	FILETIME=[9EF4F760:01C8F3BA]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>, "DRAGE,
	Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Comments on draft-ietf-sip-body-handling-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi Keith,

per our conversation, I guess we can just leave the text as it is right 
now. The thing is that nesting was already defined for email and we do 
not really want to change those definitions and recommendations. The 
only thing we are doing here is stressing that you should not just 
perform nesting for fun. You need a reason to do that.

Thanks,

Gonzalo


Paul Kyzivat wrote:
> 
> 
> DRAGE, Keith (Keith) wrote:
> 
>> I know we do have this paragraph in section 4.1:
>>
>>    Nested MIME bodies are yet another useful tool to build and combine
>>    SIP extensions.  Using the extensions in the previous examples, a UA
>>    that supported a new session description format and that needed to
>>    include a location object in an INVITE request would include a
>>    'multipart/mixed' body with two body parts: a location object and a
>>    'multipart/alternative'.  The 'multipart/alternative' body part
>>    would, in turn, have two body parts: a session description written in
>>    SDP and a session description written in the newer session
>>    description format.
>>
>> But thinking about this, I suspect we define no semantics anywhere 
>> (please correct me if I am wrong) about what nesting means. Does a 
>> nested body require different interpretation to a multipart body, and 
>> if so, how do I discover what that difference is. All the nesting 
>> would seem to tell me is that there might be a different relationship, 
>> but it does not tell me what that relationship is.
> 
> I agree that the current loose wording leaves something to be desired.
> I just don't know how to fix it.
> 
> Let me give a concrete example:
> 
> Is an INVITE valid if it contains a body of:
> 
>     multipart/mixed {
>        multipart/mixed {
>           multipart/mixed {
>              application/sdp
>     }}}
> 
> Must the UAS keep unwrapping multiparts, looking for its SDP?
> 
> And while we are discussing weird cases, what about:
> 
>     multipart/mixed {
>        multipart/mixed {
>           multipart/mixed {
>              application/sdp-1
>           }
>           application/sdp-2
>     }}
> 
> If the latter is legal at all, which sdp is the offer? And what should 
> happen to the other one?
> 
> I know these are bizarre cases. I'm just pushing the envelope to 
> understand the implications for the sorts of decoding logic the stack 
> should be expected to use.
> 
>     Thanks,
>     Paul
>     

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 02:50:06 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 55BFD3A6D76;
	Fri,  1 Aug 2008 02:50:06 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AE1623A6D6B
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 02:50:04 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.249
X-Spam-Level: 
X-Spam-Status: No, score=-6.249 tagged_above=-999 required=5
	tests=[AWL=-0.000, BAYES_00=-2.599, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WfGOEvrqePTM for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 02:50:02 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id D43A13A6AFA
	for <sip@ietf.org>; Fri,  1 Aug 2008 02:50:01 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	B58A220E9B; Fri,  1 Aug 2008 11:48:22 +0200 (CEST)
X-AuditID: c1b4fb3c-ac898bb00000193b-dd-4892dbc19912
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	101A420D3B; Fri,  1 Aug 2008 11:47:46 +0200 (CEST)
Received: from esealmw126.eemea.ericsson.se ([153.88.254.170]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 11:46:36 +0200
Received: from [164.48.29.235] ([164.48.29.235]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 11:46:35 +0200
Message-ID: <4892DB7B.4010002@ericsson.com>
Date: Fri, 01 Aug 2008 12:46:35 +0300
From: Gonzalo Camarillo <Gonzalo.Camarillo@ericsson.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
References: <D990FC93-11C1-409E-8CBE-CACE851A5138@softarmor.com><200807080328.m683S5F8017592@dragon.ariadne.com><487B7D17.1050501@cisco.com>
	<CE21D304-2A09-4F92-9E63-396581FCD98E@standardstrack.com>
	<5D1A7985295922448D5550C94DE2918002197227@DEEXC1U01.de.lucent.com>
In-Reply-To: <5D1A7985295922448D5550C94DE2918002197227@DEEXC1U01.de.lucent.com>
X-OriginalArrivalTime: 01 Aug 2008 09:46:35.0688 (UTC)
	FILETIME=[7CB74A80:01C8F3BB]
X-Brightmail-Tracker: AAAAAA==
Cc: "SIP@ietf.org List" <sip@ietf.org>
Subject: Re: [Sip] WGLC for draft-ietf-sip-body-handling
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi,

the handling parameter appears registered as defined by RFC 3261:
http://www.iana.org/assignments/sip-parameters

I will look into this and add the appropriate IANA actions so that the 
IANA's register is correct.

Thanks,

Gonzalo

DRAGE, Keith (Keith) wrote:
>> On Keith's point that body-handling updates 3204, that works 
>> for me if this draft updates the rules for ISUP.  However, if 
>> it updates the meaning of "handling", then it is 3459 that 
>> gets the update, as 3459 updates 3204 already.
> 
> Well if this is the case, then it should have added its own reference to
> the IANA registration of the handling parameter, which it did not.
> Suggest therefore that sip-body-handling also updates the IANA registry
> to include RFC 3459 as well as its own RFC number.
> 
> Regards
> 
> Keith
> 
>> -----Original Message-----
>> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
>> Behalf Of Eric Burger
>> Sent: Monday, July 28, 2008 6:58 AM
>> To: Dale.Worley@comcast.net; Gonzalo Camarillo
>> Cc: SIP@ietf.org List
>> Subject: Re: [Sip] WGLC for draft-ietf-sip-body-handling
>>
>> Last I looked, RFC 3459 fully specifies what to do with 
>> multipart/ alternative and multipart/related. We did not 
>> bother to enumerate what to do with multipart/mixed, as it is 
>> painfully obvious: one has to look at everything to figure 
>> out what to do. Sometimes, life is "less than ideal."
>>
>> Like all things Mail (and SIP), handling does not require  
>> understanding.  What part of the original intention is not clear?   
>> Both 3204 and 3459 are gateway (B2BUA) scenarios.  3204 is a 
>> particular instance, while 3459 is the generic use case; mail 
>> focused, true, but appropriate for SIP, too.
>>
>> On Keith's point that body-handling updates 3204, that works 
>> for me if this draft updates the rules for ISUP.  However, if 
>> it updates the meaning of "handling", then it is 3459 that 
>> gets the update, as 3459 updates 3204 already.
>>
>> Unfortunately for me, I only have a copy of draft-ietf-sip-body-
>> handling-01 handy, so I cannot comment on -02 until this week.
>>
>>
>> On Jul 14, 2008, at 5:21 PM, Paul Kyzivat wrote:
>>
>>>
>>> Dale.Worley@comcast.net wrote:
>>>> Unfortunately, I don't particularly like this document, as 
>> it gives a
>>>> lot of discussion of various cases, but doesn't present a clear and
>>>> unified description of the semantics of multipart body 
>> part handling.
>>>> So much so that it would take me a long time to verify that the
>>>> various rules in the document covered all cases and were 
>> not mutually
>>>> contradictory.
>>>> In a lot of situations, it seems that the rule is "the 
>> designer of  
>>>> the
>>>> software should be able to figure out what is meant in each  
>>>> particular
>>>> situation".  Which inevitably leads to "No, he can't." or 
>> rather "He
>>>> will think he can, but he'll get it wrong."
>>>> But I don't know that we have time to fix that now.
>>> Well...
>>>
>>> This was WGLC, and you did get your comment in before the 
>> WGLC closed.
>>> If the draft isn't right, its better to fix it now than later.
>>>
>>> Like a lot of things, it seems that they only get noticed 
>> by a small  
>>> number of people until it is almost "too late".
>>>
>>>> More specifically:
>>>> There seems to be no clear statement that "required" and "optional"
>>>> mean "required/optional for successful processing of the enclosing
>>>> body/body part" -- after all, the enclosing body part may itself be
>>>> optional, so "required" and "optional" can only be relative to the
>>>> necessity of understanding of the enclosing body part.  Or
>>>> alternatively, maybe we don't want this degree of 
>> complexity.  But to
>>>> avoid it, we would have to ban nested multiparts, or at 
>> least, all  
>>>> but
>>>> certain specific usages of nested multiparts.
>>> Well, the handling parameter wasn't invented for sip. So 
>> presumably  
>>> we should try to stick with its intended definition if we can.  
>>> Assuming we knew what that was.
>>>
>>> ISTM that if a part has handling=optional, and you choose not to  
>>> handle it, then you won't notice the handling parameter of any  
>>> enclosed parts. But that is an ISTM, not a normative reference.
>>>
>>>> There are a lot of mentions of the 415 response in 
>> passing.  As far  
>>>> as
>>>> I can tell, it is expected that the Accept header in a 415 response
>>>> will contain all the media types that the UA understands *in any
>>>> context whatsoever*, but that doesn't seem to be stated clearly
>>>> anywhere.  (E.g., it would be reasonable for a designer to 
>> think that
>>>> the Accept should only list media types understood for the 
>> particular
>>>> request method.)
>>> IMO this is a huge problem with all Accept-* headers. There is a  
>>> fairly good chance that the 415 will only list those 
>> supported in a  
>>> particular context. Consider for instance a case where a proxy for  
>>> an AOR routes SUBSCRIBE requests for presence to one UA, 
>> and INVITE  
>>> requests to a different UA. Those two UAs will most likely support  
>>> different content types.
>>>
>>> Even within a single UA there may be routing to different  
>>> "applications" and that may result in different indications 
>> of what  
>>> is accepted.
>>>
>>> One might argue that this only makes sense within a dialog, but  
>>> there are plenty of examples where the dialog is the wrong 
>> scope for  
>>> this. I don't know a good answer here, but I expect that in 
>> practice  
>>> the 415 may only reflect "this is what I can support here 
>> and now in  
>>> this context."
>>>
>>>> In section 5.1 the description is not really correct, as the "This
>>>> way..." sentence doesn't follow from the preceding sentence.  A  
>>>> better
>>>> phrasing is:
>>>>  Each body part within a 'multipart/alternative' carries an
>>>>  alternative version of the same information.  The body 
>> parts SHOULD
>>>>  be ordered in increasing richness of representation of the
>>>>  information.  More exactly, the UAS MUST process the last 
>> body part
>>>>  that it understands, and the UAC MUST order the body parts so
>>>>  that the this rule causes the UAS to behave as the UAC desires.
>>>> In section 6.1, I see:
>>>>  If the parameter [...] has the value 'required', the UAS returns a
>>>>  415 (Unsupported Media Type) response.
>>>> This is incorrect.  Of course, what is meant is, "If the 
>> parameter  
>>>> has
>>>> the value 'required', and the body part must be processed 
>> in order to
>>>> process the entire SIP message, then the UAS returns...", 
>> but that's
>>>> not what it says.
>>> This is just the tip of an iceberg. The iceberg is the meaning of  
>>> "handle".
>>>
>>> IMO, "handle" has to mean "process in a way compliant according to  
>>> the specifications for this C-T and C-D in the current context.  
>>> (Which includes the current message type and the processing of any  
>>> containing body parts, referencing headers, etc., as well as the  
>>> role (UAC, UAS, proxy, ...) of the processor.) In many cases,  
>>> "ignore" may be a valid form of processing.
>>>
>>>> In section 6.2 there is various discussion of the handling 
>> parameter
>>>> for parts within a multipart/alternative body part.  But the
>>>> discussion could be made clearer by starting with the 
>> statement that
>>>> the handling parameter is not significant: "The handling 
>> parameters  
>>>> of
>>>> the parts of a multipart/alternative part are ignored in processing
>>>> (the processing is determined by the type 
>> multipart/alternative), and
>>>> SHOULD be set to optional."  Or should we just omit 'handling' on
>>>> parts of a multipart/alternative?
>>> The specification of C-D states that the default for the handling  
>>> parameter is "handling=required", so omitting it solves nothing.
>>>
>>>> The sentence before that one is peculiar: "If the handling of a
>>>> 'multipart/alternative' body is required, the UA MUST set the
>>>> 'handling' parameter of the 'multipart/alternative' body to
>>>> 'required'."  This seems tautological -- why is it stated?
>>> Goes back to the meaning of "required".  I don't think it is  
>>> tautological, but maybe it could be stated better. The goal here  
>>> would be define the relationship between 
>> "handling=required" in the  
>>> header to desired behavior in the recipient of the body part.
>>>
>>>> In section 7.3, it is stated that "If the SIP message contains a
>>>> reference to the body part, the UA processes the body part 
>> according
>>>> to the reference.", but in the next paragraph, it says "Note that,
>>>> following the rules in [RFC3204], if a UA does not 
>> understand a body
>>>> part whose handling is optional, it ignores it."  But these are
>>>> contradictory if the part containing the reference is 
>> required but  
>>>> the
>>>> part that is referenced is marked optional.  In effect, the  
>>>> referenced
>>>> part becomes required (or rather, required under any circumstances
>>>> where the referencing part is required).  This can 
>> conflict with the
>>>> desire that all parts of a multipart/alternative are effectively
>>>> optional within that part.  What is really intended here?
>>> We discussed this a lot, and I thought we finally got something  
>>> workable.
>>>
>>> As I understand it, processing based on a reference and processing  
>>> based on presence are more-or-less independent.
>>>
>>> Assume for the moment that the type and disposition are 
>> understood.  
>>> If there is some implied processing based on the type and  
>>> disposition, then it will be done. If there is also a reference to  
>>> it via CID from one or more headers (or other body parts), then  
>>> those may also be performed based on the rules for those 
>> references.  
>>> If the goal is to include a body part solely so that it can be  
>>> referenced from elsewhere, then it ought to have a C-T/C-D that  
>>> doesn't result in any unexpected processing.
>>>
>>> If a part has handling=required, but is not understood, then  
>>> references to it aren't going to work.
>>>
>>> This is all pretty hard to explain. Expecially if you include  
>>> references from other body parts. After listening to Adam, 
>> I suspect  
>>> that maybe reference between body parts should be within a 
>> multipart/ 
>>> related, which will get us into the other discussion of C-D with  
>>> multipart/related. But I think there are cases where multipart/ 
>>> related isn't appropriate.
>>>
>>> Consider the following:
>>>
>>> An INVITE that contains both sdp and a body part referenced by a  
>>> Geoloc header. Those two parts aren't related to one another, so  
>>> they go into a multipart/mixed in the INVITE. The reference 
>> is from  
>>> the headers of the sip message to one of the body parts within the  
>>> multipart/mixed.
>>>
>>> Something similar could occur in a response to an INVITE as well,  
>>> though probably not with geoloc. For instance there could be an  
>>> Alert-Info header referencing a body part containing a picture of  
>>> the callee.
>>>
>>> Now suppose a REFER causes an INVITE that has such a response. And  
>>> the entire response is returned in sipfrag in a NOTIFY to the  
>>> referror. So then you have: A REFER with a body of type 
>> sipfrag. The  
>>> body in turn contains a body of type multipart/mixed. The 
>> multipart/ 
>>> mixed contains an SDP part and an image part. The sip 
>> headers in the  
>>> sipfrag reference the image part in the contained multipart/mixed.
>>>
>>> Now *probably* the image part in the response to the invite would  
>>> have handling=optional. Or it could have had handling=required if  
>>> the callee felt strongly about presenting its image. I don't know  
>>> what should happen to the INVITE if the image body part wasn't  
>>> understood. Nor do I understand what should happen to the 
>> NOTIFY if  
>>> the recipient doesn't understand the image.
>>>
>>> 	Paul
>>>
>>>> Dale
>>>> _______________________________________________
>>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>>> This list is for NEW development of the core SIP Protocol
>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>> Use sipping@ietf.org for new developments on the application of sip
>>> _______________________________________________
>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>> _______________________________________________
>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 02:55:17 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3E7A53A6D72;
	Fri,  1 Aug 2008 02:55:17 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 053A63A6D49
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 02:55:13 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.249
X-Spam-Level: 
X-Spam-Status: No, score=-6.249 tagged_above=-999 required=5
	tests=[AWL=-0.000, BAYES_00=-2.599, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id w0VoRnlg7Hnx for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 02:55:11 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 110983A6B30
	for <sip@ietf.org>; Fri,  1 Aug 2008 02:55:11 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	E44E520EED; Fri,  1 Aug 2008 11:54:06 +0200 (CEST)
X-AuditID: c1b4fb3c-af09dbb00000193b-82-4892dc72498f
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	F0E9920F03; Fri,  1 Aug 2008 11:50:42 +0200 (CEST)
Received: from esealmw126.eemea.ericsson.se ([153.88.254.170]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 11:50:29 +0200
Received: from [164.48.29.235] ([164.48.29.235]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 11:50:28 +0200
Message-ID: <4892DC64.2090506@ericsson.com>
Date: Fri, 01 Aug 2008 12:50:28 +0300
From: Gonzalo Camarillo <Gonzalo.Camarillo@ericsson.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
References: <5D1A7985295922448D5550C94DE2918002196DCC@DEEXC1U01.de.lucent.com>	<48898492.7010601@ericsson.com>
	<5D1A7985295922448D5550C94DE2918002196FF7@DEEXC1U01.de.lucent.com>
	<4889F09B.8050407@cisco.com> <4892DA07.3080503@ericsson.com>
	<5D1A7985295922448D5550C94DE29180021D08F6@DEEXC1U01.de.lucent.com>
In-Reply-To: <5D1A7985295922448D5550C94DE29180021D08F6@DEEXC1U01.de.lucent.com>
X-OriginalArrivalTime: 01 Aug 2008 09:50:28.0809 (UTC)
	FILETIME=[07AABB90:01C8F3BC]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>
Subject: Re: [Sip] Comments on draft-ietf-sip-body-handling-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi Keith,

sure, I can add a sentence per your suggestion below.

Thanks,

Gonzalo

DRAGE, Keith (Keith) wrote:
> My personal preference would be to add a disclaimer sentence to indicate that such semantics are not defined in any SIP RFC (so far), so any interpretation of the relationship between multiple parts when they are nested or otherwise is solely dependent on the interpretation of the MIME values, and that the examples imply no specific definition of semantics for SIP. 
> 
> As this is an interpretation, different vendors may have different interpretations.
> 
> I could live without this, but something conveying this sense would be better.
> 
> Keith
> 
>> -----Original Message-----
>> From: Gonzalo Camarillo [mailto:Gonzalo.Camarillo@ericsson.com] 
>> Sent: Friday, August 01, 2008 10:40 AM
>> To: Paul Kyzivat
>> Cc: DRAGE, Keith (Keith); SIP IETF
>> Subject: Re: [Sip] Comments on draft-ietf-sip-body-handling-02
>>
>> Hi Keith,
>>
>> per our conversation, I guess we can just leave the text as 
>> it is right now. The thing is that nesting was already 
>> defined for email and we do not really want to change those 
>> definitions and recommendations. The only thing we are doing 
>> here is stressing that you should not just perform nesting 
>> for fun. You need a reason to do that.
>>
>> Thanks,
>>
>> Gonzalo
>>
>>
>> Paul Kyzivat wrote:
>>>
>>> DRAGE, Keith (Keith) wrote:
>>>
>>>> I know we do have this paragraph in section 4.1:
>>>>
>>>>    Nested MIME bodies are yet another useful tool to build 
>> and combine
>>>>    SIP extensions.  Using the extensions in the previous 
>> examples, a UA
>>>>    that supported a new session description format and 
>> that needed to
>>>>    include a location object in an INVITE request would include a
>>>>    'multipart/mixed' body with two body parts: a location 
>> object and a
>>>>    'multipart/alternative'.  The 'multipart/alternative' body part
>>>>    would, in turn, have two body parts: a session 
>> description written in
>>>>    SDP and a session description written in the newer session
>>>>    description format.
>>>>
>>>> But thinking about this, I suspect we define no semantics anywhere 
>>>> (please correct me if I am wrong) about what nesting means. Does a 
>>>> nested body require different interpretation to a 
>> multipart body, and 
>>>> if so, how do I discover what that difference is. All the nesting 
>>>> would seem to tell me is that there might be a different 
>>>> relationship, but it does not tell me what that relationship is.
>>> I agree that the current loose wording leaves something to 
>> be desired.
>>> I just don't know how to fix it.
>>>
>>> Let me give a concrete example:
>>>
>>> Is an INVITE valid if it contains a body of:
>>>
>>>     multipart/mixed {
>>>        multipart/mixed {
>>>           multipart/mixed {
>>>              application/sdp
>>>     }}}
>>>
>>> Must the UAS keep unwrapping multiparts, looking for its SDP?
>>>
>>> And while we are discussing weird cases, what about:
>>>
>>>     multipart/mixed {
>>>        multipart/mixed {
>>>           multipart/mixed {
>>>              application/sdp-1
>>>           }
>>>           application/sdp-2
>>>     }}
>>>
>>> If the latter is legal at all, which sdp is the offer? And 
>> what should 
>>> happen to the other one?
>>>
>>> I know these are bizarre cases. I'm just pushing the envelope to 
>>> understand the implications for the sorts of decoding logic 
>> the stack 
>>> should be expected to use.
>>>
>>>     Thanks,
>>>     Paul
>>>     
>>

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 03:05:30 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9DB413A6D6C;
	Fri,  1 Aug 2008 03:05:30 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 62DCE3A6B15
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 03:05:29 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id QfoiQgeOfAnI for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 03:05:27 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id D10F23A6D6C
	for <sip@ietf.org>; Fri,  1 Aug 2008 03:05:27 -0700 (PDT)
Received: from dwillis-mb1.meeting.ietf.org ([130.129.21.41])
	(authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m71A5Ltg014903
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Fri, 1 Aug 2008 05:05:23 -0500
Message-Id: <8151E805-AEF1-4889-8F71-EF33659661A6@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Adam Roach <adam@nostrum.com>
In-Reply-To: <4891BAA4.7040305@nostrum.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Fri, 1 Aug 2008 11:05:15 +0100
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<FE11649F-C3C2-494F-8C40-569E83E91B80@softarmor.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26D3A@GBNTHT12009MSX.gb002.siemens.net>	<4DAE5E60BA49D8419D7C8832503F5FFC072817B5A6@EVS10.ams.gblxint.com>
	<06BFFD03-B8FC-47FC-8659-43BF4B60A3B6@softarmor.com>
	<4891BAA4.7040305@nostrum.com>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <sip@ietf.org>, Adam Uzelac <Adam.Uzelac@globalcrossing.com>
Subject: Re: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
	SIP	Identity)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Jul 31, 2008, at 2:14 PM, Adam Roach wrote:

> On 7/31/08 1:49 PM, Dean Willis wrote:
>>
>> Here's an example:
>>
>> 1) alice@example.com calls bob@example.net
>>
>> 2) The example.com AS authenticates Alice using a mechanism such as  
>> proxy-authenticate, then adds an appropriate Identity and Identity- 
>> Info header field.
>>
>> 3) Bob's B2BUA verifies the Identity header field
>>
>> 4) Bob's B2BUA checks the Identity value value against Bob's  
>> whitelist and chooses to allow the call.
>>
>> 5) But Bob is out, so the B2BUA wants to forward the call to Bob's  
>> mobile phone. But Bob's administrative policy requires recording  
>> the call.
>>
>> Since Bob's administrative policy requires  recording the call,  
>> Bob's b2bua steers the media through a recorder. This requires  
>> either "editing the SDP"  or termination of media on the SBC. in  
>> either case, it is not reasonable to send the existing Identity  
>> header on to Bob, since it's going to be broken.
>>
>> 6) Bob's B2BUA elides the previous Identity and Identity-Info and  
>> adds a new Reasserted-Identity and Reasserted-Identity-Info header   
>> field to the new request, adds a flag saying that the identity  
>> being re-asserted was learned from a verified Identity header, then  
>> sends it.
>>
>> 7) Bob's mobile sees the new request, knows that it trusts Bob's  
>> B2BUA as a re-asserter, then checks its whitelist policy and finds  
>> that it is willing to accept calls from alice@example.com as long  
>> as the assertion strength is either a direct Identity or a re- 
>> asserted Identity based on verified Identity.
>
>
> Here's the problem... if I trust a B2BUA, it doesn't necessarily  
> mean that I'll trust everything it trusts. If Bob's UA is going to  
> make an informed choice, we need it to be able to examine a chain of  
> custody for the identity, at the very least.
>

Is the stack of "verified by" parameters in history-Info adequate, or  
do you want to be able to check each transitive crypto operation?

If the latter, we'd have to do something like add each pre-edit  
message as a sipfrag body onto the current message. That could make  
for some rather large SIP requests.  Maybe a diff format could make it  
better, but it is still going to get chunky.

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 03:07:06 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9AB153A6D84;
	Fri,  1 Aug 2008 03:07:06 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 569533A6D84
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 03:07:05 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.51
X-Spam-Level: 
X-Spam-Status: No, score=-2.51 tagged_above=-999 required=5 tests=[AWL=0.089, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2aK15ihDSIQD for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 03:07:04 -0700 (PDT)
Received: from ihemail4.lucent.com (ihemail4.lucent.com [135.245.0.39])
	by core3.amsl.com (Postfix) with ESMTP id 334C03A6D6C
	for <sip@ietf.org>; Fri,  1 Aug 2008 03:07:04 -0700 (PDT)
Received: from ilexp03.ndc.lucent.com (h135-3-39-50.lucent.com [135.3.39.50])
	by ihemail4.lucent.com (8.13.8/IER-o) with ESMTP id m719mQkX002515; 
	Fri, 1 Aug 2008 04:48:48 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp03.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 04:48:34 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 11:48:31 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 1 Aug 2008 11:48:28 +0200
Message-ID: <5D1A7985295922448D5550C94DE29180021D08F6@DEEXC1U01.de.lucent.com>
In-Reply-To: <4892DA07.3080503@ericsson.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-body-handling-02
Thread-Index: AcjzuxHNfYXOWkyfRyCoUD6lEQe2hAAACJwQ
References: <5D1A7985295922448D5550C94DE2918002196DCC@DEEXC1U01.de.lucent.com>	<48898492.7010601@ericsson.com>
	<5D1A7985295922448D5550C94DE2918002196FF7@DEEXC1U01.de.lucent.com>
	<4889F09B.8050407@cisco.com> <4892DA07.3080503@ericsson.com>
From: "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
To: "Gonzalo Camarillo" <Gonzalo.Camarillo@ericsson.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 01 Aug 2008 09:48:31.0566 (UTC)
	FILETIME=[C1C8DEE0:01C8F3BB]
X-Scanned-By: MIMEDefang 2.57 on 135.245.2.39
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Comments on draft-ietf-sip-body-handling-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

My personal preference would be to add a disclaimer sentence to indicate that such semantics are not defined in any SIP RFC (so far), so any interpretation of the relationship between multiple parts when they are nested or otherwise is solely dependent on the interpretation of the MIME values, and that the examples imply no specific definition of semantics for SIP. 

As this is an interpretation, different vendors may have different interpretations.

I could live without this, but something conveying this sense would be better.

Keith

> -----Original Message-----
> From: Gonzalo Camarillo [mailto:Gonzalo.Camarillo@ericsson.com] 
> Sent: Friday, August 01, 2008 10:40 AM
> To: Paul Kyzivat
> Cc: DRAGE, Keith (Keith); SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-body-handling-02
> 
> Hi Keith,
> 
> per our conversation, I guess we can just leave the text as 
> it is right now. The thing is that nesting was already 
> defined for email and we do not really want to change those 
> definitions and recommendations. The only thing we are doing 
> here is stressing that you should not just perform nesting 
> for fun. You need a reason to do that.
> 
> Thanks,
> 
> Gonzalo
> 
> 
> Paul Kyzivat wrote:
> > 
> > 
> > DRAGE, Keith (Keith) wrote:
> > 
> >> I know we do have this paragraph in section 4.1:
> >>
> >>    Nested MIME bodies are yet another useful tool to build 
> and combine
> >>    SIP extensions.  Using the extensions in the previous 
> examples, a UA
> >>    that supported a new session description format and 
> that needed to
> >>    include a location object in an INVITE request would include a
> >>    'multipart/mixed' body with two body parts: a location 
> object and a
> >>    'multipart/alternative'.  The 'multipart/alternative' body part
> >>    would, in turn, have two body parts: a session 
> description written in
> >>    SDP and a session description written in the newer session
> >>    description format.
> >>
> >> But thinking about this, I suspect we define no semantics anywhere 
> >> (please correct me if I am wrong) about what nesting means. Does a 
> >> nested body require different interpretation to a 
> multipart body, and 
> >> if so, how do I discover what that difference is. All the nesting 
> >> would seem to tell me is that there might be a different 
> >> relationship, but it does not tell me what that relationship is.
> > 
> > I agree that the current loose wording leaves something to 
> be desired.
> > I just don't know how to fix it.
> > 
> > Let me give a concrete example:
> > 
> > Is an INVITE valid if it contains a body of:
> > 
> >     multipart/mixed {
> >        multipart/mixed {
> >           multipart/mixed {
> >              application/sdp
> >     }}}
> > 
> > Must the UAS keep unwrapping multiparts, looking for its SDP?
> > 
> > And while we are discussing weird cases, what about:
> > 
> >     multipart/mixed {
> >        multipart/mixed {
> >           multipart/mixed {
> >              application/sdp-1
> >           }
> >           application/sdp-2
> >     }}
> > 
> > If the latter is legal at all, which sdp is the offer? And 
> what should 
> > happen to the other one?
> > 
> > I know these are bizarre cases. I'm just pushing the envelope to 
> > understand the implications for the sorts of decoding logic 
> the stack 
> > should be expected to use.
> > 
> >     Thanks,
> >     Paul
> >     
> 
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 03:08:25 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1E4473A6D84;
	Fri,  1 Aug 2008 03:08:25 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6BB8928C23A
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 03:08:23 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.583
X-Spam-Level: 
X-Spam-Status: No, score=-2.583 tagged_above=-999 required=5 tests=[AWL=0.017, 
	BAYES_00=-2.599, SPF_PASS=-0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EUuN3cUOxcTX for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 03:08:22 -0700 (PDT)
Received: from nostrum.com (unknown [IPv6:2001:470:1f03:267::2])
	by core3.amsl.com (Postfix) with ESMTP id 3A9423A6D84
	for <sip@ietf.org>; Fri,  1 Aug 2008 03:08:22 -0700 (PDT)
Received: from orthrus.meeting.ietf.org ([130.129.19.226])
	(authenticated bits=0)
	by nostrum.com (8.14.2/8.14.1) with ESMTP id m71A8b3v010363
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Fri, 1 Aug 2008 05:08:38 -0500 (CDT) (envelope-from adam@nostrum.com)
Message-ID: <4892E0AA.7010300@nostrum.com>
Date: Fri, 01 Aug 2008 11:08:42 +0100
From: Adam Roach <adam@nostrum.com>
User-Agent: Thunderbird 2.0.0.16 (Macintosh/20080707)
MIME-Version: 1.0
To: Dean Willis <dean.willis@softarmor.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<FE11649F-C3C2-494F-8C40-569E83E91B80@softarmor.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26D3A@GBNTHT12009MSX.gb002.siemens.net>	<4DAE5E60BA49D8419D7C8832503F5FFC072817B5A6@EVS10.ams.gblxint.com>	<06BFFD03-B8FC-47FC-8659-43BF4B60A3B6@softarmor.com>	<4891BAA4.7040305@nostrum.com>
	<8151E805-AEF1-4889-8F71-EF33659661A6@softarmor.com>
In-Reply-To: <8151E805-AEF1-4889-8F71-EF33659661A6@softarmor.com>
Received-SPF: pass (nostrum.com: 130.129.19.226 is authenticated by a trusted
	mechanism)
X-Virus-Scanned: ClamAV 0.93.3/7908/Fri Aug 1 03:42:42 2008 on
	shaman.nostrum.com
X-Virus-Status: Clean
Cc: SIP IETF <sip@ietf.org>, Adam Uzelac <Adam.Uzelac@globalcrossing.com>
Subject: Re: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
 SIP	Identity)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

On 8/1/08 11:05 AM, Dean Willis wrote:
>
>>
>> Here's the problem... if I trust a B2BUA, it doesn't necessarily mean 
>> that I'll trust everything it trusts. If Bob's UA is going to make an 
>> informed choice, we need it to be able to examine a chain of custody 
>> for the identity, at the very least.
>>
>
> Is the stack of "verified by" parameters in history-Info adequate, or 
> do you want to be able to check each transitive crypto operation?
>
> If the latter, we'd have to do something like add each pre-edit 
> message as a sipfrag body onto the current message. That could make 
> for some rather large SIP requests.  Maybe a diff format could make it 
> better, but it is still going to get chunky.

How many editing boxes do you expect in the middle here?

/a
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 03:13:43 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 65D023A6D8C;
	Fri,  1 Aug 2008 03:13:43 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 36AFB3A6D7F
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 03:13:42 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id eoLNw77i5GCw for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 03:13:41 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 66ED63A6D8B
	for <sip@ietf.org>; Fri,  1 Aug 2008 03:13:41 -0700 (PDT)
Received: from dwillis-mb1.meeting.ietf.org ([130.129.21.41])
	(authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m71AD274014998
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Fri, 1 Aug 2008 05:13:05 -0500
Message-Id: <B63409E9-F3BF-4E6E-A74B-4FD7347B085E@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Adam Roach <adam@nostrum.com>
In-Reply-To: <4892E0AA.7010300@nostrum.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Fri, 1 Aug 2008 11:12:56 +0100
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<FE11649F-C3C2-494F-8C40-569E83E91B80@softarmor.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26D3A@GBNTHT12009MSX.gb002.siemens.net>	<4DAE5E60BA49D8419D7C8832503F5FFC072817B5A6@EVS10.ams.gblxint.com>	<06BFFD03-B8FC-47FC-8659-43BF4B60A3B6@softarmor.com>	<4891BAA4.7040305@nostrum.com>
	<8151E805-AEF1-4889-8F71-EF33659661A6@softarmor.com>
	<4892E0AA.7010300@nostrum.com>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <sip@ietf.org>, Adam Uzelac <Adam.Uzelac@globalcrossing.com>
Subject: Re: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
	SIP	Identity)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 1, 2008, at 11:08 AM, Adam Roach wrote:

> On 8/1/08 11:05 AM, Dean Willis wrote:
>>
>>>
>>> Here's the problem... if I trust a B2BUA, it doesn't necessarily  
>>> mean that I'll trust everything it trusts. If Bob's UA is going to  
>>> make an informed choice, we need it to be able to examine a chain  
>>> of custody for the identity, at the very least.
>>>
>>
>> Is the stack of "verified by" parameters in history-Info adequate,  
>> or do you want to be able to check each transitive crypto operation?
>>
>> If the latter, we'd have to do something like add each pre-edit  
>> message as a sipfrag body onto the current message. That could make  
>> for some rather large SIP requests.  Maybe a diff format could make  
>> it better, but it is still going to get chunky.
>
> How many editing boxes do you expect in the middle here?

I have no idea. For media steering, four might be a typical case --  
originating, transit entry, transit exit, and terminating SBCs. Worst  
case? Who knows . . .

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 03:19:50 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C4EA53A6B15;
	Fri,  1 Aug 2008 03:19:50 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CD66F28C1B7
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 03:19:49 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.585
X-Spam-Level: 
X-Spam-Status: No, score=-2.585 tagged_above=-999 required=5 tests=[AWL=0.015, 
	BAYES_00=-2.599, SPF_PASS=-0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id j9CTxPZGdj7C for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 03:19:49 -0700 (PDT)
Received: from nostrum.com (unknown [IPv6:2001:470:1f03:267::2])
	by core3.amsl.com (Postfix) with ESMTP id DD35F3A6B15
	for <sip@ietf.org>; Fri,  1 Aug 2008 03:19:43 -0700 (PDT)
Received: from orthrus.meeting.ietf.org ([130.129.19.226])
	(authenticated bits=0)
	by nostrum.com (8.14.2/8.14.1) with ESMTP id m71AJvYX011036
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Fri, 1 Aug 2008 05:19:59 -0500 (CDT) (envelope-from adam@nostrum.com)
Message-ID: <4892E352.6020006@nostrum.com>
Date: Fri, 01 Aug 2008 11:20:02 +0100
From: Adam Roach <adam@nostrum.com>
User-Agent: Thunderbird 2.0.0.16 (Macintosh/20080707)
MIME-Version: 1.0
To: Dean Willis <dean.willis@softarmor.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<FE11649F-C3C2-494F-8C40-569E83E91B80@softarmor.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26D3A@GBNTHT12009MSX.gb002.siemens.net>	<4DAE5E60BA49D8419D7C8832503F5FFC072817B5A6@EVS10.ams.gblxint.com>	<06BFFD03-B8FC-47FC-8659-43BF4B60A3B6@softarmor.com>	<4891BAA4.7040305@nostrum.com>	<8151E805-AEF1-4889-8F71-EF33659661A6@softarmor.com>	<4892E0AA.7010300@nostrum.com>
	<B63409E9-F3BF-4E6E-A74B-4FD7347B085E@softarmor.com>
In-Reply-To: <B63409E9-F3BF-4E6E-A74B-4FD7347B085E@softarmor.com>
Received-SPF: pass (nostrum.com: 130.129.19.226 is authenticated by a trusted
	mechanism)
X-Virus-Scanned: ClamAV 0.93.3/7908/Fri Aug 1 03:42:42 2008 on
	shaman.nostrum.com
X-Virus-Status: Clean
Cc: SIP IETF <sip@ietf.org>, Adam Uzelac <Adam.Uzelac@globalcrossing.com>
Subject: Re: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
 SIP	Identity)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

On 8/1/08 11:12 AM, Dean Willis wrote:
>
>>
>> How many editing boxes do you expect in the middle here?
>
> I have no idea. For media steering, four might be a typical case -- 
> originating, transit entry, transit exit, and terminating SBCs. Worst 
> case? Who knows . . .

Four media-path relays, you say?

What kind of RTT latency are you envisioning? Is this for a phone-call 
type scenario, or are users expected to resort to saying "over" after 
each speech burst to prevent talking on top of each other?

/a
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 05:55:02 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E25393A6970;
	Fri,  1 Aug 2008 05:55:01 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8255728C156
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 05:54:59 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 1.143
X-Spam-Level: *
X-Spam-Status: No, score=1.143 tagged_above=-999 required=5 tests=[AWL=0.278, 
	BAYES_20=-0.74, HELO_MISMATCH_NET=0.611, HTML_MESSAGE=0.001,
	RELAY_IS_203=0.994]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dfN5usn8eDj3 for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 05:54:58 -0700 (PDT)
Received: from mx-01.nestgroup.net (NeSTGROUP.NET [203.200.157.75])
	by core3.amsl.com (Postfix) with ESMTP id 8791728C1F5
	for <sip@ietf.org>; Fri,  1 Aug 2008 05:54:57 -0700 (PDT)
Received: from MAIL-TVM.tvm.nestgroup.net ([192.168.192.74])
	by mx-01.nestgroup.net (8.13.1/8.13.1) with ESMTP id m71DGWMp005968
	for <sip@ietf.org>; Fri, 1 Aug 2008 18:46:45 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 1 Aug 2008 18:22:45 +0530
Message-ID: <9A1299C7A40D7447A108107E951450CA091D88B6@MAIL-TVM.tvm.nestgroup.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Required suggestions for SIP Tools evaluation
Thread-Index: Acjz1X4wMrjNrWW1TkuWjaQXF3euag==
From: "Anisha Kumar" <anisha.kumar@nestgroup.net>
To: <sip@ietf.org>
Subject: [Sip] Required suggestions for SIP Tools evaluation
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1780343986=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1780343986==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8F3D5.7E327DA6"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C8F3D5.7E327DA6
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,=20

 I am required to compare a few SIP sdks / toolkits and evaluate them
for their performance. What are all the parameters/attributes/ quality
factors that are to be considered for comparing. It would be highly
helpful if someone could provide pointers to the same.

Thanks in advance,
Anisha

------_=_NextPart_001_01C8F3D5.7E327DA6
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7638.1">
<TITLE>Required suggestions for SIP Tools evaluation</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT COLOR=3D"#000080" FACE=3D"Palatino Linotype">Hi all, </FONT>
</P>

<P><FONT COLOR=3D"#000080" FACE=3D"Palatino Linotype">&nbsp;I am =
required to compare a few SIP sdks / toolkits and evaluate them for =
their performance. What are all the parameters/attributes/ quality =
factors that are to be considered for comparing. It would be highly =
helpful if someone could provide pointers to the same.</FONT></P>

<P><FONT COLOR=3D"#000080" FACE=3D"Palatino Linotype">Thanks in =
advance,</FONT>

<BR><FONT COLOR=3D"#000080" FACE=3D"Palatino Linotype">Anisha</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C8F3D5.7E327DA6--

--===============1780343986==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1780343986==--


From sip-bounces@ietf.org  Fri Aug  1 06:47:29 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 999B63A6CE3;
	Fri,  1 Aug 2008 06:47:29 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6E16A3A6CE3
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 06:47:28 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.468
X-Spam-Level: 
X-Spam-Status: No, score=-0.468 tagged_above=-999 required=5 tests=[AWL=0.027, 
	BAYES_00=-2.599, FH_RELAY_NODNS=1.451, HELO_MISMATCH_COM=0.553, 
	RDNS_NONE=0.1]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 9IhvYGAK+Muh for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 06:47:27 -0700 (PDT)
Received: from kilo.rtfm.com (unknown [74.95.2.169])
	by core3.amsl.com (Postfix) with ESMTP id 894573A6CA6
	for <sip@ietf.org>; Fri,  1 Aug 2008 06:47:27 -0700 (PDT)
Received: from kilo-2.local (localhost [127.0.0.1])
	by kilo.rtfm.com (Postfix) with ESMTP id 1B8C9516C54;
	Fri,  1 Aug 2008 06:46:10 -0700 (PDT)
Date: Fri, 01 Aug 2008 06:46:10 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: "Dan Wing" <dwing@cisco.com>
In-Reply-To: <0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
User-Agent: Wanderlust/2.15.5 (Almost Unreal) Emacs/22.1 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080801134611.1B8C9516C54@kilo.rtfm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

At Fri, 1 Aug 2008 09:36:36 +0100,
Dan Wing wrote:
> 
> > At Thu, 31 Jul 2008 20:54:43 -0400,
> > Hadriel Kaplan wrote:
> > > 
> > > 
> > > 
> > > > -----Original Message-----
> > > > From: Eric Rescorla [mailto:ekr@networkresonance.com]
> > > >
> > > > Funny you should mention that.
> > > >
> > > > It's becoming increasingly clear that VBR codecs leak a fair
> > > > amount of information, even when they are encrypted [WBC+08].
> > > > So, if, for instance, you were planning to use a fixed-rate
> > > > codec and an attacker could force you into a VBR codec, that
> > > > might leak information.
> > > 
> > > Fascinating paper. (truly) But it sounds more like just a reason to
> > > fix SRTP for VBR, through random padding or whatever.
> > 
> > I haven't studied the problem, but I suspect random padding
> > is of limited use because it averages out. Probably better
> > to use a fixed length codec.
> > 
> > However, I think focusing on that misses the larger point: the UAC and
> > UAS have certain desires as expressed in the messages/SDP
> > To the extent to which we allow the intermediaries to change
> > those messages, we need to carefully analyze each instance,
> > and this analysis may actually depend on facts yet to be 
> > discovered.
> 
> 4474 allows intermediaries to change SDP, and re-create a new
> >From and a new signature. 

Well, it allows it in the sense that there's no known
cryptographic way to stop it in any system, then sure.


> This (a) destroys end-to-end identity 
> (which is the subject of this thread) *and* (b) allows 
> intermediaries to perform the very downgrade attack you
> cited ([WBC+08]).
> 
> This is why I want to improve upon 4474.

I don't agree with this analysis.

Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.
It's 4474 signed by atlanta.com. Now, some SBC in the middle
edits the SDP. This breaks the signature. 

At this point, when Bob gets the message, he knows:

(1) This message claims to be from Alice.
(2) The signature was broken.

He therefore has no knowledge of what happen. He can choose to
accept or reject the call, but can't reasonably infer that
the call came from Alice or anything else about Alice's 
intentions.


Now, if the SBC resigns, then Bob gets a valid message
from somebody else other than Alice. Effectively, the
SBC. Now, the SBC claims that it is connecting Bob to
Alice, but it could be lying. If Bob trusts the SBC,
he can accept the call, but he's trusting the SBC.
Sure, the SBC can edit the SDP to replace codecs, but
it can do *anything*. It could, for instance, replace
the DTLS-SRTP fingerprint. This isn't surprising, since
the SBC is really a B2BUA and this is a call from it.


The schemes being proposed here allow the RFC 4474 signature
to survive some editing of the message by the SBC. The
question here is the extent to which that enables *silent*
attacks by the SBC. To take an extreme case, if we allowed
editing of the fingerprint, then Bob could think he was
talking to Alice, but he was actually talking to the
SBC. Editing the codecs to allow this kind of traffic
analysis is a (much) less serious version of the same
threat. Again, this differs qualitatively from the former
case because Bob does not know he is under attack.

The question, then, when someone proposes exempting some
field from the signature, is what silent attacks it enables.
I have yet to see any satisfactory analysis along these
lines.

-Ekr






_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 07:25:34 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id ACF9D3A68A5;
	Fri,  1 Aug 2008 07:25:34 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 714083A68A5
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 07:25:33 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -104.449
X-Spam-Level: 
X-Spam-Status: No, score=-104.449 tagged_above=-999 required=5
	tests=[AWL=2.150, BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4,
	USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4Q6SA4bYEGyo for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 07:25:32 -0700 (PDT)
Received: from wolverine01.qualcomm.com (wolverine01.qualcomm.com
	[199.106.114.254])
	by core3.amsl.com (Postfix) with ESMTP id D51C43A6A9C
	for <sip@ietf.org>; Fri,  1 Aug 2008 07:24:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple;
	d=qualcomm.com; i=hardie@qualcomm.com; q=dns/txt;
	s=qcdkim; t=1217600712; x=1249136712;
	h=mime-version:message-id:in-reply-to:references:date:to:
	from:subject:cc:content-type:x-ironport-av;
	z=MIME-Version:=201.0|Message-ID:=20<p06240603c4b8cbc6f079
	@[130.129.21.25]>|In-Reply-To:=20<20080801134611.1B8C9516
	C54@kilo.rtfm.com>|References:=20<0D5F89FAC29E2C41B98A6A7
	62007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>=0D=0A
	=20<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>=0D=0A
	=20<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.
	gblxint.com>=0D=0A=20<0D5F89FAC29E2C41B98A6A762007F5D0F26
	CCB@GBNTHT12009MSX.gb002.siemens.net>=0D=0A=20<48919248.7
	060600@cisco.com>=09<0ae201c8f310$d183a0f0$3675150a@cisco
	.com>=0D=0A=20<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB
	@mail.acmepacket.com>=0D=0A=20<20080731205152.03E7E514892
	@kilo.rtfm.com>=0D=0A=20<E6C2E8958BA59A4FB960963D475F7AC3
	0F04C5632F@mail.acmepacket.com>=0D=0A=20<20080801010212.6
	54B5515743@kilo.rtfm.com>=0D=0A=20<0a2101c8f3b1$b75dd500$
	6a94150a@cisco.com>=0D=0A=20<20080801134611.1B8C9516C54@k
	ilo.rtfm.com>|Date:=20Fri,=201=20Aug=202008=2015:24:28=20
	+0100|To:=20Eric=20Rescorla=20<ekr@networkresonance.com>,
	=20Dan=20Wing=20<dwing@cisco.com>|From:=20Ted=20Hardie=20
	<hardie@qualcomm.com>|Subject:=20Re:=20[Sip]=20Thoughts
	=20on=20SIP=20Identity=20issues|CC:=20"'Cullen=20Jennings
	'"=20<fluffy@cisco.com>,=0D=0A=20=20=20=20=20=20=20=20"'U
	zelac,=09Adam'"=0D=0A=09<Adam.Uzelac@globalcrossing.com>,
	=0D=0A=20=20=20=20=20=20=20=20"'SIP=20IETF'"=20<sip@ietf.
	org>,=0D=0A=20=20=20=20=20=20=20=20"'Elwell,=20John'"=0D
	=0A=09<john.elwell@siemens.com>|Content-Type:=20text/plai
	n=3B=20charset=3D"us-ascii"|X-IronPort-AV:=20E=3DMcAfee
	=3Bi=3D"5200,2160,5351"=3B=20a=3D"5239544";
	bh=PjMKKLhrDVouneS02JJIDVBROZRi725dGx75VJ6gl7g=;
	b=chfyZVUapsjcFmjXDp68iyk0R6/3QDosKaca8Lt02vBkG85HrpOLenIn
	DZK+HVdu44VUi2pduqDLS7dMWJnFgH6n1KLCXBd5m5cLebJ7+TlMMD9ly
	eTwrepkiY0Bl5AWvBiICQibdw51GzNtewJTd7juKDDFKfExRyHo1oVuUK g=;
X-IronPort-AV: E=McAfee;i="5200,2160,5351"; a="5239544"
Received: from pdmz-ns-mip.qualcomm.com (HELO ithilien.qualcomm.com)
	([199.106.114.10])
	by wolverine01.qualcomm.com with ESMTP/TLS/DHE-RSA-AES256-SHA;
	01 Aug 2008 07:24:37 -0700
Received: from msgtransport04.qualcomm.com (msgtransport04.qualcomm.com
	[129.46.61.156])
	by ithilien.qualcomm.com (8.14.2/8.14.2/1.0) with ESMTP id
	m71EOcxB003881
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL);
	Fri, 1 Aug 2008 07:24:38 -0700
Received: from nasanexhc02.na.qualcomm.com (nasanexhc02.na.qualcomm.com
	[172.30.33.23])
	by msgtransport04.qualcomm.com (8.14.2/8.14.2/1.0) with ESMTP id
	m71EOXmI028564
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NOT);
	Fri, 1 Aug 2008 07:24:33 -0700
Received: from [130.129.21.25] (10.50.0.25) by qcmail1.qualcomm.com
	(172.30.33.23) with Microsoft SMTP Server (TLS) id 8.1.291.1;
	Fri, 1 Aug 2008 07:24:32 -0700
MIME-Version: 1.0
Message-ID: <p06240603c4b8cbc6f079@[130.129.21.25]>
In-Reply-To: <20080801134611.1B8C9516C54@kilo.rtfm.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
Date: Fri, 1 Aug 2008 15:24:28 +0100
To: Eric Rescorla <ekr@networkresonance.com>, Dan Wing <dwing@cisco.com>
From: Ted Hardie <hardie@qualcomm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, 'SIP IETF' <sip@ietf.org>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>, "'Elwell,
	John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> > This (a) destroys end-to-end identity
>> (which is the subject of this thread) *and* (b) allows
>> intermediaries to perform the very downgrade attack you
>> cited ([WBC+08]).
>>
>> This is why I want to improve upon 4474.
>
>I don't agree with this analysis.
>
>Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.
>It's 4474 signed by atlanta.com. Now, some SBC in the middle
>edits the SDP. This breaks the signature.
>
>At this point, when Bob gets the message, he knows:
>
>(1) This message claims to be from Alice.
>(2) The signature was broken.
>
>He therefore has no knowledge of what happen. He can choose to
>accept or reject the call, but can't reasonably infer that
>the call came from Alice or anything else about Alice's
>intentions.
>
>
>Now, if the SBC resigns, then Bob gets a valid message
>from somebody else other than Alice. Effectively, the
>SBC. Now, the SBC claims that it is connecting Bob to
>Alice, but it could be lying. If Bob trusts the SBC,
>he can accept the call, but he's trusting the SBC.

This is a far more cogent description of what I suggested
at the mic as "you broke it, you bought it".   It retains
the property that 4474 is meant to provide (it shows
when an SDP was changed), but it provides a mechanism
to allow the SDP to continue to progress with an indication
of who caused the previous signature to break.

The obvious questions that arise ( "Why should I trust
mumblefratz.net's signature over sdp from 'jdrosen@cisco.com',
when my provider is rassemfratchit.com"?) are ones we've
seen before in other contexts.  They may seem intractable,
but the blunt truth is that the cryptographic trust issue here
reflects the user trust issues. 

My two cents,
				Ted
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  1 09:17:23 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6E5973A6A8C;
	Fri,  1 Aug 2008 09:17:23 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1BB133A6914
	for <sip@core3.amsl.com>; Fri,  1 Aug 2008 09:17:22 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.454
X-Spam-Level: 
X-Spam-Status: No, score=-6.454 tagged_above=-999 required=5 tests=[AWL=0.145, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 9g2Cq5Kv-IBb for <sip@core3.amsl.com>;
	Fri,  1 Aug 2008 09:17:20 -0700 (PDT)
Received: from sj-iport-4.cisco.com (sj-iport-4.cisco.com [171.68.10.86])
	by core3.amsl.com (Postfix) with ESMTP id 492B03A6A65
	for <sip@ietf.org>; Fri,  1 Aug 2008 09:15:32 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,294,1215388800"; d="scan'208";a="19181166"
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-4.cisco.com with ESMTP; 01 Aug 2008 16:15:43 +0000
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-3.cisco.com (8.12.11/8.12.11) with ESMTP id m71GFhHV007183; 
	Fri, 1 Aug 2008 09:15:43 -0700
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m71GFepl016426;
	Fri, 1 Aug 2008 16:15:42 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 12:15:41 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Aug 2008 12:15:41 -0400
Message-ID: <489336E4.6050204@cisco.com>
Date: Fri, 01 Aug 2008 12:16:36 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Eric Rescorla <ekr@networkresonance.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>	<48919248.7060600@cisco.com>	<0ae201c8f310$d183a0f0$3675150a@cisco.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>	<20080731205152.03E7E514892@kilo.rtfm.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>	<20080801010212.654B5515743@kilo.rtfm.com>	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
In-Reply-To: <20080801134611.1B8C9516C54@kilo.rtfm.com>
X-OriginalArrivalTime: 01 Aug 2008 16:15:41.0124 (UTC)
	FILETIME=[D7AE2040:01C8F3F1]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=4754; t=1217607343;
	x=1218471343; c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=6Pvzlayj/hl0O1Cp9nXuIu7nBpV/dUZeQd0ow+lj3oc=;
	b=O8QN4Tpz4gGRY32adRORIcj92DqPDbuuTn/8XRyndlp/0giUGZ9SKThjrh
	PF/R4eSTVfnm89W4ZpRPqB7z1OPDdO9laoYHCjmU4B0+XOagUHjpt7nwAoc4
	zxb8AIKMwz;
Authentication-Results: sj-dkim-3; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim3002 verified; ); 
Cc: 'Cullen Jennings' <fluffy@cisco.com>, 'SIP IETF' <sip@ietf.org>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>, "'Elwell,
	John'" <john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

What if the SBC did the following:

- made whatever changes it wants to make to the incoming
   request to derive the message it wants to send.

- calculated the reverse diff the transforms its modified
   message into the message it received.

- affixed the reverse diff to the new message as another
   body part.

- signed the whole thing as itself.

- sent it on.

When the UAS receives this, it first validates the signature and decides 
if it trusts the signer.

If so, it may then use the reverse diff to reconstruct the unmodified 
message. It can then validate any signature that may contain to verify 
the actual caller. This can of course be applied recursively.

At any stage it can just decide to trust any assertions made by the 
intermediary.

	Paul

Eric Rescorla wrote:
> At Fri, 1 Aug 2008 09:36:36 +0100,
> Dan Wing wrote:
>>> At Thu, 31 Jul 2008 20:54:43 -0400,
>>> Hadriel Kaplan wrote:
>>>>
>>>>
>>>>> -----Original Message-----
>>>>> From: Eric Rescorla [mailto:ekr@networkresonance.com]
>>>>>
>>>>> Funny you should mention that.
>>>>>
>>>>> It's becoming increasingly clear that VBR codecs leak a fair
>>>>> amount of information, even when they are encrypted [WBC+08].
>>>>> So, if, for instance, you were planning to use a fixed-rate
>>>>> codec and an attacker could force you into a VBR codec, that
>>>>> might leak information.
>>>> Fascinating paper. (truly) But it sounds more like just a reason to
>>>> fix SRTP for VBR, through random padding or whatever.
>>> I haven't studied the problem, but I suspect random padding
>>> is of limited use because it averages out. Probably better
>>> to use a fixed length codec.
>>>
>>> However, I think focusing on that misses the larger point: the UAC and
>>> UAS have certain desires as expressed in the messages/SDP
>>> To the extent to which we allow the intermediaries to change
>>> those messages, we need to carefully analyze each instance,
>>> and this analysis may actually depend on facts yet to be 
>>> discovered.
>> 4474 allows intermediaries to change SDP, and re-create a new
>> >From and a new signature. 
> 
> Well, it allows it in the sense that there's no known
> cryptographic way to stop it in any system, then sure.
> 
> 
>> This (a) destroys end-to-end identity 
>> (which is the subject of this thread) *and* (b) allows 
>> intermediaries to perform the very downgrade attack you
>> cited ([WBC+08]).
>>
>> This is why I want to improve upon 4474.
> 
> I don't agree with this analysis.
> 
> Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.
> It's 4474 signed by atlanta.com. Now, some SBC in the middle
> edits the SDP. This breaks the signature. 
> 
> At this point, when Bob gets the message, he knows:
> 
> (1) This message claims to be from Alice.
> (2) The signature was broken.
> 
> He therefore has no knowledge of what happen. He can choose to
> accept or reject the call, but can't reasonably infer that
> the call came from Alice or anything else about Alice's 
> intentions.
> 
> 
> Now, if the SBC resigns, then Bob gets a valid message
> from somebody else other than Alice. Effectively, the
> SBC. Now, the SBC claims that it is connecting Bob to
> Alice, but it could be lying. If Bob trusts the SBC,
> he can accept the call, but he's trusting the SBC.
> Sure, the SBC can edit the SDP to replace codecs, but
> it can do *anything*. It could, for instance, replace
> the DTLS-SRTP fingerprint. This isn't surprising, since
> the SBC is really a B2BUA and this is a call from it.
> 
> 
> The schemes being proposed here allow the RFC 4474 signature
> to survive some editing of the message by the SBC. The
> question here is the extent to which that enables *silent*
> attacks by the SBC. To take an extreme case, if we allowed
> editing of the fingerprint, then Bob could think he was
> talking to Alice, but he was actually talking to the
> SBC. Editing the codecs to allow this kind of traffic
> analysis is a (much) less serious version of the same
> threat. Again, this differs qualitatively from the former
> case because Bob does not know he is under attack.
> 
> The question, then, when someone proposes exempting some
> field from the signature, is what silent attacks it enables.
> I have yet to see any satisfactory analysis along these
> lines.
> 
> -Ekr
> 
> 
> 
> 
> 
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 06:29:46 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 99DDC3A692D;
	Sat,  2 Aug 2008 06:29:46 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C324E3A6910
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 06:29:45 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.607
X-Spam-Level: 
X-Spam-Status: No, score=-1.607 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, DATE_IN_PAST_12_24=0.992]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dNqy2JnPSVkN for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 06:29:45 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id 920703A698C
	for <SIP@ietf.org>; Sat,  2 Aug 2008 06:29:34 -0700 (PDT)
Received: from c-75-68-119-237.hsd1.nh.comcast.net ([75.68.119.237]:63301
	helo=[192.168.15.101])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KPHB4-0000yh-9G for SIP@ietf.org; Sat, 02 Aug 2008 06:29:46 -0700
Message-Id: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: SIP IETF <SIP@ietf.org>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Fri, 1 Aug 2008 16:07:37 -0400
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

The current text says we do not allow multiple Info-Packages per INFO  
message.  Although not stated (and I will state explicitly if we  
continue to go in this direction), this nominally makes parsers easier  
and makes failure handling straightforward.

I would offer the former issue is not real.  Namely the way of  
transporting multiple Info-Packages in an INFO message would be to  
encapsulate in a multipart MIME body.  However, all SIP endpoints must  
support multipart MIME, so this is a non-issue.

The latter issue is quite true in theory.  If I send two Info Package  
bodies, and for some reason the UAS barfs on one of those bodies, the  
UAS does not have a clean way of indicating which body barfed, and  
both effectively get treated at the UAC as failed.  The reason I  
caveated this issue "in theory" is I cannot think of a situation where  
this would matter.  Most of these usages are all-or-nothing, which  
means simply failing is OK.

Moreover, I would offer the first thing people will ask for is  
transporting multiple INFO messages in a single message....
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 06:29:47 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4BC1C3A69F6;
	Sat,  2 Aug 2008 06:29:47 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CED003A692D
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 06:29:45 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.607
X-Spam-Level: 
X-Spam-Status: No, score=-1.607 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, DATE_IN_PAST_12_24=0.992]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cBDl30UomMoR for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 06:29:45 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id 0B53E3A692E
	for <SIP@ietf.org>; Sat,  2 Aug 2008 06:29:28 -0700 (PDT)
Received: from [75.68.119.237] (port=63301 helo=[192.168.15.101])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KPHAh-0000yh-1L for SIP@ietf.org; Sat, 02 Aug 2008 06:29:24 -0700
Message-Id: <2BC07A35-3F7C-43AD-B86A-35CC7E510F87@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: SIP IETF <SIP@ietf.org>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Fri, 1 Aug 2008 16:00:53 -0400
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: [Sip] INFO issues: (1) Package Support Detection and (2) Info
	Packages for Legacy Use
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

The current text states that if a UA does not support receipt of any  
Info Packages, it MUST drop the Info-Recv header.  Likewise, if the UA  
does not support sending any Info Packages, as would be the case if a  
UAS does not support any of the Info Packages offered by the UAC, it  
MUST drop the Info-Send header.

As an extreme example, if a UAS does not want to send any Info  
Packages to a UAC and simultaneously the UAS does not support any of  
the Info Packages offered by the UAC, the UAS will have neither an  
Info-Send nor an Info-Recv header.  In this case, the UAC cannot  
disambiguate between a legacy UAS and an Info Package-aware UAS that  
simply does not want to receive INFO messages.

Issue #1:
Is this a problem?  On the one hand, one could argue a UAS that does  
not support any INFO packages may still support proprietary INFO  
packages or the legacy, standards track INFO usages.  On the other  
hand, one could argue a UAS that supports INFO packages yet does not  
want to process the requested Info Packages needs a way to communicate  
that to the UAC.  In this case, the easiest solution (which also works  
for the legacy interoperability case) is for the UA to include an  
empty Info-Recv or Info-Send header.  Thus the "yes / no" question  
here is,
   Should we change the text to mandate Info Package-aware UAs to use  
empty
   Info-Recv and Info-Send headers to indicate the desire to not  
receive or
   not send Info Packages, respectively?

Issue #2:
If we answer in the affirmative on Issue #1, then we need to port the  
existing, standards track usage of INFO, namely SIP-T (RFC 3372) for  
ISUP and QSIG (RFC 3398).  This has the added benefit of providing  
instant examples of the Info Package framework.  Moreover, it  
populates the IANA registry with meaningful entries.  I would  
volunteer to do that work, unless someone else feels strongly they  
want to do it. Thus the "yes / no" question here is,
   Should we port RFC 3372/3398 to the new Info Package framework,  
finishing to
   coincide with the completion of the Info Package framework?  I.e.,  
as a coherent
   whole, yet as two or three separate documents.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 06:48:38 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 13B1F3A697B;
	Sat,  2 Aug 2008 06:48:38 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5F5213A693F
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 06:48:36 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.103
X-Spam-Level: 
X-Spam-Status: No, score=-2.103 tagged_above=-999 required=5 tests=[AWL=0.496, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id i6cvZFrOOLrd for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 06:48:35 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id A35C73A68FF
	for <SIP@ietf.org>; Sat,  2 Aug 2008 06:48:35 -0700 (PDT)
Received: from [75.68.119.237] (port=60170 helo=[192.168.15.102])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KPHSo-0002wB-3n for SIP@ietf.org; Sat, 02 Aug 2008 06:48:06 -0700
Message-Id: <60AF1DB7-2720-45C9-B112-E2F03DDCB1D7@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: SIP IETF <SIP@ietf.org>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Sat, 2 Aug 2008 09:48:05 -0400
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: [Sip] INFO Issue: Throttling
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Oh boy - this is the big one.

Do we:

(1) Do the SIP thing and punt on the issue, risking the wrath of TSV  
when they realize we can storm the network?

(2) Cut and paste the SUB/NOTIFY throttling work, begging the  
question, "Why are we using INFO and not SUB/NOTIFY in the first place?"

(3) Mandate each package have a throttling negotiation mechanism (the  
current text)?

(4) Do something confusing and different?

Yuck.

Please discuss, or make a better proposal.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 07:11:50 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 54F523A69CC;
	Sat,  2 Aug 2008 07:11:50 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 05FD73A69C2
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 07:11:49 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.772
X-Spam-Level: 
X-Spam-Status: No, score=-1.772 tagged_above=-999 required=5
	tests=[AWL=-0.165, BAYES_00=-2.599, DATE_IN_PAST_12_24=0.992]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id PcUvlljs+5rg for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 07:11:48 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id 6121B3A6944
	for <SIP@ietf.org>; Sat,  2 Aug 2008 07:11:48 -0700 (PDT)
Received: from c-75-68-119-237.hsd1.nh.comcast.net ([75.68.119.237]:63301
	helo=[192.168.15.101])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KPHB2-0000yh-Ev for SIP@ietf.org; Sat, 02 Aug 2008 06:29:44 -0700
Message-Id: <A208E19E-DE69-4931-BA32-495093379F09@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: SIP IETF <SIP@ietf.org>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Fri, 1 Aug 2008 16:02:30 -0400
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: [Sip] INFO Issue: OPTIONS and REGISTER
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Is there any harm stating Info-Package, Send-Info, and Recv-Info are  
optional for OPTIONS and REGISTER?  I cannot think of any, but bring  
it up if you do.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 07:14:18 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4B8F83A69C2;
	Sat,  2 Aug 2008 07:14:18 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BE0553A69C2
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 07:14:17 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.731
X-Spam-Level: 
X-Spam-Status: No, score=-1.731 tagged_above=-999 required=5
	tests=[AWL=-0.124, BAYES_00=-2.599, DATE_IN_PAST_12_24=0.992]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id KC46Bq3qtkrI for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 07:14:17 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id 17D013A6944
	for <SIP@ietf.org>; Sat,  2 Aug 2008 07:14:17 -0700 (PDT)
Received: from c-75-68-119-237.hsd1.nh.comcast.net ([75.68.119.237]:63301
	helo=[192.168.15.101])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KPHB0-0000yh-69 for SIP@ietf.org; Sat, 02 Aug 2008 06:29:42 -0700
Message-Id: <2E002545-1846-4DEE-AFCF-6117845EFB52@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: SIP IETF <SIP@ietf.org>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Fri, 1 Aug 2008 16:00:59 -0400
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: [Sip] INFO Issue: Info-Send Procedures
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

The text currently says that if one endpoint indicates it does not  
support an Info-Package, that endpoint is to ignore subsequent Info- 
Send headers sent by the other endpoint that continues to indicate  
support for that Info-Package.

On the one hand, this continual resending of an Info-Send sends an  
ambiguous message to the recipient.  Namely, the recipient does not  
know the sender received their "I do not support that package" response.

On the other hand, this continual resending of an Info-Send offer does  
no harm, in that unless the recipient indicates support of that  
package, the sender will not send it.  Moreover, this continual  
resending would enable the recipient to subsequently accept the  
sending of the package at a later time.  I could theoretically imagine  
a situation where an endpoint wants to hold-off the other endpoint  
from sending INFOs related to a given package, until it releases the  
other end by eventually listing that package in the Info-Recv.

So, this is more of a discussion issue than a yes/no issue.  The  
topics to discuss are do we want to allow later negotiation or re- 
negotiation of Info Package support (currently this is not allowed by  
the draft past dialog establishment)?  If not, do we want to require  
senders to stop offering Info Packages the recipient has already  
indicated it does not support the package?

I do not want to do the loosey-goosey, "MAY send", in that we know  
that some implementations will renegotiate in error (if we decide  
there is no renegotiation) while others will barf on subsequent Info- 
Send headers (if we decide there is no renegotiation).

Related to this is we currently explicitly disallow renegotiation at  
re-INVITE and UPDATE time.  Do we really want this restriction?  OK  
with me.

What about REFER?  Here one clearly would want renegotiation, we the  
UAS will connect to another endpoint that may have different  
capabilities.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 07:26:41 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1A4A73A69CC;
	Sat,  2 Aug 2008 07:26:41 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9474E3A6955
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 07:26:39 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.203
X-Spam-Level: 
X-Spam-Status: No, score=-5.203 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, MIME_QP_LONG_LINE=1.396, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id jHGcD3vR3j7w for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 07:26:38 -0700 (PDT)
Received: from mhs03ykf.rim.net (mhs03ykf.rim.net [216.9.243.80])
	by core3.amsl.com (Postfix) with ESMTP id 24AB63A67FC
	for <SIP@ietf.org>; Sat,  2 Aug 2008 07:25:11 -0700 (PDT)
Received: from mhs03ykf.rim.net (unknown [127.0.0.1])
	by mhs03ykf.rim.net (Symantec Mail Security) with ESMTP id E71A758950; 
	Sat,  2 Aug 2008 10:25:33 -0400 (EDT)
X-AuditID: 0a401fcb-a9a31bb0000057be-98-48946e5d5cfc
Received: from XCH20YKF.rim.net (unknown [10.102.100.35])
	by mhs03ykf.rim.net (Symantec Mail Security) with ESMTP id 8C1D658930; 
	Sat,  2 Aug 2008 10:25:33 -0400 (EDT)
Received: from XCH47YKF.rim.net ([10.64.31.217]) by XCH20YKF.rim.net with
	Microsoft SMTPSVC(5.0.2195.6713); Sat, 2 Aug 2008 10:25:33 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sat, 2 Aug 2008 10:25:32 -0400
Message-ID: <61968779B8AC4C4BAB421D4C12F008C00D77303F@XCH47YKF.rim.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] INFO issues: (1) Package Support Detection and (2)
	InfoPackages for Legacy Use
Thread-Index: Acj0pAjHGM54N05yTsierpM2jw2bDAAB5Xdf
From: "Andrew Allen" <aallen@rim.com>
To: <eburger@standardstrack.com>,
	<SIP@ietf.org>
X-OriginalArrivalTime: 02 Aug 2008 14:25:33.0488 (UTC)
	FILETIME=[9FA2A300:01C8F4AB]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] INFO issues: (1) Package Support Detection and (2)
	InfoPackages for Legacy Use
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


My 2 cents

Issue #1
Yes

Issue #2:
Yes let's register the legacy packages. 

It indicates a seriousness about this as an update to INFO for continued usage and compliance with the standards usage of that method which hopefully over time will cause existing applications to be updated to comply with the new negotiation mechanism (similar to the evolution from strict routing to loose routing). It will also provide an example of how its done (IANA registration template to copy etc). Some message examples using  the mechanism with an existing package can also help here too.

Andrew

----- Original Message -----
From: sip-bounces@ietf.org <sip-bounces@ietf.org>
To: SIP IETF <SIP@ietf.org>
Sent: Fri Aug 01 16:00:53 2008
Subject: [Sip] INFO issues: (1) Package Support Detection and (2) InfoPackages for Legacy Use

The current text states that if a UA does not support receipt of any  
Info Packages, it MUST drop the Info-Recv header.  Likewise, if the UA  
does not support sending any Info Packages, as would be the case if a  
UAS does not support any of the Info Packages offered by the UAC, it  
MUST drop the Info-Send header.

As an extreme example, if a UAS does not want to send any Info  
Packages to a UAC and simultaneously the UAS does not support any of  
the Info Packages offered by the UAC, the UAS will have neither an  
Info-Send nor an Info-Recv header.  In this case, the UAC cannot  
disambiguate between a legacy UAS and an Info Package-aware UAS that  
simply does not want to receive INFO messages.

Issue #1:
Is this a problem?  On the one hand, one could argue a UAS that does  
not support any INFO packages may still support proprietary INFO  
packages or the legacy, standards track INFO usages.  On the other  
hand, one could argue a UAS that supports INFO packages yet does not  
want to process the requested Info Packages needs a way to communicate  
that to the UAC.  In this case, the easiest solution (which also works  
for the legacy interoperability case) is for the UA to include an  
empty Info-Recv or Info-Send header.  Thus the "yes / no" question  
here is,
   Should we change the text to mandate Info Package-aware UAs to use  
empty
   Info-Recv and Info-Send headers to indicate the desire to not  
receive or
   not send Info Packages, respectively?

Issue #2:
If we answer in the affirmative on Issue #1, then we need to port the  
existing, standards track usage of INFO, namely SIP-T (RFC 3372) for  
ISUP and QSIG (RFC 3398).  This has the added benefit of providing  
instant examples of the Info Package framework.  Moreover, it  
populates the IANA registry with meaningful entries.  I would  
volunteer to do that work, unless someone else feels strongly they  
want to do it. Thus the "yes / no" question here is,
   Should we port RFC 3372/3398 to the new Info Package framework,  
finishing to
   coincide with the completion of the Info Package framework?  I.e.,  
as a coherent
   whole, yet as two or three separate documents.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

---------------------------------------------------------------------
This transmission (including any attachments) may contain confidential information, privileged material (including material protected by the solicitor-client or other applicable privileges), or constitute non-public information. Any use of this information by anyone other than the intended recipient is prohibited. If you have received this transmission in error, please immediately reply to the sender and delete this information from your system. Use, dissemination, distribution, or reproduction of this transmission by unintended recipients is not authorized and may be unlawful.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 07:30:06 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C026E3A68BF;
	Sat,  2 Aug 2008 07:30:06 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6E1CD3A685B
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 07:30:04 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.524
X-Spam-Level: 
X-Spam-Status: No, score=-6.524 tagged_above=-999 required=5 tests=[AWL=0.075, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id w6hLpCNZl+aD for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 07:30:03 -0700 (PDT)
Received: from rtp-iport-1.cisco.com (rtp-iport-1.cisco.com [64.102.122.148])
	by core3.amsl.com (Postfix) with ESMTP id 1D78C3A6778
	for <SIP@ietf.org>; Sat,  2 Aug 2008 07:30:03 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,297,1215388800"; d="scan'208";a="16311687"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 02 Aug 2008 14:30:25 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m72EUPlU005202; 
	Sat, 2 Aug 2008 10:30:25 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m72EUPDK003939;
	Sat, 2 Aug 2008 14:30:25 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Aug 2008 10:30:25 -0400
Received: from [10.82.240.106] ([10.82.240.106]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Aug 2008 10:30:25 -0400
Message-ID: <48946FB8.1060300@cisco.com>
Date: Sat, 02 Aug 2008 10:31:20 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Eric Burger <eburger@standardstrack.com>
References: <2E002545-1846-4DEE-AFCF-6117845EFB52@standardstrack.com>
In-Reply-To: <2E002545-1846-4DEE-AFCF-6117845EFB52@standardstrack.com>
X-OriginalArrivalTime: 02 Aug 2008 14:30:25.0218 (UTC)
	FILETIME=[4D851A20:01C8F4AC]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2756; t=1217687425;
	x=1218551425; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20INFO=20Issue=3A=20Info-Send=20P
	rocedures |Sender:=20
	|To:=20Eric=20Burger=20<eburger@standardstrack.com>;
	bh=TAaO0MvHvXxdyzY8PJLSoaw/C7vD7/3ymd7Da+Om+w8=;
	b=Ky2LDWVD6iW7bBQkrNyRtAte6loSqqP59xt6JOY5LT1AqoRCVZQTW3oe3i
	xXJOtA9Cd6/rg7fj0h6bW85u6pnWGDrS7sFm8G0T/dL4I0Kwu98Lv5vxYITg
	CH+rkxLGmf;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Info-Send Procedures
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

A test needs to be applied to this - one that often causes problems. 
Namely, does with work with 3pcc? In particular, if there is a B2BUA in 
the middle, and it is carrying out a transfer on one side, while 
preserving an existing dialog on the other side, will things work right?

This requires the ability to renegotiate the supported features of the 
dialog.

	Paul

Eric Burger wrote:
> The text currently says that if one endpoint indicates it does not 
> support an Info-Package, that endpoint is to ignore subsequent Info-Send 
> headers sent by the other endpoint that continues to indicate support 
> for that Info-Package.
> 
> On the one hand, this continual resending of an Info-Send sends an 
> ambiguous message to the recipient.  Namely, the recipient does not know 
> the sender received their "I do not support that package" response.
> 
> On the other hand, this continual resending of an Info-Send offer does 
> no harm, in that unless the recipient indicates support of that package, 
> the sender will not send it.  Moreover, this continual resending would 
> enable the recipient to subsequently accept the sending of the package 
> at a later time.  I could theoretically imagine a situation where an 
> endpoint wants to hold-off the other endpoint from sending INFOs related 
> to a given package, until it releases the other end by eventually 
> listing that package in the Info-Recv.
> 
> So, this is more of a discussion issue than a yes/no issue.  The topics 
> to discuss are do we want to allow later negotiation or re-negotiation 
> of Info Package support (currently this is not allowed by the draft past 
> dialog establishment)?  If not, do we want to require senders to stop 
> offering Info Packages the recipient has already indicated it does not 
> support the package?
> 
> I do not want to do the loosey-goosey, "MAY send", in that we know that 
> some implementations will renegotiate in error (if we decide there is no 
> renegotiation) while others will barf on subsequent Info-Send headers 
> (if we decide there is no renegotiation).
> 
> Related to this is we currently explicitly disallow renegotiation at 
> re-INVITE and UPDATE time.  Do we really want this restriction?  OK with 
> me.
> 
> What about REFER?  Here one clearly would want renegotiation, we the UAS 
> will connect to another endpoint that may have different capabilities.
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 07:32:22 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id EE0033A692E;
	Sat,  2 Aug 2008 07:32:21 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B1EE33A692E
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 07:32:20 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.539
X-Spam-Level: 
X-Spam-Status: No, score=-6.539 tagged_above=-999 required=5 tests=[AWL=0.060, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FLrESEgWmtw4 for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 07:32:19 -0700 (PDT)
Received: from rtp-iport-1.cisco.com (rtp-iport-1.cisco.com [64.102.122.148])
	by core3.amsl.com (Postfix) with ESMTP id 978713A68BF
	for <SIP@ietf.org>; Sat,  2 Aug 2008 07:32:19 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,297,1215388800"; d="scan'208";a="16311804"
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-1.cisco.com with ESMTP; 02 Aug 2008 14:32:42 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m72EWgPp030590; 
	Sat, 2 Aug 2008 10:32:42 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m72EWgkg004310;
	Sat, 2 Aug 2008 14:32:42 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Aug 2008 10:32:41 -0400
Received: from [10.82.240.106] ([10.82.240.106]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Aug 2008 10:32:41 -0400
Message-ID: <48947041.2020002@cisco.com>
Date: Sat, 02 Aug 2008 10:33:37 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Eric Burger <eburger@standardstrack.com>
References: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
In-Reply-To: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
X-OriginalArrivalTime: 02 Aug 2008 14:32:41.0768 (UTC)
	FILETIME=[9EE8FA80:01C8F4AC]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1619; t=1217687562;
	x=1218551562; c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20INFO=20Issue=3A=20Multiple=20Bo
	dies |Sender:=20
	|To:=20Eric=20Burger=20<eburger@standardstrack.com>;
	bh=s8G0XWvQzx3vLaR5HyI4zSWQvdYrP4bNi7hkLyn/o3Q=;
	b=J8a9ZjGIobFIyDS1RF5EORuv3HIsdnmzNH/jCrrhXsaKuffTDdxxoqzSrK
	/nGmFbsUQr+KcnAceyX8wavaqD7fidT+Grlyr2Lz2lpZ4/bLVSH06lVaa00G
	qYY177MKPC;
Authentication-Results: rtp-dkim-1; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim1001 verified; ); 
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I think banning multiple body parts is a bad precedent to set right when 
we are trying to foster widespread support of multipart.

	Paul

Eric Burger wrote:
> The current text says we do not allow multiple Info-Packages per INFO 
> message.  Although not stated (and I will state explicitly if we 
> continue to go in this direction), this nominally makes parsers easier 
> and makes failure handling straightforward.
> 
> I would offer the former issue is not real.  Namely the way of 
> transporting multiple Info-Packages in an INFO message would be to 
> encapsulate in a multipart MIME body.  However, all SIP endpoints must 
> support multipart MIME, so this is a non-issue.
> 
> The latter issue is quite true in theory.  If I send two Info Package 
> bodies, and for some reason the UAS barfs on one of those bodies, the 
> UAS does not have a clean way of indicating which body barfed, and both 
> effectively get treated at the UAC as failed.  The reason I caveated 
> this issue "in theory" is I cannot think of a situation where this would 
> matter.  Most of these usages are all-or-nothing, which means simply 
> failing is OK.
> 
> Moreover, I would offer the first thing people will ask for is 
> transporting multiple INFO messages in a single message....
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 13:58:56 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 977BE3A6957;
	Sat,  2 Aug 2008 13:58:56 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C02203A6965
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 13:58:54 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.149
X-Spam-Level: 
X-Spam-Status: No, score=-6.149 tagged_above=-999 required=5 tests=[AWL=0.100, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id gjnmpUiQGqhH for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 13:58:52 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 033343A6972
	for <SIP@ietf.org>; Sat,  2 Aug 2008 13:58:52 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	71B0B200F7; Sat,  2 Aug 2008 22:59:14 +0200 (CEST)
X-AuditID: c1b4fb3e-ad196bb000004ec0-2a-4894caa2d917
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	5CF4020068; Sat,  2 Aug 2008 22:59:14 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Aug 2008 22:59:13 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sat, 2 Aug 2008 22:56:52 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78BE@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] INFO Issue: OPTIONS and REGISTER
thread-index: Acj0qcqHeSpyO7wrR26CpoDe0+SCBwAOH9/C
References: <A208E19E-DE69-4931-BA32-495093379F09@standardstrack.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Eric Burger" <eburger@standardstrack.com>,
	"SIP IETF" <SIP@ietf.org>
X-OriginalArrivalTime: 02 Aug 2008 20:59:14.0181 (UTC)
	FILETIME=[9EAA5B50:01C8F4E2]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] INFO Issue: OPTIONS and REGISTER
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi,

>Is there any harm stating Info-Package, Send-Info, and Recv-Info are 
>optional for OPTIONS and REGISTER?  I cannot think of any, but bring 
>it up if you do.
 
I see no harm. I see benefits. If sent in REGISTER, the registrar can then use the information for forking.
 
Regards,
 
Christer
 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 14:10:58 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D24E23A6937;
	Sat,  2 Aug 2008 14:10:58 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9751B3A688A
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 14:10:57 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.163
X-Spam-Level: 
X-Spam-Status: No, score=-6.163 tagged_above=-999 required=5 tests=[AWL=0.086, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GdqO0aIDJCKB for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 14:10:56 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 70D473A68C8
	for <SIP@ietf.org>; Sat,  2 Aug 2008 14:10:56 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	32A0E200B7; Sat,  2 Aug 2008 23:11:19 +0200 (CEST)
X-AuditID: c1b4fb3e-af99bbb000004ec0-e2-4894cd77cbf8
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	066502007D; Sat,  2 Aug 2008 23:11:19 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Aug 2008 23:11:18 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sat, 2 Aug 2008 23:08:55 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78C0@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] INFO Issue: Info-Send Procedures
thread-index: Acj0rFv4ov8kg4XwQrig831mUT1QLAAN506B
References: <2E002545-1846-4DEE-AFCF-6117845EFB52@standardstrack.com>
	<48946FB8.1060300@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Eric Burger" <eburger@standardstrack.com>
X-OriginalArrivalTime: 02 Aug 2008 21:11:18.0808 (UTC)
	FILETIME=[4E93A980:01C8F4E4]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Info-Send Procedures
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi,
 =

I think we should try to allow renegotiation of the supported features. The=
re may be certain packages I want to send and/or receive during certain par=
ts of a session.
 =

Regards,
 =

Christer

________________________________

L=E4hett=E4j=E4: sip-bounces@ietf.org puolesta: Paul Kyzivat
L=E4hetetty: la 2.8.2008 16:31
Vastaanottaja: Eric Burger
Kopio: SIP IETF
Aihe: Re: [Sip] INFO Issue: Info-Send Procedures



A test needs to be applied to this - one that often causes problems.
Namely, does with work with 3pcc? In particular, if there is a B2BUA in
the middle, and it is carrying out a transfer on one side, while
preserving an existing dialog on the other side, will things work right?

This requires the ability to renegotiate the supported features of the
dialog.

        Paul

Eric Burger wrote:
> The text currently says that if one endpoint indicates it does not
> support an Info-Package, that endpoint is to ignore subsequent Info-Send
> headers sent by the other endpoint that continues to indicate support
> for that Info-Package.
>
> On the one hand, this continual resending of an Info-Send sends an
> ambiguous message to the recipient.  Namely, the recipient does not know
> the sender received their "I do not support that package" response.
>
> On the other hand, this continual resending of an Info-Send offer does
> no harm, in that unless the recipient indicates support of that package,
> the sender will not send it.  Moreover, this continual resending would
> enable the recipient to subsequently accept the sending of the package
> at a later time.  I could theoretically imagine a situation where an
> endpoint wants to hold-off the other endpoint from sending INFOs related
> to a given package, until it releases the other end by eventually
> listing that package in the Info-Recv.
>
> So, this is more of a discussion issue than a yes/no issue.  The topics
> to discuss are do we want to allow later negotiation or re-negotiation
> of Info Package support (currently this is not allowed by the draft past
> dialog establishment)?  If not, do we want to require senders to stop
> offering Info Packages the recipient has already indicated it does not
> support the package?
>
> I do not want to do the loosey-goosey, "MAY send", in that we know that
> some implementations will renegotiate in error (if we decide there is no
> renegotiation) while others will barf on subsequent Info-Send headers
> (if we decide there is no renegotiation).
>
> Related to this is we currently explicitly disallow renegotiation at
> re-INVITE and UPDATE time.  Do we really want this restriction?  OK with
> me.
>
> What about REFER?  Here one clearly would want renegotiation, we the UAS
> will connect to another endpoint that may have different capabilities.
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 14:14:06 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F12E93A6862;
	Sat,  2 Aug 2008 14:14:05 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id DD4003A6937
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 14:14:04 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.174
X-Spam-Level: 
X-Spam-Status: No, score=-6.174 tagged_above=-999 required=5 tests=[AWL=0.075, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0FKLe1HG7ION for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 14:14:04 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id D2E0D3A6862
	for <SIP@ietf.org>; Sat,  2 Aug 2008 14:14:03 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	7EA17200D4; Sat,  2 Aug 2008 23:14:26 +0200 (CEST)
X-AuditID: c1b4fb3e-ad997bb000004ec0-15-4894ce3222b2
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	5E140200B7; Sat,  2 Aug 2008 23:14:26 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Aug 2008 23:14:26 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sat, 2 Aug 2008 23:11:33 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78C1@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] INFO Issue: Multiple Bodies
thread-index: Acj0rKdobKz9G8DGRraB+gBZj2Vv8QAN6/pj
References: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
	<48947041.2020002@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Eric Burger" <eburger@standardstrack.com>
X-OriginalArrivalTime: 02 Aug 2008 21:14:26.0509 (UTC)
	FILETIME=[BE748FD0:01C8F4E4]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi,
 =

I don't think we should ban support of multipart at this point.
 =

Regards,
 =

Christer

________________________________

L=E4hett=E4j=E4: sip-bounces@ietf.org puolesta: Paul Kyzivat
L=E4hetetty: la 2.8.2008 16:33
Vastaanottaja: Eric Burger
Kopio: SIP IETF
Aihe: Re: [Sip] INFO Issue: Multiple Bodies



I think banning multiple body parts is a bad precedent to set right when
we are trying to foster widespread support of multipart.

        Paul

Eric Burger wrote:
> The current text says we do not allow multiple Info-Packages per INFO
> message.  Although not stated (and I will state explicitly if we
> continue to go in this direction), this nominally makes parsers easier
> and makes failure handling straightforward.
>
> I would offer the former issue is not real.  Namely the way of
> transporting multiple Info-Packages in an INFO message would be to
> encapsulate in a multipart MIME body.  However, all SIP endpoints must
> support multipart MIME, so this is a non-issue.
>
> The latter issue is quite true in theory.  If I send two Info Package
> bodies, and for some reason the UAS barfs on one of those bodies, the
> UAS does not have a clean way of indicating which body barfed, and both
> effectively get treated at the UAC as failed.  The reason I caveated
> this issue "in theory" is I cannot think of a situation where this would
> matter.  Most of these usages are all-or-nothing, which means simply
> failing is OK.
>
> Moreover, I would offer the first thing people will ask for is
> transporting multiple INFO messages in a single message....
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug  2 14:32:15 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4C4893A6905;
	Sat,  2 Aug 2008 14:32:15 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AD9713A6905
	for <sip@core3.amsl.com>; Sat,  2 Aug 2008 14:32:14 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.182
X-Spam-Level: 
X-Spam-Status: No, score=-6.182 tagged_above=-999 required=5 tests=[AWL=0.067, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id IhbbzcAnPv6Z for <sip@core3.amsl.com>;
	Sat,  2 Aug 2008 14:32:13 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 62B443A685E
	for <SIP@ietf.org>; Sat,  2 Aug 2008 14:32:13 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	05E04204CB; Sat,  2 Aug 2008 23:32:36 +0200 (CEST)
X-AuditID: c1b4fb3c-b009fbb00000193b-f0-4894d27313b3
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	D354920423; Sat,  2 Aug 2008 23:32:35 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Aug 2008 23:32:35 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sat, 2 Aug 2008 23:32:35 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78C2@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] INFO issues: (1) Package Support Detection and
	(2)InfoPackages for Legacy Use
thread-index: Acj0pAjHGM54N05yTsierpM2jw2bDAAB5XdfAA5eZ8o=
References: <61968779B8AC4C4BAB421D4C12F008C00D77303F@XCH47YKF.rim.net>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Andrew Allen" <aallen@rim.com>, <eburger@standardstrack.com>,
	<SIP@ietf.org>
X-OriginalArrivalTime: 02 Aug 2008 21:32:35.0643 (UTC)
	FILETIME=[47A138B0:01C8F4E7]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] INFO issues: (1) Package Support Detection and
	(2)InfoPackages for Legacy Use
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi,
 =

Issue #1
 =

Isn't the Allow header enough to indicate support of the INFO method as suc=
h?
 =

But, empty Info-Xxx headers can of course be used to indicate "Hey, I do su=
pport the info package feature, but I don't want to send and/or receive any=
thing at this moment."
 =

 =

Issue #2
 =

I think we need to remember that there have been RFC 3372/3398 usage implem=
entations out there for quite a while, and there are also other SDO specifi=
cations referring to RFC 3372/3398 for a long time.
 =

So, no matter whether we port the RFC 3372/3398 usages or not, I think the =
reality is that implementations are always going to have to support the RFC=
 3372/3398 usages.
 =

 =

Regards,
 =

Christer
 =

 =


________________________________

L=E4hett=E4j=E4: sip-bounces@ietf.org puolesta: Andrew Allen
L=E4hetetty: la 2.8.2008 16:25
Vastaanottaja: eburger@standardstrack.com; SIP@ietf.org
Aihe: Re: [Sip] INFO issues: (1) Package Support Detection and (2)InfoPacka=
ges for Legacy Use




My 2 cents

Issue #1
Yes

Issue #2:
Yes let's register the legacy packages.

It indicates a seriousness about this as an update to INFO for continued us=
age and compliance with the standards usage of that method which hopefully =
over time will cause existing applications to be updated to comply with the=
 new negotiation mechanism (similar to the evolution from strict routing to=
 loose routing). It will also provide an example of how its done (IANA regi=
stration template to copy etc). Some message examples using  the mechanism =
with an existing package can also help here too.

Andrew

----- Original Message -----
From: sip-bounces@ietf.org <sip-bounces@ietf.org>
To: SIP IETF <SIP@ietf.org>
Sent: Fri Aug 01 16:00:53 2008
Subject: [Sip] INFO issues: (1) Package Support Detection and (2) InfoPacka=
ges for Legacy Use

The current text states that if a UA does not support receipt of any =

Info Packages, it MUST drop the Info-Recv header.  Likewise, if the UA =

does not support sending any Info Packages, as would be the case if a =

UAS does not support any of the Info Packages offered by the UAC, it =

MUST drop the Info-Send header.

As an extreme example, if a UAS does not want to send any Info =

Packages to a UAC and simultaneously the UAS does not support any of =

the Info Packages offered by the UAC, the UAS will have neither an =

Info-Send nor an Info-Recv header.  In this case, the UAC cannot =

disambiguate between a legacy UAS and an Info Package-aware UAS that =

simply does not want to receive INFO messages.

Issue #1:
Is this a problem?  On the one hand, one could argue a UAS that does =

not support any INFO packages may still support proprietary INFO =

packages or the legacy, standards track INFO usages.  On the other =

hand, one could argue a UAS that supports INFO packages yet does not =

want to process the requested Info Packages needs a way to communicate =

that to the UAC.  In this case, the easiest solution (which also works =

for the legacy interoperability case) is for the UA to include an =

empty Info-Recv or Info-Send header.  Thus the "yes / no" question =

here is,
   Should we change the text to mandate Info Package-aware UAs to use =

empty
   Info-Recv and Info-Send headers to indicate the desire to not =

receive or
   not send Info Packages, respectively?

Issue #2:
If we answer in the affirmative on Issue #1, then we need to port the =

existing, standards track usage of INFO, namely SIP-T (RFC 3372) for =

ISUP and QSIG (RFC 3398).  This has the added benefit of providing =

instant examples of the Info Package framework.  Moreover, it =

populates the IANA registry with meaningful entries.  I would =

volunteer to do that work, unless someone else feels strongly they =

want to do it. Thus the "yes / no" question here is,
   Should we port RFC 3372/3398 to the new Info Package framework, =

finishing to
   coincide with the completion of the Info Package framework?  I.e., =

as a coherent
   whole, yet as two or three separate documents.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

---------------------------------------------------------------------
This transmission (including any attachments) may contain confidential info=
rmation, privileged material (including material protected by the solicitor=
-client or other applicable privileges), or constitute non-public informati=
on. Any use of this information by anyone other than the intended recipient=
 is prohibited. If you have received this transmission in error, please imm=
ediately reply to the sender and delete this information from your system. =
Use, dissemination, distribution, or reproduction of this transmission by u=
nintended recipients is not authorized and may be unlawful.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug  3 04:54:03 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 163653A6BD5;
	Sun,  3 Aug 2008 04:54:03 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 72BC53A6B00
	for <sip@core3.amsl.com>; Sun,  3 Aug 2008 04:54:01 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.326
X-Spam-Level: 
X-Spam-Status: No, score=-1.326 tagged_above=-999 required=5 tests=[AWL=1.273, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ih2cuEviv5Od for <sip@core3.amsl.com>;
	Sun,  3 Aug 2008 04:54:00 -0700 (PDT)
Received: from ti-out-0910.google.com (ti-out-0910.google.com [209.85.142.186])
	by core3.amsl.com (Postfix) with ESMTP id A20E63A693C
	for <sip@ietf.org>; Sun,  3 Aug 2008 04:54:00 -0700 (PDT)
Received: by ti-out-0910.google.com with SMTP id a6so632046tib.25
	for <sip@ietf.org>; Sun, 03 Aug 2008 04:54:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;
	h=domainkey-signature:received:received:message-id:date:from:to
	:subject:mime-version:content-type:content-transfer-encoding
	:content-disposition;
	bh=gCi39Mfus1sl1LVm2N+sqPpgNIJVmc2oLFL9TKrXRRs=;
	b=jRoxXT3G0GAKfNHovSecbEkc/Gr1E7kcM3IOn7Lm9bnrWSjKei+ykgcxgxougFHj9A
	bdYPWJqWs/khlLaMZmHEPpWl3cFYFzmRcESbEjTaj6IeryodcypV1U6Xklj+CV0N+727
	4kNM5X227wx+ZeolXcpe20/r5uK1T6RxHv6jQ=
DomainKey-Signature: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma;
	h=message-id:date:from:to:subject:mime-version:content-type
	:content-transfer-encoding:content-disposition;
	b=MAQsI7kb+Oyk4fAbMUK+U91EWwMAQZgm8/3G0nrbnD3qhZ9bNMQT8tMRgD9+RaZE3U
	W/TEU50BetUqtGjxpdYmgJhsXz6mEwImRG5Ep7iHvAztlvP4h8cDJmoZQ4qnHgzIccST
	6VYNEMirOV44HTb4llkqN/FtaBcWgvb8xGjts=
Received: by 10.110.26.20 with SMTP id 20mr8961900tiz.20.1217764465539;
	Sun, 03 Aug 2008 04:54:25 -0700 (PDT)
Received: by 10.110.84.4 with HTTP; Sun, 3 Aug 2008 04:54:25 -0700 (PDT)
Message-ID: <7f5ac7240808030454x3971403fmd14fb3d532f922dc@mail.gmail.com>
Date: Sun, 3 Aug 2008 17:24:25 +0530
From: "Mahesh Govind" <vu3mmg@gmail.com>
To: sip@ietf.org
MIME-Version: 1.0
Content-Disposition: inline
Subject: [Sip] sip call model
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi,
can we map sip  calls to any particular call model  ?

regards
mahesh
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug  3 08:32:23 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E61973A6839;
	Sun,  3 Aug 2008 08:32:22 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D2D083A6839;
	Sun,  3 Aug 2008 08:32:21 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.298
X-Spam-Level: 
X-Spam-Status: No, score=-5.298 tagged_above=-999 required=5
	tests=[AWL=-1.300, BAYES_50=0.001, HTML_MESSAGE=0.001,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4CYPfgaq8dM7; Sun,  3 Aug 2008 08:32:20 -0700 (PDT)
Received: from mail130.messagelabs.com (mail130.messagelabs.com
	[216.82.250.163])
	by core3.amsl.com (Postfix) with ESMTP id 2142A3A63CB;
	Sun,  3 Aug 2008 08:32:19 -0700 (PDT)
X-VirusChecked: Checked
X-Env-Sender: pvalluri@csc.com
X-Msg-Ref: server-14.tower-130.messagelabs.com!1217777533!9002775!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [20.137.2.87]
Received: (qmail 1338 invoked from network); 3 Aug 2008 15:32:14 -0000
Received: from amer-mta101.csc.com (HELO amer-mta101.csc.com) (20.137.2.87)
	by server-14.tower-130.messagelabs.com with AES256-SHA encrypted SMTP;
	3 Aug 2008 15:32:14 -0000
Received: from amer-gw09.amer.csc.com (amer-gw09.amer.csc.com [20.6.39.245])
	by amer-mta101.csc.com (Switch-3.3.2mp/Switch-3.3.0) with ESMTP id
	m73FWCOY001460; Sun, 3 Aug 2008 11:32:13 -0400
In-Reply-To: <489336E4.6050204@cisco.com>
To: Paul Kyzivat <pkyzivat@cisco.com>
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 HF1099 November 20, 2006
Message-ID: <OF39BF0D1D.299B5361-ON8525749A.00549150-8525749A.005559D0@csc.com>
From: Padma Valluri <pvalluri@csc.com>
Date: Sun, 3 Aug 2008 11:32:05 -0400
X-MIMETrack: S/MIME Sign by Notes Client on Padma Valluri/ESI/CSC(Release
	6.5.4 HF1099|November 20, 2006) at 08/03/2008 11:32:15 AM,
	Serialize by Notes Client on Padma Valluri/ESI/CSC(Release 6.5.4
	HF1099|November 20, 2006) at 08/03/2008 11:32:15 AM,
	Serialize complete at 08/03/2008 11:32:15 AM,
	S/MIME Sign failed at 08/03/2008 11:32:15 AM: The cryptographic key was
	not found,
	Serialize by Router on AMER-GW09/SRV/CSC(Release 8.0.1|February 07,
	2008) at 08/03/2008 11:35:03 AM,
	Serialize complete at 08/03/2008 11:35:03 AM
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell,
	John'" <john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>,
	sip-bounces@ietf.org
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0365041807=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multipart message in MIME format.
--===============0365041807==
Content-Type: multipart/alternative; boundary="=_alternative 005559CD8525749A_="

This is a multipart message in MIME format.
--=_alternative 005559CD8525749A_=
Content-Type: text/plain; charset="US-ASCII"

I like this approach as this can even be used for inter-carrier-domain 
authentication where the signature introduced by a B2BUA in one domain can 
be trusted by the one in another domain by checking the intermediary IDs 
to say provide priority services. So if there is an RPH header associated 
with this request the receiving domain can honor that value. In the 
absence of such a thing as inter domain authentication, this can be used 
for that purpose without breaking 4474. 

regards,
Padma.

Computer Sciences Corporation 
Registered Office: 3170 Fairview Park Drive, Falls Church, Virginia 22042, 
USA
Registered in Nevada, USA No: C-489-59

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
This is a PRIVATE message. If you are not the intended recipient, please 
delete without copying and kindly advise us by e-mail of the mistake in 
delivery. 
NOTE: Regardless of content, this e-mail shall not operate to bind CSC to 
any order or other contract unless pursuant to explicit written agreement 
or government initiative expressly permitting the use of e-mail for such 
purpose.
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------




Paul Kyzivat <pkyzivat@cisco.com> 
Sent by: sip-bounces@ietf.org
08/01/2008 12:16 PM

To
Eric Rescorla <ekr@networkresonance.com>
cc
"'Cullen Jennings'" <fluffy@cisco.com>, "'SIP IETF'" <sip@ietf.org>, 
"'Uzelac,       Adam'" <Adam.Uzelac@globalcrossing.com>, "'Elwell, John'" 
<john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>
Subject
Re: [Sip] Thoughts on SIP Identity issues






What if the SBC did the following:

- made whatever changes it wants to make to the incoming
   request to derive the message it wants to send.

- calculated the reverse diff the transforms its modified
   message into the message it received.

- affixed the reverse diff to the new message as another
   body part.

- signed the whole thing as itself.

- sent it on.

When the UAS receives this, it first validates the signature and decides 
if it trusts the signer.

If so, it may then use the reverse diff to reconstruct the unmodified 
message. It can then validate any signature that may contain to verify 
the actual caller. This can of course be applied recursively.

At any stage it can just decide to trust any assertions made by the 
intermediary.

                 Paul

Eric Rescorla wrote:
> At Fri, 1 Aug 2008 09:36:36 +0100,
> Dan Wing wrote:
>>> At Thu, 31 Jul 2008 20:54:43 -0400,
>>> Hadriel Kaplan wrote:
>>>>
>>>>
>>>>> -----Original Message-----
>>>>> From: Eric Rescorla [mailto:ekr@networkresonance.com]
>>>>>
>>>>> Funny you should mention that.
>>>>>
>>>>> It's becoming increasingly clear that VBR codecs leak a fair
>>>>> amount of information, even when they are encrypted [WBC+08].
>>>>> So, if, for instance, you were planning to use a fixed-rate
>>>>> codec and an attacker could force you into a VBR codec, that
>>>>> might leak information.
>>>> Fascinating paper. (truly) But it sounds more like just a reason to
>>>> fix SRTP for VBR, through random padding or whatever.
>>> I haven't studied the problem, but I suspect random padding
>>> is of limited use because it averages out. Probably better
>>> to use a fixed length codec.
>>>
>>> However, I think focusing on that misses the larger point: the UAC and
>>> UAS have certain desires as expressed in the messages/SDP
>>> To the extent to which we allow the intermediaries to change
>>> those messages, we need to carefully analyze each instance,
>>> and this analysis may actually depend on facts yet to be 
>>> discovered.
>> 4474 allows intermediaries to change SDP, and re-create a new
>> >From and a new signature. 
> 
> Well, it allows it in the sense that there's no known
> cryptographic way to stop it in any system, then sure.
> 
> 
>> This (a) destroys end-to-end identity 
>> (which is the subject of this thread) *and* (b) allows 
>> intermediaries to perform the very downgrade attack you
>> cited ([WBC+08]).
>>
>> This is why I want to improve upon 4474.
> 
> I don't agree with this analysis.
> 
> Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.
> It's 4474 signed by atlanta.com. Now, some SBC in the middle
> edits the SDP. This breaks the signature. 
> 
> At this point, when Bob gets the message, he knows:
> 
> (1) This message claims to be from Alice.
> (2) The signature was broken.
> 
> He therefore has no knowledge of what happen. He can choose to
> accept or reject the call, but can't reasonably infer that
> the call came from Alice or anything else about Alice's 
> intentions.
> 
> 
> Now, if the SBC resigns, then Bob gets a valid message
> from somebody else other than Alice. Effectively, the
> SBC. Now, the SBC claims that it is connecting Bob to
> Alice, but it could be lying. If Bob trusts the SBC,
> he can accept the call, but he's trusting the SBC.
> Sure, the SBC can edit the SDP to replace codecs, but
> it can do *anything*. It could, for instance, replace
> the DTLS-SRTP fingerprint. This isn't surprising, since
> the SBC is really a B2BUA and this is a call from it.
> 
> 
> The schemes being proposed here allow the RFC 4474 signature
> to survive some editing of the message by the SBC. The
> question here is the extent to which that enables *silent*
> attacks by the SBC. To take an extreme case, if we allowed
> editing of the fingerprint, then Bob could think he was
> talking to Alice, but he was actually talking to the
> SBC. Editing the codecs to allow this kind of traffic
> analysis is a (much) less serious version of the same
> threat. Again, this differs qualitatively from the former
> case because Bob does not know he is under attack.
> 
> The question, then, when someone proposes exempting some
> field from the signature, is what silent attacks it enables.
> I have yet to see any satisfactory analysis along these
> lines.
> 
> -Ekr
> 
> 
> 
> 
> 
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


--=_alternative 005559CD8525749A_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2 face="sans-serif">I like this approach as this can even
be used for inter-carrier-domain authentication where the signature introduced
by a B2BUA in one domain can be trusted by the one in another domain by
checking the intermediary IDs &nbsp;to say provide priority services. So
if there is an RPH header associated with this request the receiving domain
can honor that value. In the absence of such a thing as inter domain authentication,
this can be used for that purpose without breaking 4474. </font>
<br>
<br><font size=2 face="sans-serif">regards,</font>
<br><font size=2 face="sans-serif">Padma.<br>
<br>
Computer Sciences Corporation <br>
Registered Office: 3170 Fairview Park Drive, Falls Church, Virginia 22042,
USA<br>
Registered in Nevada, USA No: C-489-59<br>
<br>
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br>
This is a PRIVATE message. If you are not the intended recipient, please
delete without copying and kindly advise us by e-mail of the mistake in
delivery. <br>
NOTE: Regardless of content, this e-mail shall not operate to bind CSC
to any order or other contract unless pursuant to explicit written agreement
or government initiative expressly permitting the use of e-mail for such
purpose.<br>
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br>
</font>
<br>
<br>
<br>
<table width=100%>
<tr valign=top>
<td width=40%><font size=1 face="sans-serif"><b>Paul Kyzivat &lt;pkyzivat@cisco.com&gt;</b>
</font>
<br><font size=1 face="sans-serif">Sent by: sip-bounces@ietf.org</font>
<p><font size=1 face="sans-serif">08/01/2008 12:16 PM</font>
<td width=59%>
<table width=100%>
<tr valign=top>
<td>
<div align=right><font size=1 face="sans-serif">To</font></div>
<td><font size=1 face="sans-serif">Eric Rescorla &lt;ekr@networkresonance.com&gt;</font>
<tr valign=top>
<td>
<div align=right><font size=1 face="sans-serif">cc</font></div>
<td><font size=1 face="sans-serif">&quot;'Cullen Jennings'&quot; &lt;fluffy@cisco.com&gt;,
&quot;'SIP IETF'&quot; &lt;sip@ietf.org&gt;, &quot;'Uzelac, &nbsp; &nbsp;
&nbsp; &nbsp;Adam'&quot; &lt;Adam.Uzelac@globalcrossing.com&gt;,
&quot;'Elwell, &nbsp; &nbsp; &nbsp; &nbsp;John'&quot; &lt;john.elwell@siemens.com&gt;,
Dan Wing &lt;dwing@cisco.com&gt;</font>
<tr valign=top>
<td>
<div align=right><font size=1 face="sans-serif">Subject</font></div>
<td><font size=1 face="sans-serif">Re: [Sip] Thoughts on SIP Identity issues</font></table>
<br>
<table>
<tr valign=top>
<td>
<td></table>
<br></table>
<br>
<br>
<br><font size=2><tt>What if the SBC did the following:<br>
<br>
- made whatever changes it wants to make to the incoming<br>
 &nbsp; request to derive the message it wants to send.<br>
<br>
- calculated the reverse diff the transforms its modified<br>
 &nbsp; message into the message it received.<br>
<br>
- affixed the reverse diff to the new message as another<br>
 &nbsp; body part.<br>
<br>
- signed the whole thing as itself.<br>
<br>
- sent it on.<br>
<br>
When the UAS receives this, it first validates the signature and decides
<br>
if it trusts the signer.<br>
<br>
If so, it may then use the reverse diff to reconstruct the unmodified <br>
message. It can then validate any signature that may contain to verify
<br>
the actual caller. This can of course be applied recursively.<br>
<br>
At any stage it can just decide to trust any assertions made by the <br>
intermediary.<br>
<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
Paul<br>
<br>
Eric Rescorla wrote:<br>
&gt; At Fri, 1 Aug 2008 09:36:36 +0100,<br>
&gt; Dan Wing wrote:<br>
&gt;&gt;&gt; At Thu, 31 Jul 2008 20:54:43 -0400,<br>
&gt;&gt;&gt; Hadriel Kaplan wrote:<br>
&gt;&gt;&gt;&gt;<br>
&gt;&gt;&gt;&gt;<br>
&gt;&gt;&gt;&gt;&gt; -----Original Message-----<br>
&gt;&gt;&gt;&gt;&gt; From: Eric Rescorla [mailto:ekr@networkresonance.com]<br>
&gt;&gt;&gt;&gt;&gt;<br>
&gt;&gt;&gt;&gt;&gt; Funny you should mention that.<br>
&gt;&gt;&gt;&gt;&gt;<br>
&gt;&gt;&gt;&gt;&gt; It's becoming increasingly clear that VBR codecs leak
a fair<br>
&gt;&gt;&gt;&gt;&gt; amount of information, even when they are encrypted
[WBC+08].<br>
&gt;&gt;&gt;&gt;&gt; So, if, for instance, you were planning to use a fixed-rate<br>
&gt;&gt;&gt;&gt;&gt; codec and an attacker could force you into a VBR codec,
that<br>
&gt;&gt;&gt;&gt;&gt; might leak information.<br>
&gt;&gt;&gt;&gt; Fascinating paper. (truly) But it sounds more like just
a reason to<br>
&gt;&gt;&gt;&gt; fix SRTP for VBR, through random padding or whatever.<br>
&gt;&gt;&gt; I haven't studied the problem, but I suspect random padding<br>
&gt;&gt;&gt; is of limited use because it averages out. Probably better<br>
&gt;&gt;&gt; to use a fixed length codec.<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; However, I think focusing on that misses the larger point:
the UAC and<br>
&gt;&gt;&gt; UAS have certain desires as expressed in the messages/SDP<br>
&gt;&gt;&gt; To the extent to which we allow the intermediaries to change<br>
&gt;&gt;&gt; those messages, we need to carefully analyze each instance,<br>
&gt;&gt;&gt; and this analysis may actually depend on facts yet to be <br>
&gt;&gt;&gt; discovered.<br>
&gt;&gt; 4474 allows intermediaries to change SDP, and re-create a new<br>
&gt;&gt; &gt;From and a new signature. <br>
&gt; <br>
&gt; Well, it allows it in the sense that there's no known<br>
&gt; cryptographic way to stop it in any system, then sure.<br>
&gt; <br>
&gt; <br>
&gt;&gt; This (a) destroys end-to-end identity <br>
&gt;&gt; (which is the subject of this thread) *and* (b) allows <br>
&gt;&gt; intermediaries to perform the very downgrade attack you<br>
&gt;&gt; cited ([WBC+08]).<br>
&gt;&gt;<br>
&gt;&gt; This is why I want to improve upon 4474.<br>
&gt; <br>
&gt; I don't agree with this analysis.<br>
&gt; <br>
&gt; Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.<br>
&gt; It's 4474 signed by atlanta.com. Now, some SBC in the middle<br>
&gt; edits the SDP. This breaks the signature. <br>
&gt; <br>
&gt; At this point, when Bob gets the message, he knows:<br>
&gt; <br>
&gt; (1) This message claims to be from Alice.<br>
&gt; (2) The signature was broken.<br>
&gt; <br>
&gt; He therefore has no knowledge of what happen. He can choose to<br>
&gt; accept or reject the call, but can't reasonably infer that<br>
&gt; the call came from Alice or anything else about Alice's <br>
&gt; intentions.<br>
&gt; <br>
&gt; <br>
&gt; Now, if the SBC resigns, then Bob gets a valid message<br>
&gt; from somebody else other than Alice. Effectively, the<br>
&gt; SBC. Now, the SBC claims that it is connecting Bob to<br>
&gt; Alice, but it could be lying. If Bob trusts the SBC,<br>
&gt; he can accept the call, but he's trusting the SBC.<br>
&gt; Sure, the SBC can edit the SDP to replace codecs, but<br>
&gt; it can do *anything*. It could, for instance, replace<br>
&gt; the DTLS-SRTP fingerprint. This isn't surprising, since<br>
&gt; the SBC is really a B2BUA and this is a call from it.<br>
&gt; <br>
&gt; <br>
&gt; The schemes being proposed here allow the RFC 4474 signature<br>
&gt; to survive some editing of the message by the SBC. The<br>
&gt; question here is the extent to which that enables *silent*<br>
&gt; attacks by the SBC. To take an extreme case, if we allowed<br>
&gt; editing of the fingerprint, then Bob could think he was<br>
&gt; talking to Alice, but he was actually talking to the<br>
&gt; SBC. Editing the codecs to allow this kind of traffic<br>
&gt; analysis is a (much) less serious version of the same<br>
&gt; threat. Again, this differs qualitatively from the former<br>
&gt; case because Bob does not know he is under attack.<br>
&gt; <br>
&gt; The question, then, when someone proposes exempting some<br>
&gt; field from the signature, is what silent attacks it enables.<br>
&gt; I have yet to see any satisfactory analysis along these<br>
&gt; lines.<br>
&gt; <br>
&gt; -Ekr<br>
&gt; <br>
&gt; <br>
&gt; <br>
&gt; <br>
&gt; <br>
&gt; <br>
&gt; _______________________________________________<br>
&gt; Sip mailing list &nbsp;https://www.ietf.org/mailman/listinfo/sip<br>
&gt; This list is for NEW development of the core SIP Protocol<br>
&gt; Use sip-implementors@cs.columbia.edu for questions on current sip<br>
&gt; Use sipping@ietf.org for new developments on the application of sip<br>
&gt; <br>
_______________________________________________<br>
Sip mailing list &nbsp;https://www.ietf.org/mailman/listinfo/sip<br>
This list is for NEW development of the core SIP Protocol<br>
Use sip-implementors@cs.columbia.edu for questions on current sip<br>
Use sipping@ietf.org for new developments on the application of sip<br>
</tt></font>
<br>
--=_alternative 005559CD8525749A_=--

--===============0365041807==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0365041807==--


From sip-bounces@ietf.org  Sun Aug  3 11:05:21 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3ECD53A6BEB;
	Sun,  3 Aug 2008 11:05:21 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id ED3863A6BE6
	for <sip@core3.amsl.com>; Sun,  3 Aug 2008 11:05:19 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.202
X-Spam-Level: 
X-Spam-Status: No, score=-2.202 tagged_above=-999 required=5 tests=[AWL=0.397, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JW9pe+ssUPhl for <sip@core3.amsl.com>;
	Sun,  3 Aug 2008 11:05:19 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id 414B83A6B86
	for <SIP@ietf.org>; Sun,  3 Aug 2008 11:05:19 -0700 (PDT)
Received: from [75.68.119.237] (port=60576 helo=[192.168.15.101])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KPhxV-0006ku-S7 for SIP@ietf.org; Sun, 03 Aug 2008 11:05:34 -0700
Message-Id: <973B9305-BD11-41DE-9459-01783D16A72A@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: SIP IETF <SIP@ietf.org>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Sun, 3 Aug 2008 14:05:30 -0400
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: [Sip] INFO Issue: Ignore Non-Supported Info Package Types
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

The text currently says that if one endpoint indicates it does not  
support an Info-Package, that endpoint is to ignore subsequent Info- 
Send headers sent by the other endpoint that continues to indicate  
support for that Info-Package.

On the one hand, this continual resending of an Info-Send offer does  
no harm, in that unless the recipient indicates support of that  
package, the sender will not send it.  Moreover, 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug  3 11:05:33 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2C2483A6B86;
	Sun,  3 Aug 2008 11:05:33 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D16573A684D
	for <sip@core3.amsl.com>; Sun,  3 Aug 2008 11:05:32 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.268
X-Spam-Level: 
X-Spam-Status: No, score=-2.268 tagged_above=-999 required=5 tests=[AWL=0.331, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id rbkPIdkdAAnM for <sip@core3.amsl.com>;
	Sun,  3 Aug 2008 11:05:32 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id 1A3513A6B86
	for <SIP@ietf.org>; Sun,  3 Aug 2008 11:05:32 -0700 (PDT)
Received: from c-75-68-119-237.hsd1.nh.comcast.net ([75.68.119.237]:60576
	helo=[192.168.15.101])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KPhxe-0006ku-MS for SIP@ietf.org; Sun, 03 Aug 2008 11:05:44 -0700
Message-Id: <BB8D9DB4-C11C-42A9-AC3D-3E48914E4E9F@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: SIP IETF <SIP@ietf.org>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Sun, 3 Aug 2008 14:05:43 -0400
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: [Sip] INFO issues: Backwards Compatibility and Forwards Detection
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

The current text states that if a UA does not support receipt of any  
Info Packages, it MUST drop the Info-Recv header.  Likewise, if the UA  
does not support sending any Info Packages, as would be the case if a  
UAS does not support any of the Info Packages offered by the UAC, it  
MUST drop the Info-Send header.

As an extreme example, if a UAS does not want to send any Info  
Packages to a UAC and simultaneously the UAS does not support any of  
the Info Packages offered by the UAC, the UAS will have neither an  
Info-Send nor an Info-Recv header.  In this case, the UAC cannot  
disambiguate between a legacy UAS and an Info Package-aware UAS that  
simply does not want to receive INFO messages.

Is this a problem?  On the one hand, one could argue a UAS that does  
not support any INFO packages may still support proprietary INFO  
packages or the legacy, standards track INFO usages.  On the other  
hand, one could argue a UAS that supports INFO packages yet 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug  3 12:09:14 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 57B0C3A6C38;
	Sun,  3 Aug 2008 12:09:14 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0C7CC3A6C31
	for <sip@core3.amsl.com>; Sun,  3 Aug 2008 12:09:14 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ETjDbPZpfHlB for <sip@core3.amsl.com>;
	Sun,  3 Aug 2008 12:09:13 -0700 (PDT)
Received: from QMTA06.westchester.pa.mail.comcast.net
	(qmta06.westchester.pa.mail.comcast.net [76.96.62.56])
	by core3.amsl.com (Postfix) with ESMTP id 118583A6C35
	for <sip@ietf.org>; Sun,  3 Aug 2008 12:09:12 -0700 (PDT)
Received: from OMTA09.westchester.pa.mail.comcast.net ([76.96.62.20])
	by QMTA06.westchester.pa.mail.comcast.net with comcast
	id xu3x1Z0010SCNGk56v9eld; Sun, 03 Aug 2008 19:09:38 +0000
Received: from [192.168.15.101] ([75.68.119.237])
	by OMTA09.westchester.pa.mail.comcast.net with comcast
	id xv9e1Z00B57QXEK3Vv9eLF; Sun, 03 Aug 2008 19:09:38 +0000
X-Authority-Analysis: v=1.0 c=1 a=DAFWoMcJm6YA:10 a=HmzAC9Qmy38A:10
	a=PvSvPnHDKYxEhjfTbegA:9 a=ynEL8QBCK7kxwtAlDdQA:7
	a=Rh-SlMXyS1-BFBpL7V91hu8HFyQA:4 a=sIzOJPvxzOQA:10
Message-Id: <C94937F5-A7D4-4FD5-9784-A25148CF8781@comcast.net>
From: Eric Burger <eric.burger@comcast.net>
To: Eric Burger <eburger@standardstrack.com>
In-Reply-To: <973B9305-BD11-41DE-9459-01783D16A72A@standardstrack.com>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Sun, 3 Aug 2008 15:09:37 -0400
References: <973B9305-BD11-41DE-9459-01783D16A72A@standardstrack.com>
X-Mailer: Apple Mail (2.926)
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Ignore Non-Supported Info Package Types
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Aargh. Got truncated :-(  See below.


On Aug 3, 2008, at 2:05 PM, Eric Burger wrote:

> The text currently says that if one endpoint indicates it does not  
> support an Info-Package, that endpoint is to ignore subsequent Info- 
> Send headers sent by the other endpoint that continues to indicate  
> support for that Info-Package.
>
> On the one hand, this continual resending of an Info-Send offer does  
> no harm, in that unless the recipient indicates support of that  
> package, the sender will not send it.  Moreover,
this enables later negotiation of package support. I suppose this  
could be useful if an endpoint did not want to receive a certain  
package until a certain point in the lifetime of the dialog.

On the other hand, if the sender does not stop sending Info-Send, the  
receiver has no way of knowing the sender understood the receiver's  
request to not receive INFO's from that package.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug  3 12:16:36 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8A61228C0D8;
	Sun,  3 Aug 2008 12:16:36 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 567703A6C48
	for <sip@core3.amsl.com>; Sun,  3 Aug 2008 12:16:35 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.316
X-Spam-Level: 
X-Spam-Status: No, score=-2.316 tagged_above=-999 required=5 tests=[AWL=0.283, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3xveKq6AshP8 for <sip@core3.amsl.com>;
	Sun,  3 Aug 2008 12:16:34 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id 917D03A6ABD
	for <SIP@ietf.org>; Sun,  3 Aug 2008 12:16:34 -0700 (PDT)
Received: from [75.68.119.237] (port=62497 helo=[192.168.15.101])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KPj4W-0006lC-Mi for SIP@ietf.org; Sun, 03 Aug 2008 12:16:53 -0700
Message-Id: <20127F35-B562-4F1F-BFE3-111ABAEDB9F3@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: SIP IETF <SIP@ietf.org>
In-Reply-To: <BB8D9DB4-C11C-42A9-AC3D-3E48914E4E9F@standardstrack.com>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Sun, 3 Aug 2008 15:16:54 -0400
References: <BB8D9DB4-C11C-42A9-AC3D-3E48914E4E9F@standardstrack.com>
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: Re: [Sip] INFO issues: Backwards Compatibility and Forwards
	Detection
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

And again. See the bottom for the continuation.

On Aug 3, 2008, at 2:05 PM, Eric Burger wrote:

> The current text states that if a UA does not support receipt of any  
> Info Packages, it MUST drop the Info-Recv header.  Likewise, if the  
> UA does not support sending any Info Packages, as would be the case  
> if a UAS does not support any of the Info Packages offered by the  
> UAC, it MUST drop the Info-Send header.
>
> As an extreme example, if a UAS does not want to send any Info  
> Packages to a UAC and simultaneously the UAS does not support any of  
> the Info Packages offered by the UAC, the UAS will have neither an  
> Info-Send nor an Info-Recv header.  In this case, the UAC cannot  
> disambiguate between a legacy UAS and an Info Package-aware UAS that  
> simply does not want to receive INFO messages.
>
> Is this a problem?  On the one hand, one could argue a UAS that does  
> not support any INFO packages may still support proprietary INFO  
> packages or the legacy, standards track INFO usages.  On the other  
> hand, one could argue a UAS that supports INFO packages yet

states they do not want to participate in an INFO-based session should  
not get any INFO messages.

I would offer a clean standards-based way around this is to deliver  
Info Packages for ISUP and QSIG simultaneously with the INFO Package  
Framework.  That means that if anyone is going to implement Info  
Packages and they want to process ISUP and QSIG (SIP-T), they can do  
it out of the box. Backwards compatibility works because the endpoint  
would still have a manual configuration to talk SIP-T with the legacy  
device. It also means the endpoint can immediately talk Info Packages  
with Info Package-aware endpoints for SIP-T purposes, without fear of  
failure. Legacy devices will do what they always did, and the fact  
there is no Info-Recv or Info-Send header lets the Info Package-aware  
device know they are working with a legacy device. If there is an Info- 
Recv or Info-Send header, but the SIP-T package is not present, the  
Info Package-aware device will know at once the other device does not  
do SIP-T.  I would offer this is a more robust and rich interface, but  
it does come at the cost of "porting" the SIP-T legacy INFO uses into  
Info Packages.

I would volunteer to do the porting, if (1) people think this is a  
valuable exercise or (2) people value the robust interface.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug  4 02:24:49 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 880603A6B09;
	Mon,  4 Aug 2008 02:24:49 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AF6433A6B09
	for <sip@core3.amsl.com>; Mon,  4 Aug 2008 02:24:47 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.188
X-Spam-Level: 
X-Spam-Status: No, score=-6.188 tagged_above=-999 required=5 tests=[AWL=0.060, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, HTML_MESSAGE=0.001,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dGf1Bx551tRZ for <sip@core3.amsl.com>;
	Mon,  4 Aug 2008 02:24:46 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 831743A6AF6
	for <sip@ietf.org>; Mon,  4 Aug 2008 02:24:46 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	2F4D6200C5 for <sip@ietf.org>; Mon,  4 Aug 2008 11:25:13 +0200 (CEST)
X-AuditID: c1b4fb3e-ad997bb000004ec0-07-4896caf8e363
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	E2E822007F for <sip@ietf.org>; Mon,  4 Aug 2008 11:25:12 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 4 Aug 2008 11:25:12 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 4 Aug 2008 11:25:11 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 199: Staus and open issues after Dublin
thread-index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQw==
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 04 Aug 2008 09:25:12.0691 (UTC)
	FILETIME=[FF3ABC30:01C8F613]
X-Brightmail-Tracker: AAAAAA==
Subject: [Sip] 199: Staus and open issues after Dublin
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1674344238=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1674344238==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8F613.FF580557"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C8F613.FF580557
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,

Based on the discussions in Dublin, it was agreed to move forward with
199 based on the following assumptions:

- We will not define an option-tag for 199 support.

- We will remove any text talking about adding a sipfrag body into the
199 response (potential future usage of 199 e.g. to solve HERFP would
define such procedures)

- A UAS IS allowed to send 199 (see more in the remaining open issues
section further down).


Please let me know if you have strong objections to any of these.



OPEN ISSUES, which we need to solve are:

1) Is a proxy allowed to send 199 in the first place, or are only UASes
allowed to do it?

2) Assuming proxies are allowed to send 199 (see issue 1), are proxies
allowed to send 199 reliably? It would mean that they need to terminate
the associated PRACK, which is claimed to not be normal proxy behavior.

3) Assuming proxies are allowed to send 199 (see issue 1), are proxies
allowed to send 199 unreliably, even if 100rel is required?=20

Claims for:

- Since 199 is only an indciation, it can be seen as something similar
to 100 Trying, which is never sent reliably
- Proxies are not affected by the Require header, so even  if the
request contains 'Require: 100rel' it does not affect proxies

Claims against:

- It is not normal proxy behvior to trigger and send a non-100 response
in the first place.

4) Is it a MAY/RECOMMENDATION/SHOULD/MUST for UAS to send 199?


Please give your opinions :)

Regards,

Christer







-=20



------_=_NextPart_001_01C8F613.FF580557
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7652.24">
<TITLE>199: Staus and open issues after Dublin</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Based on the discussions in Dublin, it =
was agreed to move forward with 199 based on the following =
assumptions:</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">- We will not define an option-tag for =
199 support.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">- We will remove any text talking about =
adding a sipfrag body into the 199 response (potential future usage of =
199 e.g. to solve HERFP would define such procedures)</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">- A UAS IS allowed to send 199 (see =
more in the remaining open issues section further down).</FONT>
</P>
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">Please let me know if you have strong =
objections to any of these.</FONT>
</P>
<BR>
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">OPEN ISSUES, which we need to solve =
are:</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">1) Is a proxy allowed to send 199 in =
the first place, or are only UASes allowed to do it?</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">2) Assuming proxies are allowed to send =
199 (see issue 1), are proxies allowed to send 199 reliably? It would =
mean that they need to terminate the associated PRACK, which is claimed =
to not be normal proxy behavior.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">3) Assuming proxies are allowed to send =
199 (see issue 1), are proxies allowed to send 199 unreliably, even if =
100rel is required? </FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Claims for:</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">- Since 199 is only an indciation, it =
can be seen as something similar to 100 Trying, which is never sent =
reliably</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">- Proxies are not affected by the =
Require header, so even&nbsp; if the request contains 'Require: 100rel' =
it does not affect proxies</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Claims against:</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">- It is not normal proxy behvior to =
trigger and send a non-100 response in the first place.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">4) Is it a =
MAY/RECOMMENDATION/SHOULD/MUST for UAS to send 199?</FONT>
</P>
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">Please give your opinions :)</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Regards,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Christer</FONT>
</P>
<BR>
<BR>
<BR>
<BR>
<BR>
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">- </FONT>
</P>
<BR>

</BODY>
</HTML>
------_=_NextPart_001_01C8F613.FF580557--

--===============1674344238==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1674344238==--


From sip-bounces@ietf.org  Mon Aug  4 06:20:55 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1AB1028C281;
	Mon,  4 Aug 2008 06:20:55 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5B6C228C27F
	for <sip@core3.amsl.com>; Mon,  4 Aug 2008 06:20:54 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.467
X-Spam-Level: 
X-Spam-Status: No, score=-6.467 tagged_above=-999 required=5 tests=[AWL=0.132, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uo8AYkzZ3BzP for <sip@core3.amsl.com>;
	Mon,  4 Aug 2008 06:20:53 -0700 (PDT)
Received: from rtp-iport-1.cisco.com (rtp-iport-1.cisco.com [64.102.122.148])
	by core3.amsl.com (Postfix) with ESMTP id 09D2328C281
	for <sip@ietf.org>; Mon,  4 Aug 2008 06:20:52 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,304,1215388800"; d="scan'208";a="16428590"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 04 Aug 2008 13:21:18 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m74DLI4j022043; 
	Mon, 4 Aug 2008 09:21:18 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m74DLIV6021921;
	Mon, 4 Aug 2008 13:21:18 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 4 Aug 2008 09:21:18 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 4 Aug 2008 09:21:18 -0400
Message-ID: <48970285.7090406@cisco.com>
Date: Mon, 04 Aug 2008 09:22:13 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 04 Aug 2008 13:21:18.0287 (UTC)
	FILETIME=[FA9525F0:01C8F634]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=5462; t=1217856078;
	x=1218720078; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20199=3A=20Staus=20and=20open=20i
	ssues=20after=20Dublin |Sender:=20
	|To:=20Christer=20Holmberg=20<christer.holmberg@ericsson.co m>;
	bh=U1EiUIXWGfi3RgcsRFBxA4ULj4lmYkrHEbWvr2dxBME=;
	b=e6U5v57AVPmy+f1+6unosonv2G7UuiSQmqRCBj91VGOcTBb7rbInYGSspQ
	8ExhFcWwce3z8HTOjLKGm8+Fss4xy/kbjQGdYxAJmcXVN0v6XvUoYUsDDm0f
	UcNWHNmlad;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: sip@ietf.org
Subject: Re: [Sip] 199: Staus and open issues after Dublin
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Christer Holmberg wrote:
> 
> Hi,
> 
> Based on the discussions in Dublin, it was agreed to move forward with 
> 199 based on the following assumptions:
> 
> - We will not define an option-tag for 199 support.
> 
> - We will remove any text talking about adding a sipfrag body into the 
> 199 response (potential future usage of 199 e.g. to solve HERFP would 
> define such procedures)
> 
> - A UAS IS allowed to send 199 (see more in the remaining open issues 
> section further down).
> 
> 
> Please let me know if you have strong objections to any of these.
> 
> 
> 
> OPEN ISSUES, which we need to solve are:
> 
> 1) Is a proxy allowed to send 199 in the first place, or are only UASes 
> allowed to do it?
> 
> 2) Assuming proxies are allowed to send 199 (see issue 1), are proxies 
> allowed to send 199 reliably? It would mean that they need to terminate 
> the associated PRACK, which is claimed to not be normal proxy behavior.
> 
> 3) Assuming proxies are allowed to send 199 (see issue 1), are proxies 
> allowed to send 199 unreliably, even if 100rel is required?
> 
> Claims for:
> 
> - Since 199 is only an indciation, it can be seen as something similar 
> to 100 Trying, which is never sent reliably
> - Proxies are not affected by the Require header, so even  if the 
> request contains 'Require: 100rel' it does not affect proxies
> 
> Claims against:
> 
> - It is not normal proxy behvior to trigger and send a non-100 response 
> in the first place.
> 
> 4) Is it a MAY/RECOMMENDATION/SHOULD/MUST for UAS to send 199?

IMO it is generally undesirable for the UAS to send the 199.

The whole point of the 199 is to serve as an optimization. In the 
absence of forking it is typically redundant, and will increase the 
amount of signaling in common cases, and so is counter productive. (My 
guess is that some large fraction, maybe more than half, of all calls 
are not answered by the intended target.)

It is typically a proxy, or another middle box such as a B2BUA, that is 
aware that forking is going on, and thus that there is state the UAC 
might want to know that won't otherwise be available to it. So I think 
the box that knows this should be the one to send the response.

I don't want to *ban* the UAS from sending the response, because it 
might be a middle box, and because even if it is the ultimate endpoint 
it *might* know the outcome of the call before it can finally send it.


Regarding *reliable* 199:

*If* the 199 is to be sent by a middle box, rather than by the UAS whose 
final response is being anticipated by the 199, then the main issue is 
what to-tag is to be used for the 199. The current proposal requires 
that the to-tag match that of the final response from the UAS. Things 
get very messy if the 199 is sent reliably under those conditions:

- the resulting PRACK will be sent in-dialog and thus will consume
   a CSeq value.

- the PRACK will need to be intercepted and handled by the middle box,
   rather than being allowed to follow its normal routing. (The UAS
   doesn't know the 199 was sent, and so won't expect a PRACK for it.)

- Potentially the middle box won't even be on the routing path for the
   PRACK, and so won't see it.

The bottom line for the above is that sending the 199 reliably using the 
to-tag of the UAS is a *terrible* ideal. A slightly less bad alternative 
would be to send the 199 with a to-tag belonging to the middle box 
sending it. But this just complicates things further:

- this new to-tag will create yet another early dialog.

- The 199 response will thus have to terminate both this new one,
   and the original one.

- There will have to be some new header to indicate which early dialog
   is to be terminated. (In addition to the one created by the to-tag
   of the 199 itself.)

So that seems like a bad idea too.

In any case, the 199 is just an optimization. The world will not end if 
it is not received. So an unreliable 199 seems to fit the bill just 
fine. So, I think the 199 should normally be sent unreliably. It could 
be sent reliably in those cases where it is being sent by the UAS 
possessing the to-tag of the dialog it pertains to. (Even when it *can* 
be sent reliably it is probably a bad idea to do so. It increases the 
required signaling, perhaps outweighing the value of this optimization.)

This does mean that some rules need to be relaxed so that it is 
permissible to send this unreliably even when Require:100rel has been 
specified by the UAC. (Perhaps what we ought to do in this regard is say 
that that reliable provisionals are only required when there is 
something essential in the message, such as an offer, answer, or target 
change.)

Perhaps instead of 199, this should be the 101 response, so that it 
appears closer to the 100 response that already gets special treatment.

	Thanks,
	Paul

> Please give your opinions :)
> 
> Regards,
> 
> Christer
> 
> 
> 
> 
> 
> 
> 
> -
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug  4 08:06:21 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B9D4328C2E8;
	Mon,  4 Aug 2008 08:06:21 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CC85A28C2A1
	for <sip@core3.amsl.com>; Mon,  4 Aug 2008 08:06:19 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.473
X-Spam-Level: 
X-Spam-Status: No, score=-6.473 tagged_above=-999 required=5 tests=[AWL=0.126, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id yv8lvbYzYo-u for <sip@core3.amsl.com>;
	Mon,  4 Aug 2008 08:06:18 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 6987728C2E2
	for <sip@ietf.org>; Mon,  4 Aug 2008 08:06:18 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,304,1215388800"; d="scan'208";a="16420415"
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 04 Aug 2008 15:06:46 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m74F6jbq009237; 
	Mon, 4 Aug 2008 11:06:45 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m74F6jDH008153;
	Mon, 4 Aug 2008 15:06:45 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 4 Aug 2008 11:06:45 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 4 Aug 2008 11:06:45 -0400
Message-ID: <48971B3C.9030206@cisco.com>
Date: Mon, 04 Aug 2008 11:07:40 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: SIP IETF <sip@ietf.org>
References: <5D1A7985295922448D5550C94DE29180021D0A7E@DEEXC1U01.de.lucent.com>
In-Reply-To: <5D1A7985295922448D5550C94DE29180021D0A7E@DEEXC1U01.de.lucent.com>
X-OriginalArrivalTime: 04 Aug 2008 15:06:45.0304 (UTC)
	FILETIME=[B5C75380:01C8F643]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=4433; t=1217862405;
	x=1218726405; c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20Review=20request=20for=20draft-ietf-sip
	-record-route-fix-03 |Sender:=20
	|To:=20SIP=20IETF=20<sip@ietf.org>;
	bh=OBaTg43V6Syp23FkqP3N2RwOtDP+5bGzi5BguUY5C0g=;
	b=IwN7L+DLWErAE7pgkDJIGeYkgCEsLS9It55kt3BEvdk3PG+gsTiKO4B7HJ
	839M9JQdEqcL6ilCNGea83u8EwyYtFgYHCXjcCW2POXzzNl/wa9MwDNJB6ko
	EN0M4R5je4;
Authentication-Results: rtp-dkim-1; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim1001 verified; ); 
Cc: "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>,
	Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] Review request for draft-ietf-sip-record-route-fix-03
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Keith and Dean asked me to review this document.
(I admit I had not read it until now.)

I am glad to see this document - it is important. And it goes a long way 
toward sorting out the issues. However I did find a number of things 
that IMO could be improved:

Section 5:

There is a small typo in the following:

    Preprocessing" f[RFC3261], implementors can choose that proxy MAY
                   ^
I believe the "f" is an accident.

Also, here and throughout the document the domain names "atlanta.com" 
and "biloxy.com" are used. While these are ubiquitous, and IMO pleasing, 
for sip examples, its my understanding that they aren't really supposed 
to be used in official documents because they are potentially valid 
domains that might belong to somebody. I recommend using 
"atlanta.example.com" and "biloxy.example.com" instead.

Figure 3:

The indenting seems odd and a bit distracting. I gather the indenting is 
aligned with the positioning of the sender in the call flow. But I don't 
find it helpful.

The messages don't include Via headers. Presumably this is because they 
aren't pertinent to what is being discussed. But it would be good to 
note that some headers have been omitted to ease readability.

IMO it would be useful to add another bit of info the the intro line for 
each message - the address to which it was sent. E.g.:

       F5 ACK UA1 -> P1 (192.0.2.254:5060)

While it is redundant information I think it would improve understanding.

Figure 5:

It appears to me that the message F2 is not consistent with the 
description of the scenario. That says that P1 is forwarding requests to 
bob using UDP based on information it learned from registration. If so, 
then I would expect that P1 would be translating the R-URI to the 
registered contact. Yet that is not shown. So I would expect message F2 
to look more like:

            F2 INVITE P1 -> UA2

            INVITE sip:bob@ua2.biloxi.com;transport=udp SIP/2.0
            Record-Route: <sip:192.0.2.1;lr> (NO transport param)
            From: Alice <sip:alice@atlanta.com>;tag=1234
            To: Bob <sip:bob@biloxi.com>
            Contact: <sip:alice@ua1.atlanta.com;transport=tcp>

Also, IMO it would be useful to add another bit of info the the intro 
line for each message - the domain to which it was sent. Rolling this up 
with my prior comment, perhaps always show the address, and also show 
the transport when it is pertinent to the discussion.

            F2 INVITE P1 -> UA2 (ua2.biloxi.com/udp)

Section 6:

Nowhere in here do I see any mention of the impact of message size on 
transport selection. In theory, any UA or proxy using UDP must also be 
prepared to use TCP for those requests that exceed the size limit for 
UDP. If the route is locked down to UDP in a Contact or Route header, 
then there will be no option to switch to TCP for large requests.

Having said that, I realize there are probably a lot of devices out 
there what only support UDP, and are not prepared to switch to TCP.

I don't know what the proper resolution of this problem is, but I do 
think it should be discussed, rather than being ignored.

Section 6.1:

There is normative language in this section:

    This usage SHOULD be avoided, because forcing the transport protocol

Is this intended to be normative? If so, its not entirely clear what 
"This" refers to.

Section 6.2:

This section seems to go out of its way to put Record-Route rewriting at 
parity with double record routing. This seems in conflict with the 
earlier sections that *prefer* double Record-Routing. I do think it 
probably makes sense to acknowledge here that Record-Route rewriting is 
a *possibility*, while not advocating it.

	Thanks,
	Paul


DRAGE, Keith (Keith) wrote:
> We recently put 
> 
> http://www.ietf.org/internet-drafts/draft-ietf-sip-record-route-fix-03.t
> xt
> 
> Unfortunately we only received one comment on the draft. In order to
> ensure that the document does get reviewed, we are asking a few people
> to do a review of the current version. A show of hands at the WG meeting
> indicated that very few people had read the current version.
> 
> Is it possible that you could do such a review of the document?
> 
> If so, then please indicate when you might be able to complete such a
> review?
> 
> Regards
> 
> Keith
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug  4 09:20:04 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E60B23A6CE2;
	Mon,  4 Aug 2008 09:20:03 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CB9BC3A6CE9
	for <sip@core3.amsl.com>; Mon,  4 Aug 2008 09:20:01 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.439
X-Spam-Level: 
X-Spam-Status: No, score=-2.439 tagged_above=-999 required=5 tests=[AWL=0.160, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id L5r8BjudsXAX for <sip@core3.amsl.com>;
	Mon,  4 Aug 2008 09:19:56 -0700 (PDT)
Received: from ihemail1.lucent.com (ihemail1.lucent.com [135.245.0.33])
	by core3.amsl.com (Postfix) with ESMTP id 7EED028C2A7
	for <sip@ietf.org>; Mon,  4 Aug 2008 09:19:26 -0700 (PDT)
Received: from ilexp02.ndc.lucent.com (h135-3-39-2.lucent.com [135.3.39.2])
	by ihemail1.lucent.com (8.13.8/IER-o) with ESMTP id m74GHs4q008754
	for <sip@ietf.org>; Mon, 4 Aug 2008 11:19:42 -0500 (CDT)
Received: from DEEXP02.DE.lucent.com ([135.248.187.66]) by
	ilexp02.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 4 Aug 2008 11:16:45 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP02.DE.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 4 Aug 2008 18:16:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 4 Aug 2008 18:16:41 +0200
Message-ID: <5D1A7985295922448D5550C94DE29180021D0CCB@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: NOMCOM participation
Thread-Index: Acj2TXrv1lpvhJMQTc6US4nJ3DEEeg==
From: "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
To: "SIP IETF" <sip@ietf.org>
X-OriginalArrivalTime: 04 Aug 2008 16:16:43.0086 (UTC)
	FILETIME=[7BDA06E0:01C8F64D]
X-Scanned-By: MIMEDefang 2.57 on 135.245.2.33
Subject: [Sip] NOMCOM participation
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

The NOMCOM chair has asked that the WGs attention is drawn to the
current call for NOMCOM volunteers. I attach the latest mail to the IETF
list describing what this is and the mechanism.

There must be somewhere around 700 - 800 people qualified for this, so
48 is a little low.

Get out there and volunteer.

Regards

Keith

------------------------------------------------------------------------
------------------------------------

Third Nomcom 2008-9 Call for Volunteers!
I am pleased to report that there are 48 volunteers whose
qualifications have been confirmed by the secretariat.  
There are 9 more volunteers awaiting confirmation.
However, We need more volunteers.
Please!
Yes, you have until August 18th, 2008 as stated below (with the year
corrected from the typo in the initial announcement).  But it is
better for all concerned if you can volunteer early.  Please do so. 
The full details are included below.  Please use the listed format, as
that helps me and the secretariat do our jobs better. 

In a separate note I will be providing the current expected Nomcom
schedule, the anticipated seed sources for the random selection, and
the current list of volunteers.

Thank you, and I look forward to hearing from you,
Joel M. Halpern


Once again, the IETF nominating process has begun, and the community
(and I) need your help.  The IETF Nominating Committee appoints folks to
fill the open slots on the IAOC, the IAB, and the IESG.  The people who
do that are 10 folks selected randomly from the pool of volunteers.
To make this work well for the community, we need people to volunteer.
Lots of people.  Please!

Volunteers must have attended 3 of the past 5 IETF meetings.  As defined
by RFC 3777, that is 3 of the past 5 meetings as of the time this
announcement goes out to start the solicitation. If you qualify, and are
willing to forgo appointment to any of the positions for which the
nominating committee is responsible, please volunteer.  Details on the
nominating process can be found in RFC 3777.

Below is the list of people and posts whose terms end with the March
2009 IETF meeting, and whose positions therefore the nominating
committee is responsible for:

IAOC:
Jonne Soininen

IAB:
Loa Andersson
Barry Leiba
Kurtis Lindqvist
Danny McPherson
Dave Thaler
Lixia Zhang

IESG:
IETF and IESG Chair: Russ Housley
Applications Area (app): Chris Newman
Internet Area (int): Mark Townsley
Operations and Management Area (ops): Ronald Bonica
Real-time Applications and Infrastructure Area (rai):
    Jon Peterson
Routing Area (rtg): David Ward
Security Area (sec): Tim Polk
Transport Area (tsv): Lars Eggert

Before volunteering, please think about whether you want to be
considered for one of the above positions instead.  If you are willing
to volunteer, please send email before 5:00 pm EDT (2100 UTC/GMT) August
18, 2008 (otherwise, please read on)

Please send email to me using the following skeleton:

To: jmh@joelhalpern.com
Subject: Nomcom 2008-9 Volunteer
Body:

<Your Full Name>  // As you enter in the IETF Registration Form,
                  // First/Given name followed by Last/Family Name
<Current Primary Affiliation>
                  // typically what goes in the Company field
                  //  in the IETF Registration Form
[<all email addresses used to Register for the past 5 IETF meetings>]
<Preferred email address>  //
<Telephone number>         // For confirmation if selected

Please expect an email response from me within 1-2 days stating
whether you are qualified or not.  If you don't receive anything, please
re-send your email with the tag (duplicate) in the subject line.
During the IETF meeting in Dublin, responses will be somewhat slower,
due to both my activities at the meeting and the secretariat's many
activities in support of the meeting.   I will try to send out at least
a prompt confirmation that your email volunteering has been received.


Not convinced yet?  Please consider that nomcom members play an
important role in shaping the leadership of the IETF.  If you are a
people person, you will enjoy meeting many of the active contributors to
the IETF.  If you prefer instead to read a lot of email, well, we have
that too.  Being a nomcom member is also an important responsibility: it
requires adherence to confidentiality rules and some time commitment
from the members.  The term of this nomcom will begin in early September
this year.  We will be talking with folks at the Minneapolis IETF (if
you are there.  It is not mandatory that all nomcom members come to the
meeting.)  I hope to wrap up our primary selection work by mid-December,
and we must complete our selection work by mid-January.

We will be collecting requirements from the community, as well as
talking to candidates and to community members about candidates.
There will be weekly conference calls to ensure progress.


Nomcom members are selected following a publicly verifiable random
selection method specified in RFC 3797.

For the nomcom to work as it should, the pool from which the volunteers
are chosen should be as large as possible. The more people who
volunteer, the better chance we have of choosing a random yet
representative cross section of the IETF population.

Ensuring the leadership of the IETF is fair and balanced and comprised
of those who can lead the IETF in the right direction is an important
responsibility that rests on the IETF participants at large.
Volunteering for the nomcom is a good way of contributing in that
direction.  So please volunteer!


I will be publishing a more thorough and precise target timetable, as
well as details of the randomness seeds to be used for the RFC 3797
selection process within the next few days.


Thank you, and I hope to hear from you,
Joel M. Halpern
jmh@joelhalpern.com
nomcom-chair@ietf.org
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug  4 13:16:39 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1A5D83A67FA;
	Mon,  4 Aug 2008 13:16:39 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D2C233A6922
	for <sip@core3.amsl.com>; Mon,  4 Aug 2008 13:16:37 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2MunL2oPDmU4 for <sip@core3.amsl.com>;
	Mon,  4 Aug 2008 13:16:37 -0700 (PDT)
Received: from zrtps0kp.nortel.com (zrtps0kp.nortel.com [47.140.192.56])
	by core3.amsl.com (Postfix) with ESMTP id D063A3A691C
	for <sip@ietf.org>; Mon,  4 Aug 2008 13:16:36 -0700 (PDT)
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zrtps0kp.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	m74KH2p26910; Mon, 4 Aug 2008 20:17:02 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 4 Aug 2008 15:17:00 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inadequate Requirements for draft-ietf-sip-199-00
Thread-Index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwATutWg
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se>
From: "Francois Audet" <audet@nortel.com>
To: <sip@ietf.org>
Cc: Christer Holmberg <christer.holmberg@ericsson.com>
Subject: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I believe that the Requirents section for this draft is completely inadequate.
 
The only material in section 3 is the following:

	REQ 1: It must be possible to indicate to the UAC that an early dialog has been 
	terminated before a final response is sent.

This is almost as good as "REQ: It must be possible to do whatever this draft says".

This draft must really explain what it is trying to achieve. The Introduction has a bunch
of text that describes what looks and smells exactly like the HERFP problem.

In Dublin, it was stated that this draft does not attempt to solve the HERFP problem. If
that is the case, then I am completely baffled by what exactly is it trying to solve. Yes,
there is a little bit of wording about the need to "release resources" (whatever that means),
but I find it a little bit hard to swallow that we need new protocol for that.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug  4 13:28:11 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 55A9B3A6A43;
	Mon,  4 Aug 2008 13:28:11 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5113B3A6A43
	for <sip@core3.amsl.com>; Mon,  4 Aug 2008 13:28:10 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.194
X-Spam-Level: 
X-Spam-Status: No, score=-6.194 tagged_above=-999 required=5 tests=[AWL=0.055, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hbg6n3Oci9ub for <sip@core3.amsl.com>;
	Mon,  4 Aug 2008 13:28:09 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 41C7C3A6A09
	for <sip@ietf.org>; Mon,  4 Aug 2008 13:28:09 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	14793206EA; Mon,  4 Aug 2008 22:28:37 +0200 (CEST)
X-AuditID: c1b4fb3e-b019cbb000004ec0-95-489766745476
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	EC4C220277; Mon,  4 Aug 2008 22:28:36 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 4 Aug 2008 22:28:36 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 4 Aug 2008 22:28:36 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inadequate Requirements for draft-ietf-sip-199-00
thread-index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwATutWgAAMre/c=
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Francois Audet" <audet@nortel.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 04 Aug 2008 20:28:36.0669 (UTC)
	FILETIME=[AC3FC6D0:01C8F670]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi Francois,

As was agreed during the "requirements phase", we are not going to solve th=
e HERPF problem as part of this task. Nobody objected to that. =


It was agreed that the scope is to only be able to indicate that the early =
dialog has been terminated.

I have tried to explain different kind of "resources" for which the mechani=
sm could be useful. =


If you want to start a separate work item in order to solve (with or withou=
t using 199) other problems you are free to propose such work :) =


Regards,

Christer



-----Alkuper=E4inen viesti-----
L=E4hett=E4j=E4: Francois Audet [mailto:audet@nortel.com]
L=E4hetetty: ma 4.8.2008 22:17
Vastaanottaja: sip@ietf.org
Kopio: Christer Holmberg
Aihe: Inadequate Requirements for draft-ietf-sip-199-00
 =

I believe that the Requirents section for this draft is completely inadequa=
te.
 =

The only material in section 3 is the following:

	REQ 1: It must be possible to indicate to the UAC that an early dialog has=
 been =

	terminated before a final response is sent.

This is almost as good as "REQ: It must be possible to do whatever this dra=
ft says".

This draft must really explain what it is trying to achieve. The Introducti=
on has a bunch
of text that describes what looks and smells exactly like the HERFP problem.

In Dublin, it was stated that this draft does not attempt to solve the HERF=
P problem. If
that is the case, then I am completely baffled by what exactly is it trying=
 to solve. Yes,
there is a little bit of wording about the need to "release resources" (wha=
tever that means),
but I find it a little bit hard to swallow that we need new protocol for th=
at.

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug  4 16:00:14 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E85153A6960;
	Mon,  4 Aug 2008 16:00:12 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F26393A68B2
	for <sip@core3.amsl.com>; Mon,  4 Aug 2008 16:00:06 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id kpItuNjwR21p for <sip@core3.amsl.com>;
	Mon,  4 Aug 2008 16:00:01 -0700 (PDT)
Received: from out003.iad.hostedmail.net (out003.iad.hostedmail.net
	[209.225.56.66])
	by core3.amsl.com (Postfix) with ESMTP id E58DE3A68AB
	for <sip@ietf.org>; Mon,  4 Aug 2008 15:59:55 -0700 (PDT)
Received: from ATL1VEXC020.usdom003.tco.tc ([10.158.7.31]) by
	out003.iad.hostedmail.net with Microsoft SMTPSVC(6.0.3790.3959);
	Mon, 4 Aug 2008 19:00:15 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 4 Aug 2008 19:00:23 -0400
Message-ID: <BBE61D1553D8A34F812FF87377B2935F04610792@ATL1VEXC020.usdom003.tco.tc>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] 199: Staus and open issues after Dublin
Thread-Index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwAYkYUw
From: "Brett Tate" <brett@broadsoft.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 04 Aug 2008 23:00:15.0161 (UTC)
	FILETIME=[DB5F7A90:01C8F685]
Subject: Re: [Sip] 199: Staus and open issues after Dublin
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> We will not define an option-tag for 199 support. 

Since the working group has issue with using option-tag, I propose
something else be added to request to indicate that something along the
path supports and desires receiving 199.

For instance, rfc4028 allows the UAC or proxy to include
Session-Expires.  A similar header (maybe generic one) could be defined
and optionally contain parameters (uac, proxy, etcetera); for instance,
"Desire-199:".


> 1) Is a proxy allowed to send 199 in the first 
> place, or are only UASes allowed to do it?

I have no issue with allowing it.  However the draft should likely
provide guidance if originator of 199 still considered a proxy or has
morphed into UAS/b2bua when using another's To tag.  Depending upon
interpretation of rfc3261 (and dropped packets), there are potential
issues concerning Contact and Record-Route of the 199 (unless remember
prior for inclusion within 199).  

What should occur when INVITE 2xx received after proxy originated 199
with the same To tag?


> 2) are proxies allowed to send 199 reliably?

I wouldn't consider it a proxy since it is trampling upon another's RSeq
and dialog (depending upon 199's Record-Route and Contact).


> 3) Assuming proxies are allowed to send 199 (see 
> issue 1), are proxies allowed to send 199 
> unreliably, even if 100rel is required? 

Concerning this and other non compliances, not sending the 199 would
likely be best to avoid violating rfc3261/rfc3262.


> 4) Is it a MAY/RECOMMENDATION/SHOULD/MUST for UAS to send 199? 

I prefer MAY.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 02:00:52 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 288063A6A43;
	Tue,  5 Aug 2008 02:00:52 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 86ACE3A6B89
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 02:00:51 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ISiwX9c8p7K8 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 02:00:50 -0700 (PDT)
Received: from mailgate.siemenscomms.co.uk (mailgate.siemenscomms.co.uk
	[195.171.110.225])
	by core3.amsl.com (Postfix) with ESMTP id 20FA73A68C6
	for <sip@ietf.org>; Tue,  5 Aug 2008 02:00:49 -0700 (PDT)
Received: from GBNTHT12009MSX.gb002.siemens.net ([137.223.219.235])
	by siemenscomms.co.uk (PMDF V6.3-x14 #31430)
	with ESMTP id <0K540067VEE50B@siemenscomms.co.uk> for sip@ietf.org; Tue,
	05 Aug 2008 10:01:17 +0100 (BST)
Date: Tue, 05 Aug 2008 10:01:16 +0100
From: "Elwell, John" <john.elwell@siemens.com>
In-reply-to: <20080801134611.1B8C9516C54@kilo.rtfm.com>
To: Eric Rescorla <ekr@networkresonance.com>, Dan Wing <dwing@cisco.com>
Message-id: <0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: [Sip] Thoughts on SIP Identity issues
Thread-Index: Acjz3RRYpN5TYq4AQpSXWzF3cKkYZwCc534Q
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com> <0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
Cc: Cullen Jennings <fluffy@cisco.com>, SIP IETF <sip@ietf.org>, "Uzelac,
	Adam" <Adam.Uzelac@globalcrossing.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Eric, 

> -----Original Message-----
> From: Eric Rescorla [mailto:ekr@networkresonance.com] 
> Sent: 01 August 2008 14:46
> To: Dan Wing
> Cc: 'Eric Rescorla'; 'Hadriel Kaplan'; 'Jonathan Rosenberg'; 
> Elwell, John; 'Cullen Jennings'; 'SIP IETF'; 'Uzelac, Adam'
> Subject: Re: [Sip] Thoughts on SIP Identity issues
> 
> At Fri, 1 Aug 2008 09:36:36 +0100,
> Dan Wing wrote:
> > 
> > > At Thu, 31 Jul 2008 20:54:43 -0400,
> > > Hadriel Kaplan wrote:
> > > > 
> > > > 
> > > > 
> > > > > -----Original Message-----
> > > > > From: Eric Rescorla [mailto:ekr@networkresonance.com]
> > > > >
> > > > > Funny you should mention that.
> > > > >
> > > > > It's becoming increasingly clear that VBR codecs leak a fair
> > > > > amount of information, even when they are encrypted [WBC+08].
> > > > > So, if, for instance, you were planning to use a fixed-rate
> > > > > codec and an attacker could force you into a VBR codec, that
> > > > > might leak information.
> > > > 
> > > > Fascinating paper. (truly) But it sounds more like just 
> a reason to
> > > > fix SRTP for VBR, through random padding or whatever.
> > > 
> > > I haven't studied the problem, but I suspect random padding
> > > is of limited use because it averages out. Probably better
> > > to use a fixed length codec.
> > > 
> > > However, I think focusing on that misses the larger 
> point: the UAC and
> > > UAS have certain desires as expressed in the messages/SDP
> > > To the extent to which we allow the intermediaries to change
> > > those messages, we need to carefully analyze each instance,
> > > and this analysis may actually depend on facts yet to be 
> > > discovered.
> > 
> > 4474 allows intermediaries to change SDP, and re-create a new
> > >From and a new signature. 
> 
> Well, it allows it in the sense that there's no known
> cryptographic way to stop it in any system, then sure.
> 
> 
> > This (a) destroys end-to-end identity 
> > (which is the subject of this thread) *and* (b) allows 
> > intermediaries to perform the very downgrade attack you
> > cited ([WBC+08]).
> > 
> > This is why I want to improve upon 4474.
> 
> I don't agree with this analysis.
> 
> Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.
> It's 4474 signed by atlanta.com. Now, some SBC in the middle
> edits the SDP. This breaks the signature. 
> 
> At this point, when Bob gets the message, he knows:
> 
> (1) This message claims to be from Alice.
> (2) The signature was broken.
> 
> He therefore has no knowledge of what happen. He can choose to
> accept or reject the call, but can't reasonably infer that
> the call came from Alice or anything else about Alice's 
> intentions.
> 
> 
> Now, if the SBC resigns, then Bob gets a valid message
> from somebody else other than Alice. Effectively, the
> SBC. Now, the SBC claims that it is connecting Bob to
> Alice, but it could be lying. If Bob trusts the SBC,
> he can accept the call, but he's trusting the SBC.
> Sure, the SBC can edit the SDP to replace codecs, but
> it can do *anything*. It could, for instance, replace
> the DTLS-SRTP fingerprint. This isn't surprising, since
> the SBC is really a B2BUA and this is a call from it.
[JRE] I agree so far, but what I really would like to see is some
mechanism by which atlanta.com can sign the request from Alice and that
signature stands a fairly good chance of surviving harmless SBCs in
intermediate domains. We can't do anything about an intermediate domain
that insists on re-signing for the sake of it, or performs some action
that involves decryption of the media (e.g., transcoding, mixing). At
least in such cases Bob will see that the call is secured only as far as
the intermediate domain. But in cases where the intermediate domain is
performing less invasive actions such simple media steering, it should
have some way of doing so without breaking atlanta.com's signature. Then
Bob will not be misled into thinking the call is insecure (i.e., secured
only as far as the intermediate domain) when really it is secured all
the way to Alice's domain and he can indeed talk without fear of an
intermediary eavesdropping or injecting information.

John
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 02:00:53 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D82543A6C12;
	Tue,  5 Aug 2008 02:00:53 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1E1653A68C6
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 02:00:52 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id BCbOc8-yW4ti for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 02:00:51 -0700 (PDT)
Received: from mailgate.siemenscomms.co.uk (mailgate.siemenscomms.co.uk
	[195.171.110.225])
	by core3.amsl.com (Postfix) with ESMTP id 03DC03A6A43
	for <sip@ietf.org>; Tue,  5 Aug 2008 02:00:51 -0700 (PDT)
Received: from GBNTHT12009MSX.gb002.siemens.net ([137.223.219.235])
	by siemenscomms.co.uk (PMDF V6.3-x14 #31430)
	with ESMTP id <0K5400689EE50B@siemenscomms.co.uk> for sip@ietf.org; Tue,
	05 Aug 2008 10:01:17 +0100 (BST)
Date: Tue, 05 Aug 2008 10:01:16 +0100
From: "Elwell, John" <john.elwell@siemens.com>
In-reply-to: <D314FE0D-6BF7-4477-8C61-628FE473F7EA@ntt-at.com>
To: Shida Schubert <shida@ntt-at.com>
Message-id: <0D5F89FAC29E2C41B98A6A762007F5D0F565E3@GBNTHT12009MSX.gb002.siemens.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: [Sip] Comments on draft-ietf-sip-ua-privacy-02
Thread-Index: AcjzUl4SjrW0V8peR4mCgljQPlA/UQDB7TfQ
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <0D5F89FAC29E2C41B98A6A762007F5D0EF28D4@GBNTHT12009MSX.gb002.siemens.net>
	<4891AFC4.8060501@lab.ntt.co.jp>
	<0D5F89FAC29E2C41B98A6A762007F5D0F27193@GBNTHT12009MSX.gb002.siemens.net>
	<D314FE0D-6BF7-4477-8C61-628FE473F7EA@ntt-at.com>
Cc: Mayumi Munakata <munakata.mayumi@lab.ntt.co.jp>, SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Comments on draft-ietf-sip-ua-privacy-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Shida,

I am just looking to have some appropriate discussion text in the
relevant place or in the Security Consideration section.

On the one hand, as my last mail pointed out, the domain of the
enterprise can itself disclose too much, and in such cases you would
have to do as you suggest, i.e., a third party GRUU or an anonymisation
service. On the other hand, I could imagine that for some enterprises
the policy might forbid hiding of their domain name, in which case there
is no problem.

John 

> -----Original Message-----
> From: Shida Schubert [mailto:shida@ntt-at.com] 
> Sent: 31 July 2008 22:14
> To: Elwell, John
> Cc: Mayumi Munakata; SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-ua-privacy-02
> 
> 
> Hi John;
> 
>   I understand for enterprise or SOHO, domain name itself
> may give away who the caller is.
> 
>   We can add the text describing the implication of domain
> name contained in the request for enterprise and SOHO
> etc. And provide a workaround by using 3rd party Registrar
> / Proxy (anonymization service) OR we can suggest that
> UA falls back to the use of privacy:header defined in
> RFC3323, which doesn't ensure any assurance that you
> get the privacy you desire but if there is a privacy service
> along the signaling path sufficient privacy will be provided.
> 
>   I am content with suggesting the use of anonymization
> service, but this will mean that depending on the call, UA
> needs to distinguish the set of proxy/registrar to use based
> on the user's intent/action (e.g. pushing anonymous button on the  
> phone?).
> 
>   Any other suggestion for a workaround?
> 
>   Regards
>    Shida
> 
> On 31-Jul-08, at 6:35 PM, Elwell, John wrote:
> 
> > Mayumi,
> >
> >> -----Original Message-----
> >> From: Mayumi Munakata [mailto:munakata.mayumi@lab.ntt.co.jp]
> >> Sent: 31 July 2008 13:28
> >> To: Elwell, John
> >> Cc: SIP IETF
> >> Subject: Re: Comments on draft-ietf-sip-ua-privacy-02
> >>
> >> John,
> >>
> >> Thank you for the comments on ua-privacy draft.
> >>
> >> See inline.
> >>
> >>> 1. I think there should be something pointing out the
> >> limitations of
> >>> GRUU for obtaining an anonymous contact URI.
> >>
> >> Will add the text to mention it.
> >>
> >>> A temporary GRUU will still
> >>> reveal the issuing domain, i.e., the domain with which the user
> >>> registers. For the From URI we specify
> >> sip:anonymous@anonymous.invalid
> >>> (except where SIP Identity is used), but I don't see the
> >> point in this
> >>> if Contact reveals the domain.
> >>
> >> That's true.  There is no point to conceal the user's
> >> domain name in the From header if the same domain name
> >> appears in the Contact header.
> >>
> >> However, there is an option to use a third-party GRUU server
> >> to get a temp-gruu that doesn't reveal the use's domain name.
> >>
> >> Anyway, the user's domain name is not considered as
> >> critical privacy-sensitive information in this draft.
> >> So it should be concealed only if that doesn't ruin more
> >> important functions such as routing and authentication.
> > [JRE] As discussed at the meeting, for a small enterprise the domain
> > name is almost certainly critical. Somebody might guess the 
> particular
> > caller, or maybe just knowing the name of the enterprise is  
> > information
> > you don't want to disclose. Even for a large enterprise, the caller
> > might be guessed if the callee only knows one person or a 
> small number
> > of people from that enterprise. I would say that for an 
> enterprise the
> > domain name is very likely to be critical privacy-sensitive  
> > information.
> > I agree that for a sizeable service provider it might not 
> be critical.
> >
> > John
> > _______________________________________________
> > Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> 
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 02:00:54 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 92D353A6C66;
	Tue,  5 Aug 2008 02:00:54 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 7BCEB3A6BD9
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 02:00:52 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id a1xwtyp92nIC for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 02:00:51 -0700 (PDT)
Received: from mailgate.siemenscomms.co.uk (mailgate.siemenscomms.co.uk
	[195.171.110.225])
	by core3.amsl.com (Postfix) with ESMTP id 5A2E93A6B58
	for <SIP@ietf.org>; Tue,  5 Aug 2008 02:00:51 -0700 (PDT)
Received: from GBNTHT12009MSX.gb002.siemens.net ([137.223.219.235])
	by siemenscomms.co.uk (PMDF V6.3-x14 #31430)
	with ESMTP id <0K540068EEE60B@siemenscomms.co.uk> for SIP@ietf.org; Tue,
	05 Aug 2008 10:01:18 +0100 (BST)
Date: Tue, 05 Aug 2008 10:01:17 +0100
From: "Elwell, John" <john.elwell@siemens.com>
In-reply-to: <2E002545-1846-4DEE-AFCF-6117845EFB52@standardstrack.com>
To: Eric Burger <eburger@standardstrack.com>, SIP IETF <SIP@ietf.org>
Message-id: <0D5F89FAC29E2C41B98A6A762007F5D0F565E4@GBNTHT12009MSX.gb002.siemens.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: [Sip] INFO Issue: Info-Send Procedures
Thread-Index: Acj0qh9iWfsir0cbQMOO/amix0oQiwBsdcZA
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <2E002545-1846-4DEE-AFCF-6117845EFB52@standardstrack.com>
Subject: Re: [Sip] INFO Issue: Info-Send Procedures
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Eric, 

> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
> Behalf Of Eric Burger
> Sent: 01 August 2008 21:01
> To: SIP IETF
> Subject: [Sip] INFO Issue: Info-Send Procedures
> 
<snip/>
> 
> Related to this is we currently explicitly disallow renegotiation at  
> re-INVITE and UPDATE time.  Do we really want this restriction?  OK  
> with me.

This would forbid B2BUAs that do third party call transfer, for example,
renegotiating to take into account the capabilities of the new party.
Whilst we may frown on 3rd party call transfer, the fact that REFER and
Replaces are effectively "MAY" (i.e., support for the RFCs is optional),
vendors are forced into continuing to support third party transfer.

John
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 02:00:56 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 660283A6C9D;
	Tue,  5 Aug 2008 02:00:56 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B0BEB3A6C90
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 02:00:55 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id rUWQDLi0K-yy for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 02:00:50 -0700 (PDT)
Received: from mailgate.siemenscomms.co.uk (mailgate.siemenscomms.co.uk
	[195.171.110.225])
	by core3.amsl.com (Postfix) with ESMTP id A040D3A68D2
	for <sip@ietf.org>; Tue,  5 Aug 2008 02:00:50 -0700 (PDT)
Received: from GBNTHT12009MSX.gb002.siemens.net ([137.223.219.235])
	by siemenscomms.co.uk (PMDF V6.3-x14 #31430)
	with ESMTP id <0K5400683EE50B@siemenscomms.co.uk> for sip@ietf.org; Tue,
	05 Aug 2008 10:01:17 +0100 (BST)
Date: Tue, 05 Aug 2008 10:01:16 +0100
From: "Elwell, John" <john.elwell@siemens.com>
In-reply-to: <489336E4.6050204@cisco.com>
To: Paul Kyzivat <pkyzivat@cisco.com>, Eric Rescorla <ekr@networkresonance.com>
Message-id: <0D5F89FAC29E2C41B98A6A762007F5D0F565E2@GBNTHT12009MSX.gb002.siemens.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: [Sip] Thoughts on SIP Identity issues
Thread-Index: Acjz8dw+4PdCLpLMRTK6JFci5B6msgCZyi/A
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com> <0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com> <489336E4.6050204@cisco.com>
Cc: Cullen Jennings <fluffy@cisco.com>, SIP IETF <sip@ietf.org>, "Uzelac,
	Adam" <Adam.Uzelac@globalcrossing.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Paul,

The problem is, what incentive does the SBC vendor have to go to these
lengths? I really think we need a solution that doesn't require the SBC
to do any more than pass information on transparently. RFC 4474 fits
this criterion, except that it won't work when SBCs do media steering or
make other "harmless" changes to signed information.

John

> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> Sent: 01 August 2008 17:17
> To: Eric Rescorla
> Cc: Dan Wing; 'Cullen Jennings'; 'Uzelac, Adam'; 'SIP IETF'; 
> Elwell, John
> Subject: Re: [Sip] Thoughts on SIP Identity issues
> 
> What if the SBC did the following:
> 
> - made whatever changes it wants to make to the incoming
>    request to derive the message it wants to send.
> 
> - calculated the reverse diff the transforms its modified
>    message into the message it received.
> 
> - affixed the reverse diff to the new message as another
>    body part.
> 
> - signed the whole thing as itself.
> 
> - sent it on.
> 
> When the UAS receives this, it first validates the signature 
> and decides 
> if it trusts the signer.
> 
> If so, it may then use the reverse diff to reconstruct the unmodified 
> message. It can then validate any signature that may contain 
> to verify 
> the actual caller. This can of course be applied recursively.
> 
> At any stage it can just decide to trust any assertions made by the 
> intermediary.
> 
> 	Paul
> 
> Eric Rescorla wrote:
> > At Fri, 1 Aug 2008 09:36:36 +0100,
> > Dan Wing wrote:
> >>> At Thu, 31 Jul 2008 20:54:43 -0400,
> >>> Hadriel Kaplan wrote:
> >>>>
> >>>>
> >>>>> -----Original Message-----
> >>>>> From: Eric Rescorla [mailto:ekr@networkresonance.com]
> >>>>>
> >>>>> Funny you should mention that.
> >>>>>
> >>>>> It's becoming increasingly clear that VBR codecs leak a fair
> >>>>> amount of information, even when they are encrypted [WBC+08].
> >>>>> So, if, for instance, you were planning to use a fixed-rate
> >>>>> codec and an attacker could force you into a VBR codec, that
> >>>>> might leak information.
> >>>> Fascinating paper. (truly) But it sounds more like just 
> a reason to
> >>>> fix SRTP for VBR, through random padding or whatever.
> >>> I haven't studied the problem, but I suspect random padding
> >>> is of limited use because it averages out. Probably better
> >>> to use a fixed length codec.
> >>>
> >>> However, I think focusing on that misses the larger 
> point: the UAC and
> >>> UAS have certain desires as expressed in the messages/SDP
> >>> To the extent to which we allow the intermediaries to change
> >>> those messages, we need to carefully analyze each instance,
> >>> and this analysis may actually depend on facts yet to be 
> >>> discovered.
> >> 4474 allows intermediaries to change SDP, and re-create a new
> >> >From and a new signature. 
> > 
> > Well, it allows it in the sense that there's no known
> > cryptographic way to stop it in any system, then sure.
> > 
> > 
> >> This (a) destroys end-to-end identity 
> >> (which is the subject of this thread) *and* (b) allows 
> >> intermediaries to perform the very downgrade attack you
> >> cited ([WBC+08]).
> >>
> >> This is why I want to improve upon 4474.
> > 
> > I don't agree with this analysis.
> > 
> > Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.
> > It's 4474 signed by atlanta.com. Now, some SBC in the middle
> > edits the SDP. This breaks the signature. 
> > 
> > At this point, when Bob gets the message, he knows:
> > 
> > (1) This message claims to be from Alice.
> > (2) The signature was broken.
> > 
> > He therefore has no knowledge of what happen. He can choose to
> > accept or reject the call, but can't reasonably infer that
> > the call came from Alice or anything else about Alice's 
> > intentions.
> > 
> > 
> > Now, if the SBC resigns, then Bob gets a valid message
> > from somebody else other than Alice. Effectively, the
> > SBC. Now, the SBC claims that it is connecting Bob to
> > Alice, but it could be lying. If Bob trusts the SBC,
> > he can accept the call, but he's trusting the SBC.
> > Sure, the SBC can edit the SDP to replace codecs, but
> > it can do *anything*. It could, for instance, replace
> > the DTLS-SRTP fingerprint. This isn't surprising, since
> > the SBC is really a B2BUA and this is a call from it.
> > 
> > 
> > The schemes being proposed here allow the RFC 4474 signature
> > to survive some editing of the message by the SBC. The
> > question here is the extent to which that enables *silent*
> > attacks by the SBC. To take an extreme case, if we allowed
> > editing of the fingerprint, then Bob could think he was
> > talking to Alice, but he was actually talking to the
> > SBC. Editing the codecs to allow this kind of traffic
> > analysis is a (much) less serious version of the same
> > threat. Again, this differs qualitatively from the former
> > case because Bob does not know he is under attack.
> > 
> > The question, then, when someone proposes exempting some
> > field from the signature, is what silent attacks it enables.
> > I have yet to see any satisfactory analysis along these
> > lines.
> > 
> > -Ekr
> > 
> > 
> > 
> > 
> > 
> > 
> > _______________________________________________
> > Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> > 
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 05:06:50 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E17F13A6CE9;
	Tue,  5 Aug 2008 05:06:50 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8803A28C264
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 05:06:49 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.199
X-Spam-Level: 
X-Spam-Status: No, score=-6.199 tagged_above=-999 required=5 tests=[AWL=0.050, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id qWJ0q+fewKHw for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 05:06:48 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 614333A6BB1
	for <sip@ietf.org>; Tue,  5 Aug 2008 05:06:48 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	78F8D20F1E; Tue,  5 Aug 2008 14:06:47 +0200 (CEST)
X-AuditID: c1b4fb3e-ae198bb000004ec0-11-48984257b251
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	49D8720EB0; Tue,  5 Aug 2008 14:06:47 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 14:06:47 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 14:06:44 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
In-Reply-To: <48862EFF.3000908@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-199-00.txt
thread-index: AcjsLbhdnHdc2li5QLWFG07rb8fWWQKw/Png
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com>
	<48862EFF.3000908@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>, "Robert Sparks" <rjsparks@nostrum.com>
X-OriginalArrivalTime: 05 Aug 2008 12:06:47.0327 (UTC)
	FILETIME=[BC188AF0:01C8F6F3]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi, 

>>7) Section 7: "A UAC that receives a 199 response for an early dialog
MUST NOT
>>send any further requests on that dialog...". Can you point to any
list discussion
>>around this requirement? I think there's some danger to consider
there. At the
>>very least we need to make this statement multiple-usage safe.
>
>This is a very good catch. This needs to be aligned with dialogusage.
If the 199 contained the final response that triggered it, then that
final response could be used to determine the impact 
>on the dialog or dialog usage or just the transaction. But if the 199
doesn't contain the final response, then this is a problem.

I forgot to bring this issue up in Dublin. Sorry for that.

First, we need to remember that the UAS may terminate every dialogusage
when sending the final response (depending on what final response is
sent), without the UAC knowing it. And, due to the forking rules, the
final response which is sent to the UAC may not even be the same which
was sent by the UAS, if a final response from another UAS is chosen as
the "best".

Second, we need to remember that this only affects early-dialogusages.

If needed, I guess we could include the final response which triggered
the 199, but we could also simply say that if the UAC does not know to
which dialogusage (if there are many) the 199 applies, it should not do
anything which may affect other usages for the same early dialog.


>>12) The open issue in section 10 (can we get a proxy involved in 
>>sending its own 199 reliably) is a big part of the confusion I pointed
to at 
>>the beginning of these comments. This is the part of the draft that I
expected 
>>needing face time in Dublin, but maybe we can make enough progress on
it in the 
>>hallway.
>>I don't think there's any way to allow it, and what we'll need instead
is text
>>more strongly recommending the endpoints do this themselves and 
>>restrict any proxy genesis of 199s to the unreliable case (and explain

>>more that this is just a transitionary optimization - we _really_ want
the 
>>endpoints doing this work if anything's going to be doing it at all.
>
>If the "proxy" wants to send a reliable 199, then I think it needs to
do so on its own dialog. But that makes no sense. Having the proxy
attempt to send the reliable response on the dialog 
>belonging to the UAS is *insane*.

Let's discuss this in the "open issues" thread.

Regards,

Christer
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 05:54:29 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3EAE03A6A0A;
	Tue,  5 Aug 2008 05:54:29 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8F6A33A6A0A
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 05:54:27 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.203
X-Spam-Level: 
X-Spam-Status: No, score=-6.203 tagged_above=-999 required=5 tests=[AWL=0.046, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dQ+Iikip1CNM for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 05:54:24 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id BDCB23A6AF2
	for <sip@ietf.org>; Tue,  5 Aug 2008 05:54:23 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	2D67D20496; Tue,  5 Aug 2008 14:54:53 +0200 (CEST)
X-AuditID: c1b4fb3c-ad099bb00000193b-54-48984d9ca630
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	E982E20426; Tue,  5 Aug 2008 14:54:52 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 14:54:53 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 14:54:52 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0750A6AB@esealmw113.eemea.ericsson.se>
In-Reply-To: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-199-00.txt
thread-index: AcjrX1ooZNuUGbdSSYmYEEpsqa/RLwLmUuUw
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Robert Sparks" <rjsparks@nostrum.com>,
	"SIP IETF" <sip@ietf.org>
X-OriginalArrivalTime: 05 Aug 2008 12:54:53.0077 (UTC)
	FILETIME=[74230C50:01C8F6FA]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi Robert,

In this reply I will try to address all issues except the ones related
to proxies-sending-reliably-199, which is dealt with in another thread.

>1) The header says intended status is Informational? You mean PS,
right?

I guess so.

>3) In section 6 you talk of a non-2xx final response terminating one or
more early
>     dialogs. Can you give me an example scenario where "more" comes
into play?
>     (preferably add one to the text)? I'm having a hard time seeing
how this ever more
>      than one.

What I mean to say is that when the UAC receives a final response for an
early dialog it normally releases all other early dialogs (the UAC
should of course still be ready to accept 200 OK responses for other
dialogs).

>4) Section 6 says the proxy MUST send a 199 when it receives on of
these non-2xx
>      final responses. Why is this MUST and not MAY?
>      There's no Require header here. We can have motivational text
saying why
>      proxies might really want to, but saying MUST or even SHOULD
seems wrong
>      from a protocol requirement point of view.

The idea is that if the proxy supports the 199, it must send it.

>5) With respect to that same requirement - it looks right now like
you're requiring
>      the proxy to 199 this to-tag even if the UAS that generated it
already did and the
>      proxy already forwarded that 199 even.

I can add text saying that if the proxy is aware that a 199 has already
been sent for a particular dialog, it shall not send a 199.

>6) Section 6 paragraph one's "MAY release resources" might be
misconstrued to
>      imply releasing the transaction state, which is NOT what you
mean. I'll propose
>      text to help try to avoid that later.

I guess we can add text saying that the transaction state must be
maintained as defined in 3261. Feel free to propose text :)


>8) The last paragraph of section 7 uses MUST NOT and MUST where it
really
>      should be using does not and is. This paragraph describes things
that are
>      rather than mandate behavior.

I'll have a look.

>9) Section 8 second open issue: We agreed that we were not addressing
HERFP
>      with this draft. If we are going to open this mechanism up to
something that
>      even _partially_ starts to address HERFP (by, as proposed,
including the
>      non-2xx response that caused the 199), then we need to stop work
on this
>      draft and go work on HERFP. In other words, my vode for the
answer to this
>      open issue is "NO".

Based on the agreement in Dublin I intend to remove it.

>10) Section 8 first open issue: This looks, at best, to be an
optimization of an
>        optimization. Considered in the light of having multiple
proxies on the
>        response path that would have to do extra parsing work because
of this
>        optimization, I don't think we should consider it further.

Ok.


>11) I can't follow the second paragraph of section 9 at all. Can you
rephrase it?
>       Once I know what its trying to say, I'll propose alternate text.

What it is supposed to say is that you cannot send a 199 if you are
required (by the offer/answer rules) to include SDP.


>13) The security considerations section is TBD.
>        There's a lot to talk through here. For instance, I can spoof
199s to affect how a call
>        is ultimately answered in ways that are different (from the
endpoints visibility into
>        what happened point-of-view) from cancels/byes or even other
response manipulation.

I agree we need to deal with the security considerations. I was hoping
we could get rid of some of the open issues first.

Thank you very much for your comments!

Regards,

Christer

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 06:43:25 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A7DE63A6AE4;
	Tue,  5 Aug 2008 06:43:25 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6A32A3A69CE
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 06:43:24 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.575
X-Spam-Level: 
X-Spam-Status: No, score=-6.575 tagged_above=-999 required=5 tests=[AWL=0.024, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ut4EQxjcF7BW for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 06:43:23 -0700 (PDT)
Received: from sj-iport-2.cisco.com (sj-iport-2.cisco.com [171.71.176.71])
	by core3.amsl.com (Postfix) with ESMTP id E947D3A6AE4
	for <sip@ietf.org>; Tue,  5 Aug 2008 06:43:22 -0700 (PDT)
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-2.cisco.com with ESMTP; 05 Aug 2008 13:43:49 +0000
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-3.cisco.com (8.12.11/8.12.11) with ESMTP id m75DhmtU010129; 
	Tue, 5 Aug 2008 06:43:48 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m75Dhmij001379;
	Tue, 5 Aug 2008 13:43:48 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Elwell, John'" <john.elwell@siemens.com>,
	"'Paul Kyzivat'" <pkyzivat@cisco.com>,
	"'Eric Rescorla'" <ekr@networkresonance.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<489336E4.6050204@cisco.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E2@GBNTHT12009MSX.gb002.siemens.net>
Date: Tue, 5 Aug 2008 06:43:47 -0700
Message-ID: <00c901c8f701$49e15030$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <0D5F89FAC29E2C41B98A6A762007F5D0F565E2@GBNTHT12009MSX.gb002.siemens.net>
thread-index: Acjz8dw+4PdCLpLMRTK6JFci5B6msgCZyi/AACniy7A=
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=7075; t=1217943829;
	x=1218807829; c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=M5KKACb2Dc1pXc3k1O8GXI88yWfmemkacQnT/l/A5Vk=;
	b=VXKjn/+iaQoYEzz+1TsVF4CQoJrN3KFTbUdjp0cPC9iFnYEtKm998L2ARZ
	rsWeBynjFb3in8L273tvBvYlBSXxVt0UlhSldVUV5IzfY4BQ/vobOPHgW8VA
	8p7NxrJslR;
Authentication-Results: sj-dkim-3; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim3002 verified; ); 
Cc: 'Cullen Jennings' <fluffy@cisco.com>, 'SIP IETF' <sip@ietf.org>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

John,

I agree the intermediate service providers have no incentive to do more work.
This is especially true if we are expecting them to do lots of validation and
signing.  They will just do P-Asserted-Identity -- like they are doing today
by just extended the trust domain farther than the IETF had intended.

Paul's idea requires the service provider to disclose all of the SPs that
provided transit.  I do not expect a service provider to disclose that
information; the path of the SIP messages through the SIP network is one of
the pieces of information they consider proprietary.  Thing is, we don't need
to know the path, nor what every single entity changed along the path, in
order to provide end-to-end identity (neither of the two proposals on the
table require knowing the path).

-d


 

> -----Original Message-----
> From: Elwell, John [mailto:john.elwell@siemens.com] 
> Sent: Tuesday, August 05, 2008 2:01 AM
> To: Paul Kyzivat; Eric Rescorla
> Cc: Dan Wing; Cullen Jennings; Uzelac, Adam; SIP IETF
> Subject: RE: [Sip] Thoughts on SIP Identity issues
> 
> Paul,
> 
> The problem is, what incentive does the SBC vendor have to go to these
> lengths? I really think we need a solution that doesn't 
> require the SBC
> to do any more than pass information on transparently. RFC 4474 fits
> this criterion, except that it won't work when SBCs do media 
> steering or
> make other "harmless" changes to signed information.
> 
> John
> 
> > -----Original Message-----
> > From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> > Sent: 01 August 2008 17:17
> > To: Eric Rescorla
> > Cc: Dan Wing; 'Cullen Jennings'; 'Uzelac, Adam'; 'SIP IETF'; 
> > Elwell, John
> > Subject: Re: [Sip] Thoughts on SIP Identity issues
> > 
> > What if the SBC did the following:
> > 
> > - made whatever changes it wants to make to the incoming
> >    request to derive the message it wants to send.
> > 
> > - calculated the reverse diff the transforms its modified
> >    message into the message it received.
> > 
> > - affixed the reverse diff to the new message as another
> >    body part.
> > 
> > - signed the whole thing as itself.
> > 
> > - sent it on.
> > 
> > When the UAS receives this, it first validates the signature 
> > and decides 
> > if it trusts the signer.
> > 
> > If so, it may then use the reverse diff to reconstruct the 
> unmodified 
> > message. It can then validate any signature that may contain 
> > to verify 
> > the actual caller. This can of course be applied recursively.
> > 
> > At any stage it can just decide to trust any assertions made by the 
> > intermediary.
> > 
> > 	Paul
> > 
> > Eric Rescorla wrote:
> > > At Fri, 1 Aug 2008 09:36:36 +0100,
> > > Dan Wing wrote:
> > >>> At Thu, 31 Jul 2008 20:54:43 -0400,
> > >>> Hadriel Kaplan wrote:
> > >>>>
> > >>>>
> > >>>>> -----Original Message-----
> > >>>>> From: Eric Rescorla [mailto:ekr@networkresonance.com]
> > >>>>>
> > >>>>> Funny you should mention that.
> > >>>>>
> > >>>>> It's becoming increasingly clear that VBR codecs leak a fair
> > >>>>> amount of information, even when they are encrypted [WBC+08].
> > >>>>> So, if, for instance, you were planning to use a fixed-rate
> > >>>>> codec and an attacker could force you into a VBR codec, that
> > >>>>> might leak information.
> > >>>> Fascinating paper. (truly) But it sounds more like just 
> > a reason to
> > >>>> fix SRTP for VBR, through random padding or whatever.
> > >>> I haven't studied the problem, but I suspect random padding
> > >>> is of limited use because it averages out. Probably better
> > >>> to use a fixed length codec.
> > >>>
> > >>> However, I think focusing on that misses the larger 
> > point: the UAC and
> > >>> UAS have certain desires as expressed in the messages/SDP
> > >>> To the extent to which we allow the intermediaries to change
> > >>> those messages, we need to carefully analyze each instance,
> > >>> and this analysis may actually depend on facts yet to be 
> > >>> discovered.
> > >> 4474 allows intermediaries to change SDP, and re-create a new
> > >> >From and a new signature. 
> > > 
> > > Well, it allows it in the sense that there's no known
> > > cryptographic way to stop it in any system, then sure.
> > > 
> > > 
> > >> This (a) destroys end-to-end identity 
> > >> (which is the subject of this thread) *and* (b) allows 
> > >> intermediaries to perform the very downgrade attack you
> > >> cited ([WBC+08]).
> > >>
> > >> This is why I want to improve upon 4474.
> > > 
> > > I don't agree with this analysis.
> > > 
> > > Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.
> > > It's 4474 signed by atlanta.com. Now, some SBC in the middle
> > > edits the SDP. This breaks the signature. 
> > > 
> > > At this point, when Bob gets the message, he knows:
> > > 
> > > (1) This message claims to be from Alice.
> > > (2) The signature was broken.
> > > 
> > > He therefore has no knowledge of what happen. He can choose to
> > > accept or reject the call, but can't reasonably infer that
> > > the call came from Alice or anything else about Alice's 
> > > intentions.
> > > 
> > > 
> > > Now, if the SBC resigns, then Bob gets a valid message
> > > from somebody else other than Alice. Effectively, the
> > > SBC. Now, the SBC claims that it is connecting Bob to
> > > Alice, but it could be lying. If Bob trusts the SBC,
> > > he can accept the call, but he's trusting the SBC.
> > > Sure, the SBC can edit the SDP to replace codecs, but
> > > it can do *anything*. It could, for instance, replace
> > > the DTLS-SRTP fingerprint. This isn't surprising, since
> > > the SBC is really a B2BUA and this is a call from it.
> > > 
> > > 
> > > The schemes being proposed here allow the RFC 4474 signature
> > > to survive some editing of the message by the SBC. The
> > > question here is the extent to which that enables *silent*
> > > attacks by the SBC. To take an extreme case, if we allowed
> > > editing of the fingerprint, then Bob could think he was
> > > talking to Alice, but he was actually talking to the
> > > SBC. Editing the codecs to allow this kind of traffic
> > > analysis is a (much) less serious version of the same
> > > threat. Again, this differs qualitatively from the former
> > > case because Bob does not know he is under attack.
> > > 
> > > The question, then, when someone proposes exempting some
> > > field from the signature, is what silent attacks it enables.
> > > I have yet to see any satisfactory analysis along these
> > > lines.
> > > 
> > > -Ekr
> > > 
> > > 
> > > 
> > > 
> > > 
> > > 
> > > _______________________________________________
> > > Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> > > This list is for NEW development of the core SIP Protocol
> > > Use sip-implementors@cs.columbia.edu for questions on current sip
> > > Use sipping@ietf.org for new developments on the 
> application of sip
> > > 
> > 

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 06:45:57 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id EE7793A6B3C;
	Tue,  5 Aug 2008 06:45:56 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 59AAC3A6B41
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 06:45:55 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.483
X-Spam-Level: 
X-Spam-Status: No, score=-6.483 tagged_above=-999 required=5 tests=[AWL=0.116, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5fnY6VyU05R2 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 06:45:54 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id C292A3A6B20
	for <sip@ietf.org>; Tue,  5 Aug 2008 06:45:53 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,310,1215388800"; d="scan'208";a="16525471"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 05 Aug 2008 13:46:16 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m75DkGX8003146; 
	Tue, 5 Aug 2008 09:46:16 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m75DkG8O021173;
	Tue, 5 Aug 2008 13:46:16 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 09:46:16 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 09:46:15 -0400
Message-ID: <489859E1.6090609@cisco.com>
Date: Tue, 05 Aug 2008 09:47:13 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: "Elwell, John" <john.elwell@siemens.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<489336E4.6050204@cisco.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E2@GBNTHT12009MSX.gb002.siemens.net>
In-Reply-To: <0D5F89FAC29E2C41B98A6A762007F5D0F565E2@GBNTHT12009MSX.gb002.siemens.net>
X-OriginalArrivalTime: 05 Aug 2008 13:46:15.0512 (UTC)
	FILETIME=[A1694D80:01C8F701]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=6335; t=1217943976;
	x=1218807976; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20
	|To:=20=22Elwell,=20John=22=20<john.elwell@siemens.com>;
	bh=H8dsBdMo/P9AyZrz/iXrnivr2EuWeQEe55dmx/dRd+I=;
	b=hOY7dYg1WReXvrzQQMZPHxjrBPNScYRVjUdaUjHvA4skCyJjlVD8gu7mPm
	jJsxg2do0qwHVkRaoY8CRzCgUYUkYybi0NUqSZiAgimLNIoP+xRhm8rMSkpJ
	5Px7eVGLpV;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: Cullen Jennings <fluffy@cisco.com>, SIP IETF <sip@ietf.org>, "Uzelac,
	Adam" <Adam.Uzelac@globalcrossing.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Elwell, John wrote:
> Paul,
> 
> The problem is, what incentive does the SBC vendor have to go to these
> lengths? I really think we need a solution that doesn't require the SBC
> to do any more than pass information on transparently. RFC 4474 fits
> this criterion, except that it won't work when SBCs do media steering or
> make other "harmless" changes to signed information.

Well, the issue is that it doesn't work in these cases, isn't it? What I 
suggest would solve that issue without fundamentally changing the way 
4474 works. (Without reducing the protection provided by the signature.)

Why would the SBC do it? So that the recipient wants a way to accurately 
verify the origin of the request. If the organization deploying the SBC 
doesn't want to honor the best interests of the sender and receiver then 
I guess it may choose not to do this. I guess this would be most likely 
in cases where a transit SP or the destination SP decides to obfuscate 
the originating address.

	Thanks,
	Paul

> John
> 
>> -----Original Message-----
>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
>> Sent: 01 August 2008 17:17
>> To: Eric Rescorla
>> Cc: Dan Wing; 'Cullen Jennings'; 'Uzelac, Adam'; 'SIP IETF'; 
>> Elwell, John
>> Subject: Re: [Sip] Thoughts on SIP Identity issues
>>
>> What if the SBC did the following:
>>
>> - made whatever changes it wants to make to the incoming
>>    request to derive the message it wants to send.
>>
>> - calculated the reverse diff the transforms its modified
>>    message into the message it received.
>>
>> - affixed the reverse diff to the new message as another
>>    body part.
>>
>> - signed the whole thing as itself.
>>
>> - sent it on.
>>
>> When the UAS receives this, it first validates the signature 
>> and decides 
>> if it trusts the signer.
>>
>> If so, it may then use the reverse diff to reconstruct the unmodified 
>> message. It can then validate any signature that may contain 
>> to verify 
>> the actual caller. This can of course be applied recursively.
>>
>> At any stage it can just decide to trust any assertions made by the 
>> intermediary.
>>
>> 	Paul
>>
>> Eric Rescorla wrote:
>>> At Fri, 1 Aug 2008 09:36:36 +0100,
>>> Dan Wing wrote:
>>>>> At Thu, 31 Jul 2008 20:54:43 -0400,
>>>>> Hadriel Kaplan wrote:
>>>>>>
>>>>>>> -----Original Message-----
>>>>>>> From: Eric Rescorla [mailto:ekr@networkresonance.com]
>>>>>>>
>>>>>>> Funny you should mention that.
>>>>>>>
>>>>>>> It's becoming increasingly clear that VBR codecs leak a fair
>>>>>>> amount of information, even when they are encrypted [WBC+08].
>>>>>>> So, if, for instance, you were planning to use a fixed-rate
>>>>>>> codec and an attacker could force you into a VBR codec, that
>>>>>>> might leak information.
>>>>>> Fascinating paper. (truly) But it sounds more like just 
>> a reason to
>>>>>> fix SRTP for VBR, through random padding or whatever.
>>>>> I haven't studied the problem, but I suspect random padding
>>>>> is of limited use because it averages out. Probably better
>>>>> to use a fixed length codec.
>>>>>
>>>>> However, I think focusing on that misses the larger 
>> point: the UAC and
>>>>> UAS have certain desires as expressed in the messages/SDP
>>>>> To the extent to which we allow the intermediaries to change
>>>>> those messages, we need to carefully analyze each instance,
>>>>> and this analysis may actually depend on facts yet to be 
>>>>> discovered.
>>>> 4474 allows intermediaries to change SDP, and re-create a new
>>>> >From and a new signature. 
>>> Well, it allows it in the sense that there's no known
>>> cryptographic way to stop it in any system, then sure.
>>>
>>>
>>>> This (a) destroys end-to-end identity 
>>>> (which is the subject of this thread) *and* (b) allows 
>>>> intermediaries to perform the very downgrade attack you
>>>> cited ([WBC+08]).
>>>>
>>>> This is why I want to improve upon 4474.
>>> I don't agree with this analysis.
>>>
>>> Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.
>>> It's 4474 signed by atlanta.com. Now, some SBC in the middle
>>> edits the SDP. This breaks the signature. 
>>>
>>> At this point, when Bob gets the message, he knows:
>>>
>>> (1) This message claims to be from Alice.
>>> (2) The signature was broken.
>>>
>>> He therefore has no knowledge of what happen. He can choose to
>>> accept or reject the call, but can't reasonably infer that
>>> the call came from Alice or anything else about Alice's 
>>> intentions.
>>>
>>>
>>> Now, if the SBC resigns, then Bob gets a valid message
>>> from somebody else other than Alice. Effectively, the
>>> SBC. Now, the SBC claims that it is connecting Bob to
>>> Alice, but it could be lying. If Bob trusts the SBC,
>>> he can accept the call, but he's trusting the SBC.
>>> Sure, the SBC can edit the SDP to replace codecs, but
>>> it can do *anything*. It could, for instance, replace
>>> the DTLS-SRTP fingerprint. This isn't surprising, since
>>> the SBC is really a B2BUA and this is a call from it.
>>>
>>>
>>> The schemes being proposed here allow the RFC 4474 signature
>>> to survive some editing of the message by the SBC. The
>>> question here is the extent to which that enables *silent*
>>> attacks by the SBC. To take an extreme case, if we allowed
>>> editing of the fingerprint, then Bob could think he was
>>> talking to Alice, but he was actually talking to the
>>> SBC. Editing the codecs to allow this kind of traffic
>>> analysis is a (much) less serious version of the same
>>> threat. Again, this differs qualitatively from the former
>>> case because Bob does not know he is under attack.
>>>
>>> The question, then, when someone proposes exempting some
>>> field from the signature, is what silent attacks it enables.
>>> I have yet to see any satisfactory analysis along these
>>> lines.
>>>
>>> -Ekr
>>>
>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 07:09:09 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 708753A6B51;
	Tue,  5 Aug 2008 07:09:09 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4AD3A3A6AF2
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 07:09:08 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.488
X-Spam-Level: 
X-Spam-Status: No, score=-6.488 tagged_above=-999 required=5 tests=[AWL=0.111, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id eqxf58orXJRK for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 07:09:07 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 39DCF3A69BF
	for <sip@ietf.org>; Tue,  5 Aug 2008 07:09:07 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,310,1215388800"; d="scan'208";a="16528314"
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 05 Aug 2008 14:09:18 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m75E9IVE015769; 
	Tue, 5 Aug 2008 10:09:18 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m75E9IkX022520;
	Tue, 5 Aug 2008 14:09:18 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 10:09:17 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 10:09:17 -0400
Message-ID: <48985F47.8060409@cisco.com>
Date: Tue, 05 Aug 2008 10:10:15 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com>
	<CA9998CD4A020D418654FCDEF4E707DF0750A6AB@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF0750A6AB@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 05 Aug 2008 14:09:17.0589 (UTC)
	FILETIME=[D9318450:01C8F704]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=882; t=1217945358; x=1218809358;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Comments=20on=20draft-ietf-sip-
	199-00.txt |Sender:=20
	|To:=20Christer=20Holmberg=20<christer.holmberg@ericsson.co m>;
	bh=eL8iuX+Zv4Du5/b4rifPxvMu4ocMNfnnVC1/4HIsnns=;
	b=gedknVxRdyDLr7/6LgaUQkmaQ/Qgs/c50wYHBnjTyxACQXRgTeZ1NxMmrt
	RifvPnFe3+VrzAJs9CZEEP4OavmyHxTpsh5n2QihpCz3XEO691OON3lF7nXb
	XZvjSHoWTv;
Authentication-Results: rtp-dkim-1; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim1001 verified; ); 
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Christer Holmberg wrote:

>> 11) I can't follow the second paragraph of section 9 at all. Can you
> rephrase it?
>>       Once I know what its trying to say, I'll propose alternate text.
> 
> What it is supposed to say is that you cannot send a 199 if you are
> required (by the offer/answer rules) to include SDP.

Thinking about this further...

This means that a proxy must track the o/a state of the dialog usage in 
order to know whether it can send a 199 or not. That could be a 
considerable burden. It requires maintaining partial dialog state rather 
than simply transaction state, and also requires more parsing of 
messages and potentially message bodies. (E.g. with multipart.)

This has me again questioning the cost/benefit tradeoff of the whole 
thing. Of course in this case the cost is to the proxy, and the benefit 
is to the UAC.

	Paul
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 07:15:06 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1E32C3A6A59;
	Tue,  5 Aug 2008 07:15:06 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 626213A6848
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 07:15:05 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.492
X-Spam-Level: 
X-Spam-Status: No, score=-6.492 tagged_above=-999 required=5 tests=[AWL=0.107, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4TMEhnqQBdG1 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 07:15:00 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 6E6323A68A7
	for <sip@ietf.org>; Tue,  5 Aug 2008 07:15:00 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,310,1215388800"; d="scan'208";a="16529148"
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 05 Aug 2008 14:15:03 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m75EF3lR019386; 
	Tue, 5 Aug 2008 10:15:03 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m75EF2A0001280;
	Tue, 5 Aug 2008 14:15:03 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 10:15:03 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 10:15:02 -0400
Message-ID: <489860A0.1030706@cisco.com>
Date: Tue, 05 Aug 2008 10:16:00 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com>
	<CA9998CD4A020D418654FCDEF4E707DF0750A6AB@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF0750A6AB@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 05 Aug 2008 14:15:02.0451 (UTC)
	FILETIME=[A6BF4830:01C8F705]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1187; t=1217945703;
	x=1218809703; c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Should=20early=20dialogs=20be=20dropped=20when=
	202xx=20is=20received??? |Sender:=20
	|To:=20Christer=20Holmberg=20<christer.holmberg@ericsson.co m>;
	bh=sil6d+HFFpyoSCPcuEQzXJsT4bVB1wI0YbMlzxeJXA4=;
	b=okzA9yWSvEJJlmbt87BxlC/4AocrcCA2fFUiDf8eudAQGzxIPPTELLOKKr
	gyxNzwa+dlFCnfuqe7sZHo36ZMPqEa30/TiovHa+c9DiwTC1v6XS1qwqsxUc
	zu3m436jRL;
Authentication-Results: rtp-dkim-1; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim1001 verified; ); 
Cc: SIP IETF <sip@ietf.org>
Subject: [Sip] Should early dialogs be dropped when 2xx is received???
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

The following in the discussion of 199 issues reminded me of a question 
I have had for a long time. I'm changing the subject because it isn't 
directly pertinent to the 199 discussion.

Christer Holmberg wrote:

> What I mean to say is that when the UAC receives a final response for an
> early dialog it normally releases all other early dialogs (the UAC
> should of course still be ready to accept 200 OK responses for other
> dialogs).

This has always been a fuzzy area to me. If the UAC is prepared to 
retain multiple final dialogs if they happen, is it still expected to 
release early dialog state for other dialogs when it receives the first 
2xx? That could mean that subsequent 2xx responses can't be turned into 
viable dialogs because state has been lost. (E.g. if preconditions were 
being negotiated during the early dialog.)

Shouldn't the rule be that *if* the UAC is only intending to retain the 
first final dialog then it should/may abandon all other early dialogs 
when it receives a 2xx, but if it might want to keep additional dialogs 
if additional 2xx responses are received, then it ought not drop the 
early dialogs?

	Thanks,
	Paul

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 07:19:44 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8FB333A68B2;
	Tue,  5 Aug 2008 07:19:44 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 480B33A6878
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 07:19:43 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.495
X-Spam-Level: 
X-Spam-Status: No, score=-6.495 tagged_above=-999 required=5 tests=[AWL=0.104, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id w8LNzj9jS7fR for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 07:19:37 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 70F1C3A68B2
	for <sip@ietf.org>; Tue,  5 Aug 2008 07:19:37 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,310,1215388800"; d="scan'208";a="16530076"
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 05 Aug 2008 14:20:00 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m75EK0JZ023243; 
	Tue, 5 Aug 2008 10:20:00 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m75EJx7b026897;
	Tue, 5 Aug 2008 14:19:59 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 10:19:59 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 10:19:59 -0400
Message-ID: <489861C9.2020507@cisco.com>
Date: Tue, 05 Aug 2008 10:20:57 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com>
	<48862EFF.3000908@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 05 Aug 2008 14:19:59.0499 (UTC)
	FILETIME=[57CD35B0:01C8F706]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1979; t=1217946000;
	x=1218810000; c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Comments=20on=20draft-ietf-sip-
	199-00.txt |Sender:=20
	|To:=20Christer=20Holmberg=20<christer.holmberg@ericsson.co m>;
	bh=FglBkold1nzTFw4xBCiCJa1Z+ZQ6zp2wT/PBb57mlbg=;
	b=jL608whiVKFhAzsmWm+R7nTkIYqQYItVwRt6Uis/RP7q6mEHCLamSBZnwM
	4K2624W8CfQK2eoziQrH3ocs+oP/2Faq0RbUJfMJAcGns+VQeZkGLu/AEHXc
	whf/qAHA9A;
Authentication-Results: rtp-dkim-1; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim1001 verified; ); 
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Christer Holmberg wrote:
> Hi, 
> 
>>> 7) Section 7: "A UAC that receives a 199 response for an early dialog
> MUST NOT
>>> send any further requests on that dialog...". Can you point to any
> list discussion
>>> around this requirement? I think there's some danger to consider
> there. At the
>>> very least we need to make this statement multiple-usage safe.
>> This is a very good catch. This needs to be aligned with dialogusage.
> If the 199 contained the final response that triggered it, then that
> final response could be used to determine the impact 
>> on the dialog or dialog usage or just the transaction. But if the 199
> doesn't contain the final response, then this is a problem.
> 
> I forgot to bring this issue up in Dublin. Sorry for that.
> 
> First, we need to remember that the UAS may terminate every dialogusage
> when sending the final response (depending on what final response is
> sent), without the UAC knowing it. And, due to the forking rules, the
> final response which is sent to the UAC may not even be the same which
> was sent by the UAS, if a final response from another UAS is chosen as
> the "best".
> 
> Second, we need to remember that this only affects early-dialogusages.
> 
> If needed, I guess we could include the final response which triggered
> the 199, but we could also simply say that if the UAC does not know to
> which dialogusage (if there are many) the 199 applies, it should not do
> anything which may affect other usages for the same early dialog.

The establishment of multiple early dialog usages is a pretty strange 
thing. Do we know of any use cases for this? (E.g. an in-dialog REFER on 
an early INVITE. Is that legal?)

Assuming it can arise, then I agree it is reasonable to treat the 199 as 
affecting only its dialog usage unless there is info with it (such as 
the actual final response code) that gives evidence that the whole 
dialog is gone.

	Thanks,
	Paul
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 07:34:24 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8AA743A6ACB;
	Tue,  5 Aug 2008 07:34:24 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 066C33A6ACB
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 07:34:23 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id l5+cn8rgk2E0 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 07:34:22 -0700 (PDT)
Received: from etmail.acmepacket.com (etmail.acmepacket.com [216.41.24.6])
	by core3.amsl.com (Postfix) with ESMTP id DED203A67CC
	for <sip@ietf.org>; Tue,  5 Aug 2008 07:34:21 -0700 (PDT)
Received: from mail.acmepacket.com (216.41.24.7) by etmail.acmepacket.com
	(216.41.24.6) with Microsoft SMTP Server (TLS) id 8.1.291.1;
	Tue, 5 Aug 2008 10:33:18 -0400
Received: from mail.acmepacket.com ([216.41.24.7]) by mail.acmepacket.com
	([216.41.24.7]) with mapi; Tue, 5 Aug 2008 10:33:18 -0400
From: Bob Penfield <BPenfield@acmepacket.com>
To: Paul Kyzivat <pkyzivat@cisco.com>, Christer Holmberg
	<christer.holmberg@ericsson.com>
Date: Tue, 5 Aug 2008 10:34:17 -0400
Thread-Topic: [Sip] Should early dialogs be dropped when 2xx is received???
Thread-Index: Acj3Ba+wtUWqHcxbQlS9a4ahwvdsBwAAXXIA
Message-ID: <E6C2E8958BA59A4FB960963D475F7AC30F0534BE1E@mail.acmepacket.com>
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com>
	<CA9998CD4A020D418654FCDEF4E707DF0750A6AB@esealmw113.eemea.ericsson.se>
	<489860A0.1030706@cisco.com>
In-Reply-To: <489860A0.1030706@cisco.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
MIME-Version: 1.0
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Should early dialogs be dropped when 2xx is received???
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I would say no, since 3261 has a specific guidance for this case:

   The UAC core considers the INVITE transaction completed 64*T1 seconds
   after the reception of the first 2xx response.  At this point all the
   early dialogs that have not transitioned to established dialogs are
   terminated.  Once the INVITE transaction is considered completed by
   the UAC core, no more new 2xx responses are expected to arrive.

Thus the other early dialogs will linger for 64*T1 seconds.

If the UAC does destroy all the other early dialogs, then it would need to be able to handle any additional 2xx responses for unknown dialogs, presumably by sending an ACK immediately followed by a BYE. This is really the same case as an additional 2xx response arriving for a brand new dialog (i.e. the UAC never received a 1xx).

cheers,
(-:bob

-----Original Message-----
From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of Paul Kyzivat
Sent: Tuesday, August 05, 2008 10:16 AM
To: Christer Holmberg
Cc: SIP IETF
Subject: [Sip] Should early dialogs be dropped when 2xx is received???

The following in the discussion of 199 issues reminded me of a question
I have had for a long time. I'm changing the subject because it isn't
directly pertinent to the 199 discussion.

Christer Holmberg wrote:

> What I mean to say is that when the UAC receives a final response for an
> early dialog it normally releases all other early dialogs (the UAC
> should of course still be ready to accept 200 OK responses for other
> dialogs).

This has always been a fuzzy area to me. If the UAC is prepared to
retain multiple final dialogs if they happen, is it still expected to
release early dialog state for other dialogs when it receives the first
2xx? That could mean that subsequent 2xx responses can't be turned into
viable dialogs because state has been lost. (E.g. if preconditions were
being negotiated during the early dialog.)

Shouldn't the rule be that *if* the UAC is only intending to retain the
first final dialog then it should/may abandon all other early dialogs
when it receives a 2xx, but if it might want to keep additional dialogs
if additional 2xx responses are received, then it ought not drop the
early dialogs?

        Thanks,
        Paul

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 07:45:00 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9B33F3A6C9F;
	Tue,  5 Aug 2008 07:45:00 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B4C423A6A40
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 07:44:59 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.454
X-Spam-Level: 
X-Spam-Status: No, score=-2.454 tagged_above=-999 required=5 tests=[AWL=0.145, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JhlTI6JXmHii for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 07:44:58 -0700 (PDT)
Received: from ihemail4.lucent.com (ihemail4.lucent.com [135.245.0.39])
	by core3.amsl.com (Postfix) with ESMTP id 2E19928C149
	for <sip@ietf.org>; Tue,  5 Aug 2008 07:44:54 -0700 (PDT)
Received: from ilexp03.ndc.lucent.com (h135-3-39-50.lucent.com [135.3.39.50])
	by ihemail4.lucent.com (8.13.8/IER-o) with ESMTP id m75EjEQB026977; 
	Tue, 5 Aug 2008 09:45:21 -0500 (CDT)
Received: from DEEXP02.DE.lucent.com ([135.248.187.66]) by
	ilexp03.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 09:45:20 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP02.DE.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 16:45:17 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 16:45:16 +0200
Message-ID: <5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
Thread-Index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwATutWgAAMre/cAJa/toA==
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
From: "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	"Francois Audet" <audet@nortel.com>, <sip@ietf.org>
X-OriginalArrivalTime: 05 Aug 2008 14:45:17.0899 (UTC)
	FILETIME=[E0D6A9B0:01C8F709]
X-Scanned-By: MIMEDefang 2.57 on 135.245.2.39
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

(As WG cochair)

The agreement in the SIPPING group where this was discussed was that we wer=
e not going to solve the HERPF problem. I think you will find a number of m=
ails in the SIPPING archive confirming this.

It would be useful to identify and correct any text that you believe implie=
s that the HERPF problem is to be solved.

Outside the HERPF problem I have no objection to clarifying the requirement=
s and use cases. Please note that supposedly the SIPPING WG has already reg=
arded these as complete. I would like to see clarification rather than feat=
ure creep.

Regards

Keith

> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On =

> Behalf Of Christer Holmberg
> Sent: Monday, August 04, 2008 9:29 PM
> To: Francois Audet; sip@ietf.org
> Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
> =

> =

> Hi Francois,
> =

> As was agreed during the "requirements phase", we are not =

> going to solve the HERPF problem as part of this task. Nobody =

> objected to that. =

> =

> It was agreed that the scope is to only be able to indicate =

> that the early dialog has been terminated.
> =

> I have tried to explain different kind of "resources" for =

> which the mechanism could be useful. =

> =

> If you want to start a separate work item in order to solve =

> (with or without using 199) other problems you are free to =

> propose such work :) =

> =

> Regards,
> =

> Christer
> =

> =

> =

> -----Alkuper=E4inen viesti-----
> L=E4hett=E4j=E4: Francois Audet [mailto:audet@nortel.com]
> L=E4hetetty: ma 4.8.2008 22:17
> Vastaanottaja: sip@ietf.org
> Kopio: Christer Holmberg
> Aihe: Inadequate Requirements for draft-ietf-sip-199-00
>  =

> I believe that the Requirents section for this draft is =

> completely inadequate.
>  =

> The only material in section 3 is the following:
> =

> 	REQ 1: It must be possible to indicate to the UAC that =

> an early dialog has been =

> 	terminated before a final response is sent.
> =

> This is almost as good as "REQ: It must be possible to do =

> whatever this draft says".
> =

> This draft must really explain what it is trying to achieve. =

> The Introduction has a bunch of text that describes what =

> looks and smells exactly like the HERFP problem.
> =

> In Dublin, it was stated that this draft does not attempt to =

> solve the HERFP problem. If that is the case, then I am =

> completely baffled by what exactly is it trying to solve. =

> Yes, there is a little bit of wording about the need to =

> "release resources" (whatever that means), but I find it a =

> little bit hard to swallow that we need new protocol for that.
> =

> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use =

> sip-implementors@cs.columbia.edu for questions on current sip =

> Use sipping@ietf.org for new developments on the application of sip
> =

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 07:49:48 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AD46128C14D;
	Tue,  5 Aug 2008 07:49:48 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0AE623A6A40
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 07:49:47 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.554
X-Spam-Level: 
X-Spam-Status: No, score=-1.554 tagged_above=-999 required=5 tests=[AWL=1.045, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id S8UPUN4E55dY for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 07:49:46 -0700 (PDT)
Received: from romeo.rtfm.com (romeo.rtfm.com [74.95.2.173])
	by core3.amsl.com (Postfix) with ESMTP id EF54F3A68E8
	for <sip@ietf.org>; Tue,  5 Aug 2008 07:49:45 -0700 (PDT)
Received: from romeo.rtfm.com (localhost.rtfm.com [127.0.0.1])
	by romeo.rtfm.com (Postfix) with ESMTP id 5B61650846;
	Tue,  5 Aug 2008 07:59:45 -0700 (PDT)
Date: Tue, 05 Aug 2008 07:59:45 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: "Elwell, John" <john.elwell@siemens.com>
In-Reply-To: <0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.3 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080805145945.5B61650846@romeo.rtfm.com>
Cc: Cullen Jennings <fluffy@cisco.com>, "Uzelac,
	Adam" <Adam.Uzelac@globalcrossing.com>, SIP IETF <sip@ietf.org>,
	Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

At Tue, 05 Aug 2008 10:01:16 +0100,
Elwell, John wrote:
> 
> Eric, 
> 
> > -----Original Message-----
> > From: Eric Rescorla [mailto:ekr@networkresonance.com] 
> > Sent: 01 August 2008 14:46
> > To: Dan Wing
> > Cc: 'Eric Rescorla'; 'Hadriel Kaplan'; 'Jonathan Rosenberg'; 
> > Elwell, John; 'Cullen Jennings'; 'SIP IETF'; 'Uzelac, Adam'
> > Subject: Re: [Sip] Thoughts on SIP Identity issues
> > 
> > At Fri, 1 Aug 2008 09:36:36 +0100,
> > Dan Wing wrote:
> > > 
> > > > At Thu, 31 Jul 2008 20:54:43 -0400,
> > > > Hadriel Kaplan wrote:
> > > > > 
> > > > > 
> > > > > 
> > > > > > -----Original Message-----
> > > > > > From: Eric Rescorla [mailto:ekr@networkresonance.com]
> > > > > >
> > > > > > Funny you should mention that.
> > > > > >
> > > > > > It's becoming increasingly clear that VBR codecs leak a fair
> > > > > > amount of information, even when they are encrypted [WBC+08].
> > > > > > So, if, for instance, you were planning to use a fixed-rate
> > > > > > codec and an attacker could force you into a VBR codec, that
> > > > > > might leak information.
> > > > > 
> > > > > Fascinating paper. (truly) But it sounds more like just 
> > a reason to
> > > > > fix SRTP for VBR, through random padding or whatever.
> > > > 
> > > > I haven't studied the problem, but I suspect random padding
> > > > is of limited use because it averages out. Probably better
> > > > to use a fixed length codec.
> > > > 
> > > > However, I think focusing on that misses the larger 
> > point: the UAC and
> > > > UAS have certain desires as expressed in the messages/SDP
> > > > To the extent to which we allow the intermediaries to change
> > > > those messages, we need to carefully analyze each instance,
> > > > and this analysis may actually depend on facts yet to be 
> > > > discovered.
> > > 
> > > 4474 allows intermediaries to change SDP, and re-create a new
> > > >From and a new signature. 
> > 
> > Well, it allows it in the sense that there's no known
> > cryptographic way to stop it in any system, then sure.
> > 
> > 
> > > This (a) destroys end-to-end identity 
> > > (which is the subject of this thread) *and* (b) allows 
> > > intermediaries to perform the very downgrade attack you
> > > cited ([WBC+08]).
> > > 
> > > This is why I want to improve upon 4474.
> > 
> > I don't agree with this analysis.
> > 
> > Let's say that alice@atlanta.com sends bob@biloxi.com an INVITE.
> > It's 4474 signed by atlanta.com. Now, some SBC in the middle
> > edits the SDP. This breaks the signature. 
> > 
> > At this point, when Bob gets the message, he knows:
> > 
> > (1) This message claims to be from Alice.
> > (2) The signature was broken.
> > 
> > He therefore has no knowledge of what happen. He can choose to
> > accept or reject the call, but can't reasonably infer that
> > the call came from Alice or anything else about Alice's 
> > intentions.
> > 
> > 
> > Now, if the SBC resigns, then Bob gets a valid message
> > from somebody else other than Alice. Effectively, the
> > SBC. Now, the SBC claims that it is connecting Bob to
> > Alice, but it could be lying. If Bob trusts the SBC,
> > he can accept the call, but he's trusting the SBC.
> > Sure, the SBC can edit the SDP to replace codecs, but
> > it can do *anything*. It could, for instance, replace
> > the DTLS-SRTP fingerprint. This isn't surprising, since
> > the SBC is really a B2BUA and this is a call from it.
> [JRE] I agree so far, but what I really would like to see is some
> mechanism by which atlanta.com can sign the request from Alice and that
> signature stands a fairly good chance of surviving harmless SBCs in
> intermediate domains. We can't do anything about an intermediate domain
> that insists on re-signing for the sake of it, or performs some action
> that involves decryption of the media (e.g., transcoding, mixing). At
> least in such cases Bob will see that the call is secured only as far as
> the intermediate domain. But in cases where the intermediate domain is
> performing less invasive actions such simple media steering, it should
> have some way of doing so without breaking atlanta.com's signature. Then
> Bob will not be misled into thinking the call is insecure (i.e., secured
> only as far as the intermediate domain) when really it is secured all
> the way to Alice's domain and he can indeed talk without fear of an
> intermediary eavesdropping or injecting information.

Sure, but again, that requires examining every single piece of the message
which you wish to exampt from the signature and determine whether
there is some important attack that can be mounted by modifying
that section. As I noted above, those questions are not necessarily
immediately apparent.

-Ekr
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 07:53:03 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 71C2928C24C;
	Tue,  5 Aug 2008 07:53:03 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9351628C24C
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 07:53:02 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.584
X-Spam-Level: 
X-Spam-Status: No, score=-1.584 tagged_above=-999 required=5 tests=[AWL=1.015, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id D7-HGFmqkNIP for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 07:53:01 -0700 (PDT)
Received: from romeo.rtfm.com (romeo.rtfm.com [74.95.2.173])
	by core3.amsl.com (Postfix) with ESMTP id CC78F28C223
	for <sip@ietf.org>; Tue,  5 Aug 2008 07:53:01 -0700 (PDT)
Received: from romeo.rtfm.com (localhost.rtfm.com [127.0.0.1])
	by romeo.rtfm.com (Postfix) with ESMTP id 6D6C350846;
	Tue,  5 Aug 2008 08:03:01 -0700 (PDT)
Date: Tue, 05 Aug 2008 08:03:01 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: Paul Kyzivat <pkyzivat@cisco.com>
In-Reply-To: <489336E4.6050204@cisco.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<489336E4.6050204@cisco.com>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.3 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080805150301.6D6C350846@romeo.rtfm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell,
	John'" <john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

At Fri, 01 Aug 2008 12:16:36 -0400,
Paul Kyzivat wrote:
> 
> What if the SBC did the following:
> 
> - made whatever changes it wants to make to the incoming
>    request to derive the message it wants to send.
> 
> - calculated the reverse diff the transforms its modified
>    message into the message it received.
> 
> - affixed the reverse diff to the new message as another
>    body part.
> 
> - signed the whole thing as itself.
> 
> - sent it on.
> 
> When the UAS receives this, it first validates the signature and decides 
> if it trusts the signer.
> 
> If so, it may then use the reverse diff to reconstruct the unmodified 
> message. It can then validate any signature that may contain to verify 
> the actual caller. This can of course be applied recursively.
> 
> At any stage it can just decide to trust any assertions made by the 
> intermediary.

The problem I see with this approach is that it then requires the
UAS to make fairly sophisticated decisions about what changes are
OK and what are not. If we can't make those judgements here in
the SIP WG, I don't see how implementors can be expected to.

-Ekr
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 07:55:44 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D1F8C28C180;
	Tue,  5 Aug 2008 07:55:44 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D8F903A68F8
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 07:55:43 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.577
X-Spam-Level: 
X-Spam-Status: No, score=-6.577 tagged_above=-999 required=5 tests=[AWL=0.022, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id r8Lr-SUOKsG2 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 07:55:43 -0700 (PDT)
Received: from sj-iport-1.cisco.com (sj-iport-1.cisco.com [171.71.176.70])
	by core3.amsl.com (Postfix) with ESMTP id A950028C281
	for <sip@ietf.org>; Tue,  5 Aug 2008 07:55:42 -0700 (PDT)
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-1.cisco.com with ESMTP; 05 Aug 2008 14:56:13 +0000
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m75EuDWF015944; 
	Tue, 5 Aug 2008 07:56:13 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m75EuCwZ004020;
	Tue, 5 Aug 2008 14:56:12 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Eric Rescorla'" <ekr@networkresonance.com>,
	"'Elwell, John'" <john.elwell@siemens.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net><02829328-7B0E-41AB-B325-01246363D09C@cisco.com><4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com><0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net><48919248.7060600@cisco.com><0ae201c8f310$d183a0f0$3675150a@cisco.com><E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com><20080731205152.03E7E514892@kilo.rtfm.com><E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com><20080801010212.654B5515743@kilo.rtfm.com><0a2101c8f3b1$b75dd500$6a94150a@cisco.com><20080801134611.1B8C9516C54@kilo.rtfm.com><0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
	<20080805145945.5B61650846@romeo.rtfm.com>
Date: Tue, 5 Aug 2008 07:56:12 -0700
Message-ID: <02b801c8f70b$675fed60$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <20080805145945.5B61650846@romeo.rtfm.com>
thread-index: Acj3CqnEDe6Ho8ICQC6wcC4x4trtIgAAC+ag
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=842; t=1217948173; x=1218812173;
	c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=omRycWAx/RXJh3Dc30o7tooJSNqNoJkDCS/0c1zBoxE=;
	b=A/6qYMfHhrzHMn1sivzsxuzc5u2F+gQNMj39RZsXWT6car8lp7CTU9Go7X
	IAE3Wp8UzeMHMY5g50nSZB6d2iu3pY2XkNy2Ggo4q7/s6KXD/aJFlem/ZCRV
	gAlwqgrCj2J7oOhJJ6kzmrH5tY8CUUKQD0bb4Mk3aE2qdOs5wxHwI=;
Authentication-Results: sj-dkim-1; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
Cc: 'Cullen Jennings' <fluffy@cisco.com>, 'SIP IETF' <sip@ietf.org>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

...
> Sure, but again, that requires examining every single piece 
> of the message
> which you wish to exampt from the signature and determine whether
> there is some important attack that can be mounted by modifying
> that section. As I noted above, those questions are not necessarily
> immediately apparent.

Implicit in that argument is that 4474 got it right.

We know it already isn't done correctly with RFC4474 for unidirectional media
(draft-kaplan-sip-baiting-attack).  To get bi-directional media, an attacker
would need to share a NAT or a TURN server with the identity they want to
spoof (e.g., a bank, a pizza restaurant, a political organization), and the
attacker would need to obtain the same UDP port from the NAT or TURN server
within RFC4474's replay window (which is recommended to be 10 minutes).

-d

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 08:02:21 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4D9A03A6C2F;
	Tue,  5 Aug 2008 08:02:21 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 705433A6C2F
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 08:02:20 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.46
X-Spam-Level: 
X-Spam-Status: No, score=-2.46 tagged_above=-999 required=5 tests=[AWL=0.139, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id eI2NC8JnXxcK for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 08:02:19 -0700 (PDT)
Received: from ihemail3.lucent.com (ihemail3.lucent.com [135.245.0.37])
	by core3.amsl.com (Postfix) with ESMTP id A71B53A6B86
	for <sip@ietf.org>; Tue,  5 Aug 2008 08:02:19 -0700 (PDT)
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail3.lucent.com (8.13.8/IER-o) with ESMTP id m75F2j7F028310
	for <sip@ietf.org>; Tue, 5 Aug 2008 10:02:50 -0500 (CDT)
Received: from DEEXP02.DE.lucent.com ([135.248.187.66]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 10:02:35 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP02.DE.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 17:02:33 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 17:02:32 +0200
Message-ID: <5D1A7985295922448D5550C94DE29180021D0F28@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Anti SPAM verification messages
Thread-Index: Acj3DEmDYqkX7k2QR/GciVQ89f3jzw==
From: "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 05 Aug 2008 15:02:33.0521 (UTC)
	FILETIME=[4A1E0A10:01C8F70C]
X-Scanned-By: MIMEDefang 2.57 on 135.245.2.37
Subject: [Sip] Anti SPAM verification messages
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

(As WG cochair)

I notice some people have their email set up to respond with Anti SPAM
verification messages to unrecognised senders.

If you subscribe to the SIP list (or any other IETF list), it is your
responsibility to make sure you are able to receive messages from that
list without generating automatic responses to senders. While only the
original sender sees these, as I suspect postconfirm eliminates them
from the list posting itself, it is still annoying.

Consequently if this occurs repeatedly, we will set your subscription to
"nomail". I believe you can go back and change this yourself, but please
do so only after you have fixed the problem your end.

Now if you hadn't got this setup in the first place, we could mail you
and tell you about the problem, but I don't want anymore of your
verification requests.

Regards

Keith

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 08:03:37 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5B1DE28C2B4;
	Tue,  5 Aug 2008 08:03:37 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6627128C2B4
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 08:03:36 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.603
X-Spam-Level: 
X-Spam-Status: No, score=-1.603 tagged_above=-999 required=5 tests=[AWL=0.996, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SCaS6CxVVL0P for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 08:03:35 -0700 (PDT)
Received: from romeo.rtfm.com (romeo.rtfm.com [74.95.2.173])
	by core3.amsl.com (Postfix) with ESMTP id A0F6D28C124
	for <sip@ietf.org>; Tue,  5 Aug 2008 08:03:35 -0700 (PDT)
Received: from romeo.rtfm.com (localhost.rtfm.com [127.0.0.1])
	by romeo.rtfm.com (Postfix) with ESMTP id DDB5350846;
	Tue,  5 Aug 2008 08:13:33 -0700 (PDT)
Date: Tue, 05 Aug 2008 08:13:33 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: "Dan Wing" <dwing@cisco.com>
In-Reply-To: <02b801c8f70b$675fed60$c2f0200a@cisco.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
	<20080805145945.5B61650846@romeo.rtfm.com>
	<02b801c8f70b$675fed60$c2f0200a@cisco.com>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.3 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080805151333.DDB5350846@romeo.rtfm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

At Tue, 5 Aug 2008 07:56:12 -0700,
Dan Wing wrote:
> 
> ...
> > Sure, but again, that requires examining every single piece 
> > of the message
> > which you wish to exampt from the signature and determine whether
> > there is some important attack that can be mounted by modifying
> > that section. As I noted above, those questions are not necessarily
> > immediately apparent.
> 
> Implicit in that argument is that 4474 got it right.

No, I don't think that's true. 4474 did the conservative thing: it
signed everything.


> We know it already isn't done correctly with RFC4474 for unidirectional media
> (draft-kaplan-sip-baiting-attack).  To get bi-directional media, an attacker
> would need to share a NAT or a TURN server with the identity they want to
> spoof (e.g., a bank, a pizza restaurant, a political organization), and the
> attacker would need to obtain the same UDP port from the NAT or TURN server
> within RFC4474's replay window (which is recommended to be 10 minutes).

I haven't spent a long time examining draft-kaplan-sip-baiting, but as
I recall, it's not the fault of 4474 failing to sign something that
it should have but rather that it's inherent in the message-oriented 
nature of SIP.

With that said, ISTM that this cuts against your argument that we should
be signing less of the message, since the failure of RFC 4474 (to the
extent there is one) in this case is that it doesn't protect
*enough* information.

-Ekr



_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 08:41:27 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 649C328C146;
	Tue,  5 Aug 2008 08:41:27 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id EA6B13A6856
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 08:41:25 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8aqi+MOHzjiq for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 08:41:25 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id D10E13A67DF
	for <sip@ietf.org>; Tue,  5 Aug 2008 08:41:24 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,310,1215388800"; d="scan'208";a="16539846"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 05 Aug 2008 15:41:48 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m75FfmV6002366; 
	Tue, 5 Aug 2008 11:41:48 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m75Ffmub000897;
	Tue, 5 Aug 2008 15:41:48 GMT
Received: from xmb-rtp-201.amer.cisco.com ([64.102.31.13]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 11:41:48 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 11:41:47 -0400
Message-ID: <C7FFFFDD779F2047A0FBAC811C5C5A00067CA3AE@xmb-rtp-201.amer.cisco.com>
In-Reply-To: <E6C2E8958BA59A4FB960963D475F7AC30F0534BE1E@mail.acmepacket.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Should early dialogs be dropped when 2xx is received???
Thread-Index: Acj3Ba+wtUWqHcxbQlS9a4ahwvdsBwAAXXIAAAKHwYA=
From: "Sanjay Sinha (sanjsinh)" <sanjsinh@cisco.com>
To: "Bob Penfield" <BPenfield@acmepacket.com>,
	"Paul Kyzivat (pkyzivat)" <pkyzivat@cisco.com>,
	"Christer Holmberg" <christer.holmberg@ericsson.com>
X-OriginalArrivalTime: 05 Aug 2008 15:41:48.0503 (UTC)
	FILETIME=[C5CBC670:01C8F711]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=3323; t=1217950908;
	x=1218814908; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=sanjsinh@cisco.com;
	z=From:=20=22Sanjay=20Sinha=20(sanjsinh)=22=20<sanjsinh@cisc
	o.com>
	|Subject:=20RE=3A=20[Sip]=20Should=20early=20dialogs=20be=2
	0dropped=20when=202xx=20is=20received??? |Sender:=20
	|To:=20=22Bob=20Penfield=22=20<BPenfield@acmepacket.com>,=0
	A=20=20=20=20=20=20=20=20=22Paul=20Kyzivat=20(pkyzivat)=22=2
	0<pkyzivat@cisco.com>,=0A=20=20=20=20=20=20=20=20=22Christer
	=20Holmberg=22=20<christer.holmberg@ericsson.com>;
	bh=TjEGtggu2iutDrS//VDD+VGs8+1uhbg2sMm4mxT1faQ=;
	b=cGdyVlbmOMPL6CJeTMNBfi6s6mMw3qf61CBwUb01QOAU5z17RQmyBRkkcy
	6a+U9zj/KsOJ9TnMH3SHBMfgw+PRn1sRYySDrSnuNN8U0ARS+uVJDbc7v2UT
	5IRB53omuQ;
Authentication-Results: rtp-dkim-2; header.From=sanjsinh@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Should early dialogs be dropped when 2xx is received???
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

>
>   The UAC core considers the INVITE transaction completed 
>64*T1 seconds
>   after the reception of the first 2xx response.  At this 
>point all the
>   early dialogs that have not transitioned to established dialogs are
>   terminated.  Once the INVITE transaction is considered completed by
>   the UAC core, no more new 2xx responses are expected to arrive.
>
>Thus the other early dialogs will linger for 64*T1 seconds.

Right, this is true if the UAC wants to have multiple final dialogs.

If it does not, then I do not think the UAC has to wait for 64*T1
seconds. It can terminate early dialogs by sending a BYE with
appropriate to-tag corresponding to the early dialog leg, that it wants
to terminate.

Sanjay

>
>If the UAC does destroy all the other early dialogs, then it 
>would need to be able to handle any additional 2xx responses 
>for unknown dialogs, presumably by sending an ACK immediately 
>followed by a BYE. This is really the same case as an 
>additional 2xx response arriving for a brand new dialog (i.e. 
>the UAC never received a 1xx).
>
>cheers,
>(-:bob
>
>-----Original Message-----
>From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
>Behalf Of Paul Kyzivat
>Sent: Tuesday, August 05, 2008 10:16 AM
>To: Christer Holmberg
>Cc: SIP IETF
>Subject: [Sip] Should early dialogs be dropped when 2xx is received???
>
>The following in the discussion of 199 issues reminded me of a 
>question I have had for a long time. I'm changing the subject 
>because it isn't directly pertinent to the 199 discussion.
>
>Christer Holmberg wrote:
>
>> What I mean to say is that when the UAC receives a final 
>response for 
>> an early dialog it normally releases all other early dialogs 
>(the UAC 
>> should of course still be ready to accept 200 OK responses for other 
>> dialogs).
>
>This has always been a fuzzy area to me. If the UAC is 
>prepared to retain multiple final dialogs if they happen, is 
>it still expected to release early dialog state for other 
>dialogs when it receives the first 2xx? That could mean that 
>subsequent 2xx responses can't be turned into viable dialogs 
>because state has been lost. (E.g. if preconditions were being 
>negotiated during the early dialog.)
>
>Shouldn't the rule be that *if* the UAC is only intending to 
>retain the first final dialog then it should/may abandon all 
>other early dialogs when it receives a 2xx, but if it might 
>want to keep additional dialogs if additional 2xx responses 
>are received, then it ought not drop the early dialogs?
>
>        Thanks,
>        Paul
>
>_______________________________________________
>Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>This list is for NEW development of the core SIP Protocol Use 
>sip-implementors@cs.columbia.edu for questions on current sip 
>Use sipping@ietf.org for new developments on the application 
>of sip _______________________________________________
>Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>This list is for NEW development of the core SIP Protocol Use 
>sip-implementors@cs.columbia.edu for questions on current sip 
>Use sipping@ietf.org for new developments on the application of sip
>
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 08:53:54 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BA2A13A69A2;
	Tue,  5 Aug 2008 08:53:53 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 93B733A69A2
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 08:53:49 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.579
X-Spam-Level: 
X-Spam-Status: No, score=-6.579 tagged_above=-999 required=5 tests=[AWL=0.020, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id xVtNxLV2u2IN for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 08:53:48 -0700 (PDT)
Received: from sj-iport-2.cisco.com (sj-iport-2.cisco.com [171.71.176.71])
	by core3.amsl.com (Postfix) with ESMTP id 00CB13A6848
	for <sip@ietf.org>; Tue,  5 Aug 2008 08:53:47 -0700 (PDT)
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-2.cisco.com with ESMTP; 05 Aug 2008 15:54:19 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m75FsJZS026996; 
	Tue, 5 Aug 2008 08:54:19 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m75FsHbm008013;
	Tue, 5 Aug 2008 15:54:17 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Eric Rescorla'" <ekr@networkresonance.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net><02829328-7B0E-41AB-B325-01246363D09C@cisco.com><4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com><0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net><48919248.7060600@cisco.com><0ae201c8f310$d183a0f0$3675150a@cisco.com><E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com><20080731205152.03E7E514892@kilo.rtfm.com><E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com><20080801010212.654B5515743@kilo.rtfm.com><0a2101c8f3b1$b75dd500$6a94150a@cisco.com><20080801134611.1B8C9516C54@kilo.rtfm.com><0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net><20080805145945.5B61650846@romeo.rtfm.com><02b801c8f70b$675fed60$c2f0200a@cisco.com>
	<20080805151333.DDB5350846@romeo.rtfm.com>
Date: Tue, 5 Aug 2008 08:54:16 -0700
Message-ID: <038e01c8f713$84e3cca0$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <20080805151333.DDB5350846@romeo.rtfm.com>
thread-index: Acj3DIyQ/TMmSBifTeuZL1zyzFoVyAABb8IA
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2301; t=1217951659;
	x=1218815659; c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=LjPApKlStKrvcXWJNKkSLh/m0jKoYxG9oOKNSV4+xzw=;
	b=MpMuPz+NHEAn/fAcTLA0vE+bHWyqJg6dxyIYSJJcJRV3JEUODOp9v90PoL
	ZTAMtEOshe44oD6FPlJFnotULuvzFrh1dPFPSOyPutCD0CIBTpkIsfqFOLEl
	oAcmug0JIvTbgFMpahNtQ4UgfZtP/qQmT1Gy5YaUiUV/oG9ERrd2o=;
Authentication-Results: sj-dkim-1; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 

> -----Original Message-----
> From: Eric Rescorla [mailto:ekr@networkresonance.com] 
> Sent: Tuesday, August 05, 2008 8:14 AM
> To: Dan Wing
> Cc: 'Eric Rescorla'; 'Elwell, John'; 'Hadriel Kaplan'; 
> 'Jonathan Rosenberg'; 'Cullen Jennings'; 'SIP IETF'; 'Uzelac, Adam'
> Subject: Re: [Sip] Thoughts on SIP Identity issues
> 
> At Tue, 5 Aug 2008 07:56:12 -0700,
> Dan Wing wrote:
> > 
> > ...
> > > Sure, but again, that requires examining every single piece 
> > > of the message
> > > which you wish to exampt from the signature and determine whether
> > > there is some important attack that can be mounted by modifying
> > > that section. As I noted above, those questions are not 
> necessarily
> > > immediately apparent.
> > 
> > Implicit in that argument is that 4474 got it right.
> 
> No, I don't think that's true. 4474 did the conservative thing: it
> signed everything.
> 
> 
> > We know it already isn't done correctly with RFC4474 for 
> > unidirectional media
> > (draft-kaplan-sip-baiting-attack).  To get bi-directional 
> > media, an attacker
> > would need to share a NAT or a TURN server with the 
> > identity they want to
> > spoof (e.g., a bank, a pizza restaurant, a political 
> > organization), and the
> > attacker would need to obtain the same UDP port from the 
> > NAT or TURN server
> > within RFC4474's replay window (which is recommended to be 
> > 10 minutes).
> 
> I haven't spent a long time examining draft-kaplan-sip-baiting, but as
> I recall, it's not the fault of 4474 failing to sign something that
> it should have but rather that it's inherent in the message-oriented 
> nature of SIP.

That distinction is not relevant to the victim.

> With that said, ISTM that this cuts against your argument 
> that we should
> be signing less of the message, since the failure of RFC 4474 (to the
> extent there is one) in this case is that it doesn't protect
> *enough* information.

Neither draft-fischer-sip-e2e-sec-media and draft-wing-sip-identity-media 
simply "sign less" -- please do not mis-characterize the proposals.  Both 
proposals require a public key exchange with the remote party -- which 
is far stronger than just using the IP address of the remote party 
as is done by RFC4474.

-d

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 09:01:19 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 286ED3A6CC1;
	Tue,  5 Aug 2008 09:01:19 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 279043A6D1D
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 09:01:16 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.654
X-Spam-Level: 
X-Spam-Status: No, score=-1.654 tagged_above=-999 required=5 tests=[AWL=0.945, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lLknABqQSTiA for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 09:01:13 -0700 (PDT)
Received: from romeo.rtfm.com (romeo.rtfm.com [74.95.2.173])
	by core3.amsl.com (Postfix) with ESMTP id 384463A6D30
	for <sip@ietf.org>; Tue,  5 Aug 2008 09:01:10 -0700 (PDT)
Received: from romeo.rtfm.com (localhost.rtfm.com [127.0.0.1])
	by romeo.rtfm.com (Postfix) with ESMTP id ABB8F50846;
	Tue,  5 Aug 2008 09:11:09 -0700 (PDT)
From: Eric Rescorla <ekr@networkresonance.com>
Date: Tue, 05 Aug 2008 09:11:09 -0700
>From: Eric Rescorla <ekr@networkresonance.com>
To: "Dan Wing" <dwing@cisco.com>
In-Reply-To: <038e01c8f713$84e3cca0$c2f0200a@cisco.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
	<20080805145945.5B61650846@romeo.rtfm.com>
	<02b801c8f70b$675fed60$c2f0200a@cisco.com>
	<20080805151333.DDB5350846@romeo.rtfm.com>
	<038e01c8f713$84e3cca0$c2f0200a@cisco.com>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.3 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080805161109.ABB8F50846@romeo.rtfm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

At Tue, 5 Aug 2008 08:54:16 -0700,
Dan Wing wrote:
> > I haven't spent a long time examining draft-kaplan-sip-baiting, but as
> > I recall, it's not the fault of 4474 failing to sign something that
> > it should have but rather that it's inherent in the message-oriented 
> > nature of SIP.
> 
> That distinction is not relevant to the victim.

No, the distinction is relevant to the people responsible for technically
addressing the issue, namely us.



> > With that said, ISTM that this cuts against your argument 
> > that we should
> > be signing less of the message, since the failure of RFC 4474 (to the
> > extent there is one) in this case is that it doesn't protect
> > *enough* information.
> 
> Neither draft-fischer-sip-e2e-sec-media and draft-wing-sip-identity-media 
> simply "sign less" -- please do not mis-characterize the proposals.  Both 
> proposals require a public key exchange with the remote party -- which 
> is far stronger than just using the IP address of the remote party 
> as is done by RFC4474.

I don't actually think this characterization of 4474 is that accurate.
RFC 4474 does not use the IP address for authenticating the media.
Rather, it authenticates the IP address as well as the rest of the
SDP and leaves the question of authenticating the media to other
parts of the system. 

-Ekr



_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 09:17:08 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2C1DE28C2CC;
	Tue,  5 Aug 2008 09:17:08 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2EC573A695B
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 09:17:06 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6ZwIrOrglxoh for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 09:17:05 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 2728F3A6A14
	for <sip@ietf.org>; Tue,  5 Aug 2008 09:17:02 -0700 (PDT)
Received: from [192.168.2.2] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m75GHKSW016261
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Tue, 5 Aug 2008 11:17:21 -0500
Message-ID: <48987D0A.4000602@softarmor.com>
Date: Tue, 05 Aug 2008 11:17:14 -0500
From: Dean Willis <dean.willis@softarmor.com>
User-Agent: Icedove 1.5.0.14eol (X11/20080509)
MIME-Version: 1.0
To: Adam Roach <adam@nostrum.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<FE11649F-C3C2-494F-8C40-569E83E91B80@softarmor.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26D3A@GBNTHT12009MSX.gb002.siemens.net>	<4DAE5E60BA49D8419D7C8832503F5FFC072817B5A6@EVS10.ams.gblxint.com>	<06BFFD03-B8FC-47FC-8659-43BF4B60A3B6@softarmor.com>	<4891BAA4.7040305@nostrum.com>	<8151E805-AEF1-4889-8F71-EF33659661A6@softarmor.com>	<4892E0AA.7010300@nostrum.com>
	<B63409E9-F3BF-4E6E-A74B-4FD7347B085E@softarmor.com>
	<4892E352.6020006@nostrum.com>
In-Reply-To: <4892E352.6020006@nostrum.com>
X-Enigmail-Version: 0.94.2.0
Cc: SIP IETF <sip@ietf.org>, Adam Uzelac <Adam.Uzelac@globalcrossing.com>
Subject: Re: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
 SIP	Identity)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Adam Roach wrote:

> 
> Four media-path relays, you say?
> 
> What kind of RTT latency are you envisioning? Is this for a phone-call
> type scenario, or are users expected to resort to saying "over" after
> each speech burst to prevent talking on top of each other?
> 

I'd expect a well-designed steering relay to have a latency just above
double the serialization delay of a packet across its interfaces. for
commercial-grade stuff, that's less than a millisecond.

That should work for everybody except perhaps an EKR talking to himself
on the phone.

Really, we're talking something that's basically a router. It just
learns its routing tables from an entirely different mechanism than OSPF
or BGP. Are the routers on the Internet cramping your speech style now?

--
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 09:20:32 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BEE7328C26D;
	Tue,  5 Aug 2008 09:20:32 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C942E28C2D5
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 09:20:31 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dc3r-Z65F1tA for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 09:20:31 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 0659328C26D
	for <sip@ietf.org>; Tue,  5 Aug 2008 09:20:30 -0700 (PDT)
Received: from [192.168.2.2] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m75GKkSG016309
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Tue, 5 Aug 2008 11:20:47 -0500
Message-ID: <48987DD4.5060703@softarmor.com>
Date: Tue, 05 Aug 2008 11:20:36 -0500
From: Dean Willis <dean.willis@softarmor.com>
User-Agent: Icedove 1.5.0.14eol (X11/20080509)
MIME-Version: 1.0
To: Paul Kyzivat <pkyzivat@cisco.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>	<48919248.7060600@cisco.com>	<0ae201c8f310$d183a0f0$3675150a@cisco.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>	<20080731205152.03E7E514892@kilo.rtfm.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>	<20080801010212.654B5515743@kilo.rtfm.com>	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<489336E4.6050204@cisco.com>
In-Reply-To: <489336E4.6050204@cisco.com>
X-Enigmail-Version: 0.94.2.0
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell,
	John'" <john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Paul Kyzivat wrote:
> What if the SBC did the following:
> 
> - made whatever changes it wants to make to the incoming
>   request to derive the message it wants to send.
> 
> - calculated the reverse diff the transforms its modified
>   message into the message it received.
> 
> - affixed the reverse diff to the new message as another
>   body part.
> 
> - signed the whole thing as itself.
> 
> - sent it on.
> 

That's more or less been proposed several times. It seems to solve all
requirements save one -- it doesn't work over SIP as we know it, because
the packets are going to get freaking huge.

Deprecate UDP now?

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 09:23:48 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AFA6328C2E1;
	Tue,  5 Aug 2008 09:23:48 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A417228C2E1
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 09:23:47 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6bNI1wGolsK5 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 09:23:46 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 98F0B28C2DA
	for <SIP@ietf.org>; Tue,  5 Aug 2008 09:23:46 -0700 (PDT)
Received: from [192.168.2.2] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m75GOFkX016350
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Tue, 5 Aug 2008 11:24:17 -0500
Message-ID: <48987EAA.80405@softarmor.com>
Date: Tue, 05 Aug 2008 11:24:10 -0500
From: Dean Willis <dean.willis@softarmor.com>
User-Agent: Icedove 1.5.0.14eol (X11/20080509)
MIME-Version: 1.0
To: Eric Burger <eburger@standardstrack.com>
References: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
In-Reply-To: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
X-Enigmail-Version: 0.94.2.0
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Eric Burger wrote:
> The current text says we do not allow multiple Info-Packages per INFO
> message.  Although not stated (and I will state explicitly if we
> continue to go in this direction), this nominally makes parsers easier
> and makes failure handling straightforward.

I support single packages per message; although it might be reasonable
that some package itself use a multipart content delivery.

For example, a "surf&turf" INFO package might contain a steak and a
lobster. This creates no consternation for the consumer, because that's
what he asked for, and if he can't handle a multipart, he should have
ordered something else.

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 09:30:27 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B49143A67EE;
	Tue,  5 Aug 2008 09:30:27 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 989F03A67EE
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 09:30:26 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WEEmUQoe5gep for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 09:30:25 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id CBE653A6774
	for <sip@ietf.org>; Tue,  5 Aug 2008 09:30:25 -0700 (PDT)
Received: from [192.168.2.2] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m75GUdFp016376
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Tue, 5 Aug 2008 11:30:41 -0500
Message-ID: <4898802A.2000709@softarmor.com>
Date: Tue, 05 Aug 2008 11:30:34 -0500
From: Dean Willis <dean.willis@softarmor.com>
User-Agent: Icedove 1.5.0.14eol (X11/20080509)
MIME-Version: 1.0
To: "Elwell, John" <john.elwell@siemens.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>	<20080731205152.03E7E514892@kilo.rtfm.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>	<20080801010212.654B5515743@kilo.rtfm.com>	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<489336E4.6050204@cisco.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E2@GBNTHT12009MSX.gb002.siemens.net>
In-Reply-To: <0D5F89FAC29E2C41B98A6A762007F5D0F565E2@GBNTHT12009MSX.gb002.siemens.net>
X-Enigmail-Version: 0.94.2.0
Cc: Cullen Jennings <fluffy@cisco.com>, "Uzelac,
	Adam" <Adam.Uzelac@globalcrossing.com>, SIP IETF <sip@ietf.org>,
	Paul Kyzivat <pkyzivat@cisco.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Elwell, John wrote:
> Paul,
> 
> The problem is, what incentive does the SBC vendor have to go to these
> lengths? I really think we need a solution that doesn't require the SBC
> to do any more than pass information on transparently. RFC 4474 fits
> this criterion, except that it won't work when SBCs do media steering or
> make other "harmless" changes to signed information.
>

The problem is that if the SBC has the power to arbitrarily rewrite the
contents of the message, then  it is potentially doing much more than
just "pass information on transparently". If it was transparent, it
would be a proxy, not an SBC!

The "right" way to do what we seem to want here probably involves adding
a routing protocol layer to RTP. That, however, makes for a very
different architecture from what we have now.

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 09:48:50 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 62ABF3A6B83;
	Tue,  5 Aug 2008 09:48:50 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AA6673A6938
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 09:48:48 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id qW5Jpi6gikbK for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 09:48:47 -0700 (PDT)
Received: from zcars04f.nortel.com (zcars04f.nortel.com [47.129.242.57])
	by core3.amsl.com (Postfix) with ESMTP id 2F6563A695B
	for <sip@ietf.org>; Tue,  5 Aug 2008 09:48:47 -0700 (PDT)
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	m75GnEC12021; Tue, 5 Aug 2008 16:49:15 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 11:49:13 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
In-Reply-To: <5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
Thread-Index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwATutWgAAMre/cAJa/toAAE/t/g
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
From: "Francois Audet" <audet@nortel.com>
To: "DRAGE, Keith (Keith)" <drage@alcatel-lucent.com>,
	"Christer Holmberg" <christer.holmberg@ericsson.com>, <sip@ietf.org>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

So let's clarify what we are trying to solve then.

If we remove HERFP, it seems the main "requirement" is for =

a UA to free up RAM for maintaining state information
when early dialogs terminate. =


And we are doing so by adding more protocol that will add more
states to keep track of.

I am extremely sceptical that this actually simplify anything.
Especially since it order to be backwards compatible, a
UA can not assume that a 199 will be sent to free up the "resources".
I find the incentive for anybody to implement this set of procedures
to be completely unconvincing. It seems to me that it add complexity
not remove any.

I was fooled into thinking at the previous meeting that we would =

then build on top of this proposal to actually solve a real problem
(like HERFP) as opposed to theoretical "resource optimization" problem.
If it looks like HERPF will not use this, then I fail to see any =

incentive to implement 199.


> -----Original Message-----
> From: DRAGE, Keith (Keith) [mailto:drage@alcatel-lucent.com] =

> Sent: Tuesday, August 05, 2008 07:45
> To: Christer Holmberg; Audet, Francois (SC100:3055); sip@ietf.org
> Subject: RE: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
> =

> (As WG cochair)
> =

> The agreement in the SIPPING group where this was discussed =

> was that we were not going to solve the HERPF problem. I =

> think you will find a number of mails in the SIPPING archive =

> confirming this.
> =

> It would be useful to identify and correct any text that you =

> believe implies that the HERPF problem is to be solved.
> =

> Outside the HERPF problem I have no objection to clarifying =

> the requirements and use cases. Please note that supposedly =

> the SIPPING WG has already regarded these as complete. I =

> would like to see clarification rather than feature creep.
> =

> Regards
> =

> Keith
> =

> > -----Original Message-----
> > From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On =

> Behalf Of =

> > Christer Holmberg
> > Sent: Monday, August 04, 2008 9:29 PM
> > To: Francois Audet; sip@ietf.org
> > Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
> > =

> > =

> > Hi Francois,
> > =

> > As was agreed during the "requirements phase", we are not going to =

> > solve the HERPF problem as part of this task. Nobody =

> objected to that.
> > =

> > It was agreed that the scope is to only be able to indicate =

> that the =

> > early dialog has been terminated.
> > =

> > I have tried to explain different kind of "resources" for which the =

> > mechanism could be useful.
> > =

> > If you want to start a separate work item in order to solve =

> (with or =

> > without using 199) other problems you are free to propose =

> such work :)
> > =

> > Regards,
> > =

> > Christer
> > =

> > =

> > =

> > -----Alkuper=E4inen viesti-----
> > L=E4hett=E4j=E4: Francois Audet [mailto:audet@nortel.com]
> > L=E4hetetty: ma 4.8.2008 22:17
> > Vastaanottaja: sip@ietf.org
> > Kopio: Christer Holmberg
> > Aihe: Inadequate Requirements for draft-ietf-sip-199-00
> >  =

> > I believe that the Requirents section for this draft is completely =

> > inadequate.
> >  =

> > The only material in section 3 is the following:
> > =

> > 	REQ 1: It must be possible to indicate to the UAC that an early =

> > dialog has been
> > 	terminated before a final response is sent.
> > =

> > This is almost as good as "REQ: It must be possible to do whatever =

> > this draft says".
> > =

> > This draft must really explain what it is trying to achieve. =

> > The Introduction has a bunch of text that describes what looks and =

> > smells exactly like the HERFP problem.
> > =

> > In Dublin, it was stated that this draft does not attempt =

> to solve the =

> > HERFP problem. If that is the case, then I am completely baffled by =

> > what exactly is it trying to solve.
> > Yes, there is a little bit of wording about the need to "release =

> > resources" (whatever that means), but I find it a little =

> bit hard to =

> > swallow that we need new protocol for that.
> > =

> > _______________________________________________
> > Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use =

> > sip-implementors@cs.columbia.edu for questions on current sip Use =

> > sipping@ietf.org for new developments on the application of sip
> > =

> =

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 10:26:15 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 7DAB93A6808;
	Tue,  5 Aug 2008 10:26:15 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C3E3F3A682D
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 10:26:13 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.58
X-Spam-Level: 
X-Spam-Status: No, score=-6.58 tagged_above=-999 required=5 tests=[AWL=0.019, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uQdiuKfXXPKs for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 10:26:12 -0700 (PDT)
Received: from sj-iport-3.cisco.com (sj-iport-3.cisco.com [171.71.176.72])
	by core3.amsl.com (Postfix) with ESMTP id CD0BC3A6808
	for <sip@ietf.org>; Tue,  5 Aug 2008 10:26:12 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,311,1215388800"; d="scan'208";a="92722329"
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-3.cisco.com with ESMTP; 05 Aug 2008 17:26:27 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-4.cisco.com (8.12.11/8.12.11) with ESMTP id m75HQRBW028849; 
	Tue, 5 Aug 2008 10:26:27 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m75HQRRX014871;
	Tue, 5 Aug 2008 17:26:27 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Eric Rescorla'" <ekr@networkresonance.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net><02829328-7B0E-41AB-B325-01246363D09C@cisco.com><4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com><0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net><48919248.7060600@cisco.com><0ae201c8f310$d183a0f0$3675150a@cisco.com><E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com><20080731205152.03E7E514892@kilo.rtfm.com><E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com><20080801010212.654B5515743@kilo.rtfm.com><0a2101c8f3b1$b75dd500$6a94150a@cisco.com><20080801134611.1B8C9516C54@kilo.rtfm.com><0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net><20080805145945.5B61650846@romeo.rtfm.com><02b801c8f70b$675fed60$c2f0200a@cisco.com><20080805151333.DDB5350846@romeo.rtfm.com><038e01c8f713$84e3cca0$c2f0200a@cisco.com>
	<20080805161109.ABB8F50846@romeo.rtfm.com>
Date: Tue, 5 Aug 2008 10:26:26 -0700
Message-ID: <053c01c8f720$647c21d0$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <20080805161109.ABB8F50846@romeo.rtfm.com>
thread-index: Acj3FJa21rKqrnPbT/G+JI7ay3q9jgAAUSKQ
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2132; t=1217957187;
	x=1218821187; c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=gyHIl+WxHdOGfZU9TI9dkUhkiGtA5kbZl4w4RyVgm+s=;
	b=f9WlnUOs/0kEzSvtBaT/OvGS7I/1ahm9zecJXYCKeKG0pRA6IG857YWEwq
	tQbn8V4Zb7PQg8gPFgWlpG74FzFQZ7qLr1E+OXL3rcEmKeiPMJUhh3RDPizq
	YTBE9dkRx6;
Authentication-Results: sj-dkim-4; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim4002 verified; ); 
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> -----Original Message-----
> From: Eric Rescorla [mailto:ekr@networkresonance.com] 
> Sent: Tuesday, August 05, 2008 9:11 AM
> To: Dan Wing
> Cc: 'Eric Rescorla'; 'Elwell, John'; 'Hadriel Kaplan'; 
> 'Jonathan Rosenberg'; 'Cullen Jennings'; 'SIP IETF'; 'Uzelac, Adam'
> Subject: Re: [Sip] Thoughts on SIP Identity issues
> 
> At Tue, 5 Aug 2008 08:54:16 -0700,
> Dan Wing wrote:
> > > I haven't spent a long time examining 
> > > draft-kaplan-sip-baiting, but as
> > > I recall, it's not the fault of 4474 failing to sign 
> > > something that
> > > it should have but rather that it's inherent in the 
> > > message-oriented 
> > > nature of SIP.
> > 
> > That distinction is not relevant to the victim.
> 
> No, the distinction is relevant to the people responsible for 
> technically addressing the issue, namely us.

My interpretation of what you are saying is "SIP is message-
oriented, so SIP is vulnerable to baiting as described in
draft-kaplan-sip-baiting, and we can't fix it".  

I don't know if that is what you intended to say; if not, 
please clarify.

> > > With that said, ISTM that this cuts against your argument 
> > > that we should
> > > be signing less of the message, since the failure of RFC 
> 4474 (to the
> > > extent there is one) in this case is that it doesn't protect
> > > *enough* information.
> > 
> > Neither draft-fischer-sip-e2e-sec-media and 
> > draft-wing-sip-identity-media 
> > simply "sign less" -- please do not mis-characterize the 
> > proposals.  Both 
> > proposals require a public key exchange with the remote 
> > party -- which 
> > is far stronger than just using the IP address of the remote party 
> > as is done by RFC4474.
> 
> I don't actually think this characterization of 4474 is that accurate.
> RFC 4474 does not use the IP address for authenticating the media.
> Rather, it authenticates the IP address as well as the rest of the
> SDP 

Which draft-kaplan-sip-baiting shows is insufficient at its intended
purpose.

> and leaves the question of authenticating the media to other
> parts of the system. 

-d




_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 10:35:13 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 932A23A6969;
	Tue,  5 Aug 2008 10:35:13 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CB7E43A6951
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 10:35:12 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.209
X-Spam-Level: 
X-Spam-Status: No, score=-6.209 tagged_above=-999 required=5 tests=[AWL=0.040, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SV0KEQYO8kXR for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 10:35:12 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id A2A563A6878
	for <sip@ietf.org>; Tue,  5 Aug 2008 10:35:11 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	AC0CD2064D; Tue,  5 Aug 2008 19:35:39 +0200 (CEST)
X-AuditID: c1b4fb3e-ae999bb000004ec0-63-48988f6b91c2
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	8B6F520489; Tue,  5 Aug 2008 19:35:39 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 19:35:39 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 19:31:17 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78C9@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-199-00.txt - offer/answer impact
thread-index: Acj3BNvSIeqaizDKTB26CvIqnnDGgAAHDU2y
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com>
	<CA9998CD4A020D418654FCDEF4E707DF0750A6AB@esealmw113.eemea.ericsson.se>
	<48985F47.8060409@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 05 Aug 2008 17:35:39.0578 (UTC)
	FILETIME=[AD6F19A0:01C8F721]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt - offer/answer
	impact
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

>>>11) I can't follow the second paragraph of section 9 at all. Can you
>>>rephrase it?
>>>Once I know what its trying to say, I'll propose alternate text.
>> 
>>What it is supposed to say is that you cannot send a 199 if you are
>>required (by the offer/answer rules) to include SDP.
>
>Thinking about this further...
>
>This means that a proxy must track the o/a state of the dialog usage in 
>order to know whether it can send a 199 or not. That could be a 
>considerable burden. It requires maintaining partial dialog state rather 
>than simply transaction state, and also requires more parsing of 
>messages and potentially message bodies. (E.g. with multipart.)
>
>This has me again questioning the cost/benefit tradeoff of the whole 
>thing. Of course in this case the cost is to the proxy, and the benefit 
>is to the UAC.

I guess we could simply say never to insert an SDP body in the 199 response. I don't think it would make much harm, since the dialog is terminated in any case.

And, this could only happen when/if 199 is sent reliably, since unreliable provisional responses can't carry offer/answers in the first place...

Regards,

Christer


	Paul

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 10:39:20 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id DA8143A69B2;
	Tue,  5 Aug 2008 10:39:19 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B44BB3A6A69
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 10:39:17 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.496
X-Spam-Level: 
X-Spam-Status: No, score=-6.496 tagged_above=-999 required=5 tests=[AWL=0.103, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id jYH736X7q8F3 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 10:39:16 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id 242BD3A6BE5
	for <sip@ietf.org>; Tue,  5 Aug 2008 10:39:16 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,311,1215388800"; d="scan'208";a="136071736"
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-6.cisco.com with ESMTP; 05 Aug 2008 17:39:46 +0000
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-3.cisco.com (8.12.11/8.12.11) with ESMTP id m75HdjXg012189; 
	Tue, 5 Aug 2008 10:39:45 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m75HdhAF018193;
	Tue, 5 Aug 2008 17:39:44 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 13:39:39 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 13:39:39 -0400
Message-ID: <48989095.3010808@cisco.com>
Date: Tue, 05 Aug 2008 13:40:37 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
X-OriginalArrivalTime: 05 Aug 2008 17:39:39.0202 (UTC)
	FILETIME=[3C42D220:01C8F722]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=5289; t=1217957985;
	x=1218821985; c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Inadequate=20Requirements=20for
	=20draft-ietf-sip-199-00 |Sender:=20;
	bh=Y01NSICbLyrk7fNVnSaJVl317Fq+MJn9PwPQ9eKQL6E=;
	b=KBcVsr53SDUdwAcgPSI+fXbUe1VzELk0GC02OolekbZnyFh+KpEJks70f/
	HjcUvbSU7oDSg98a0aP6K0gd0dCzP3ZLETr56RDqbNe5we0WBY0h2cak4GIz
	f9l6fzU+pB;
Authentication-Results: sj-dkim-3; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim3002 verified; ); 
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-1"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I don't have strong feelings one way or another about this, but I think =

the resources being freed may be more than just some memory.
E.g. I think there can be DSPs assigned to process media for each early =

dialog.

But this is starting to get very complex, and I am being swayed in =

opposition to it. In particular, if the proxy must track the o/a state =

of the early dialog in order to decide if it can send a 199, then that =

starts to seem unreasonable to me.

	Thanks,
	Paul

Francois Audet wrote:
> So let's clarify what we are trying to solve then.
> =

> If we remove HERFP, it seems the main "requirement" is for =

> a UA to free up RAM for maintaining state information
> when early dialogs terminate. =

> =

> And we are doing so by adding more protocol that will add more
> states to keep track of.
> =

> I am extremely sceptical that this actually simplify anything.
> Especially since it order to be backwards compatible, a
> UA can not assume that a 199 will be sent to free up the "resources".
> I find the incentive for anybody to implement this set of procedures
> to be completely unconvincing. It seems to me that it add complexity
> not remove any.
> =

> I was fooled into thinking at the previous meeting that we would =

> then build on top of this proposal to actually solve a real problem
> (like HERFP) as opposed to theoretical "resource optimization" problem.
> If it looks like HERPF will not use this, then I fail to see any =

> incentive to implement 199.
> =

> =

>> -----Original Message-----
>> From: DRAGE, Keith (Keith) [mailto:drage@alcatel-lucent.com] =

>> Sent: Tuesday, August 05, 2008 07:45
>> To: Christer Holmberg; Audet, Francois (SC100:3055); sip@ietf.org
>> Subject: RE: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
>>
>> (As WG cochair)
>>
>> The agreement in the SIPPING group where this was discussed =

>> was that we were not going to solve the HERPF problem. I =

>> think you will find a number of mails in the SIPPING archive =

>> confirming this.
>>
>> It would be useful to identify and correct any text that you =

>> believe implies that the HERPF problem is to be solved.
>>
>> Outside the HERPF problem I have no objection to clarifying =

>> the requirements and use cases. Please note that supposedly =

>> the SIPPING WG has already regarded these as complete. I =

>> would like to see clarification rather than feature creep.
>>
>> Regards
>>
>> Keith
>>
>>> -----Original Message-----
>>> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On =

>> Behalf Of =

>>> Christer Holmberg
>>> Sent: Monday, August 04, 2008 9:29 PM
>>> To: Francois Audet; sip@ietf.org
>>> Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
>>>
>>>
>>> Hi Francois,
>>>
>>> As was agreed during the "requirements phase", we are not going to =

>>> solve the HERPF problem as part of this task. Nobody =

>> objected to that.
>>> It was agreed that the scope is to only be able to indicate =

>> that the =

>>> early dialog has been terminated.
>>>
>>> I have tried to explain different kind of "resources" for which the =

>>> mechanism could be useful.
>>>
>>> If you want to start a separate work item in order to solve =

>> (with or =

>>> without using 199) other problems you are free to propose =

>> such work :)
>>> Regards,
>>>
>>> Christer
>>>
>>>
>>>
>>> -----Alkuper=E4inen viesti-----
>>> L=E4hett=E4j=E4: Francois Audet [mailto:audet@nortel.com]
>>> L=E4hetetty: ma 4.8.2008 22:17
>>> Vastaanottaja: sip@ietf.org
>>> Kopio: Christer Holmberg
>>> Aihe: Inadequate Requirements for draft-ietf-sip-199-00
>>>  =

>>> I believe that the Requirents section for this draft is completely =

>>> inadequate.
>>>  =

>>> The only material in section 3 is the following:
>>>
>>> 	REQ 1: It must be possible to indicate to the UAC that an early =

>>> dialog has been
>>> 	terminated before a final response is sent.
>>>
>>> This is almost as good as "REQ: It must be possible to do whatever =

>>> this draft says".
>>>
>>> This draft must really explain what it is trying to achieve. =

>>> The Introduction has a bunch of text that describes what looks and =

>>> smells exactly like the HERFP problem.
>>>
>>> In Dublin, it was stated that this draft does not attempt =

>> to solve the =

>>> HERFP problem. If that is the case, then I am completely baffled by =

>>> what exactly is it trying to solve.
>>> Yes, there is a little bit of wording about the need to "release =

>>> resources" (whatever that means), but I find it a little =

>> bit hard to =

>>> swallow that we need new protocol for that.
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol Use =

>>> sip-implementors@cs.columbia.edu for questions on current sip Use =

>>> sipping@ietf.org for new developments on the application of sip
>>>
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> =

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 10:48:41 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 48AAA3A6CE0;
	Tue,  5 Aug 2008 10:48:41 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 756FD28C0E8
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 10:48:40 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.211
X-Spam-Level: 
X-Spam-Status: No, score=-6.211 tagged_above=-999 required=5 tests=[AWL=0.038, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0eSoXsOYpz1U for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 10:48:39 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id EBDDD3A6A69
	for <sip@ietf.org>; Tue,  5 Aug 2008 10:48:38 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	46DCD2132E; Tue,  5 Aug 2008 19:49:09 +0200 (CEST)
X-AuditID: c1b4fb3e-ad196bb000004ec0-b1-48989295b9ab
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	1B5EC2132A; Tue,  5 Aug 2008 19:49:09 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 19:49:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 19:49:08 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
thread-index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwATutWgAAMre/cAJa/toAAE/t/gAAH9KO0=
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Francois Audet" <audet@nortel.com>,
	"DRAGE, Keith (Keith)" <drage@alcatel-lucent.com>, <sip@ietf.org>
X-OriginalArrivalTime: 05 Aug 2008 17:49:09.0109 (UTC)
	FILETIME=[8FF3BA50:01C8F723]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi Francois,

Nobody has said we will not work on solving the HERPF problem - potentially=
 using 199. We only agreed not to do it as part of 199.

You are welcome to draft a proposal, and at least I would be very intereste=
d in working on that.  =


Reading the use-cases, I think you will see that it's not only about "freei=
ng up some RAM". It can be  used for network/bandwidth/media type-of resour=
ces.

It MAY also be part of a future solution for the forking-and-early-media so=
lution, in cases where you can assoicate media with dialogs etc.  =


Regards,

Christer


-----Alkuper=E4inen viesti-----
L=E4hett=E4j=E4: Francois Audet [mailto:audet@nortel.com]
L=E4hetetty: ti 5.8.2008 18:49
Vastaanottaja: DRAGE, Keith (Keith); Christer Holmberg; sip@ietf.org
Aihe: RE: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
 =

So let's clarify what we are trying to solve then.

If we remove HERFP, it seems the main "requirement" is for =

a UA to free up RAM for maintaining state information
when early dialogs terminate. =


And we are doing so by adding more protocol that will add more
states to keep track of.

I am extremely sceptical that this actually simplify anything.
Especially since it order to be backwards compatible, a
UA can not assume that a 199 will be sent to free up the "resources".
I find the incentive for anybody to implement this set of procedures
to be completely unconvincing. It seems to me that it add complexity
not remove any.

I was fooled into thinking at the previous meeting that we would =

then build on top of this proposal to actually solve a real problem
(like HERFP) as opposed to theoretical "resource optimization" problem.
If it looks like HERPF will not use this, then I fail to see any =

incentive to implement 199.


> -----Original Message-----
> From: DRAGE, Keith (Keith) [mailto:drage@alcatel-lucent.com] =

> Sent: Tuesday, August 05, 2008 07:45
> To: Christer Holmberg; Audet, Francois (SC100:3055); sip@ietf.org
> Subject: RE: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
> =

> (As WG cochair)
> =

> The agreement in the SIPPING group where this was discussed =

> was that we were not going to solve the HERPF problem. I =

> think you will find a number of mails in the SIPPING archive =

> confirming this.
> =

> It would be useful to identify and correct any text that you =

> believe implies that the HERPF problem is to be solved.
> =

> Outside the HERPF problem I have no objection to clarifying =

> the requirements and use cases. Please note that supposedly =

> the SIPPING WG has already regarded these as complete. I =

> would like to see clarification rather than feature creep.
> =

> Regards
> =

> Keith
> =

> > -----Original Message-----
> > From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On =

> Behalf Of =

> > Christer Holmberg
> > Sent: Monday, August 04, 2008 9:29 PM
> > To: Francois Audet; sip@ietf.org
> > Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
> > =

> > =

> > Hi Francois,
> > =

> > As was agreed during the "requirements phase", we are not going to =

> > solve the HERPF problem as part of this task. Nobody =

> objected to that.
> > =

> > It was agreed that the scope is to only be able to indicate =

> that the =

> > early dialog has been terminated.
> > =

> > I have tried to explain different kind of "resources" for which the =

> > mechanism could be useful.
> > =

> > If you want to start a separate work item in order to solve =

> (with or =

> > without using 199) other problems you are free to propose =

> such work :)
> > =

> > Regards,
> > =

> > Christer
> > =

> > =

> > =

> > -----Alkuper=E4inen viesti-----
> > L=E4hett=E4j=E4: Francois Audet [mailto:audet@nortel.com]
> > L=E4hetetty: ma 4.8.2008 22:17
> > Vastaanottaja: sip@ietf.org
> > Kopio: Christer Holmberg
> > Aihe: Inadequate Requirements for draft-ietf-sip-199-00
> >  =

> > I believe that the Requirents section for this draft is completely =

> > inadequate.
> >  =

> > The only material in section 3 is the following:
> > =

> > 	REQ 1: It must be possible to indicate to the UAC that an early =

> > dialog has been
> > 	terminated before a final response is sent.
> > =

> > This is almost as good as "REQ: It must be possible to do whatever =

> > this draft says".
> > =

> > This draft must really explain what it is trying to achieve. =

> > The Introduction has a bunch of text that describes what looks and =

> > smells exactly like the HERFP problem.
> > =

> > In Dublin, it was stated that this draft does not attempt =

> to solve the =

> > HERFP problem. If that is the case, then I am completely baffled by =

> > what exactly is it trying to solve.
> > Yes, there is a little bit of wording about the need to "release =

> > resources" (whatever that means), but I find it a little =

> bit hard to =

> > swallow that we need new protocol for that.
> > =

> > _______________________________________________
> > Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use =

> > sip-implementors@cs.columbia.edu for questions on current sip Use =

> > sipping@ietf.org for new developments on the application of sip
> > =

> =


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 10:52:50 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B8D0828C0F2;
	Tue,  5 Aug 2008 10:52:50 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A56F83A6C3B
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 10:52:49 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.214
X-Spam-Level: 
X-Spam-Status: No, score=-6.214 tagged_above=-999 required=5 tests=[AWL=0.035, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id IAOdYF-be6mu for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 10:52:48 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 3CE5A28C0F2
	for <sip@ietf.org>; Tue,  5 Aug 2008 10:52:48 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	DEBFF21365; Tue,  5 Aug 2008 19:53:17 +0200 (CEST)
X-AuditID: c1b4fb3e-ac194bb000004ec0-68-4898938b3f75
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	DC4492135C; Tue,  5 Aug 2008 19:53:15 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 19:53:15 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 19:50:22 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78CB@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
thread-index: Acj3IkSbzp/hS/7/QdCms6kLXJEAzwAAXbXt
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<48989095.3010808@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Francois Audet" <audet@nortel.com>
X-OriginalArrivalTime: 05 Aug 2008 17:53:15.0681 (UTC)
	FILETIME=[22EBA110:01C8F724]
X-Brightmail-Tracker: AAAAAA==
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,
 =

>I don't have strong feelings one way or another about this, but I think =

>the resources being freed may be more than just some memory.
>E.g. I think there can be DSPs assigned to process media for each early =

>dialog.

Correct. At least in many mobile terminals DSP resources are very limited.

>But this is starting to get very complex, and I am being swayed in =

>opposition to it. In particular, if the proxy must track the o/a state =

>of the early dialog in order to decide if it can send a 199, then that =

>starts to seem unreasonable to me.

As I said in another reply, I don't think we shall require the proxy to mai=
ntain o/a state.

The whole idea was to come up with a relatively simple mechanism.

...which then of course may be used to solve complex problems (like HERPF).

Regards,

Christer =


	=

Francois Audet wrote:
> So let's clarify what we are trying to solve then.
> =

> If we remove HERFP, it seems the main "requirement" is for =

> a UA to free up RAM for maintaining state information
> when early dialogs terminate. =

> =

> And we are doing so by adding more protocol that will add more
> states to keep track of.
> =

> I am extremely sceptical that this actually simplify anything.
> Especially since it order to be backwards compatible, a
> UA can not assume that a 199 will be sent to free up the "resources".
> I find the incentive for anybody to implement this set of procedures
> to be completely unconvincing. It seems to me that it add complexity
> not remove any.
> =

> I was fooled into thinking at the previous meeting that we would =

> then build on top of this proposal to actually solve a real problem
> (like HERFP) as opposed to theoretical "resource optimization" problem.
> If it looks like HERPF will not use this, then I fail to see any =

> incentive to implement 199.
> =

> =

>> -----Original Message-----
>> From: DRAGE, Keith (Keith) [mailto:drage@alcatel-lucent.com] =

>> Sent: Tuesday, August 05, 2008 07:45
>> To: Christer Holmberg; Audet, Francois (SC100:3055); sip@ietf.org
>> Subject: RE: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
>>
>> (As WG cochair)
>>
>> The agreement in the SIPPING group where this was discussed =

>> was that we were not going to solve the HERPF problem. I =

>> think you will find a number of mails in the SIPPING archive =

>> confirming this.
>>
>> It would be useful to identify and correct any text that you =

>> believe implies that the HERPF problem is to be solved.
>>
>> Outside the HERPF problem I have no objection to clarifying =

>> the requirements and use cases. Please note that supposedly =

>> the SIPPING WG has already regarded these as complete. I =

>> would like to see clarification rather than feature creep.
>>
>> Regards
>>
>> Keith
>>
>>> -----Original Message-----
>>> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On =

>> Behalf Of =

>>> Christer Holmberg
>>> Sent: Monday, August 04, 2008 9:29 PM
>>> To: Francois Audet; sip@ietf.org
>>> Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
>>>
>>>
>>> Hi Francois,
>>>
>>> As was agreed during the "requirements phase", we are not going to =

>>> solve the HERPF problem as part of this task. Nobody =

>> objected to that.
>>> It was agreed that the scope is to only be able to indicate =

>> that the =

>>> early dialog has been terminated.
>>>
>>> I have tried to explain different kind of "resources" for which the =

>>> mechanism could be useful.
>>>
>>> If you want to start a separate work item in order to solve =

>> (with or =

>>> without using 199) other problems you are free to propose =

>> such work :)
>>> Regards,
>>>
>>> Christer
>>>
>>>
>>>
>>> -----Alkuper=E4inen viesti-----
>>> L=E4hett=E4j=E4: Francois Audet [mailto:audet@nortel.com]
>>> L=E4hetetty: ma 4.8.2008 22:17
>>> Vastaanottaja: sip@ietf.org
>>> Kopio: Christer Holmberg
>>> Aihe: Inadequate Requirements for draft-ietf-sip-199-00
>>>  =

>>> I believe that the Requirents section for this draft is completely =

>>> inadequate.
>>>  =

>>> The only material in section 3 is the following:
>>>
>>> 	REQ 1: It must be possible to indicate to the UAC that an early =

>>> dialog has been
>>> 	terminated before a final response is sent.
>>>
>>> This is almost as good as "REQ: It must be possible to do whatever =

>>> this draft says".
>>>
>>> This draft must really explain what it is trying to achieve. =

>>> The Introduction has a bunch of text that describes what looks and =

>>> smells exactly like the HERFP problem.
>>>
>>> In Dublin, it was stated that this draft does not attempt =

>> to solve the =

>>> HERFP problem. If that is the case, then I am completely baffled by =

>>> what exactly is it trying to solve.
>>> Yes, there is a little bit of wording about the need to "release =

>>> resources" (whatever that means), but I find it a little =

>> bit hard to =

>>> swallow that we need new protocol for that.
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol Use =

>>> sip-implementors@cs.columbia.edu for questions on current sip Use =

>>> sipping@ietf.org for new developments on the application of sip
>>>
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> =


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 10:58:11 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C274F28C1A4;
	Tue,  5 Aug 2008 10:58:11 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 17D1C28C1A4
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 10:58:11 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.216
X-Spam-Level: 
X-Spam-Status: No, score=-6.216 tagged_above=-999 required=5 tests=[AWL=0.033, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ER9mZLyFKFS4 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 10:58:10 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id C82D528C14B
	for <sip@ietf.org>; Tue,  5 Aug 2008 10:58:09 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	0AA5B2081A; Tue,  5 Aug 2008 19:58:40 +0200 (CEST)
X-AuditID: c1b4fb3c-ae89cbb00000193b-cf-489894cf2c56
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	E273C20007; Tue,  5 Aug 2008 19:58:39 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 19:58:39 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 19:54:39 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78CC@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-199-00.txt - dialogusage impact
thread-index: Acj3Blm9DJKg0w3xQUmmfOHA1/nOpAAHfsG/
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com>
	<48862EFF.3000908@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
	<489861C9.2020507@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 05 Aug 2008 17:58:39.0767 (UTC)
	FILETIME=[E4173A70:01C8F724]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt - dialogusage impact
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

>>> 7) Section 7: "A UAC that receives a 199 response for an early dialog MUST NOT
>>> send any further requests on that dialog...". Can you point to any list discussion
>>> around this requirement? I think there's some danger to consider there. At the
>>> very least we need to make this statement multiple-usage safe.
>> This is a very good catch. This needs to be aligned with dialogusage.
>If the 199 contained the final response that triggered it, then that
>final response could be used to determine the impact on the dialog or dialog usage or just the >transaction. But if the 199 doesn't contain the final response, then this is a problem.
> 
> I forgot to bring this issue up in Dublin. Sorry for that.
> 
> First, we need to remember that the UAS may terminate every dialogusage
> when sending the final response (depending on what final response is
> sent), without the UAC knowing it. And, due to the forking rules, the
> final response which is sent to the UAC may not even be the same which
> was sent by the UAS, if a final response from another UAS is chosen as
> the "best".
> 
> Second, we need to remember that this only affects early-dialogusages.
> 
> If needed, I guess we could include the final response which triggered
> the 199, but we could also simply say that if the UAC does not know to
> which dialogusage (if there are many) the 199 applies, it should not do
> anything which may affect other usages for the same early dialog.

>The establishment of multiple early dialog usages is a pretty strange 
>thing. Do we know of any use cases for this? (E.g. an in-dialog REFER on 
>an early INVITE. Is that legal?)

Don't know... Does the dialogusage spec talk about early dialogs?

>Assuming it can arise, then I agree it is reasonable to treat the 199 as 
>affecting only its dialog usage unless there is info with it (such as 
>the actual final response code) that gives evidence that the whole 
>dialog is gone.

I agree, and I can put some text about that.

Because, even if the 199 response did affect the whole dialog, the UAC should find out about it once  the forking proxy sends a final response.

Regards,

Christer

	
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 11:00:05 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D8A9F28C0F2;
	Tue,  5 Aug 2008 11:00:05 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9932B28C0F2
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 11:00:04 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EzeqmnYJxEAU for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 11:00:03 -0700 (PDT)
Received: from zrtps0kn.nortel.com (zrtps0kn.nortel.com [47.140.192.55])
	by core3.amsl.com (Postfix) with ESMTP id C521428C24D
	for <sip@ietf.org>; Tue,  5 Aug 2008 10:59:48 -0700 (PDT)
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zrtps0kn.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	m75I0Gh13305; Tue, 5 Aug 2008 18:00:16 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 12:59:59 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
Thread-Index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwATutWgAAMre/cAJa/toAAE/t/gAAH9KO0AAGjyQA==
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
From: "Francois Audet" <audet@nortel.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	"DRAGE, Keith (Keith)" <drage@alcatel-lucent.com>, <sip@ietf.org>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

All I am saying is that this solution seems to be to try to address a 
problem that is too narrow to justify the complexity and extra protocol
in this draft, and that the problem is not described properly in the draft.

If it helped with something else (like HEFP), then perhaps it would be useful.

I have heard in Dublin from Robert Sparks that "something else" (with no
details on what he has in mind) would be better to solve HERFP.

This is getting me extremely worried that we are jumping ahead too fast
on this 199 proposal, without a clear direction of where HERFP will take us.

To answer Keith's question: the whole introduction in Christer's draft 
(except the very last paragraph about undefined "saved resources") 
describes what the HERFP problem is, i.e., that when forking occurs,
final responses are not passed to the UAC and it causes problems. That
is what HERFP is.

I see it as very disingeneous that we are pretending that this has
nothing to do with HERFP when it very is clearly related to it.

> -----Original Message-----
> From: Christer Holmberg [mailto:christer.holmberg@ericsson.com] 
> Sent: Tuesday, August 05, 2008 10:49
> To: Audet, Francois (SC100:3055); DRAGE, Keith (Keith); sip@ietf.org
> Subject: VS: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
> 
> 
> Hi Francois,
> 
> Nobody has said we will not work on solving the HERPF problem 
> - potentially using 199. We only agreed not to do it as part of 199.
> 
> You are welcome to draft a proposal, and at least I would be 
> very interested in working on that.  
> 
> Reading the use-cases, I think you will see that it's not 
> only about "freeing up some RAM". It can be  used for 
> network/bandwidth/media type-of resources.
> 
> It MAY also be part of a future solution for the 
> forking-and-early-media solution, in cases where you can 
> assoicate media with dialogs etc.  
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 12:15:08 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 543473A6A2D;
	Tue,  5 Aug 2008 12:15:08 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D7CD13A6A2D
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 12:15:06 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.217
X-Spam-Level: 
X-Spam-Status: No, score=-6.217 tagged_above=-999 required=5 tests=[AWL=0.032, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2TY442mFzpjC for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 12:15:06 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id B7BB63A69CE
	for <sip@ietf.org>; Tue,  5 Aug 2008 12:15:05 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	948912059C; Tue,  5 Aug 2008 21:15:35 +0200 (CEST)
X-AuditID: c1b4fb3c-ae89cbb00000193b-14-4898a6d7d7f6
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	6AFFE2060F; Tue,  5 Aug 2008 21:15:35 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Aug 2008 21:15:33 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 5 Aug 2008 21:15:33 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78CE@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
thread-index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwATutWgAAMre/cAJa/toAAE/t/gAAH9KO0AAGjyQAACi5xj
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Francois Audet" <audet@nortel.com>,
	"DRAGE, Keith (Keith)" <drage@alcatel-lucent.com>, <sip@ietf.org>
X-OriginalArrivalTime: 05 Aug 2008 19:15:33.0661 (UTC)
	FILETIME=[A22F94D0:01C8F72F]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,
 
>All I am saying is that this solution seems to be to try to address a 
>problem that is too narrow to justify the complexity and extra protocol
>in this draft, and that the problem is not described properly in the draft.

Again, the idea is to make it as little complex as possibly, and that is why we are discussing a number of issue in order not to make it too complex.

>If it helped with something else (like HEFP), then perhaps it would be useful.

It may help with HERPF.

>I have heard in Dublin from Robert Sparks that "something else" (with no
>details on what he has in mind) would be better to solve HERFP.

We need to look into th alternatives when they are available.

>This is getting me extremely worried that we are jumping ahead too fast
>on this 199 proposal, without a clear direction of where HERFP will take us.
>
>To answer Keith's question: the whole introduction in Christer's draft 
>(except the very last paragraph about undefined "saved resources") 
>describes what the HERFP problem is, i.e., that when forking occurs,
>final responses are not passed to the UAC and it causes problems. That
>is what HERFP is.

To me HERFP is a little more than that. HERFP also talks about SIP procedures taking place after the UAC has received the information: sending new INVITEs etc.

199 was also presented at the previous 3GPP CT1 meeting, and people agreed it would be a useful mechanism. 3GPP has never discussed HERFP, however, but only issues related to forking and resources. So, there is a need for this even without a HERFP solution.

Regards,

Christer



> -----Original Message-----
> From: Christer Holmberg [mailto:christer.holmberg@ericsson.com] 
> Sent: Tuesday, August 05, 2008 10:49
> To: Audet, Francois (SC100:3055); DRAGE, Keith (Keith); sip@ietf.org
> Subject: VS: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
> 
> 
> Hi Francois,
> 
> Nobody has said we will not work on solving the HERPF problem 
> - potentially using 199. We only agreed not to do it as part of 199.
> 
> You are welcome to draft a proposal, and at least I would be 
> very interested in working on that.  
> 
> Reading the use-cases, I think you will see that it's not 
> only about "freeing up some RAM". It can be  used for 
> network/bandwidth/media type-of resources.
> 
> It MAY also be part of a future solution for the 
> forking-and-early-media solution, in cases where you can 
> assoicate media with dialogs etc.  

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 13:47:40 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1F5A83A6A90;
	Tue,  5 Aug 2008 13:47:40 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9EB3C3A6A90
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 13:47:38 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.626
X-Spam-Level: 
X-Spam-Status: No, score=-0.626 tagged_above=-999 required=5
	tests=[AWL=-0.131, BAYES_00=-2.599, FH_RELAY_NODNS=1.451,
	HELO_MISMATCH_COM=0.553, RDNS_NONE=0.1]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id n+RexJ4htG33 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 13:47:37 -0700 (PDT)
Received: from kilo.rtfm.com (unknown [74.95.2.169])
	by core3.amsl.com (Postfix) with ESMTP id D1C953A6930
	for <sip@ietf.org>; Tue,  5 Aug 2008 13:47:37 -0700 (PDT)
Received: from kilo-2.local (localhost [127.0.0.1])
	by kilo.rtfm.com (Postfix) with ESMTP id A7DC0524DAD;
	Tue,  5 Aug 2008 13:47:56 -0700 (PDT)
Date: Tue, 05 Aug 2008 13:47:56 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: "Dan Wing" <dwing@cisco.com>
In-Reply-To: <053c01c8f720$647c21d0$c2f0200a@cisco.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
	<20080805145945.5B61650846@romeo.rtfm.com>
	<02b801c8f70b$675fed60$c2f0200a@cisco.com>
	<20080805151333.DDB5350846@romeo.rtfm.com>
	<038e01c8f713$84e3cca0$c2f0200a@cisco.com>
	<20080805161109.ABB8F50846@romeo.rtfm.com>
	<053c01c8f720$647c21d0$c2f0200a@cisco.com>
User-Agent: Wanderlust/2.15.5 (Almost Unreal) Emacs/22.1 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080805204756.A7DC0524DAD@kilo.rtfm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

>At Tue, 5 Aug 2008 10:26:26 -0700,
Dan Wing wrote:
> 
> > -----Original Message-----
> > From: Eric Rescorla [mailto:ekr@networkresonance.com] 
> > Sent: Tuesday, August 05, 2008 9:11 AM
> > To: Dan Wing
> > Cc: 'Eric Rescorla'; 'Elwell, John'; 'Hadriel Kaplan'; 
> > 'Jonathan Rosenberg'; 'Cullen Jennings'; 'SIP IETF'; 'Uzelac, Adam'
> > Subject: Re: [Sip] Thoughts on SIP Identity issues
> > 
> > At Tue, 5 Aug 2008 08:54:16 -0700,
> > Dan Wing wrote:
> > > > I haven't spent a long time examining 
> > > > draft-kaplan-sip-baiting, but as
> > > > I recall, it's not the fault of 4474 failing to sign 
> > > > something that
> > > > it should have but rather that it's inherent in the 
> > > > message-oriented 
> > > > nature of SIP.
> > > 
> > > That distinction is not relevant to the victim.
> > 
> > No, the distinction is relevant to the people responsible for 
> > technically addressing the issue, namely us.
> 
> My interpretation of what you are saying is "SIP is message-
> oriented, so SIP is vulnerable to baiting as described in
> draft-kaplan-sip-baiting, and we can't fix it".  
> 
> I don't know if that is what you intended to say; if not, 
> please clarify.

What I'm saying is that a message-oriented system like SIP inherently
has replay attacks. If you want to remove replay attacks, you'll
need to do it at a separate layer.


> > I don't actually think this characterization of 4474 is that accurate.
> > RFC 4474 does not use the IP address for authenticating the media.
> > Rather, it authenticates the IP address as well as the rest of the
> > SDP 
> 
> Which draft-kaplan-sip-baiting shows is insufficient at its intended
> purpose.

Well, I guess that's one interpretation, but it's not mine.

-Ekr
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 13:57:09 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A1B413A68B7;
	Tue,  5 Aug 2008 13:57:09 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6A8C43A6935
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 13:57:08 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.581
X-Spam-Level: 
X-Spam-Status: No, score=-6.581 tagged_above=-999 required=5 tests=[AWL=0.018, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id T-HNI6M3FO8v for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 13:57:06 -0700 (PDT)
Received: from sj-iport-1.cisco.com (sj-iport-1.cisco.com [171.71.176.70])
	by core3.amsl.com (Postfix) with ESMTP id 9B8E63A68B7
	for <sip@ietf.org>; Tue,  5 Aug 2008 13:57:06 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,312,1215388800"; d="scan'208";a="61898603"
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-1.cisco.com with ESMTP; 05 Aug 2008 20:57:38 +0000
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m75KvcGi004906; 
	Tue, 5 Aug 2008 13:57:38 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m75KvapL010090;
	Tue, 5 Aug 2008 20:57:36 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Eric Rescorla'" <ekr@networkresonance.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net><02829328-7B0E-41AB-B325-01246363D09C@cisco.com><4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com><0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net><48919248.7060600@cisco.com><0ae201c8f310$d183a0f0$3675150a@cisco.com><E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com><20080731205152.03E7E514892@kilo.rtfm.com><E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com><20080801010212.654B5515743@kilo.rtfm.com><0a2101c8f3b1$b75dd500$6a94150a@cisco.com><20080801134611.1B8C9516C54@kilo.rtfm.com><0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net><20080805145945.5B61650846@romeo.rtfm.com><02b801c8f70b$675fed60$c2f0200a@cisco.com><20080805151333.DDB5350846@romeo.rtfm.com><038e01c8f713$84e3cca0$c2f0200a@cisco.com><20080805161109.ABB8F50846@romeo.rtfm.com><053c01c8f720$647c21d0$c2f0200a@cisco.com>
	<20080805204756.A7DC0524DA D@kilo.rtfm.com>
Date: Tue, 5 Aug 2008 13:57:34 -0700
Message-ID: <157a01c8f73d$e4a2cf40$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <20080805204756.A7DC0524DAD@kilo.rtfm.com>
thread-index: Acj3PKBTvpzLRzWXRJisNMQZXg23lwAAO0lg
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2693; t=1217969858;
	x=1218833858; c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=XHr8CfakH5KT+4yfhrZDt1uZJr/kIqkZzEWUfC16EXg=;
	b=JhEMCWsSOk+34ogGLjjbAbRwt+sxQ48gyZPDCgubyJ1why8m7OjwS4HNuS
	qVmR3jXV+pr50LVX56FSclUtpaogqZCNbGsvkcgZ+ZEnvYdYUa+kI1TYV42P
	diQOxUUMb+;
Authentication-Results: sj-dkim-2; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim2002 verified; ); 
Cc: 'Cullen Jennings' <fluffy@cisco.com>, 'SIP IETF' <sip@ietf.org>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>, "'Elwell,
	John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 

> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
> Behalf Of Eric Rescorla
> Sent: Tuesday, August 05, 2008 1:48 PM
> To: Dan Wing
> Cc: 'Cullen Jennings'; 'Uzelac,Adam'; 'SIP IETF'; 'Elwell, John'
> Subject: Re: [Sip] Thoughts on SIP Identity issues
> 
> >At Tue, 5 Aug 2008 10:26:26 -0700,
> Dan Wing wrote:
> > 
> > > -----Original Message-----
> > > From: Eric Rescorla [mailto:ekr@networkresonance.com] 
> > > Sent: Tuesday, August 05, 2008 9:11 AM
> > > To: Dan Wing
> > > Cc: 'Eric Rescorla'; 'Elwell, John'; 'Hadriel Kaplan'; 
> > > 'Jonathan Rosenberg'; 'Cullen Jennings'; 'SIP IETF'; 
> 'Uzelac, Adam'
> > > Subject: Re: [Sip] Thoughts on SIP Identity issues
> > > 
> > > At Tue, 5 Aug 2008 08:54:16 -0700,
> > > Dan Wing wrote:
> > > > > I haven't spent a long time examining 
> > > > > draft-kaplan-sip-baiting, but as
> > > > > I recall, it's not the fault of 4474 failing to sign 
> > > > > something that
> > > > > it should have but rather that it's inherent in the 
> > > > > message-oriented 
> > > > > nature of SIP.
> > > > 
> > > > That distinction is not relevant to the victim.
> > > 
> > > No, the distinction is relevant to the people responsible for 
> > > technically addressing the issue, namely us.
> > 
> > My interpretation of what you are saying is "SIP is message-
> > oriented, so SIP is vulnerable to baiting as described in
> > draft-kaplan-sip-baiting, and we can't fix it".  
> > 
> > I don't know if that is what you intended to say; if not, 
> > please clarify.
> 
> What I'm saying is that a message-oriented system like SIP inherently
> has replay attacks. If you want to remove replay attacks, you'll
> need to do it at a separate layer.

And both draft-fischer-sip-e2e-sec-media and draft-wing-sip-identity-media
provide the security at a separate layer:  the media layer.

> > > I don't actually think this characterization of 4474 is 
> that accurate.
> > > RFC 4474 does not use the IP address for authenticating the media.
> > > Rather, it authenticates the IP address as well as the rest of the
> > > SDP 
> > 
> > Which draft-kaplan-sip-baiting shows is insufficient at its intended
> > purpose.
> 
> Well, I guess that's one interpretation, but it's not mine.

Yes, I understand it is not your view.

-d


> -Ekr
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 20:20:03 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8BC0C3A6B37;
	Tue,  5 Aug 2008 20:20:03 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C0E6E3A69C9
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 20:20:02 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XrxJxZ8InTLi for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 20:20:01 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id 88F7D3A6982
	for <sip@ietf.org>; Tue,  5 Aug 2008 20:19:54 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,314,1215388800"; d="scan'208";a="136275224"
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-6.cisco.com with ESMTP; 06 Aug 2008 03:20:25 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m763KPmD024862; 
	Tue, 5 Aug 2008 20:20:25 -0700
Received: from [128.107.147.191] ([128.107.147.191])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m763KPrB020080;
	Wed, 6 Aug 2008 03:20:25 GMT
Message-ID: <4899187C.9020106@cisco.com>
Date: Tue, 05 Aug 2008 20:20:28 -0700
From: Anders Kristensen <andersk@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2643; t=1217992825;
	x=1218856825; c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=andersk@cisco.com;
	z=From:=20Anders=20Kristensen=20<andersk@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Inadequate=20Requirements=20for
	=20draft-ietf-sip-199-00 |Sender:=20;
	bh=zuf5UBfhPOIWGxTjYDD8SH3jnJU7hHqvCvYwViKyHS8=;
	b=A2kKtgvequ7Kh8Hd6KV6NmpmsEip9A8LVjU1LaXvov6yw2i4By2P266Drn
	CQYR8waIIEXB+QlRQaRGuYLomF7jiSIc0cj+6qVS/g40BkWdR+HQ0D3jK/Oy
	kXBBm3XUgovqjOn8EkPSlP0+BujnJ/2h5Ea+yFBPRqe9403cFN4Aw=;
Authentication-Results: sj-dkim-1; header.From=andersk@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I don't think it's just about releasing resources like memory. In fact, 
the draft does mention that it can help a UAC determine when to start 
rendering a different (early) audio stream. That seems pretty useful.

That said, I'm sure we're all in favor of simplicity and reuse of mechanism.

Thanks,
Anders

Francois Audet wrote:
> All I am saying is that this solution seems to be to try to address a 
> problem that is too narrow to justify the complexity and extra protocol
> in this draft, and that the problem is not described properly in the draft.
> 
> If it helped with something else (like HEFP), then perhaps it would be useful.
> 
> I have heard in Dublin from Robert Sparks that "something else" (with no
> details on what he has in mind) would be better to solve HERFP.
> 
> This is getting me extremely worried that we are jumping ahead too fast
> on this 199 proposal, without a clear direction of where HERFP will take us.
> 
> To answer Keith's question: the whole introduction in Christer's draft 
> (except the very last paragraph about undefined "saved resources") 
> describes what the HERFP problem is, i.e., that when forking occurs,
> final responses are not passed to the UAC and it causes problems. That
> is what HERFP is.
> 
> I see it as very disingeneous that we are pretending that this has
> nothing to do with HERFP when it very is clearly related to it.
> 
>> -----Original Message-----
>> From: Christer Holmberg [mailto:christer.holmberg@ericsson.com] 
>> Sent: Tuesday, August 05, 2008 10:49
>> To: Audet, Francois (SC100:3055); DRAGE, Keith (Keith); sip@ietf.org
>> Subject: VS: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
>>
>>
>> Hi Francois,
>>
>> Nobody has said we will not work on solving the HERPF problem 
>> - potentially using 199. We only agreed not to do it as part of 199.
>>
>> You are welcome to draft a proposal, and at least I would be 
>> very interested in working on that.  
>>
>> Reading the use-cases, I think you will see that it's not 
>> only about "freeing up some RAM". It can be  used for 
>> network/bandwidth/media type-of resources.
>>
>> It MAY also be part of a future solution for the 
>> forking-and-early-media solution, in cases where you can 
>> assoicate media with dialogs etc.  
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 20:53:03 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 947433A6B12;
	Tue,  5 Aug 2008 20:53:03 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 433E33A6ADF
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 20:53:02 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.638
X-Spam-Level: 
X-Spam-Status: No, score=-0.638 tagged_above=-999 required=5
	tests=[AWL=-0.143, BAYES_00=-2.599, FH_RELAY_NODNS=1.451,
	HELO_MISMATCH_COM=0.553, RDNS_NONE=0.1]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id H7rJdsxFN333 for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 20:53:01 -0700 (PDT)
Received: from kilo.rtfm.com (unknown [74.95.2.169])
	by core3.amsl.com (Postfix) with ESMTP id 6CF953A6AC2
	for <sip@ietf.org>; Tue,  5 Aug 2008 20:53:01 -0700 (PDT)
Received: from kilo-2.local (localhost [127.0.0.1])
	by kilo.rtfm.com (Postfix) with ESMTP id C83C95263F1;
	Tue,  5 Aug 2008 20:53:33 -0700 (PDT)
Date: Tue, 05 Aug 2008 20:53:33 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: "Dan Wing" <dwing@cisco.com>
In-Reply-To: <157a01c8f73d$e4a2cf40$c2f0200a@cisco.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
	<20080805145945.5B61650846@romeo.rtfm.com>
	<02b801c8f70b$675fed60$c2f0200a@cisco.com>
	<20080805151333.DDB5350846@romeo.rtfm.com>
	<038e01c8f713$84e3cca0$c2f0200a@cisco.com>
	<20080805161109.ABB8F50846@romeo.rtfm.com>
	<053c01c8f720$647c21d0$c2f0200a@cisco.com>
	<20080805204756.A7DC0524DAD@kilo.rtfm.com>
	<157a01c8f73d$e4a2cf40$c2f0200a@cisco.com>
User-Agent: Wanderlust/2.15.5 (Almost Unreal) Emacs/22.1 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080806035333.C83C95263F1@kilo.rtfm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, 'SIP IETF' <sip@ietf.org>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>, "'Elwell,
	John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

At Tue, 5 Aug 2008 13:57:34 -0700,
Dan Wing wrote:
> > What I'm saying is that a message-oriented system like SIP inherently
> > has replay attacks. If you want to remove replay attacks, you'll
> > need to do it at a separate layer.
> 
> And both draft-fischer-sip-e2e-sec-media and draft-wing-sip-identity-media
> provide the security at a separate layer:  the media layer.

Unfortunately, this is the same conflation of concerns that has
characterized discussion of these drafts from the beginning. Quoting
my review of -01 from 2007/11:

  This draft seems to do two distinct things:
  
  - One specify a variant of RFC 4474 which signs a lot fewer headers.
    [This should have said less of the message -- EKR]
  - Specify a set of mechanisms to cryptographically prove that a given media
    stream corresponds to a given SDP offer/answer.

These issues are wholly orthogonal and it just confuses the discussion
to try to discuss them together. If the WG thinks it's important to
prevent the Baiting attack then we can discuss mechanisms for that.
However, I'd note that I didn't see anyone arguing for that in Dublin,
so I question whether it is in fact something people care about
much. [For my part, I don't think that it's important to do so in the
absence of DTLS-SRTP, where it's more or less automatically blocked.]
However, those mechanisms can be introduced without modifying the
procedures of RFC 4474.

This brings us back to the idea of exempting more of the message
from the signature, which would require modifications to RFC 4474.
Again, this may (or may not) be something we need to do, but I
don't see that the Baiting attack is an argument for doing so.
(Though I would note that removing some properties of the message,
such as Call-Id, from the signature, will probably make replay
attacks easier to mount).

-Ekr
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug  5 23:14:00 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CF2D93A6837;
	Tue,  5 Aug 2008 23:14:00 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D9EDF3A6837
	for <sip@core3.amsl.com>; Tue,  5 Aug 2008 23:13:59 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.919
X-Spam-Level: 
X-Spam-Status: No, score=-5.919 tagged_above=-999 required=5
	tests=[AWL=-0.270, BAYES_00=-2.599, HELO_EQ_SE=0.35,
	J_CHICKENPOX_33=0.6, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ylWXcNKWmhlP for <sip@core3.amsl.com>;
	Tue,  5 Aug 2008 23:13:59 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id B43EB3A67B4
	for <sip@ietf.org>; Tue,  5 Aug 2008 23:13:57 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	B5B5F213CF; Wed,  6 Aug 2008 08:14:28 +0200 (CEST)
X-AuditID: c1b4fb3e-ad196bb000004ec0-7c-48994144a277
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	82AB720579; Wed,  6 Aug 2008 08:14:28 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 08:14:26 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 08:14:25 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0750AE0F@esealmw113.eemea.ericsson.se>
In-Reply-To: <C7FFFFDD779F2047A0FBAC811C5C5A00067CA3AE@xmb-rtp-201.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Should early dialogs be dropped when 2xx is received???
thread-index: Acj3Ba+wtUWqHcxbQlS9a4ahwvdsBwAAXXIAAAKHwYAAHoOWIA==
References: <E6C2E8958BA59A4FB960963D475F7AC30F0534BE1E@mail.acmepacket.com>
	<C7FFFFDD779F2047A0FBAC811C5C5A00067CA3AE@xmb-rtp-201.amer.cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Sanjay Sinha (sanjsinh)" <sanjsinh@cisco.com>,
	"Bob Penfield" <BPenfield@acmepacket.com>,
	"Paul Kyzivat (pkyzivat)" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 06:14:26.0591 (UTC)
	FILETIME=[ADA5FAF0:01C8F78B]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Should early dialogs be dropped when 2xx is received???
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi, 

>>The UAC core considers the INVITE transaction completed 64*T1 seconds
>>after the reception of the first 2xx response.  At this point all 
>>the early dialogs that have not transitioned to established dialogs
are
>>terminated.  Once the INVITE transaction is considered completed by
>>the UAC core, no more new 2xx responses are expected to arrive.
>
>>Thus the other early dialogs will linger for 64*T1 seconds.
>
>Right, this is true if the UAC wants to have multiple final dialogs.
>
>If it does not, then I do not think the UAC has to wait for 64*T1
seconds. It can terminate early dialogs by sending a BYE with
appropriate to-tag corresponding to the early dialog leg, that it 
>wants to terminate.

Correct. Or, it could keep enough state in order to send ACK+BYE if/when
it receives additional 200 OK responses (which I think is going to be
quite rare in the first place).

Regards,

Christer




>If the UAC does destroy all the other early dialogs, then it would need

>to be able to handle any additional 2xx responses for unknown dialogs, 
>presumably by sending an ACK immediately followed by a BYE. This is 
>really the same case as an additional 2xx response arriving for a brand

>new dialog (i.e.
>the UAC never received a 1xx).
>
>cheers,
>(-:bob
>
>-----Original Message-----
>From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of 
>Paul Kyzivat
>Sent: Tuesday, August 05, 2008 10:16 AM
>To: Christer Holmberg
>Cc: SIP IETF
>Subject: [Sip] Should early dialogs be dropped when 2xx is received???
>
>The following in the discussion of 199 issues reminded me of a question

>I have had for a long time. I'm changing the subject because it isn't 
>directly pertinent to the 199 discussion.
>
>Christer Holmberg wrote:
>
>> What I mean to say is that when the UAC receives a final
>response for
>> an early dialog it normally releases all other early dialogs
>(the UAC
>> should of course still be ready to accept 200 OK responses for other 
>> dialogs).
>
>This has always been a fuzzy area to me. If the UAC is prepared to 
>retain multiple final dialogs if they happen, is it still expected to 
>release early dialog state for other dialogs when it receives the first

>2xx? That could mean that subsequent 2xx responses can't be turned into

>viable dialogs because state has been lost. (E.g. if preconditions were

>being negotiated during the early dialog.)
>
>Shouldn't the rule be that *if* the UAC is only intending to retain the

>first final dialog then it should/may abandon all other early dialogs 
>when it receives a 2xx, but if it might want to keep additional dialogs

>if additional 2xx responses are received, then it ought not drop the 
>early dialogs?
>
>        Thanks,
>        Paul
>
>_______________________________________________
>Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>This list is for NEW development of the core SIP Protocol Use 
>sip-implementors@cs.columbia.edu for questions on current sip Use 
>sipping@ietf.org for new developments on the application of sip 
>_______________________________________________
>Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>This list is for NEW development of the core SIP Protocol Use 
>sip-implementors@cs.columbia.edu for questions on current sip Use 
>sipping@ietf.org for new developments on the application of sip
>
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 04:08:36 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 37C683A6BE4;
	Wed,  6 Aug 2008 04:08:36 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 76A753A6BCF
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 04:08:34 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.849
X-Spam-Level: 
X-Spam-Status: No, score=-5.849 tagged_above=-999 required=5 tests=[AWL=0.400, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id O87Wjrke23aW for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 04:08:33 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 280C53A6BD8
	for <sip@ietf.org>; Wed,  6 Aug 2008 04:08:33 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	B8AC221108; Wed,  6 Aug 2008 13:08:38 +0200 (CEST)
X-AuditID: c1b4fb3e-a5e7fbb000007a96-37-489986360f99
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	9C219207BD; Wed,  6 Aug 2008 13:08:38 +0200 (CEST)
Received: from esealmw118.eemea.ericsson.se ([153.88.200.77]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 13:08:38 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 13:09:46 +0200
Message-ID: <C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
In-Reply-To: <489861C9.2020507@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-199-00.txt
Thread-Index: Acj3tO+CP5e9NGXNQbeWCfvcROfQVg==
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
	<489861C9.2020507@cisco.com>
From: "Ian Elz" <ian.elz@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Christer Holmberg" <christer.holmberg@ericsson.com>
X-OriginalArrivalTime: 06 Aug 2008 11:08:38.0307 (UTC)
	FILETIME=[C6E41730:01C8F7B4]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Paul,

I don't believe that you can create 'multiple early dialog usages'.

On an INVITE transaction can create an early dialog. The other dialog
creating transactions REFER and SUBSCRIBE, can only create established
dialogs.

As you cannot start a second INVITE transaction while there is an
outstanding INVITE transaction on a dialog, early or otherwise.

If you send a REFER or SUBSCRIBE method on an early dialog and you get
an acceptance response then you have an established dialog.

If this is the early-dialog from an INVITE transaction then key question
is what is the validity of a provisional response in creating a dialog.
Is it early or established. While the provisional response is clearly
just that from a transaction perspective in this situation the meaning
of the proposed 199 provisional response is now transaction affecting
and not dialog affecting, i.e. the INVITE usage will not become
established although the other usage may be established.

The existing state models in sip only discuss dialogs and transactions
and have not considered the dialog usage. When you send a reliable
provisional response to an INVITE you are in effect creating an
early-dialog usage. If this is the only dialog usage on the dialog you
have also created an early-dialog. If there is another usage on the same
dialog then the dialog state will depend upon the state of the other
dialog.

RFC5057, Multiple Dialog Usage (informational) does not discuss the
details involved in multiple usages and the impact on the sip state
models but I hope that this was a consideration when the initial drafts
were prepared. 

I am unsure if the concept of multiple usages on an early dialog was
ever considered when RFC5057 was in draft stage. The nuances of multiple
dialogs on an established dialog appears to have been enough to suggest
that the RFC specifically not recommend multiple usages without getting
into the 'dark area' of early dialogs and multiple usages.

Whether it make sense to use a REFER or SUBSCRIBE inside an early dialog
is problematic. I am unsure whether these do make any sense. Would you
want to subscribe to specific event which occurs during the early dialog
phase of an INVITE transaction? Would you want to use REFER to perform a
transfer of a ringing call and does the protocol actually support this?

If the answer to these questions is a definitive 'NO' then the issue
will have resolves itself. I fear however that there is no definitive
answer at this time.

Ian Elz

System Manager
DUCI LDC UK
(Lucid Duck)

Office: + 44 24 764 35256
gsm: +44 7801723668
ian.elz@ericsson.com


-----Original Message-----
From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
Sent: 05 August 2008 15:21
To: Christer Holmberg
Cc: SIP IETF
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt



Christer Holmberg wrote:
> Hi, 
> 
>>> 7) Section 7: "A UAC that receives a 199 response for an early
dialog
> MUST NOT
>>> send any further requests on that dialog...". Can you point to any
> list discussion
>>> around this requirement? I think there's some danger to consider
> there. At the
>>> very least we need to make this statement multiple-usage safe.
>> This is a very good catch. This needs to be aligned with dialogusage.
> If the 199 contained the final response that triggered it, then that
> final response could be used to determine the impact 
>> on the dialog or dialog usage or just the transaction. But if the 199
> doesn't contain the final response, then this is a problem.
> 
> I forgot to bring this issue up in Dublin. Sorry for that.
> 
> First, we need to remember that the UAS may terminate every
dialogusage
> when sending the final response (depending on what final response is
> sent), without the UAC knowing it. And, due to the forking rules, the
> final response which is sent to the UAC may not even be the same which
> was sent by the UAS, if a final response from another UAS is chosen as
> the "best".
> 
> Second, we need to remember that this only affects early-dialogusages.
> 
> If needed, I guess we could include the final response which triggered
> the 199, but we could also simply say that if the UAC does not know to
> which dialogusage (if there are many) the 199 applies, it should not
do
> anything which may affect other usages for the same early dialog.

The establishment of multiple early dialog usages is a pretty strange 
thing. Do we know of any use cases for this? (E.g. an in-dialog REFER on

an early INVITE. Is that legal?)

Assuming it can arise, then I agree it is reasonable to treat the 199 as

affecting only its dialog usage unless there is info with it (such as 
the actual final response code) that gives evidence that the whole 
dialog is gone.

	Thanks,
	Paul

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 04:57:48 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 218BF3A67D4;
	Wed,  6 Aug 2008 04:57:48 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F056628C2E6
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 04:57:46 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.524
X-Spam-Level: 
X-Spam-Status: No, score=-6.524 tagged_above=-999 required=5 tests=[AWL=0.075, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id osijJbLeLnEz for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 04:57:46 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id 174F928C0FC
	for <sip@ietf.org>; Wed,  6 Aug 2008 04:57:46 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,314,1215388800"; d="scan'208";a="136424140"
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 06 Aug 2008 11:58:13 +0000
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m76BwBM8009268; 
	Wed, 6 Aug 2008 04:58:11 -0700
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m76BwAdC021118;
	Wed, 6 Aug 2008 11:58:11 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 07:58:09 -0400
Received: from [10.86.249.210] ([10.86.249.210]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 07:58:09 -0400
Message-ID: <48999208.3030602@cisco.com>
Date: Wed, 06 Aug 2008 07:59:04 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Anders Kristensen <andersk@cisco.com>
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com>
In-Reply-To: <4899187C.9020106@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 11:58:09.0557 (UTC)
	FILETIME=[B1E4DC50:01C8F7BB]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=3453; t=1218023891;
	x=1218887891; c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Inadequate=20Requirements=20for
	=20draft-ietf-sip-199-00 |Sender:=20;
	bh=xcKXYyVeoB0p2/N7zxPrP53izjrnQ26u0HLXfcQstLQ=;
	b=fyvQu+z19VABPd4FKkH1Ilu15DUMVZLkTusyzr1eAqUOvBqW1gEZkWwRt8
	pqHMXVGtP8GOPMG1WZKPH+byLTgczAU+JdPYYMPNZt1qR8pKJEz1kYG95VA+
	jmtrxlcZPB;
Authentication-Results: sj-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim2002 verified; ); 
Cc: sip@ietf.org, Francois Audet <audet@nortel.com>, "DRAGE,
	Keith \(Keith\)" <drage@alcatel-lucent.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Anders Kristensen wrote:
> I don't think it's just about releasing resources like memory. In fact, 
> the draft does mention that it can help a UAC determine when to start 
> rendering a different (early) audio stream. That seems pretty useful.

I don't see how that would work. As it is there is really no general way 
to distinguish which early signaling session a given incoming media 
stream corresponds to. In any case, one would expect that media would 
not be sent by an early session that has been terminated. When you stop 
receiving media from one source you should start rendering something else.

	Thanks,
	Paul

> That said, I'm sure we're all in favor of simplicity and reuse of 
> mechanism.
> 
> Thanks,
> Anders
> 
> Francois Audet wrote:
>> All I am saying is that this solution seems to be to try to address a 
>> problem that is too narrow to justify the complexity and extra protocol
>> in this draft, and that the problem is not described properly in the 
>> draft.
>>
>> If it helped with something else (like HEFP), then perhaps it would be 
>> useful.
>>
>> I have heard in Dublin from Robert Sparks that "something else" (with no
>> details on what he has in mind) would be better to solve HERFP.
>>
>> This is getting me extremely worried that we are jumping ahead too fast
>> on this 199 proposal, without a clear direction of where HERFP will 
>> take us.
>>
>> To answer Keith's question: the whole introduction in Christer's draft 
>> (except the very last paragraph about undefined "saved resources") 
>> describes what the HERFP problem is, i.e., that when forking occurs,
>> final responses are not passed to the UAC and it causes problems. That
>> is what HERFP is.
>>
>> I see it as very disingeneous that we are pretending that this has
>> nothing to do with HERFP when it very is clearly related to it.
>>
>>> -----Original Message-----
>>> From: Christer Holmberg [mailto:christer.holmberg@ericsson.com] Sent: 
>>> Tuesday, August 05, 2008 10:49
>>> To: Audet, Francois (SC100:3055); DRAGE, Keith (Keith); sip@ietf.org
>>> Subject: VS: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
>>>
>>>
>>> Hi Francois,
>>>
>>> Nobody has said we will not work on solving the HERPF problem - 
>>> potentially using 199. We only agreed not to do it as part of 199.
>>>
>>> You are welcome to draft a proposal, and at least I would be very 
>>> interested in working on that. 
>>> Reading the use-cases, I think you will see that it's not only about 
>>> "freeing up some RAM". It can be  used for network/bandwidth/media 
>>> type-of resources.
>>>
>>> It MAY also be part of a future solution for the 
>>> forking-and-early-media solution, in cases where you can assoicate 
>>> media with dialogs etc.  
>> _______________________________________________
>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 05:07:04 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A9ADF3A6C0A;
	Wed,  6 Aug 2008 05:07:04 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E5DA428C2C4
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 05:07:02 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.208
X-Spam-Level: 
X-Spam-Status: No, score=-6.208 tagged_above=-999 required=5 tests=[AWL=0.041, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 32z8Uk9VREV9 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 05:07:01 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 9ABD63A6ACB
	for <sip@ietf.org>; Wed,  6 Aug 2008 05:06:59 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	0801521551; Wed,  6 Aug 2008 14:07:32 +0200 (CEST)
X-AuditID: c1b4fb3e-a6680bb000007a96-df-489994033dcc
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	D07C0211E6; Wed,  6 Aug 2008 14:07:31 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 14:07:31 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 14:07:30 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
In-Reply-To: <48999208.3030602@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
thread-index: Acj3u7iycdG1u1Z7SweRrMNeQhW48gAAJoMQ
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com> <48999208.3030602@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Anders Kristensen" <andersk@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 12:07:31.0697 (UTC)
	FILETIME=[00F49E10:01C8F7BD]
X-Brightmail-Tracker: AAAAAA==
Cc: sip@ietf.org, Francois Audet <audet@nortel.com>, "DRAGE,
	Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi, 

>>I don't think it's just about releasing resources like memory. In
fact, the draft does mention that it can help a UAC determine when to 
>>start rendering a different (early) audio stream. That seems pretty
useful.
>
>I don't see how that would work. As it is there is really no general
way to distinguish which early signaling session a given incoming media
stream corresponds to. In any case, one would expect 
>that media would not be sent by an early session that has been
terminated. When you stop receiving media from one source you should
start rendering something else.

Just because you stop receiving media it doesn't automatically mean the
dialog is terminated, or that you would want to start listening to
another stream. There may simply be a pause.

I DO agree, however, that there is currently no general way to associate
media with dialogs. In cases where you have security associations for
the media it may be possible, however (I am no expert on that, though).

But, the how-to-associate-media-with-dialogs has also been discussed
every now and then, and there seems to be interest among people (both in
IETF and other SDOs) to start working on a general solution. But, that
work would also be outside the scope of 199 (I guess it wouldn't
necessarily even be done in SIP/SIPPING - at least not without
involvement of other groups).

Regards,

Christer






> That said, I'm sure we're all in favor of simplicity and reuse of 
> mechanism.
> 
> Thanks,
> Anders
> 
> Francois Audet wrote:
>> All I am saying is that this solution seems to be to try to address a

>> problem that is too narrow to justify the complexity and extra 
>> protocol in this draft, and that the problem is not described 
>> properly in the draft.
>>
>> If it helped with something else (like HEFP), then perhaps it would 
>> be useful.
>>
>> I have heard in Dublin from Robert Sparks that "something else" (with

>> no details on what he has in mind) would be better to solve HERFP.
>>
>> This is getting me extremely worried that we are jumping ahead too 
>> fast on this 199 proposal, without a clear direction of where HERFP 
>> will take us.
>>
>> To answer Keith's question: the whole introduction in Christer's 
>> draft (except the very last paragraph about undefined "saved 
>> resources") describes what the HERFP problem is, i.e., that when 
>> forking occurs, final responses are not passed to the UAC and it 
>> causes problems. That is what HERFP is.
>>
>> I see it as very disingeneous that we are pretending that this has 
>> nothing to do with HERFP when it very is clearly related to it.
>>
>>> -----Original Message-----
>>> From: Christer Holmberg [mailto:christer.holmberg@ericsson.com]
Sent: 
>>> Tuesday, August 05, 2008 10:49
>>> To: Audet, Francois (SC100:3055); DRAGE, Keith (Keith); sip@ietf.org
>>> Subject: VS: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
>>>
>>>
>>> Hi Francois,
>>>
>>> Nobody has said we will not work on solving the HERPF problem - 
>>> potentially using 199. We only agreed not to do it as part of 199.
>>>
>>> You are welcome to draft a proposal, and at least I would be very 
>>> interested in working on that.
>>> Reading the use-cases, I think you will see that it's not only about

>>> "freeing up some RAM". It can be  used for network/bandwidth/media 
>>> type-of resources.
>>>
>>> It MAY also be part of a future solution for the 
>>> forking-and-early-media solution, in cases where you can assoicate 
>>> media with dialogs etc.
>> _______________________________________________
>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol Use 
>> sip-implementors@cs.columbia.edu for questions on current sip Use 
>> sipping@ietf.org for new developments on the application of sip
>>
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use 
> sip-implementors@cs.columbia.edu for questions on current sip Use 
> sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 05:24:27 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 274B228C158;
	Wed,  6 Aug 2008 05:24:27 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BF12228C158
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 05:24:25 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.539
X-Spam-Level: 
X-Spam-Status: No, score=-6.539 tagged_above=-999 required=5 tests=[AWL=0.060, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OsgMcP-Qi5+4 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 05:24:24 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 2FF1D3A6C2A
	for <sip@ietf.org>; Wed,  6 Aug 2008 05:24:24 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,314,1215388800"; d="scan'208";a="16626443"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 06 Aug 2008 12:24:30 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m76COUpj013934; 
	Wed, 6 Aug 2008 08:24:30 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m76COUKA022426;
	Wed, 6 Aug 2008 12:24:30 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 08:24:30 -0400
Received: from [10.86.249.210] ([10.86.249.210]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 08:24:29 -0400
Message-ID: <48999834.4080304@cisco.com>
Date: Wed, 06 Aug 2008 08:25:24 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Ian Elz <ian.elz@ericsson.com>
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
	<489861C9.2020507@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
In-Reply-To: <C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
X-OriginalArrivalTime: 06 Aug 2008 12:24:30.0000 (UTC)
	FILETIME=[5FE95300:01C8F7BF]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=5858; t=1218025470;
	x=1218889470; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Comments=20on=20draft-ietf-sip-
	199-00.txt |Sender:=20
	|To:=20Ian=20Elz=20<ian.elz@ericsson.com>;
	bh=MI+pdrR4KiNbtLcHUzR2kWDWwD/vAe4Lpm24Q1lhCHM=;
	b=p/oOhldmAkwuH3xvC5Q/Cf7KOV2hRL44VRfpzAusYkBxmlZTQYvTttMQg8
	KIMNgJ5XbtMMErqTryh889vR6H8S2YNa3DwDd/uRzszRXKJWac5qyrkVnV2Y
	f/3mheqgxC;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <sip@ietf.org>, Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Ian Elz wrote:
> Paul,
> 
> I don't believe that you can create 'multiple early dialog usages'.
> 
> On an INVITE transaction can create an early dialog. The other dialog
> creating transactions REFER and SUBSCRIBE, can only create established
> dialogs.
> 
> As you cannot start a second INVITE transaction while there is an
> outstanding INVITE transaction on a dialog, early or otherwise.
> 
> If you send a REFER or SUBSCRIBE method on an early dialog and you get
> an acceptance response then you have an established dialog.

Agreed. I should have pointed that out.

However, the issue arises if you can get an early invite dialog usage 
with a confirmed dialog usage. In that case one must be careful with the 
rules to ensure that you don't accidentally terminate the confirmed 
usage as a side effect of processing the 199 on the early invite dialog 
usage.

> If this is the early-dialog from an INVITE transaction then key question
> is what is the validity of a provisional response in creating a dialog.
> Is it early or established. While the provisional response is clearly
> just that from a transaction perspective in this situation the meaning
> of the proposed 199 provisional response is now transaction affecting
> and not dialog affecting, i.e. the INVITE usage will not become
> established although the other usage may be established.
> 
> The existing state models in sip only discuss dialogs and transactions
> and have not considered the dialog usage. When you send a reliable
> provisional response to an INVITE you are in effect creating an
> early-dialog usage. If this is the only dialog usage on the dialog you
> have also created an early-dialog. If there is another usage on the same
> dialog then the dialog state will depend upon the state of the other
> dialog.

IMO there really shouldn't be any "early dialog", ever. The dialog comes 
into existence, and departs, based on the existence of at least one 
usage. The dialog is the same whether the usages are early or late, or a 
combination.

I agree that it would be helpful to recast all the state machines in 
terms of dialog usages rather than dialogs. Maybe that is a job for the 
draft standard version of 3261.

> RFC5057, Multiple Dialog Usage (informational) does not discuss the
> details involved in multiple usages and the impact on the sip state
> models but I hope that this was a consideration when the initial drafts
> were prepared. 
> 
> I am unsure if the concept of multiple usages on an early dialog was
> ever considered when RFC5057 was in draft stage. The nuances of multiple
> dialogs on an established dialog appears to have been enough to suggest
> that the RFC specifically not recommend multiple usages without getting
> into the 'dark area' of early dialogs and multiple usages.
> 
> Whether it make sense to use a REFER or SUBSCRIBE inside an early dialog
> is problematic. I am unsure whether these do make any sense. Would you
> want to subscribe to specific event which occurs during the early dialog
> phase of an INVITE transaction? Would you want to use REFER to perform a
> transfer of a ringing call and does the protocol actually support this?
> 
> If the answer to these questions is a definitive 'NO' then the issue
> will have resolves itself. I fear however that there is no definitive
> answer at this time.

Right.

	Paul

> Ian Elz
> 
> System Manager
> DUCI LDC UK
> (Lucid Duck)
> 
> Office: + 44 24 764 35256
> gsm: +44 7801723668
> ian.elz@ericsson.com
> 
> 
> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> Sent: 05 August 2008 15:21
> To: Christer Holmberg
> Cc: SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
> 
> 
> 
> Christer Holmberg wrote:
>> Hi, 
>>
>>>> 7) Section 7: "A UAC that receives a 199 response for an early
> dialog
>> MUST NOT
>>>> send any further requests on that dialog...". Can you point to any
>> list discussion
>>>> around this requirement? I think there's some danger to consider
>> there. At the
>>>> very least we need to make this statement multiple-usage safe.
>>> This is a very good catch. This needs to be aligned with dialogusage.
>> If the 199 contained the final response that triggered it, then that
>> final response could be used to determine the impact 
>>> on the dialog or dialog usage or just the transaction. But if the 199
>> doesn't contain the final response, then this is a problem.
>>
>> I forgot to bring this issue up in Dublin. Sorry for that.
>>
>> First, we need to remember that the UAS may terminate every
> dialogusage
>> when sending the final response (depending on what final response is
>> sent), without the UAC knowing it. And, due to the forking rules, the
>> final response which is sent to the UAC may not even be the same which
>> was sent by the UAS, if a final response from another UAS is chosen as
>> the "best".
>>
>> Second, we need to remember that this only affects early-dialogusages.
>>
>> If needed, I guess we could include the final response which triggered
>> the 199, but we could also simply say that if the UAC does not know to
>> which dialogusage (if there are many) the 199 applies, it should not
> do
>> anything which may affect other usages for the same early dialog.
> 
> The establishment of multiple early dialog usages is a pretty strange 
> thing. Do we know of any use cases for this? (E.g. an in-dialog REFER on
> 
> an early INVITE. Is that legal?)
> 
> Assuming it can arise, then I agree it is reasonable to treat the 199 as
> 
> affecting only its dialog usage unless there is info with it (such as 
> the actual final response code) that gives evidence that the whole 
> dialog is gone.
> 
> 	Thanks,
> 	Paul
> 
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 06:50:02 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4F1E13A6C4B;
	Wed,  6 Aug 2008 06:50:02 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D726C3A69FC
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 06:50:00 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.949
X-Spam-Level: 
X-Spam-Status: No, score=-6.949 tagged_above=-999 required=5 tests=[AWL=1.300, 
	BAYES_00=-2.599, GB_I_INVITATION=-2, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hwFFXRy2SPCf for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 06:49:59 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 60C1F3A6BD0
	for <sip@ietf.org>; Wed,  6 Aug 2008 06:49:35 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	9832320FAE; Wed,  6 Aug 2008 15:50:07 +0200 (CEST)
X-AuditID: c1b4fb3e-a7682bb000007a96-b0-4899ac0f4257
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	71B67204D8; Wed,  6 Aug 2008 15:50:07 +0200 (CEST)
Received: from esealmw118.eemea.ericsson.se ([153.88.200.77]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 15:50:07 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 15:51:15 +0200
Message-ID: <C0E80510684FE94DBDE3A4AF6B968D2D03DBB10D@esealmw118.eemea.ericsson.se>
In-Reply-To: <48999834.4080304@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-199-00.txt
Thread-Index: Acj3v2R48sWHCOnUR/W0C8eoM5EngwACP3AQ
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
	<489861C9.2020507@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
	<48999834.4080304@cisco.com>
From: "Ian Elz" <ian.elz@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 13:50:07.0024 (UTC)
	FILETIME=[55D0FB00:01C8F7CB]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>, Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Paul,

I only included 'early dialog' as this is the term that is already used.

We cannot criticize RFC 3261 for this as when it was written INVITE was
the ONLY dialog creating transaction.

Should some input be given to Robert Sparks' invfix draft as it is
proposing corrections to the INVITE transaction state machines. 

Based on the  existing draft (-02) sending or receiving a 1xx response
places the transaction in the 'proceeding' state which is does not exit
until a final response has been sent or received, or I assume the
dialog/usage terminates.

If we retain the state model of proposed in invfix then the 199 response
should be treated as an invitation to the UAC to terminate the early
dialog usage with a BYE method. If this does not happen the transaction
will remain as 'proceeding' and the early dialog usage may also remain.

The alternative is to modify the proposed transaction state models for
special handling for the 199 response. This is something which I am not
sure that I would favour.

Ian Elz

System Manager
DUCI LDC UK
(Lucid Duck)

Office: + 44 24 764 35256
gsm: +44 7801723668
ian.elz@ericsson.com


-----Original Message-----
From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
Sent: 06 August 2008 13:25
To: Ian Elz
Cc: Christer Holmberg; SIP IETF
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt



Ian Elz wrote:
> Paul,
> 
> I don't believe that you can create 'multiple early dialog usages'.
> 
> On an INVITE transaction can create an early dialog. The other dialog
> creating transactions REFER and SUBSCRIBE, can only create established
> dialogs.
> 
> As you cannot start a second INVITE transaction while there is an
> outstanding INVITE transaction on a dialog, early or otherwise.
> 
> If you send a REFER or SUBSCRIBE method on an early dialog and you get
> an acceptance response then you have an established dialog.

Agreed. I should have pointed that out.

However, the issue arises if you can get an early invite dialog usage 
with a confirmed dialog usage. In that case one must be careful with the

rules to ensure that you don't accidentally terminate the confirmed 
usage as a side effect of processing the 199 on the early invite dialog 
usage.

> If this is the early-dialog from an INVITE transaction then key
question
> is what is the validity of a provisional response in creating a
dialog.
> Is it early or established. While the provisional response is clearly
> just that from a transaction perspective in this situation the meaning
> of the proposed 199 provisional response is now transaction affecting
> and not dialog affecting, i.e. the INVITE usage will not become
> established although the other usage may be established.
> 
> The existing state models in sip only discuss dialogs and transactions
> and have not considered the dialog usage. When you send a reliable
> provisional response to an INVITE you are in effect creating an
> early-dialog usage. If this is the only dialog usage on the dialog you
> have also created an early-dialog. If there is another usage on the
same
> dialog then the dialog state will depend upon the state of the other
> dialog.

IMO there really shouldn't be any "early dialog", ever. The dialog comes

into existence, and departs, based on the existence of at least one 
usage. The dialog is the same whether the usages are early or late, or a

combination.

I agree that it would be helpful to recast all the state machines in 
terms of dialog usages rather than dialogs. Maybe that is a job for the 
draft standard version of 3261.

> RFC5057, Multiple Dialog Usage (informational) does not discuss the
> details involved in multiple usages and the impact on the sip state
> models but I hope that this was a consideration when the initial
drafts
> were prepared. 
> 
> I am unsure if the concept of multiple usages on an early dialog was
> ever considered when RFC5057 was in draft stage. The nuances of
multiple
> dialogs on an established dialog appears to have been enough to
suggest
> that the RFC specifically not recommend multiple usages without
getting
> into the 'dark area' of early dialogs and multiple usages.
> 
> Whether it make sense to use a REFER or SUBSCRIBE inside an early
dialog
> is problematic. I am unsure whether these do make any sense. Would you
> want to subscribe to specific event which occurs during the early
dialog
> phase of an INVITE transaction? Would you want to use REFER to perform
a
> transfer of a ringing call and does the protocol actually support
this?
> 
> If the answer to these questions is a definitive 'NO' then the issue
> will have resolves itself. I fear however that there is no definitive
> answer at this time.

Right.

	Paul

> Ian Elz
> 
> System Manager
> DUCI LDC UK
> (Lucid Duck)
> 
> Office: + 44 24 764 35256
> gsm: +44 7801723668
> ian.elz@ericsson.com
> 
> 
> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> Sent: 05 August 2008 15:21
> To: Christer Holmberg
> Cc: SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
> 
> 
> 
> Christer Holmberg wrote:
>> Hi, 
>>
>>>> 7) Section 7: "A UAC that receives a 199 response for an early
> dialog
>> MUST NOT
>>>> send any further requests on that dialog...". Can you point to any
>> list discussion
>>>> around this requirement? I think there's some danger to consider
>> there. At the
>>>> very least we need to make this statement multiple-usage safe.
>>> This is a very good catch. This needs to be aligned with
dialogusage.
>> If the 199 contained the final response that triggered it, then that
>> final response could be used to determine the impact 
>>> on the dialog or dialog usage or just the transaction. But if the
199
>> doesn't contain the final response, then this is a problem.
>>
>> I forgot to bring this issue up in Dublin. Sorry for that.
>>
>> First, we need to remember that the UAS may terminate every
> dialogusage
>> when sending the final response (depending on what final response is
>> sent), without the UAC knowing it. And, due to the forking rules, the
>> final response which is sent to the UAC may not even be the same
which
>> was sent by the UAS, if a final response from another UAS is chosen
as
>> the "best".
>>
>> Second, we need to remember that this only affects
early-dialogusages.
>>
>> If needed, I guess we could include the final response which
triggered
>> the 199, but we could also simply say that if the UAC does not know
to
>> which dialogusage (if there are many) the 199 applies, it should not
> do
>> anything which may affect other usages for the same early dialog.
> 
> The establishment of multiple early dialog usages is a pretty strange 
> thing. Do we know of any use cases for this? (E.g. an in-dialog REFER
on
> 
> an early INVITE. Is that legal?)
> 
> Assuming it can arise, then I agree it is reasonable to treat the 199
as
> 
> affecting only its dialog usage unless there is info with it (such as 
> the actual final response code) that gives evidence that the whole 
> dialog is gone.
> 
> 	Thanks,
> 	Paul
> 
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 06:52:43 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F19713A6CF1;
	Wed,  6 Aug 2008 06:52:42 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 770753A6CEB
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 06:52:41 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -105.53
X-Spam-Level: 
X-Spam-Status: No, score=-105.53 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, DATE_IN_PAST_06_12=1.069,
	RCVD_IN_DNSWL_MED=-4, USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id THwBockC6naZ for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 06:52:40 -0700 (PDT)
Received: from sj-iport-2.cisco.com (sj-iport-2.cisco.com [171.71.176.71])
	by core3.amsl.com (Postfix) with ESMTP id 88C273A6CC6
	for <sip@ietf.org>; Wed,  6 Aug 2008 06:52:40 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,314,1215388800"; d="scan'208";a="72675823"
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-2.cisco.com with ESMTP; 06 Aug 2008 13:53:14 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-3.cisco.com (8.12.11/8.12.11) with ESMTP id m76DrDan014925; 
	Wed, 6 Aug 2008 06:53:13 -0700
Received: from [192.168.1.101] (sjc-vpn5-1489.cisco.com [10.21.93.209])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m76Dr8JZ017449;
	Wed, 6 Aug 2008 13:53:13 GMT
Message-Id: <9E7CACAD-F4C8-4E59-8F77-C3C8EA741CA6@cisco.com>
From: Cullen Jennings <fluffy@cisco.com>
To: Dan Wing <dwing@cisco.com>
In-Reply-To: <053c01c8f720$647c21d0$c2f0200a@cisco.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Tue, 5 Aug 2008 19:53:43 -0700
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net><02829328-7B0E-41AB-B325-01246363D09C@cisco.com><4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com><0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net><48919248.7060600@cisco.com><0ae201c8f310$d183a0f0$3675150a@cisco.com><E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com><20080731205152.03E7E514892@kilo.rtfm.com><E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com><20080801010212.654B5515743@kilo.rtfm.com><0a2101c8f3b1$b75dd500$6a94150a@cisco.com><20080801134611.1B8C9516C54@kilo.rtfm.com><0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net><20080805145945.5B61650846@romeo.rtfm.com><02b801c8f70b$675fed60$c2f0200a@cisco.com><20080805151333.DDB5350846@romeo.rtfm.com><038e01c8f713$84e3cca0$c2f0200a@cisco.com>
	<20080805161109.ABB8F50846@romeo.rtfm.com>
	<053c01c8f720$647c21d0$c2f0200a@cisco.com>
X-Mailer: Apple Mail (2.928.1)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1343; t=1218030793;
	x=1218894793; c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:=20Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=dWnFf+bO4Hpf2CDFgCKsughYGaRr9BiJZ2krnS6rHYQ=;
	b=puU6tMEOUqLcyKkmYFRdhWHLedyAYRLB4bz6KSO96eEmeI4W4FGtP3+eFT
	MkxTygqMu/kRlGl6i8xVSYFsS+8Y0Fhwvj22SvEmFwd3ymnU6mQkiSjar+4x
	Zl2eqmHK7Y;
Authentication-Results: sj-dkim-3; header.From=fluffy@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim3002 verified; ); 
Cc: "'Uzelac, Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 5, 2008, at 10:26 , Dan Wing wrote:

>>>>
>>>> With that said, ISTM that this cuts against your argument
>>>> that we should
>>>> be signing less of the message, since the failure of RFC
>> 4474 (to the
>>>> extent there is one) in this case is that it doesn't protect
>>>> *enough* information.
>>>
>>> Neither draft-fischer-sip-e2e-sec-media and
>>> draft-wing-sip-identity-media
>>> simply "sign less" -- please do not mis-characterize the
>>> proposals.  Both
>>> proposals require a public key exchange with the remote
>>> party -- which
>>> is far stronger than just using the IP address of the remote party
>>> as is done by RFC4474.
>>
>> I don't actually think this characterization of 4474 is that  
>> accurate.
>> RFC 4474 does not use the IP address for authenticating the media.
>> Rather, it authenticates the IP address as well as the rest of the
>> SDP
>
> Which draft-kaplan-sip-baiting shows is insufficient at its intended
> purpose.

I probably disagree but to sort that out ... What exactly do you see  
as the purpose of 4474 which the baiting draft shows it does not meet?

I'm trying to focus this conversation over to the requirements instead  
of the taking about solution mechanisms before we can agree what the  
problem is.

Cullen <in my individual contributor role>




_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 06:52:43 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BD3AD3A6D1D;
	Wed,  6 Aug 2008 06:52:43 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 85E823A6CEB
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 06:52:42 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -105.53
X-Spam-Level: 
X-Spam-Status: No, score=-105.53 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, DATE_IN_PAST_06_12=1.069,
	RCVD_IN_DNSWL_MED=-4, USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uhanvDIwVLHU for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 06:52:41 -0700 (PDT)
Received: from sj-iport-2.cisco.com (sj-iport-2.cisco.com [171.71.176.71])
	by core3.amsl.com (Postfix) with ESMTP id C701B3A6CC6
	for <sip@ietf.org>; Wed,  6 Aug 2008 06:52:41 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,314,1215388800"; d="scan'208";a="72675838"
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-2.cisco.com with ESMTP; 06 Aug 2008 13:53:15 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-3.cisco.com (8.12.11/8.12.11) with ESMTP id m76DrFwK014991; 
	Wed, 6 Aug 2008 06:53:15 -0700
Received: from [192.168.1.101] (sjc-vpn5-1489.cisco.com [10.21.93.209])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m76Dr8Jc017449;
	Wed, 6 Aug 2008 13:53:15 GMT
Message-Id: <9AD06710-F2FD-4BEE-B2B7-E63A2CEEB7B3@cisco.com>
From: Cullen Jennings <fluffy@cisco.com>
To: Adam Roach <adam@nostrum.com>
In-Reply-To: <4892E352.6020006@nostrum.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Tue, 5 Aug 2008 20:05:34 -0700
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<FE11649F-C3C2-494F-8C40-569E83E91B80@softarmor.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26D3A@GBNTHT12009MSX.gb002.siemens.net>	<4DAE5E60BA49D8419D7C8832503F5FFC072817B5A6@EVS10.ams.gblxint.com>	<06BFFD03-B8FC-47FC-8659-43BF4B60A3B6@softarmor.com>	<4891BAA4.7040305@nostrum.com>	<8151E805-AEF1-4889-8F71-EF33659661A6@softarmor.com>	<4892E0AA.7010300@nostrum.com>
	<B63409E9-F3BF-4E6E-A74B-4FD7347B085E@softarmor.com>
	<4892E352.6020006@nostrum.com>
X-Mailer: Apple Mail (2.928.1)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1135; t=1218030795;
	x=1218894795; c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:=20Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Alternative=20SIP=20Identity=20
	Approach=20(was=20re=3A=20Thoughts=20on=20SIP=09Identity)
	|Sender:=20; bh=E1pd03jdoWFACFBgfsN9TFGsFEuepHs8dDlh/tvacEA=;
	b=tps5ALaDucdOGOt13UIiSPUk8Lt++Ad0gyqN7uJoi5pYKFL1xKQJzausDu
	vmllLHdK/ibtvYf3igXhahenyaCT33jJ1qkPn3hwTUh5SA9ceT0ijdnKxpK8
	K+p6ncIA9E;
Authentication-Results: sj-dkim-3; header.From=fluffy@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim3002 verified; ); 
Cc: SIP IETF <sip@ietf.org>, Adam Uzelac <Adam.Uzelac@globalcrossing.com>,
	Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
	SIP	Identity)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 1, 2008, at 3:20 , Adam Roach wrote:

> On 8/1/08 11:12 AM, Dean Willis wrote:
>>
>>>
>>> How many editing boxes do you expect in the middle here?
>>
>> I have no idea. For media steering, four might be a typical case --  
>> originating, transit entry, transit exit, and terminating SBCs.  
>> Worst case? Who knows . . .
>
> Four media-path relays, you say?
>
> What kind of RTT latency are you envisioning? Is this for a phone- 
> call type scenario, or are users expected to resort to saying "over"  
> after each speech burst to prevent talking on top of each other?
>
> /a

Keep in mind it needs to work in the very common case where Alice and  
Bob both phone into a conference bridge. So I suspect it could be more  
like 9 hops.

Cullen <in my individual contributor role>

>
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 06:52:44 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9D0283A6D34;
	Wed,  6 Aug 2008 06:52:44 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B02CB3A6D0A
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 06:52:43 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -106.065
X-Spam-Level: 
X-Spam-Status: No, score=-106.065 tagged_above=-999 required=5
	tests=[AWL=0.534, BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4,
	USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ww8DJe3a3LwW for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 06:52:43 -0700 (PDT)
Received: from sj-iport-3.cisco.com (sj-iport-3.cisco.com [171.71.176.72])
	by core3.amsl.com (Postfix) with ESMTP id ED7B83A6CEB
	for <sip@ietf.org>; Wed,  6 Aug 2008 06:52:42 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,314,1215388800"; d="scan'208";a="92982759"
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-3.cisco.com with ESMTP; 06 Aug 2008 13:53:16 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m76DrGDg025017; 
	Wed, 6 Aug 2008 06:53:16 -0700
Received: from [192.168.1.101] (sjc-vpn5-1489.cisco.com [10.21.93.209])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m76Dr8Jd017449;
	Wed, 6 Aug 2008 13:53:16 GMT
Message-Id: <D0F7A190-2098-4858-8FD5-55C385D611C7@cisco.com>
From: Cullen Jennings <fluffy@cisco.com>
To: Adam Roach <adam@nostrum.com>
In-Reply-To: <4891CC9B.4010507@nostrum.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Wed, 6 Aug 2008 06:50:26 -0700
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<FE11649F-C3C2-494F-8C40-569E83E91B80@softarmor.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26D3A@GBNTHT12009MSX.gb002.siemens.net>	<4DAE5E60BA49D8419D7C8832503F5FFC072817B5A6@EVS10.ams.gblxint.com><06BFFD03-B8FC-47FC-8659-43BF4B60A3B6@softarmor.com>	<4891BAA4.7040305@nostrum.com>	<0af101c8f312$c6638170$3675150a@cisco.com>	<4891C350.1030504@nostrum.com>
	<0b0801c8f315$31cb02b0$3675150a@cisco.com>
	<4891CC9B.4010507@nostrum.com>
X-Mailer: Apple Mail (2.928.1)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=659; t=1218030796; x=1218894796;
	c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:=20Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Alternative=20SIP=20Identity=20
	Approach=20(was=20re=3A=20Thoughts=20on=20SIP=09Identity)
	|Sender:=20; bh=WTQda2as4ZsfsDpAT5F3CkKoJSOIwO+kkKwGQFeyCSg=;
	b=HEWuD4K9O/7fixNHwaYO4qQ00hGJR6SJvX4GhsM3Sh8KtJe5e/7+UmrCT7
	0L/Gpy1PnPTDt+pVu0egczVkRAoZQug+2WSGuLoRX+tBwu2hvTJ4O94UcxxW
	szzibmQ2wfLvwT0n8uTl6PUb7JfvyRL+DfvAlj3GELjlggJt0SDEI=;
Authentication-Results: sj-dkim-1; header.From=fluffy@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
Cc: 'SIP IETF' <sip@ietf.org>, 'Adam Uzelac' <Adam.Uzelac@globalcrossing.com>,
	Dan Wing <dwing@cisco.com>, 'Dean Willis' <dean.willis@softarmor.com>
Subject: Re: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
	SIP	Identity)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Jul 31, 2008, at 7:30 , Adam Roach wrote:

>
> Yes, that has the right property -- enough information to  
> reconstruct which changes were made, and by whom.

That might be the right property but on the other hand,  there is a  
big difference between the two following properties of a system.

1) the receiver can tell what intermediaries made changes and what  
changes were made

2) the sender was aware of, and authorized, the changes made by  
intermediaries

I can see ways we could build either of these. But right now it seem  
unclear on what we are even trying to accomplish.

Cullen <with my individual contributor hat on>

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 06:52:46 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6A4213A6D40;
	Wed,  6 Aug 2008 06:52:46 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B21CE3A6D36
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 06:52:44 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -105.708
X-Spam-Level: 
X-Spam-Status: No, score=-105.708 tagged_above=-999 required=5
	tests=[AWL=-0.178, BAYES_00=-2.599, DATE_IN_PAST_06_12=1.069,
	RCVD_IN_DNSWL_MED=-4, USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id IDgDigGHaAN2 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 06:52:43 -0700 (PDT)
Received: from sj-iport-2.cisco.com (sj-iport-2.cisco.com [171.71.176.71])
	by core3.amsl.com (Postfix) with ESMTP id CCDA43A6D22
	for <sip@ietf.org>; Wed,  6 Aug 2008 06:52:43 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,314,1215388800"; d="scan'208";a="72675853"
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-2.cisco.com with ESMTP; 06 Aug 2008 13:53:17 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m76DrEcc024979; 
	Wed, 6 Aug 2008 06:53:17 -0700
Received: from [192.168.1.101] (sjc-vpn5-1489.cisco.com [10.21.93.209])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m76Dr8Ja017449;
	Wed, 6 Aug 2008 13:53:14 GMT
Message-Id: <0E89736A-B9CA-4D49-B5B3-960CCCF13315@cisco.com>
From: Cullen Jennings <fluffy@cisco.com>
To: Hadriel Kaplan <HKaplan@acmepacket.com>
In-Reply-To: <E6C2E8958BA59A4FB960963D475F7AC30F0270D908@mail.acmepacket.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Tue, 5 Aug 2008 19:57:55 -0700
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F0270D908@mail.acmepacket.com>
X-Mailer: Apple Mail (2.928.1)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1258; t=1218030797;
	x=1218894797; c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:=20Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=wpJ47ypNNCr2fekqX/vVCpVdMF976cHYC2UWSBND5YU=;
	b=bC3W8bxSEuLZQYpxzgS1muskqCjtOOsxTi9Ifx7nqtSNVBRssKdAXEGztx
	1Jfx3YfEu4hHIMfMJsQzzGettw5ZFg4iK95DzwGFs1CoOLR/BC5mdY0m02Rv
	kp90b2WX8wrRBbP/YbV7hmibufgAC4nKkivz2bDnMH66Eddaeq/nY=;
Authentication-Results: sj-dkim-1; header.From=fluffy@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
Cc: SIP IETF <sip@ietf.org>, "Elwell, John" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


No, I was very clear on the conference calls we had on this that I  
want to get all the things that are broken on the table. Without  
understanding the whole picture, we will just build a hodge podge of  
solutions that can't be simultaneous combined to solve a bunch of the  
problems.

On Jul 30, 2008, at 5:33 , Hadriel Kaplan wrote:

>
> Cullen,
> I think there was some confusion or miscommunication - it was my  
> impression that what you asked for previously was for just *one* use- 
> case/scenario where 4474 doesn't work the way we'd like, so the WG  
> could focus on that one case and decide if it's legitimate to drive  
> for a different mechanism.  I think that's why John presented just  
> one case.  But at the mic it sounded more like you wanted to know  
> *all* scenarios we thought should be handled.
>
> Which is it?
>
> -hadriel
>
>> -----Original Message-----
>> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
>> Cullen Jennings
>>
>> Hmm, I don't think anyone made quite that argument. Personally, I'd
>> rather spend time thinking about the problems that were presented
>> today in the meeting than repeat previous discussions.
>>
>> Cullen <with my individual hat on>
>

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 06:56:04 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2EE0B28C369;
	Wed,  6 Aug 2008 06:56:04 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C723E28C2A4
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 06:56:02 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.21
X-Spam-Level: 
X-Spam-Status: No, score=-6.21 tagged_above=-999 required=5 tests=[AWL=0.039, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cfq26y4svYbM for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 06:56:02 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 340173A6D63
	for <sip@ietf.org>; Wed,  6 Aug 2008 06:55:48 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	9AA1320689; Wed,  6 Aug 2008 15:56:20 +0200 (CEST)
X-AuditID: c1b4fb3c-ae8cfbb0000015b5-ce-4899ad84d371
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	8B3812051E; Wed,  6 Aug 2008 15:56:20 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 15:56:20 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 15:56:18 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF07548A8B@esealmw113.eemea.ericsson.se>
In-Reply-To: <BBE61D1553D8A34F812FF87377B2935F04610792@ATL1VEXC020.usdom003.tco.tc>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] 199: Staus and open issues after Dublin 
thread-index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwAYkYUwAFVFyxA=
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se>
	<BBE61D1553D8A34F812FF87377B2935F04610792@ATL1VEXC020.usdom003.tco.tc>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Brett Tate" <brett@broadsoft.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 06 Aug 2008 13:56:20.0327 (UTC)
	FILETIME=[34527F70:01C8F7CC]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] 199: Staus and open issues after Dublin
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi Brett,

>>We will not define an option-tag for 199 support. 
>
>Since the working group has issue with using option-tag, I propose
something else be added to request to indicate that something along the
path supports and desires receiving 199.
>
>For instance, rfc4028 allows the UAC or proxy to include
Session-Expires.  A similar header (maybe generic one) could be defined
and optionally contain parameters (uac, proxy, etcetera); for 
>instance, "Desire-199:".

The group never discussed if there is any "issue" with using an
option-tag (e.g. if proxies are allowed to insert values). The opinion
was more that there is no need for any sort of indication.


>>1) Is a proxy allowed to send 199 in the first place, or are only
UASes allowed to do it?
>
>I have no issue with allowing it.  However the draft should likely
provide guidance if originator of 199 still considered a proxy or has
morphed into UAS/b2bua when using another's To tag.  
>Depending upon interpretation of rfc3261 (and dropped packets), there
are potential issues concerning Contact and Record-Route of the 199
(unless remember prior for inclusion within 199).  
>
>What should occur when INVITE 2xx received after proxy originated 199
with the same To tag?

I am not sure how that could happened. If the proxy received a final
response, which triggered the 199, I don't think it will later receive
an 2xx with the same To tag.

>>2) are proxies allowed to send 199 reliably?
>I wouldn't consider it a proxy since it is trampling upon another's
RSeq and dialog (depending upon 199's Record-Route and Contact).

I think it's rather clear that people don't want proxies to send proxy
originated 199 responses reliably. Or, does anyone have another opinion?


>>3) Assuming proxies are allowed to send 199 (see issue 1), are proxies
allowed to send 199 unreliably, even if 100rel is required?
>Concerning this and other non compliances, not sending the 199 would
likely be best to avoid violating rfc3261/rfc3262.

Ok. This is one of the issues still discussed.


>>4) Is it a MAY/RECOMMENDATION/SHOULD/MUST for UAS to send 199? 
>I prefer MAY.

Ok.

Thanks for your comments!

Regards,

Christer


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 06:57:17 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4E5BB28C36F;
	Wed,  6 Aug 2008 06:57:17 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 228B328C36F
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 06:57:16 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -7.211
X-Spam-Level: 
X-Spam-Status: No, score=-7.211 tagged_above=-999 required=5 tests=[AWL=1.038, 
	BAYES_00=-2.599, GB_I_INVITATION=-2, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id o8JZi4GXK6S1 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 06:57:14 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 996B028C2A4
	for <sip@ietf.org>; Wed,  6 Aug 2008 06:57:14 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	1585F207CE; Wed,  6 Aug 2008 15:57:47 +0200 (CEST)
X-AuditID: c1b4fb3c-ad8cdbb0000015b5-80-4899adda6aca
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	EB6262053D; Wed,  6 Aug 2008 15:57:46 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 15:57:47 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 15:57:45 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF07548A9B@esealmw113.eemea.ericsson.se>
In-Reply-To: <C0E80510684FE94DBDE3A4AF6B968D2D03DBB10D@esealmw118.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Multiple early-dialog usages [was RE: [Sip] Comments on
	draft-ietf-sip-199-00.txt]
thread-index: Acj3v2R48sWHCOnUR/W0C8eoM5EngwACP3AQAAD4NEA=
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
	<489861C9.2020507@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
	<48999834.4080304@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03DBB10D@esealmw118.eemea.ericsson.se>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Ian Elz" <ian.elz@ericsson.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 13:57:47.0013 (UTC)
	FILETIME=[67FDBB50:01C8F7CC]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: [Sip] Multiple early-dialog usages [was RE: Comments on
	draft-ietf-sip-199-00.txt]
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 
Hi,

I've changed the name of this thread, because I think the scope is wider
than 199 :)

Regards,

Christer



-----Original Message-----
From: Ian Elz 
Sent: 6. elokuuta 2008 16:51
To: Paul Kyzivat
Cc: Christer Holmberg; SIP IETF
Subject: RE: [Sip] Comments on draft-ietf-sip-199-00.txt

Paul,

I only included 'early dialog' as this is the term that is already used.

We cannot criticize RFC 3261 for this as when it was written INVITE was
the ONLY dialog creating transaction.

Should some input be given to Robert Sparks' invfix draft as it is
proposing corrections to the INVITE transaction state machines. 

Based on the  existing draft (-02) sending or receiving a 1xx response
places the transaction in the 'proceeding' state which is does not exit
until a final response has been sent or received, or I assume the
dialog/usage terminates.

If we retain the state model of proposed in invfix then the 199 response
should be treated as an invitation to the UAC to terminate the early
dialog usage with a BYE method. If this does not happen the transaction
will remain as 'proceeding' and the early dialog usage may also remain.

The alternative is to modify the proposed transaction state models for
special handling for the 199 response. This is something which I am not
sure that I would favour.

Ian Elz

System Manager
DUCI LDC UK
(Lucid Duck)

Office: + 44 24 764 35256
gsm: +44 7801723668
ian.elz@ericsson.com


-----Original Message-----
From: Paul Kyzivat [mailto:pkyzivat@cisco.com]
Sent: 06 August 2008 13:25
To: Ian Elz
Cc: Christer Holmberg; SIP IETF
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt



Ian Elz wrote:
> Paul,
> 
> I don't believe that you can create 'multiple early dialog usages'.
> 
> On an INVITE transaction can create an early dialog. The other dialog
> creating transactions REFER and SUBSCRIBE, can only create established
> dialogs.
> 
> As you cannot start a second INVITE transaction while there is an
> outstanding INVITE transaction on a dialog, early or otherwise.
> 
> If you send a REFER or SUBSCRIBE method on an early dialog and you get
> an acceptance response then you have an established dialog.

Agreed. I should have pointed that out.

However, the issue arises if you can get an early invite dialog usage 
with a confirmed dialog usage. In that case one must be careful with the

rules to ensure that you don't accidentally terminate the confirmed 
usage as a side effect of processing the 199 on the early invite dialog 
usage.

> If this is the early-dialog from an INVITE transaction then key
question
> is what is the validity of a provisional response in creating a
dialog.
> Is it early or established. While the provisional response is clearly
> just that from a transaction perspective in this situation the meaning
> of the proposed 199 provisional response is now transaction affecting
> and not dialog affecting, i.e. the INVITE usage will not become
> established although the other usage may be established.
> 
> The existing state models in sip only discuss dialogs and transactions
> and have not considered the dialog usage. When you send a reliable
> provisional response to an INVITE you are in effect creating an
> early-dialog usage. If this is the only dialog usage on the dialog you
> have also created an early-dialog. If there is another usage on the
same
> dialog then the dialog state will depend upon the state of the other
> dialog.

IMO there really shouldn't be any "early dialog", ever. The dialog comes

into existence, and departs, based on the existence of at least one 
usage. The dialog is the same whether the usages are early or late, or a

combination.

I agree that it would be helpful to recast all the state machines in 
terms of dialog usages rather than dialogs. Maybe that is a job for the 
draft standard version of 3261.

> RFC5057, Multiple Dialog Usage (informational) does not discuss the
> details involved in multiple usages and the impact on the sip state
> models but I hope that this was a consideration when the initial
drafts
> were prepared. 
> 
> I am unsure if the concept of multiple usages on an early dialog was
> ever considered when RFC5057 was in draft stage. The nuances of
multiple
> dialogs on an established dialog appears to have been enough to
suggest
> that the RFC specifically not recommend multiple usages without
getting
> into the 'dark area' of early dialogs and multiple usages.
> 
> Whether it make sense to use a REFER or SUBSCRIBE inside an early
dialog
> is problematic. I am unsure whether these do make any sense. Would you
> want to subscribe to specific event which occurs during the early
dialog
> phase of an INVITE transaction? Would you want to use REFER to perform
a
> transfer of a ringing call and does the protocol actually support
this?
> 
> If the answer to these questions is a definitive 'NO' then the issue
> will have resolves itself. I fear however that there is no definitive
> answer at this time.

Right.

	Paul

> Ian Elz
> 
> System Manager
> DUCI LDC UK
> (Lucid Duck)
> 
> Office: + 44 24 764 35256
> gsm: +44 7801723668
> ian.elz@ericsson.com
> 
> 
> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> Sent: 05 August 2008 15:21
> To: Christer Holmberg
> Cc: SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
> 
> 
> 
> Christer Holmberg wrote:
>> Hi, 
>>
>>>> 7) Section 7: "A UAC that receives a 199 response for an early
> dialog
>> MUST NOT
>>>> send any further requests on that dialog...". Can you point to any
>> list discussion
>>>> around this requirement? I think there's some danger to consider
>> there. At the
>>>> very least we need to make this statement multiple-usage safe.
>>> This is a very good catch. This needs to be aligned with
dialogusage.
>> If the 199 contained the final response that triggered it, then that
>> final response could be used to determine the impact 
>>> on the dialog or dialog usage or just the transaction. But if the
199
>> doesn't contain the final response, then this is a problem.
>>
>> I forgot to bring this issue up in Dublin. Sorry for that.
>>
>> First, we need to remember that the UAS may terminate every
> dialogusage
>> when sending the final response (depending on what final response is
>> sent), without the UAC knowing it. And, due to the forking rules, the
>> final response which is sent to the UAC may not even be the same
which
>> was sent by the UAS, if a final response from another UAS is chosen
as
>> the "best".
>>
>> Second, we need to remember that this only affects
early-dialogusages.
>>
>> If needed, I guess we could include the final response which
triggered
>> the 199, but we could also simply say that if the UAC does not know
to
>> which dialogusage (if there are many) the 199 applies, it should not
> do
>> anything which may affect other usages for the same early dialog.
> 
> The establishment of multiple early dialog usages is a pretty strange 
> thing. Do we know of any use cases for this? (E.g. an in-dialog REFER
on
> 
> an early INVITE. Is that legal?)
> 
> Assuming it can arise, then I agree it is reasonable to treat the 199
as
> 
> affecting only its dialog usage unless there is info with it (such as 
> the actual final response code) that gives evidence that the whole 
> dialog is gone.
> 
> 	Thanks,
> 	Paul
> 
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 06:57:40 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1115228C375;
	Wed,  6 Aug 2008 06:57:40 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D77C428C374
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 06:57:38 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -106.179
X-Spam-Level: 
X-Spam-Status: No, score=-106.179 tagged_above=-999 required=5
	tests=[AWL=0.420, BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4,
	USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dTwConTkdQg0 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 06:57:38 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id 76B7B28C2A4
	for <sip@ietf.org>; Wed,  6 Aug 2008 06:57:36 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,314,1215388800"; d="scan'208";a="136470247"
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-6.cisco.com with ESMTP; 06 Aug 2008 13:57:59 +0000
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-4.cisco.com (8.12.11/8.12.11) with ESMTP id m76Dvun6001834; 
	Wed, 6 Aug 2008 06:57:57 -0700
Received: from [192.168.1.101] (sjc-vpn5-1489.cisco.com [10.21.93.209])
	by sj-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m76Du4kN004711;
	Wed, 6 Aug 2008 13:56:04 GMT
Message-Id: <8A6E595A-8EDD-409C-AC70-068B5D2F20DA@cisco.com>
From: Cullen Jennings <fluffy@cisco.com>
To: Dean Willis <dean.willis@softarmor.com>
In-Reply-To: <4898802A.2000709@softarmor.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Wed, 6 Aug 2008 06:56:21 -0700
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>	<20080731205152.03E7E514892@kilo.rtfm.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>	<20080801010212.654B5515743@kilo.rtfm.com>	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<489336E4.6050204@cisco.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E2@GBNTHT12009MSX.gb002.siemens.net>
	<4898802A.2000709@softarmor.com>
X-Mailer: Apple Mail (2.928.1)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=408; t=1218031078; x=1218895078;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:=20Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=BHKi9UALqbV0goKBYgy9rEe0W6BL/kLx3CQZJuY53SM=;
	b=GX69UMUrZ8h9knBVaq4LlLR3Kx7BjgQZ2NpFcoomQZx/iT+SdJqQCKL6WJ
	TfhP775wZN91jGxicAhVnUcsugzZvkv/nFX6YrRLL80pXtYVlcgJwN3G6P+4
	UV4hcWAjvD;
Authentication-Results: sj-dkim-4; header.From=fluffy@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim4002 verified; ); 
Cc: "Uzelac, Adam" <Adam.Uzelac@globalcrossing.com>, SIP IETF <sip@ietf.org>,
	Paul Kyzivat <pkyzivat@cisco.com>, "Elwell,
	John" <john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 5, 2008, at 9:30 , Dean Willis wrote:

> The "right" way to do what we seem to want here probably involves  
> adding
> a routing protocol layer to RTP. That, however, makes for a very
> different architecture from what we have now.

Our NAT traversal story for SIP more or less has formed a routing  
system for RTP so this might not be that far off.

Cullen <with my individual hat on>



_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 08:19:51 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 039893A68D7;
	Wed,  6 Aug 2008 08:19:51 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3D76D3A6818
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 08:19:49 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -7.499
X-Spam-Level: 
X-Spam-Status: No, score=-7.499 tagged_above=-999 required=5 tests=[AWL=1.100, 
	BAYES_00=-2.599, GB_I_INVITATION=-2, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id oevN+3Aa09Qh for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 08:19:47 -0700 (PDT)
Received: from sj-iport-3.cisco.com (sj-iport-3.cisco.com [171.71.176.72])
	by core3.amsl.com (Postfix) with ESMTP id 7F2BE3A68D7
	for <sip@ietf.org>; Wed,  6 Aug 2008 08:19:47 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,315,1215388800"; d="scan'208";a="93012038"
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-3.cisco.com with ESMTP; 06 Aug 2008 15:20:16 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-4.cisco.com (8.12.11/8.12.11) with ESMTP id m76FKFRr010509; 
	Wed, 6 Aug 2008 08:20:15 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m76FKF0f006224;
	Wed, 6 Aug 2008 15:20:15 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 11:20:15 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 11:20:14 -0400
Message-ID: <4899C166.70109@cisco.com>
Date: Wed, 06 Aug 2008 11:21:10 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
	<489861C9.2020507@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
	<48999834.4080304@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03DBB10D@esealmw118.eemea.ericsson.se>
	<CA9998CD4A020D418654FCDEF4E707DF07548A9B@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF07548A9B@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 06 Aug 2008 15:20:14.0495 (UTC)
	FILETIME=[ECEB92F0:01C8F7D7]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=8914; t=1218036015;
	x=1218900015; c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20Multiple=20early-dialog=20usages=20[was
	=20RE=3A=20[Sip]=20Comments=20on=20draft-ietf-sip-199-00.txt ]
	|Sender:=20; bh=3+F5OoL0k4G7Qf571q60IzO2KRST8mTNH1pX+kfNfP4=;
	b=Y+zjCsNttwYq2Y+Qmbk462d5zGmrPT5n1Mfzvw4gBFLbawB/pHr7HWeJ8i
	AeVfoc1cIsKE8sJC8OLIrivvM38DW0/yhXdCWyhutIMUikHZx/aykyL22Vk1
	mOrZf8s77J;
Authentication-Results: sj-dkim-4; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim4002 verified; ); 
Cc: SIP IETF <sip@ietf.org>, Ian Elz <ian.elz@ericsson.com>
Subject: Re: [Sip] Multiple early-dialog usages [was RE: Comments on
	draft-ietf-sip-199-00.txt]
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Christer Holmberg wrote:
>  
> Hi,
> 
> I've changed the name of this thread, because I think the scope is wider
> than 199 :)

Perhaps. But I don't think there is much to discuss.

It seems clear that we don't have any way to cause a dialog with 
*multiple* *early* dialog usages. This is because only an 
invite-dialog-usage can be early, and you can only have one of those per 
dialog.

It seems technically possible to have a dialog that has both an early 
dialog usage and a final dialog usage. There may be question of whether 
there is practical value in this, but for now I will simply assume it is 
possible. We can discuss if it might not be possible, or if it should be 
declared so, but I don't know if we need to.

RFC 5057 addresses the impact of responses on the state of transactions, 
dialog usages, and dialogs. The interesting question is whether the 
proposed 199 response would require some alteration to 5057. The reason 
its interesting is because the 199 is effectively a final response in 
disguise. But that brings it back to something that ought to be 
discussed on the 199 thread.

	Paul

> Regards,
> 
> Christer
> 
> 
> 
> -----Original Message-----
> From: Ian Elz 
> Sent: 6. elokuuta 2008 16:51
> To: Paul Kyzivat
> Cc: Christer Holmberg; SIP IETF
> Subject: RE: [Sip] Comments on draft-ietf-sip-199-00.txt
> 
> Paul,
> 
> I only included 'early dialog' as this is the term that is already used.
> 
> We cannot criticize RFC 3261 for this as when it was written INVITE was
> the ONLY dialog creating transaction.
> 
> Should some input be given to Robert Sparks' invfix draft as it is
> proposing corrections to the INVITE transaction state machines. 
> 
> Based on the  existing draft (-02) sending or receiving a 1xx response
> places the transaction in the 'proceeding' state which is does not exit
> until a final response has been sent or received, or I assume the
> dialog/usage terminates.
> 
> If we retain the state model of proposed in invfix then the 199 response
> should be treated as an invitation to the UAC to terminate the early
> dialog usage with a BYE method. If this does not happen the transaction
> will remain as 'proceeding' and the early dialog usage may also remain.
> 
> The alternative is to modify the proposed transaction state models for
> special handling for the 199 response. This is something which I am not
> sure that I would favour.
> 
> Ian Elz
> 
> System Manager
> DUCI LDC UK
> (Lucid Duck)
> 
> Office: + 44 24 764 35256
> gsm: +44 7801723668
> ian.elz@ericsson.com
> 
> 
> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]
> Sent: 06 August 2008 13:25
> To: Ian Elz
> Cc: Christer Holmberg; SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
> 
> 
> 
> Ian Elz wrote:
>> Paul,
>>
>> I don't believe that you can create 'multiple early dialog usages'.
>>
>> On an INVITE transaction can create an early dialog. The other dialog
>> creating transactions REFER and SUBSCRIBE, can only create established
>> dialogs.
>>
>> As you cannot start a second INVITE transaction while there is an
>> outstanding INVITE transaction on a dialog, early or otherwise.
>>
>> If you send a REFER or SUBSCRIBE method on an early dialog and you get
>> an acceptance response then you have an established dialog.
> 
> Agreed. I should have pointed that out.
> 
> However, the issue arises if you can get an early invite dialog usage 
> with a confirmed dialog usage. In that case one must be careful with the
> 
> rules to ensure that you don't accidentally terminate the confirmed 
> usage as a side effect of processing the 199 on the early invite dialog 
> usage.
> 
>> If this is the early-dialog from an INVITE transaction then key
> question
>> is what is the validity of a provisional response in creating a
> dialog.
>> Is it early or established. While the provisional response is clearly
>> just that from a transaction perspective in this situation the meaning
>> of the proposed 199 provisional response is now transaction affecting
>> and not dialog affecting, i.e. the INVITE usage will not become
>> established although the other usage may be established.
>>
>> The existing state models in sip only discuss dialogs and transactions
>> and have not considered the dialog usage. When you send a reliable
>> provisional response to an INVITE you are in effect creating an
>> early-dialog usage. If this is the only dialog usage on the dialog you
>> have also created an early-dialog. If there is another usage on the
> same
>> dialog then the dialog state will depend upon the state of the other
>> dialog.
> 
> IMO there really shouldn't be any "early dialog", ever. The dialog comes
> 
> into existence, and departs, based on the existence of at least one 
> usage. The dialog is the same whether the usages are early or late, or a
> 
> combination.
> 
> I agree that it would be helpful to recast all the state machines in 
> terms of dialog usages rather than dialogs. Maybe that is a job for the 
> draft standard version of 3261.
> 
>> RFC5057, Multiple Dialog Usage (informational) does not discuss the
>> details involved in multiple usages and the impact on the sip state
>> models but I hope that this was a consideration when the initial
> drafts
>> were prepared. 
>>
>> I am unsure if the concept of multiple usages on an early dialog was
>> ever considered when RFC5057 was in draft stage. The nuances of
> multiple
>> dialogs on an established dialog appears to have been enough to
> suggest
>> that the RFC specifically not recommend multiple usages without
> getting
>> into the 'dark area' of early dialogs and multiple usages.
>>
>> Whether it make sense to use a REFER or SUBSCRIBE inside an early
> dialog
>> is problematic. I am unsure whether these do make any sense. Would you
>> want to subscribe to specific event which occurs during the early
> dialog
>> phase of an INVITE transaction? Would you want to use REFER to perform
> a
>> transfer of a ringing call and does the protocol actually support
> this?
>> If the answer to these questions is a definitive 'NO' then the issue
>> will have resolves itself. I fear however that there is no definitive
>> answer at this time.
> 
> Right.
> 
> 	Paul
> 
>> Ian Elz
>>
>> System Manager
>> DUCI LDC UK
>> (Lucid Duck)
>>
>> Office: + 44 24 764 35256
>> gsm: +44 7801723668
>> ian.elz@ericsson.com
>>
>>
>> -----Original Message-----
>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
>> Sent: 05 August 2008 15:21
>> To: Christer Holmberg
>> Cc: SIP IETF
>> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
>>
>>
>>
>> Christer Holmberg wrote:
>>> Hi, 
>>>
>>>>> 7) Section 7: "A UAC that receives a 199 response for an early
>> dialog
>>> MUST NOT
>>>>> send any further requests on that dialog...". Can you point to any
>>> list discussion
>>>>> around this requirement? I think there's some danger to consider
>>> there. At the
>>>>> very least we need to make this statement multiple-usage safe.
>>>> This is a very good catch. This needs to be aligned with
> dialogusage.
>>> If the 199 contained the final response that triggered it, then that
>>> final response could be used to determine the impact 
>>>> on the dialog or dialog usage or just the transaction. But if the
> 199
>>> doesn't contain the final response, then this is a problem.
>>>
>>> I forgot to bring this issue up in Dublin. Sorry for that.
>>>
>>> First, we need to remember that the UAS may terminate every
>> dialogusage
>>> when sending the final response (depending on what final response is
>>> sent), without the UAC knowing it. And, due to the forking rules, the
>>> final response which is sent to the UAC may not even be the same
> which
>>> was sent by the UAS, if a final response from another UAS is chosen
> as
>>> the "best".
>>>
>>> Second, we need to remember that this only affects
> early-dialogusages.
>>> If needed, I guess we could include the final response which
> triggered
>>> the 199, but we could also simply say that if the UAC does not know
> to
>>> which dialogusage (if there are many) the 199 applies, it should not
>> do
>>> anything which may affect other usages for the same early dialog.
>> The establishment of multiple early dialog usages is a pretty strange 
>> thing. Do we know of any use cases for this? (E.g. an in-dialog REFER
> on
>> an early INVITE. Is that legal?)
>>
>> Assuming it can arise, then I agree it is reasonable to treat the 199
> as
>> affecting only its dialog usage unless there is info with it (such as 
>> the actual final response code) that gives evidence that the whole 
>> dialog is gone.
>>
>> 	Thanks,
>> 	Paul
>>
>>
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 08:26:48 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D6EB03A6B53;
	Wed,  6 Aug 2008 08:26:48 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1F6813A6A3F
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 08:26:48 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dfHDRsJSjit8 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 08:26:47 -0700 (PDT)
Received: from out002.iad.hostedmail.net (out002.iad.hostedmail.net
	[209.225.56.24])
	by core3.amsl.com (Postfix) with ESMTP id 4510A3A68BF
	for <sip@ietf.org>; Wed,  6 Aug 2008 08:26:47 -0700 (PDT)
Received: from ATL1VEXC020.usdom003.tco.tc ([10.158.7.31]) by
	out002.iad.hostedmail.net with Microsoft SMTPSVC(6.0.3790.3959);
	Wed, 6 Aug 2008 11:27:18 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 11:27:19 -0400
Message-ID: <BBE61D1553D8A34F812FF87377B2935F04696345@ATL1VEXC020.usdom003.tco.tc>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF07548A8B@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] 199: Staus and open issues after Dublin 
Thread-Index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwAYkYUwAFVFyxAAAYe/IA==
From: "Brett Tate" <brett@broadsoft.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 06 Aug 2008 15:27:18.0861 (UTC)
	FILETIME=[E9DCAFD0:01C8F7D8]
Subject: Re: [Sip] 199: Staus and open issues after Dublin
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi Christer,

Thanks for response.  Reply inline. 

> The group never discussed if there is any "issue" with 
> using an option-tag (e.g. if proxies are allowed to 
> insert values). The opinion was more that there is no 
> need for any sort of indication.

After Cullen mentioned the reason for it, I guess that I should stayed
at the microphone and re-iterated the reasons.

Sending 199 is useless overhead unless something along the path supports
and wants it.  

If UAC does not support 199, sending it might cause more harm than good.


> > > 1) Is a proxy allowed to send 199 in the first 
> > > place, or are only UASes allowed to do it?
> >
> > I have no issue with allowing it.  However the draft 
> > should likely provide guidance if originator of 199 
> > still considered a proxy or has morphed into UAS/b2bua when 
> > using another's To tag.  Depending upon interpretation of 
> > rfc3261 (and dropped packets), there are potential issues 
> > concerning Contact and Record-Route of the 199 (unless 
> > remember prior for inclusion within 199).  
> >
> > What should occur when INVITE 2xx received after proxy 
> > originated 199 with the same To tag?
> 
> I am not sure how that could happened. If the proxy received 
> a final response, which triggered the 199, I don't think it 
> will later receive an 2xx with the same To tag.

If no proxy steals another's To tag for originating a final INVITE
response, I agree.  I don't recall what rfc3261 and invfix recommend
concerning the abnormal situation from proxy and UAC perspectives.  I
was mainly just asking for conceptual reasons based upon the paragraph
prior to my question.  If it occurs, should the originator of 199 tag X
process the 2xx tag X like a UAC or proxy?
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 09:29:44 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B7C1E3A67D4;
	Wed,  6 Aug 2008 09:29:44 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 7ED1E3A67D4
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 09:29:43 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.549
X-Spam-Level: 
X-Spam-Status: No, score=-6.549 tagged_above=-999 required=5 tests=[AWL=0.050, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YvZIQY80PAmW for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 09:29:42 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id BF3623A67DD
	for <sip@ietf.org>; Wed,  6 Aug 2008 09:29:42 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,315,1215388800"; d="scan'208";a="136531344"
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-6.cisco.com with ESMTP; 06 Aug 2008 16:29:55 +0000
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-4.cisco.com (8.12.11/8.12.11) with ESMTP id m76GTtfd021995; 
	Wed, 6 Aug 2008 09:29:55 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m76GTqLs003362;
	Wed, 6 Aug 2008 16:29:53 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Cullen Jennings'" <fluffy@cisco.com>, "'Adam Roach'" <adam@nostrum.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>	<FE11649F-C3C2-494F-8C40-569E83E91B80@softarmor.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F26D3A@GBNTHT12009MSX.gb002.siemens.net>	<4DAE5E60BA49D8419D7C8832503F5FFC072817B5A6@EVS10.ams.gblxint.com><06BFFD03-B8FC-47FC-8659-43BF4B60A3B6@softarmor.com>	<4891BAA4.7040305@nostrum.com>	<0af101c8f312$c6638170$3675150a@cisco.com>	<4891C350.1030504@nostrum.com>
	<0b0801c8f315$31cb02b0$3675150a@cisco.com>
	<4891CC9B.4010507@nostrum.com>
	<D0F7A190-2098-4858-8FD5-55C385D611C7@cisco.com>
Date: Wed, 6 Aug 2008 09:29:51 -0700
Message-ID: <02f901c8f7e1$a8e2d780$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acj3y8jW87uJNoXDTzaLxzToRrIa/AAFc+Gw
In-Reply-To: <D0F7A190-2098-4858-8FD5-55C385D611C7@cisco.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1159; t=1218040195;
	x=1218904195; c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Alternative=20SIP=20Identity=20
	Approach=20(was=20re=3A=20Thoughts=20on=20SIP=09Identity)
	|Sender:=20; bh=kiJBj+2FIjBNsyzZf0vdLLWEMfiUT0VI0cVdmSs4FSI=;
	b=JGp5p9GF/cH7bkZ9FSSS8EKVS6mkCGklgOW4orpjb9kiiwIfTJ62857q3N
	LmYzZO0dk3vKGUmtYZko5lON9+BebpaphcbZY/NWEwqskKijrbYWWzlcWP/C
	WqXs7BAk5Z;
Authentication-Results: sj-dkim-4; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim4002 verified; ); 
Cc: 'SIP IETF' <sip@ietf.org>, 'Adam Uzelac' <Adam.Uzelac@globalcrossing.com>,
	'Dean Willis' <dean.willis@softarmor.com>
Subject: Re: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
	SIP	Identity)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 

> -----Original Message-----
> From: Cullen Jennings [mailto:fluffy@cisco.com] 
> Sent: Wednesday, August 06, 2008 6:50 AM
> To: Adam Roach
> Cc: Dan Wing; 'SIP IETF'; 'Adam Uzelac'; 'Dean Willis'
> Subject: Re: [Sip] Alternative SIP Identity Approach (was re: 
> Thoughts on SIP Identity)
> 
> 
> On Jul 31, 2008, at 7:30 , Adam Roach wrote:
> 
> >
> > Yes, that has the right property -- enough information to  
> > reconstruct which changes were made, and by whom.
> 
> That might be the right property but on the other hand,  there is a  
> big difference between the two following properties of a system.
> 
> 1) the receiver can tell what intermediaries made changes and what  
> changes were made
> 
> 2) the sender was aware of, and authorized, the changes made by  
> intermediaries
> 
> I can see ways we could build either of these. But right now it seem  
> unclear on what we are even trying to accomplish.

I would like to accomplish end-to-end identity through SBCs, rather
than hop-by-hop identity that exists with today's RFC4474 through SBCs.

-d


> Cullen <with my individual contributor hat on>
> 

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 09:29:45 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 731DA3A68D7;
	Wed,  6 Aug 2008 09:29:45 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8A2813A67DD
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 09:29:43 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.551
X-Spam-Level: 
X-Spam-Status: No, score=-6.551 tagged_above=-999 required=5 tests=[AWL=0.048, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id TT6Rbd3M667z for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 09:29:42 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id 323733A63EC
	for <sip@ietf.org>; Wed,  6 Aug 2008 09:29:42 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,315,1215388800"; d="scan'208";a="136531025"
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-6.cisco.com with ESMTP; 06 Aug 2008 16:29:17 +0000
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m76GTH55018321; 
	Wed, 6 Aug 2008 09:29:17 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m76GTETx002773;
	Wed, 6 Aug 2008 16:29:14 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Cullen Jennings'" <fluffy@cisco.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net><02829328-7B0E-41AB-B325-01246363D09C@cisco.com><4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com><0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net><48919248.7060600@cisco.com><0ae201c8f310$d183a0f0$3675150a@cisco.com><E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com><20080731205152.03E7E514892@kilo.rtfm.com><E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com><20080801010212.654B5515743@kilo.rtfm.com><0a2101c8f3b1$b75dd500$6a94150a@cisco.com><20080801134611.1B8C9516C54@kilo.rtfm.com><0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net><20080805145945.5B61650846@romeo.rtfm.com><02b801c8f70b$675fed60$c2f0200a@cisco.com><20080805151333.DDB5350846@romeo.rtfm.com><038e01c8f713$84e3cca0$c2f0200a@cisco.com>
	<20080805161109.ABB8F50846@romeo.rtfm.com>
	<053c01c8f720$647c21d0$c2f0200a@cisco.com> <9E7CACAD-F4C8-4E59-8F77
	-C3C8EA741CA6@cisco. com>
Date: Wed, 6 Aug 2008 09:29:13 -0700
Message-ID: <02f301c8f7e1$91dd2270$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acj3y8jWRIq5OvVrQqyFb/0d8CbzywAFXTmA
In-Reply-To: <9E7CACAD-F4C8-4E59-8F77-C3C8EA741CA6@cisco.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2001; t=1218040157;
	x=1218904157; c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=1oIEcwAiwqF+V1T4rzqArM3nMcJjCWYT7ko53nVTHl0=;
	b=jITgTaJs++U9FZsPvtmseqCrCA4V9zoIlunmVZ73VCcTGd0/dNv1bcwXNt
	q6rgV6o5EgcSOeFvBmnY6mWyiSIcB+qeV77KSFGTxtddXslL0k/5Wu9sP96F
	dMUGnlNazXndHPz2Y2b2fu+7WisgCDlYdaCEMTjlkLF+Yb9jr5xHs=;
Authentication-Results: sj-dkim-1; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
Cc: "'Uzelac, Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 

> -----Original Message-----
> From: Cullen Jennings [mailto:fluffy@cisco.com] 
> Sent: Tuesday, August 05, 2008 7:54 PM
> To: Dan Wing
> Cc: 'Eric Rescorla'; 'Elwell, John'; 'Hadriel Kaplan'; 
> 'Jonathan Rosenberg'; 'SIP IETF'; 'Uzelac, Adam'
> Subject: Re: [Sip] Thoughts on SIP Identity issues
> 
> 
> On Aug 5, 2008, at 10:26 , Dan Wing wrote:
> 
> >>>>
> >>>> With that said, ISTM that this cuts against your argument
> >>>> that we should
> >>>> be signing less of the message, since the failure of RFC
> >> 4474 (to the
> >>>> extent there is one) in this case is that it doesn't protect
> >>>> *enough* information.
> >>>
> >>> Neither draft-fischer-sip-e2e-sec-media and
> >>> draft-wing-sip-identity-media
> >>> simply "sign less" -- please do not mis-characterize the
> >>> proposals.  Both
> >>> proposals require a public key exchange with the remote
> >>> party -- which
> >>> is far stronger than just using the IP address of the remote party
> >>> as is done by RFC4474.
> >>
> >> I don't actually think this characterization of 4474 is that  
> >> accurate.
> >> RFC 4474 does not use the IP address for authenticating the media.
> >> Rather, it authenticates the IP address as well as the rest of the
> >> SDP
> >
> > Which draft-kaplan-sip-baiting shows is insufficient at its intended
> > purpose.
> 
> I probably disagree but to sort that out ... What exactly do you see  
> as the purpose of 4474 which the baiting draft shows it does not meet?

The purpose of 4474 is to identity the calling party.  I believe that
is its primary purpose.

The baiting draft describes how an attacker can use a validly-signed
4474 message to fool a victim into thinking the calling party is
calling them.

> I'm trying to focus this conversation over to the 
> requirements instead  
> of the taking about solution mechanisms before we can agree what the  
> problem is.
> 
> Cullen <in my individual contributor role>

Thanks.

-d


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 09:47:56 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8013D3A691D;
	Wed,  6 Aug 2008 09:47:56 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AD9C43A6912
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 09:47:54 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.299
X-Spam-Level: 
X-Spam-Status: No, score=-2.299 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, MIME_8BIT_HEADER=0.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cY-B2yBmqQAG for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 09:47:53 -0700 (PDT)
Received: from wr-out-0506.google.com (wr-out-0506.google.com [64.233.184.235])
	by core3.amsl.com (Postfix) with ESMTP id 571D13A6903
	for <sip@ietf.org>; Wed,  6 Aug 2008 09:47:53 -0700 (PDT)
Received: by wr-out-0506.google.com with SMTP id 37so5799wra.17
	for <sip@ietf.org>; Wed, 06 Aug 2008 09:48:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;
	h=domainkey-signature:received:received:message-id:date:from:to
	:subject:in-reply-to:mime-version:content-type
	:content-transfer-encoding:content-disposition:references;
	bh=1Qmhu/O1K8EBTClV9NVay/XZHC2HopE+q3jq1kjThhc=;
	b=myYvwRZXh0eby0btAzqSg7Wo43/whBbTJ0VrGRCOZvP7d7bV7QpU/Me1VgobRgkPIo
	VYokt6X+zSxIph4Z2yqw0VjVX25KAiY8UdYc8UXA4We4GeXDSwlMA0Dt6wsHLigDMqfu
	zOQcvvbqUr7yQJn44xAV0UGfhzVzqskwxe130=
DomainKey-Signature: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma;
	h=message-id:date:from:to:subject:in-reply-to:mime-version
	:content-type:content-transfer-encoding:content-disposition
	:references;
	b=fkiuDSZxO+EMklCZmmgMJaftd1nB+QfuFeo2y0skjwKJ6/DBQjHMsrSZuOvoqkbqZL
	TPeJPhjT3NbW4OGZfJxd4mVVYtn2+FIcKUi/rR8u4StR+bfo1a5YxT8hCM9ItOncvpIs
	QNCaIGN49f0jhtUhwNwsfPvfsgy1/Q5ioqYX8=
Received: by 10.90.32.14 with SMTP id f14mr1742799agf.52.1218041306157;
	Wed, 06 Aug 2008 09:48:26 -0700 (PDT)
Received: by 10.90.88.2 with HTTP; Wed, 6 Aug 2008 09:48:26 -0700 (PDT)
Message-ID: <618e24240808060948j7094a4e5q2b5479bf6135dfb5@mail.gmail.com>
Date: Wed, 6 Aug 2008 18:48:26 +0200
From: "=?UTF-8?Q?Victor_Pascual_=C3=81vila?=" <victor.pascual.avila@gmail.com>
To: sip@ietf.org
In-Reply-To: <618e24240808051609g77245e31yb4a08dea928c8739@mail.gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
References: <618e24240808051609g77245e31yb4a08dea928c8739@mail.gmail.com>
Subject: [Sip] Questions on RFC4235 (Dialog Event Package)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

UGxlYXNlIGV4Y3VzZSBtZSBmb3IgY3Jvc3MtcG9zdGluZy4KCgotLS0tLS0tLS0tIEZvcndhcmRl
ZCBtZXNzYWdlIC0tLS0tLS0tLS0KRnJvbTogVmljdG9yIFBhc2N1YWwgw4F2aWxhIDx2aWN0b3Iu
cGFzY3VhbC5hdmlsYUBnbWFpbC5jb20+CkRhdGU6IFdlZCwgQXVnIDYsIDIwMDggYXQgMTowOSBB
TQpTdWJqZWN0OiBRdWVzdGlvbnMgb24gUkZDNDIzNSAoRGlhbG9nIEV2ZW50IFBhY2thZ2UpClRv
OiBzaXAtaW1wbGVtZW50b3JzQGxpc3RzLmNzLmNvbHVtYmlhLmVkdQoKCkZvbGtzLApKdXN0IGEg
ZmV3IHF1ZXN0aW9ucyBvbiBSRkM0MjM1IFsxXTogQW4gSU5WSVRFLUluaXRpYXRlZCBEaWFsb2cg
RXZlbnQKUGFja2FnZSBmb3IgdGhlIFNlc3Npb24gSW5pdGlhdGlvbiBQcm90b2NvbCAoU0lQKQoK
I1N1YnNjcmlwdGlvbiB0byBhIHNwZWNpZmljIGRpYWxvZwpUaGUgc3Vic2NyaWJlciBjb25zdHJ1
Y3RzIGEgU1VCU0NSSUJFIHJlcXVlc3Q6Ci1UaGUgRXZlbnQgaGVhZGVyIGNvbnRhaW5zIGEgdG9r
ZW4gd2hpY2ggaW5kaWNhdGVzIHRoZSB0eXBlIG9mIHN0YXRlCmZvciB3aGljaCBhIHN1YnNjcmlw
dGlvbiBpcyBiZWluZyByZXF1ZXN0ZWQ6IGRpYWxvZwotVGhlIEV2ZW50IGhlYWRlciBjb250YWlu
cyBwYXJhbWV0ZXJzOiBjYWxsLWlkLCB0by10YWcgYW5kIGZyb20tdGFnCgpUaGUgbm90aWZpZXIg
Y2hlY2tzIHRoYXQgdGhlIGV2ZW50IHBhY2thZ2Ugc3BlY2lmaWVkIGluIHRoZSBFdmVudApoZWFk
ZXIgKGRpYWxvZykgaXMgdW5kZXJzdG9vZCBidXQgdGhlIGV2ZW50IGhlYWRlciBwYXJhbWV0ZXJz
CihjYWxsLWlkLCB0by10YWcgYW5kIGZyb20tdGFnKSBkb24ndCBtYXRjaCB0byBhbnkgZXhpc3Rp
bmcgZGlhbG9nLgoKV2hpY2ggaXMgdGhlIHByb3BlciBiZWhhdmlvciBmb3IgdGhlIG5vdGlmaWVy
PwphKSBSZXR1cm4gYSAiNDg5IEJhZCBFdmVudCIgcmVzcG9uc2UgdG8gaW5kaWNhdGUgdGhhdCB0
aGUgc3BlY2lmaWVkCmV2ZW50L2V2ZW50IGNsYXNzIGlzIG5vdCB1bmRlcnN0b29kCmIpIEFjY2Vw
dCB0aGUgc3Vic2NyaXB0aW9uIGFuZCB0cmlnZ2VyIGEgTk9USUZZIG1lc3NhZ2UgaW5jbHVkaW5n
OgotU3Vic2NyaXB0aW9uLVN0YXRlIGhlYWRlciBmaWVsZCBzZXQgdG8gbm9yZXNvdXJjZQotQSBi
b2R5IGNvbnRhaW5pbmcgYW4gZXJyb3IgbWVzc2FnZQpjKSBPdGhlcnM/CgojU2VjdGlvbiAzLjMu
IFNVQlNDUklCRSBCb2RpZXMsIHNheXM6CkEgU1VCU0NSSUJFIHJlcXVlc3QgZm9yIGEgZGlhbG9n
IHBhY2thZ2UgTUFZIGNvbnRhaW4gYSBib2R5LiAgVGhpcwpib2R5IGRlZmluZXMgYSBmaWx0ZXIg
dG8gYmUgYXBwbGllZCB0byB0aGUgc3Vic2NyaXB0aW9uLiAgRmlsdGVyCmRvY3VtZW50cyBhcmUg
bm90IHNwZWNpZmllZCBpbiB0aGlzIGRvY3VtZW50LCBhbmQgYXQgdGhlIHRpbWUgb2YKd3JpdGlu
ZywgdGhleSBhcmUgZXhwZWN0ZWQgdG8gYmUgdGhlIHN1YmplY3Qgb2YgZnV0dXJlIHN0YW5kYXJk
aXphdGlvbgphY3Rpdml0eS4KCklzIHRoZXJlIGFueSBmdXJ0aGVyIHdvcmsgb24gaXQ/CgoKWzFd
IGZ0cDovL2Z0cC5yZmMtZWRpdG9yLm9yZy9pbi1ub3Rlcy9yZmM0MjM1LnR4dAoKQ2hlZXJzLAot
LQpWaWN0b3IgUGFzY3VhbCDDgXZpbGEKCgoKLS0gClZpY3RvciBQYXNjdWFsIMOBdmlsYQpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpTaXAgbWFpbGluZyBs
aXN0ICBodHRwczovL3d3dy5pZXRmLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NpcApUaGlzIGxpc3Qg
aXMgZm9yIE5FVyBkZXZlbG9wbWVudCBvZiB0aGUgY29yZSBTSVAgUHJvdG9jb2wKVXNlIHNpcC1p
bXBsZW1lbnRvcnNAY3MuY29sdW1iaWEuZWR1IGZvciBxdWVzdGlvbnMgb24gY3VycmVudCBzaXAK
VXNlIHNpcHBpbmdAaWV0Zi5vcmcgZm9yIG5ldyBkZXZlbG9wbWVudHMgb24gdGhlIGFwcGxpY2F0
aW9uIG9mIHNpcA==


From sip-bounces@ietf.org  Wed Aug  6 09:53:16 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BA93F3A6869;
	Wed,  6 Aug 2008 09:53:16 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 08F6A3A68C0
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 09:53:15 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6vBqYT-iZzDo for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 09:53:14 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 3CC2C3A6869
	for <sip@ietf.org>; Wed,  6 Aug 2008 09:53:14 -0700 (PDT)
Received: from [192.168.2.2] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m76GpXsa025154
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Wed, 6 Aug 2008 11:51:35 -0500
Message-ID: <4899D690.3030606@softarmor.com>
Date: Wed, 06 Aug 2008 11:51:28 -0500
From: Dean Willis <dean.willis@softarmor.com>
User-Agent: Icedove 1.5.0.14eol (X11/20080724)
MIME-Version: 1.0
To: Eric Rescorla <ekr@networkresonance.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>	<48919248.7060600@cisco.com>	<0ae201c8f310$d183a0f0$3675150a@cisco.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>	<20080731205152.03E7E514892@kilo.rtfm.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>	<20080801010212.654B5515743@kilo.rtfm.com>	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>	<20080801134611.1B8C9516C54@kilo.rtfm.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>	<20080805145945.5B61650846@romeo.rtfm.com>	<02b801c8f70b$675fed60$c2f0200a@cisco.com>	<20080805151333.DDB5350846@romeo.rtfm.com>	<038e01c8f713$84e3cca0$c2f0200a@cisco.com>	<20080805161109.ABB8F50846@romeo.rtfm.com>	<053c01c8f720$647c21d0$c2f0200a@cisco.com>	<20080805204756.A7DC0524DAD@kilo.rtfm.com>	<157a01c8f73d$e4a2cf40$c2f0200a@cisco.com>
	<20080806035333.C83C95263F1@kilo.rtfm! .com>
In-Reply-To: <20080806035333.C83C95263F1@kilo.rtfm.com>
X-Enigmail-Version: 0.94.2.0
Cc: 'Cullen Jennings' <fluffy@cisco.com>, 'SIP IETF' <sip@ietf.org>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>, "'Elwell,
	John'" <john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Eric Rescorla wrote:

> Unfortunately, this is the same conflation of concerns that has
> characterized discussion of these drafts from the beginning. Quoting
> my review of -01 from 2007/11:
> 
>   This draft seems to do two distinct things:
>   
>   - One specify a variant of RFC 4474 which signs a lot fewer headers.
>     [This should have said less of the message -- EKR]
>   - Specify a set of mechanisms to cryptographically prove that a given media
>     stream corresponds to a given SDP offer/answer.
> 
> These issues are wholly orthogonal and it just confuses the discussion
> to try to discuss them together. 

They may be wholly orthogonal from one point of view, but I don't think
they can be deployed independently. You have to have BOTH measures in
place to gain the benefit of the proposal.

--
dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 10:08:00 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3F5E73A69C5;
	Wed,  6 Aug 2008 10:08:00 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0FE273A69C3
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 10:07:59 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.703
X-Spam-Level: 
X-Spam-Status: No, score=-1.703 tagged_above=-999 required=5 tests=[AWL=0.896, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3XynxNdS8IXI for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 10:07:58 -0700 (PDT)
Received: from romeo.rtfm.com (romeo.rtfm.com [74.95.2.173])
	by core3.amsl.com (Postfix) with ESMTP id 4EB343A6869
	for <sip@ietf.org>; Wed,  6 Aug 2008 10:07:58 -0700 (PDT)
Received: from romeo.rtfm.com (localhost.rtfm.com [127.0.0.1])
	by romeo.rtfm.com (Postfix) with ESMTP id 2165850846;
	Wed,  6 Aug 2008 10:18:01 -0700 (PDT)
Date: Wed, 06 Aug 2008 10:18:01 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: Dean Willis <dean.willis@softarmor.com>
In-Reply-To: <4899D690.3030606@softarmor.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
	<20080805145945.5B61650846@romeo.rtfm.com>
	<02b801c8f70b$675fed60$c2f0200a@cisco.com>
	<20080805151333.DDB5350846@romeo.rtfm.com>
	<038e01c8f713$84e3cca0$c2f0200a@cisco.com>
	<20080805161109.ABB8F50846@romeo.rtfm.com>
	<053c01c8f720$647c21d0$c2f0200a@cisco.com>
	<20080805204756.A7DC0524DAD@kilo.rtfm.com>
	<157a01c8f73d$e4a2cf40$c2f0200a@cisco.com>
	<20080806035333.C83C95263F1@kilo.rtfm!.com>
	<20080806035333.C83C95263F1@kilo.rtfm.com>
	<4899D690.3030606@softarmor.com>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.3 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080806171801.2165850846@romeo.rtfm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell,
	John'" <john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

At Wed, 06 Aug 2008 11:51:28 -0500,
Dean Willis wrote:
> 
> Eric Rescorla wrote:
> 
> > Unfortunately, this is the same conflation of concerns that has
> > characterized discussion of these drafts from the beginning. Quoting
> > my review of -01 from 2007/11:
> > 
> >   This draft seems to do two distinct things:
> >   
> >   - One specify a variant of RFC 4474 which signs a lot fewer headers.
> >     [This should have said less of the message -- EKR]
> >   - Specify a set of mechanisms to cryptographically prove that a given media
> >     stream corresponds to a given SDP offer/answer.
> > 
> > These issues are wholly orthogonal and it just confuses the discussion
> > to try to discuss them together. 
> 
> They may be wholly orthogonal from one point of view, but I don't think
> they can be deployed independently. You have to have BOTH measures in
> place to gain the benefit of the proposal.

I don't see how that's the case. Can you explain?

-Ekr
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 10:15:57 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D74FB3A691A;
	Wed,  6 Aug 2008 10:15:57 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 73F9F3A691A
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 10:15:57 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.552
X-Spam-Level: 
X-Spam-Status: No, score=-6.552 tagged_above=-999 required=5 tests=[AWL=0.047, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mtUWs+jXmNjx for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 10:15:56 -0700 (PDT)
Received: from sj-iport-1.cisco.com (sj-iport-1.cisco.com [171.71.176.70])
	by core3.amsl.com (Postfix) with ESMTP id 5D6D03A67C0
	for <sip@ietf.org>; Wed,  6 Aug 2008 10:15:56 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,315,1215388800"; d="scan'208";a="62295152"
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-1.cisco.com with ESMTP; 06 Aug 2008 17:16:27 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-3.cisco.com (8.12.11/8.12.11) with ESMTP id m76HGRCG005023; 
	Wed, 6 Aug 2008 10:16:27 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m76HGKHi003212;
	Wed, 6 Aug 2008 17:16:22 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Dean Willis'" <dean.willis@softarmor.com>,
	"'Eric Rescorla'" <ekr@networkresonance.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>	<48919248.7060600@cisco.com>	<0ae201c8f310$d183a0f0$3675150a@cisco.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>	<20080731205152.03E7E514892@kilo.rtfm.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>	<20080801010212.654B5515743@kilo.rtfm.com>	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>	<20080801134611.1B8C9516C54@kilo.rtfm.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>	<20080805145945.5B61650846@romeo.rtfm.com>	<02b801c8f70b$675fed60$c2f0200a@cisco.com>	<20080805151333.DDB5350846@romeo.rtfm.com>	<038e01c8f713$84e3cca0$c2f0200a@cisco.com>	<20080805161109.ABB8F50846@romeo.rtfm.com>	<053c01c8f720$647c21d0$c2f0200a@cisco.com>	<20080805204756.A7DC0524DAD@kilo.rtfm.com>	<157a01c8f73d$e4a2cf40$c2f0200a@cisco.com>
	<20080806035333.C83C95263F1@kilo.rtfm! .com> <4899D690.303
	0606@softarmor.com>
Date: Wed, 6 Aug 2008 10:16:18 -0700
Message-ID: <041901c8f7e8$28654d20$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acj35P2j4EM0XkVXTRqFbR3w24tvDAAApUYg
In-Reply-To: <4899D690.3030606@softarmor.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=899; t=1218042987; x=1218906987;
	c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=bOndDlkVvBGa9GXP4I6REe512/ue2ePG+cByOYq1Svs=;
	b=GMx7UngeOR8Qu6aWW2z6IW3wfUn5PK+YjPXG0TRtWerOMBaj2ZoxJ/jCPH
	bEA+UBNd8D+rNyq3/XdLl4z64kEdqQ20vL68A7neEMml9HMMJKHe7w6JipdQ
	EyxYLziY3/;
Authentication-Results: sj-dkim-3; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim3002 verified; ); 
Cc: 'Cullen Jennings' <fluffy@cisco.com>, 'SIP IETF' <sip@ietf.org>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>, "'Elwell,
	John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> Eric Rescorla wrote:
> 
> > Unfortunately, this is the same conflation of concerns that has
> > characterized discussion of these drafts from the beginning. Quoting
> > my review of -01 from 2007/11:
> > 
> >   This draft seems to do two distinct things:
> >   
> >   - One specify a variant of RFC 4474 which signs a lot 
> fewer headers.
> >     [This should have said less of the message -- EKR]
> >   - Specify a set of mechanisms to cryptographically prove 
> that a given media
> >     stream corresponds to a given SDP offer/answer.
> > 
> > These issues are wholly orthogonal and it just confuses the 
> discussion
> > to try to discuss them together. 
> 
> They may be wholly orthogonal from one point of view, but I 
> don't think
> they can be deployed independently. You have to have BOTH measures in
> place to gain the benefit of the proposal.

Right.

-d

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 10:31:52 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id DE0333A69CA;
	Wed,  6 Aug 2008 10:31:52 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 845BD3A69C5
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 10:31:51 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 07Vhu3jJGy2V for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 10:31:50 -0700 (PDT)
Received: from zcars04f.nortel.com (zcars04f.nortel.com [47.129.242.57])
	by core3.amsl.com (Postfix) with ESMTP id 897FA3A68F1
	for <sip@ietf.org>; Wed,  6 Aug 2008 10:31:50 -0700 (PDT)
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	m76HWID10402; Wed, 6 Aug 2008 17:32:18 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 12:32:16 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF18698D46@zrc2hxm0.corp.nortel.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
Thread-Index: Acj3u7iycdG1u1Z7SweRrMNeQhW48gAAJoMQAAtcdfA=
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com> <48999208.3030602@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
From: "Francois Audet" <audet@nortel.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>,
	"Anders Kristensen" <andersk@cisco.com>
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> I DO agree, however, that there is currently no general way 
> to associate media with dialogs. In cases where you have 
> security associations for the media it may be possible, 
> however (I am no expert on that, though).
> 
> But, the how-to-associate-media-with-dialogs has also been 
> discussed every now and then, and there seems to be interest 
> among people (both in IETF and other SDOs) to start working 
> on a general solution. But, that work would also be outside 
> the scope of 199 (I guess it wouldn't necessarily even be 
> done in SIP/SIPPING - at least not without involvement of 
> other groups).

This is what worries me: we are defining micro-procedures that
don't really address the whole problem with the vague hope that
one day it will actually be useful. MAYBE it will help with 
media stream choosing. MAYBE it will help with HERFP.

I find it unproductive to standardized protocol before we
know if it actually helps in fixing actual problems.

So don't get me wrong: I am not against us working on 199. I
just don't think we should RFC it before we have progressed
along the rest of the procedures that would actually make it
useful in the real world. If this is done through different drafts,
be it. But there is definitively inter-dependency between them.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 11:06:36 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5FAA73A6A5E;
	Wed,  6 Aug 2008 11:06:36 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8D7AD3A6A5E
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 11:06:34 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.253
X-Spam-Level: 
X-Spam-Status: No, score=-6.253 tagged_above=-999 required=5
	tests=[AWL=-0.004, BAYES_00=-2.599, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id yM8WrFgxjvAg for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 11:06:33 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 697DC3A6946
	for <sip@ietf.org>; Wed,  6 Aug 2008 11:06:33 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	4BB6220069; Wed,  6 Aug 2008 20:06:51 +0200 (CEST)
X-AuditID: c1b4fb3e-a5e7fbb000007a96-51-4899e83b4347
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	288F221026; Wed,  6 Aug 2008 20:06:51 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 20:06:50 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 20:06:50 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78CF@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
thread-index: Acj3u7iycdG1u1Z7SweRrMNeQhW48gAAJoMQAAtcdfAAAMcaUw==
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com> <48999208.3030602@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698D46@zrc2hxm0.corp.nortel.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Francois Audet" <audet@nortel.com>, "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Anders Kristensen" <andersk@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 18:06:50.0923 (UTC)
	FILETIME=[33416FB0:01C8F7EF]
X-Brightmail-Tracker: AAAAAA==
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

>> I DO agree, however, that there is currently no general way 
>> to associate media with dialogs. In cases where you have 
>> security associations for the media it may be possible, 
>> however (I am no expert on that, though).
>> 
>> But, the how-to-associate-media-with-dialogs has also been 
>> discussed every now and then, and there seems to be interest 
>> among people (both in IETF and other SDOs) to start working 
>> on a general solution. But, that work would also be outside 
>> the scope of 199 (I guess it wouldn't necessarily even be 
>> done in SIP/SIPPING - at least not without involvement of 
>> other groups).

>This is what worries me: we are defining micro-procedures that
>don't really address the whole problem with the vague hope that
>one day it will actually be useful. MAYBE it will help with 
>media stream choosing. MAYBE it will help with HERFP.
>
>I find it unproductive to standardized protocol before we
>know if it actually helps in fixing actual problems.

There are already problems which 199 CAN solve, without any other work.

And, regarding associating media with dialogs, I belive it today can be done at least when SRTP is used - without any further work. I haven't looked into other media security mechanisms.

>So don't get me wrong: I am not against us working on 199. I
>just don't think we should RFC it before we have progressed
>along the rest of the procedures that would actually make it
>useful in the real world. If this is done through different drafts,
>be it. But there is definitively inter-dependency between them.

The purpose of 199 is to provide a mechanism indicating that an early dialog has been terminated. Period. There are some details we need to sort out, but at the end of the day there aren't that many different directions we can go as far as the basic purpose of 199 is concerned.

IF we at some point want to use 199 for HERPF, we can easily say that entities which support it shall insert a sipfrag in the 199 response. That is why we decided not to say anything about it, so that we don't forbid it for future use.

IF we at some point get a general mechanism to associate dialogs with headers, and that mechanism uses e.g. some new SIP headers, nothing prevents us from using those in 199.

Etc etc etc.

There IS a need for "basic 199 functionality" today. Based on previous work, solving the HERPF problem etc can take quite a while, and I see no reason to delay 199 just because of that. That will again cause delays and show inefficiency, when we try to save the world in one single go. Instead I think we shall try not to restrict things for no good reason (something we should also keep in mind for other work we do), in case it may be needed later.   

Regards,

Christer
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 11:12:51 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4316B3A6A91;
	Wed,  6 Aug 2008 11:12:51 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0AB273A69C1
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 11:12:50 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pr5U2B1j7C65 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 11:12:49 -0700 (PDT)
Received: from zcars04e.nortel.com (zcars04e.nortel.com [47.129.242.56])
	by core3.amsl.com (Postfix) with ESMTP id 2C9A03A6A33
	for <sip@ietf.org>; Wed,  6 Aug 2008 11:12:49 -0700 (PDT)
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04e.nortel.com (Switch-2.2.0/Switch-2.2.0) with ESMTP id
	m76IBGg06773; Wed, 6 Aug 2008 18:11:16 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 13:12:53 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF18698EB8@zrc2hxm0.corp.nortel.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C78CF@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
Thread-Index: Acj3u7iycdG1u1Z7SweRrMNeQhW48gAAJoMQAAtcdfAAAMcaUwAAoUbA
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com> <48999208.3030602@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698D46@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CF@esealmw113.eemea.ericsson.se>
From: "Francois Audet" <audet@nortel.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>,
	"Anders Kristensen" <andersk@cisco.com>
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 
> There are already problems which 199 CAN solve, without any 
> other work.

And those are?

They should be clearly described. All I hear is examples of things where
199 is not sufficient (e.g., Media choosing, HERFP). 

If SRTP actually solves the problem for media choosing, then let's state it in the 
document.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 11:16:31 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 89CD128C0D6;
	Wed,  6 Aug 2008 11:16:31 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 820283A69C5
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 11:16:30 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -7.253
X-Spam-Level: 
X-Spam-Status: No, score=-7.253 tagged_above=-999 required=5 tests=[AWL=0.996, 
	BAYES_00=-2.599, GB_I_INVITATION=-2, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id TLUq-vJcvoH7 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 11:16:29 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id C5BA83A691A
	for <sip@ietf.org>; Wed,  6 Aug 2008 11:16:28 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	B13CE2055F; Wed,  6 Aug 2008 20:17:01 +0200 (CEST)
X-AuditID: c1b4fb3e-a5e7fbb000007a96-ff-4899ea9da548
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	8CEAD212D2; Wed,  6 Aug 2008 20:17:01 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 20:17:01 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 20:17:00 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78D0@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Multiple early-dialog usages [was RE: [Sip] Comments on
	draft-ietf-sip-199-00.txt]
thread-index: Acj31/I9aZo96reoQtW8MzeRxGfDEwAF1Rj+
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
	<489861C9.2020507@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
	<48999834.4080304@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03DBB10D@esealmw118.eemea.ericsson.se>
	<CA9998CD4A020D418654FCDEF4E707DF07548A9B@esealmw113.eemea.ericsson.se>
	<4899C166.70109@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 18:17:01.0111 (UTC)
	FILETIME=[9EF4BC70:01C8F7F0]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>, Ian Elz <ian.elz@ericsson.com>
Subject: Re: [Sip] Multiple early-dialog usages [was RE: Comments on
	draft-ietf-sip-199-00.txt]
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

>>I've changed the name of this thread, because I think the scope is wider
>>than 199 :)
>
>Perhaps. But I don't think there is much to discuss.
>
>It seems clear that we don't have any way to cause a dialog with 
>*multiple* *early* dialog usages. This is because only an 
>invite-dialog-usage can be early, and you can only have one of those per 
>dialog.
>
>It seems technically possible to have a dialog that has both an early 
>dialog usage and a final dialog usage. There may be question of whether 
>there is practical value in this, but for now I will simply assume it is 
>possible. We can discuss if it might not be possible, or if it should be 
>declared so, but I don't know if we need to.
>
>RFC 5057 addresses the impact of responses on the state of transactions, 
>dialog usages, and dialogs. The interesting question is whether the 
>proposed 199 response would require some alteration to 5057. The reason 
>its interesting is because the 199 is effectively a final response in 
>disguise. But that brings it back to something that ought to be 
>discussed on the 199 thread. 

So, from a 199 point of view I guess the only thing we can do at the moment is to provide some text and say that care shall be taken when multiple dialogusages exist, and the 199 doesn't provide more information.

I think it is extremely rare that one would first establish a subscription dialog, and then send an INVITE and create an early invite usage within that dialog. I would even dare to say that no such implementations exist today, but I can of course be wrong...

As imentioned earlier, I also think it's not a good idea to create subscription usages within an early INVITE dialog. In case of forking you may send SUBSCRIBE to all UASes, and when some sends 200 OK for the INVITE you may have to unsubscribe to all the other UASes. etc etc.
 
And, because of all issues described in RFC 5057, I hope people won't define such use-case in future either. 

Regards,

Christer

	

> 
> 
> 
> -----Original Message-----
> From: Ian Elz 
> Sent: 6. elokuuta 2008 16:51
> To: Paul Kyzivat
> Cc: Christer Holmberg; SIP IETF
> Subject: RE: [Sip] Comments on draft-ietf-sip-199-00.txt
> 
> Paul,
> 
> I only included 'early dialog' as this is the term that is already used.
> 
> We cannot criticize RFC 3261 for this as when it was written INVITE was
> the ONLY dialog creating transaction.
> 
> Should some input be given to Robert Sparks' invfix draft as it is
> proposing corrections to the INVITE transaction state machines. 
> 
> Based on the  existing draft (-02) sending or receiving a 1xx response
> places the transaction in the 'proceeding' state which is does not exit
> until a final response has been sent or received, or I assume the
> dialog/usage terminates.
> 
> If we retain the state model of proposed in invfix then the 199 response
> should be treated as an invitation to the UAC to terminate the early
> dialog usage with a BYE method. If this does not happen the transaction
> will remain as 'proceeding' and the early dialog usage may also remain.
> 
> The alternative is to modify the proposed transaction state models for
> special handling for the 199 response. This is something which I am not
> sure that I would favour.
> 
> Ian Elz
> 
> System Manager
> DUCI LDC UK
> (Lucid Duck)
> 
> Office: + 44 24 764 35256
> gsm: +44 7801723668
> ian.elz@ericsson.com
> 
> 
> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]
> Sent: 06 August 2008 13:25
> To: Ian Elz
> Cc: Christer Holmberg; SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
> 
> 
> 
> Ian Elz wrote:
>> Paul,
>>
>> I don't believe that you can create 'multiple early dialog usages'.
>>
>> On an INVITE transaction can create an early dialog. The other dialog
>> creating transactions REFER and SUBSCRIBE, can only create established
>> dialogs.
>>
>> As you cannot start a second INVITE transaction while there is an
>> outstanding INVITE transaction on a dialog, early or otherwise.
>>
>> If you send a REFER or SUBSCRIBE method on an early dialog and you get
>> an acceptance response then you have an established dialog.
> 
> Agreed. I should have pointed that out.
> 
> However, the issue arises if you can get an early invite dialog usage 
> with a confirmed dialog usage. In that case one must be careful with the
> 
> rules to ensure that you don't accidentally terminate the confirmed 
> usage as a side effect of processing the 199 on the early invite dialog 
> usage.
> 
>> If this is the early-dialog from an INVITE transaction then key
> question
>> is what is the validity of a provisional response in creating a
> dialog.
>> Is it early or established. While the provisional response is clearly
>> just that from a transaction perspective in this situation the meaning
>> of the proposed 199 provisional response is now transaction affecting
>> and not dialog affecting, i.e. the INVITE usage will not become
>> established although the other usage may be established.
>>
>> The existing state models in sip only discuss dialogs and transactions
>> and have not considered the dialog usage. When you send a reliable
>> provisional response to an INVITE you are in effect creating an
>> early-dialog usage. If this is the only dialog usage on the dialog you
>> have also created an early-dialog. If there is another usage on the
> same
>> dialog then the dialog state will depend upon the state of the other
>> dialog.
> 
> IMO there really shouldn't be any "early dialog", ever. The dialog comes
> 
> into existence, and departs, based on the existence of at least one 
> usage. The dialog is the same whether the usages are early or late, or a
> 
> combination.
> 
> I agree that it would be helpful to recast all the state machines in 
> terms of dialog usages rather than dialogs. Maybe that is a job for the 
> draft standard version of 3261.
> 
>> RFC5057, Multiple Dialog Usage (informational) does not discuss the
>> details involved in multiple usages and the impact on the sip state
>> models but I hope that this was a consideration when the initial
> drafts
>> were prepared. 
>>
>> I am unsure if the concept of multiple usages on an early dialog was
>> ever considered when RFC5057 was in draft stage. The nuances of
> multiple
>> dialogs on an established dialog appears to have been enough to
> suggest
>> that the RFC specifically not recommend multiple usages without
> getting
>> into the 'dark area' of early dialogs and multiple usages.
>>
>> Whether it make sense to use a REFER or SUBSCRIBE inside an early
> dialog
>> is problematic. I am unsure whether these do make any sense. Would you
>> want to subscribe to specific event which occurs during the early
> dialog
>> phase of an INVITE transaction? Would you want to use REFER to perform
> a
>> transfer of a ringing call and does the protocol actually support
> this?
>> If the answer to these questions is a definitive 'NO' then the issue
>> will have resolves itself. I fear however that there is no definitive
>> answer at this time.
> 
> Right.
> 
> 	Paul
> 
>> Ian Elz
>>
>> System Manager
>> DUCI LDC UK
>> (Lucid Duck)
>>
>> Office: + 44 24 764 35256
>> gsm: +44 7801723668
>> ian.elz@ericsson.com
>>
>>
>> -----Original Message-----
>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
>> Sent: 05 August 2008 15:21
>> To: Christer Holmberg
>> Cc: SIP IETF
>> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
>>
>>
>>
>> Christer Holmberg wrote:
>>> Hi, 
>>>
>>>>> 7) Section 7: "A UAC that receives a 199 response for an early
>> dialog
>>> MUST NOT
>>>>> send any further requests on that dialog...". Can you point to any
>>> list discussion
>>>>> around this requirement? I think there's some danger to consider
>>> there. At the
>>>>> very least we need to make this statement multiple-usage safe.
>>>> This is a very good catch. This needs to be aligned with
> dialogusage.
>>> If the 199 contained the final response that triggered it, then that
>>> final response could be used to determine the impact 
>>>> on the dialog or dialog usage or just the transaction. But if the
> 199
>>> doesn't contain the final response, then this is a problem.
>>>
>>> I forgot to bring this issue up in Dublin. Sorry for that.
>>>
>>> First, we need to remember that the UAS may terminate every
>> dialogusage
>>> when sending the final response (depending on what final response is
>>> sent), without the UAC knowing it. And, due to the forking rules, the
>>> final response which is sent to the UAC may not even be the same
> which
>>> was sent by the UAS, if a final response from another UAS is chosen
> as
>>> the "best".
>>>
>>> Second, we need to remember that this only affects
> early-dialogusages.
>>> If needed, I guess we could include the final response which
> triggered
>>> the 199, but we could also simply say that if the UAC does not know
> to
>>> which dialogusage (if there are many) the 199 applies, it should not
>> do
>>> anything which may affect other usages for the same early dialog.
>> The establishment of multiple early dialog usages is a pretty strange 
>> thing. Do we know of any use cases for this? (E.g. an in-dialog REFER
> on
>> an early INVITE. Is that legal?)
>>
>> Assuming it can arise, then I agree it is reasonable to treat the 199
> as
>> affecting only its dialog usage unless there is info with it (such as 
>> the actual final response code) that gives evidence that the whole 
>> dialog is gone.
>>
>> 	Thanks,
>> 	Paul
>>
>>
> 

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 11:17:13 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B678228C15F;
	Wed,  6 Aug 2008 11:17:13 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 05A5228C155
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 11:17:13 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hZcLG-H9fnSn for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 11:17:12 -0700 (PDT)
Received: from mailsrv.ams.gblxint.com (unknown-230-det.globalcrossing.com
	[64.208.159.230])
	by core3.amsl.com (Postfix) with ESMTP id 39B6B28C117
	for <sip@ietf.org>; Wed,  6 Aug 2008 11:17:12 -0700 (PDT)
Received: from w3uspdyvs212.ams.gblxint.com (w3uspdyvs212.ams.gblxint.com
	[10.60.54.213])
	by mailsrv.ams.gblxint.com (Postfix) with ESMTP id B4E239CBF;
	Wed,  6 Aug 2008 14:17:41 -0400 (EDT)
Received: from w3ussfj136.ams.gblxint.com ([10.10.63.29]) by
	w3uspdyvs212.ams.gblxint.com with Microsoft SMTPSVC(6.0.3790.3959); 
	Wed, 6 Aug 2008 14:17:42 -0400
Received: from w3ussfjvs151.ams.gblxint.com (10.10.172.136) by
	w3ussfj136.ams.gblxint.com (10.10.63.29) with Microsoft SMTP Server
	(TLS) id 8.1.291.1; Wed, 6 Aug 2008 14:17:40 -0400
Received: from EVS10.ams.gblxint.com ([10.10.63.53]) by
	w3ussfjvs151.ams.gblxint.com ([10.10.172.136]) with mapi;
	Wed, 6 Aug 2008 14:17:40 -0400
From: "Uzelac, Adam" <Adam.Uzelac@globalcrossing.com>
To: Dan Wing <dwing@cisco.com>, 'Cullen Jennings' <fluffy@cisco.com>,
	'Adam Roach' <adam@nostrum.com>
Date: Wed, 6 Aug 2008 14:17:39 -0400
Thread-Topic: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
	SIP	Identity)
Thread-Index: Acj3y8jW87uJNoXDTzaLxzToRrIa/AAFc+GwAANObKA=
Message-ID: <4DAE5E60BA49D8419D7C8832503F5FFC072B9A6B2A@EVS10.ams.gblxint.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<FE11649F-C3C2-494F-8C40-569E83E91B80@softarmor.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26D3A@GBNTHT12009MSX.gb002.siemens.net>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817B5A6@EVS10.ams.gblxint.com><06BFFD03-B8FC-47FC-8659-43BF4B60A3B6@softarmor.com>
	<4891BAA4.7040305@nostrum.com>	<0af101c8f312$c6638170$3675150a@cisco.com>
	<4891C350.1030504@nostrum.com>
	<0b0801c8f315$31cb02b0$3675150a@cisco.com>
	<4891CC9B.4010507@nostrum.com>
	<D0F7A190-2098-4858-8FD5-55C385D611C7@cisco.com>
	<02f901c8f7e1$a8e2d780$c2f0200a@cisco.com>
In-Reply-To: <02f901c8f7e1$a8e2d780$c2f0200a@cisco.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
MIME-Version: 1.0
X-OriginalArrivalTime: 06 Aug 2008 18:17:42.0918 (UTC)
	FILETIME=[B7DFFA60:01C8F7F0]
X-TM-AS-Product-Ver: SMEX-8.0.0.1181-5.500.1027-16078.000
X-TM-AS-Result: No--6.707000-8.000000-31
X-TM-AS-User-Approved-Sender: No
X-TM-AS-User-Blocked-Sender: No
Cc: 'SIP IETF' <sip@ietf.org>, 'Dean Willis' <dean.willis@softarmor.com>
Subject: Re: [Sip] Alternative SIP Identity Approach (was re: Thoughts on
 SIP	Identity)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> I would like to accomplish end-to-end identity through SBCs, rather
> than hop-by-hop identity that exists with today's RFC4474 through SBCs.
>
> -d

I agree with Dan here that end-to-end identity through SBCs should be the main driver. A world exists today where intermediaries are modifying signed information, and such modifications breaks RFC 4474 signatures. I understand that omitting elements that are signed leaves security gaps, but the reality is that these modifications are being done for reasons that are valid for all parties involved, mainly to complete the call.  Without permitting these changes to occur only ensure that 4474 will not enjoy mass adoption.

Adam

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 11:37:07 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 075BF3A6ADF;
	Wed,  6 Aug 2008 11:37:07 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 26B903A6ADF
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 11:37:06 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.29
X-Spam-Level: 
X-Spam-Status: No, score=-6.29 tagged_above=-999 required=5 tests=[AWL=-0.041, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Je7DAVDb5X7E for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 11:37:05 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 0B27E3A6AD6
	for <sip@ietf.org>; Wed,  6 Aug 2008 11:37:04 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	0A1BF207BF; Wed,  6 Aug 2008 20:37:36 +0200 (CEST)
X-AuditID: c1b4fb3e-aa688bb000007a96-f7-4899ef6f43a7
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	D6AAD20667; Wed,  6 Aug 2008 20:37:35 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 20:37:35 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 20:37:35 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78D2@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
thread-index: Acj3u7iycdG1u1Z7SweRrMNeQhW48gAAJoMQAAtcdfAAAMcaUwAAoUbAAABs6Ac=
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com> <48999208.3030602@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698D46@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CF@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698EB8@zrc2hxm0.corp.nortel.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Francois Audet" <audet@nortel.com>, "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Anders Kristensen" <andersk@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 18:37:35.0822 (UTC)
	FILETIME=[7EE6AEE0:01C8F7F3]
X-Brightmail-Tracker: AAAAAA==
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,
 
>>There are already problems which 199 CAN solve, without any 
>>other work.
>
>And those are?
>
>They should be clearly described. All I hear is examples of things where
>199 is not sufficient (e.g., Media choosing, HERFP). 

I have tried to describe examples not related to media choosing.

One example is related to in-band procedures (e.g. ICE, in-band security negotiations). At least in the mobile world those can consume radio- and battery resources, so it is good to be informed about terminated dialogs as soon as possible, without having to detect it using re-transmission failures etc.

Another example in the mobile world is related to codecs and DSP resources. If you have negotiated codec X only for one early dialog, and that dialog is terminated, you know that you can free the codec X resources (you can do that without having to be able to associate media with dialogs) and e.g .. allow reservation of other codecs needed for other dialogs. Especially when we move into the world of multimedia, using video etc, this kind of functionality becomes important. 

Another example in the mobile world is radio resources. In case of forking and multiple stream there may not be possible to allow early media on all dialogs, so some dialogs may e.g. be set to "inactive". It is then very useful to know when a dialog is terminated, so that media can be allowed on other dialogs. How those inactive decissions are made is based on local policy etc, but 199 provides a tool which is useful for taking those decissions.

Due to the cases above, and others, terminals may restrict the number of accepted SIP dialogs, so by knowing when one dialog has been terminated it can accept another dialog.

These are not theoretical issues, but problems that exist today. Maybe not in your PC with unlimited memory, connected to fixed access with unlimited bandwidth, but in some other places :)

>If SRTP actually solves the problem for media choosing, then let's state it in the 
>document.

Sure, I can do that.

Regards,

Christer
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 11:43:52 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 7CF0928C1B7;
	Wed,  6 Aug 2008 11:43:52 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 55C9B3A6B22
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 11:43:51 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6SR4z9aebKJ4 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 11:43:50 -0700 (PDT)
Received: from zrtps0kn.nortel.com (zrtps0kn.nortel.com [47.140.192.55])
	by core3.amsl.com (Postfix) with ESMTP id 0A8453A6A1A
	for <sip@ietf.org>; Wed,  6 Aug 2008 11:43:46 -0700 (PDT)
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zrtps0kn.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	m76IiFB00478; Wed, 6 Aug 2008 18:44:15 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 13:43:51 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF18698FC3@zrc2hxm0.corp.nortel.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C78D2@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
Thread-Index: Acj3u7iycdG1u1Z7SweRrMNeQhW48gAAJoMQAAtcdfAAAMcaUwAAoUbAAABs6AcAALriUA==
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com> <48999208.3030602@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698D46@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CF@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698EB8@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78D2@esealmw113.eemea.ericsson.se>
From: "Francois Audet" <audet@nortel.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>,
	"Anders Kristensen" <andersk@cisco.com>
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Ok, now we are getting somewhere.

Can you describe that in the document.

Also, in the REQ section, let's write requirements that are specific
and are able to address the problems you listed below.

The ICE/DTLS-SRTP one is quite important.  

> -----Original Message-----
> From: Christer Holmberg [mailto:christer.holmberg@ericsson.com] 
> Sent: Wednesday, August 06, 2008 11:38
> To: Audet, Francois (SC100:3055); Paul Kyzivat; Anders Kristensen
> Cc: sip@ietf.org; DRAGE, Keith (Keith)
> Subject: VS: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
> 
> 
> Hi,
>  
> >>There are already problems which 199 CAN solve, without any other 
> >>work.
> >
> >And those are?
> >
> >They should be clearly described. All I hear is examples of things 
> >where
> >199 is not sufficient (e.g., Media choosing, HERFP). 
> 
> I have tried to describe examples not related to media choosing.
> 
> One example is related to in-band procedures (e.g. ICE, 
> in-band security negotiations). At least in the mobile world 
> those can consume radio- and battery resources, so it is good 
> to be informed about terminated dialogs as soon as possible, 
> without having to detect it using re-transmission failures etc.
> 
> Another example in the mobile world is related to codecs and 
> DSP resources. If you have negotiated codec X only for one 
> early dialog, and that dialog is terminated, you know that 
> you can free the codec X resources (you can do that without 
> having to be able to associate media with dialogs) and e.g .. 
> allow reservation of other codecs needed for other dialogs. 
> Especially when we move into the world of multimedia, using 
> video etc, this kind of functionality becomes important. 
> 
> Another example in the mobile world is radio resources. In 
> case of forking and multiple stream there may not be possible 
> to allow early media on all dialogs, so some dialogs may e.g. 
> be set to "inactive". It is then very useful to know when a 
> dialog is terminated, so that media can be allowed on other 
> dialogs. How those inactive decissions are made is based on 
> local policy etc, but 199 provides a tool which is useful for 
> taking those decissions.
> 
> Due to the cases above, and others, terminals may restrict 
> the number of accepted SIP dialogs, so by knowing when one 
> dialog has been terminated it can accept another dialog.
> 
> These are not theoretical issues, but problems that exist 
> today. Maybe not in your PC with unlimited memory, connected 
> to fixed access with unlimited bandwidth, but in some other places :)
> 
> >If SRTP actually solves the problem for media choosing, then let's 
> >state it in the document.
> 
> Sure, I can do that.
> 
> Regards,
> 
> Christer
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 11:52:42 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8FEAC28C270;
	Wed,  6 Aug 2008 11:52:42 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A389628C270
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 11:52:41 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.288
X-Spam-Level: 
X-Spam-Status: No, score=-6.288 tagged_above=-999 required=5
	tests=[AWL=-0.039, BAYES_00=-2.599, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dH0vNoUQtu8S for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 11:52:40 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 776C628C15F
	for <sip@ietf.org>; Wed,  6 Aug 2008 11:52:40 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	340AD2020E; Wed,  6 Aug 2008 20:53:13 +0200 (CEST)
X-AuditID: c1b4fb3e-a7e83bb000007a96-ae-4899f3194047
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	19D61201C5; Wed,  6 Aug 2008 20:53:13 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 20:53:13 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 20:53:12 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78D4@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] 199: Staus and open issues after Dublin 
thread-index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwAYkYUwAFVFyxAAAYe/IAAIpxp1
References: <BBE61D1553D8A34F812FF87377B2935F04696345@ATL1VEXC020.usdom003.tco.tc>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Brett Tate" <brett@broadsoft.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 06 Aug 2008 18:53:13.0056 (UTC)
	FILETIME=[AD893E00:01C8F7F5]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] 199: Staus and open issues after Dublin
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

>>The group never discussed if there is any "issue" with 
>>using an option-tag (e.g. if proxies are allowed to 
>>insert values). The opinion was more that there is no 
>>need for any sort of indication.
>
>After Cullen mentioned the reason for it, I guess that I should stayed
>at the microphone and re-iterated the reasons.
>
>Sending 199 is useless overhead unless something along the path supports
>and wants it.  

Correct. But useless can still be harmless :)

Personally I don't care what we do - I simply indicated what seemed to be the agreement at the meeting.

>If UAC does not support 199, sending it might cause more harm than good.

A UAC should discard what it doesn't support.

One potential use for an indicator could be if we decide to allow sending of 199 unreliably even if 100rel is required. An indicator would then make sure that the UAC is prepared for that.

But, even if the UAC doesn't support 199, receiving it unreliably even if 100rel is required should not in my opinion cause problems in a good and robust UAC implementation. The UAC should simply discard it.  

Maybe this should be discussed as part of the sending-199-unreliably-even-if-100rel-is-required discussion...

>>>1) Is a proxy allowed to send 199 in the first 
>>>place, or are only UASes allowed to do it?
>>
>>I have no issue with allowing it.  However the draft 
>>should likely provide guidance if originator of 199 
>>still considered a proxy or has morphed into UAS/b2bua when 
>>using another's To tag.  Depending upon interpretation of 
>>rfc3261 (and dropped packets), there are potential issues 
>>concerning Contact and Record-Route of the 199 (unless 
>>remember prior for inclusion within 199).  
>>
>>What should occur when INVITE 2xx received after proxy 
>>originated 199 with the same To tag?
> 
>I am not sure how that could happened. If the proxy received 
>a final response, which triggered the 199, I don't think it 
>will later receive an 2xx with the same To tag.
>
>If no proxy steals another's To tag for originating a final INVITE
>response, I agree.  I don't recall what rfc3261 and invfix recommend
>concerning the abnormal situation from proxy and UAC perspectives.  I
>was mainly just asking for conceptual reasons based upon the paragraph
>prior to my question.  If it occurs, should the originator of 199 tag X
>process the 2xx tag X like a UAC or proxy?

I don't think a forking proxy would steal a tag when forwarding 200 OK, because the UAC needs to know   which dialog it belongs to. Maybe it could steal a tag when sending an error response, but in that case I guess it doesn't matter very much. I guess the UAC could simply ACK it.

Regards,

Christer
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 11:58:20 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 605C028C270;
	Wed,  6 Aug 2008 11:58:20 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5B9D528C223
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 11:58:18 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.287
X-Spam-Level: 
X-Spam-Status: No, score=-6.287 tagged_above=-999 required=5
	tests=[AWL=-0.038, BAYES_00=-2.599, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uAC4hPPFtIFB for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 11:58:17 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 2C7D728C2C2
	for <sip@ietf.org>; Wed,  6 Aug 2008 11:58:17 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	3582420702; Wed,  6 Aug 2008 20:58:50 +0200 (CEST)
X-AuditID: c1b4fb3c-af0d0bb0000015b5-62-4899f46a6b62
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	17207205ED; Wed,  6 Aug 2008 20:58:50 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 20:58:49 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 20:58:49 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78D5@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
thread-index: Acj3u7iycdG1u1Z7SweRrMNeQhW48gAAJoMQAAtcdfAAAMcaUwAAoUbAAABs6AcAALriUAAAbrhr
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com> <48999208.3030602@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698D46@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CF@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698EB8@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78D2@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698FC3@zrc2hxm0.corp.nortel.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Francois Audet" <audet@nortel.com>, "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Anders Kristensen" <andersk@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 18:58:49.0828 (UTC)
	FILETIME=[76449240:01C8F7F6]
X-Brightmail-Tracker: AAAAAA==
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Hi,
 
>Ok, now we are getting somewhere.
>
>Can you describe that in the document.

I thought I had done that in the use-case section, but for sure I can have another look at the use-case text and see whether I can clarify/extend the text.

>Also, in the REQ section, let's write requirements that are specific
>and are able to address the problems you listed below.

Well, I think the use-cases justifies the existing requirement. Do you want to have specific requirement for all the use-cases?

Regards,

Christer


> -----Original Message-----
> From: Christer Holmberg [mailto:christer.holmberg@ericsson.com] 
> Sent: Wednesday, August 06, 2008 11:38
> To: Audet, Francois (SC100:3055); Paul Kyzivat; Anders Kristensen
> Cc: sip@ietf.org; DRAGE, Keith (Keith)
> Subject: VS: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
> 
> 
> Hi,
>  
> >>There are already problems which 199 CAN solve, without any other 
> >>work.
> >
> >And those are?
> >
> >They should be clearly described. All I hear is examples of things 
> >where
> >199 is not sufficient (e.g., Media choosing, HERFP). 
> 
> I have tried to describe examples not related to media choosing.
> 
> One example is related to in-band procedures (e.g. ICE, 
> in-band security negotiations). At least in the mobile world 
> those can consume radio- and battery resources, so it is good 
> to be informed about terminated dialogs as soon as possible, 
> without having to detect it using re-transmission failures etc.
> 
> Another example in the mobile world is related to codecs and 
> DSP resources. If you have negotiated codec X only for one 
> early dialog, and that dialog is terminated, you know that 
> you can free the codec X resources (you can do that without 
> having to be able to associate media with dialogs) and e.g .. 
> allow reservation of other codecs needed for other dialogs. 
> Especially when we move into the world of multimedia, using 
> video etc, this kind of functionality becomes important. 
> 
> Another example in the mobile world is radio resources. In 
> case of forking and multiple stream there may not be possible 
> to allow early media on all dialogs, so some dialogs may e.g. 
> be set to "inactive". It is then very useful to know when a 
> dialog is terminated, so that media can be allowed on other 
> dialogs. How those inactive decissions are made is based on 
> local policy etc, but 199 provides a tool which is useful for 
> taking those decissions.
> 
> Due to the cases above, and others, terminals may restrict 
> the number of accepted SIP dialogs, so by knowing when one 
> dialog has been terminated it can accept another dialog.
> 
> These are not theoretical issues, but problems that exist 
> today. Maybe not in your PC with unlimited memory, connected 
> to fixed access with unlimited bandwidth, but in some other places :)
> 
> >If SRTP actually solves the problem for media choosing, then let's 
> >state it in the document.
> 
> Sure, I can do that.
> 
> Regards,
> 
> Christer
> 

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 12:02:53 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5B99628C32B;
	Wed,  6 Aug 2008 12:02:53 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 188DB28C322
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 12:02:52 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mrSL2v1ejykB for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 12:02:51 -0700 (PDT)
Received: from zcars04f.nortel.com (zcars04f.nortel.com [47.129.242.57])
	by core3.amsl.com (Postfix) with ESMTP id C93A428C342
	for <sip@ietf.org>; Wed,  6 Aug 2008 12:02:25 -0700 (PDT)
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	m76J2SD21964; Wed, 6 Aug 2008 19:02:28 GMT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 14:02:24 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF18699061@zrc2hxm0.corp.nortel.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C78D5@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
Thread-Index: Acj3u7iycdG1u1Z7SweRrMNeQhW48gAAJoMQAAtcdfAAAMcaUwAAoUbAAABs6AcAALriUAAAbrhrAABK/DA=
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com> <48999208.3030602@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698D46@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CF@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698EB8@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78D2@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698FC3@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A02! 0D418654F
	CDEF4E707DF046C78D5@esealmw113.eemea.ericsson.se>
From: "Francois Audet" <audet@nortel.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>,
	"Anders Kristensen" <andersk@cisco.com>
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


> Well, I think the use-cases justifies the existing 
> requirement. Do you want to have specific requirement for all 
> the use-cases?

Yes.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 12:17:17 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2B6933A6ADF;
	Wed,  6 Aug 2008 12:17:17 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 04CFE3A6AF1
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 12:17:16 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.286
X-Spam-Level: 
X-Spam-Status: No, score=-6.286 tagged_above=-999 required=5
	tests=[AWL=-0.037, BAYES_00=-2.599, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id jUFz2vDr2kzF for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 12:17:15 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 041B03A6AD1
	for <sip@ietf.org>; Wed,  6 Aug 2008 12:17:14 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	06F8A20994; Wed,  6 Aug 2008 21:17:48 +0200 (CEST)
X-AuditID: c1b4fb3e-a8684bb000007a96-8d-4899f8db5874
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	DD3B120071; Wed,  6 Aug 2008 21:17:47 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 21:17:47 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 21:15:17 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C78D6@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
thread-index: Acj3u7iycdG1u1Z7SweRrMNeQhW48gAAJoMQAAtcdfAAAMcaUwAAoUbAAABs6AcAALriUAAAbrhrAABK/DAAAHXAyQ==
References: <CA9998CD4A020D418654FCDEF4E707DF074B3820@esealmw113.eemea.ericsson.se><1ECE0EB50388174790F9694F77522CCF1858681F@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C7@esealmw113.eemea.ericsson.se>
	<5D1A7985295922448D5550C94DE29180021D0F0B@DEEXC1U01.de.lucent.com>
	<1ECE0EB50388174790F9694F77522CCF185E7798@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CA@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF185E79B9@zrc2hxm0.corp.nortel.com>
	<4899187C.9020106@cisco.com> <48999208.3030602@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF07548747@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698D46@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78CF@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698EB8@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78D2@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18698FC3@zrc2hxm0.corp.nortel.com>
	<CA9998CD4A02! 0D41865
	4F CDEF4E707DF046C78D5@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF18699061@zrc2hxm0.corp.nortel.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Francois Audet" <audet@nortel.com>, "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Anders Kristensen" <andersk@cisco.com>
X-OriginalArrivalTime: 06 Aug 2008 19:17:47.0869 (UTC)
	FILETIME=[1C97D8D0:01C8F7F9]
X-Brightmail-Tracker: AAAAAA==
Cc: sip@ietf.org, "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
Subject: Re: [Sip] Inadequate Requirements for draft-ietf-sip-199-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Hi,

>>Well, I think the use-cases justifies the existing 
>>requirement. Do you want to have specific requirement for all 
>>the use-cases?
>
>Yes.

Again, I thought we normally use use-cases in order to justify the requirement(s). All use-cases justify the same requirement: being able to indicate that the early dialog has been terminated.

Regards,

Christer


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 13:14:59 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0A1F63A6A84;
	Wed,  6 Aug 2008 13:14:59 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 270B33A6BAD
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 13:14:58 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id T+yRj707UXvp for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 13:14:57 -0700 (PDT)
Received: from out002.iad.hostedmail.net (out002.iad.hostedmail.net
	[209.225.56.24])
	by core3.amsl.com (Postfix) with ESMTP id B72023A6B65
	for <sip@ietf.org>; Wed,  6 Aug 2008 13:14:30 -0700 (PDT)
Received: from ATL1VEXC020.usdom003.tco.tc ([10.158.7.31]) by
	out002.iad.hostedmail.net with Microsoft SMTPSVC(6.0.3790.3959);
	Wed, 6 Aug 2008 16:15:00 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 6 Aug 2008 16:15:01 -0400
Message-ID: <BBE61D1553D8A34F812FF87377B2935F04696568@ATL1VEXC020.usdom003.tco.tc>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C78D4@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] 199: Staus and open issues after Dublin 
Thread-Index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwAYkYUwAFVFyxAAAYe/IAAIpxp1AACneNA=
From: "Brett Tate" <brett@broadsoft.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 06 Aug 2008 20:15:00.0862 (UTC)
	FILETIME=[1AD101E0:01C8F801]
Subject: Re: [Sip] 199: Staus and open issues after Dublin
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> > Sending 199 is useless overhead unless something 
> > along the path supports and wants it.
> 
> Correct. But useless can still be harmless :)
> 
> Personally I don't care what we do - I simply 
> indicated what seemed to be the agreement at the meeting.

The "harmless" uselessness would likely depend upon the frequency of 199
versus the extra option-tag or header to negotiate the mechanism.

I don't have a strong opinion about the need for negotiating the
mechanism.  I'm just trying to avoid some unnecessary interop issues and
capacity hits.


> > If UAC does not support 199, sending it might 
> > cause more harm than good.
> 
> A UAC should discard what it doesn't support.

RFC 3261 section 8.1.3.2: "A UAC MUST treat any provisional response
different than 100 that it does not recognize as 183 (Session
Progress)."

The above requirement adds complication for devices (not supporting 199)
only maintaining a limited number of early dialogs or using latest 1xx
to recognize most likely active early dialog.

The 199 could trigger them to forgot or not prefer a useful early dialog
for the one associated with 199.


> > If no proxy steals another's To tag for originating 
> > a final INVITE response, I agree.  I don't recall 
> > what rfc3261 and invfix recommend concerning the 
> > abnormal situation from proxy and UAC perspectives.  
> > I was mainly just asking for conceptual reasons 
> > based upon the paragraph prior to my question.  
> > If it occurs, should the originator of 199 tag X 
> > process the 2xx tag X like a UAC or proxy?
> 

<snip>

> Maybe it could steal a tag when sending an error 
> response, but in that case I guess it doesn't 
> matter very much. I guess the UAC could simply ACK it.

Yes, my question was mainly concerning situation caused by proxies that
incorrectly use another's early dialog To tag when originating a failure
INVITE response like 487 when no final INVITE response has been
received.  Hopefully there are no longer proxies that actually do it. :)
If the 199 originator uses such a tag to send 199 and INVITE 200
received using the same tag, I was curious how the 199 originator should
behave (as proxy or UAC).  If it proxies the INVITE 200, the call might
actually get established and stay up when UAC does not support 199 or
199 was dropped.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 15:10:11 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 7C7053A68DC;
	Wed,  6 Aug 2008 15:10:11 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 48F5C3A68DC
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 15:10:08 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -7.532
X-Spam-Level: 
X-Spam-Status: No, score=-7.532 tagged_above=-999 required=5 tests=[AWL=1.067, 
	BAYES_00=-2.599, GB_I_INVITATION=-2, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id vvEKDwEWY2ml for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 15:10:06 -0700 (PDT)
Received: from sj-iport-5.cisco.com (sj-iport-5.cisco.com [171.68.10.87])
	by core3.amsl.com (Postfix) with ESMTP id 8F4D93A6890
	for <sip@ietf.org>; Wed,  6 Aug 2008 15:10:06 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,316,1215388800"; d="scan'208";a="40295561"
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-5.cisco.com with ESMTP; 06 Aug 2008 22:10:39 +0000
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m76MAdM9000954; 
	Wed, 6 Aug 2008 15:10:39 -0700
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m76MAc9K009354;
	Wed, 6 Aug 2008 22:10:38 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 18:10:38 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Aug 2008 18:10:37 -0400
Message-ID: <489A2194.10005@cisco.com>
Date: Wed, 06 Aug 2008 18:11:32 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>	<489861C9.2020507@cisco.com>	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>	<48999834.4080304@cisco.com>	<C0E80510684FE94DBDE3A4AF6B968D2D03DBB10D@esealmw118.eemea.ericsson.se>	<CA9998CD4A020D418654FCDEF4E707DF07548A9B@esealmw113.eemea.ericsson.se>	<4899C166.70109@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78D0@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C78D0@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 06 Aug 2008 22:10:37.0716 (UTC)
	FILETIME=[4180ED40:01C8F811]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=10709; t=1218060639;
	x=1218924639; c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Multiple=20early-dialog=20usage
	s=20[was=20RE=3A=20Comments=20on=09draft-ietf-sip-199-00.txt ]
	|Sender:=20; bh=LVyhO17NsLMYMf82MIRyNvgo9UxALkQi2qrmGF1jsak=;
	b=Z1MEM1QFQWirfUy0JzvZZf0o2baDlWkEvV+Og26PvqeDPfm4s3D1kOlVJG
	FNU7Nu0W0ecuTmMKJ28S7CJ4kl9UVZVYVvc5D6/GR5k/yHwQhv88+ouS/t+F
	+ONrnlxNRMyzEGgT6wV344mmZF3fJfTtIE0+z/RaxAQlDHDhgYvho=;
Authentication-Results: sj-dkim-1; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
Cc: SIP IETF <sip@ietf.org>, Ian Elz <ian.elz@ericsson.com>
Subject: Re: [Sip] Multiple early-dialog usages [was RE: Comments
	on	draft-ietf-sip-199-00.txt]
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Christer Holmberg wrote:
> Hi,
> 
>>> I've changed the name of this thread, because I think the scope is wider
>>> than 199 :)
>> Perhaps. But I don't think there is much to discuss.
>>
>> It seems clear that we don't have any way to cause a dialog with 
>> *multiple* *early* dialog usages. This is because only an 
>> invite-dialog-usage can be early, and you can only have one of those per 
>> dialog.
>>
>> It seems technically possible to have a dialog that has both an early 
>> dialog usage and a final dialog usage. There may be question of whether 
>> there is practical value in this, but for now I will simply assume it is 
>> possible. We can discuss if it might not be possible, or if it should be 
>> declared so, but I don't know if we need to.
>>
>> RFC 5057 addresses the impact of responses on the state of transactions, 
>> dialog usages, and dialogs. The interesting question is whether the 
>> proposed 199 response would require some alteration to 5057. The reason 
>> its interesting is because the 199 is effectively a final response in 
>> disguise. But that brings it back to something that ought to be 
>> discussed on the 199 thread. 
> 
> So, from a 199 point of view I guess the only thing we can do at the moment is to provide some text and say that care shall be taken when multiple dialogusages exist, and the 199 doesn't provide more information.
> 
> I think it is extremely rare that one would first establish a subscription dialog, and then send an INVITE and create an early invite usage within that dialog. I would even dare to say that no such implementations exist today, but I can of course be wrong...

Agreed. I think the most likely way to get into the situation is to send 
a SUBSCRIBE, or more likely a REFER, within a dialog resulting from an 
early invite dialog usage.  The REFER case may actually be plausible.

> As imentioned earlier, I also think it's not a good idea to create subscription usages within an early INVITE dialog. In case of forking you may send SUBSCRIBE to all UASes, and when some sends 200 OK for the INVITE you may have to unsubscribe to all the other UASes. etc etc.

I can't think of a likely use for SUBSCRIBE.

> And, because of all issues described in RFC 5057, I hope people won't define such use-case in future either. 

If we can find no deployed usages, we might take the opportunity to 
simply ban them.

	Paul

> Regards,
> 
> Christer
> 
> 	
> 
>>
>>
>> -----Original Message-----
>> From: Ian Elz 
>> Sent: 6. elokuuta 2008 16:51
>> To: Paul Kyzivat
>> Cc: Christer Holmberg; SIP IETF
>> Subject: RE: [Sip] Comments on draft-ietf-sip-199-00.txt
>>
>> Paul,
>>
>> I only included 'early dialog' as this is the term that is already used.
>>
>> We cannot criticize RFC 3261 for this as when it was written INVITE was
>> the ONLY dialog creating transaction.
>>
>> Should some input be given to Robert Sparks' invfix draft as it is
>> proposing corrections to the INVITE transaction state machines. 
>>
>> Based on the  existing draft (-02) sending or receiving a 1xx response
>> places the transaction in the 'proceeding' state which is does not exit
>> until a final response has been sent or received, or I assume the
>> dialog/usage terminates.
>>
>> If we retain the state model of proposed in invfix then the 199 response
>> should be treated as an invitation to the UAC to terminate the early
>> dialog usage with a BYE method. If this does not happen the transaction
>> will remain as 'proceeding' and the early dialog usage may also remain.
>>
>> The alternative is to modify the proposed transaction state models for
>> special handling for the 199 response. This is something which I am not
>> sure that I would favour.
>>
>> Ian Elz
>>
>> System Manager
>> DUCI LDC UK
>> (Lucid Duck)
>>
>> Office: + 44 24 764 35256
>> gsm: +44 7801723668
>> ian.elz@ericsson.com
>>
>>
>> -----Original Message-----
>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]
>> Sent: 06 August 2008 13:25
>> To: Ian Elz
>> Cc: Christer Holmberg; SIP IETF
>> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
>>
>>
>>
>> Ian Elz wrote:
>>> Paul,
>>>
>>> I don't believe that you can create 'multiple early dialog usages'.
>>>
>>> On an INVITE transaction can create an early dialog. The other dialog
>>> creating transactions REFER and SUBSCRIBE, can only create established
>>> dialogs.
>>>
>>> As you cannot start a second INVITE transaction while there is an
>>> outstanding INVITE transaction on a dialog, early or otherwise.
>>>
>>> If you send a REFER or SUBSCRIBE method on an early dialog and you get
>>> an acceptance response then you have an established dialog.
>> Agreed. I should have pointed that out.
>>
>> However, the issue arises if you can get an early invite dialog usage 
>> with a confirmed dialog usage. In that case one must be careful with the
>>
>> rules to ensure that you don't accidentally terminate the confirmed 
>> usage as a side effect of processing the 199 on the early invite dialog 
>> usage.
>>
>>> If this is the early-dialog from an INVITE transaction then key
>> question
>>> is what is the validity of a provisional response in creating a
>> dialog.
>>> Is it early or established. While the provisional response is clearly
>>> just that from a transaction perspective in this situation the meaning
>>> of the proposed 199 provisional response is now transaction affecting
>>> and not dialog affecting, i.e. the INVITE usage will not become
>>> established although the other usage may be established.
>>>
>>> The existing state models in sip only discuss dialogs and transactions
>>> and have not considered the dialog usage. When you send a reliable
>>> provisional response to an INVITE you are in effect creating an
>>> early-dialog usage. If this is the only dialog usage on the dialog you
>>> have also created an early-dialog. If there is another usage on the
>> same
>>> dialog then the dialog state will depend upon the state of the other
>>> dialog.
>> IMO there really shouldn't be any "early dialog", ever. The dialog comes
>>
>> into existence, and departs, based on the existence of at least one 
>> usage. The dialog is the same whether the usages are early or late, or a
>>
>> combination.
>>
>> I agree that it would be helpful to recast all the state machines in 
>> terms of dialog usages rather than dialogs. Maybe that is a job for the 
>> draft standard version of 3261.
>>
>>> RFC5057, Multiple Dialog Usage (informational) does not discuss the
>>> details involved in multiple usages and the impact on the sip state
>>> models but I hope that this was a consideration when the initial
>> drafts
>>> were prepared. 
>>>
>>> I am unsure if the concept of multiple usages on an early dialog was
>>> ever considered when RFC5057 was in draft stage. The nuances of
>> multiple
>>> dialogs on an established dialog appears to have been enough to
>> suggest
>>> that the RFC specifically not recommend multiple usages without
>> getting
>>> into the 'dark area' of early dialogs and multiple usages.
>>>
>>> Whether it make sense to use a REFER or SUBSCRIBE inside an early
>> dialog
>>> is problematic. I am unsure whether these do make any sense. Would you
>>> want to subscribe to specific event which occurs during the early
>> dialog
>>> phase of an INVITE transaction? Would you want to use REFER to perform
>> a
>>> transfer of a ringing call and does the protocol actually support
>> this?
>>> If the answer to these questions is a definitive 'NO' then the issue
>>> will have resolves itself. I fear however that there is no definitive
>>> answer at this time.
>> Right.
>>
>> 	Paul
>>
>>> Ian Elz
>>>
>>> System Manager
>>> DUCI LDC UK
>>> (Lucid Duck)
>>>
>>> Office: + 44 24 764 35256
>>> gsm: +44 7801723668
>>> ian.elz@ericsson.com
>>>
>>>
>>> -----Original Message-----
>>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
>>> Sent: 05 August 2008 15:21
>>> To: Christer Holmberg
>>> Cc: SIP IETF
>>> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
>>>
>>>
>>>
>>> Christer Holmberg wrote:
>>>> Hi, 
>>>>
>>>>>> 7) Section 7: "A UAC that receives a 199 response for an early
>>> dialog
>>>> MUST NOT
>>>>>> send any further requests on that dialog...". Can you point to any
>>>> list discussion
>>>>>> around this requirement? I think there's some danger to consider
>>>> there. At the
>>>>>> very least we need to make this statement multiple-usage safe.
>>>>> This is a very good catch. This needs to be aligned with
>> dialogusage.
>>>> If the 199 contained the final response that triggered it, then that
>>>> final response could be used to determine the impact 
>>>>> on the dialog or dialog usage or just the transaction. But if the
>> 199
>>>> doesn't contain the final response, then this is a problem.
>>>>
>>>> I forgot to bring this issue up in Dublin. Sorry for that.
>>>>
>>>> First, we need to remember that the UAS may terminate every
>>> dialogusage
>>>> when sending the final response (depending on what final response is
>>>> sent), without the UAC knowing it. And, due to the forking rules, the
>>>> final response which is sent to the UAC may not even be the same
>> which
>>>> was sent by the UAS, if a final response from another UAS is chosen
>> as
>>>> the "best".
>>>>
>>>> Second, we need to remember that this only affects
>> early-dialogusages.
>>>> If needed, I guess we could include the final response which
>> triggered
>>>> the 199, but we could also simply say that if the UAC does not know
>> to
>>>> which dialogusage (if there are many) the 199 applies, it should not
>>> do
>>>> anything which may affect other usages for the same early dialog.
>>> The establishment of multiple early dialog usages is a pretty strange 
>>> thing. Do we know of any use cases for this? (E.g. an in-dialog REFER
>> on
>>> an early INVITE. Is that legal?)
>>>
>>> Assuming it can arise, then I agree it is reasonable to treat the 199
>> as
>>> affecting only its dialog usage unless there is info with it (such as 
>>> the actual final response code) that gives evidence that the whole 
>>> dialog is gone.
>>>
>>> 	Thanks,
>>> 	Paul
>>>
>>>
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 15:40:16 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 40F023A69E7;
	Wed,  6 Aug 2008 15:40:16 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 53AE33A69E7
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 15:40:15 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.399
X-Spam-Level: 
X-Spam-Status: No, score=-5.399 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, J_CHICKENPOX_56=0.6, J_CHICKENPOX_57=0.6,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id gHexfYToLrp0 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 15:40:14 -0700 (PDT)
Received: from demumfd001.nsn-inter.net (demumfd001.nsn-inter.net
	[217.115.75.233])
	by core3.amsl.com (Postfix) with ESMTP id C86E73A67DD
	for <sip@ietf.org>; Wed,  6 Aug 2008 15:40:13 -0700 (PDT)
Received: from demuprx016.emea.nsn-intra.net ([10.150.129.55])
	by demumfd001.nsn-inter.net (8.12.11.20060308/8.12.11) with ESMTP id
	m76Meg4O029881
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Thu, 7 Aug 2008 00:40:42 +0200
Received: from demuexc023.nsn-intra.net (webmail.nsn-intra.net [10.150.128.36])
	by demuprx016.emea.nsn-intra.net (8.12.11.20060308/8.12.11) with ESMTP
	id m76Mefux019798; Thu, 7 Aug 2008 00:40:42 +0200
Received: from DEMUEXC006.nsn-intra.net ([10.150.128.103]) by
	demuexc023.nsn-intra.net with Microsoft SMTPSVC(6.0.3790.3959); 
	Thu, 7 Aug 2008 00:40:42 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 7 Aug 2008 00:40:38 +0200
Message-ID: <085BE88FD18EE94085EB8960172CA359E9CA78@DEMUEXC006.nsn-intra.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Some comments on draft-ietf-sip-dtls-srtp-framework-02
Thread-Index: Acj4FXKRqVbVKo+7Rv62RrHIapSjKQ==
From: "Schneider, Peter (NSN - DE/Munich)" <peter.schneider@nsn.com>
To: "Tschofenig, Hannes (NSN - FI/Espoo)" <hannes.tschofenig@nsn.com>,
	<jason@counterpath.com>, <ekr@rtfm.com>
X-OriginalArrivalTime: 06 Aug 2008 22:40:42.0135 (UTC)
	FILETIME=[75056A70:01C8F815]
Cc: sip@ietf.org
Subject: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

1) The draft currently states in section 5:

"     The endpoint MUST use the setup attribute defined in [RFC4145].
      The endpoint which is the offerer MUST use the setup attribute
      value of setup:actpass and be prepared to receive a client_hello
      before it receives the answer.  The answerer SHOULD use the setup
      attribute value of setup:active and will send the client_hello in
      the media path."

My proposal is to replace the last sentence by "The answerer MUST use
the setup
attribute value of setup:active or the setup attribute value of
setup:passive."

With this, if the receiver takes up the active role, as recommended in
the original text, he can start the handshake and if the handshake has
been carried out successfully before the SDP answer, he can send
encrypted early media (before the SDP answer). Obviously, with the usage
of self signed certificates, the offerer can authenticate the origin of
the early media only retrospectively, after he has received the SDP
answer, which somewhat reduces the value of encrypting the early media.
Early media as well as a handshake at that point in time will however
not work in an environment, where middleboxes are present that will not
let traffic pass in the media plane before the answer has been sent.

So if the receiver assumes such an environment, he may decide to take up
the passive role. By this, the offerer will start the handshake as soon
as he receives an answer, which would typically be close to the first
point in time at which the handshake messages will be able to pass the
middleboxes.

I feel it's quite reasonable to do the handshake after offer and answer
have been exchanged, because the offerer can check the fingerprint of
the certificate received in the handshake immediately; and he will not
accept encrypted media that may be sent by an attacker. So he is less
vulnerable to DoS. This does not allow encrypted early media to be
received, but is this so essential? In fact, accepting only encrypted
early media could be harmful, as it would prevent a caller to receive
e.g. an announcement that is sent by some server in the network that
only sends unsensitive announcements and therefore does not support
encryption at all.

2) With respect to unmanaged (e.g. residential) stateful firewalls the
draft currently states in section 6.6 that if ICE is not used and the
handshake could not be completed (until offer and answer have been
exchanged)

  "the passive side MUST
   do a single unauthenticated STUN [I-D.ietf-behave-rfc3489bis]
   connectivity check in order to open up the appropriate pinhole.  All
   implementations MUST be prepared to answer this request during the
   handshake period even if they do not otherwise do ICE."

And later, in the message flow on page 13 and the respective
explanations it becomes obvious that the idea is that the sender of this
STUN connectivity check in fact waits for an answer before he proceeds
(although implementations must only *be prepared* to answer a
connectivity request - I wonder whether "be prepared" should rather be
removed from this sentence). However, if there are middleboxes on the
path that block the STUN connectivity check, an answer will never come,
although the purpose of the connectivity check - to establish a session
in the residential firewall and open it up for incoming traffic - may
already have been achieved.

So instead of making the sending of the STUN connectivity check
mandatory in this situation, I propose rather to recommend that the
passive UA in the connection setup should try to make sure that a
firewall protecting the UA does not block the client hello starting the
handshake. This could be done by STUN or other means. This is exactly
what is recommended also in draft-ietf-mmusic-media-path-middleboxes-01,
section 7, REC #1.

3) More generally, I propose that the draft should mention possible
problems with middleboxes, and should advise implementors to follow the
recommendations in draft-ietf-mmusic-media-path-middleboxes.

4) Concerning the possible sequence of messages used to establish
sessions that use DTLS-SRTP, the draft IMO should give clearer
recommendations. This is currently mostly treated in the section
"example message flow", which indeed explains two flows currently. It is
unclear, to which degree this is normative, and what variants of such
flows would also be considered compliant to the draft.

5) Another topic where information is only given in the example flows is
the treatment of RTCP. If RTP/RTCP multiplexing on a single port is not
used, at which time should the handshake for RTCP be done - immediately
after the handshake for RTP, so that sender reports could be sent for
early media? Or only after the SDP answer, when both sides know which
ports are used on both sides? This becomes even more complex, if
non-symmetric RTP/RTCP would be applied, which is not excluded in
draft-ietf-avt-dtls-srtp-02.
I propose to describe these issues in a dedicated section.

Peter
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 20:37:24 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 05AFE3A6B87;
	Wed,  6 Aug 2008 20:37:24 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6933E3A6B87
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 20:37:22 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DHP9QVfBOIK0 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 20:37:21 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 904773A6B60
	for <sip@ietf.org>; Wed,  6 Aug 2008 20:37:21 -0700 (PDT)
Received: from [192.168.2.2] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m773bp0X001160
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Wed, 6 Aug 2008 22:37:53 -0500
Message-ID: <489A6E09.8040002@softarmor.com>
Date: Wed, 06 Aug 2008 22:37:45 -0500
From: Dean Willis <dean.willis@softarmor.com>
User-Agent: Icedove 1.5.0.14eol (X11/20080724)
MIME-Version: 1.0
To: Eric Rescorla <ekr@networkresonance.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>	<20080731205152.03E7E514892@kilo.rtfm.com>	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>	<20080801010212.654B5515743@kilo.rtfm.com>	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>	<20080801134611.1B8C9516C54@kilo.rtfm.com>	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>	<20080805145945.5B61650846@romeo.rtfm.com>	<02b801c8f70b$675fed60$c2f0200a@cisco.com>	<20080805151333.DDB5350846@romeo.rtfm.com>	<038e01c8f713$84e3cca0$c2f0200a@cisco.com>	<20080805161109.ABB8F50846@romeo.rtfm.com>	<053c01c8f720$647c21d0$c2f0200a@cisco.com>	<20080805204756.A7DC0524DAD@kilo.rtfm.com>	<157a01c8f73d$e4a2cf40$c2f0200a@cisco.com>	<20080806035333.C83C95263F1@kilo.rtfm!.com>	<20080806035333.C83C95263F1@kilo.rtfm.com>	<4899D690.3030606@softarmor.com>
	<20080806171801.2165850846@romeo.rtfm.com>
In-Reply-To: <20080806171801.2165850846@romeo.rtfm.com>
X-Enigmail-Version: 0.94.2.0
Cc: 'Cullen Jennings' <fluffy@cisco.com>, 'SIP IETF' <sip@ietf.org>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>, "'Elwell,
	John'" <john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Eric Rescorla wrote:
> At Wed, 06 Aug 2008 11:51:28 -0500,
> Dean Willis wrote:
>> Eric Rescorla wrote:
>>
>>> Unfortunately, this is the same conflation of concerns that has
>>> characterized discussion of these drafts from the beginning. Quoting
>>> my review of -01 from 2007/11:
>>>
>>>   This draft seems to do two distinct things:
>>>   
>>>   - One specify a variant of RFC 4474 which signs a lot fewer headers.
>>>     [This should have said less of the message -- EKR]
>>>   - Specify a set of mechanisms to cryptographically prove that a given media
>>>     stream corresponds to a given SDP offer/answer.
>>>
>>> These issues are wholly orthogonal and it just confuses the discussion
>>> to try to discuss them together. 
>> They may be wholly orthogonal from one point of view, but I don't think
>> they can be deployed independently. You have to have BOTH measures in
>> place to gain the benefit of the proposal.
> 
> I don't see how that's the case. Can you explain?

Signing LESS than what RFC 4474 signs opens up a whole can of worms
UNLESS the media-path key exchange is also used to prove that the
signaling and media correspond.

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 21:20:38 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5E18B3A69FC;
	Wed,  6 Aug 2008 21:20:38 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D01A73A69CA
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 21:20:36 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.682
X-Spam-Level: 
X-Spam-Status: No, score=-0.682 tagged_above=-999 required=5
	tests=[AWL=-0.187, BAYES_00=-2.599, FH_RELAY_NODNS=1.451,
	HELO_MISMATCH_COM=0.553, RDNS_NONE=0.1]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 24+Gto3i7Wq4 for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 21:20:35 -0700 (PDT)
Received: from kilo.rtfm.com (unknown [74.95.2.169])
	by core3.amsl.com (Postfix) with ESMTP id 725C13A67AF
	for <sip@ietf.org>; Wed,  6 Aug 2008 21:20:35 -0700 (PDT)
Received: from kilo-2.local (localhost [127.0.0.1])
	by kilo.rtfm.com (Postfix) with ESMTP id 80A95528078;
	Wed,  6 Aug 2008 21:20:44 -0700 (PDT)
Date: Wed, 06 Aug 2008 21:20:43 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: Dean Willis <dean.willis@softarmor.com>
In-Reply-To: <489A6E09.8040002@softarmor.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
	<20080805145945.5B61650846@romeo.rtfm.com>
	<02b801c8f70b$675fed60$c2f0200a@cisco.com>
	<20080805151333.DDB5350846@romeo.rtfm.com>
	<038e01c8f713$84e3cca0$c2f0200a@cisco.com>
	<20080805161109.ABB8F50846@romeo.rtfm.com>
	<053c01c8f720$647c21d0$c2f0200a@cisco.com>
	<20080805204756.A7DC0524DAD@kilo.rtfm.com>
	<157a01c8f73d$e4a2cf40$c2f0200a@cisco.com>
	<20080806035333.C83C95263F1@kilo.rtfm!.com>
	<20080806035333.C83C95263F1@kilo.rtfm.com>
	<4899D690.3030606@softarmor.com>
	<20080806171801.2165850846@romeo.rtfm.com>
	<489A6E09.8040002@softarmor.com>
User-Agent: Wanderlust/2.15.5 (Almost Unreal) Emacs/22.1 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080807042044.80A95528078@kilo.rtfm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell,
	John'" <john.elwell@siemens.com>, Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

At Wed, 06 Aug 2008 22:37:45 -0500,
Dean Willis wrote:
> 
> Eric Rescorla wrote:
> > At Wed, 06 Aug 2008 11:51:28 -0500,
> > Dean Willis wrote:
> >> Eric Rescorla wrote:
> >>
> >>> Unfortunately, this is the same conflation of concerns that has
> >>> characterized discussion of these drafts from the beginning. Quoting
> >>> my review of -01 from 2007/11:
> >>>
> >>>   This draft seems to do two distinct things:
> >>>   
> >>>   - One specify a variant of RFC 4474 which signs a lot fewer headers.
> >>>     [This should have said less of the message -- EKR]
> >>>   - Specify a set of mechanisms to cryptographically prove that a given media
> >>>     stream corresponds to a given SDP offer/answer.
> >>>
> >>> These issues are wholly orthogonal and it just confuses the discussion
> >>> to try to discuss them together. 
> >> They may be wholly orthogonal from one point of view, but I don't think
> >> they can be deployed independently. You have to have BOTH measures in
> >> place to gain the benefit of the proposal.
> > 
> > I don't see how that's the case. Can you explain?
> 
> Signing LESS than what RFC 4474 signs opens up a whole can of worms
> UNLESS the media-path key exchange is also used to prove that the
> signaling and media correspond.

Hmm... In the absence of media layer encryption, I think it's a
mistake to assume that the signalling and media correspond 
even with 4474.

-Ekr
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 22:32:37 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 66F263A68DE;
	Wed,  6 Aug 2008 22:32:37 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BBE193A6884
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 22:32:36 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.284
X-Spam-Level: 
X-Spam-Status: No, score=-6.284 tagged_above=-999 required=5
	tests=[AWL=-0.035, BAYES_00=-2.599, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2mfe-VS2Z6fL for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 22:32:35 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 9EF233A68EF
	for <sip@ietf.org>; Wed,  6 Aug 2008 22:32:35 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	4F90A20B79; Thu,  7 Aug 2008 07:32:52 +0200 (CEST)
X-AuditID: c1b4fb3c-ae0cebb0000015b5-71-489a89048a21
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	39F5820A8E; Thu,  7 Aug 2008 07:32:52 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 7 Aug 2008 07:32:51 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 7 Aug 2008 07:32:50 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0754900D@esealmw113.eemea.ericsson.se>
In-Reply-To: <BBE61D1553D8A34F812FF87377B2935F04696568@ATL1VEXC020.usdom003.tco.tc>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] 199: Staus and open issues after Dublin - support indicator
thread-index: Acj2E/7RlvKeOiBYRVaFz20/K8OaQwAYkYUwAFVFyxAAAYe/IAAIpxp1AACneNAAFdCWwA==
References: <CA9998CD4A020D418654FCDEF4E707DF046C78D4@esealmw113.eemea.ericsson.se>
	<BBE61D1553D8A34F812FF87377B2935F04696568@ATL1VEXC020.usdom003.tco.tc>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Brett Tate" <brett@broadsoft.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 07 Aug 2008 05:32:51.0922 (UTC)
	FILETIME=[091F7320:01C8F84F]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] 199: Staus and open issues after Dublin - support
	indicator
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi Brett,

>>>If UAC does not support 199, sending it might cause more harm than
good.
>> 
>>A UAC should discard what it doesn't support.
>
>RFC 3261 section 8.1.3.2: "A UAC MUST treat any provisional response
different than 100 that it does not recognize as 183 (Session
Progress)."
>
>The above requirement adds complication for devices (not supporting
199) only maintaining a limited number of early dialogs or using latest
1xx to recognize most likely active early dialog.
>
>The 199 could trigger them to forgot or not prefer a useful early
dialog for the one associated with 199.

Wouldn't that mean that, if the UAC does not insert the indicator,
proxies are not allowed to insert it either? Because, if they do, and
receive 199 I guess they will simply forward the 199 towards the UAC,
and you end up in the same situation. An intermediate B2BUA could of
course terminate the 199, and not forward it towards a UAC not
supporting it, but I don't think we want to define such behavior for
normal proxies.

>>>If no proxy steals another's To tag for originating a final INVITE 
>>>response, I agree.  I don't recall what rfc3261 and invfix recommend 
>>>concerning the abnormal situation from proxy and UAC perspectives.
>>>I was mainly just asking for conceptual reasons based upon the 
>>>paragraph prior to my question.
>>>If it occurs, should the originator of 199 tag X process the 2xx tag 
>>>X like a UAC or proxy?
>> 
>>
>><snip>
>>
>>Maybe it could steal a tag when sending an error response, but in that

>>case I guess it doesn't matter very much. I guess the UAC could simply

>>ACK it.
>
>Yes, my question was mainly concerning situation caused by proxies that
incorrectly use another's early dialog To tag when originating a failure
INVITE response like 487 when no final INVITE 
>response has been received.  Hopefully there are no longer proxies that
actually do it. :) If the 199 originator uses such a tag to send 199 and
INVITE 200 received using the same tag, I was 
>curious how the 199 originator should behave (as proxy or UAC).  If it
proxies the INVITE 200, the call might actually get established and stay
up when UAC does not support 199 or
>199 was dropped.

In this case I guess the UAC could simply send ACK + BYE. It may not be
the desired behavior, but could be the result of badly "tag stealing"
behaving proxies.

Regards,

Christer
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug  6 22:41:28 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5DCFB3A690E;
	Wed,  6 Aug 2008 22:41:28 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 7374A3A690E
	for <sip@core3.amsl.com>; Wed,  6 Aug 2008 22:41:26 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -7.283
X-Spam-Level: 
X-Spam-Status: No, score=-7.283 tagged_above=-999 required=5 tests=[AWL=0.966, 
	BAYES_00=-2.599, GB_I_INVITATION=-2, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id jJ0rbQ3Zt0Ht for <sip@core3.amsl.com>;
	Wed,  6 Aug 2008 22:41:24 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 6EC883A6808
	for <sip@ietf.org>; Wed,  6 Aug 2008 22:41:24 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	CEC0C213F5; Thu,  7 Aug 2008 07:41:38 +0200 (CEST)
X-AuditID: c1b4fb3e-a8e85bb000007a96-67-489a8b12531b
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	A6D1F213F1; Thu,  7 Aug 2008 07:41:38 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 7 Aug 2008 07:41:38 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 7 Aug 2008 07:41:37 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF07549019@esealmw113.eemea.ericsson.se>
In-Reply-To: <489A2194.10005@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Multiple early-dialog usages [was RE: Comments
	on	draft-ietf-sip-199-00.txt]
thread-index: Acj4EUWPmZkFFnAERAeAnIiy6k15bQAPc3qQ
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>	<489861C9.2020507@cisco.com>	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>	<48999834.4080304@cisco.com>	<C0E80510684FE94DBDE3A4AF6B968D2D03DBB10D@esealmw118.eemea.ericsson.se>	<CA9998CD4A020D418654FCDEF4E707DF07548A9B@esealmw113.eemea.ericsson.se>	<4899C166.70109@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78D0@esealmw113.eemea.ericsson.se>
	<489A2194.10005@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 07 Aug 2008 05:41:38.0411 (UTC)
	FILETIME=[42EF4BB0:01C8F850]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>, Ian Elz <ian.elz@ericsson.com>
Subject: Re: [Sip] Multiple early-dialog usages [was RE: Comments
	on	draft-ietf-sip-199-00.txt]
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi, 

>>>>I've changed the name of this thread, because I think the scope is
wider than 199 :)
>>>Perhaps. But I don't think there is much to discuss.
>>>
>>>It seems clear that we don't have any way to cause a dialog with
>>>*multiple* *early* dialog usages. This is because only an 
>>>invite-dialog-usage can be early, and you can only have one of those 
>>>per dialog.
>>>
>>>It seems technically possible to have a dialog that has both an early

>>>dialog usage and a final dialog usage. There may be question of 
>>>whether there is practical value in this, but for now I will simply 
>>>assume it is possible. We can discuss if it might not be possible, or

>>>if it should be declared so, but I don't know if we need to.
>>>
>>>RFC 5057 addresses the impact of responses on the state of 
>>>transactions, dialog usages, and dialogs. The interesting question is

>>>whether the proposed 199 response would require some alteration to 
>>>5057. The reason its interesting is because the 199 is effectively a 
>>>final response in disguise. But that brings it back to something that

>>>ought to be discussed on the 199 thread.
>> 
>>So, from a 199 point of view I guess the only thing we can do at the
moment is to provide some text and say that care shall be taken when
multiple dialogusages exist, and the 199 doesn't 
>>provide more information.
>> 
>>think it is extremely rare that one would first establish a
subscription dialog, and then send an INVITE and create an early invite
usage within that dialog. I would even dare to say that no 
>>such implementations exist today, but I can of course be wrong...
>
>Agreed. I think the most likely way to get into the situation is to
send a SUBSCRIBE, or more likely a REFER, within a dialog resulting from
an early invite dialog usage.  The REFER case may 
>actually be plausible.
>
>>As imentioned earlier, I also think it's not a good idea to create
subscription usages within an early INVITE dialog. In case of forking
you may send SUBSCRIBE to all UASes, and when some 
>>sends 200 OK for the INVITE you may have to unsubscribe to all the
other UASes. etc etc.
>
>I can't think of a likely use for SUBSCRIBE.
>
>>And, because of all issues described in RFC 5057, I hope people won't
define such use-case in future either. 
>
>If we can find no deployed usages, we might take the opportunity to
simply ban them.

Yes. Something for the fix-the-bugs documentation work the WG has been
discussing?

Also, when we now have decided to start working on the info packages,
people will have a choise to use those instead for early in-dialog cases
(and in-dialog cases in general).

Regards,

Christer





>> -----Original Message-----
>> From: Ian Elz
>> Sent: 6. elokuuta 2008 16:51
>> To: Paul Kyzivat
>> Cc: Christer Holmberg; SIP IETF
>> Subject: RE: [Sip] Comments on draft-ietf-sip-199-00.txt
>>
>> Paul,
>>
>> I only included 'early dialog' as this is the term that is already
used.
>>
>> We cannot criticize RFC 3261 for this as when it was written INVITE 
>> was the ONLY dialog creating transaction.
>>
>> Should some input be given to Robert Sparks' invfix draft as it is 
>> proposing corrections to the INVITE transaction state machines.
>>
>> Based on the  existing draft (-02) sending or receiving a 1xx 
>> response places the transaction in the 'proceeding' state which is 
>> does not exit until a final response has been sent or received, or I 
>> assume the dialog/usage terminates.
>>
>> If we retain the state model of proposed in invfix then the 199 
>> response should be treated as an invitation to the UAC to terminate 
>> the early dialog usage with a BYE method. If this does not happen the

>> transaction will remain as 'proceeding' and the early dialog usage
may also remain.
>>
>> The alternative is to modify the proposed transaction state models 
>> for special handling for the 199 response. This is something which I 
>> am not sure that I would favour.
>>
>> Ian Elz
>>
>> System Manager
>> DUCI LDC UK
>> (Lucid Duck)
>>
>> Office: + 44 24 764 35256
>> gsm: +44 7801723668
>> ian.elz@ericsson.com
>>
>>
>> -----Original Message-----
>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]
>> Sent: 06 August 2008 13:25
>> To: Ian Elz
>> Cc: Christer Holmberg; SIP IETF
>> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
>>
>>
>>
>> Ian Elz wrote:
>>> Paul,
>>>
>>> I don't believe that you can create 'multiple early dialog usages'.
>>>
>>> On an INVITE transaction can create an early dialog. The other 
>>> dialog creating transactions REFER and SUBSCRIBE, can only create 
>>> established dialogs.
>>>
>>> As you cannot start a second INVITE transaction while there is an 
>>> outstanding INVITE transaction on a dialog, early or otherwise.
>>>
>>> If you send a REFER or SUBSCRIBE method on an early dialog and you 
>>> get an acceptance response then you have an established dialog.
>> Agreed. I should have pointed that out.
>>
>> However, the issue arises if you can get an early invite dialog usage

>> with a confirmed dialog usage. In that case one must be careful with 
>> the
>>
>> rules to ensure that you don't accidentally terminate the confirmed 
>> usage as a side effect of processing the 199 on the early invite 
>> dialog usage.
>>
>>> If this is the early-dialog from an INVITE transaction then key
>> question
>>> is what is the validity of a provisional response in creating a
>> dialog.
>>> Is it early or established. While the provisional response is 
>>> clearly just that from a transaction perspective in this situation 
>>> the meaning of the proposed 199 provisional response is now 
>>> transaction affecting and not dialog affecting, i.e. the INVITE 
>>> usage will not become established although the other usage may be
established.
>>>
>>> The existing state models in sip only discuss dialogs and 
>>> transactions and have not considered the dialog usage. When you send

>>> a reliable provisional response to an INVITE you are in effect 
>>> creating an early-dialog usage. If this is the only dialog usage on 
>>> the dialog you have also created an early-dialog. If there is 
>>> another usage on the
>> same
>>> dialog then the dialog state will depend upon the state of the other

>>> dialog.
>> IMO there really shouldn't be any "early dialog", ever. The dialog 
>> comes
>>
>> into existence, and departs, based on the existence of at least one 
>> usage. The dialog is the same whether the usages are early or late, 
>> or a
>>
>> combination.
>>
>> I agree that it would be helpful to recast all the state machines in 
>> terms of dialog usages rather than dialogs. Maybe that is a job for 
>> the draft standard version of 3261.
>>
>>> RFC5057, Multiple Dialog Usage (informational) does not discuss the 
>>> details involved in multiple usages and the impact on the sip state 
>>> models but I hope that this was a consideration when the initial
>> drafts
>>> were prepared. 
>>>
>>> I am unsure if the concept of multiple usages on an early dialog was

>>> ever considered when RFC5057 was in draft stage. The nuances of
>> multiple
>>> dialogs on an established dialog appears to have been enough to
>> suggest
>>> that the RFC specifically not recommend multiple usages without
>> getting
>>> into the 'dark area' of early dialogs and multiple usages.
>>>
>>> Whether it make sense to use a REFER or SUBSCRIBE inside an early
>> dialog
>>> is problematic. I am unsure whether these do make any sense. Would 
>>> you want to subscribe to specific event which occurs during the 
>>> early
>> dialog
>>> phase of an INVITE transaction? Would you want to use REFER to 
>>> perform
>> a
>>> transfer of a ringing call and does the protocol actually support
>> this?
>>> If the answer to these questions is a definitive 'NO' then the issue

>>> will have resolves itself. I fear however that there is no 
>>> definitive answer at this time.
>> Right.
>>
>> 	Paul
>>
>>> Ian Elz
>>>
>>> System Manager
>>> DUCI LDC UK
>>> (Lucid Duck)
>>>
>>> Office: + 44 24 764 35256
>>> gsm: +44 7801723668
>>> ian.elz@ericsson.com
>>>
>>>
>>> -----Original Message-----
>>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]
>>> Sent: 05 August 2008 15:21
>>> To: Christer Holmberg
>>> Cc: SIP IETF
>>> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
>>>
>>>
>>>
>>> Christer Holmberg wrote:
>>>> Hi,
>>>>
>>>>>> 7) Section 7: "A UAC that receives a 199 response for an early
>>> dialog
>>>> MUST NOT
>>>>>> send any further requests on that dialog...". Can you point to 
>>>>>> any
>>>> list discussion
>>>>>> around this requirement? I think there's some danger to consider
>>>> there. At the
>>>>>> very least we need to make this statement multiple-usage safe.
>>>>> This is a very good catch. This needs to be aligned with
>> dialogusage.
>>>> If the 199 contained the final response that triggered it, then 
>>>> that final response could be used to determine the impact
>>>>> on the dialog or dialog usage or just the transaction. But if the
>> 199
>>>> doesn't contain the final response, then this is a problem.
>>>>
>>>> I forgot to bring this issue up in Dublin. Sorry for that.
>>>>
>>>> First, we need to remember that the UAS may terminate every
>>> dialogusage
>>>> when sending the final response (depending on what final response 
>>>> is sent), without the UAC knowing it. And, due to the forking 
>>>> rules, the final response which is sent to the UAC may not even be 
>>>> the same
>> which
>>>> was sent by the UAS, if a final response from another UAS is chosen
>> as
>>>> the "best".
>>>>
>>>> Second, we need to remember that this only affects
>> early-dialogusages.
>>>> If needed, I guess we could include the final response which
>> triggered
>>>> the 199, but we could also simply say that if the UAC does not know
>> to
>>>> which dialogusage (if there are many) the 199 applies, it should 
>>>> not
>>> do
>>>> anything which may affect other usages for the same early dialog.
>>> The establishment of multiple early dialog usages is a pretty 
>>> strange thing. Do we know of any use cases for this? (E.g. an 
>>> in-dialog REFER
>> on
>>> an early INVITE. Is that legal?)
>>>
>>> Assuming it can arise, then I agree it is reasonable to treat the 
>>> 199
>> as
>>> affecting only its dialog usage unless there is info with it (such 
>>> as the actual final response code) that gives evidence that the 
>>> whole dialog is gone.
>>>
>>> 	Thanks,
>>> 	Paul
>>>
>>>
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use 
> sip-implementors@cs.columbia.edu for questions on current sip Use 
> sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug  7 04:51:48 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2F6413A6AE0;
	Thu,  7 Aug 2008 04:51:48 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B5FF03A68C2
	for <sip@core3.amsl.com>; Thu,  7 Aug 2008 04:51:46 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.549
X-Spam-Level: 
X-Spam-Status: No, score=-6.549 tagged_above=-999 required=5 tests=[AWL=0.050, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id bZhbAEyPcDvD for <sip@core3.amsl.com>;
	Thu,  7 Aug 2008 04:51:45 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id E3BCE3A6B22
	for <sip@ietf.org>; Thu,  7 Aug 2008 04:51:44 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,319,1215388800"; d="scan'208";a="16755558"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 07 Aug 2008 11:52:20 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m77BqJqK008181; 
	Thu, 7 Aug 2008 07:52:19 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m77BqJhC028954;
	Thu, 7 Aug 2008 11:52:19 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 7 Aug 2008 07:52:19 -0400
Received: from [10.86.240.110] ([10.86.240.110]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 7 Aug 2008 07:52:19 -0400
Message-ID: <489AE22A.5010502@cisco.com>
Date: Thu, 07 Aug 2008 07:53:14 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <CA9998CD4A020D418654FCDEF4E707DF046C78D4@esealmw113.eemea.ericsson.se>	<BBE61D1553D8A34F812FF87377B2935F04696568@ATL1VEXC020.usdom003.tco.tc>
	<CA9998CD4A020D418654FCDEF4E707DF0754900D@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF0754900D@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 07 Aug 2008 11:52:19.0088 (UTC)
	FILETIME=[0B694900:01C8F884]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1221; t=1218109939;
	x=1218973939; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20199=3A=20Staus=20and=20open=20i
	ssues=20after=20Dublin=20-=20support=09indicator |Sender:=20
	|To:=20Christer=20Holmberg=20<christer.holmberg@ericsson.co m>;
	bh=sK7gNaIQ6CGyFGPoV2vGnfnX9LUGxoubCZlqYwDpFrw=;
	b=YZVBJm7/GhgEmBhVCSbDCVptCb7YWIpRx3aAhTi5rpFbpfEjOu6s6f/A4k
	lcW6gA4lBwaGgnTHvedbzVtGouKj2Sx80kr58hQtas/DndbBq4O5tBtNsI0E
	PH4GNM3x1o;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: sip@ietf.org, Brett Tate <brett@broadsoft.com>
Subject: Re: [Sip] 199: Staus and open issues after Dublin -
	support	indicator
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Christer Holmberg wrote:
> Hi Brett,
> 
>>>> If UAC does not support 199, sending it might cause more harm than
> good.
>>> A UAC should discard what it doesn't support.
>> RFC 3261 section 8.1.3.2: "A UAC MUST treat any provisional response
> different than 100 that it does not recognize as 183 (Session
> Progress)."
>> The above requirement adds complication for devices (not supporting
> 199) only maintaining a limited number of early dialogs or using latest
> 1xx to recognize most likely active early dialog.
>> The 199 could trigger them to forgot or not prefer a useful early
> dialog for the one associated with 199.
> 
> Wouldn't that mean that, if the UAC does not insert the indicator,
> proxies are not allowed to insert it either? Because, if they do, and
> receive 199 I guess they will simply forward the 199 towards the UAC,
> and you end up in the same situation. An intermediate B2BUA could of
> course terminate the 199, and not forward it towards a UAC not
> supporting it, but I don't think we want to define such behavior for
> normal proxies.

If we postulate such an indicator, then why would a proxy *want* to 
insert it? I agree it would be a bad thing.

	Paul
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug  7 04:57:43 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1F2C43A6BB0;
	Thu,  7 Aug 2008 04:57:43 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3E7263A6BAD
	for <sip@core3.amsl.com>; Thu,  7 Aug 2008 04:57:42 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.313
X-Spam-Level: 
X-Spam-Status: No, score=-6.313 tagged_above=-999 required=5
	tests=[AWL=-0.064, BAYES_00=-2.599, HELO_EQ_SE=0.35,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 315mjnQfhyg1 for <sip@core3.amsl.com>;
	Thu,  7 Aug 2008 04:57:41 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 2DB3F3A6B8C
	for <sip@ietf.org>; Thu,  7 Aug 2008 04:57:41 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	C7F86206AA; Thu,  7 Aug 2008 13:58:15 +0200 (CEST)
X-AuditID: c1b4fb3c-af0d0bb0000015b5-f3-489ae357e8bc
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	AC1AB20547; Thu,  7 Aug 2008 13:58:15 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 7 Aug 2008 13:58:15 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 7 Aug 2008 13:58:14 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF07575B2D@esealmw113.eemea.ericsson.se>
In-Reply-To: <489AE22A.5010502@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] 199: Staus and open issues after Dublin - support	indicator
thread-index: Acj4hBGB/I1YRMfKRR2VlHeuEPgu5QAADqVw
References: <CA9998CD4A020D418654FCDEF4E707DF046C78D4@esealmw113.eemea.ericsson.se>	<BBE61D1553D8A34F812FF87377B2935F04696568@ATL1VEXC020.usdom003.tco.tc>
	<CA9998CD4A020D418654FCDEF4E707DF0754900D@esealmw113.eemea.ericsson.se>
	<489AE22A.5010502@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 07 Aug 2008 11:58:15.0626 (UTC)
	FILETIME=[DFECAAA0:01C8F884]
X-Brightmail-Tracker: AAAAAA==
Cc: sip@ietf.org, Brett Tate <brett@broadsoft.com>
Subject: Re: [Sip] 199: Staus and open issues after Dublin -
	support	indicator
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi, 

>>>>If UAC does not support 199, sending it might cause more harm than
good.
>>>A UAC should discard what it doesn't support.
>>>RFC 3261 section 8.1.3.2: "A UAC MUST treat any provisional response
>>>different than 100 that it does not recognize as 183 (Session
Progress)."
>>>The above requirement adds complication for devices (not supporting
>>>199) only maintaining a limited number of early dialogs or using 
>>>latest 1xx to recognize most likely active early dialog.
>>>The 199 could trigger them to forgot or not prefer a useful early
>>>dialog for the one associated with 199.
>> 
>>Wouldn't that mean that, if the UAC does not insert the indicator, 
>>proxies are not allowed to insert it either? Because, if they do, and 
>>receive 199 I guess they will simply forward the 199 towards the UAC, 
>>and you end up in the same situation. An intermediate B2BUA could of 
>>course terminate the 199, and not forward it towards a UAC not 
>>supporting it, but I don't think we want to define such behavior for 
>>normal proxies.
>
>If we postulate such an indicator, then why would a proxy *want* to
insert it? I agree it would be a bad thing.

I guess proxies would normally NOT insert it, since they normally don't
control media resources etc. However, I guess e.g. an P-CSCF could be
interested in inserting the indicator if not received from the UE. 

But, if we choose to define an indicator I guess a P-CSCF that wants to
do such thing would have to act as a B2BUA.

That also means we could use an option-tag.

Regards,

Christer

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug  7 11:00:14 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5E28B3A6C44;
	Thu,  7 Aug 2008 11:00:14 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D7A9F3A6C45
	for <sip@core3.amsl.com>; Thu,  7 Aug 2008 11:00:12 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -3.599
X-Spam-Level: 
X-Spam-Status: No, score=-3.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_LOW=-1]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Y38cpnP30qEu for <sip@core3.amsl.com>;
	Thu,  7 Aug 2008 11:00:11 -0700 (PDT)
Received: from endor.rfc3261.net (endor.rfc3261.net [212.112.227.208])
	by core3.amsl.com (Postfix) with ESMTP id 1B95E3A68FF
	for <sip@ietf.org>; Thu,  7 Aug 2008 11:00:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by endor.rfc3261.net (Postfix) with ESMTP id 6B1CD26000B;
	Thu,  7 Aug 2008 20:00:46 +0200 (CEST)
Received: from endor.rfc3261.net ([127.0.0.1])
	by localhost (endor [127.0.0.1]) (amavisd-new, port 10024) with LMTP
	id 04898-03-2; Thu, 7 Aug 2008 20:00:31 +0200 (CEST)
Received: from Nils-MacBook-2.local (unknown [78.52.224.122])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by endor.rfc3261.net (Postfix) with ESMTP id 8427A26000A;
	Thu,  7 Aug 2008 20:00:31 +0200 (CEST)
Message-ID: <489B383E.6080205@ohlmeier.org>
Date: Thu, 07 Aug 2008 20:00:30 +0200
From: Nils Ohlmeier <lists@ohlmeier.org>
User-Agent: Thunderbird 2.0.0.16 (Macintosh/20080707)
MIME-Version: 1.0
To: SIP IETF <sip@ietf.org>, "DRAGE, Keith (Keith)" <drage@alcatel-lucent.com>,
	Dean Willis <dean.willis@softarmor.com>
Content-Type: multipart/mixed; boundary="------------000108020402020304030501"
X-Virus-Scanned: by amavisd-new (Debian) at endor.rfc3261.net
Cc: Christophe.Lebel@alcatel-lucent.fr
Subject: [Sip] Review of draft-ietf-sip-record-route-fix-03
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.
--------------000108020402020304030501
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Hello,

Keith asked me the review the sip-record-route-fix draft.

I think the draft is important and summarizes well what is state of the 
art for the majority of the SIP implementations any way.

Most of my findings are just minor fixes. Except the following two:

Section 6.1, 2nd paragraph on page 17:
   What happen if... still problemtic.

I do not agree with what is stated in this paragraph. It works only if 
both UAs get to the result of using UDP as transport. But if both would
come to the result to use TCP (or any other transport which is not equal 
to the one which was used by UA2 for its registration), the problem 
still remains that UA2 is registered only via UDP. And later on UA2 
would have to switch to TCP because of the DNS resolution.
In my attached patch I tried to fix this already with some more words.

Section 6.2, first paragraph:

Why does this paragraph open the door again for rewriting, if the rest 
of document recommends this as an depricated technique? Is this intentional?

I'm attaching a patch with my minor fixes and suggestions/add-ons for 
clarification. Let me know if you would like to receive it in a 
different format.

Best regards
   Nils Ohlmeier

--------------000108020402020304030501
Content-Type: text/plain; x-mac-type="0"; x-mac-creator="0";
 name="draft-ietf-sip-record-route-fix-03.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="draft-ietf-sip-record-route-fix-03.patch"

--- draft-ietf-sip-record-route-fix-03-orig.txt	2008-08-03 23:30:32.000000000 +0200
+++ draft-ietf-sip-record-route-fix-03.txt	2008-08-07 19:20:22.000000000 +0200
@@ -376,7 +376,8 @@
       -- 192.0.2.1
 
    UA2 has one interface with address, 192.0.2.2.  There is potentially
-   no IP level route between UA1 and UA2; no ping; no traceroute.  They
+   no IP level route between UA1 and UA2 (pinging or traceroute does not
+   work between these two hosts). They
    live in entirely different networks.  But they can still exchange SIP
    messages, because P is a SIP Proxy.  This works in SIP because P can
    "record-route".
@@ -432,13 +433,13 @@
    current text indicates that the Record-Route value MUST be modified
    to contain a SIPS URI when routing a response from non-TLS to TLS
    transports.  This makes sense only if the request indicated SIPS.
-   Hop-by-hop TLS needs to be covered separately, see [BUG735]).
+   Hop-by-hop TLS needs to be covered separately, see [BUG735].
 
    This list enlights the utility of rewriting and double Record-Routing
    techniques which apply for any multi-homed proxy use case, whenever
    the proxy changes its IP address, the transport parameter or the URI
    scheme between incoming and outgoing interfaces.  This is why, these
-   techniques are described, compared and discussed in sections 4 and 5;
+   techniques are described, compared and discussed in sections 4 and 5,
    the specific question to put or not the transport parameter on
    Record-Route is then discussed in Section 6.
 
@@ -467,7 +468,9 @@
    request phase, it goes through output interface calculation and
    writes the output interface into the route.  It must then inspect all
    responses, grep for an input interface, and selectively edit them to
-   reference the correct output interface: this is a CPU drag.
+   reference the correct output interface. And this has to be done for
+   dialog initiating and in-dialog requests and responses: this is a 
+   CPU drag.
 
    Therefore this document recommends not re-writing the Record-Route.
    Instead, proxies SHOULD use the Double Record-Route approach as
@@ -518,17 +521,19 @@
    completely backwards compatible with [RFC3261].  Generally speaking,
    the time complexity will be less in double Record-Routing since on
    the response, the proxy does not have to do any re-writes (and thus,
-   no searching).
+   no searching). And the handling of in-dialog requests and responses
+   requires no special state-full handling any more.
 
-   When double Record-Routing, the proxy will have to handle the
+   When double Record-Routing is used, the proxy will have to handle the
    subsequent in-dialog request(s) as a spiral, and consequently devote
-   some space to maintaining a transaction.  In order to avoid a spiral,
-   the proxy has to be smart and scan an extra route ahead to determine
+   some space to maintaining an additional transaction.  In order to avoid
+   a spiral,
+   the proxy can be smart and scan an extra route ahead to determine
    whether the request will spiral through it.  If it does, it can
    optimize the second spiral through itself.  Even though this is an
    implementation decision, it is much more efficient to avoid
    spiraling.  So, it means in section 16.4, "Route Information
-   Preprocessing" f[RFC3261], implementors can choose that proxy MAY
+   Preprocessing" [RFC3261], implementors can choose that proxy MAY
    remove two routes instead of one when using the double Record-
    Routing.
 
@@ -538,8 +543,8 @@
    annotates the dialog state on each UA.  In this example, proxy P1,
    responsible for the domain biloxy.com, receives a request from an
    IPv4-only upstream client.  It proxies this request to an IPv6-only
-   downstream server.  Proxy P1 is running on a dual-stack host; on the
-   IPv4 interface, it has an address of 192.0.2.1 and on the IPv6
+   downstream UA.  Proxy P1 is running on a dual-stack host, on the
+   IPv4 interface, it has an address of 192.0.2.254 and on the IPv6
    interface, it is configured with an address of 2001:db8::1.
 
 
@@ -900,9 +905,10 @@
    the Record-Route URI.
 
    What happen if the proxy had record-routed its logical name (e.g.
-   p1.example.com)? if UA1 and UA2 use the same DNS server, [RFC3263]
+   p1.example.com)? If UA1 and UA2 use the same DNS server, [RFC3263]
    procedure would resolve to the same transport on both sides and
-   scenario should work.  However, if one of the UA sends an initial
+   only if the resulting transport would be UDP the scenario would work.
+   However, if one of the UA sends an initial
    request using a different transport than the one configured in DNS,
    this scenario is still problematic.
 
@@ -996,9 +1002,10 @@
    proxy SHOULD put a Record-Route header as soon as it changes the
    transport protocol parameter between its incoming and outgoing sides.
 
-   By extension, a proxy SHOULD also put a Record-Route header for any
-   multi-homed situation (as the ones described in this document; scheme
-   changes, sigcomp, IPv4/IPv6...) that MAY impact the processing of
+   By extension, a proxy SHOULD also put a double Record-Route header for any
+   multi-homed situation (as the ones described in this document: scheme
+   changes, sigcomp, IPv4/IPv6, transport changes, ...) that MAY impact
+   the processing of
    proxies being on the path of subsequent requests.
 
 
@@ -1021,9 +1028,13 @@
 
       - Record-Route header interoperability problems on transport
       protocol switching scenarios have been outlined and described in
-      section 6.  This last section gives some recommendations to UA and
-      proxy implementations to improve the situation.
-
+      section 6. Proxies SHOULD use Double Record-Routing for any
+      multi-homed situation that MAY impact the further processing.
+      UAs SHOULD NOT offer options to overwrite the transport for
+      initial requests. Further UAs SHOULD rely on DNS to express their
+      desired transport and SHOULD avoid IP addresses with transport
+      parameters in this case. Finally UAs SHOULD be ready to switch
+      transport between the initial request and further in-dialog messages.
 
 
 

--------------000108020402020304030501
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--------------000108020402020304030501--


From sip-bounces@ietf.org  Thu Aug  7 11:42:54 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F23D33A6AC9;
	Thu,  7 Aug 2008 11:42:53 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1952B3A6ACD
	for <sip@core3.amsl.com>; Thu,  7 Aug 2008 11:42:52 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.732
X-Spam-Level: 
X-Spam-Status: No, score=-1.732 tagged_above=-999 required=5 tests=[AWL=0.867, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id TsBqt-CeLoyF for <sip@core3.amsl.com>;
	Thu,  7 Aug 2008 11:42:51 -0700 (PDT)
Received: from romeo.rtfm.com (romeo.rtfm.com [74.95.2.173])
	by core3.amsl.com (Postfix) with ESMTP id 20FA63A6AC9
	for <sip@ietf.org>; Thu,  7 Aug 2008 11:42:51 -0700 (PDT)
Received: from romeo.rtfm.com (localhost.rtfm.com [127.0.0.1])
	by romeo.rtfm.com (Postfix) with ESMTP id 59A2150846;
	Thu,  7 Aug 2008 11:52:57 -0700 (PDT)
Date: Thu, 07 Aug 2008 11:52:57 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: "Dan Wing" <dwing@cisco.com>
In-Reply-To: <02f301c8f7e1$91dd2270$c2f0200a@cisco.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net>
	<02829328-7B0E-41AB-B325-01246363D09C@cisco.com>
	<4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net>
	<48919248.7060600@cisco.com>
	<0ae201c8f310$d183a0f0$3675150a@cisco.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com>
	<20080731205152.03E7E514892@kilo.rtfm.com>
	<E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com>
	<20080801010212.654B5515743@kilo.rtfm.com>
	<0a2101c8f3b1$b75dd500$6a94150a@cisco.com>
	<20080801134611.1B8C9516C54@kilo.rtfm.com>
	<0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net>
	<20080805145945.5B61650846@romeo.rtfm.com>
	<02b801c8f70b$675fed60$c2f0200a@cisco.com>
	<20080805151333.DDB5350846@romeo.rtfm.com>
	<038e01c8f713$84e3cca0$c2f0200a@cisco.com>
	<20080805161109.ABB8F50846@romeo.rtfm.com>
	<053c01c8f720$647c21d0$c2f0200a@cisco.com>
	<9E7CACAD-F4C8-4E59-8F77-C3C8EA741CA6@cisco.com>
	<02f301c8f7e1$91dd2270$c2f0200a@cisco.com>
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.3 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080807185257.59A2150846@romeo.rtfm.com>
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

At Wed, 6 Aug 2008 09:29:13 -0700,
Dan Wing wrote:
> 
>  
> 
> > -----Original Message-----
> > From: Cullen Jennings [mailto:fluffy@cisco.com] 
> > Sent: Tuesday, August 05, 2008 7:54 PM
> > To: Dan Wing
> > Cc: 'Eric Rescorla'; 'Elwell, John'; 'Hadriel Kaplan'; 
> > 'Jonathan Rosenberg'; 'SIP IETF'; 'Uzelac, Adam'
> > Subject: Re: [Sip] Thoughts on SIP Identity issues
> > 
> > 
> > On Aug 5, 2008, at 10:26 , Dan Wing wrote:
> > 
> > >>>>
> > >>>> With that said, ISTM that this cuts against your argument
> > >>>> that we should
> > >>>> be signing less of the message, since the failure of RFC
> > >> 4474 (to the
> > >>>> extent there is one) in this case is that it doesn't protect
> > >>>> *enough* information.
> > >>>
> > >>> Neither draft-fischer-sip-e2e-sec-media and
> > >>> draft-wing-sip-identity-media
> > >>> simply "sign less" -- please do not mis-characterize the
> > >>> proposals.  Both
> > >>> proposals require a public key exchange with the remote
> > >>> party -- which
> > >>> is far stronger than just using the IP address of the remote party
> > >>> as is done by RFC4474.
> > >>
> > >> I don't actually think this characterization of 4474 is that  
> > >> accurate.
> > >> RFC 4474 does not use the IP address for authenticating the media.
> > >> Rather, it authenticates the IP address as well as the rest of the
> > >> SDP
> > >
> > > Which draft-kaplan-sip-baiting shows is insufficient at its intended
> > > purpose.
> > 
> > I probably disagree but to sort that out ... What exactly do you see  
> > as the purpose of 4474 which the baiting draft shows it does not meet?
> 
> The purpose of 4474 is to identity the calling party.

Well, I wasn't an author of 4474, but that's not what I take to be its
purpose. Rather, I think the purpose is to provide cryptographic
data origin authentication and message integrity, which it does.

Here's what the abstract says:

   The existing security mechanisms in the Session Initiation Protocol
   (SIP) are inadequate for cryptographically assuring the identity of
   the end users that originate SIP requests, especially in an
   interdomain context.  This document defines a mechanism for securely
   identifying originators of SIP messages.  It does so by defining two
   new SIP header fields, Identity, for conveying a signature used for
   validating the identity, and Identity-Info, for conveying a reference
   to the certificate of the signer.

The identity of the message originator is a critical part of
identifying the calling party, but I think it's also equally clear
that it's necessary but not sufficient, since in the absence of
cryptographic authentication for the media (i.e., SRTP), a
sufficiently powerful (i.e., onpath) attacker can still cause
mismatches between the displayed identity and the actual source
of the media. For instance, if the attacker can convince Alice
to call Bob, he can then hijack the media, no matter what 
cryptographic authentication is applied to the signalling.
So, providing accurate caller identification can't be the purpose
of RFC 4474 since it's trivially apparent it can't fulfill it.

I would observe that this is also true about the non-SRTP
proof of identity mechanisms described in draft-wing-sip-identity-media.
For instance, if you use the ICE exchange described in S 4.3,
the attacker can simply allow the ICE exchange to complete but
then hijack the media afterwards. What ICE is providing is
a liveness test for the signalling but that serves to make this
an on-path attack, not to block it entirely.

-Ekr
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug  7 14:07:25 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 99DA93A69A6;
	Thu,  7 Aug 2008 14:07:25 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 749233A69A6
	for <sip@core3.amsl.com>; Thu,  7 Aug 2008 14:07:24 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.185
X-Spam-Level: 
X-Spam-Status: No, score=-0.185 tagged_above=-999 required=5
	tests=[BAYES_40=-0.185]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Ch8g6Pb-fqHi for <sip@core3.amsl.com>;
	Thu,  7 Aug 2008 14:07:23 -0700 (PDT)
Received: from smtp118.rog.mail.re2.yahoo.com (smtp118.rog.mail.re2.yahoo.com
	[68.142.225.234])
	by core3.amsl.com (Postfix) with SMTP id 699DB3A699F
	for <sip@ietf.org>; Thu,  7 Aug 2008 14:07:22 -0700 (PDT)
Received: (qmail 18048 invoked from network); 7 Aug 2008 21:07:21 -0000
Received: from unknown (HELO connotech.com) (t2i6@rogers.com@209.148.165.15
	with plain)
	by smtp118.rog.mail.re2.yahoo.com with SMTP; 7 Aug 2008 21:07:21 -0000
X-YMail-OSG: kxwa9PgVM1mhaF530g2506k_azOe.TZIvFk1ORP8RoUVAdlsyXOXwpzjtaSrisPB8w--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <489B64CC.50001@connotech.com>
Date: Thu, 07 Aug 2008 16:10:36 -0500
From: Thierry Moreau <thierry.moreau@connotech.com>
User-Agent: Mozilla/5.0 (Windows; U; WinNT4.0; en-US;
	rv:1.4) Gecko/20030624 Netscape/7.1 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Eric Rescorla <ekr@networkresonance.com>
References: <4889E9B5.40200@connotech.com>	<20080725150840.D83294A95BB@kilo.rtfm.com>	<4889FBA2.4000505@connotech.com>
	<20080725162311.5080B4AB18B@kilo.rtfm.com>
In-Reply-To: <20080725162311.5080B4AB18B@kilo.rtfm.com>
Cc: sip@ietf.org
Subject: Re: [Sip] DTLS Certificate Request vs Self-signed EE Certificates
 vs	R-EXISTING
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Eric Rescorla wrote:

> At Fri, 25 Jul 2008 11:13:22 -0500,
> Thierry Moreau wrote:
> 
>>
>>It would allow a server to announce its preferred trusted CAs 
>>(fulfilling R-EXISTING) *AND* its willingness to accept "auto-issued" 
>>certificates. An EE having (genuine) certificates from CA-1 and CA-2 
>>would select among these two per server expressed preferences. I guess 
>>you see the point.
> 
> 
> Yes, this seems to me to be of relatively modest value. In any
> case, this is a feature which could easily be added at some point
> in the future if such a fake CA ever existed.
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> 

There is now a draft, i.e. draft-moreau-pkix-aixcm-00.txt

https://datatracker.ietf.org/drafts/draft-moreau-pkix-aixcm/


Don't forget that the fake CA does not exist, it is just a standardized 
distinguished name for indicating a (breached, explicit meaningless, 
fake) public domain private signature key. Accordingly, the SIP wg could 
standardize its "own" distinguished name to indicate its "own" public 
domain private signature key.


Regards,

-- 

- Thierry Moreau

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  8 01:58:34 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3F9DB3A6B45;
	Fri,  8 Aug 2008 01:58:34 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id ED1603A6B45
	for <sip@core3.amsl.com>; Fri,  8 Aug 2008 01:58:33 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.249
X-Spam-Level: 
X-Spam-Status: No, score=-6.249 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XDbOMhIlXYr8 for <sip@core3.amsl.com>;
	Fri,  8 Aug 2008 01:58:33 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 339273A6C7D
	for <sip@ietf.org>; Fri,  8 Aug 2008 01:58:33 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	3FE17209C7; Fri,  8 Aug 2008 10:58:32 +0200 (CEST)
X-AuditID: c1b4fb3c-b00d2bb0000015b5-73-489c0ab82705
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	231F02004D; Fri,  8 Aug 2008 10:58:32 +0200 (CEST)
Received: from esealmw126.eemea.ericsson.se ([153.88.254.174]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 8 Aug 2008 10:58:31 +0200
Received: from [164.48.29.111] ([164.48.29.111]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 8 Aug 2008 10:58:31 +0200
Message-ID: <489C0AB1.5080003@ericsson.com>
Date: Fri, 08 Aug 2008 11:58:25 +0300
From: Gonzalo Camarillo <Gonzalo.Camarillo@ericsson.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: sip <sip@ietf.org>
X-OriginalArrivalTime: 08 Aug 2008 08:58:31.0686 (UTC)
	FILETIME=[EE9BC260:01C8F934]
X-Brightmail-Tracker: AAAAAA==
Cc: Keith Drage <drage@alcatel-lucent.com>,
	Dean Willis <dean.willis@softarmor.com>
Subject: [Sip] WGLC comments on draft-ietf-sip-body-handling-03.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Folks,

I have just submitted a new revision of the body handling draft, which 
addresses all the WGLC comments received:

http://www.ietf.org/internet-drafts/draft-ietf-sip-body-handling-03.txt

Cheers

Gonzalo
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  8 02:00:03 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 517563A6CC6;
	Fri,  8 Aug 2008 02:00:03 -0700 (PDT)
X-Original-To: sip@ietf.org
Delivered-To: sip@core3.amsl.com
Received: by core3.amsl.com (Postfix, from userid 0)
	id 570B63A6CC6; Fri,  8 Aug 2008 02:00:01 -0700 (PDT)
From: Internet-Drafts@ietf.org
To: i-d-announce@ietf.org
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
Message-Id: <20080808090001.570B63A6CC6@core3.amsl.com>
Date: Fri,  8 Aug 2008 02:00:01 -0700 (PDT)
Cc: sip@ietf.org
Subject: [Sip] I-D Action:draft-ietf-sip-body-handling-03.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.


	Title           : Message Body Handling in the Session Initiation Protocol (SIP)
	Author(s)       : G. Camarillo
	Filename        : draft-ietf-sip-body-handling-03.txt
	Pages           : 19
	Date            : 2008-08-08

This document specifies how message bodies are handled in SIP.
Additionally, this document specifies SIP user agent support for MIME
(Multipurpose Internet Mail Extensions) in message bodies.

A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-body-handling-03.txt

Internet-Drafts are also available by anonymous FTP at:
ftp://ftp.ietf.org/internet-drafts/

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Message/External-body;
	name="draft-ietf-sip-body-handling-03.txt";
	site="ftp.ietf.org";
	access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2008-08-08015500.I-D@ietf.org>


--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--


From sip-bounces@ietf.org  Fri Aug  8 03:33:33 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5CFCF3A6CAD;
	Fri,  8 Aug 2008 03:33:33 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9C09F3A6B91
	for <sip@core3.amsl.com>; Fri,  8 Aug 2008 03:33:32 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.947
X-Spam-Level: 
X-Spam-Status: No, score=-5.947 tagged_above=-999 required=5 tests=[AWL=0.302, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GDotCMP1TCnR for <sip@core3.amsl.com>;
	Fri,  8 Aug 2008 03:33:31 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 7DBB33A6CAD
	for <sip@ietf.org>; Fri,  8 Aug 2008 03:33:31 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	0419820774; Fri,  8 Aug 2008 12:33:05 +0200 (CEST)
X-AuditID: c1b4fb3c-ac8cbbb0000015b5-05-489c20e03e4e
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	DD965203E4; Fri,  8 Aug 2008 12:33:04 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 8 Aug 2008 12:33:04 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 8 Aug 2008 12:33:04 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0759FD71@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C78C9@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-199-00.txt - offer/answerimpact
thread-index: Acj3BNvSIeqaizDKTB26CvIqnnDGgAAHDU2yAIf8sxA=
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><CA9998CD4A020D418654FCDEF4E707DF0750A6AB@esealmw113.eemea.ericsson.se><48985F47.8060409@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C9@esealmw113.eemea.ericsson.se>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: <sip@ietf.org>,
	"Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 08 Aug 2008 10:33:04.0462 (UTC)
	FILETIME=[23D8AEE0:01C8F942]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt - offer/answerimpact
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

I was thinking a little more about the offer/answer impact.

And, I am not sure this is an 199 issue after all. 

The only time a reliable provisional response is currently mandated to
carry SDP is the follwing: the INVITE didn't contain SDP offer, in which
case the FIRST reliable non-error response (provisional or final) must
contain and SDP offer (that is a rule which we have even questioned, but
that's another topic). 

However, 199 will NEVER be the first response sent, since at least one
18x must have been sent prior in order to establish the early dialog.

So, unless I have missed something I intend to say a few words about
that in the draft and close the open issue.

Regards,

Christer






 

-----Original Message-----
From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
Christer Holmberg
Sent: 5. elokuuta 2008 20:31
To: Paul Kyzivat
Cc: SIP IETF
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt -
offer/answerimpact


Hi,

>>>11) I can't follow the second paragraph of section 9 at all. Can you 
>>>rephrase it?
>>>Once I know what its trying to say, I'll propose alternate text.
>> 
>>What it is supposed to say is that you cannot send a 199 if you are 
>>required (by the offer/answer rules) to include SDP.
>
>Thinking about this further...
>
>This means that a proxy must track the o/a state of the dialog usage in

>order to know whether it can send a 199 or not. That could be a 
>considerable burden. It requires maintaining partial dialog state 
>rather than simply transaction state, and also requires more parsing of

>messages and potentially message bodies. (E.g. with multipart.)
>
>This has me again questioning the cost/benefit tradeoff of the whole 
>thing. Of course in this case the cost is to the proxy, and the benefit

>is to the UAC.

I guess we could simply say never to insert an SDP body in the 199
response. I don't think it would make much harm, since the dialog is
terminated in any case.

And, this could only happen when/if 199 is sent reliably, since
unreliable provisional responses can't carry offer/answers in the first
place...

Regards,

Christer


	Paul

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol Use
sip-implementors@cs.columbia.edu for questions on current sip Use
sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  8 03:37:12 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AC2123A6ACC;
	Fri,  8 Aug 2008 03:37:12 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9A3413A6830
	for <sip@core3.amsl.com>; Fri,  8 Aug 2008 03:37:11 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.007
X-Spam-Level: 
X-Spam-Status: No, score=-6.007 tagged_above=-999 required=5 tests=[AWL=0.241, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, HTML_MESSAGE=0.001,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 46aDJ1nCnveC for <sip@core3.amsl.com>;
	Fri,  8 Aug 2008 03:37:10 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 889C93A6407
	for <sip@ietf.org>; Fri,  8 Aug 2008 03:37:10 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	AFDBB20103; Fri,  8 Aug 2008 12:37:09 +0200 (CEST)
X-AuditID: c1b4fb3e-a6e81bb000007a96-10-489c21d54b50
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	93D5F21157; Fri,  8 Aug 2008 12:37:09 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 8 Aug 2008 12:37:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 8 Aug 2008 12:37:08 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0759FD88@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 199 issue: Support indicator solving 100rel issue?
thread-index: Acj5QrWGTd62PxnqS7uiLcn4BD9kHw==
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 08 Aug 2008 10:37:09.0335 (UTC)
	FILETIME=[B5CD5670:01C8F942]
X-Brightmail-Tracker: AAAAAA==
Cc: Paul Kyzivat <pkyzivat@cisco.com>, Brett Tate <brett@broadsoft.com>
Subject: [Sip] 199 issue: Support indicator solving 100rel issue?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0768564532=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0768564532==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8F942.B5B20704"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C8F942.B5B20704
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,

Based on some good reasons given by Brett in another thread, having an
199 support indicator (e.g. an option-tag) could acutally be a good
idea.

In addition I think such indicator could help to solve the
sending-199-unreliable-when-100rel-is-required issue. A UAC which
indicates support of 199 would have to be prepared to receive 199
unreliable, even if it has required 100rel.

(We could of course say that a UAC supporting 199 should never require
100rel in the first place, but there may reasons why the UAC wants to
require it for 18x responses, so...)

Regards,

Christer


------_=_NextPart_001_01C8F942.B5B20704
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7652.24">
<TITLE>199 issue: Support indicator solving 100rel issue?</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Based on some good reasons given by =
Brett in another thread, having an 199 support indicator (e.g. an =
option-tag) could acutally be a good idea.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">In addition I think such indicator =
could help to solve the sending-199-unreliable-when-100rel-is-required =
issue. A UAC which indicates support of 199 would have to be prepared to =
receive 199 unreliable, even if it has required 100rel.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">(We could of course say that a UAC =
supporting 199 should never require 100rel in the first place, but there =
may reasons why the UAC wants to require it for 18x responses, =
so...)</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Regards,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Christer</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C8F942.B5B20704--

--===============0768564532==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0768564532==--


From sip-bounces@ietf.org  Fri Aug  8 05:50:44 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BF39B3A6D08;
	Fri,  8 Aug 2008 05:50:44 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CDF5B3A6D08
	for <sip@core3.amsl.com>; Fri,  8 Aug 2008 05:50:42 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Bfvaisa4vMhl for <sip@core3.amsl.com>;
	Fri,  8 Aug 2008 05:50:42 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id F0EBE3A6ACC
	for <sip@ietf.org>; Fri,  8 Aug 2008 05:50:41 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,327,1215388800"; d="scan'208";a="137461115"
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 08 Aug 2008 12:50:31 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m78CoVEe004459; 
	Fri, 8 Aug 2008 05:50:31 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m78CoVgP017074;
	Fri, 8 Aug 2008 12:50:31 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 8 Aug 2008 08:50:31 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 8 Aug 2008 08:50:30 -0400
Message-ID: <489C414F.6020304@cisco.com>
Date: Fri, 08 Aug 2008 08:51:27 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><CA9998CD4A020D418654FCDEF4E707DF0750A6AB@esealmw113.eemea.ericsson.se><48985F47.8060409@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C78C9@esealmw113.eemea.ericsson.se>
	<CA9998CD4A020D418654FCDEF4E707DF0759FD71@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF0759FD71@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 08 Aug 2008 12:50:30.0740 (UTC)
	FILETIME=[5702D940:01C8F955]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2761; t=1218199831;
	x=1219063831; c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Comments=20on=20draft-ietf-sip-
	199-00.txt=20-=20offer/answerimpact |Sender:=20;
	bh=rjUJBTO8Pau8SptnINHX0Qxy0YIpp1zkS68eKrFZyFs=;
	b=V5iiF1QthhSgdO/YyOD52Bm4cRKRtmN+C9VyUHyONF31zqBUUWTuh+gHz6
	Hr5c2IoUNOM2Ba2RMZ3uKmrdSELOzO9hYmoTuerP0JkoCHLDxK2VkG48JD+h
	z94xj0TKkz;
Authentication-Results: sj-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim2002 verified; ); 
Cc: sip@ietf.org
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt - offer/answerimpact
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

OK Christer - I accept your logic here.

	Paul

Christer Holmberg wrote:
> Hi,
> 
> I was thinking a little more about the offer/answer impact.
> 
> And, I am not sure this is an 199 issue after all. 
> 
> The only time a reliable provisional response is currently mandated to
> carry SDP is the follwing: the INVITE didn't contain SDP offer, in which
> case the FIRST reliable non-error response (provisional or final) must
> contain and SDP offer (that is a rule which we have even questioned, but
> that's another topic). 
> 
> However, 199 will NEVER be the first response sent, since at least one
> 18x must have been sent prior in order to establish the early dialog.
> 
> So, unless I have missed something I intend to say a few words about
> that in the draft and close the open issue.
> 
> Regards,
> 
> Christer
> 
> 
> 
> 
> 
> 
>  
> 
> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
> Christer Holmberg
> Sent: 5. elokuuta 2008 20:31
> To: Paul Kyzivat
> Cc: SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt -
> offer/answerimpact
> 
> 
> Hi,
> 
>>>> 11) I can't follow the second paragraph of section 9 at all. Can you 
>>>> rephrase it?
>>>> Once I know what its trying to say, I'll propose alternate text.
>>> What it is supposed to say is that you cannot send a 199 if you are 
>>> required (by the offer/answer rules) to include SDP.
>> Thinking about this further...
>>
>> This means that a proxy must track the o/a state of the dialog usage in
> 
>> order to know whether it can send a 199 or not. That could be a 
>> considerable burden. It requires maintaining partial dialog state 
>> rather than simply transaction state, and also requires more parsing of
> 
>> messages and potentially message bodies. (E.g. with multipart.)
>>
>> This has me again questioning the cost/benefit tradeoff of the whole 
>> thing. Of course in this case the cost is to the proxy, and the benefit
> 
>> is to the UAC.
> 
> I guess we could simply say never to insert an SDP body in the 199
> response. I don't think it would make much harm, since the dialog is
> terminated in any case.
> 
> And, this could only happen when/if 199 is sent reliably, since
> unreliable provisional responses can't carry offer/answers in the first
> place...
> 
> Regards,
> 
> Christer
> 
> 
> 	Paul
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use
> sip-implementors@cs.columbia.edu for questions on current sip Use
> sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  8 08:11:22 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D289A3A6997;
	Fri,  8 Aug 2008 08:11:22 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 643883A6997
	for <sip@core3.amsl.com>; Fri,  8 Aug 2008 08:11:22 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level: 
X-Spam-Status: No, score=0.001 tagged_above=-999 required=5
	tests=[BAYES_50=0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GilJx2Mfu2gr for <sip@core3.amsl.com>;
	Fri,  8 Aug 2008 08:11:21 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 97D553A68CF
	for <sip@ietf.org>; Fri,  8 Aug 2008 08:11:21 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m78FBJRj017887
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT)
	for <sip@ietf.org>; Fri, 8 Aug 2008 10:11:21 -0500
Message-Id: <126A4B0D-4A2F-4184-AEFB-08B2A7AC05BC@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: SIP IETF <sip@ietf.org>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Fri, 8 Aug 2008 10:11:14 -0500
X-Mailer: Apple Mail (2.928.1)
Subject: [Sip] Funny for the day
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Having been around SIP for a while, it seems that I'm now on  
everybody's list for new SIP-related software and hardware.

Today I got an ad for a nifty looking SIP softphone client for Windows.

The sales department's highlighted contact address, should I want more  
info, is a Skype username.

I'm thinking things didn't quite work out like we thought they would.

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  8 10:05:03 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F08013A6C87;
	Fri,  8 Aug 2008 10:05:02 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E1BCC3A6CC2
	for <sip@core3.amsl.com>; Fri,  8 Aug 2008 10:05:01 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.999
X-Spam-Level: 
X-Spam-Status: No, score=-0.999 tagged_above=-999 required=5 tests=[AWL=1.000, 
	BAYES_00=-2.599, J_CHICKENPOX_45=0.6]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GRPpTqXh2xyK for <sip@core3.amsl.com>;
	Fri,  8 Aug 2008 10:05:00 -0700 (PDT)
Received: from mailgate.siemenscomms.co.uk (mailgate.siemenscomms.co.uk
	[195.171.110.225])
	by core3.amsl.com (Postfix) with ESMTP id 8DA023A6C87
	for <SIP@ietf.org>; Fri,  8 Aug 2008 10:04:57 -0700 (PDT)
Received: from GBNTHT12009MSX.gb002.siemens.net ([137.223.219.235])
	by siemenscomms.co.uk (PMDF V6.3-x14 #31430)
	with ESMTP id <0K5A00E83KS5I2@siemenscomms.co.uk> for SIP@ietf.org; Fri,
	08 Aug 2008 18:04:56 +0100 (BST)
Date: Fri, 08 Aug 2008 18:05:05 +0100
From: "Elwell, John" <john.elwell@siemens.com>
To: SIP IETF <SIP@ietf.org>
Message-id: <0D5F89FAC29E2C41B98A6A762007F5D0F8D412@GBNTHT12009MSX.gb002.siemens.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: WGLC comments on draft-ietf-sip-dtls-srtp-framework-02
Thread-Index: Acj5eOdUgdqYw3W1QqOmsc5MdWk4Jg==
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Subject: [Sip] WGLC comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is in good shape - just a bunch of minor comments.

1. "The Real-time Transport Protocol (RTP) [RFC3550] is used
   to transmit real time media on top of UDP and TCP [RFC4571].
   Datagram TLS [RFC4347] was introduced to allow TLS functionality to
   be applied to datagram transport protocols, such as UDP and DCCP.
   This draft provides guidelines on how to establish SRTP [RFC3711]
   security using an extension to DTLS (see [I-D.ietf-avt-dtls-srtp])."
This first says that RTP can be used on top of UDP and TCP, but then
says that this draft addresses the use of DTLS for establishing SRTP.
DTLS is applicable only when SRTP is carried over UDP, not TCP. This
should be made clear, e.g.,
"...guidelines on how to establish SRTP [RFC3711] security over UDP..."
                                                           ^^^^^^^^

2. "S/MIME
   signatures, as described in RFC 3261, or SIP Identity, as described
   in [RFC4474] provides the highest level of security because they are
   not susceptible to modification by malicious intermediaries."
Also there are other places in the draft that mention S/MIME, including
section 8.3. In the SIP session at IETF72 there was discussion about
deprecating S/MIME in SIP. If this is the intent of the WG, is it wise
to mention the technique in new RFCs?

3. "The SIP message
   containing the offer SHOULD be sent to the offerer's sip proxy over
   an integrity protected channel which SHOULD add an identity header
   according to the procedures outlined in [RFC4474]. "
It is the proxy, not the channel, that should add the Identity header
field. Also some other nits. Change to:
"The endpoint SHOULD send the SIP message
   containing the offer to the offerer's sip proxy over
   an integrity protected channel. The proxy SHOULD add an Identity
header field
   according to the procedures outlined in [RFC4474]."

4. "The far endpoint (answerer) may now establish a mutually
   authenticated DTLS association to the offerer."
This assumes that the far endpoint will play the active role. However,
that is not necessarily so, and will depend what is negotiated in SDP.

5. "DTLS-SRTP does not provide anonymous calling."
Should this say:
"DTLS-SRTP does not prevent anonymous calling."?
                    ^^^^^^^
6. "Additionally, it MUST be ensured that the Privacy header [RFC3325]
is
   used in conjunction with the SIP identity mechanism to ensure that
   the identity of the user is not asserted when enabling anonymous
   calls."
In fact 3325 does not define the Privacy header field - it only defines
the additional value 'id'. Suggest we say:
"Additionally, it MUST be ensured that the Privacy header field with
value 'id' [RFC3325]...."
I don't know whether we also need a reference to RFC 3323, in which case
it would become:
"Additionally, it MUST be ensured that the Privacy header field
[RFC3323] with value 'id' [RFC3325]....".

7. Should section 6.1 on anonymous calls have an informative reference
to the ua-privacy draft?

8. "Each answerer will create a DTLS association with
   the offerer."
It is not necessarily the case that the answerer will create the
association - it could also be the offerer.

9. "Once the answer is received, the active endpoint
   will either reuse the existing association or establish a new one,
   tearing down the existing association as soon as the offer/answer
   exchange is completed."
If the answerer is the active endpoint, how can it determine that the
offer/answer exchange is completed, i.e., how does it know the offerer
has received the answer?

10. "Note
   that this may mean adjusting the endpoint IP addresses if the
   selected candidate pair shifts, just as if the DTLS packets were an
   ordinary media stream."
What is the impact on the in-progress or completed DTLS handshake if
there is a shift of IP address?

11. "Implementations of this specification SHOULD support DTLS-SRTP
   [I-D.ietf-avt-dtls-srtp]."
I thought the whole draft was about DTLS-SRTP. Therefore why is this
only SHOULD strength? Under what circumstances are exceptions allowed?
What are the alternatives to be used in these exceptional circumstances?

12. "Also note
      that there is a fingerprint attribute on the 'c' line of the SDP."
An attribute is a separate line, not part of a c-line.

13. "This is computed from Bob's self-signed certificate."
That is true for the answer, but for the offer it is from Alice's
certificate.

14. "a=tcap:1 UDP/TLS/RTP/AVP RTP/AVP"
Shouldn't this be:
"a=tcap:1 UDP/TLS/RTP/SAVP RTP/AVP"
                      ^
15. "Message 3 shows Bob
      sending a DTLS ClientHello directly to Alice for each 'm' line in
      the SDP.  In this case two DTLS ClientHello messages are sent to
      Alice.  Bob sends a DTLS ClientHello to 192.168.1.103:6056 for RTP
      and another to port 6057 for RTCP."
The figure does not show two ClientHello messages, but it should do.
This would then make the first sentence above wrong - it would be two
per 'm'line, not one per 'm' line. It is only one per 'm' line if
RTP/RTCP mux is used.

16. "Note that in this case, Bob signals the actual transport protocol
      configuration of SRTP over DTLS in the acfg parameter."
This appears under message 9 (RTP/RTCP), but really it should occur
under message 8 (200 OK).

17. "When phone number URIs (e.g.,
      'sip:+17005551008@chicago.example.com') are used, there is no
      structural reason to trust that the domain name is authoritative
      for a given phone number, although individual proxies and UAs may
      have private arrangements that allow them to trust other domains."
This might suggest that the problem exists only when user=phone is
absent, whereas it exists also (more particularly so) when user=phone is
present. It might be better to say:
"When phone number URIs (e.g.,
      'sip:+17005551008@chicago.example.com' or
'sip:+17005551008@chicago.example.com;user=phone') are used...."

NITS:
- Change "media plan" to "media plane".
- "in Enhancements for Authenticated Identity
   Management in SIP [RFC4474] is used" - delete "in".
- "SIP proxies downstream of the identity service" change to "SIP
proxies downstream of the authentication service"
- "Since the identity header is a
   digital signature across several SIP headers, in addition to the
   bodies of the SIP message, "
This contains several instances of wrong terminology. "identity header"
should be "Identity header field. "SIP headers" should be "SIP header
fields", and "bodies" should be "body". A SIP message has a single
header (comprising header fields) and a single body (perhaps containing
multiple body parts). Similar corrections are needed throughout the
document.
- "upon receiving the other side's then"
I think this should say:
"upon receiving the other side's SDP then"
                                 ^^^
- "and key negotiation succeeds otherwise RTP is used"
Change to:
"and key negotiation succeeds, otherwise RTP is used"
                             ^
- "RTP is the
   default and will be understood by endpoints that do not understand
   SRTP or this key exchange mechanism but SRTP is preferred."
Change to:
"This allows an offerer to express a preference for SRTP, but RTP is the
   default and will be understood by endpoints that do not understand
   SRTP or this key exchange mechanism."
- "Answerers SHOULD use this UPDATE mechanisms."
Change "mechanisms" to "mechanism".
- "the assurances of DTLS-SRTP provides "
Change to:
"the assurances that DTLS-SRTP provides"
                ^^^^

John






_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug  8 19:20:17 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8BE5528C113;
	Fri,  8 Aug 2008 19:20:17 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A278B28C113
	for <sip@core3.amsl.com>; Fri,  8 Aug 2008 19:20:16 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6F2RfqpVIF2Y for <sip@core3.amsl.com>;
	Fri,  8 Aug 2008 19:20:15 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id 3CD1C28C108
	for <sip@ietf.org>; Fri,  8 Aug 2008 19:20:15 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,330,1215388800"; d="scan'208";a="137747401"
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-6.cisco.com with ESMTP; 09 Aug 2008 02:20:16 +0000
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-3.cisco.com (8.12.11/8.12.11) with ESMTP id m792KGXe030858; 
	Fri, 8 Aug 2008 19:20:16 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m792KEbn027985;
	Sat, 9 Aug 2008 02:20:14 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Eric Rescorla'" <ekr@networkresonance.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0F266CD@GBNTHT12009MSX.gb002.siemens.net><02829328-7B0E-41AB-B325-01246363D09C@cisco.com><4DAE5E60BA49D8419D7C8832503F5FFC072817AF26@EVS10.ams.gblxint.com><0D5F89FAC29E2C41B98A6A762007F5D0F26CCB@GBNTHT12009MSX.gb002.siemens.net><48919248.7060600@cisco.com><0ae201c8f310$d183a0f0$3675150a@cisco.com><E6C2E8958BA59A4FB960963D475F7AC30F04C561DB@mail.acmepacket.com><20080731205152.03E7E514892@kilo.rtfm.com><E6C2E8958BA59A4FB960963D475F7AC30F04C5632F@mail.acmepacket.com><20080801010212.654B5515743@kilo.rtfm.com><0a2101c8f3b1$b75dd500$6a94150a@cisco.com><20080801134611.1B8C9516C54@kilo.rtfm.com><0D5F89FAC29E2C41B98A6A762007F5D0F565E1@GBNTHT12009MSX.gb002.siemens.net><20080805145945.5B61650846@romeo.rtfm.com><02b801c8f70b$675fed60$c2f0200a@cisco.com><20080805151333.DDB5350846@romeo.rtfm.com><038e01c8f713$84e3cca0$c2f0200a@cisco.com><20080805161109.ABB8F50846@romeo.rtfm.com><053c01c8f720$647c21d0$c2f0200a@cisco.com><9E7CACAD-F4C8-4E59-8F77-C3
	C8EA741CA6@cisco.com ><02f301c8f7e1$91dd2270$c2f0200a@cisco.com>
	<20080807185257.59A2150846@romeo.rtfm.com>
Date: Fri, 8 Aug 2008 19:20:14 -0700
Message-ID: <016201c8f9c6$75e2fc70$361e6b80@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acj4vX416vtwhUC1ROuNF4AAQuyjawBCKjtQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-reply-to: <20080807185257.59A2150846@romeo.rtfm.com>
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=4631; t=1218248416;
	x=1219112416; c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Thoughts=20on=20SIP=20Identity=
	20issues |Sender:=20;
	bh=MhnRAv+WTx8GDIPcSBuWwa4NQ6xUZJY38WQw4cLjWzY=;
	b=Nqml4HC/sCBTt5d7POmMAaQDfUHydos4UR5z3cHwZV1fmWxbiZ0MDvdGqX
	/vJ5rdapHOXjEX9Z5IPJTrgdY8cradeSsPWXJhuM8i4PCw33fFVxa+jIG+de
	c/LhIsIg0M;
Authentication-Results: sj-dkim-3; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim3002 verified; ); 
Cc: 'Cullen Jennings' <fluffy@cisco.com>, "'Uzelac,
	Adam'" <Adam.Uzelac@globalcrossing.com>,
	'SIP IETF' <sip@ietf.org>, "'Elwell, John'" <john.elwell@siemens.com>
Subject: Re: [Sip] Thoughts on SIP Identity issues
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 

> -----Original Message-----
> From: Eric Rescorla [mailto:ekr@networkresonance.com] 
> Sent: Thursday, August 07, 2008 11:53 AM
> To: Dan Wing
> Cc: 'Cullen Jennings'; 'Eric Rescorla'; 'Elwell, John'; 
> 'Hadriel Kaplan'; 'Jonathan Rosenberg'; 'SIP IETF'; 'Uzelac, Adam'
> Subject: Re: [Sip] Thoughts on SIP Identity issues
> 
> At Wed, 6 Aug 2008 09:29:13 -0700,
> Dan Wing wrote:
> > 
> >  
> > 
> > > -----Original Message-----
> > > From: Cullen Jennings [mailto:fluffy@cisco.com] 
> > > Sent: Tuesday, August 05, 2008 7:54 PM
> > > To: Dan Wing
> > > Cc: 'Eric Rescorla'; 'Elwell, John'; 'Hadriel Kaplan'; 
> > > 'Jonathan Rosenberg'; 'SIP IETF'; 'Uzelac, Adam'
> > > Subject: Re: [Sip] Thoughts on SIP Identity issues
> > > 
> > > 
> > > On Aug 5, 2008, at 10:26 , Dan Wing wrote:
> > > 
> > > >>>>
> > > >>>> With that said, ISTM that this cuts against your argument
> > > >>>> that we should
> > > >>>> be signing less of the message, since the failure of RFC
> > > >> 4474 (to the
> > > >>>> extent there is one) in this case is that it doesn't protect
> > > >>>> *enough* information.
> > > >>>
> > > >>> Neither draft-fischer-sip-e2e-sec-media and
> > > >>> draft-wing-sip-identity-media
> > > >>> simply "sign less" -- please do not mis-characterize the
> > > >>> proposals.  Both
> > > >>> proposals require a public key exchange with the remote
> > > >>> party -- which
> > > >>> is far stronger than just using the IP address of the 
> remote party
> > > >>> as is done by RFC4474.
> > > >>
> > > >> I don't actually think this characterization of 4474 is that  
> > > >> accurate.
> > > >> RFC 4474 does not use the IP address for 
> authenticating the media.
> > > >> Rather, it authenticates the IP address as well as the 
> rest of the
> > > >> SDP
> > > >
> > > > Which draft-kaplan-sip-baiting shows is insufficient at 
> its intended
> > > > purpose.
> > > 
> > > I probably disagree but to sort that out ... What exactly 
> do you see  
> > > as the purpose of 4474 which the baiting draft shows it 
> does not meet?
> > 
> > The purpose of 4474 is to identity the calling party.
> 
> Well, I wasn't an author of 4474, but that's not what I take to be its
> purpose. Rather, I think the purpose is to provide cryptographic
> data origin authentication and message integrity, which it does.
> 
> Here's what the abstract says:
> 
>    The existing security mechanisms in the Session Initiation Protocol
>    (SIP) are inadequate for cryptographically assuring the identity of
>    the end users that originate SIP requests, especially in an
>    interdomain context.  This document defines a mechanism 
> for securely
>    identifying originators of SIP messages.  It does so by 
> defining two
>    new SIP header fields, Identity, for conveying a signature used for
>    validating the identity, and Identity-Info, for conveying 
> a reference
>    to the certificate of the signer.
> 
> The identity of the message originator is a critical part of
> identifying the calling party, but I think it's also equally clear
> that it's necessary but not sufficient, since in the absence of
> cryptographic authentication for the media (i.e., SRTP), a
> sufficiently powerful (i.e., onpath) attacker can still cause
> mismatches between the displayed identity and the actual source
> of the media.

Yes, of course.

> For instance, if the attacker can convince Alice
> to call Bob, he can then hijack the media, no matter what 
> cryptographic authentication is applied to the signalling.
> So, providing accurate caller identification can't be the purpose
> of RFC 4474 since it's trivially apparent it can't fulfill it.

Er, well, Alice *really*did* call Bob.  That an attacker is sending
media (spoofing Alice's IP address and UDP port, I would expect) 
is not RFC4474's fault -- I agree that to prevent such an attack
you would need SRTP.

> I would observe that this is also true about the non-SRTP
> proof of identity mechanisms described in 
> draft-wing-sip-identity-media.

Yes, absolutely agreed.

> For instance, if you use the ICE exchange described in S 4.3,
> the attacker can simply allow the ICE exchange to complete but
> then hijack the media afterwards. What ICE is providing is
> a liveness test for the signalling but that serves to make this
> an on-path attack, not to block it entirely.

Yes, agreed.

But there is resistance to requiring SRTP in order to establish
identity -- which is why draft-wing-sip-identity-media includes
a non-SRTP identity mechanism.

-d

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 10 10:50:57 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2CF413A6902;
	Sun, 10 Aug 2008 10:50:57 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 883603A6902
	for <sip@core3.amsl.com>; Sun, 10 Aug 2008 10:50:56 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.301
X-Spam-Level: 
X-Spam-Status: No, score=0.301 tagged_above=-999 required=5
	tests=[BAYES_50=0.001, MIME_8BIT_HEADER=0.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Mtznxn0Rcm86 for <sip@core3.amsl.com>;
	Sun, 10 Aug 2008 10:50:55 -0700 (PDT)
Received: from ik-out-1112.google.com (ik-out-1112.google.com [66.249.90.179])
	by core3.amsl.com (Postfix) with ESMTP id 8BAB43A68F0
	for <sip@ietf.org>; Sun, 10 Aug 2008 10:50:54 -0700 (PDT)
Received: by ik-out-1112.google.com with SMTP id c28so2010129ika.5
	for <sip@ietf.org>; Sun, 10 Aug 2008 10:50:53 -0700 (PDT)
Received: by 10.210.39.2 with SMTP id m2mr8329847ebm.97.1218390651576;
	Sun, 10 Aug 2008 10:50:51 -0700 (PDT)
Received: from portatil.lan ( [85.58.7.186])
	by mx.google.com with ESMTPS id q9sm456734gve.5.2008.08.10.10.50.46
	(version=TLSv1/SSLv3 cipher=RC4-MD5);
	Sun, 10 Aug 2008 10:50:50 -0700 (PDT)
From: =?utf-8?q?I=C3=B1aki_Baz_Castillo?= <ibc@aliax.net>
To: sip@ietf.org
Date: Sun, 10 Aug 2008 19:50:45 +0200
User-Agent: KMail/1.9.9
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200808101950.45736.ibc@aliax.net>
Subject: [Sip] Avoid so many case insensitive in a future SIP?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

SGkuCgo5OSUgaW4gU0lQIEJORiBpcyBjYXNlIGluc2Vuc2l0aXZlIChleGNlcHQgcXVvdHRlZCBz
dHJpbmdzIGFuZCBtZXRob2QgbmFtZXMpLiAKSSBrbm93IHRoYXQgY29tbW9uIFNJUCBkZXZpY2Vz
IGFuZCBzdGFja3MgZG9uJ3QgZG8gY2FzZSBpbnNlbnNpdGl2ZSBtYXRjaGluZywgCmZvciBleGFt
cGxlLCB0aGV5IHdvdWxkIHNlYXJjaCBmb3IgYSAiQ29udGFjdCIgaGVhZGVyIGZpZWxkIG5hbWUg
KG9yICJtIikgYnV0IApub3QgZm9yICJDT05UQUNUIiwgImNvbnRhY3QiIG9yICJNIikuCgpJJ20g
c3VyZSB0aGF0IHRoZSBzYW1lIG9jY3VycyB3aXRoIHR5cGljYWxsIFVSSSBhbmQgaGVhZGVyIHBh
cmFtZXRlcnMgKGRvZXMgCnNvbWUgU0lQIHN0YWNrIGV4cGVjdCB0byByZWNlaXZlIGEgdmFsaWQg
InBob05FPVVTZXIiIHBhcmFtZXRlcj8KCkFsc28gbm90ZSB0aGF0IGluIGFueSBsYW5ndWFnZSwg
bWF0Y2hpbmcgYSBsb3djYXNlIHN0cmluZyBpcyBlYXNpZXIgYW5kIGZhc3RlciAKdGhhbiBtYXRj
aGluZyBhIGNhc2UgaW5zZW5zaXRpdmUgc3RyaW5nICh0aGF0IGludm9sdmVzIGEgcmVndWxhciBl
eHByZXNzaW9uKS4KCk9mIGNvdXJzZSBJIGtub3cgdGhhdCBTSVAgaGFzIG1hbnkgaW5oZXJpdGFu
Y2UgZnJvbSBIVFRQIGFuZCBTTVRQIHByb3RvY29scyAKYnV0IEkgaG9wZSB0aGlzIGlzIG5vdCBh
biBldGVybmFsIGJ1cmRlbiBhbmQgdGhpbmdzIE1BWSBoYXBwZW4gaW4gb3JkZXIgdG8gCmltcHJv
dmUgaW50ZXJvcGVyYWJpbGl0eSBhbmQgZmFjaWxpdGF0ZSB0aGUgZXhpc3RlbmNlIG9mIFJGQyBj
b21wbGlhbnQgc3RhY2tzIAooaW5zdGVhZCBvZiB3aGF0IHdlIGhhdmUgbm93YWRheXMpLgoKSXMg
aXQgYSBkcmVhbT8gd2lsbCB3ZSBhbHdheXMgaGF2ZSB0byBkZWFsIHdpdGggY2FzZSBpbnNlbnNp
dGl2ZT8KClRoYW5rcy4KCi0tIApJw7Fha2kgQmF6IENhc3RpbGxvCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNpcCBtYWlsaW5nIGxpc3QgIGh0dHBzOi8v
d3d3LmlldGYub3JnL21haWxtYW4vbGlzdGluZm8vc2lwClRoaXMgbGlzdCBpcyBmb3IgTkVXIGRl
dmVsb3BtZW50IG9mIHRoZSBjb3JlIFNJUCBQcm90b2NvbApVc2Ugc2lwLWltcGxlbWVudG9yc0Bj
cy5jb2x1bWJpYS5lZHUgZm9yIHF1ZXN0aW9ucyBvbiBjdXJyZW50IHNpcApVc2Ugc2lwcGluZ0Bp
ZXRmLm9yZyBmb3IgbmV3IGRldmVsb3BtZW50cyBvbiB0aGUgYXBwbGljYXRpb24gb2Ygc2lw


From sip-bounces@ietf.org  Sun Aug 10 12:34:34 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 859AC3A6C32;
	Sun, 10 Aug 2008 12:34:34 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F23FE28C1B5
	for <sip@core3.amsl.com>; Sun, 10 Aug 2008 12:34:33 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.81
X-Spam-Level: 
X-Spam-Status: No, score=-4.81 tagged_above=-999 required=5
	tests=[BAYES_05=-1.11, MIME_8BIT_HEADER=0.3, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id PVWNt0LNnZOU for <sip@core3.amsl.com>;
	Sun, 10 Aug 2008 12:34:32 -0700 (PDT)
Received: from rtp-iport-1.cisco.com (rtp-iport-1.cisco.com [64.102.122.148])
	by core3.amsl.com (Postfix) with ESMTP id B72423A6B16
	for <sip@ietf.org>; Sun, 10 Aug 2008 12:34:32 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.31,339,1215388800"; d="scan'208";a="17064888"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 10 Aug 2008 19:34:33 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7AJYXxI019854; 
	Sun, 10 Aug 2008 15:34:33 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m7AJYXKY021464;
	Sun, 10 Aug 2008 19:34:33 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 10 Aug 2008 15:34:33 -0400
Received: from [10.86.240.175] ([10.86.240.175]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 10 Aug 2008 15:34:33 -0400
Message-ID: <489F42FF.8040905@cisco.com>
Date: Sun, 10 Aug 2008 15:35:27 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: =?UTF-8?B?ScOxYWtpIEJheiBDYXN0aWxsbw==?= <ibc@aliax.net>
References: <200808101950.45736.ibc@aliax.net>
In-Reply-To: <200808101950.45736.ibc@aliax.net>
X-OriginalArrivalTime: 10 Aug 2008 19:34:33.0262 (UTC)
	FILETIME=[1D81A4E0:01C8FB20]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=3026; t=1218396873;
	x=1219260873; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Avoid=20so=20many=20case=20inse
	nsitive=20in=20a=20future=20SIP? |Sender:=20
	|To:=20=3D?UTF-8?B?ScOxYWtpIEJheiBDYXN0aWxsbw=3D=3D?=3D=20<
	ibc@aliax.net>;
	bh=T1H3SN6Vcu09uHhGkbrRCg68oRNWpsI1f1h/UZDVByQ=;
	b=l/yLq41/2t9LuO0Qo4MSwOqHX17NVHLeGHxpZ9Hp+mxBEdA+2eh1UMTXHb
	uV0lng0BzFd7fxXt6a0wXHcSHWEgRKmpjWGo2nBtIsoroPLqH6p4WEdG84Ck
	QlSsG/uMjT;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: sip@ietf.org
Subject: Re: [Sip] Avoid so many case insensitive in a future SIP?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

CgpJw7Fha2kgQmF6IENhc3RpbGxvIHdyb3RlOgo+IEhpLgo+IAo+IDk5JSBpbiBTSVAgQk5GIGlz
IGNhc2UgaW5zZW5zaXRpdmUgKGV4Y2VwdCBxdW90dGVkIHN0cmluZ3MgYW5kIG1ldGhvZCBuYW1l
cykuIAo+IEkga25vdyB0aGF0IGNvbW1vbiBTSVAgZGV2aWNlcyBhbmQgc3RhY2tzIGRvbid0IGRv
IGNhc2UgaW5zZW5zaXRpdmUgbWF0Y2hpbmcsIAo+IGZvciBleGFtcGxlLCB0aGV5IHdvdWxkIHNl
YXJjaCBmb3IgYSAiQ29udGFjdCIgaGVhZGVyIGZpZWxkIG5hbWUgKG9yICJtIikgYnV0IAo+IG5v
dCBmb3IgIkNPTlRBQ1QiLCAiY29udGFjdCIgb3IgIk0iKS4KCkNhbiB5b3UgbmFtZSB0aGUgc3Rh
Y2tzIHRoYXQgaGF2ZSB0aGlzIHByb2JsZW0/IEl0IGlzIGFuIGVncmVnaW91cyBlcnJvci4KCj4g
SSdtIHN1cmUgdGhhdCB0aGUgc2FtZSBvY2N1cnMgd2l0aCB0eXBpY2FsbCBVUkkgYW5kIGhlYWRl
ciBwYXJhbWV0ZXJzIChkb2VzIAo+IHNvbWUgU0lQIHN0YWNrIGV4cGVjdCB0byByZWNlaXZlIGEg
dmFsaWQgInBob05FPVVTZXIiIHBhcmFtZXRlcj8KCkkgZG9uJ3QgZXhwZWN0IHlvdSB0byBnZW5l
cmF0ZSBzdWNoIGEgdGhpbmcsIGJ1dCBJIGV4cGVjdCB5b3UgdG8gcGFyc2UgCml0IGNvcnJlY3Rs
eSBpZiB5b3UgaGFwcGVuIHRvIHJlY2VpdmUgb25lLiBUaGUgQUJORiBpcyB0aGUgQUJORiwgd2hl
dGhlciAKeW91IGxpa2UgaXQgb3Igbm90LiBJZiB5b3Ugc3RhcnQgbWFraW5nIHlvdXIgb3duIHZh
bHVlIGp1ZGdtZW50cyBhYm91dCAKd2hpY2ggcGFydHMgeW91IGRvL2Rvbid0IGxpa2UsIHRoZW4g
ZXZlbnR1YWxseSB5b3Ugd2lsbCBydW4gYWNyb3NzIGEgCmNhc2Ugd2hlcmUgeW91IGhhdmUgbWFk
ZSBkaWZmZXJlbnQgYXNzdW1wdGlvbnMgdGhhbiBzb21lb25lIGVsc2UuCgpJZiBub3RoaW5nIGVs
c2UsIHRoZXJlIGlzIGEgd2hvbGUgc2V0IG9mIHRvcnR1cmUgdGVzdHMgdGhhdCB3aWxsIHRyeSAK
c3VjaCB0aGluZ3Mgb24geW91LiBMaWtlIGl0IG9yIG5vdCwgaWYgeW91IGZhaWwgdG8gcHJvY2Vz
cyBhIHZhbGlkIAptZXNzYWdlIGJlY2F1c2UgaXQgZG9lc24ndCBhZGhlcmUgdG8geW91ciBzZW5z
aWJpbGl0aWVzLCB0aGVuIGl0IGlzIAoqeW91ciogaW1wbGVtZW50YXRpb24gdGhhdCB0aGF0IHdp
bGwgYmUgZGVjbGFyZWQgaW5jb3JyZWN0LgoKPiBBbHNvIG5vdGUgdGhhdCBpbiBhbnkgbGFuZ3Vh
Z2UsIG1hdGNoaW5nIGEgbG93Y2FzZSBzdHJpbmcgaXMgZWFzaWVyIGFuZCBmYXN0ZXIgCj4gdGhh
biBtYXRjaGluZyBhIGNhc2UgaW5zZW5zaXRpdmUgc3RyaW5nICh0aGF0IGludm9sdmVzIGEgcmVn
dWxhciBleHByZXNzaW9uKS4KCkZhc3RlciwgYnV0IG5vdCBuZWNlc3NhcmlseSBhbnkgZWFzaWVy
LiBJIGd1ZXNzIHRoYXQgZGVwZW5kcyBvbiB3aGF0IHlvdSAKbWVhbiBieSAiZWFzaWVyIi4gIElm
IHlvdSBoYXZlIGEgdG9vbCB0aGF0IGlzIGdlbmVyYXRpbmcgdGhlIHBhcnNlciBmcm9tIAp0aGUg
QUJORiB0aGVuIGl0cyBub3QgYW55IGhhcmRlciBmb3IgdGhlIGltcGxlbWVudG9yLgoKSW4gY2Fz
ZSBvZiBSRXMsIHRoZXJlIGFyZSBzdHJhaWdodGZvcndhcmQgdHJhbnNsYXRpb25zIG9mIHRoZSBB
Qk5GLiBFLmcgCi9bQ2NdW09vXVtObl1bVHRdW0FhXVtDY11bVHRdLwoKSWYgeW91IHRoaW5rIGl0
IHdpbGwgbWFrZSBhIGJpZyBkaWZmZXJlbmNlIGluIHlvdXIgcGVyZm9ybWFuY2UsIEkgZ3Vlc3Mg
CnlvdSBjb3VsZCBpbXBsZW1lbnQgYSBmYXN0LXBhdGggcGFyc2VyIHRoYXQgd29ya3MgZm9yIG1l
c3NhZ2VzIHRoYXQgCmFkaGVyZSB0byB0aGUgc3ludGF4IHN1YnNldCB0aGF0IHlvdSBsaWtlLCBh
bmQgYSBmYWxsYmFjayBwYXJzZXIgaXMgb25seSAKaW52b2tlZCBpZiBhIG1lc3NhZ2UgZmFpbHMg
dG8gcGFyc2UgYmFzZWQgb24gdGhlIGZhc3QgcGF0aCBwYXJzZXIuIEJ1dCBJIApleHBlY3QgeW91
IGNhbiBhY2hpZXZlIH45MCUgb2YgdGhlIHBlcmZvcm1hbmNlIHVzaW5nIGEgcGFyc2VyIHRoYXQg
CmhhbmRsZXMgdGhlIGZ1bGwgc3ludGF4IGlmIHlvdSBqdXN0IGNvbmNlbnRyYXRlIG9uIGl0LgoK
PiBPZiBjb3Vyc2UgSSBrbm93IHRoYXQgU0lQIGhhcyBtYW55IGluaGVyaXRhbmNlIGZyb20gSFRU
UCBhbmQgU01UUCBwcm90b2NvbHMgCj4gYnV0IEkgaG9wZSB0aGlzIGlzIG5vdCBhbiBldGVybmFs
IGJ1cmRlbiBhbmQgdGhpbmdzIE1BWSBoYXBwZW4gaW4gb3JkZXIgdG8gCj4gaW1wcm92ZSBpbnRl
cm9wZXJhYmlsaXR5IGFuZCBmYWNpbGl0YXRlIHRoZSBleGlzdGVuY2Ugb2YgUkZDIGNvbXBsaWFu
dCBzdGFja3MgCj4gKGluc3RlYWQgb2Ygd2hhdCB3ZSBoYXZlIG5vd2FkYXlzKS4KPiAKPiBJcyBp
dCBhIGRyZWFtPyB3aWxsIHdlIGFsd2F5cyBoYXZlIHRvIGRlYWwgd2l0aCBjYXNlIGluc2Vuc2l0
aXZlPwoKQXQgbGVhc3QgdW50aWwgc2lwLzMuMC4gQW5kIEFGQUlLIG5vYm9keSBpcyBwbGFubmlu
ZyBvbiBzdGFydGluZyB3b3JrIG9uIAp0aGF0LiBUaGVyZSBqdXN0IGlzbid0IGFueSBnb29kIHdh
eSB0byBzdGFydCBvdmVyIHdpdGggc29tZXRoaW5nIHRoYXQgCmlzbid0IGJhY2t3YXJkIGNvbXBh
dGlibGUuCgpOb3RlLCBJIGFncmVlIHdpdGggeW91IHRoYXQgYSBzeW50YXggaW50ZW5kZWQgcHJp
bWFyaWx5IGZvciBtYWNoaW5lcyAKcmF0aGVyIHRoYW4gaHVtYW5zIHdvdWxkIGJlIGltcHJvdmVk
IGJ5IGxlYXZpbmcgb3V0IGEgbG90IG9mIHRoZXNlIApvcHRpb25zLiBCdXQgZm9yIHNpcCB0aGF0
IGlzIHdhdGVyIG92ZXIgdGhlIGRhbSwgYW5kIGlzbid0IGEgYmF0dGxlIAp3b3J0aCBmaWdodGlu
Zy4KCkluc3RlYWQsIG1heWJlIHlvdSBjb3VsZCBjb25jZW50cmF0ZSBvbiBzb21lIG9mIHRoZSBt
YW55IG5ldyB0aGluZ3MgdGhhdCAKYXJlIGJlaW5nIGRlZmluZWQgdXNpbmcgWE1MIHRoYXQgd291
bGQgYmUgbXVjaCBiZXR0ZXIgZG9uZSBzb21lIG90aGVyIHdheS4KCglUaGFua3MsCglQYXVsCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNpcCBtYWlsaW5n
IGxpc3QgIGh0dHBzOi8vd3d3LmlldGYub3JnL21haWxtYW4vbGlzdGluZm8vc2lwClRoaXMgbGlz
dCBpcyBmb3IgTkVXIGRldmVsb3BtZW50IG9mIHRoZSBjb3JlIFNJUCBQcm90b2NvbApVc2Ugc2lw
LWltcGxlbWVudG9yc0Bjcy5jb2x1bWJpYS5lZHUgZm9yIHF1ZXN0aW9ucyBvbiBjdXJyZW50IHNp
cApVc2Ugc2lwcGluZ0BpZXRmLm9yZyBmb3IgbmV3IGRldmVsb3BtZW50cyBvbiB0aGUgYXBwbGlj
YXRpb24gb2Ygc2lw


From sip-bounces@ietf.org  Sun Aug 10 14:30:14 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3FED228C1CD;
	Sun, 10 Aug 2008 14:30:14 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2E14F28C1CD
	for <sip@core3.amsl.com>; Sun, 10 Aug 2008 14:30:13 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.07
X-Spam-Level: 
X-Spam-Status: No, score=-0.07 tagged_above=-999 required=5 tests=[AWL=0.370, 
	BAYES_20=-0.74, MIME_8BIT_HEADER=0.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YsloRWxVxt1q for <sip@core3.amsl.com>;
	Sun, 10 Aug 2008 14:30:12 -0700 (PDT)
Received: from nf-out-0910.google.com (nf-out-0910.google.com [64.233.182.184])
	by core3.amsl.com (Postfix) with ESMTP id E145028C1CA
	for <sip@ietf.org>; Sun, 10 Aug 2008 14:30:11 -0700 (PDT)
Received: by nf-out-0910.google.com with SMTP id b11so545568nfh.39
	for <sip@ietf.org>; Sun, 10 Aug 2008 14:30:11 -0700 (PDT)
Received: by 10.210.133.2 with SMTP id g2mr8499199ebd.157.1218403811154;
	Sun, 10 Aug 2008 14:30:11 -0700 (PDT)
Received: from portatil.lan ( [85.58.7.186])
	by mx.google.com with ESMTPS id j8sm169843gvb.1.2008.08.10.14.30.08
	(version=TLSv1/SSLv3 cipher=RC4-MD5);
	Sun, 10 Aug 2008 14:30:09 -0700 (PDT)
From: =?utf-8?q?I=C3=B1aki_Baz_Castillo?= <ibc@aliax.net>
To: sip@ietf.org
Date: Sun, 10 Aug 2008 23:30:08 +0200
User-Agent: KMail/1.9.9
References: <200808101950.45736.ibc@aliax.net> <489F42FF.8040905@cisco.com>
In-Reply-To: <489F42FF.8040905@cisco.com>
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200808102330.08570.ibc@aliax.net>
Subject: Re: [Sip] Avoid so many case insensitive in a future SIP?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

RWwgRG9taW5nbywgMTAgZGUgQWdvc3RvIGRlIDIwMDgsIFBhdWwgS3l6aXZhdCBlc2NyaWJpw7M6
Cj4gScOxYWtpIEJheiBDYXN0aWxsbyB3cm90ZToKPiA+IEhpLgo+ID4KPiA+IDk5JSBpbiBTSVAg
Qk5GIGlzIGNhc2UgaW5zZW5zaXRpdmUgKGV4Y2VwdCBxdW90dGVkIHN0cmluZ3MgYW5kIG1ldGhv
ZAo+ID4gbmFtZXMpLiBJIGtub3cgdGhhdCBjb21tb24gU0lQIGRldmljZXMgYW5kIHN0YWNrcyBk
b24ndCBkbyBjYXNlCj4gPiBpbnNlbnNpdGl2ZSBtYXRjaGluZywgZm9yIGV4YW1wbGUsIHRoZXkg
d291bGQgc2VhcmNoIGZvciBhICJDb250YWN0Igo+ID4gaGVhZGVyIGZpZWxkIG5hbWUgKG9yICJt
IikgYnV0IG5vdCBmb3IgIkNPTlRBQ1QiLCAiY29udGFjdCIgb3IgIk0iKS4KPgo+IENhbiB5b3Ug
bmFtZSB0aGUgc3RhY2tzIHRoYXQgaGF2ZSB0aGlzIHByb2JsZW0/IEl0IGlzIGFuIGVncmVnaW91
cyBlcnJvci4KCldlbGwsIEkndmUgZGV0ZWN0ZWQgdGhpcyBwcm9ibGVtIGlzIHNvbWUgU0lQIHBo
b25lcywgc29mdHBob25lcyAoSSd2ZSBhbHJlYWR5IApyZXBvcnRlZCBidWdzIHRvIHRoZWlyIGF1
dGhvcnMpLiBCdXQgdGhpcyBhbHNvIG9jY3VycyBpbiBwcm9ncmFtbWFibGUgU0lQIApzdGFja3Mg
KGxpa2UgYSB2ZXJ5IGZhbW91cyBvcGVuIHNvdXJzZSBTSVAgcHJveHkpIGluIHdoaWNoIHRoZSBo
dW1hbiAKaW1wbGVtZW50cyB0aGUgbG9naWMgd2l0aCBhIHNjcmlwdCBhbmQgYSBjdXN0b20gbGFu
Z3VhZ2UuIFRoaXMgbGFuZ3VhZ2UgaXMgCnBvd2VyZnVsLCBidXQgaG93ZXZlciBpdCBkb2Vzbid0
IGludml0ZSB0byB0YWtlIGluIGNvdW50IHRoaW5ncyBsaWtlIGNhc2UgCmluc2Vuc2l0aXZlIGlu
IGhlYWRlcnMgYW5kIHBhcmFtZXRlcnMgKG1vc3Qgb2YgYWRtaW5zIHdpbGwgY2hlY2ssIGZvciAK
ZXhhbXBsZSwgaWYgdGhlIGhlYWRlciBpcyAiRnJvbSIgb3IgImYiLCBidXQgbmV2ZXIgIkZST00i
KS4KCgoKPiA+IEknbSBzdXJlIHRoYXQgdGhlIHNhbWUgb2NjdXJzIHdpdGggdHlwaWNhbGwgVVJJ
IGFuZCBoZWFkZXIgcGFyYW1ldGVycwo+ID4gKGRvZXMgc29tZSBTSVAgc3RhY2sgZXhwZWN0IHRv
IHJlY2VpdmUgYSB2YWxpZCAicGhvTkU9VVNlciIgcGFyYW1ldGVyPwo+Cj4gSSBkb24ndCBleHBl
Y3QgeW91IHRvIGdlbmVyYXRlIHN1Y2ggYSB0aGluZywKCk9mIGNvdXJzZSBJIHdvdWxkbid0IGRv
IGl0LCBidXQgYW55b25lIGNhbiBkbyBpdCBpZiBoZSB3YW50cyAoYW5kIGlzIHZhbGlkLCAKdGhh
dCBpcyB0aGUgcHJvYmxlbSkuCgoKCgo+IFRoZSBBQk5GIGlzIHRoZSBBQk5GLCB3aGV0aGVyIAo+
IHlvdSBsaWtlIGl0IG9yIG5vdC4KCldlbGwsIEFCTkYgaXMgZG9uZSBieSBodW1hbnMsIG5vdGhp
bmcgZm9yY2VzIEFCTkYgdG8gYmUgY2FzZSBpbnNlbnNpdGl2ZSAoZm9yIApleGFtcGxlIG1ldGhv
ZHMgYXJlIG5vdCBjYXNlIGluc2Vuc2l0aXZlOiAiSW52aXRlIiAhPSAiSU5WSVRFIikuIEkgc2Vl
IG5vIApiZW5lZml0IGluIGFsbG93aW5nICJMUiIgaW5zdGVhZCBvZiAibHIiIGFzIFJvdXRlIGhl
YWRlciBwYXJhbWV0ZXIsIGRvIHlvdT8KCgoKPiBJZiB5b3Ugc3RhcnQgbWFraW5nIHlvdXIgb3du
IHZhbHVlIGp1ZGdtZW50cyBhYm91dCAKPiB3aGljaCBwYXJ0cyB5b3UgZG8vZG9uJ3QgbGlrZSwg
dGhlbiBldmVudHVhbGx5IHlvdSB3aWxsIHJ1biBhY3Jvc3MgYQo+IGNhc2Ugd2hlcmUgeW91IGhh
dmUgbWFkZSBkaWZmZXJlbnQgYXNzdW1wdGlvbnMgdGhhbiBzb21lb25lIGVsc2UuCgpUaGUgZmFj
dCBpcyB0aGF0IEkndmUgZG9uZSBhIHBhcnNlciAob3IgSSdtIGZpbmlzaGluZyBpdCkgdGhhdCBp
cyAxMDAlIFNJUCAKQUJORiBjb21wbGlhbnQgc28gZG9uJ3Qgd29ycnkgYWJvdXQgaXQuIDopCkJ1
dCBpdCdzIG5vdCBqdXN0IHRoZSBwYXJzZXI6IG5vdGUgdGhhdCB3aGVuIGNvbXBhcmluZyBVUkkn
cyBhZ2FpbiB3ZSBtdXN0IAptYXRjaCBpbiBjYXNlIGluc2Vuc2l0aXZlLCB3aXRoIGEgdmVyeSBw
YWluZnVsIHNldCBvZiBydWxlcyBmb3IgY29tcGFyaW5nIApVUkkncyBwYXJhbWV0ZXJzLCBldGMg
ZXRjLi4uCldoYXQgSSBtZWFuIGlzIHRoYXQgYSBTSVAgc3RhY2sgZGV2ZWxvcGVyIG11c3QgaW52
ZXJ0IHRvbyBtdWNoIHRpbWUgaW4gb3JkZXIgCnRvIGhhbmRsZSBhbnkgdmFsaWQsIGV2ZW4gaWYg
aXQncyB0b28gbXVjaCBzdHJhbmdlLCBtZXNzYWdlIGl0IHJlY2VpdmVzLiBBdCAKbGVhc3QgdGhp
cyBpcyBteSBleHBlcmllbmNlIHdoZW4gZG9pbmcgaXQuCgoKPiBJZiB5b3UgdGhpbmsgaXQgd2ls
bCBtYWtlIGEgYmlnIGRpZmZlcmVuY2UgaW4geW91ciBwZXJmb3JtYW5jZSwgSSBndWVzcwo+IHlv
dSBjb3VsZCBpbXBsZW1lbnQgYSBmYXN0LXBhdGggcGFyc2VyIHRoYXQgd29ya3MgZm9yIG1lc3Nh
Z2VzIHRoYXQKPiBhZGhlcmUgdG8gdGhlIHN5bnRheCBzdWJzZXQgdGhhdCB5b3UgbGlrZSwgYW5k
IGEgZmFsbGJhY2sgcGFyc2VyIGlzIG9ubHkKPiBpbnZva2VkIGlmIGEgbWVzc2FnZSBmYWlscyB0
byBwYXJzZSBiYXNlZCBvbiB0aGUgZmFzdCBwYXRoIHBhcnNlci4KCkkgdGhpbmsgdGhpbmdzIGxp
a2UgdGhpcyBzaG91bCBuZXZlciBiZSBuZWNlc3NhcnkuIDooCgoKCj4gSW5zdGVhZCwgbWF5YmUg
eW91IGNvdWxkIGNvbmNlbnRyYXRlIG9uIHNvbWUgb2YgdGhlIG1hbnkgbmV3IHRoaW5ncyB0aGF0
Cj4gYXJlIGJlaW5nIGRlZmluZWQgdXNpbmcgWE1MIHRoYXQgd291bGQgYmUgbXVjaCBiZXR0ZXIg
ZG9uZSBzb21lIG90aGVyIHdheS4KCkdvb2QgcG9pbnQuIENvdWxkIHlvdSBwbGVhc2UgdGVsbCBt
ZSBzb21lIG9mIHRoZXNlIG5ldyB0aGluZ3MgZGVmaW5pZCB3aXRoIApYTUw/IE1heWJlIHlvdSBt
ZWFuIGFsbCB0aGUgcmVsYXRlZCB0byBwcmVzZW5jZSAoWENBUCBhbmQgc28uLi4pPwoKClRoYW5r
cyBmb3IgeW91ciBjb21tZW50LgoKCi0tIApJw7Fha2kgQmF6IENhc3RpbGxvCl9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNpcCBtYWlsaW5nIGxpc3QgIGh0
dHBzOi8vd3d3LmlldGYub3JnL21haWxtYW4vbGlzdGluZm8vc2lwClRoaXMgbGlzdCBpcyBmb3Ig
TkVXIGRldmVsb3BtZW50IG9mIHRoZSBjb3JlIFNJUCBQcm90b2NvbApVc2Ugc2lwLWltcGxlbWVu
dG9yc0Bjcy5jb2x1bWJpYS5lZHUgZm9yIHF1ZXN0aW9ucyBvbiBjdXJyZW50IHNpcApVc2Ugc2lw
cGluZ0BpZXRmLm9yZyBmb3IgbmV3IGRldmVsb3BtZW50cyBvbiB0aGUgYXBwbGljYXRpb24gb2Yg
c2lw


From sip-bounces@ietf.org  Mon Aug 11 09:13:23 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A120F3A6C7F;
	Mon, 11 Aug 2008 09:13:23 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 657753A6C7F
	for <sip@core3.amsl.com>; Mon, 11 Aug 2008 09:13:22 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.554
X-Spam-Level: 
X-Spam-Status: No, score=-0.554 tagged_above=-999 required=5
	tests=[AWL=-0.555, BAYES_50=0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id y9dxBiLoIBID for <sip@core3.amsl.com>;
	Mon, 11 Aug 2008 09:13:20 -0700 (PDT)
Received: from demumfd002.nsn-inter.net (demumfd002.nsn-inter.net
	[217.115.75.234])
	by core3.amsl.com (Postfix) with ESMTP id 0C3363A6AF0
	for <SIP@ietf.org>; Mon, 11 Aug 2008 09:13:19 -0700 (PDT)
Received: from demuprx016.emea.nsn-intra.net ([10.150.129.55])
	by demumfd002.nsn-inter.net (8.12.11.20060308/8.12.11) with ESMTP id
	m7BGDKsE027030
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <SIP@ietf.org>; Mon, 11 Aug 2008 18:13:20 +0200
Received: from demuexc023.nsn-intra.net (webmail.nsn-intra.net [10.150.128.36])
	by demuprx016.emea.nsn-intra.net (8.12.11.20060308/8.12.11) with ESMTP
	id m7BGDKmV028938 for <SIP@ietf.org>; Mon, 11 Aug 2008 18:13:20 +0200
Received: from demuexc025.nsn-intra.net ([10.159.32.12]) by
	demuexc023.nsn-intra.net with Microsoft SMTPSVC(6.0.3790.3959); 
	Mon, 11 Aug 2008 18:13:20 +0200
Received: from FIESEXC007.nsn-intra.net ([10.159.0.15]) by
	demuexc025.nsn-intra.net with Microsoft SMTPSVC(6.0.3790.3959); 
	Mon, 11 Aug 2008 18:13:19 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 11 Aug 2008 19:12:03 +0300
Message-ID: <C41BFCED3C088E40A8510B57B165C1624B03C9@FIESEXC007.nsn-intra.net>
In-Reply-To: <0D5F89FAC29E2C41B98A6A762007F5D0F8D412@GBNTHT12009MSX.gb002.siemens.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WGLC comments on draft-ietf-sip-dtls-srtp-framework-02
Thread-Index: Acj5eOdUgdqYw3W1QqOmsc5MdWk4JgCU7TYg
References: <0D5F89FAC29E2C41B98A6A762007F5D0F8D412@GBNTHT12009MSX.gb002.siemens.net>
From: "Tschofenig, Hannes (NSN - FI/Espoo)" <hannes.tschofenig@nsn.com>
To: "SIP IETF" <SIP@ietf.org>
X-OriginalArrivalTime: 11 Aug 2008 16:13:19.0140 (UTC)
	FILETIME=[2B2E9640:01C8FBCD]
Subject: [Sip] WGLC comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

A few random comments:


   The fingerprint alone protects against active attacks on the media
   but not active attacks on the signalling.  In order to prevent active
   attacks on the signalling, in Enhancements for Authenticated Identity
   Management in SIP [RFC4474] is used.

I believe we should indicate that SIP Identity >>may<< be used.

  When Bob receives the offer,
   Bob establishes a mutually authenticated DTLS connection with Alice.

It is not really mutually authenticated at this point in time. 
Something like
"
  When Bob receives the offer,
   Bob initiates a DTLS exchange with Alice.
"

   At this point Bob can begin sending media to Alice.  Once Bob accepts
   Alice's offer and sends an SDP answer to Alice, Alice can begin
   sending confidential media to Bob.


We would have to assume symmetric RTP (which is only recommended by
draft-ietf-avt-dtls-srtp) here to allow Alice to send media immediately
after the DTLS handshake. Otherwise we may need another DTLS handshake
before Alice can send media to Bob. 

I was actually wondering why not to mandate symmetric RTP given that the
number of exchanges are much lower. 


 Alice and Bob will verify the
   fingerprints from the certificates received over the DTLS handshakes
   match with the fingerprints received in the SDP of the SIP signaling.
   This provides the security property that Alice knows that the media
   traffic is going to Bob and vice-versa without necessarily requiring
   global PKI certificates for Alice and Bob.


   o  When RFC 4474 Identity is used, this solution works even when the
      SIP proxies downstream of the identity service are not trusted.

We could provide a pointer to the security considerations section,
namely Section 8.6. 
A pointer to RFC 4916 ("Connected Identity"), even though I do not
consider it as too important based on the scenarios it addresses, would
not hurt here. 
Maybe something like would help:
"Retargeting of a dialog-forming request (changing the value of the
Request-URI), the UA that receives
   it (the User Agent Server, UAS) can have a different identity from
   that in the To header field. When RFC 4916 is used then it is
possible to supply its identity to the peer UA by means of a request in
the
   reverse direction, and for that identity to be signed by an
   Authentication Service. 
"


      There is no need to reveal keys in the SIP signaling or in the SDP
      message exchange.  In order for SDES and MIKEY to provide this
      security property, they require distribution of certificates to
      the endpoints that are signed by well known certificate
      authorities.


I believe we should delete the last sentence since we provide a detailed
discussion of SDES and MIKEY in the media security requirements
document. 


Section 5

   The far endpoint (answerer) may now establish a mutually
   authenticated DTLS association to the offerer. 


The same comment from above applies since at this stage there two end
points aren't mutually authenticated yet. 


   o  If the fingerprint does not match the hashed certificate then the
      endpoint MUST tear down the media session immediately.

Tentatively establishing a session and tearing it down if the
fingerprint doesn't match is one possible strategy. Alternatively, the
offerer could wait for an answer with the fingerprint and subsequently
execute the DTLS handshake and cancel the handshake and the session
establishment immediately if the cert used in the handshake does not
match the fingerprint.

This would obviously delay the establishment of the secure channel.
Particularly for early media this would mean that media is unprotected.
Early media will, however, be tough anyway. 

I don't have a strong opinion on the two approaches but I believe we
should mention the DoS potential in the security consideration section. 



6.5.  Session Modification

   Once an answer is provided to the offerer, either endpoint MAY
   request a session modification which MAY include an updated offer.
   This session modification can be carried in either an INVITE or
   UPDATE request.  Once the answer is received, the active endpoint
   will either reuse the existing association or establish a new one,
   tearing down the existing association as soon as the offer/answer
   exchange is completed.


I think we need to differentiate the case where the SDP changes only
slightly, for example, a change in codec vs. the case where, for
example, an IP address changes. 
Hence, in some cases creating a new association might not even be
possible. 

Section 7:

   The SIP signaling from Alice to her proxy is transported over TLS to
   ensure an integrity protected channel between Alice and her identity
   service.  Note that all other signaling is transported over TCP in
   this example although it could be done over any supported transport.

I guess we should also say that the communication between the SIP
proxies is protected someone, specifically when SIP Identity (or other
security mechanisms) is not available. 



      This shows the initial INVITE from Alice to Bob carried over the
      TLS transport protocol to ensure an integrity protected channel
      between Alice and her proxy which acts as Alice's identity
      service.  Note that Alice has requested to be either the active or
      passive endpoint by specifying a=setup:actpass.  Bob chooses to
      act as the DTLS server and will initiate the session.  Also note
      that there is a fingerprint attribute on the 'c' line of the SDP.
      This is computed from Bob's self-signed certificate.

Shouldn't this be Alice's self-signed cert, as shown in the subsequent
exchange. 

      At this point, Bob can begin sending early media (RTP and RTCP) to
      Alice.  Note that Alice can't yet trust the media since the
      fingerprint has not yet been received.  This lack of trusted,
      secure media is indicated to Alice.

At the last sentence we should indicate that this indication is part of
the user interface rather than something that is meant to be part of the
protocol exchange. 


Section 8: Security Considerations


Other mechanisms, such as the S/MIME mechanism described
   in RFC 3261, or the mechanisms described in
   [I-D.wing-sip-identity-media] or [I-D.fischer-sip-e2e-sec-media],
   could also serve this purpose.


I believe we should just mention S/MIME and SIP CERT rather than
individual drafts that may not go anywhere. 

Section 8.2: 


This sentence is a bit tough to read:

  If SIP Identity is not used, but the signaling is protected by SIPS,
   the security guarantees are weaker, but some security is still
   provided as long as all proxies are trusted, this provides integrity
   for the fingerprint.


Suggest to break it into 3 sentences:

 If SIP Identity is not used, but the signaling is protected by SIPS,
   the security guarantees are weaker. Some security is still
   provided as long as all proxies are trusted. This provides integrity
   for the fingerprint in a chain-of-trust security model. 



It does not provide a strong assertion of who
   Alice is communicating with.  However, as much as the target domain
   can be trusted to correctly populate the From header field value,
   Alice can use that.  The security issue with this approach is that if
   one of the Proxies wished to mount a man-in-the-middle attack, it
   could convince Alice that she was talking to Bob when really the
   media was flowing through a man in the middle media relay.  However,
   this attack could not convince Bob that he was taking to Alice.


I believe that this last paragraph does not provide a lot of value given
that SIPS fits into the chain of trust security model and hence, by
definition, you have to trust the proxies. If the proxies are, for some
reason, not trustworthy anymore than there is a problem. 

8.3.  S/MIME


I would delete the last sentence from that section, namely 
"
 However, so far there have been no deployments of S/MIME
 for SIP.
"

Reason: The problem is not really S/MIME as such. The problem is how to
distribute the certificates. This problem has, however, been tackeled
with SIP CERT and hence the situation may look different in a few years.
Additionally, one could argue of lack of deployment of other security
mechanisms as well. 


8.5.  Short Authentication String

DTLS does not natively support
   this mode, however it would be straightforward to add one as a TLS
   extension [RFC3546].

I would delete the term "straightforward" and say something like
"
   DTLS does not natively support
   this mode. Based on the level of deployment interest a TLS
   extension [RFC3546] could provide support for it. 
"

Reason: There has not been a lot of interest in this mechanism lately.
Hence, I am not sure whether there is actually a lot interest from the
community. 

Additionally, it might be useful to indicate that this mechanism only
helps when you actually know the person's voice. This fits to some
communication patters. When you know your communication partners already
out-of-band then things are a lot easier anyway. 
For those cases where this is not true things get more complicated. For
example, how do I know that I talk to a person at my bank, insurance
company, car dealer, travel agency, help desk, etc.? One may not know
the voice of these folks. 




Appendix A:

A.4.  Clipping (R-AVOID-CLIPPING)

   Because the key establishment occurs in the media plane, media need
   not be clipped before the receipt of the SDP answer.


I believe we should indicate that in this case the early media is not
secured.


A.7.  (R-SIG-MEDIA, R-ACT-ACT)


It might be good to indicate that the interaction between the UA and the
authentication service needs to be secured as well and that the
authentication service is responsible for executing proper
authentication of the user. 


A.8.  Binding to Identifiers (R-ID-BINDING)

We should weaken the language a bit to indicate that other mechanisms,
such as SIP CERT and S/MIME may also be used and not only SIP Identity. 

A.11.  RTP Validity Check (R-RTP-VALID)

We should also mention STUN packets by referencing Section 5.1.2 of
http://tools.ietf.org/html/draft-ietf-avt-dtls-srtp-03


A.15.  Denial of Service Vulnerability (R-DOS)

   DTLS offers some degree of DoS protection particuarly as a built-in
   feature.



A.16 is already covered by A.7. I would delete it. 


A.18: Maybe we should add one more sentence: "RFC 4474 is able to
prevent an active attacker on the signalling path to downgrade the call
from SRTP to RTP."


A.22.  Interworking with Intermediaries (R-TRANSCODER)

"
   A description of the interworking with Session Border Controllers is
   described in this document.
"

The interworking with SBCs is covered in 
http://www.ietf.org/internet-drafts/draft-ietf-mmusic-media-path-middleb
oxes-01.txt

However, as the text of interworking is written in
http://www.ietf.org/internet-drafts/draft-ietf-sip-media-security-requir
ements-07.txt
the transcoder needs to have access to the keying material and therefore
the description from A.21 on media recording (and key disclosure) is
applicable here as well. 


A.23.  PSTN Gateway Termination (R-PSTN)

   The DTLS-SRTP framework allows the media security to terminate at a
   PSTN gateway.  This does not provide end-to-end security, but is
   consistent with the security goals of this framework because the
   gateway is authorized to speak for the PSTN namespace.


There are several scenarios that would have to be discussed in this
context; they are described in Section 3 of
draft-schwartz-sip-e164-ownership-01.txt, namely 
* IP-IP Case (not relevant to Section A.23 although E.164 numbers are
used).
* IP-PSTN-IP Case
* PSTN-to-IP Case
* IP-to-PSTN Case

The problems are slightly different for each of these cases. However, as
most folks would probably agree the security of all these cases is
rather weak (or at least unpredictable). 

I wonder how to best treat this subject but it may not hurt to describe
the issues in more detail in the appendix. Text is already available --
hence it would be more of a copy-and-paste operation. 

There are two requirements that have not been discussed: R-ALLOW-RTP and
R-HERFP.

"R-ALLOW-RTP: DTLS-SRTP allows RTP media to be received by the calling
party until SRTP has been negotiated with the answerer, after which SRTP
is preferred over RTP.
"

Here is first try:
"
R-HERFP: The Heterogeneous Error Response Forking Problem (HERFP) is not
applicable to DTLS-SRTP since the key exchange protocol will be executed
along the media path and hence error messages are communicated along
this path and proxies do not need to progress them.
"
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 11 19:27:23 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3CFAE3A6D0F;
	Mon, 11 Aug 2008 19:27:23 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 061C83A6E04
	for <sip@core3.amsl.com>; Mon, 11 Aug 2008 19:27:22 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lq0eKk6FJSBP for <sip@core3.amsl.com>;
	Mon, 11 Aug 2008 19:27:21 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id 59D0F3A67B6
	for <SIP@ietf.org>; Mon, 11 Aug 2008 19:27:21 -0700 (PDT)
Received: from [75.68.119.237] (port=62011 helo=[192.168.15.102])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KSjbF-0001n5-GH; Mon, 11 Aug 2008 19:27:05 -0700
Message-Id: <F43A0105-EE00-407A-B458-9EE997F99BDC@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: Dean Willis <dean.willis@softarmor.com>
In-Reply-To: <48987EAA.80405@softarmor.com>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Mon, 11 Aug 2008 22:27:11 -0400
References: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
	<48987EAA.80405@softarmor.com>
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

What is at Steak here [sic] is not whether an Info-Package can be a  
multipart MIME type.  That (almost, but clearly I guess I need to  
include such text) goes without saying (but will in the future).

The question is if I will eat Steak, and I will eat Lobster, is it OK  
for me to receive an INFO that has a multipart/mixed with one part  
being Steak and another (theoretically unrelated) part being Lobster?



On Aug 5, 2008, at 12:24 PM, Dean Willis wrote:

> Eric Burger wrote:
>> The current text says we do not allow multiple Info-Packages per INFO
>> message.  Although not stated (and I will state explicitly if we
>> continue to go in this direction), this nominally makes parsers  
>> easier
>> and makes failure handling straightforward.
>
> I support single packages per message; although it might be reasonable
> that some package itself use a multipart content delivery.
>
> For example, a "surf&turf" INFO package might contain a steak and a
> lobster. This creates no consternation for the consumer, because  
> that's
> what he asked for, and if he can't handle a multipart, he should have
> ordered something else.
>
> --
> Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 11 19:28:36 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6689A3A6D7E;
	Mon, 11 Aug 2008 19:28:36 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C88A73A6D7E
	for <sip@core3.amsl.com>; Mon, 11 Aug 2008 19:28:34 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level: 
X-Spam-Status: No, score=0.001 tagged_above=-999 required=5
	tests=[BAYES_50=0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FHbT5lsj8T+n for <sip@core3.amsl.com>;
	Mon, 11 Aug 2008 19:28:34 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id EE90A3A6D0F
	for <SIP@ietf.org>; Mon, 11 Aug 2008 19:28:33 -0700 (PDT)
Received: from [10.0.1.191] (adsl-68-94-24-239.dsl.rcsntx.swbell.net
	[68.94.24.239]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7C2SUIS009178
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Mon, 11 Aug 2008 21:28:31 -0500
Message-Id: <F71F159E-6848-477B-A965-4A092D034B39@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Eric Burger <eburger@standardstrack.com>
In-Reply-To: <F43A0105-EE00-407A-B458-9EE997F99BDC@standardstrack.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Mon, 11 Aug 2008 21:28:29 -0500
References: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
	<48987EAA.80405@softarmor.com>
	<F43A0105-EE00-407A-B458-9EE997F99BDC@standardstrack.com>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 11, 2008, at 9:27 PM, Eric Burger wrote:

> What is at Steak here [sic] is not whether an Info-Package can be a  
> multipart MIME type.  That (almost, but clearly I guess I need to  
> include such text) goes without saying (but will in the future).
>
> The question is if I will eat Steak, and I will eat Lobster, is it  
> OK for me to receive an INFO that has a multipart/mixed with one  
> part being Steak and another (theoretically unrelated) part being  
> Lobster?

Clearly, any client that doesn't understand multipart will be left  
asking "Where's the beef?"

--
Deab
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 11 20:16:10 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1B42D3A6D2B;
	Mon, 11 Aug 2008 20:16:10 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 332893A6E8F
	for <sip@core3.amsl.com>; Mon, 11 Aug 2008 20:16:08 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id u3YpMlDLKKXQ for <sip@core3.amsl.com>;
	Mon, 11 Aug 2008 20:16:07 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id 786AB3A6D2B
	for <SIP@ietf.org>; Mon, 11 Aug 2008 20:16:07 -0700 (PDT)
Received: from [75.68.119.237] (port=62682 helo=[192.168.15.102])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KSkMN-0007Jw-RJ; Mon, 11 Aug 2008 20:15:48 -0700
Message-Id: <3AEC347A-6516-4CE0-B804-0EFBAB325D9E@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: Dean Willis <dean.willis@softarmor.com>
In-Reply-To: <F71F159E-6848-477B-A965-4A092D034B39@softarmor.com>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Mon, 11 Aug 2008 23:15:53 -0400
References: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
	<48987EAA.80405@softarmor.com>
	<F43A0105-EE00-407A-B458-9EE997F99BDC@standardstrack.com>
	<F71F159E-6848-477B-A965-4A092D034B39@softarmor.com>
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

But on the serious side, my guess is the chance of a UA that  
understands "modern" Info-Packages but does not understand multipart/*  
will approach zero.  Especially if Info-Packages mandates support of  
multipart.

On Aug 11, 2008, at 10:28 PM, Dean Willis wrote:

>
> On Aug 11, 2008, at 9:27 PM, Eric Burger wrote:
>
>> What is at Steak here [sic] is not whether an Info-Package can be a  
>> multipart MIME type.  That (almost, but clearly I guess I need to  
>> include such text) goes without saying (but will in the future).
>>
>> The question is if I will eat Steak, and I will eat Lobster, is it  
>> OK for me to receive an INFO that has a multipart/mixed with one  
>> part being Steak and another (theoretically unrelated) part being  
>> Lobster?
>
> Clearly, any client that doesn't understand multipart will be left  
> asking "Where's the beef?"
>
> --
> Deab

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 11 20:42:25 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5AC9F3A6AF3;
	Mon, 11 Aug 2008 20:42:25 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0EB1E3A6AF3
	for <sip@core3.amsl.com>; Mon, 11 Aug 2008 20:42:24 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.532
X-Spam-Level: 
X-Spam-Status: No, score=-4.532 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4, RCVD_NUMERIC_HELO=2.067]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4FgqZETbNE81 for <sip@core3.amsl.com>;
	Mon, 11 Aug 2008 20:42:23 -0700 (PDT)
Received: from zcars04f.nortel.com (zcars04f.nortel.com [47.129.242.57])
	by core3.amsl.com (Postfix) with ESMTP id EDAA53A6A95
	for <sip@ietf.org>; Mon, 11 Aug 2008 20:42:22 -0700 (PDT)
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	m7C3gHa25839; Tue, 12 Aug 2008 03:42:17 GMT
Received: from 47.102.169.107 ([47.102.169.107]) by zrc2hxm0.corp.nortel.com
	([47.103.123.71]) with Microsoft Exchange Server HTTP-DAV ; 
	Tue, 12 Aug 2008 03:41:50 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Mon, 11 Aug 2008 20:41:47 -0700
From: "Francois Audet" <audet@nortel.com>
To: Eric Burger <eburger@standardstrack.com>,
	Dean Willis <dean.willis@softarmor.com>
Message-ID: <C4C6548B.82F%audet@AmericasM01.nt.com>
Thread-Topic: [Sip] INFO Issue: Multiple Bodies
Thread-Index: Acj8LViVFb5wM2UDTYinznPMrtpYZA==
In-Reply-To: <3AEC347A-6516-4CE0-B804-0EFBAB325D9E@standardstrack.com>
Mime-version: 1.0
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Especially if we mandate support for multipart MIME in modern Info-package.


On Aug11 2008 20:15 , "Eric Burger" <eburger@standardstrack.com> wrote:

> But on the serious side, my guess is the chance of a UA that
> understands "modern" Info-Packages but does not understand multipart/*
> will approach zero.  Especially if Info-Packages mandates support of
> multipart.
> 
> On Aug 11, 2008, at 10:28 PM, Dean Willis wrote:
> 
>> 
>> On Aug 11, 2008, at 9:27 PM, Eric Burger wrote:
>> 
>>> What is at Steak here [sic] is not whether an Info-Package can be a
>>> multipart MIME type.  That (almost, but clearly I guess I need to
>>> include such text) goes without saying (but will in the future).
>>> 
>>> The question is if I will eat Steak, and I will eat Lobster, is it
>>> OK for me to receive an INFO that has a multipart/mixed with one
>>> part being Steak and another (theoretically unrelated) part being
>>> Lobster?
>> 
>> Clearly, any client that doesn't understand multipart will be left
>> asking "Where's the beef?"
>> 
>> --
>> Deab
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug 12 08:27:59 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 65A593A6A47;
	Tue, 12 Aug 2008 08:27:59 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3707F3A6A47
	for <sip@core3.amsl.com>; Tue, 12 Aug 2008 08:27:58 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1
X-Spam-Level: 
X-Spam-Status: No, score=-1 tagged_above=-999 required=5 tests=[AWL=1.600,
	BAYES_00=-2.599, SPF_PASS=-0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pmW2HVmIODmU for <sip@core3.amsl.com>;
	Tue, 12 Aug 2008 08:27:57 -0700 (PDT)
Received: from nostrum.com (unknown [IPv6:2001:470:1f03:267::2])
	by core3.amsl.com (Postfix) with ESMTP id E4EF83A6B18
	for <sip@ietf.org>; Tue, 12 Aug 2008 08:27:56 -0700 (PDT)
Received: from [172.16.3.232] (vicuna-alt.estacado.net [75.53.54.121])
	(authenticated bits=0)
	by nostrum.com (8.14.2/8.14.1) with ESMTP id m7CFRvfw010805
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO);
	Tue, 12 Aug 2008 10:27:57 -0500 (CDT)
	(envelope-from rjsparks@nostrum.com)
Message-Id: <1FB23F33-95F0-4943-81BE-0D8871F7880C@nostrum.com>
From: Robert Sparks <rjsparks@nostrum.com>
To: george_mana@yahoo.co.in
In-Reply-To: <25005.23009.qm@web94206.mail.in2.yahoo.com>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Tue, 12 Aug 2008 10:27:56 -0500
References: <25005.23009.qm@web94206.mail.in2.yahoo.com>
X-Mailer: Apple Mail (2.926)
Received-SPF: pass (nostrum.com: 75.53.54.121 is authenticated by a trusted
	mechanism)
X-Virus-Scanned: ClamAV 0.93.3/8018/Tue Aug 12 03:36:31 2008 on
	shaman.nostrum.com
X-Virus-Status: Clean
Cc: sip@ietf.org, sip-implementors@lists.cs.columbia.edu
Subject: Re: [Sip] [Sip-implementors] TCP retransmission
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Yes - any end-to-end message that might cross UDP along its path.
For instance, a 200 OK to an INVITE.

RjS

On Aug 11, 2008, at 11:55 PM, George AK wrote:

> Is there any SIP message that is retransmitted when using TCP as  
> transport?
>
> -George-
>
>
>      Unlimited freedom, unlimited storage. Get it now, on http://help.yahoo.com/l/in/yahoo/mail/yahoomail/tools/tools-08.html/
> _______________________________________________
> Sip-implementors mailing list
> Sip-implementors@lists.cs.columbia.edu
> https://lists.cs.columbia.edu/cucslists/listinfo/sip-implementors

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug 12 08:43:19 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9A1203A69D1;
	Tue, 12 Aug 2008 08:43:19 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8CFBA3A6A28
	for <sip@core3.amsl.com>; Tue, 12 Aug 2008 08:43:18 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OjVllEkWFYVT for <sip@core3.amsl.com>;
	Tue, 12 Aug 2008 08:43:17 -0700 (PDT)
Received: from ihemail4.lucent.com (ihemail4.lucent.com [135.245.0.39])
	by core3.amsl.com (Postfix) with ESMTP id 68C003A63C9
	for <sip@ietf.org>; Tue, 12 Aug 2008 08:43:17 -0700 (PDT)
Received: from umail.lucent.com (h135-3-40-61.lucent.com [135.3.40.61])
	by ihemail4.lucent.com (8.13.8/IER-o) with ESMTP id m7CFhBfc027726
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Tue, 12 Aug 2008 10:43:12 -0500 (CDT)
Received: from [135.185.244.90] (il0015vkg1.ih.lucent.com [135.185.244.90])
	by umail.lucent.com (8.13.8/TPES) with ESMTP id m7CFh69R019221;
	Tue, 12 Aug 2008 10:43:06 -0500 (CDT)
Message-ID: <48A1AF8F.50805@alcatel-lucent.com>
Date: Tue, 12 Aug 2008 10:43:11 -0500
From: "Vijay K. Gurbani" <vkg@alcatel-lucent.com>
Organization: Bell Labs Security Technology Research Group
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: vu3mmg@gmail.com
X-Scanned-By: MIMEDefang 2.57 on 135.245.2.39
Cc: IETF SIP List <sip@ietf.org>
Subject: Re: [Sip] sip call model
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Mahesh Govind wrote:

 > Hi,
 > can we map sip  calls to any particular call model  ?

Yes.  A complete one-to-one mapping between states will almost
always be impossible, though.  This is because you will seldom
have two call models with the same number of states and
transitions (if you did, why map them at all?)

The utility of the resulting mapping will depend on how
granular the states are between the call models.  For instance,
a call model with less number of states and low cardinality
transitions can still be mapped to a call model with a high
number of states and many transitions through state splitting.
However, introducing an artificial state in this fashion is
problematic at best.  It raises many additional questions: how
does the new state behave in principle with the rest of
the states of the call model in which it was introduced?  The
call model may not be amenable to such an artificial
introduction of a new state. How does the designer of the new
state decide on the amount of functionality that should be
in it, in relation to the state it was carved out from? How
easy will it be to realize such a system in working software?

SIP has been mapped to a PSTN call model quite effectively
for certain services (see RFC3976.)

Hope that helps.

- vijay
-- 
Vijay K. Gurbani, Bell Laboratories, Alcatel-Lucent
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)
Email: vkg@{alcatel-lucent.com,bell-labs.com,acm.org}
WWW:   http://www.alcatel-lucent.com/bell-labs
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug 12 08:47:40 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3BA8E3A6AE9;
	Tue, 12 Aug 2008 08:47:40 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2A94F3A6AE9
	for <sip@core3.amsl.com>; Tue, 12 Aug 2008 08:47:39 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.299
X-Spam-Level: 
X-Spam-Status: No, score=-1.299 tagged_above=-999 required=5 tests=[AWL=1.300, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mAfz-v67vM3z for <sip@core3.amsl.com>;
	Tue, 12 Aug 2008 08:47:38 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 5C3343A6A47
	for <SIP@ietf.org>; Tue, 12 Aug 2008 08:47:38 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7CFlcZa013516
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Tue, 12 Aug 2008 10:47:40 -0500
Message-Id: <54A2D294-7FC5-40E0-8EFD-9D3AB3B1EFBD@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Eric Burger <eburger@standardstrack.com>
In-Reply-To: <3AEC347A-6516-4CE0-B804-0EFBAB325D9E@standardstrack.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Tue, 12 Aug 2008 10:47:33 -0500
References: <8045B3C2-47ED-4766-B557-07ED26DBD793@standardstrack.com>
	<48987EAA.80405@softarmor.com>
	<F43A0105-EE00-407A-B458-9EE997F99BDC@standardstrack.com>
	<F71F159E-6848-477B-A965-4A092D034B39@softarmor.com>
	<3AEC347A-6516-4CE0-B804-0EFBAB325D9E@standardstrack.com>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 11, 2008, at 10:15 PM, Eric Burger wrote:

> But on the serious side, my guess is the chance of a UA that  
> understands "modern" Info-Packages but does not understand multipart/ 
> * will approach zero.  Especially if Info-Packages mandates support  
> of multipart.

I believe you are correct.

--
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug 12 13:09:10 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 757113A6C73;
	Tue, 12 Aug 2008 13:09:10 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3F49D3A6C62
	for <sip@core3.amsl.com>; Tue, 12 Aug 2008 13:09:09 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.184
X-Spam-Level: 
X-Spam-Status: No, score=-1.184 tagged_above=-999 required=5 tests=[AWL=1.115, 
	BAYES_00=-2.599, MIME_8BIT_HEADER=0.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3ExjI10g4U+X for <sip@core3.amsl.com>;
	Tue, 12 Aug 2008 13:09:08 -0700 (PDT)
Received: from nf-out-0910.google.com (nf-out-0910.google.com [64.233.182.190])
	by core3.amsl.com (Postfix) with ESMTP id 520593A6C46
	for <sip@ietf.org>; Tue, 12 Aug 2008 13:09:07 -0700 (PDT)
Received: by nf-out-0910.google.com with SMTP id b11so882062nfh.39
	for <sip@ietf.org>; Tue, 12 Aug 2008 13:09:08 -0700 (PDT)
Received: by 10.210.114.15 with SMTP id m15mr10841092ebc.82.1218571748671;
	Tue, 12 Aug 2008 13:09:08 -0700 (PDT)
Received: from portatil.lan ( [85.58.7.186])
	by mx.google.com with ESMTPS id f13sm4526565gvd.10.2008.08.12.13.09.06
	(version=TLSv1/SSLv3 cipher=RC4-MD5);
	Tue, 12 Aug 2008 13:09:07 -0700 (PDT)
From: =?iso-8859-1?q?I=F1aki_Baz_Castillo?= <ibc@aliax.net>
To: sip@ietf.org
Date: Tue, 12 Aug 2008 22:09:04 +0200
User-Agent: KMail/1.9.9
References: <25005.23009.qm@web94206.mail.in2.yahoo.com>
In-Reply-To: <25005.23009.qm@web94206.mail.in2.yahoo.com>
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200808122209.04728.ibc@aliax.net>
Subject: Re: [Sip] [Sip-implementors] TCP retransmission
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

El Martes, 12 de Agosto de 2008, George AK escribi=F3:
> Is there any SIP message that is retransmitted when using TCP as transpor=
t?

Please, don't do cross-posting (sending the same mail to various maillists).
Thanks.



-- =

I=F1aki Baz Castillo
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug 12 16:28:11 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5BE863A6AD0;
	Tue, 12 Aug 2008 16:28:11 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 930D33A6AD0
	for <sip@core3.amsl.com>; Tue, 12 Aug 2008 16:28:09 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id NCKfmRp8ENG4 for <sip@core3.amsl.com>;
	Tue, 12 Aug 2008 16:28:08 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id 64C833A67DA
	for <sip@ietf.org>; Tue, 12 Aug 2008 16:28:08 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,197,1217808000"; d="scan'208";a="139244086"
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 12 Aug 2008 23:28:12 +0000
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7CNSBuH022073; 
	Tue, 12 Aug 2008 16:28:11 -0700
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m7CNSB5d006323;
	Tue, 12 Aug 2008 23:28:11 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Aug 2008 19:28:11 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Aug 2008 19:28:10 -0400
Message-ID: <48A21CC2.5060906@cisco.com>
Date: Tue, 12 Aug 2008 19:29:06 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Gonzalo Camarillo <Gonzalo.Camarillo@ericsson.com>
References: <20080808090001.570B63A6CC6@core3.amsl.com>
In-Reply-To: <20080808090001.570B63A6CC6@core3.amsl.com>
X-OriginalArrivalTime: 12 Aug 2008 23:28:10.0645 (UTC)
	FILETIME=[15580C50:01C8FCD3]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1348; t=1218583691;
	x=1219447691; c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20I-D=20Action=3Adraft-ietf-sip-b
	ody-handling-03.txt |Sender:=20;
	bh=dlFA1UR9pe2lYepjhD6kwkYBbLIUEVTyLBr4AB3ZaSk=;
	b=x0MtvwkFcWjglYT6+fILtivxHrfDX2pE28PYlgWlXhFoorMHR4+LlTdZWj
	8MrPElav9E752tjAHLlMQym2lRGE7E+t7xrszmA4ZIqgXTapA3+Sx2Ijj4NC
	6jKh0LW9r2;
Authentication-Results: sj-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim2002 verified; ); 
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] I-D Action:draft-ietf-sip-body-handling-03.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I took a look at this (actually just the diffs), and it looks fine.

I have one question after reading the additions about multipart/related:

There is talk about extensions that use multipart/related, and what they 
must do. This implies an assumption that it cannot be used *without* an 
exception. Is that the case? If so, is it also the case for other kinds 
of multipart?

My assumption is that, at least for multipart/mixed, no extension is 
required. E.g. I can just put a multipart/mixed body in my INVITE, make 
one body part be SDP, and others be anything I like, whether the 
recipient can make use of them or not.

Similarly for multipart/alternative. I *think* I should be able to take 
any request that currently expects a body part of some type, and put a 
multipart/alternative in, with one part being the expected type, and one 
or more other contained body parts containing what *I* consider to be 
alternatives. E.g. a MESSAGE with a multipart/alternative containing 
text/plain and text/html. And it shouldn't require any extension to 
MESSAGE to support that. Right?

With multipart/related I am inclined to agree that it makes no sense 
without some specification of what the collection is for.

Would it be good to put some words about what is/isn't required into the 
document?

	Thanks,
	Paul
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 13 04:15:36 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 71B373A6B53;
	Wed, 13 Aug 2008 04:15:36 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4CFDE3A6B31
	for <sip@core3.amsl.com>; Wed, 13 Aug 2008 04:15:35 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.739
X-Spam-Level: 
X-Spam-Status: No, score=-4.739 tagged_above=-999 required=5
	tests=[BAYES_20=-0.74, HTML_MESSAGE=0.001, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ob7KCIvm8W2F for <sip@core3.amsl.com>;
	Wed, 13 Aug 2008 04:15:34 -0700 (PDT)
Received: from mail153.messagelabs.com (mail153.messagelabs.com
	[216.82.253.51]) by core3.amsl.com (Postfix) with SMTP id 6786E3A6B53
	for <sip@ietf.org>; Wed, 13 Aug 2008 04:15:34 -0700 (PDT)
X-VirusChecked: Checked
X-Env-Sender: ranjit@motorola.com
X-Msg-Ref: server-8.tower-153.messagelabs.com!1218625719!5380845!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [136.182.1.13]
Received: (qmail 1288 invoked from network); 13 Aug 2008 11:08:39 -0000
Received: from unknown (HELO motgate3.mot.com) (136.182.1.13)
	by server-8.tower-153.messagelabs.com with SMTP;
	13 Aug 2008 11:08:39 -0000
Received: from il27exr01.cig.mot.com ([10.17.196.70])
	by motgate3.mot.com (8.12.11/Motorola) with ESMTP id m7DB8dFM015542
	for <sip@ietf.org>; Wed, 13 Aug 2008 04:08:39 -0700 (MST)
Received: from il27vts01 (il27vts01.cig.mot.com [10.17.196.85])
	by il27exr01.cig.mot.com (8.13.1/Vontu) with SMTP id m7DB8d50016891
	for <sip@ietf.org>; Wed, 13 Aug 2008 06:08:39 -0500 (CDT)
Received: from ZMY16EXM66.ds.mot.com (zmy16exm66.ap.mot.com [10.179.4.26])
	by il27exr01.cig.mot.com (8.13.1/8.13.0) with ESMTP id m7DB8bqP016871
	for <sip@ietf.org>; Wed, 13 Aug 2008 06:08:38 -0500 (CDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 13 Aug 2008 19:08:34 +0800
Message-ID: <750BBC72E178114F9DC4872EBFF29A5B05923093@ZMY16EXM66.ds.mot.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Comment on Forking option measurement in
	draft-poretsky-sip-bench-term-04
Thread-Index: Acj9NMAYHeo7LWKJQ1ydn5oJCr8SKAAABcyg
From: "Avasarala Ranjit-A20990" <ranjit@motorola.com>
To: <sip@ietf.org>
X-CFilter-Loop: Reflected
Subject: [Sip] Comment on Forking option measurement in
	draft-poretsky-sip-bench-term-04
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0538438809=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0538438809==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8FD34.EE12ECA5"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C8FD34.EE12ECA5
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


> Hi
>=20
> In the draft: "draft-poretsky-sip-bench-term-04" section 3.3.15 says
> that the Forking is an optional process and is not standardized. But I
> feel the forking process is straight forward meaning a proxy deciding
> to fork an incoming INVITE request, creates that many new INVITE
> requests as the request should be forked to.
>=20
> E.g say the incoming INVITE request comes from Alice and the Proxy P
> decides to fork to 3 UA s  Bob_1, Bob_2 and Bob_3, then the proxy
> would create 3 new INVITE requests and send them to Bob_1, Bob_2 and
> Bob_3 depending on type of forking - say simultaneous or sequential.=20
>=20
> So why is it that the performance of the proxy is impacted by doing
> this, rather this could be a separate parameter for measuring proxy
> performance.
>=20
> Regards
> Ranjit
>=20

------_=_NextPart_001_01C8FD34.EE12ECA5
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7653.2">
<TITLE>Comment on Forking option measurement in =
draft-poretsky-sip-bench-term-04</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->
<BR>

<P><FONT COLOR=3D"#0000FF" SIZE=3D2 FACE=3D"Arial">Hi</FONT>
</P>

<P><FONT COLOR=3D"#0000FF" SIZE=3D2 FACE=3D"Arial">In the draft: =
&quot;draft-poretsky-sip-bench-term-04&quot; section 3.3.15 says that =
the Forking is an optional process and is not standardized. But I feel =
the forking process is straight forward meaning a proxy deciding to fork =
an incoming INVITE request, creates that many new INVITE requests as the =
request should be forked to.</FONT></P>

<P><FONT COLOR=3D"#0000FF" SIZE=3D2 FACE=3D"Arial">E.g say the incoming =
INVITE request comes from Alice and the Proxy P decides to fork to 3 UA =
s&nbsp; Bob_1, Bob_2 and Bob_3, then the proxy would create 3 new INVITE =
requests and send them to Bob_1, Bob_2 and Bob_3 depending on type of =
forking - say simultaneous or sequential. </FONT></P>

<P><FONT COLOR=3D"#0000FF" SIZE=3D2 FACE=3D"Arial">So why is it that the =
performance of the proxy is impacted by doing this, rather this could be =
a separate parameter for measuring proxy performance.</FONT></P>

<P><FONT COLOR=3D"#0000FF" SIZE=3D2 FACE=3D"Arial">Regards</FONT>

<BR><FONT COLOR=3D"#0000FF" SIZE=3D2 FACE=3D"Arial">Ranjit</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C8FD34.EE12ECA5--

--===============0538438809==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0538438809==--


From sip-bounces@ietf.org  Wed Aug 13 13:25:28 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id DB8323A6877;
	Wed, 13 Aug 2008 13:25:28 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B5CC83A6813
	for <sip@core3.amsl.com>; Wed, 13 Aug 2008 13:25:27 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.449
X-Spam-Level: 
X-Spam-Status: No, score=-2.449 tagged_above=-999 required=5
	tests=[AWL=-0.150, BAYES_00=-2.599, MIME_8BIT_HEADER=0.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 9IwmtK5EJY4j for <sip@core3.amsl.com>;
	Wed, 13 Aug 2008 13:25:26 -0700 (PDT)
Received: from ebru.winwebhosting.com (ebru.winwebhosting.com [74.55.202.130])
	by core3.amsl.com (Postfix) with ESMTP id 9E4373A6AAA
	for <sip@ietf.org>; Wed, 13 Aug 2008 13:25:26 -0700 (PDT)
Received: from neustargw.va.neustar.com ([209.173.53.233] helo=BROSLT61xp)
	by ebru.winwebhosting.com with esmtpa (Exim 4.69)
	(envelope-from <br@brianrosen.net>)
	id 1KTMtJ-0000q2-TP; Wed, 13 Aug 2008 15:24:22 -0500
From: "Brian Rosen" <br@brianrosen.net>
To: =?iso-8859-2?Q?'Bart=B3omiej_Ko=B3akowski'?= <b.kolakowski@plus.pl>,
	<draft-ietf-sip-location-conveyance@tools.ietf.org>, <sip@ietf.org>
References: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
Date: Wed, 13 Aug 2008 16:24:26 -0400
Message-ID: <008301c8fd82$96c29710$0c00a8c0@cis.neustar.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: Acj9TWvzdojVJbMCQoKKMyiekh68ngAM8Mgw
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - ebru.winwebhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - brianrosen.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question about
	potential usage of the Geolocation header
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

You can use the "HELD" protocol, rather than a SIP SUBSCRIBE/NOTIFY for the
dereference, if that makes it seem simpler to you.  SUBSCRIBE/NOTIFY is
quite simple, and most devices and services implement it for other reasons.

We have discussed using cell-id as a representation mechanism, but have been
told, many times, that operators will not divulge location of cell ids
beyond the immediate network, which makes this form of location entirely
unsuitable for the range of applications we envisioned.   If you have
different information, please share it.

On the other hand, even if we did allow cell id as a form of location, it
would be inside a PIDF-LO, and thus would need to be in a body.

I don't think putting actual location in the header is a good idea, as it
cannot be protected against inadvertent disclosure.  That would be a problem
in the IETF.

Brian
________________________________________
From: Bart=B3omiej Ko=B3akowski [mailto:b.kolakowski@plus.pl] =

Sent: Wednesday, August 13, 2008 10:04 AM
To: draft-ietf-sip-location-conveyance@tools.ietf.org; sip@ietf.org
Subject: draft-ietf-sip-location-conveyance - Question about potential usage
of the Geolocation header

Hello, =

I have got such concern regarding location conveyance in SIP messages: I am
designing IMS Appilcation Server, acting as a proxy, that would query
network elements for location information. As you wrote proxies cannot
insert message body, so the only way is to provide location by reference.
This requires appling SUBSCRIBE-NOTIFY mechanism, which makes the
architecture of the solution quit complex.
In order to make it simpler I thought about including location information
as locationValue inside the Geolocation header. In fact we do not need
location represented with coordinates, but with cell-id (that's mobile
network). PIDF-LO does not support it, but maybe inside a header that would
be possible? There would be also an issue in indicating loaction target
whose location is included (we plan to include both A and B parties
location). Geolocation header would look like this:
Geolocation: {cell-id-3gpp}
;location-target=3D"bob@plus.pl";inserted-by=3D"las@plus.pl" =

What do you think about souch a usage of Geolocation header, maybe you could
give us some other solution? =

Thank you in advance, =

Bart=B3omiej Ko=B3akowski =

Service Solutions Architect =

Service Development Support Department =

Polkomtel S.A =

tel. 601131509 =


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 13 14:28:04 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id ECB1E3A6B05;
	Wed, 13 Aug 2008 14:28:03 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BECA83A698D
	for <sip@core3.amsl.com>; Wed, 13 Aug 2008 14:28:02 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dswTd+kZ6Tf8 for <sip@core3.amsl.com>;
	Wed, 13 Aug 2008 14:28:01 -0700 (PDT)
Received: from ihemail3.lucent.com (ihemail3.lucent.com [135.245.0.37])
	by core3.amsl.com (Postfix) with ESMTP id C898A3A69DE
	for <sip@ietf.org>; Wed, 13 Aug 2008 14:28:01 -0700 (PDT)
Received: from ilexp02.ndc.lucent.com (h135-3-39-2.lucent.com [135.3.39.2])
	by ihemail3.lucent.com (8.13.8/IER-o) with ESMTP id m7DLRuGi005566;
	Wed, 13 Aug 2008 16:27:57 -0500 (CDT)
Received: from DEEXP02.DE.lucent.com ([135.248.187.66]) by
	ilexp02.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Aug 2008 16:27:56 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.27]) by
	DEEXP02.DE.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Aug 2008 23:27:54 +0200
Content-class: urn:content-classes:message
Date: Wed, 13 Aug 2008 23:27:53 +0200
MIME-Version: 1.0
Message-ID: <5D1A7985295922448D5550C94DE291800220CE37@DEEXC1U01.de.lucent.com>
In-Reply-To: <C4C6548B.82F%audet@AmericasM01.nt.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] INFO Issue: Multiple Bodies
Thread-Index: Acj8LViVFb5wM2UDTYinznPMrtpYZABJFA+Q
References: <3AEC347A-6516-4CE0-B804-0EFBAB325D9E@standardstrack.com>
	<C4C6548B.82F%audet@AmericasM01.nt.com>
From: "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
To: "Francois Audet" <audet@nortel.com>,
	"Eric Burger" <eburger@standardstrack.com>,
	"Dean Willis" <dean.willis@softarmor.com>
X-OriginalArrivalTime: 13 Aug 2008 21:27:54.0374 (UTC)
	FILETIME=[72863A60:01C8FD8B]
X-Scanned-By: MIMEDefang 2.57 on 135.245.2.37
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

There is a documentation rathole here that we will need to resolve
sometime.

My understanding is that draft-ietf-sip-body-handling updates RFC 3261
and this mandates the support of multipart.

Any referencing should therefore reference RFC 3261 as updated by
draft-ietf-sip-body-handling.

However we are still left with the problem that the INFO documentation
is in an RFC that still references RFC 2543, and therefore misses this
part of the documentation entirely.

Regards

Keith 

> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
> Behalf Of Francois Audet
> Sent: Tuesday, August 12, 2008 4:42 AM
> To: Eric Burger; Dean Willis
> Cc: SIP IETF
> Subject: Re: [Sip] INFO Issue: Multiple Bodies
> 
> Especially if we mandate support for multipart MIME in modern 
> Info-package.
> 
> 
> On Aug11 2008 20:15 , "Eric Burger" 
> <eburger@standardstrack.com> wrote:
> 
> > But on the serious side, my guess is the chance of a UA that 
> > understands "modern" Info-Packages but does not understand 
> multipart/* 
> > will approach zero.  Especially if Info-Packages mandates 
> support of 
> > multipart.
> > 
> > On Aug 11, 2008, at 10:28 PM, Dean Willis wrote:
> > 
> >> 
> >> On Aug 11, 2008, at 9:27 PM, Eric Burger wrote:
> >> 
> >>> What is at Steak here [sic] is not whether an 
> Info-Package can be a 
> >>> multipart MIME type.  That (almost, but clearly I guess I need to 
> >>> include such text) goes without saying (but will in the future).
> >>> 
> >>> The question is if I will eat Steak, and I will eat 
> Lobster, is it 
> >>> OK for me to receive an INFO that has a multipart/mixed with one 
> >>> part being Steak and another (theoretically unrelated) part being 
> >>> Lobster?
> >> 
> >> Clearly, any client that doesn't understand multipart will be left 
> >> asking "Where's the beef?"
> >> 
> >> --
> >> Deab
> > 
> > _______________________________________________
> > Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use 
> > sip-implementors@cs.columbia.edu for questions on current sip Use 
> > sipping@ietf.org for new developments on the application of sip
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use 
> sip-implementors@cs.columbia.edu for questions on current sip 
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 13 16:15:57 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 797AF3A6AEF;
	Wed, 13 Aug 2008 16:15:57 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1FD6A3A69EB
	for <sip@core3.amsl.com>; Wed, 13 Aug 2008 16:15:56 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.949
X-Spam-Level: 
X-Spam-Status: No, score=-1.949 tagged_above=-999 required=5 tests=[AWL=0.650, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2Rkj8xgBtMnW for <sip@core3.amsl.com>;
	Wed, 13 Aug 2008 16:15:55 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 0D9E93A6A2F
	for <sip@ietf.org>; Wed, 13 Aug 2008 16:15:54 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7DNEwP1024205
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Wed, 13 Aug 2008 18:15:55 -0500
Message-Id: <4292307A-1E28-4BD3-A5A2-EC1010DC89A6@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: "DRAGE, Keith (Keith)" <drage@alcatel-lucent.com>
In-Reply-To: <5D1A7985295922448D5550C94DE291800220CE37@DEEXC1U01.de.lucent.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Wed, 13 Aug 2008 18:15:55 -0500
References: <3AEC347A-6516-4CE0-B804-0EFBAB325D9E@standardstrack.com>
	<C4C6548B.82F%audet@AmericasM01.nt.com>
	<5D1A7985295922448D5550C94DE291800220CE37@DEEXC1U01.de.lucent.com>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <sip@ietf.org>, Francois Audet <audet@nortel.com>
Subject: Re: [Sip] INFO Issue: Multiple Bodies
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 13, 2008, at 4:27 PM, DRAGE, Keith (Keith) wrote:
>
>
> However we are still left with the problem that the INFO documentation
> is in an RFC that still references RFC 2543, and therefore misses this
> part of the documentation entirely.


Oh gee, maybe we ought to revise INFO?

--
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 15 14:18:48 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5A6873A69A1;
	Fri, 15 Aug 2008 14:18:48 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id ED1333A69E5
	for <sip@core3.amsl.com>; Fri, 15 Aug 2008 14:18:46 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.975
X-Spam-Level: 
X-Spam-Status: No, score=-1.975 tagged_above=-999 required=5 tests=[AWL=0.625, 
	BAYES_00=-2.599, SPF_PASS=-0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id T6Nb38ZK27Q5 for <sip@core3.amsl.com>;
	Fri, 15 Aug 2008 14:18:45 -0700 (PDT)
Received: from nostrum.com (nostrum-pt.tunnel.tserv2.fmt.ipv6.he.net
	[IPv6:2001:470:1f03:267::2])
	by core3.amsl.com (Postfix) with ESMTP id 65C4D3A67E1
	for <sip@ietf.org>; Fri, 15 Aug 2008 14:18:45 -0700 (PDT)
Received: from [172.16.3.232] (vicuna-alt.estacado.net [75.53.54.121])
	(authenticated bits=0)
	by nostrum.com (8.14.2/8.14.1) with ESMTP id m7FLIf6i095918
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO);
	Fri, 15 Aug 2008 16:18:41 -0500 (CDT)
	(envelope-from rjsparks@nostrum.com)
Message-Id: <13E45811-DE1F-4AE3-BE2D-625F0DBA6DBA@nostrum.com>
From: Robert Sparks <rjsparks@nostrum.com>
To: Ian Elz <ian.elz@ericsson.com>
In-Reply-To: <C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Fri, 15 Aug 2008 16:18:40 -0500
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
	<489861C9.2020507@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
X-Mailer: Apple Mail (2.926)
Received-SPF: pass (nostrum.com: 75.53.54.121 is authenticated by a trusted
	mechanism)
X-Virus-Scanned: ClamAV 0.93.3/8048/Fri Aug 15 07:56:27 2008 on
	shaman.nostrum.com
X-Virus-Status: Clean
Cc: SIP IETF <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

It's my hope that the work related to avoiding multiple usages will  
make this
an entirely academic discussion. On the chance that turns out to be  
untrue, however,
the one place I can see this coming up more quickly than elsewhere is  
if a UAC
decides it wants to subscribe to the dialog event package at each UAS  
that
provisionally responds to its INVITE and decides to reuse the dialog  
identifiers
that provisional response established.

RjS

On Aug 6, 2008, at 6:09 AM, Ian Elz wrote:

> Paul,
>
> I don't believe that you can create 'multiple early dialog usages'.
>
> On an INVITE transaction can create an early dialog. The other dialog
> creating transactions REFER and SUBSCRIBE, can only create established
> dialogs.
>
> As you cannot start a second INVITE transaction while there is an
> outstanding INVITE transaction on a dialog, early or otherwise.
>
> If you send a REFER or SUBSCRIBE method on an early dialog and you get
> an acceptance response then you have an established dialog.
>
> If this is the early-dialog from an INVITE transaction then key  
> question
> is what is the validity of a provisional response in creating a  
> dialog.
> Is it early or established. While the provisional response is clearly
> just that from a transaction perspective in this situation the meaning
> of the proposed 199 provisional response is now transaction affecting
> and not dialog affecting, i.e. the INVITE usage will not become
> established although the other usage may be established.
>
> The existing state models in sip only discuss dialogs and transactions
> and have not considered the dialog usage. When you send a reliable
> provisional response to an INVITE you are in effect creating an
> early-dialog usage. If this is the only dialog usage on the dialog you
> have also created an early-dialog. If there is another usage on the  
> same
> dialog then the dialog state will depend upon the state of the other
> dialog.
>
> RFC5057, Multiple Dialog Usage (informational) does not discuss the
> details involved in multiple usages and the impact on the sip state
> models but I hope that this was a consideration when the initial  
> drafts
> were prepared.
>
> I am unsure if the concept of multiple usages on an early dialog was
> ever considered when RFC5057 was in draft stage. The nuances of  
> multiple
> dialogs on an established dialog appears to have been enough to  
> suggest
> that the RFC specifically not recommend multiple usages without  
> getting
> into the 'dark area' of early dialogs and multiple usages.
>
> Whether it make sense to use a REFER or SUBSCRIBE inside an early  
> dialog
> is problematic. I am unsure whether these do make any sense. Would you
> want to subscribe to specific event which occurs during the early  
> dialog
> phase of an INVITE transaction? Would you want to use REFER to  
> perform a
> transfer of a ringing call and does the protocol actually support  
> this?
>
> If the answer to these questions is a definitive 'NO' then the issue
> will have resolves itself. I fear however that there is no definitive
> answer at this time.
>
> Ian Elz
>
> System Manager
> DUCI LDC UK
> (Lucid Duck)
>
> Office: + 44 24 764 35256
> gsm: +44 7801723668
> ian.elz@ericsson.com
>
>
> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]
> Sent: 05 August 2008 15:21
> To: Christer Holmberg
> Cc: SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
>
>
>
> Christer Holmberg wrote:
>> Hi,
>>
>>>> 7) Section 7: "A UAC that receives a 199 response for an early
> dialog
>> MUST NOT
>>>> send any further requests on that dialog...". Can you point to any
>> list discussion
>>>> around this requirement? I think there's some danger to consider
>> there. At the
>>>> very least we need to make this statement multiple-usage safe.
>>> This is a very good catch. This needs to be aligned with  
>>> dialogusage.
>> If the 199 contained the final response that triggered it, then that
>> final response could be used to determine the impact
>>> on the dialog or dialog usage or just the transaction. But if the  
>>> 199
>> doesn't contain the final response, then this is a problem.
>>
>> I forgot to bring this issue up in Dublin. Sorry for that.
>>
>> First, we need to remember that the UAS may terminate every
> dialogusage
>> when sending the final response (depending on what final response is
>> sent), without the UAC knowing it. And, due to the forking rules, the
>> final response which is sent to the UAC may not even be the same  
>> which
>> was sent by the UAS, if a final response from another UAS is chosen  
>> as
>> the "best".
>>
>> Second, we need to remember that this only affects early- 
>> dialogusages.
>>
>> If needed, I guess we could include the final response which  
>> triggered
>> the 199, but we could also simply say that if the UAC does not know  
>> to
>> which dialogusage (if there are many) the 199 applies, it should not
> do
>> anything which may affect other usages for the same early dialog.
>
> The establishment of multiple early dialog usages is a pretty strange
> thing. Do we know of any use cases for this? (E.g. an in-dialog  
> REFER on
>
> an early INVITE. Is that legal?)
>
> Assuming it can arise, then I agree it is reasonable to treat the  
> 199 as
>
> affecting only its dialog usage unless there is info with it (such as
> the actual final response code) that gives evidence that the whole
> dialog is gone.
>
> 	Thanks,
> 	Paul
>
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug 16 22:49:39 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A75303A6B90;
	Sat, 16 Aug 2008 22:49:39 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C183F3A6B90
	for <sip@core3.amsl.com>; Sat, 16 Aug 2008 22:49:37 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id P+jdwr-lVOp6 for <sip@core3.amsl.com>;
	Sat, 16 Aug 2008 22:49:36 -0700 (PDT)
Received: from ind-iport-1.cisco.com (ind-iport-1.cisco.com [64.104.129.195])
	by core3.amsl.com (Postfix) with ESMTP id E239F3A695F
	for <sip@ietf.org>; Sat, 16 Aug 2008 22:49:35 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,223,1217808000"; d="scan'208";a="25934348"
Received: from hkg-dkim-1.cisco.com ([10.75.231.161])
	by ind-iport-1.cisco.com with ESMTP; 17 Aug 2008 05:49:37 +0000
Received: from hkg-core-1.cisco.com (hkg-core-1.cisco.com [64.104.123.94])
	by hkg-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m7H5nbFI002376
	for <sip@ietf.org>; Sun, 17 Aug 2008 13:49:37 +0800
Received: from xbh-hkg-411.apac.cisco.com (xbh-hkg-411.cisco.com
	[64.104.123.72])
	by hkg-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7H5nbmM020974
	for <sip@ietf.org>; Sun, 17 Aug 2008 05:49:37 GMT
Received: from xmb-hkg-412.apac.cisco.com ([64.104.123.84]) by
	xbh-hkg-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 17 Aug 2008 13:49:36 +0800
X-Mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sun, 17 Aug 2008 13:50:13 +0800
Message-ID: <F86B91A10B14744E88408E80B8A30EF303673D93@xmb-hkg-412.apac.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip-implementors] Can proxy forward a req to a local
	determinedstrict-router?
Thread-Index: Acj/uOM/fPSTu6iPQ0Wc+DvOnq0ndwAdC78g
From: "Rockson Li (zhengyli)" <zhengyli@cisco.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 17 Aug 2008 05:49:36.0905 (UTC)
	FILETIME=[08452F90:01C9002D]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2075; t=1218952177;
	x=1219816177; c=relaxed/simple; s=hkgdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=zhengyli@cisco.com;
	z=From:=20=22Rockson=20Li=20(zhengyli)=22=20<zhengyli@cisco.
	com>
	|Subject:=20FW=3A=20[Sip-implementors]=20Can=20proxy=20forw
	ard=20a=20req=20to=20a=20local=20determinedstrict-router?
	|Sender:=20; bh=oWfEf6ISF2thAgayT224ZpDFKiSQvrRmqXe698I29nE=;
	b=I5SpgRGjMyxTk4DpCzZebdkxRkN7aMlPpV2u8z5OuGJuS4EGmrOSh3Uhhs
	HVN7OqDkVpTRkJuyEnpoOWl5ppbYrfmmNX6sXHNz5JXaWUOTd3HxeBUBQ4CE
	iCxviuD1mEIzfI2w5UIENePIXSWsJFZ2mxPOSqzbagQfnJda3DCdE=;
Authentication-Results: hkg-dkim-1; header.From=zhengyli@cisco.com; dkim=pass (
	sig from cisco.com/hkgdkim1002 verified; ); 
Subject: [Sip] FW: [Sip-implementors] Can proxy forward a req to a local
	determinedstrict-router?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Try this list for more comments,thanks 

-----Original Message-----
From: sip-implementors-bounces@lists.cs.columbia.edu
[mailto:sip-implementors-bounces@lists.cs.columbia.edu] On Behalf Of
Rockson Li (zhengyli)
Sent: Saturday, August 16, 2008 11:58 PM
To: sip-implementors@lists.cs.columbia.edu
Subject: [Sip-implementors] Can proxy forward a req to a local
determinedstrict-router?

Hi folks,
 
RFC3261
sec 16.6 Request Forwarding
 
6. Postprocess routing information
 
         If the proxy has a local policy that mandates that the request
         visit one specific proxy, an alternative to pushing a Route
         value into the Route header field is to bypass the forwarding
         logic of item 10 below, and instead just send the request to
         the address, port, and transport for that specific proxy.  If
         the request has a Route header field, this alternative MUST NOT
         be used unless it is known that next hop proxy is a loose
         router.  Otherwise, this approach MAY be used, 
 
so I think this means if the request contains no Router header, this
request might  be forwarded to a next element - either a strict-router
or
loose-router- directly without
adding Route header.
 
However, the next sub section 
 
    7. Determine Next-Hop Address, Port, and Transport
 
         The proxy MAY have a local policy to send the request to a
         specific IP address, port, and transport, independent of the
         values of the Route and Request-URI.  Such a policy MUST NOT be
         used if the proxy is not certain that the IP address, port, and
         transport correspond to a server that is a loose router.
 
It totally forbids this forwarding-to-strict-router, ONLY loose router
is allowed.
 
Why there's such a difference?
 
thanks
 
Regards,
-Rockson
_______________________________________________
Sip-implementors mailing list
Sip-implementors@lists.cs.columbia.edu
https://lists.cs.columbia.edu/cucslists/listinfo/sip-implementors
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 17 06:22:08 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8672D3A695A;
	Sun, 17 Aug 2008 06:22:08 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 29CD23A68B0
	for <sip@core3.amsl.com>; Sun, 17 Aug 2008 06:22:08 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[AWL=-0.001, BAYES_00=-2.599, HTML_MESSAGE=0.001,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XCJhaHuqulyu for <sip@core3.amsl.com>;
	Sun, 17 Aug 2008 06:22:06 -0700 (PDT)
Received: from ind-iport-1.cisco.com (ind-iport-1.cisco.com [64.104.129.195])
	by core3.amsl.com (Postfix) with ESMTP id 04A103A695A
	for <sip@ietf.org>; Sun, 17 Aug 2008 06:22:05 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,223,1217808000"; d="scan'208,217";a="25942746"
Received: from hkg-dkim-1.cisco.com ([10.75.231.161])
	by ind-iport-1.cisco.com with ESMTP; 17 Aug 2008 13:22:07 +0000
Received: from hkg-core-1.cisco.com (hkg-core-1.cisco.com [64.104.123.94])
	by hkg-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m7HDM71I024503
	for <sip@ietf.org>; Sun, 17 Aug 2008 21:22:07 +0800
Received: from xbh-hkg-412.apac.cisco.com (xbh-hkg-412.cisco.com
	[64.104.123.69])
	by hkg-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7HDM74H007594
	for <sip@ietf.org>; Sun, 17 Aug 2008 13:22:07 GMT
Received: from xmb-hkg-412.apac.cisco.com ([64.104.123.84]) by
	xbh-hkg-412.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 17 Aug 2008 21:22:06 +0800
X-Mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sun, 17 Aug 2008 21:22:42 +0800
Message-ID: <F86B91A10B14744E88408E80B8A30EF303673DCB@xmb-hkg-412.apac.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: draft-ietf-sip-fork-loop-fix-07: is the second part of branch of
	present when req forked?
Thread-Index: AckAbFPxKje4Gi1ySjCBjKXShzlrvA==
From: "Rockson Li (zhengyli)" <zhengyli@cisco.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 17 Aug 2008 13:22:06.0795 (UTC)
	FILETIME=[3EDDA1B0:01C9006C]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2762; t=1218979327;
	x=1219843327; c=relaxed/simple; s=hkgdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=zhengyli@cisco.com;
	z=From:=20=22Rockson=20Li=20(zhengyli)=22=20<zhengyli@cisco.
	com>
	|Subject:=20draft-ietf-sip-fork-loop-fix-07=3A=20is=20the=2
	0second=20part=20of=20branch=20of=20present=20when=20req=20f
	orked? |Sender:=20;
	bh=nQVErqllgRBjh8GZIuK4sOIblAXzTeOOxnwcfAwZVdQ=;
	b=Z3vpjH5+xwbwqbDYxeHGads88A2f5l35jWCWkoqDoZmFG9UY/xLojL3Zo+
	+5ewfCvw6OYqdjqlE75rqK9xEwjaM77HfFxgAHKcCmGXmhKdkr3MIHktzRku
	p46b3K303v8womDiS+Re5P6DzuF7d3bOqytzUarSaZqqHSJjxsc/c=;
Authentication-Results: hkg-dkim-1; header.From=zhengyli@cisco.com; dkim=pass (
	sig from cisco.com/hkgdkim1002 verified; ); 
Subject: [Sip] draft-ietf-sip-fork-loop-fix-07: is the second part of branch
	of present when req forked?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1648086463=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1648086463==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9006C.3ED76BFF"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C9006C.3ED76BFF
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi folks,
=20
One question on draft-ietf-sip-fork-loop-fix-07,
=20
sec 4.2.2
=20
This second part
   will not be present if the message was not forked when that Via
   header field value was added.
=20
I am not sure why?
from sec 4.2.1, I  do NOT see there's any constraints that the second
party would be added only when the msg is forked.
=20
thanks
=20
Regards,
-Rockson

------_=_NextPart_001_01C9006C.3ED76BFF
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.6000.16674" name=3DGENERATOR></HEAD>
<BODY>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>Hi=20
folks,</FONT></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>One =
question on=20
draft-ietf-sip-fork-loop-fix-07,</FONT></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>sec=20
4.2.2</FONT></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>This =
second=20
part<BR>&nbsp;&nbsp; will not be present if the message was not forked =
when that=20
Via<BR>&nbsp;&nbsp; header field value was added.</FONT></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>I am =
not sure=20
why?</FONT></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>from =
sec 4.2.1,=20
I&nbsp; do NOT see there's any constraints that&nbsp;the second party =
would be=20
added only when the msg is forked.</FONT></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2>thanks</FONT></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2>Regards,</FONT></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2>-Rockson</FONT></SPAN></DIV></BODY></HTML>

------_=_NextPart_001_01C9006C.3ED76BFF--

--===============1648086463==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1648086463==--


From sip-bounces@ietf.org  Mon Aug 18 07:48:50 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6B30828C190;
	Mon, 18 Aug 2008 07:48:50 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F03C228C193
	for <sip@core3.amsl.com>; Mon, 18 Aug 2008 07:48:48 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.249
X-Spam-Level: 
X-Spam-Status: No, score=-6.249 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Z3MzHKZHWIA5 for <sip@core3.amsl.com>;
	Mon, 18 Aug 2008 07:48:44 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 2AA7E28C190
	for <sip@ietf.org>; Mon, 18 Aug 2008 07:48:44 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	9A31920559; Mon, 18 Aug 2008 16:48:49 +0200 (CEST)
X-AuditID: c1b4fb3e-a9e87bb000007a96-45-48a98bd1c97e
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	6E6E1201BE; Mon, 18 Aug 2008 16:48:49 +0200 (CEST)
Received: from esealmw118.eemea.ericsson.se ([153.88.200.77]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Aug 2008 16:48:49 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 18 Aug 2008 16:50:02 +0200
Message-ID: <C0E80510684FE94DBDE3A4AF6B968D2D03EA8E9F@esealmw118.eemea.ericsson.se>
In-Reply-To: <13E45811-DE1F-4AE3-BE2D-625F0DBA6DBA@nostrum.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-199-00.txt
Thread-Index: Acj/HILh3BLGeCRvSNa/PZ41ghJOoQCImdaw
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>
	<489861C9.2020507@cisco.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>
	<13E45811-DE1F-4AE3-BE2D-625F0DBA6DBA@nostrum.com>
From: "Ian Elz" <ian.elz@ericsson.com>
To: "Robert Sparks" <rjsparks@nostrum.com>
X-OriginalArrivalTime: 18 Aug 2008 14:48:49.0290 (UTC)
	FILETIME=[86351EA0:01C90141]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Robert,

The work relating to multiple dialog usages may in time remove the
requirement to have multiple usages on the same dialog. Due to the
issues relating to B2BUAs which were briefly discussed in
draft-marjou-sipping-b2bua-01 and the mapping of the dialog reference
headers (Replaces, Target-dialog, Join and In-Reply-To) through B2BUAs I
don't believe that we can totally remove multiple dialog usages until
this handling is resolved.

The rejection of the sipping wg of this draft from forming part of the
charter will result in the deployment of solutions using multiple dialog
usages as use of an existing dialog will be the only way to ensure
routing of requests where reference to an existing dialog is required,
e.g. your example of subscribing to the dialog event package.

The current problem is that the existing sip specification does not take
account of multiple dialog usages and there are deployments which cannot
successfully handle this case. To change the sip model to account for
multiple usages is not in itself difficult but to make it backward
compatible with existing implementation is the major challenge.

As my major focus is IMS the use of B2BUA is pretty much a given. The
issue with routing when the dialog reference headers are used needs to
be resolved before it is possible to send requests on new dialog. In the
current situation there is no option except to use multiple dialogs with
all the issues that these create.

Ian Elz

System Manager
DUCI LDC UK
(Lucid Duck)

Office: + 44 24 764 35256
gsm: +44 7801723668
ian.elz@ericsson.com

-----Original Message-----
From: Robert Sparks [mailto:rjsparks@nostrum.com] 
Sent: 15 August 2008 22:19
To: Ian Elz
Cc: Paul Kyzivat; Christer Holmberg; SIP IETF
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt

It's my hope that the work related to avoiding multiple usages will  
make this
an entirely academic discussion. On the chance that turns out to be  
untrue, however,
the one place I can see this coming up more quickly than elsewhere is  
if a UAC
decides it wants to subscribe to the dialog event package at each UAS  
that
provisionally responds to its INVITE and decides to reuse the dialog  
identifiers
that provisional response established.

RjS

On Aug 6, 2008, at 6:09 AM, Ian Elz wrote:

> Paul,
>
> I don't believe that you can create 'multiple early dialog usages'.
>
> On an INVITE transaction can create an early dialog. The other dialog
> creating transactions REFER and SUBSCRIBE, can only create established
> dialogs.
>
> As you cannot start a second INVITE transaction while there is an
> outstanding INVITE transaction on a dialog, early or otherwise.
>
> If you send a REFER or SUBSCRIBE method on an early dialog and you get
> an acceptance response then you have an established dialog.
>
> If this is the early-dialog from an INVITE transaction then key  
> question
> is what is the validity of a provisional response in creating a  
> dialog.
> Is it early or established. While the provisional response is clearly
> just that from a transaction perspective in this situation the meaning
> of the proposed 199 provisional response is now transaction affecting
> and not dialog affecting, i.e. the INVITE usage will not become
> established although the other usage may be established.
>
> The existing state models in sip only discuss dialogs and transactions
> and have not considered the dialog usage. When you send a reliable
> provisional response to an INVITE you are in effect creating an
> early-dialog usage. If this is the only dialog usage on the dialog you
> have also created an early-dialog. If there is another usage on the  
> same
> dialog then the dialog state will depend upon the state of the other
> dialog.
>
> RFC5057, Multiple Dialog Usage (informational) does not discuss the
> details involved in multiple usages and the impact on the sip state
> models but I hope that this was a consideration when the initial  
> drafts
> were prepared.
>
> I am unsure if the concept of multiple usages on an early dialog was
> ever considered when RFC5057 was in draft stage. The nuances of  
> multiple
> dialogs on an established dialog appears to have been enough to  
> suggest
> that the RFC specifically not recommend multiple usages without  
> getting
> into the 'dark area' of early dialogs and multiple usages.
>
> Whether it make sense to use a REFER or SUBSCRIBE inside an early  
> dialog
> is problematic. I am unsure whether these do make any sense. Would you
> want to subscribe to specific event which occurs during the early  
> dialog
> phase of an INVITE transaction? Would you want to use REFER to  
> perform a
> transfer of a ringing call and does the protocol actually support  
> this?
>
> If the answer to these questions is a definitive 'NO' then the issue
> will have resolves itself. I fear however that there is no definitive
> answer at this time.
>
> Ian Elz
>
> System Manager
> DUCI LDC UK
> (Lucid Duck)
>
> Office: + 44 24 764 35256
> gsm: +44 7801723668
> ian.elz@ericsson.com
>
>
> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]
> Sent: 05 August 2008 15:21
> To: Christer Holmberg
> Cc: SIP IETF
> Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
>
>
>
> Christer Holmberg wrote:
>> Hi,
>>
>>>> 7) Section 7: "A UAC that receives a 199 response for an early
> dialog
>> MUST NOT
>>>> send any further requests on that dialog...". Can you point to any
>> list discussion
>>>> around this requirement? I think there's some danger to consider
>> there. At the
>>>> very least we need to make this statement multiple-usage safe.
>>> This is a very good catch. This needs to be aligned with  
>>> dialogusage.
>> If the 199 contained the final response that triggered it, then that
>> final response could be used to determine the impact
>>> on the dialog or dialog usage or just the transaction. But if the  
>>> 199
>> doesn't contain the final response, then this is a problem.
>>
>> I forgot to bring this issue up in Dublin. Sorry for that.
>>
>> First, we need to remember that the UAS may terminate every
> dialogusage
>> when sending the final response (depending on what final response is
>> sent), without the UAC knowing it. And, due to the forking rules, the
>> final response which is sent to the UAC may not even be the same  
>> which
>> was sent by the UAS, if a final response from another UAS is chosen  
>> as
>> the "best".
>>
>> Second, we need to remember that this only affects early- 
>> dialogusages.
>>
>> If needed, I guess we could include the final response which  
>> triggered
>> the 199, but we could also simply say that if the UAC does not know  
>> to
>> which dialogusage (if there are many) the 199 applies, it should not
> do
>> anything which may affect other usages for the same early dialog.
>
> The establishment of multiple early dialog usages is a pretty strange
> thing. Do we know of any use cases for this? (E.g. an in-dialog  
> REFER on
>
> an early INVITE. Is that legal?)
>
> Assuming it can arise, then I agree it is reasonable to treat the  
> 199 as
>
> affecting only its dialog usage unless there is info with it (such as
> the actual final response code) that gives evidence that the whole
> dialog is gone.
>
> 	Thanks,
> 	Paul
>
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 18 08:03:35 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A7CEB3A6A72;
	Mon, 18 Aug 2008 08:03:35 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AF43E3A6AD1
	for <sip@core3.amsl.com>; Mon, 18 Aug 2008 08:03:34 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.569
X-Spam-Level: 
X-Spam-Status: No, score=-6.569 tagged_above=-999 required=5 tests=[AWL=0.030, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2DZxCpZB10C3 for <sip@core3.amsl.com>;
	Mon, 18 Aug 2008 08:03:30 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 6A8D53A6A72
	for <sip@ietf.org>; Mon, 18 Aug 2008 08:03:30 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,228,1217808000"; d="scan'208";a="17847519"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 18 Aug 2008 15:01:05 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7IF14QK013134; 
	Mon, 18 Aug 2008 11:01:04 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m7IF145a009069;
	Mon, 18 Aug 2008 15:01:04 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Aug 2008 11:01:04 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Aug 2008 11:01:03 -0400
Message-ID: <48A98EEA.8010200@cisco.com>
Date: Mon, 18 Aug 2008 11:02:02 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Ian Elz <ian.elz@ericsson.com>
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>	<489861C9.2020507@cisco.com>	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>	<13E45811-DE1F-4AE3-BE2D-625F0DBA6DBA@nostrum.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03EA8E9F@esealmw118.eemea.ericsson.se>
In-Reply-To: <C0E80510684FE94DBDE3A4AF6B968D2D03EA8E9F@esealmw118.eemea.ericsson.se>
X-OriginalArrivalTime: 18 Aug 2008 15:01:03.0899 (UTC)
	FILETIME=[3C118EB0:01C90143]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=712; t=1219071664; x=1219935664;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Comments=20on=20draft-ietf-sip-
	199-00.txt |Sender:=20
	|To:=20Ian=20Elz=20<ian.elz@ericsson.com>;
	bh=CM04eZ0G+QhiK7ysQ+m481YzGXzv9G9uetTcI0wXs9w=;
	b=y4w0s9yRAZxV7KPAJL9H8OVh/Fyon38phkEqLRHuncuAs3DYvrjUcJSncr
	bXGaUoC8g4IKqG2W52I8PDDSllgVv5c1klSy6+yzUZ1a5wSiwMMjkmcdvhhH
	7jVPJUFAD0;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <sip@ietf.org>, Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Ian Elz wrote:

> As my major focus is IMS the use of B2BUA is pretty much a given. The
> issue with routing when the dialog reference headers are used needs to
> be resolved before it is possible to send requests on new dialog. In the
> current situation there is no option except to use multiple dialogs with
> all the issues that these create.

Ian,

I think much of the responsibility here belongs with IMS rather than 
IETF. The B2BUAs specified by IMS *could* manage contacts so as to 
preserve the gruu property. I have helped write language for IMS that 
does so. I don't know whether that was adopted or not. But if not, then 
the ball is clearly in the IMS court.

	Thanks,
	Paul
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 18 08:53:42 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id EC6043A6A61;
	Mon, 18 Aug 2008 08:53:41 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 60DA83A6D8B
	for <sip@core3.amsl.com>; Mon, 11 Aug 2008 20:38:34 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.996
X-Spam-Level: 
X-Spam-Status: No, score=0.996 tagged_above=-999 required=5
	tests=[BAYES_50=0.001, HTML_MESSAGE=0.001, RELAY_IS_203=0.994]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UMjEMpAZM03F for <sip@core3.amsl.com>;
	Mon, 11 Aug 2008 20:38:33 -0700 (PDT)
Received: from web94201.mail.in2.yahoo.com (web94201.mail.in2.yahoo.com
	[203.104.16.196])
	by core3.amsl.com (Postfix) with SMTP id 483A53A6AF3
	for <sip@ietf.org>; Mon, 11 Aug 2008 20:38:33 -0700 (PDT)
Received: (qmail 55650 invoked by uid 60001); 12 Aug 2008 03:38:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.co.in;
	h=Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
	b=NKMXQmU76jnt+JgpeRw0gX+e2ZmwZqAOUukx+x9V+NcxZSlNeFuyKwz2QElSaQyQkxW5BUkBnmuMRp3ir1hDfPwhLjS/PJ7mlFg+qiJdspzSjoSlg62mYeaEHH+ogGn5dmnLNQf+B4t/U61fo3l/htSl1MraONHp3E8RHvQ/YPQ=;
Received: from [59.165.248.50] by web94201.mail.in2.yahoo.com via HTTP;
	Tue, 12 Aug 2008 09:08:34 IST
X-Mailer: YahooMailWebService/0.7.218
Date: Tue, 12 Aug 2008 09:08:34 +0530 (IST)
From: George AK <george_mana@yahoo.co.in>
To: sip-implementors@lists.cs.columbia.edu, sip@ietf.org
In-Reply-To: <F86B91A10B14744E88408E80B8A30EF303612ED0@xmb-hkg-412.apac.cisco.com>
MIME-Version: 1.0
Message-ID: <830759.55362.qm@web94201.mail.in2.yahoo.com>
X-Mailman-Approved-At: Mon, 18 Aug 2008 08:53:40 -0700
Subject: [Sip] Content length
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
Reply-To: george_mana@yahoo.co.in
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1327441547=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

--===============1327441547==
Content-Type: multipart/alternative; boundary="0-827140267-1218512314=:55362"

--0-827140267-1218512314=:55362
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

=C2=A0
Why it is mandated that if we use the transport as TCP, the Content-Length =
header MUST be used?
=C2=A0
rgds,
George=0A=0A=0A      Did you know? You can CHAT without downloading messeng=
er. Go to http://in.webmessenger.yahoo.com/
--0-827140267-1218512314=:55362
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<table cellspacing=3D"0" cellpadding=3D"0" border=3D"0" ><tr><td valign=3D"=
top" style=3D"font: inherit;"><DIV>&nbsp;</DIV>
<DIV>Why it is mandated that if we use the transport as TCP, the Content-Le=
ngth header MUST be used?</DIV>
<DIV>&nbsp;</DIV>
<DIV>rgds,</DIV>
<DIV>George</DIV></td></tr></table><br>=0A=0A=0A      <!--6--><hr size=3D1>=
</hr> Add more friends to your messenger and enjoy! <a href=3D"http://in.rd=
.yahoo.com/tagline_messenger_6/*http://in.messenger.yahoo.com/invite/"> Inv=
ite them now.</a>
--0-827140267-1218512314=:55362--

--===============1327441547==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1327441547==--


From sip-bounces@ietf.org  Mon Aug 18 08:53:49 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id DF8913A6D14;
	Mon, 18 Aug 2008 08:53:49 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C4E073A68C7
	for <sip@core3.amsl.com>; Wed, 13 Aug 2008 07:06:47 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 4.407
X-Spam-Level: ****
X-Spam-Status: No, score=4.407 tagged_above=-999 required=5
	tests=[BAYES_50=0.001, HELO_EQ_PL=1.135, HOST_EQ_PL=1.95,
	HTML_MESSAGE=0.001, LOCALPART_IN_SUBJECT=2.02, MIME_8BIT_HEADER=0.3,
	RCVD_IN_DNSWL_LOW=-1]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id o-nVoMAGK0TI for <sip@core3.amsl.com>;
	Wed, 13 Aug 2008 07:06:46 -0700 (PDT)
Received: from plusmx1.polkomtel.com.pl (plusmx1.polkomtel.com.pl
	[212.2.96.51]) by core3.amsl.com (Postfix) with ESMTP id 43C503A69FD
	for <sip@ietf.org>; Wed, 13 Aug 2008 07:06:42 -0700 (PDT)
Received: from mswwaw3.corp.plusnet (plus-96-163.polkomtel.com.pl
	[212.2.96.163])
	by plusmx1.polkomtel.com.pl (Postfix) with ESMTP id 09C4933A69B
	for <sip@ietf.org>; Wed, 13 Aug 2008 16:06:01 +0200 (CEST)
Received: from E2K2.corp.plusnet (MCSGEO2N4B.corp.plusnet) by
	mswwaw3.corp.plusnet
	(Content Technologies SMTPRS 4.3.20) with ESMTP id
	<T88c938d5120a0b4d0e9b8@mswwaw3.corp.plusnet>; 
	Wed, 13 Aug 2008 16:04:57 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 13 Aug 2008 16:03:54 +0200
Message-ID: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: draft-ietf-sip-location-conveyance - Question about potential
	usage of the Geolocation header
Thread-Index: Acj9TWvzdojVJbMCQoKKMyiekh68ng==
From: =?iso-8859-2?Q?Bart=B3omiej_Ko=B3akowski?= <b.kolakowski@plus.pl>
To: <draft-ietf-sip-location-conveyance@tools.ietf.org>,
	<sip@ietf.org>
X-Mailman-Approved-At: Mon, 18 Aug 2008 08:53:48 -0700
Subject: [Sip] draft-ietf-sip-location-conveyance - Question about potential
	usage of the Geolocation header
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0500604105=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0500604105==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8FD4D.6BFA8ADB"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C8FD4D.6BFA8ADB
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable

Hello,

I have got such concern regarding location conveyance in SIP messages: I =
am designing IMS Appilcation Server, acting as a proxy, that would query =
network elements for location information. As you wrote proxies cannot =
insert message body, so the only way is to provide location by =
reference. This requires appling SUBSCRIBE-NOTIFY mechanism, which makes =
the architecture of the solution quit complex.

In order to make it simpler I thought about including location =
information as locationValue inside the Geolocation header. In fact we =
do not need location represented with coordinates, but with cell-id =
(that's mobile network). PIDF-LO does not support it, but maybe inside a =
header that would be possible? There would be also an issue in =
indicating loaction target whose location is included (we plan to =
include both A and B parties location). Geolocation header would look =
like this:

Geolocation: {cell-id-3gpp} =
;location-target=3D"bob@plus.pl";inserted-by=3D"las@plus.pl"

What do you think about souch a usage of Geolocation header, maybe you =
could give us some other solution?

Thank you in advance,

Bart=B3omiej Ko=B3akowski
Service Solutions Architect
Service Development Support Department
Polkomtel S.A
tel. 601131509


------_=_NextPart_001_01C8FD4D.6BFA8ADB
Content-Type: text/html;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-2">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7638.1">
<TITLE>draft-ietf-sip-location-conveyance - Question about potential =
usage of the Geolocation header</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial CE">Hello,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial CE">I have got such concern regarding =
location conveyance in SIP messages: I am designing IMS Appilcation =
Server, acting as a proxy, that would query network elements for =
location information. As you wrote proxies cannot insert message body, =
so the only way is to provide location by reference. This requires =
appling SUBSCRIBE-NOTIFY mechanism, which makes the architecture of the =
solution quit complex.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial CE">In order to make it simpler I =
thought about including location information as locationValue inside the =
Geolocation header. In fact we do not need location represented with =
coordinates, but with cell-id (that's mobile network). PIDF-LO does not =
support it, but maybe inside a header that would be possible? There =
would be also an issue in indicating loaction target whose location is =
included (we plan to include both A and B parties location). Geolocation =
header would look like this:</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial CE">Geolocation: {cell-id-3gpp} =
;location-target=3D&quot;bob@plus.pl&quot;;inserted-by=3D&quot;las@plus.p=
l&quot;</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial CE">What do you think about souch a =
usage of Geolocation header, maybe you could give us some other =
solution?</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial CE">Thank you in advance,</FONT>
</P>

<P><B><FONT COLOR=3D"#808080" SIZE=3D1 FACE=3D"Tahoma">Bart=B3omiej =
Ko=B3akowski</FONT></B>

<BR><FONT COLOR=3D"#808080" SIZE=3D1 FACE=3D"Tahoma">Service Solutions =
Architect</FONT>

<BR><FONT COLOR=3D"#808080" SIZE=3D1 FACE=3D"Tahoma">Service Development =
Support Department</FONT>

<BR><FONT COLOR=3D"#808080" SIZE=3D1 FACE=3D"Tahoma">Polkomtel =
S.A</FONT>

<BR><FONT COLOR=3D"#808080" SIZE=3D1 FACE=3D"Tahoma">tel. =
601131509</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C8FD4D.6BFA8ADB--

--===============0500604105==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0500604105==--


From sip-bounces@ietf.org  Mon Aug 18 08:53:56 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B583028C172;
	Mon, 18 Aug 2008 08:53:56 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5D8443A6CD2
	for <sip@core3.amsl.com>; Mon, 11 Aug 2008 21:14:34 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.95
X-Spam-Level: 
X-Spam-Status: No, score=0.95 tagged_above=-999 required=5 tests=[AWL=-0.046, 
	BAYES_50=0.001, HTML_MESSAGE=0.001, RELAY_IS_203=0.994]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id QhoKpzhUWJMj for <sip@core3.amsl.com>;
	Mon, 11 Aug 2008 21:14:33 -0700 (PDT)
Received: from web94206.mail.in2.yahoo.com (web94206.mail.in2.yahoo.com
	[203.104.16.201])
	by core3.amsl.com (Postfix) with SMTP id 3B5D63A6BA6
	for <sip@ietf.org>; Mon, 11 Aug 2008 21:14:32 -0700 (PDT)
Received: (qmail 7005 invoked by uid 60001); 12 Aug 2008 04:14:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.co.in;
	h=Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
	b=qD4D1VplWr0hzTrWHfTmxJ559BshYtFwKwPyh3gm1LCMMg/Tx2mYgYOMqCqFiRPiv/Kibkpz31EGYEgGleJIU7g9R+AdNbQ5cU/UJNUpFuoXdMhbdLIQ1D7+BIrQimqPdoBmR45R2LM2WwABq9BTFgTf6uYWNfo0fevVqN3f4YE=;
Received: from [59.165.248.50] by web94206.mail.in2.yahoo.com via HTTP;
	Tue, 12 Aug 2008 09:44:35 IST
X-Mailer: YahooMailWebService/0.7.218
Date: Tue, 12 Aug 2008 09:44:35 +0530 (IST)
From: George AK <george_mana@yahoo.co.in>
To: sip-implementors@lists.cs.columbia.edu, sip@ietf.org
MIME-Version: 1.0
Message-ID: <100682.6835.qm@web94206.mail.in2.yahoo.com>
X-Mailman-Approved-At: Mon, 18 Aug 2008 08:53:55 -0700
Subject: [Sip] Next SIP Version
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
Reply-To: george_mana@yahoo.co.in
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1202249369=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

--===============1202249369==
Content-Type: multipart/alternative; boundary="0-848592209-1218514475=:6835"

--0-848592209-1218514475=:6835
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi,
=C2=A0
Is there any works going on to comeup with next version of SIP? That is SIP=
 3.0
Where are we planning to address collectively the most important aspects/is=
sues like Offer-answer, NAT traversal, non-INVITE Timer issues, security re=
commendations=C2=A0etc?
=C2=A0
rgds,
George=0A=0A=0A      Download prohibited? No problem. CHAT from any browser=
, without download. Go to http://in.webmessenger.yahoo.com/
--0-848592209-1218514475=:6835
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<table cellspacing=3D"0" cellpadding=3D"0" border=3D"0" ><tr><td valign=3D"=
top" style=3D"font: inherit;"><DIV>Hi,</DIV>
<DIV>&nbsp;</DIV>
<DIV>Is there any works going on to comeup with next version of SIP? That i=
s SIP 3.0</DIV>
<DIV>Where are we planning to address collectively the most important aspec=
ts/issues like Offer-answer, NAT traversal, non-INVITE Timer issues, securi=
ty recommendations&nbsp;etc?</DIV>
<DIV>&nbsp;</DIV>
<DIV>rgds,</DIV>
<DIV>George</DIV></td></tr></table><br>=0A=0A=0A=0A      <!--2--><hr size=
=3D1></hr> Unlimited freedom, unlimited storage. <a href=3D"http://in.rd.ya=
hoo.com/tagline_mail_2/*http://help.yahoo.com/l/in/yahoo/mail/yahoomail/too=
ls/tools-08.html/">Get it now</a>
--0-848592209-1218514475=:6835--

--===============1202249369==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1202249369==--


From sip-bounces@ietf.org  Mon Aug 18 08:53:57 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 7F23628C186;
	Mon, 18 Aug 2008 08:53:57 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AEFAB3A6843
	for <sip@core3.amsl.com>; Mon, 11 Aug 2008 21:56:34 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.996
X-Spam-Level: 
X-Spam-Status: No, score=0.996 tagged_above=-999 required=5
	tests=[BAYES_50=0.001, HTML_MESSAGE=0.001, RELAY_IS_203=0.994]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id elv4C6ZpHUxB for <sip@core3.amsl.com>;
	Mon, 11 Aug 2008 21:56:33 -0700 (PDT)
Received: from web94206.mail.in2.yahoo.com (web94206.mail.in2.yahoo.com
	[203.104.16.201])
	by core3.amsl.com (Postfix) with SMTP id 0848E3A67AA
	for <sip@ietf.org>; Mon, 11 Aug 2008 21:56:32 -0700 (PDT)
Received: (qmail 23138 invoked by uid 60001); 12 Aug 2008 04:55:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.co.in;
	h=Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
	b=tVHhTrvRF+S22gmSLYX5MN+l59LeIRZwKLp5w4FNj75yhzD+Y7eDm+JQRMvkjE3HQSMdIfSOtkg1BV9LlQwb7TfDDJFcnN1mCpbQ0gAzyrkK8jN9Hc3FCyTCEvtZajDFFDII7gZwIyxmo2112otaGvLT/ElDdSsNfEsgfYov6lg=;
Received: from [203.145.155.11] by web94206.mail.in2.yahoo.com via HTTP;
	Tue, 12 Aug 2008 10:25:36 IST
X-Mailer: YahooMailWebService/0.7.218
Date: Tue, 12 Aug 2008 10:25:36 +0530 (IST)
From: George AK <george_mana@yahoo.co.in>
To: sip-implementors@lists.cs.columbia.edu, sip@ietf.org
MIME-Version: 1.0
Message-ID: <25005.23009.qm@web94206.mail.in2.yahoo.com>
X-Mailman-Approved-At: Mon, 18 Aug 2008 08:53:55 -0700
Subject: [Sip] TCP retransmission
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
Reply-To: george_mana@yahoo.co.in
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0563190555=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

--===============0563190555==
Content-Type: multipart/alternative; boundary="0-1307850158-1218516936=:23009"

--0-1307850158-1218516936=:23009
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Is there any SIP message that is retransmitted when using TCP as transport?

-George-=0A=0A=0A      Unlimited freedom, unlimited storage. Get it now, on=
 http://help.yahoo.com/l/in/yahoo/mail/yahoomail/tools/tools-08.html/
--0-1307850158-1218516936=:23009
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<table cellspacing=3D"0" cellpadding=3D"0" border=3D"0" ><tr><td valign=3D"=
top" style=3D"font: inherit;">Is there any SIP message that is retransmitte=
d when using TCP as transport?<BR><BR><FONT face=3D"times new roman" color=
=3D#0000ff size=3D3><STRONG>-George-</STRONG></FONT></td></tr></table><br>=
=0A=0A=0A=0A      <!--2--><hr size=3D1></hr> Unlimited freedom, unlimited s=
torage. <a href=3D"http://in.rd.yahoo.com/tagline_mail_2/*http://help.yahoo=
.com/l/in/yahoo/mail/yahoomail/tools/tools-08.html/">Get it now</a>
--0-1307850158-1218516936=:23009--

--===============0563190555==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0563190555==--


From sip-bounces@ietf.org  Mon Aug 18 08:58:05 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6C9AC3A68FF;
	Mon, 18 Aug 2008 08:58:05 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 31B5028C187
	for <sip@core3.amsl.com>; Mon, 18 Aug 2008 08:58:04 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.249
X-Spam-Level: 
X-Spam-Status: No, score=-6.249 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id i2pH5W0QbZar for <sip@core3.amsl.com>;
	Mon, 18 Aug 2008 08:58:03 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id AA20A3A685F
	for <sip@ietf.org>; Mon, 18 Aug 2008 08:58:02 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	A4A3C213AE; Mon, 18 Aug 2008 17:57:32 +0200 (CEST)
X-AuditID: c1b4fb3e-aa688bb000007a96-d8-48a99beca743
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	7CD8E213A4; Mon, 18 Aug 2008 17:57:32 +0200 (CEST)
Received: from esealmw118.eemea.ericsson.se ([153.88.200.77]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Aug 2008 17:57:32 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 18 Aug 2008 17:58:46 +0200
Message-ID: <C0E80510684FE94DBDE3A4AF6B968D2D03EA8F7B@esealmw118.eemea.ericsson.se>
In-Reply-To: <48A98EEA.8010200@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Routing when B2BUA involved (was Comments on
	draft-ietf-sip-199-00.txt)
Thread-Index: AckBQ4IeTZhW4WtfQZCmy3+HDcUNkQAAeZyw
References: <88EAF47F-A9BE-4A8D-A849-41659EB90D12@nostrum.com><48862EFF.3000908@cisco.com><CA9998CD4A020D418654FCDEF4E707DF0750A4EC@esealmw113.eemea.ericsson.se>	<489861C9.2020507@cisco.com>	<C0E80510684FE94DBDE3A4AF6B968D2D03D87ED4@esealmw118.eemea.ericsson.se>	<13E45811-DE1F-4AE3-BE2D-625F0DBA6DBA@nostrum.com>
	<C0E80510684FE94DBDE3A4AF6B968D2D03EA8E9F@esealmw118.eemea.ericsson.se>
	<48A98EEA.8010200@cisco.com>
From: "Ian Elz" <ian.elz@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 18 Aug 2008 15:57:32.0079 (UTC)
	FILETIME=[1F94CBF0:01C9014B]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>, Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Routing when B2BUA involved (was Comments on
	draft-ietf-sip-199-00.txt)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Paul,

I have changes the subject as this is getting too far from 199.

There are issues in this area relating to how the request containing the
dialog reference header is routed.

If there are multiple B2BUA in the message path of the original dialog
then the new request which refers to this dialog must be routed to each
of these B2BUA in the correct order to ensure that the dialog identity
parameters can be correctly mapped.

To ensure that this routing is performed in the correct order then there
are two options:

1. have each B2BUA map the contact header and when a new request is
created use the received contact header used as the Request URI for the
new request. This results in an end-to-end gruu being meaningless as it
must be mapped out by each B2BUA

2. have the UA which creates the request or response includes itself in
the Record-Route header so that the route will specify the UAC/UAS of
the B2BUA. This would allow the contact to be not mapped by the B2BUA as
all routing would be from the Route header.

There are other issues involved with the IMS as the initial routing of
an initial or standalone request uses a preset route towards the P-CSCF
which will then invoke the S-CSCF which use the iFC to find the
appropriate Application Servers. It is only after this initial preset
routing has occurred can the routing to the B2BUAs which have mapped the
dialog identifying parameters from the original dialog. This effectively
rules out the second option above as there is no means of passing the
route set as defined buy the original dialog.

My examination of this area has concluded the following:

1. The Call-Id must be mapped by B2BUA as this is required to be unique
for each dialog (RFC 3261). If this is not mapped then the handling
element is not a B2BUA as currently defined in RFC 3261, a concatenation
of a UAC and UAS.

2. As the Call-Id must be mapped across the B2BUA there are separate
dialogs on each side of the B2BUA and when a dialog reference header is
used it must be mapped by the same B2BUAs as mapped the dialogs in the
original dialog and in the same order. If this mapping does not happen
correctly then the dialog will not be recognized.

3. The Contact header must be mapped by the B2BUA so that a request
which uses the dialog reference headers can be correctly routed to each
mapping B2BUA in turn to ensure that dialog identity in the dialog
reference header and the Contact are correctly mapped. 

4. The Request containing the dialog reference header must use the
Contact received in the reference dialog as the R-URI in the new dialog.

While the use of an end-to-end gruu may appear to be of benefit any
Requests using this as the R-URI and containing a target dialog header
will fail where the referenced identity was mapped by a B2BUA as the
mapped dialog identity will not be recognized at the far end. 

Even if the original dialog identity was also passed from end-to-end in
the original dialog and used in the subsequent dialog then from an IMS
perspective this may result in the new Request being passed completely
outside the scope of the IMS which may then bypass the whole IMS and its
security mechanisms. 

There may be ways to redefine the B2BUA in sip so that mapping of any of
the dialog identifying parameters, Call-Id, to and from tags, but this
may leave a large number of legacy B2BUA which will not comply to the
new definitions. 

I have just checked 3GPP TS24.229 v8.4.1 (latest version) and while it
specifies mapping of the Replaces header in the AS there is no
requirement to also map the Contact to the Contact received in the
dialog being replaced. There is no mention of Target-Dialog in the
specification at all so there is no way to remove multiple dialog
usages. Replaces and Join are listed in the Profiles but there is no
specific routing to indicate how initial requests using these headers
are routed to the AS so that the mapping can occur. While Join is
mentioned in the Profiles there is no requirement to map the Join
parameter across a routing B2BUA.

Ian Elz

System Manager
DUCI LDC UK
(Lucid Duck)

Office: + 44 24 764 35256
gsm: +44 7801723668
ian.elz@ericsson.com


-----Original Message-----
From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
Sent: 18 August 2008 16:02
To: Ian Elz
Cc: Robert Sparks; SIP IETF; Christer Holmberg
Subject: Re: [Sip] Comments on draft-ietf-sip-199-00.txt



Ian Elz wrote:

> As my major focus is IMS the use of B2BUA is pretty much a given. The
> issue with routing when the dialog reference headers are used needs to
> be resolved before it is possible to send requests on new dialog. In
the
> current situation there is no option except to use multiple dialogs
with
> all the issues that these create.

Ian,

I think much of the responsibility here belongs with IMS rather than 
IETF. The B2BUAs specified by IMS *could* manage contacts so as to 
preserve the gruu property. I have helped write language for IMS that 
does so. I don't know whether that was adopted or not. But if not, then 
the ball is clearly in the IMS court.

	Thanks,
	Paul
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 18 09:10:41 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B97883A6D28;
	Mon, 18 Aug 2008 09:10:41 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BD3DF3A6D23
	for <sip@core3.amsl.com>; Mon, 18 Aug 2008 09:10:40 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.099
X-Spam-Level: 
X-Spam-Status: No, score=-2.099 tagged_above=-999 required=5 tests=[AWL=0.500, 
	BAYES_00=-2.599, HTML_MESSAGE=0.001, SPF_PASS=-0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id CjST4EonLTiX for <sip@core3.amsl.com>;
	Mon, 18 Aug 2008 09:10:39 -0700 (PDT)
Received: from nostrum.com (nostrum-pt.tunnel.tserv2.fmt.ipv6.he.net
	[IPv6:2001:470:1f03:267::2])
	by core3.amsl.com (Postfix) with ESMTP id 6BB8D3A6A12
	for <sip@ietf.org>; Mon, 18 Aug 2008 09:10:39 -0700 (PDT)
Received: from [172.16.3.232] (vicuna-alt.estacado.net [75.53.54.121])
	(authenticated bits=0)
	by nostrum.com (8.14.2/8.14.1) with ESMTP id m7IGAcah001241
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO);
	Mon, 18 Aug 2008 11:10:38 -0500 (CDT)
	(envelope-from rjsparks@nostrum.com)
Message-Id: <83365698-9F81-444E-930A-CC8FE5686383@nostrum.com>
From: Robert Sparks <rjsparks@nostrum.com>
To: Rockson Li (zhengyli) <zhengyli@cisco.com>
In-Reply-To: <F86B91A10B14744E88408E80B8A30EF303673DCB@xmb-hkg-412.apac.cisco.com>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Mon, 18 Aug 2008 11:10:38 -0500
References: <F86B91A10B14744E88408E80B8A30EF303673DCB@xmb-hkg-412.apac.cisco.com>
X-Mailer: Apple Mail (2.926)
Received-SPF: pass (nostrum.com: 75.53.54.121 is authenticated by a trusted
	mechanism)
X-Virus-Scanned: ClamAV 0.93.3/8056/Mon Aug 18 09:33:41 2008 on
	shaman.nostrum.com
X-Virus-Status: Clean
Cc: sip@ietf.org
Subject: Re: [Sip] draft-ietf-sip-fork-loop-fix-07: is the second part of
	branch of present when req forked?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1592631342=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


--===============1592631342==
Content-Type: multipart/alternative; boundary=Apple-Mail-2-250469794


--Apple-Mail-2-250469794
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

What you are looking for is in this paragraph in 4.2.1:

    Proxies required to perform loop-detection by RFC XXXX (RFC-Editor:
    replace XXXX with the RFC number of this document) have an  
additional
    constraint on the value they place in the Via header field.  Such
    proxies SHOULD create a branch value separable into two parts in any
    implementation dependent way.  The first part MUST satisfy the
    constraints of Section 8.1.1.7.  The second part is used to perform
    loop detection and distinguish loops from spirals.



On Aug 17, 2008, at 8:22 AM, Rockson Li (zhengyli) wrote:

> Hi folks,
>
> One question on draft-ietf-sip-fork-loop-fix-07,
>
> sec 4.2.2
>
> This second part
>    will not be present if the message was not forked when that Via
>    header field value was added.
>
> I am not sure why?
> from sec 4.2.1, I  do NOT see there's any constraints that the  
> second party would be added only when the msg is forked.
>
> thanks
>
> Regards,
> -Rockson
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip


--Apple-Mail-2-250469794
Content-Type: text/html;
	charset=US-ASCII
Content-Transfer-Encoding: quoted-printable

<html><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space; ">What you are looking for is in =
this paragraph in 4.2.1:<div><br></div><div><div>&nbsp;&nbsp; Proxies =
required to perform loop-detection by RFC XXXX =
(RFC-Editor:</div><div>&nbsp;&nbsp; replace XXXX with the RFC number of =
this document) have an additional</div><div>&nbsp;&nbsp; constraint on =
the value they place in the Via header field. =
&nbsp;Such</div><div>&nbsp;&nbsp; proxies SHOULD create a branch value =
separable into two parts in any</div><div>&nbsp;&nbsp; implementation =
dependent way. &nbsp;The first part MUST satisfy =
the</div><div>&nbsp;&nbsp; constraints of Section 8.1.1.7. &nbsp;The =
second part is used to perform</div><div>&nbsp;&nbsp; loop detection and =
distinguish loops from =
spirals.</div><div><br></div><div><br></div><div><br></div><div><div>On =
Aug 17, 2008, at 8:22 AM, Rockson Li (zhengyli) wrote:</div><br =
class=3D"Apple-interchange-newline"><blockquote type=3D"cite"> <div> =
<div><span class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">Hi=
 folks,</font></span></div> <div><span class=3D"125191913-17082008"><font =
face=3D"Arial" size=3D"2"></font></span>&nbsp;</div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">One =
question on draft-ietf-sip-fork-loop-fix-07,</font></span></div> =
<div><span class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2"></font></span>&nbsp;</div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">sec =
4.2.2</font></span></div> <div><span class=3D"125191913-17082008"><font =
face=3D"Arial" size=3D"2"></font></span>&nbsp;</div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">This second =
part<br>&nbsp;&nbsp; will not be present if the message was not forked =
when that Via<br>&nbsp;&nbsp; header field value was =
added.</font></span></div> <div><span class=3D"125191913-17082008"><font =
face=3D"Arial" size=3D"2"></font></span>&nbsp;</div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">I am not =
sure why?</font></span></div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">from sec =
4.2.1, I&nbsp; do NOT see there's any constraints that&nbsp;the second =
party would be added only when the msg is forked.</font></span></div> =
<div><span class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2"></font></span>&nbsp;</div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2">thanks</font></span></div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2"></font></span>&nbsp;</div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2">Regards,</font></span></div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2">-Rockson</font></span></div></div> =
_______________________________________________<br>Sip mailing list =
&nbsp;<a =
href=3D"https://www.ietf.org/mailman/listinfo/sip">https://www.ietf.org/ma=
ilman/listinfo/sip</a><br>This list is for NEW development of the core =
SIP Protocol<br>Use <a =
href=3D"mailto:sip-implementors@cs.columbia.edu">sip-implementors@cs.colum=
bia.edu</a> for questions on current sip<br>Use <a =
href=3D"mailto:sipping@ietf.org">sipping@ietf.org</a> for new =
developments on the application of =
sip</blockquote></div><br></div></body></html>=

--Apple-Mail-2-250469794--

--===============1592631342==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1592631342==--


From sip-bounces@ietf.org  Mon Aug 18 10:00:12 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3187C3A6B3B;
	Mon, 18 Aug 2008 10:00:12 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AE8A43A6B3B
	for <sip@core3.amsl.com>; Mon, 18 Aug 2008 10:00:11 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.016
X-Spam-Level: 
X-Spam-Status: No, score=-2.016 tagged_above=-999 required=5 tests=[AWL=0.283, 
	BAYES_00=-2.599, MIME_8BIT_HEADER=0.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FVPmamzV97st for <sip@core3.amsl.com>;
	Mon, 18 Aug 2008 10:00:10 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id D412B3A695A
	for <sip@ietf.org>; Mon, 18 Aug 2008 10:00:10 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7IH0F4A031884
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Mon, 18 Aug 2008 12:00:16 -0500
Message-Id: <DCAC6416-D565-4DA3-8D81-CD43DEB3E32C@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: =?ISO-8859-2?Q?Bart=B3omiej_Ko=B3akowski?= <b.kolakowski@plus.pl>
In-Reply-To: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Mon, 18 Aug 2008 12:00:09 -0500
References: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
X-Mailer: Apple Mail (2.928.1)
Cc: sip@ietf.org, draft-ietf-sip-location-conveyance@tools.ietf.org
Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question about
	potential usage of the Geolocation header
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-2"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 13, 2008, at 9:03 AM, Bart=B3omiej Ko=B3akowski wrote:

> Hello,
>
> I have got such concern regarding location conveyance in SIP  =

> messages: I am designing IMS Appilcation Server, acting as a proxy,  =

> that would query network elements for location information. As you  =

> wrote proxies cannot insert message body, so the only way is to  =

> provide location by reference. This requires appling SUBSCRIBE- =

> NOTIFY mechanism, which makes the architecture of the solution quit  =

> complex.
>
> In order to make it simpler I thought about including location  =

> information as locationValue inside the Geolocation header. In fact  =

> we do not need location represented with coordinates, but with cell- =

> id (that's mobile network). PIDF-LO does not support it, but maybe  =

> inside a header that would be possible? There would be also an issue  =

> in indicating loaction target whose location is included (we plan to  =

> include both A and B parties location). Geolocation header would  =

> look like this:
>
> Geolocation: {cell-id-3gpp} ;location-target=3D"bob@plus.pl";inserted- =

> by=3D"las@plus.pl"
>
> What do you think about souch a usage of Geolocation header, maybe  =

> you could give us some other solution?
>

have you looked at RC 3455? This defines IMS headers for cell-ID based  =

location.

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 18 20:06:36 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A0D023A680D;
	Mon, 18 Aug 2008 20:06:36 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B0EF93A6A0D
	for <sip@core3.amsl.com>; Mon, 18 Aug 2008 20:06:35 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.598
X-Spam-Level: 
X-Spam-Status: No, score=-6.598 tagged_above=-999 required=5
	tests=[AWL=-0.000, BAYES_00=-2.599, HTML_MESSAGE=0.001,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id NaQX5fU9d7rb for <sip@core3.amsl.com>;
	Mon, 18 Aug 2008 20:06:34 -0700 (PDT)
Received: from ind-iport-1.cisco.com (ind-iport-1.cisco.com [64.104.129.195])
	by core3.amsl.com (Postfix) with ESMTP id 5BA8D3A6A00
	for <sip@ietf.org>; Mon, 18 Aug 2008 20:06:33 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,232,1217808000"; d="scan'208,217";a="26082771"
Received: from hkg-dkim-1.cisco.com ([10.75.231.161])
	by ind-iport-1.cisco.com with ESMTP; 19 Aug 2008 03:06:35 +0000
Received: from hkg-core-1.cisco.com (hkg-core-1.cisco.com [64.104.123.94])
	by hkg-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m7J36Y0x002638; 
	Tue, 19 Aug 2008 11:06:34 +0800
Received: from xbh-hkg-411.apac.cisco.com (xbh-hkg-411.cisco.com
	[64.104.123.72])
	by hkg-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7J36Y1E004232;
	Tue, 19 Aug 2008 03:06:34 GMT
Received: from xmb-hkg-412.apac.cisco.com ([64.104.123.84]) by
	xbh-hkg-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 19 Aug 2008 11:06:26 +0800
X-Mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 19 Aug 2008 11:07:03 +0800
Message-ID: <F86B91A10B14744E88408E80B8A30EF3036C8CE4@xmb-hkg-412.apac.cisco.com>
In-Reply-To: <83365698-9F81-444E-930A-CC8FE5686383@nostrum.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] draft-ietf-sip-fork-loop-fix-07: is the second part of
	branch of present when req forked?
Thread-Index: AckBTQM/uh/cPgiHS46FXiR4oB7cAAAWxDSw
References: <F86B91A10B14744E88408E80B8A30EF303673DCB@xmb-hkg-412.apac.cisco.com>
	<83365698-9F81-444E-930A-CC8FE5686383@nostrum.com>
From: "Rockson Li (zhengyli)" <zhengyli@cisco.com>
To: "Robert Sparks" <rjsparks@nostrum.com>
X-OriginalArrivalTime: 19 Aug 2008 03:06:26.0390 (UTC)
	FILETIME=[917EA760:01C901A8]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=8880; t=1219115195;
	x=1219979195; c=relaxed/simple; s=hkgdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=zhengyli@cisco.com;
	z=From:=20=22Rockson=20Li=20(zhengyli)=22=20<zhengyli@cisco.
	com>
	|Subject:=20RE=3A=20[Sip]=20draft-ietf-sip-fork-loop-fix-07
	=3A=20is=20the=20second=20part=20of=20branch=20of=20present=
	20when=20req=20forked? |Sender:=20;
	bh=VfhjnArSSTCxQq96Mo+NsplCm77auoEjCEQaLMj7YPw=;
	b=WwoNJhKVheD0ohlBu1VzGtF3s6tNx141gi/xIaqEMwWN8ZKfPwvNraaQ46
	oa/HpBoDZicRMRCJedblxOj0wvlC8G+AaoAucdz+qLESlFI4Dp+LlIg6qMXf
	n8LTwi7aNEc6p3FrH1LiUnbwVDt544wusl+vS+7wMdMSNdbzKDWc4=;
Authentication-Results: hkg-dkim-1; header.From=zhengyli@cisco.com; dkim=pass (
	sig from cisco.com/hkgdkim1002 verified; ); 
Cc: sip@ietf.org
Subject: Re: [Sip] draft-ietf-sip-fork-loop-fix-07: is the second part of
	branch of present when req forked?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1371860812=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1371860812==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C901A8.914F5ACD"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C901A8.914F5ACD
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Robert,
=20
yes, 4.2.1 just says Proxies required to perform loop-detection SHOULD
create a branch value separable into two parts ,
=20
it does not say only when proxy need fork the req , it will add the
second part.
=20
So I don't see it means as sec 4.2.2,
=20
   This second part
   will not be present if the message was not forked when that Via
   header field value was added.
=20
Thanks
=20
-Rockson

________________________________

From: Robert Sparks [mailto:rjsparks@nostrum.com]=20
Sent: Tuesday, August 19, 2008 12:11 AM
To: Rockson Li (zhengyli)
Cc: sip@ietf.org
Subject: Re: [Sip] draft-ietf-sip-fork-loop-fix-07: is the second part
of branch of present when req forked?


What you are looking for is in this paragraph in 4.2.1:=20

   Proxies required to perform loop-detection by RFC XXXX (RFC-Editor:
   replace XXXX with the RFC number of this document) have an additional
   constraint on the value they place in the Via header field.  Such
   proxies SHOULD create a branch value separable into two parts in any
   implementation dependent way.  The first part MUST satisfy the
   constraints of Section 8.1.1.7.  The second part is used to perform
   loop detection and distinguish loops from spirals.



On Aug 17, 2008, at 8:22 AM, Rockson Li (zhengyli) wrote:


	Hi folks,
	=20
	One question on draft-ietf-sip-fork-loop-fix-07,
	=20
	sec 4.2.2
	=20
	This second part
	   will not be present if the message was not forked when that
Via
	   header field value was added.
	=20
	I am not sure why?
	from sec 4.2.1, I  do NOT see there's any constraints that the
second party would be added only when the msg is forked.
	=20
	thanks
	=20
	Regards,
	-Rockson
	_______________________________________________
	Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
	This list is for NEW development of the core SIP Protocol
	Use sip-implementors@cs.columbia.edu for questions on current
sip
	Use sipping@ietf.org for new developments on the application of
sip



------_=_NextPart_001_01C901A8.914F5ACD
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.6000.16674" name=3DGENERATOR></HEAD>
<BODY=20
style=3D"WORD-WRAP: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space">
<DIV dir=3Dltr align=3Dleft><SPAN class=3D968550203-19082008><FONT =
face=3DArial=20
color=3D#0000ff size=3D2>Robert,</FONT></SPAN></DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D968550203-19082008><FONT =
face=3DArial=20
color=3D#0000ff size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D968550203-19082008><FONT =
face=3DArial=20
color=3D#0000ff size=3D2>yes, 4.2.1 just says <FONT face=3D"Times New =
Roman"=20
color=3D#000000 size=3D3>Proxies required to perform loop-detection =
SHOULD create a=20
branch value separable into two parts ,</FONT></FONT></SPAN></DIV>
<DIV dir=3Dltr align=3Dleft><SPAN =
class=3D968550203-19082008></SPAN>&nbsp;</DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D968550203-19082008><FONT =
color=3D#0000ff>it=20
does not say only when proxy need fork the req , it will add the second=20
part.</FONT></SPAN></DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D968550203-19082008><FONT =
face=3DArial=20
color=3D#0000ff size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D968550203-19082008><FONT =
face=3DArial=20
color=3D#0000ff size=3D2>So I don't see it means as sec =
4.2.2,</FONT></SPAN></DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D968550203-19082008><FONT =
face=3DArial=20
color=3D#0000ff size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D968550203-19082008>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial><FONT =
size=3D2><SPAN=20
class=3D968550203-19082008>&nbsp;&nbsp; </SPAN>This second =
part<BR>&nbsp;&nbsp;=20
will not be present if the message was not forked when that =
Via<BR>&nbsp;&nbsp;=20
header field value was added.</FONT></FONT></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D125191913-17082008><SPAN =
class=3D968550203-19082008><FONT=20
face=3DArial size=3D2>Thanks</FONT></SPAN></SPAN></DIV>
<DIV><SPAN class=3D125191913-17082008><SPAN =
class=3D968550203-19082008><FONT=20
face=3DArial size=3D2></FONT></SPAN></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D125191913-17082008><SPAN =
class=3D968550203-19082008><FONT=20
face=3DArial =
size=3D2>-Rockson</FONT></SPAN></SPAN></DIV></SPAN></DIV><BR>
<DIV class=3DOutlookMessageHeader lang=3Den-us dir=3Dltr align=3Dleft>
<HR tabIndex=3D-1>
<FONT face=3DTahoma size=3D2><B>From:</B> Robert Sparks=20
[mailto:rjsparks@nostrum.com] <BR><B>Sent:</B> Tuesday, August 19, 2008 =
12:11=20
AM<BR><B>To:</B> Rockson Li (zhengyli)<BR><B>Cc:</B>=20
sip@ietf.org<BR><B>Subject:</B> Re: [Sip] =
draft-ietf-sip-fork-loop-fix-07: is=20
the second part of branch of present when req =
forked?<BR></FONT><BR></DIV>
<DIV></DIV>What you are looking for is in this paragraph in 4.2.1:
<DIV><BR></DIV>
<DIV>
<DIV>&nbsp;&nbsp; Proxies required to perform loop-detection by RFC XXXX =

(RFC-Editor:</DIV>
<DIV>&nbsp;&nbsp; replace XXXX with the RFC number of this document) =
have an=20
additional</DIV>
<DIV>&nbsp;&nbsp; constraint on the value they place in the Via header =
field.=20
&nbsp;Such</DIV>
<DIV>&nbsp;&nbsp; proxies SHOULD create a branch value separable into =
two parts=20
in any</DIV>
<DIV>&nbsp;&nbsp; implementation dependent way. &nbsp;The first part =
MUST=20
satisfy the</DIV>
<DIV>&nbsp;&nbsp; constraints of Section 8.1.1.7. &nbsp;The second part =
is used=20
to perform</DIV>
<DIV>&nbsp;&nbsp; loop detection and distinguish loops from =
spirals.</DIV>
<DIV><BR></DIV>
<DIV><BR></DIV>
<DIV><BR></DIV>
<DIV>
<DIV>On Aug 17, 2008, at 8:22 AM, Rockson Li (zhengyli) wrote:</DIV><BR=20
class=3DApple-interchange-newline>
<BLOCKQUOTE type=3D"cite">
  <DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>Hi=20
  folks,</FONT></SPAN></DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
  size=3D2></FONT></SPAN>&nbsp;</DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>One =
question on=20
  draft-ietf-sip-fork-loop-fix-07,</FONT></SPAN></DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
  size=3D2></FONT></SPAN>&nbsp;</DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>sec=20
  4.2.2</FONT></SPAN></DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
  size=3D2></FONT></SPAN>&nbsp;</DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>This =
second=20
  part<BR>&nbsp;&nbsp; will not be present if the message was not forked =
when=20
  that Via<BR>&nbsp;&nbsp; header field value was =
added.</FONT></SPAN></DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
  size=3D2></FONT></SPAN>&nbsp;</DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>I am =
not sure=20
  why?</FONT></SPAN></DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial size=3D2>from =
sec 4.2.1,=20
  I&nbsp; do NOT see there's any constraints that&nbsp;the second party =
would be=20
  added only when the msg is forked.</FONT></SPAN></DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
  size=3D2></FONT></SPAN>&nbsp;</DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
  size=3D2>thanks</FONT></SPAN></DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
  size=3D2></FONT></SPAN>&nbsp;</DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
  size=3D2>Regards,</FONT></SPAN></DIV>
  <DIV><SPAN class=3D125191913-17082008><FONT face=3DArial=20
  =
size=3D2>-Rockson</FONT></SPAN></DIV></DIV>______________________________=
_________________<BR>Sip=20
  mailing list &nbsp;<A=20
  =
href=3D"https://www.ietf.org/mailman/listinfo/sip">https://www.ietf.org/m=
ailman/listinfo/sip</A><BR>This=20
  list is for NEW development of the core SIP Protocol<BR>Use <A=20
  =
href=3D"mailto:sip-implementors@cs.columbia.edu">sip-implementors@cs.colu=
mbia.edu</A>=20
  for questions on current sip<BR>Use <A=20
  href=3D"mailto:sipping@ietf.org">sipping@ietf.org</A> for new =
developments on=20
  the application of sip</BLOCKQUOTE></DIV><BR></DIV></BODY></HTML>

------_=_NextPart_001_01C901A8.914F5ACD--

--===============1371860812==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1371860812==--


From sip-bounces@ietf.org  Mon Aug 18 20:29:30 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 703F73A6AB5;
	Mon, 18 Aug 2008 20:29:30 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 040A33A6ACE
	for <sip@core3.amsl.com>; Mon, 18 Aug 2008 20:29:29 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, HTML_MESSAGE=0.001, SPF_PASS=-0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id fXeSUmkKW2n3 for <sip@core3.amsl.com>;
	Mon, 18 Aug 2008 20:29:28 -0700 (PDT)
Received: from nostrum.com (nostrum-pt.tunnel.tserv2.fmt.ipv6.he.net
	[IPv6:2001:470:1f03:267::2])
	by core3.amsl.com (Postfix) with ESMTP id 607153A6AA5
	for <sip@ietf.org>; Mon, 18 Aug 2008 20:29:27 -0700 (PDT)
Received: from [192.168.2.6] (pool-68-238-148-61.dllstx.fios.verizon.net
	[68.238.148.61]) (authenticated bits=0)
	by nostrum.com (8.14.2/8.14.1) with ESMTP id m7J3TVoL046393
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO);
	Mon, 18 Aug 2008 22:29:31 -0500 (CDT)
	(envelope-from rjsparks@nostrum.com)
Message-Id: <38C06F40-442D-408A-8306-25317F81A8ED@nostrum.com>
From: Robert Sparks <rjsparks@nostrum.com>
To: "Rockson Li (zhengyli)" <zhengyli@cisco.com>
In-Reply-To: <F86B91A10B14744E88408E80B8A30EF3036C8CE4@xmb-hkg-412.apac.cisco.com>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Mon, 18 Aug 2008 22:29:31 -0500
References: <F86B91A10B14744E88408E80B8A30EF303673DCB@xmb-hkg-412.apac.cisco.com>
	<83365698-9F81-444E-930A-CC8FE5686383@nostrum.com>
	<F86B91A10B14744E88408E80B8A30EF3036C8CE4@xmb-hkg-412.apac.cisco.com>
X-Mailer: Apple Mail (2.926)
Received-SPF: pass (nostrum.com: 68.238.148.61 is authenticated by a trusted
	mechanism)
X-Virus-Scanned: ClamAV 0.93.3/8056/Mon Aug 18 09:33:41 2008 on
	shaman.nostrum.com
X-Virus-Status: Clean
Cc: sip@ietf.org
Subject: Re: [Sip] draft-ietf-sip-fork-loop-fix-07: is the second part of
	branch of present when req forked?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1455662579=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


--===============1455662579==
Content-Type: multipart/alternative; boundary=Apple-Mail-75-291202770


--Apple-Mail-75-291202770
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Well, that's a direct consequence of the "have an additional  
constraint" clause.
But since that's not making immediate sense to you, I'll see if  
there's a better way to phrase it.

RjS

On Aug 18, 2008, at 10:07 PM, Rockson Li (zhengyli) wrote:

> Robert,
>
> yes, 4.2.1 just says Proxies required to perform loop-detection  
> SHOULD create a branch value separable into two parts ,
>
> it does not say only when proxy need fork the req , it will add the  
> second part.
>
> So I don't see it means as sec 4.2.2,
>
>    This second part
>    will not be present if the message was not forked when that Via
>    header field value was added.
>
> Thanks
>
> -Rockson
>
> From: Robert Sparks [mailto:rjsparks@nostrum.com]
> Sent: Tuesday, August 19, 2008 12:11 AM
> To: Rockson Li (zhengyli)
> Cc: sip@ietf.org
> Subject: Re: [Sip] draft-ietf-sip-fork-loop-fix-07: is the second  
> part of branch of present when req forked?
>
> What you are looking for is in this paragraph in 4.2.1:
>
>    Proxies required to perform loop-detection by RFC XXXX (RFC-Editor:
>    replace XXXX with the RFC number of this document) have an  
> additional
>    constraint on the value they place in the Via header field.  Such
>    proxies SHOULD create a branch value separable into two parts in  
> any
>    implementation dependent way.  The first part MUST satisfy the
>    constraints of Section 8.1.1.7.  The second part is used to perform
>    loop detection and distinguish loops from spirals.
>
>
>
> On Aug 17, 2008, at 8:22 AM, Rockson Li (zhengyli) wrote:
>
>> Hi folks,
>>
>> One question on draft-ietf-sip-fork-loop-fix-07,
>>
>> sec 4.2.2
>>
>> This second part
>>    will not be present if the message was not forked when that Via
>>    header field value was added.
>>
>> I am not sure why?
>> from sec 4.2.1, I  do NOT see there's any constraints that the  
>> second party would be added only when the msg is forked.
>>
>> thanks
>>
>> Regards,
>> -Rockson
>> _______________________________________________
>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>


--Apple-Mail-75-291202770
Content-Type: text/html;
	charset=US-ASCII
Content-Transfer-Encoding: quoted-printable

<html><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space; ">Well, that's a direct =
consequence of the "have an additional constraint" clause.<div>But since =
that's not making immediate sense to you, I'll see if there's a better =
way to phrase =
it.</div><div><br></div><div>RjS</div><div><br><div><div><div>On Aug 18, =
2008, at 10:07 PM, Rockson Li (zhengyli) wrote:</div><br =
class=3D"Apple-interchange-newline"><blockquote type=3D"cite"> <div =
style=3D"WORD-WRAP: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space"> <div dir=3D"ltr" =
align=3D"left"><span class=3D"968550203-19082008"><font face=3D"Arial" =
color=3D"#0000ff" size=3D"2">Robert,</font></span></div> <div dir=3D"ltr" =
align=3D"left"><span class=3D"968550203-19082008"><font face=3D"Arial" =
color=3D"#0000ff" size=3D"2"></font></span>&nbsp;</div> <div dir=3D"ltr" =
align=3D"left"><span class=3D"968550203-19082008"><font face=3D"Arial" =
color=3D"#0000ff" size=3D"2">yes, 4.2.1 just says <font face=3D"Times =
New Roman" color=3D"#000000" size=3D"3">Proxies required to perform =
loop-detection SHOULD create a branch value separable into two parts =
,</font></font></span></div> <div dir=3D"ltr" align=3D"left"><span =
class=3D"968550203-19082008"></span>&nbsp;</div> <div dir=3D"ltr" =
align=3D"left"><span class=3D"968550203-19082008"><font =
color=3D"#0000ff">it does not say only when proxy need fork the req , it =
will add the second part.</font></span></div> <div dir=3D"ltr" =
align=3D"left"><span class=3D"968550203-19082008"><font face=3D"Arial" =
color=3D"#0000ff" size=3D"2"></font></span>&nbsp;</div> <div dir=3D"ltr" =
align=3D"left"><span class=3D"968550203-19082008"><font face=3D"Arial" =
color=3D"#0000ff" size=3D"2">So I don't see it means as sec =
4.2.2,</font></span></div> <div dir=3D"ltr" align=3D"left"><span =
class=3D"968550203-19082008"><font face=3D"Arial" color=3D"#0000ff" =
size=3D"2"></font></span>&nbsp;</div> <div dir=3D"ltr" =
align=3D"left"><span class=3D"968550203-19082008"> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial"><font size=3D"2"><span =
class=3D"968550203-19082008">&nbsp;&nbsp; </span>This second =
part<br>&nbsp;&nbsp; will not be present if the message was not forked =
when that Via<br>&nbsp;&nbsp; header field value was =
added.</font></font></span></div> <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2"></font></span>&nbsp;</div> <div><span =
class=3D"125191913-17082008"><span class=3D"968550203-19082008"><font =
face=3D"Arial" size=3D"2">Thanks</font></span></span></div> <div><span =
class=3D"125191913-17082008"><span class=3D"968550203-19082008"><font =
face=3D"Arial" size=3D"2"></font></span></span>&nbsp;</div> <div><span =
class=3D"125191913-17082008"><span class=3D"968550203-19082008"><font =
face=3D"Arial" =
size=3D"2">-Rockson</font></span></span></div></span></div><br> <div =
class=3D"OutlookMessageHeader" lang=3D"en-us" dir=3D"ltr" align=3D"left"> =
<hr tabindex=3D"-1"> <font face=3D"Tahoma" size=3D"2"><b>From:</b> =
Robert Sparks [<a =
href=3D"mailto:rjsparks@nostrum.com">mailto:rjsparks@nostrum.com</a>] =
<br><b>Sent:</b> Tuesday, August 19, 2008 12:11 AM<br><b>To:</b> Rockson =
Li (zhengyli)<br><b>Cc:</b> <a =
href=3D"mailto:sip@ietf.org">sip@ietf.org</a><br><b>Subject:</b> Re: =
[Sip] draft-ietf-sip-fork-loop-fix-07: is the second part of branch of =
present when req forked?<br></font><br></div> <div></div>What you are =
looking for is in this paragraph in 4.2.1: <div><br></div> <div> =
<div>&nbsp;&nbsp; Proxies required to perform loop-detection by RFC XXXX =
(RFC-Editor:</div> <div>&nbsp;&nbsp; replace XXXX with the RFC number of =
this document) have an additional</div> <div>&nbsp;&nbsp; constraint on =
the value they place in the Via header field. &nbsp;Such</div> =
<div>&nbsp;&nbsp; proxies SHOULD create a branch value separable into =
two parts in any</div> <div>&nbsp;&nbsp; implementation dependent way. =
&nbsp;The first part MUST satisfy the</div> <div>&nbsp;&nbsp; =
constraints of Section 8.1.1.7. &nbsp;The second part is used to =
perform</div> <div>&nbsp;&nbsp; loop detection and distinguish loops =
from spirals.</div> <div><br></div> <div><br></div> <div><br></div> =
<div> <div>On Aug 17, 2008, at 8:22 AM, Rockson Li (zhengyli) =
wrote:</div><br class=3D"Apple-interchange-newline"> <blockquote =
type=3D"cite">  <div>  <div><span class=3D"125191913-17082008"><font =
face=3D"Arial" size=3D"2">Hi   folks,</font></span></div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2"></font></span>&nbsp;</div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">One =
question on   draft-ietf-sip-fork-loop-fix-07,</font></span></div>  =
<div><span class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2"></font></span>&nbsp;</div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">sec   =
4.2.2</font></span></div>  <div><span class=3D"125191913-17082008"><font =
face=3D"Arial" size=3D"2"></font></span>&nbsp;</div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">This second =
  part<br>&nbsp;&nbsp; will not be present if the message was not forked =
when   that Via<br>&nbsp;&nbsp; header field value was =
added.</font></span></div>  <div><span class=3D"125191913-17082008"><font =
face=3D"Arial" size=3D"2"></font></span>&nbsp;</div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">I am not =
sure   why?</font></span></div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" size=3D"2">from sec =
4.2.1,   I&nbsp; do NOT see there's any constraints that&nbsp;the second =
party would be   added only when the msg is forked.</font></span></div>  =
<div><span class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2"></font></span>&nbsp;</div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2">thanks</font></span></div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2"></font></span>&nbsp;</div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2">Regards,</font></span></div>  <div><span =
class=3D"125191913-17082008"><font face=3D"Arial" =
size=3D"2">-Rockson</font></span></div></div>_____________________________=
__________________<br>Sip   mailing list &nbsp;<a =
href=3D"https://www.ietf.org/mailman/listinfo/sip">https://www.ietf.org/ma=
ilman/listinfo/sip</a><br>This   list is for NEW development of the core =
SIP Protocol<br>Use <a =
href=3D"mailto:sip-implementors@cs.columbia.edu">sip-implementors@cs.colum=
bia.edu</a>   for questions on current sip<br>Use <a =
href=3D"mailto:sipping@ietf.org">sipping@ietf.org</a> for new =
developments on   the application of =
sip</blockquote></div><br></div></div></blockquote></div><br></div></div><=
/body></html>=

--Apple-Mail-75-291202770--

--===============1455662579==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1455662579==--


From sip-bounces@ietf.org  Wed Aug 20 06:54:49 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A54A83A6BE0;
	Wed, 20 Aug 2008 06:54:49 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A76BA3A6941
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 06:36:53 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 1.001
X-Spam-Level: *
X-Spam-Status: No, score=1.001 tagged_above=-999 required=5 tests=[BAYES_60=1, 
	HTML_MESSAGE=0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id tWWTx37ji6gS for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 06:36:53 -0700 (PDT)
Received: from n8.bullet.mail.ac4.yahoo.com (n8.bullet.mail.ac4.yahoo.com
	[76.13.13.236]) by core3.amsl.com (Postfix) with SMTP id D21113A67A3
	for <sip@ietf.org>; Wed, 20 Aug 2008 06:36:52 -0700 (PDT)
Received: from [76.13.13.26] by n8.bullet.mail.ac4.yahoo.com with NNFMP;
	20 Aug 2008 13:35:39 -0000
Received: from [76.13.10.162] by t3.bullet.mail.ac4.yahoo.com with NNFMP;
	20 Aug 2008 13:35:39 -0000
Received: from [127.0.0.1] by omp103.mail.ac4.yahoo.com with NNFMP;
	20 Aug 2008 13:35:39 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 531892.96345.bm@omp103.mail.ac4.yahoo.com
Received: (qmail 46382 invoked by uid 60001); 20 Aug 2008 13:35:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
	b=C9JmXzCguEib5Xhbo1P+pwok7GvnsVsOnLQLssj5A1GDzQQ/17Emy8Ae7OB3GBPMp4BZPQXGDdie/wEzuBHEEx0dy/fLawd8pqoOrcyDBpar9gWPb+u9IRK5Y2kBypaCTp7fCy79MG4Qr/jcuvpKzV/XvV+L++sPx2kg2EvIxIY=;
X-YMail-OSG: 79SIgpgVM1l87qHxN1WlYeqHQ1MZ9Pn3D5_5bBw1tfDGwD1wbVZod7gGI2AF3jdfA0DKXdwq5Tq2WD3tCzAi3ikrFhRSjYjFl7lnb2BhQQ--
Received: from [203.145.155.11] by web59710.mail.ac4.yahoo.com via HTTP;
	Wed, 20 Aug 2008 06:35:39 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Wed, 20 Aug 2008 06:35:39 -0700 (PDT)
From: Thomas george <thomaspaul321@yahoo.com>
To: sip@ietf.org
MIME-Version: 1.0
Message-ID: <405519.39806.qm@web59710.mail.ac4.yahoo.com>
Subject: [Sip] SDP in 200 OK?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0398739666=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

--===============0398739666==
Content-Type: multipart/alternative; boundary="0-1079246593-1219239339=:39806"

--0-1079246593-1219239339=:39806
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=A0What will be SDP in the 200 OK to INVITE,=A0if PRACK with Answer and UPD=
ATE transaction happened before the INVITE's 200 is sent?=0Argds,=0AThomas=
=0A=0A=0A      
--0-1079246593-1219239339=:39806
Content-Type: text/html; charset=us-ascii

<html><head><style type="text/css"><!-- DIV {margin:0px;} --></style></head><body><div style="font-family:times new roman, new york, times, serif;font-size:12pt"><DIV>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt 0.5in; TEXT-INDENT: -0.25in; mso-list: l0 level1 lfo1; tab-stops: list .5in"><SPAN style="mso-list: Ignore"><SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;</SPAN></SPAN><SPAN dir=ltr>What will be SDP in the 200 OK to INVITE,&nbsp;if PRACK with Answer and UPDATE transaction happened before the INVITE's 200 is sent?</SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt 0.5in; TEXT-INDENT: -0.25in; mso-list: l0 level1 lfo1; tab-stops: list .5in"><SPAN dir=ltr></SPAN>&nbsp;</P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt 0.5in; TEXT-INDENT: -0.25in; mso-list: l0 level1 lfo1; tab-stops: list .5in"><SPAN dir=ltr>rgds,</SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt 0.5in; TEXT-INDENT: -0.25in; mso-list: l0 level1 lfo1; tab-stops: list .5in"><SPAN dir=ltr>Thomas</SPAN></P></DIV></div><br>

      </body></html>
--0-1079246593-1219239339=:39806--


--===============0398739666==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0398739666==--



From sip-bounces@ietf.org  Wed Aug 20 07:08:52 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3169428B56A;
	Wed, 20 Aug 2008 07:08:52 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 04B1E28C0DC
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 07:08:51 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.598
X-Spam-Level: 
X-Spam-Status: No, score=-2.598 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, HTML_MESSAGE=0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2iFfrJW930AD for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 07:08:50 -0700 (PDT)
Received: from mail-gx0-f16.google.com (mail-gx0-f16.google.com
	[209.85.217.16])
	by core3.amsl.com (Postfix) with ESMTP id E56653A6B92
	for <sip@ietf.org>; Wed, 20 Aug 2008 07:08:49 -0700 (PDT)
Received: by gxk9 with SMTP id 9so188607gxk.13
	for <sip@ietf.org>; Wed, 20 Aug 2008 07:08:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;
	h=domainkey-signature:received:received:message-id:date:from:to
	:subject:cc:in-reply-to:mime-version:content-type:references;
	bh=v8nxxpPVzd1rBPS1KvtaK37CSNWTfvxwOrl0Nyb+VPQ=;
	b=AKNT2yO06BVVREAEfZOCoj7FU1JQBC6S3io3xSvjO5yj8K+x7ZN6WEvGNuVhdDwZPg
	7M/0KD5Vgyx6ouRim2Cx2aHYVCMSN1XlTndIM5j8GUbVSM0pYB5gFUA3XDPvK6fK77fv
	zEwCWjO0OYKhDwIXE49y+AM/+OhfMKavpZfPI=
DomainKey-Signature: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma;
	h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
	:content-type:references;
	b=kdo/KznWx+a/eTfsQKa3xM2M0l05R29GlzfKQdrFyLI7xwvAybLW6y5oQ67uLciViE
	MmlFIOF+oVX1eLEKi/KtGlu6lV0cpB1bNcMLFQZen5BguVzTZF+DBmJ313kzTfyEoCUQ
	vrgrT/+Smzf1Ijiz6C526vyhc5SAx/w/J0Cys=
Received: by 10.150.205.20 with SMTP id c20mr149448ybg.19.1219241293435;
	Wed, 20 Aug 2008 07:08:13 -0700 (PDT)
Received: by 10.65.230.18 with HTTP; Wed, 20 Aug 2008 07:08:13 -0700 (PDT)
Message-ID: <52a9bccc0808200708u7c7324efj1865d593cfb3a336@mail.gmail.com>
Date: Wed, 20 Aug 2008 19:38:13 +0530
From: "Jagan Mohan" <jaganmk@gmail.com>
To: "Thomas george" <thomaspaul321@yahoo.com>
In-Reply-To: <405519.39806.qm@web59710.mail.ac4.yahoo.com>
MIME-Version: 1.0
References: <405519.39806.qm@web59710.mail.ac4.yahoo.com>
Cc: sip@ietf.org
Subject: Re: [Sip] SDP in 200 OK?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0386838774=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

--===============0386838774==
Content-Type: multipart/alternative; 
	boundary="----=_Part_40707_32842551.1219241293386"

------=_Part_40707_32842551.1219241293386
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Assuming that Offer-Answer has completed before sending 200 OK to INVITE,
it's recommended not to send SDP in the 200 OK. Even if the UAS sends SDP in
200 OK to INVITE, UAC should be able to accept the response, ignore the SDP
and send ACK to the UAS.

Regards,
Jagan


On Wed, Aug 20, 2008 at 7:05 PM, Thomas george <thomaspaul321@yahoo.com>wrote:

>  What will be SDP in the 200 OK to INVITE, if PRACK with Answer and UPDATE
> transaction happened before the INVITE's 200 is sent?
>
>
>
> rgds,
>
> Thomas
>
>
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>

------=_Part_40707_32842551.1219241293386
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<div dir="ltr">Assuming that Offer-Answer has completed before sending 200 OK to INVITE, it&#39;s recommended not to send SDP in the 200 OK. Even if the UAS sends SDP in 200 OK to INVITE, UAC should be able to accept the response, ignore the SDP and send ACK to the UAS.<br>
<br>Regards,<br>Jagan<br><br><br><div class="gmail_quote">On Wed, Aug 20, 2008 at 7:05 PM, Thomas george <span dir="ltr">&lt;<a href="mailto:thomaspaul321@yahoo.com">thomaspaul321@yahoo.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
<div><div style="font-family: times new roman,new york,times,serif; font-size: 12pt;"><div>
<p style="margin: 0in 0in 0pt 0.5in; text-indent: -0.25in;"><span><span>&nbsp;</span></span><span dir="ltr">What will be SDP in the 200 OK to INVITE,&nbsp;if PRACK with Answer and UPDATE transaction happened before the INVITE&#39;s 200 is sent?</span></p>

<p style="margin: 0in 0in 0pt 0.5in; text-indent: -0.25in;"><span dir="ltr"></span>&nbsp;</p>
<p style="margin: 0in 0in 0pt 0.5in; text-indent: -0.25in;"><span dir="ltr">rgds,</span></p>
<p style="margin: 0in 0in 0pt 0.5in; text-indent: -0.25in;"><span dir="ltr">Thomas</span></p></div></div><font color="#888888"><br>

      </font></div><br>_______________________________________________<br>
Sip mailing list &nbsp;<a href="https://www.ietf.org/mailman/listinfo/sip" target="_blank">https://www.ietf.org/mailman/listinfo/sip</a><br>
This list is for NEW development of the core SIP Protocol<br>
Use <a href="mailto:sip-implementors@cs.columbia.edu">sip-implementors@cs.columbia.edu</a> for questions on current sip<br>
Use <a href="mailto:sipping@ietf.org">sipping@ietf.org</a> for new developments on the application of sip<br></blockquote></div><br></div>

------=_Part_40707_32842551.1219241293386--

--===============0386838774==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0386838774==--


From sip-bounces@ietf.org  Wed Aug 20 07:15:51 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F0CF328C133;
	Wed, 20 Aug 2008 07:15:50 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8C20E3A6B92
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 07:15:49 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.543
X-Spam-Level: 
X-Spam-Status: No, score=-6.543 tagged_above=-999 required=5 tests=[AWL=0.056, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id aeYP8NZI21V1 for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 07:15:48 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 757453A6AB8
	for <sip@ietf.org>; Wed, 20 Aug 2008 07:15:48 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,239,1217808000"; d="scan'208";a="18178255"
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 20 Aug 2008 14:14:57 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m7KEEuPZ025290; 
	Wed, 20 Aug 2008 10:14:56 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7KEEuAG010614;
	Wed, 20 Aug 2008 14:14:56 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 20 Aug 2008 10:14:56 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 20 Aug 2008 10:14:56 -0400
Message-ID: <48AC271B.5030507@cisco.com>
Date: Wed, 20 Aug 2008 10:15:55 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Thomas george <thomaspaul321@yahoo.com>
References: <405519.39806.qm@web59710.mail.ac4.yahoo.com>
In-Reply-To: <405519.39806.qm@web59710.mail.ac4.yahoo.com>
X-OriginalArrivalTime: 20 Aug 2008 14:14:56.0329 (UTC)
	FILETIME=[1F4B6390:01C902CF]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=810; t=1219241697; x=1220105697;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20SDP=20in=20200=20OK? |Sender:=20
	|To:=20Thomas=20george=20<thomaspaul321@yahoo.com>;
	bh=NiLSQ65WgmuJRIVWe41mOs+YT63k1z5b9RmBGP33b14=;
	b=fhCr1GS+Qt+RLti+FU+ty9dnMdUVpa28zJ1VmApmQUh+/tP7MAYG0zfM6K
	8ToZFD0EZg6jyv8o/zW1jFYzCWnQkoL35b26dI4z5UBJS1aZY1ICqWvKWoFC
	1rox7CcLV4;
Authentication-Results: rtp-dkim-1; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim1001 verified; ); 
Cc: sip@ietf.org
Subject: Re: [Sip] SDP in 200 OK?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

See 
http://www.ietf.org/internet-drafts/draft-ietf-sipping-sip-offeranswer-08.txt

In short, its legal for it to either be absent, or same as the first 
answer. Absent is preferred.

	Thanks,
	Paul

Thomas george wrote:
>  What will be SDP in the 200 OK to INVITE, if PRACK with Answer and 
> UPDATE transaction happened before the INVITE's 200 is sent?
> 
>  
> 
> rgds,
> 
> Thomas
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 20 08:42:16 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CBD3C3A6B1E;
	Wed, 20 Aug 2008 08:42:16 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 300323A6B1E
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 08:42:16 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.392
X-Spam-Level: 
X-Spam-Status: No, score=-1.392 tagged_above=-999 required=5
	tests=[AWL=-1.207, BAYES_40=-0.185]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hCLXbbCjCzlq for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 08:42:15 -0700 (PDT)
Received: from out001.iad.hostedmail.net (out001.iad.hostedmail.net
	[209.225.56.23])
	by core3.amsl.com (Postfix) with ESMTP id 4A6DA3A6841
	for <sip@ietf.org>; Wed, 20 Aug 2008 08:42:15 -0700 (PDT)
Received: from ATL1VEXC020.usdom003.tco.tc ([10.158.7.31]) by
	out001.iad.hostedmail.net with Microsoft SMTPSVC(6.0.3790.3959);
	Wed, 20 Aug 2008 11:41:45 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 20 Aug 2008 11:41:38 -0400
Message-ID: <BBE61D1553D8A34F812FF87377B2935F0496E426@ATL1VEXC020.usdom003.tco.tc>
In-Reply-To: <551057.38697.qm@web94201.mail.in2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip-implementors] From Tag
Thread-Index: AckC2evYTfHfRVrJRTeQ1r4sJJpimgAAFtNA
From: "Brett Tate" <brett@broadsoft.com>
To: "George AK" <george_mana@yahoo.co.in>,
	<sip-implementors@lists.cs.columbia.edu>, <sip@ietf.org>
X-OriginalArrivalTime: 20 Aug 2008 15:41:45.0278 (UTC)
	FILETIME=[4011EDE0:01C902DB]
Subject: Re: [Sip] [Sip-implementors] From Tag
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> Why the From-Tag is required?

Per rfc3261, the answer is that the tags and call-id identify the
dialog.

The other answer is that prior to such a requirement, requests in the
opposite direction over the dialog occasionally caused To tag to be
added because the receive was unaware that the dialog was already formed
without the tag.  Similarly a re-INVITE to audit would occasionally
caused the call to be re-established because the receiver (who didn't
add the From tag) did not notice the distinction between INVITE and
re-INVITE.
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 20 08:44:03 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AEA9C3A6C44;
	Wed, 20 Aug 2008 08:44:03 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 7BF3528C1A1
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 08:44:02 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.399
X-Spam-Level: 
X-Spam-Status: No, score=-2.399 tagged_above=-999 required=5 tests=[AWL=0.200, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mGRssahGvgrS for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 08:44:01 -0700 (PDT)
Received: from mailgate.siemenscomms.co.uk (mailgate.siemenscomms.co.uk
	[195.171.110.225])
	by core3.amsl.com (Postfix) with ESMTP id 618243A6C44
	for <SIP@ietf.org>; Wed, 20 Aug 2008 08:44:01 -0700 (PDT)
Received: from GBNTHT12009MSX.gb002.siemens.net ([137.223.219.235])
	by siemenscomms.co.uk (PMDF V6.3-x14 #31430)
	with ESMTP id <0K5W00JBXOWZSK@siemenscomms.co.uk> for SIP@ietf.org; Wed,
	20 Aug 2008 16:43:31 +0100 (BST)
Date: Wed, 20 Aug 2008 16:43:17 +0100
From: "Elwell, John" <john.elwell@siemens.com>
To: SIP IETF <SIP@ietf.org>, Hadriel Kaplan <HKaplan@acmepacket.com>
Message-id: <0D5F89FAC29E2C41B98A6A762007F5D0010197C4@GBNTHT12009MSX.gb002.siemens.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: Comments on draft-kaplan-sip-info-events-01
Thread-Index: AckC23b9bFmfOjwGSiGwd9GuRptGlw==
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Subject: [Sip] Comments on draft-kaplan-sip-info-events-01
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

1. Section 6.1 includes a question whether it is OK to prohibit
Send-Info/Recv-Info in re-INVITE or UPDATE, and mentions that Adam
points out 3PCC needs it. I agree with Adam.

2. There is no provision for Send-Info/Recv-Info in 200/ACK (i.e.
omitting from an INVITE request, in the same way that SDP offer can be
omitted). It seems to me that some of the use cases that motivate INVITE
without SDP offer could also motivate INVITE without
Send-Info/Recv-Info. For example, a 3PCC make-call might need to do
this.

My remaining comments are more minor:
3. Information conveyed by INFO seems to be described in different ways,
e.g:
- "application level information"
- "session related control information"
- "mid-session signaling"
- "mid-session information"
We should be consistent, and my preference would be the first of these.

4. "This mechanism is not 
   appropriate for IANA-registered Subscribe Event package types, and 
   support for this mechanism should be explicitly indicated in future 
   Info Package definitions and registrations."
This sentence seems to be discussing two independent concepts, if I
understand correctly. It should be split in two.

5. Section 4 refers to Send-Info and Recv-Info without having introduced
these terms. Either they should be briefly introduced earlier or there
should be a forward reference to the section where they are introduced.

6. "INFO requests may be sent in either 
   direction, once the UAC or UAS has received the Send-Info/Recv-Info 
   header field value indications of what the far-end supports.  For 
   the UAS, it MUST receive the ACK for the INVITE's 200-ok, or the 
   PRACK for a provisional response, before sending an INFO request."
It seems that the second sentence is in conflict with the first. Is the
first sentence meant to be applicable only to a UAC?

7. I don't understand the logic behind the split between "4.2. Message
Body Inclusion" and "4.5. INFO Message Bodies".

8. Section 8.1.2 talks about message volume, and in particular suggests
that the mechanism is not suitable for data beyond the limits of typical
SIP messages. Perhaps it would also be worth noting the likelihood of
exceeding MTU size on UDP hops if large amounts of application data are
included.

9. Section 8.2.3 talks about defining INFO bodies as part of Info
Packages. However, elsewhere in the document it allows header fields to
be used to convey application data (if I understand correctly).
Shouldn't this be mentioned in 8.2 too?

John

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 20 09:21:58 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 300E33A6867;
	Wed, 20 Aug 2008 09:21:58 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 391CF3A680A
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 09:21:57 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.546
X-Spam-Level: 
X-Spam-Status: No, score=-6.546 tagged_above=-999 required=5 tests=[AWL=0.053, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JENKY74Dd0Zf for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 09:21:56 -0700 (PDT)
Received: from rtp-iport-1.cisco.com (rtp-iport-1.cisco.com [64.102.122.148])
	by core3.amsl.com (Postfix) with ESMTP id 081223A6867
	for <SIP@ietf.org>; Wed, 20 Aug 2008 09:21:55 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,240,1217808000"; d="scan'208";a="18213977"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 20 Aug 2008 16:20:38 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7KGKc1m005980; 
	Wed, 20 Aug 2008 12:20:38 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m7KGKcX3000854;
	Wed, 20 Aug 2008 16:20:38 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 20 Aug 2008 12:20:38 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 20 Aug 2008 12:20:37 -0400
Message-ID: <48AC4490.2090308@cisco.com>
Date: Wed, 20 Aug 2008 12:21:36 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: "Elwell, John" <john.elwell@siemens.com>
References: <0D5F89FAC29E2C41B98A6A762007F5D0010197C4@GBNTHT12009MSX.gb002.siemens.net>
In-Reply-To: <0D5F89FAC29E2C41B98A6A762007F5D0010197C4@GBNTHT12009MSX.gb002.siemens.net>
X-OriginalArrivalTime: 20 Aug 2008 16:20:37.0827 (UTC)
	FILETIME=[AE60A930:01C902E0]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=735; t=1219249238; x=1220113238;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Comments=20on=20draft-kaplan-si
	p-info-events-01 |Sender:=20
	|To:=20=22Elwell,=20John=22=20<john.elwell@siemens.com>;
	bh=AKoMOy0bCDw2PEKWVzw/tnIlHr9tAZ+tkUHPO2jD2yA=;
	b=SZOMOYqFhcM1x4dKVfQxPyaXja490YU7LR9Yai9w2wMXzemYmPzoXTgxdB
	tS/LFuwfg4iVcKVawfx2U4aIRHbKpVz4rCdeZGb0mG22742QS/LXFj2mcSnL
	1JoK+n9j9f;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] Comments on draft-kaplan-sip-info-events-01
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Elwell, John wrote:
> 1. Section 6.1 includes a question whether it is OK to prohibit
> Send-Info/Recv-Info in re-INVITE or UPDATE, and mentions that Adam
> points out 3PCC needs it. I agree with Adam.
> 
> 2. There is no provision for Send-Info/Recv-Info in 200/ACK (i.e.
> omitting from an INVITE request, in the same way that SDP offer can be
> omitted). It seems to me that some of the use cases that motivate INVITE
> without SDP offer could also motivate INVITE without
> Send-Info/Recv-Info. For example, a 3PCC make-call might need to do
> this.

Yep. It is usually my role to remind people that it isn't done until it 
works with 3PCC. But thats true regardless of who does the reminding.

	Thanks,
	Paul
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 20 10:57:25 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 006953A69CE;
	Wed, 20 Aug 2008 10:57:25 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D760128C19B
	for <sip@core3.amsl.com>; Tue, 19 Aug 2008 06:20:54 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 1.04
X-Spam-Level: *
X-Spam-Status: No, score=1.04 tagged_above=-999 required=5 tests=[AWL=1.254,
	BAYES_00=-2.599, HELO_EQ_PL=1.135, HOST_EQ_PL=1.95,
	MIME_8BIT_HEADER=0.3, RCVD_IN_DNSWL_LOW=-1]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FJGV2PPQx93O for <sip@core3.amsl.com>;
	Tue, 19 Aug 2008 06:20:54 -0700 (PDT)
Received: from plusmx1.polkomtel.com.pl (plusmx1.polkomtel.com.pl
	[212.2.96.51]) by core3.amsl.com (Postfix) with ESMTP id B25C128C197
	for <sip@ietf.org>; Tue, 19 Aug 2008 06:20:52 -0700 (PDT)
Received: from mswwaw3.corp.plusnet (plus-96-163.polkomtel.com.pl
	[212.2.96.163])
	by plusmx1.polkomtel.com.pl (Postfix) with ESMTP id E1DBA33A6E1
	for <sip@ietf.org>; Tue, 19 Aug 2008 15:20:59 +0200 (CEST)
Received: from E2K2.corp.plusnet (MCSGEO2N4B.corp.plusnet) by
	mswwaw3.corp.plusnet
	(Content Technologies SMTPRS 4.3.20) with ESMTP id
	<T88e7f53a8d0a0b4d0e9b8@mswwaw3.corp.plusnet>; 
	Tue, 19 Aug 2008 15:19:20 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 19 Aug 2008 14:58:48 +0200
Message-ID: <31CB570C7D71214790963DB8A02D07A810A412B1@E2K2.corp.plusnet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] draft-ietf-sip-location-conveyance - Question about
	potential usage of the Geolocation header
Thread-Index: AckBU+tjCLRbRghpRhWoBMv3OANJwQAdrvug
References: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
	<DCAC6416-D565-4DA3-8D81-CD43DEB3E32C@softarmor.com>
From: =?iso-8859-2?Q?Bart=B3omiej_Ko=B3akowski?= <b.kolakowski@plus.pl>
To: "Dean Willis" <dean.willis@softarmor.com>
X-Mailman-Approved-At: Wed, 20 Aug 2008 10:57:23 -0700
Cc: sip@ietf.org, draft-ietf-sip-location-conveyance@tools.ietf.org
Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question about
	potential usage of the Geolocation header
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Yes, I have, namely the P-Access-Network-Info header.
There are two problems with it:
1. I cannot included called (B) party cell-id in it.
2. RFC says that proxy cannot insert this header, however I guess 3GPP allo=
ws P-CSCF to do it. Anyway in my case it will be an IMS AS retrieving locat=
ion, acting as a proxy.

So I doubt it would be a suited solution.

Bartek

-----Original Message-----
From: Dean Willis [mailto:dean.willis@softarmor.com] =

Sent: Monday, August 18, 2008 7:00 PM
To: Bart=B3omiej Ko=B3akowski
Cc: draft-ietf-sip-location-conveyance@tools.ietf.org; sip@ietf.org
Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question about pote=
ntial usage of the Geolocation header


On Aug 13, 2008, at 9:03 AM, Bart=B3omiej Ko=B3akowski wrote:

> Hello,
>
> I have got such concern regarding location conveyance in SIP
> messages: I am designing IMS Appilcation Server, acting as a proxy, =

> that would query network elements for location information. As you =

> wrote proxies cannot insert message body, so the only way is to =

> provide location by reference. This requires appling SUBSCRIBE- NOTIFY =

> mechanism, which makes the architecture of the solution quit complex.
>
> In order to make it simpler I thought about including location =

> information as locationValue inside the Geolocation header. In fact we =

> do not need location represented with coordinates, but with cell- id =

> (that's mobile network). PIDF-LO does not support it, but maybe inside =

> a header that would be possible? There would be also an issue in =

> indicating loaction target whose location is included (we plan to =

> include both A and B parties location). Geolocation header would look =

> like this:
>
> Geolocation: {cell-id-3gpp} ;location-target=3D"bob@plus.pl";inserted-
> by=3D"las@plus.pl"
>
> What do you think about souch a usage of Geolocation header, maybe you =

> could give us some other solution?
>

have you looked at RC 3455? This defines IMS headers for cell-ID based  =

location.

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 20 10:57:25 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BAF213A6C1A;
	Wed, 20 Aug 2008 10:57:25 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C147B3A6AB3
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 01:51:50 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.996
X-Spam-Level: 
X-Spam-Status: No, score=0.996 tagged_above=-999 required=5
	tests=[BAYES_50=0.001, HTML_MESSAGE=0.001, RELAY_IS_203=0.994]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XAmrbfFU6UyA for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 01:51:49 -0700 (PDT)
Received: from web94201.mail.in2.yahoo.com (web94201.mail.in2.yahoo.com
	[203.104.16.196])
	by core3.amsl.com (Postfix) with SMTP id C79E73A6AF4
	for <sip@ietf.org>; Wed, 20 Aug 2008 01:51:48 -0700 (PDT)
Received: (qmail 38708 invoked by uid 60001); 20 Aug 2008 08:51:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.co.in;
	h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
	b=Ap6AToHmIEoOQ1EqOxIaKDuEtTpNL591JnjjkvwgTrxFgGhWLKMPhF4/dnRA+rqcisbiG0zk0P357+YGWcYev0iOUv7+JE8a1Zptl+RqtuNRpNkCaHEWrHE7FeP3d5EWj4lpztYqPZ0eV7TI9nPofpD55+CP6NcSv4xBhweXzFA=;
Received: from [203.145.155.11] by web94201.mail.in2.yahoo.com via HTTP;
	Wed, 20 Aug 2008 14:21:53 IST
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Wed, 20 Aug 2008 14:21:53 +0530 (IST)
From: George AK <george_mana@yahoo.co.in>
To: sip-implementors@lists.cs.columbia.edu, sip@ietf.org
MIME-Version: 1.0
Message-ID: <551057.38697.qm@web94201.mail.in2.yahoo.com>
X-Mailman-Approved-At: Wed, 20 Aug 2008 10:57:23 -0700
Subject: [Sip] From Tag
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1864446530=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

--===============1864446530==
Content-Type: multipart/alternative; boundary="0-375421830-1219222313=:38697"

--0-375421830-1219222313=:38697
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

One=C2=A0old question.=0AWhy the From-Tag is required?=0AIf UA communicates=
 directlty to another UA?=0AIf UA communicates thru a stateful Proxy to ano=
ther=C2=A0UA?=0AIs B2BUA the=C2=A0only guy who will cry if there is no From=
-Tag?=0AIf we allow the Callee to put his To-tag in the To header itself wh=
en he sending reINVITE, will it work?=0A=C2=A0-George-=0A=0A=0A      Unlimi=
ted freedom, unlimited storage. Get it now, on http://help.yahoo.com/l/in/y=
ahoo/mail/yahoomail/tools/tools-08.html/
--0-375421830-1219222313=:38697
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<html><head><style type=3D"text/css"><!-- DIV {margin:0px;} --></style></he=
ad><body><div style=3D"font-family:times new roman, new york, times, serif;=
font-size:12pt"><DIV></DIV>=0A<DIV>One&nbsp;old question.</DIV>=0A<DIV>Why =
the From-Tag is required?</DIV>=0A<DIV>&nbsp;</DIV>=0A<DIV>If UA communicat=
es directlty to another UA?</DIV>=0A<DIV>If UA communicates thru a stateful=
 Proxy to another&nbsp;UA?</DIV>=0A<DIV>&nbsp;</DIV>=0A<DIV>Is B2BUA the&nb=
sp;only guy who will cry if there is no From-Tag?</DIV>=0A<DIV>&nbsp;</DIV>=
=0A<DIV>If we allow the Callee to put his To-tag in the To header itself wh=
en he sending reINVITE, will it work?<BR>&nbsp;</DIV><FONT face=3D"times ne=
w roman" color=3D#0000ff size=3D3><STRONG>-George-</STRONG></FONT>=0A<DIV><=
/DIV></div><br>=0A=0A=0A      <!--1--><hr size=3D1></hr> Connect with frien=
ds all over the world. <a href=3D"http://in.rd.yahoo.com/tagline_messenger_=
1/*http://in.messenger.yahoo.com/?wm=3Dn/"> Get Yahoo! India Messenger.</a>=
</body></html>
--0-375421830-1219222313=:38697--

--===============1864446530==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1864446530==--


From sip-bounces@ietf.org  Wed Aug 20 11:07:31 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D77B03A6C5C;
	Wed, 20 Aug 2008 11:07:31 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E3A693A6C65
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 11:04:29 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.087
X-Spam-Level: 
X-Spam-Status: No, score=-2.087 tagged_above=-999 required=5 tests=[AWL=0.212, 
	BAYES_00=-2.599, MIME_8BIT_HEADER=0.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cpuGNzsdKq7B for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 11:04:29 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 167643A68F3
	for <sip@ietf.org>; Wed, 20 Aug 2008 11:04:29 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7KI3Qhd019455
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Wed, 20 Aug 2008 13:03:28 -0500
Message-Id: <C3154B95-DD77-4D22-BA6F-04D5276CD56B@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: =?ISO-8859-2?Q?Bart=B3omiej_Ko=B3akowski?= <b.kolakowski@plus.pl>
In-Reply-To: <31CB570C7D71214790963DB8A02D07A810A412B1@E2K2.corp.plusnet>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Wed, 20 Aug 2008 13:03:21 -0500
References: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
	<DCAC6416-D565-4DA3-8D81-CD43DEB3E32C@softarmor.com>
	<31CB570C7D71214790963DB8A02D07A810A412B1@E2K2.corp.plusnet>
X-Mailer: Apple Mail (2.928.1)
Cc: sip@ietf.org, draft-ietf-sip-location-conveyance@tools.ietf.org
Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question about
	potential usage of the Geolocation header
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-2"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 19, 2008, at 7:58 AM, Bart=B3omiej Ko=B3akowski wrote:

> Yes, I have, namely the P-Access-Network-Info header.
> There are two problems with it:
> 1. I cannot included called (B) party cell-id in it.

How do you know the B-party's cell ID in advance of a response coming  =

back from them? The usual way to do this in SIP is to have the B-party  =

information in a message coming from the B-party terminal, because  =

until the call resolves into a response (or a request coming from the  =

B-party), one doesn't know which of potentially many B-party terminals  =

might answer.

Of course, your proxy might be prescient, in which case I'd like to  =

ask for its help in managing my stock portfolio . . .

>
> 2. RFC says that proxy cannot insert this header, however I guess  =

> 3GPP allows P-CSCF to do it. Anyway in my case it will be an IMS AS  =

> retrieving location, acting as a proxy.
>

Theoretically the mobile inserts it, but I'm not currently cognizant  =

of any technical reason why a proxy (such as P-CSCF) couldn't do it.

--
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 20 12:22:26 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2BED13A68BA;
	Wed, 20 Aug 2008 12:22:26 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 075393A68BA
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 12:22:25 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.949
X-Spam-Level: 
X-Spam-Status: No, score=-5.949 tagged_above=-999 required=5
	tests=[AWL=-0.550, BAYES_00=-2.599, J_CHICKENPOX_56=0.6,
	J_CHICKENPOX_57=0.6, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6GgxXKF8askC for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 12:22:23 -0700 (PDT)
Received: from sj-iport-4.cisco.com (sj-iport-4.cisco.com [171.68.10.86])
	by core3.amsl.com (Postfix) with ESMTP id B49AD3A689D
	for <sip@ietf.org>; Wed, 20 Aug 2008 12:22:23 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,240,1217808000"; d="scan'208";a="20392124"
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-4.cisco.com with ESMTP; 20 Aug 2008 19:22:32 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-3.cisco.com (8.12.11/8.12.11) with ESMTP id m7KJMWhQ017337; 
	Wed, 20 Aug 2008 12:22:32 -0700
Received: from dwingwxp01 ([128.107.115.162])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m7KJMWmX022125;
	Wed, 20 Aug 2008 19:22:32 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Schneider, Peter \(NSN - DE/Munich\)'" <peter.schneider@nsn.com>,
	"'Tschofenig, Hannes \(NSN - FI/Espoo\)'" <hannes.tschofenig@nsn.com>, 
	<jason@counterpath.com>, <ekr@rtfm.com>
References: <085BE88FD18EE94085EB8960172CA359E9CA78@DEMUEXC006.nsn-intra.net>
Date: Wed, 20 Aug 2008 12:22:32 -0700
Message-ID: <033901c902fa$185457b0$a2736b80@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <085BE88FD18EE94085EB8960172CA359E9CA78@DEMUEXC006.nsn-intra.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: Acj4FXKRqVbVKo+7Rv62RrHIapSjKQK4k4tw
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=8381; t=1219260152;
	x=1220124152; c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Some=20comments=20on=20draft-ie
	tf-sip-dtls-srtp-framework-02 |Sender:=20;
	bh=P5NGz7qHrwkU/pgEwfy4BfxH/kpcT/hSM75JWeumpl0=;
	b=b9ZWTSz7sUbbUzNgbxb3aiBsBYc/oBFDxGt/acUzyDxTV+livnEmZWW66B
	Az0BeROSvHFkUH5Z/74L83s26bg+LRMXnZSx24Go4WwImAqrqtAPvwtFm5Kh
	1mj6fvnb/R;
Authentication-Results: sj-dkim-3; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim3002 verified; ); 
Cc: sip@ietf.org
Subject: Re: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
> Behalf Of Schneider, Peter (NSN - DE/Munich)
> Sent: Wednesday, August 06, 2008 3:41 PM
> To: Tschofenig, Hannes (NSN - FI/Espoo); 
> jason@counterpath.com; ekr@rtfm.com
> Cc: sip@ietf.org
> Subject: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
> 
> 1) The draft currently states in section 5:
> 
> "     The endpoint MUST use the setup attribute defined in [RFC4145].
>       The endpoint which is the offerer MUST use the setup attribute
>       value of setup:actpass and be prepared to receive a client_hello
>       before it receives the answer.  The answerer SHOULD use 
> the setup
>       attribute value of setup:active and will send the 
> client_hello in
>       the media path."
> 
> My proposal is to replace the last sentence by "The answerer MUST use
> the setup
> attribute value of setup:active or the setup attribute value of
> setup:passive."
> 
> With this, if the receiver takes up the active role, as recommended in
> the original text, he can start the handshake and if the handshake has
> been carried out successfully before the SDP answer, he can send
> encrypted early media (before the SDP answer). Obviously, 
> with the usage
> of self signed certificates, the offerer can authenticate the 
> origin of
> the early media only retrospectively, after he has received the SDP
> answer, which somewhat reduces the value of encrypting the 
> early media.
> Early media as well as a handshake at that point in time will however
> not work in an environment, where middleboxes are present 
> that will not
> let traffic pass in the media plane before the answer has been sent.
> 
> So if the receiver assumes such an environment, he may decide 
> to take up
> the passive role. By this, the offerer will start the 
> handshake as soon
> as he receives an answer, which would typically be close to the first
> point in time at which the handshake messages will be able to pass the
> middleboxes.

But this will cause an SRTP-enabled call to suffer user-noticable
call setup delay (due to DTLS-SRTP handshake that needs to occur).
This is the R-CLIPPING requirement from 
draft-ietf-sip-media-security-requirements.

To avoid this clipping, we would need draft-ietf-sip-dtls-srtp-framework 
to require the SDP answer be sent reliably before 200 Okay -- perhaps
using a technique similar to what ICE does to send SDP reliably
in 18x messages.  For DTLS-SRTP, this would mean re-transmitting
the 18x with the SDP answer until a DTLS Client Hello is seen.  Would
that be acceptable?

> I feel it's quite reasonable to do the handshake after offer 
> and answer
> have been exchanged, because the offerer can check the fingerprint of
> the certificate received in the handshake immediately; and he will not
> accept encrypted media that may be sent by an attacker. So he is less
> vulnerable to DoS. This does not allow encrypted early media to be
> received, but is this so essential?

There are some apparently-legitimate uses of early media, at least
from the perspective of some network operators, to deliver things
like "Than you for using <operator>", advertisements, colorful ringback
(music as ringback), and so on.  Brian did a great write-up of many
scenarios in the (now expired) 
draft-stucker-sipping-early-media-coping-03.txt.

I expect that SRTP offers will, for a looong time (perhaps forever),
need to offer both RTP and SRTP (using 
draft-ietf-mmusic-sdp-capability-negotiation).  Endpoints will have 
to figure out what they want to do with RTP that arrives before the
answer.  If attackers start taking advantage of this, endpoints will
necessarily evolve to be more restrictive (only accept incoming
RTP if the UDP port matches the SDP answer [thus requiring 
symmetric RTP], only accepting incoming SRTP if the the fingerprint
matches, etc.); in order to reduce user-noticable call setup 
delay, this will also require reliably delivery of SDP answers 
before the 200 Ok.  I view much of this as evolution.

> In fact, accepting only encrypted
> early media could be harmful, as it would prevent a caller to receive
> e.g. an announcement that is sent by some server in the network that
> only sends unsensitive announcements and therefore does not support
> encryption at all.

I suppose.  Depends on if the worry is being attacked with spam or
the worry is listening to RTP that 'the network' is attempting to 
deliver to the endpoint.

> 2) With respect to unmanaged (e.g. residential) stateful firewalls the
> draft currently states in section 6.6 that if ICE is not used and the
> handshake could not be completed (until offer and answer have been
> exchanged)
> 
>   "the passive side MUST
>    do a single unauthenticated STUN [I-D.ietf-behave-rfc3489bis]
>    connectivity check in order to open up the appropriate 
> pinhole.  All
>    implementations MUST be prepared to answer this request during the
>    handshake period even if they do not otherwise do ICE."
> 
> And later, in the message flow on page 13 and the respective
> explanations it becomes obvious that the idea is that the 
> sender of this
> STUN connectivity check in fact waits for an answer before he proceeds

There is no choice:  until the SDP answer arrives, the endpoint doesn't know
the IP address or port to send a STUN connectivity check.

> (although implementations must only *be prepared* to answer a
> connectivity request - I wonder whether "be prepared" should rather be
> removed from this sentence). However, if there are middleboxes on the
> path that block the STUN connectivity check, an answer will 
> never come,
> although the purpose of the connectivity check - to establish 
> a session
> in the residential firewall and open it up for incoming traffic - may
> already have been achieved.

Could you draw a diagram of such a network, and the location of such
a middlebox?

> So instead of making the sending of the STUN connectivity check
> mandatory in this situation, I propose rather to recommend that the
> passive UA in the connection setup should try to make sure that a
> firewall protecting the UA does not block the client hello 
> starting the
> handshake. This could be done by STUN or other means. This is exactly
> what is recommended also in 
> draft-ietf-mmusic-media-path-middleboxes-01,
> section 7, REC #1.
> 
> 3) More generally, I propose that the draft should mention possible
> problems with middleboxes, and should advise implementors to 
> follow the
> recommendations in draft-ietf-mmusic-media-path-middleboxes.
> 
> 4) Concerning the possible sequence of messages used to establish
> sessions that use DTLS-SRTP, the draft IMO should give clearer
> recommendations. This is currently mostly treated in the section
> "example message flow", which indeed explains two flows 
> currently. It is
> unclear, to which degree this is normative, and what variants of such
> flows would also be considered compliant to the draft.
> 
> 5) Another topic where information is only given in the 
> example flows is
> the treatment of RTCP. If RTP/RTCP multiplexing on a single 
> port is not
> used, at which time should the handshake for RTCP be done - 
> immediately
> after the handshake for RTP, so that sender reports could be sent for
> early media?

RTP early media (which isn't not SRTP), RTCP would be sent to whatever
draft-ietf-mmusic-sdp-capability-negotiation said.

> Or only after the SDP answer, when both sides know which
> ports are used on both sides? This becomes even more complex, if
> non-symmetric RTP/RTCP would be applied, which is not excluded in
> draft-ietf-avt-dtls-srtp-02.

I agree that draft-ietf-avt-dtls-srtp and/or
draft-ietf-sip-dtls-srtp-framework do need to mandate symmetric RTP and
symmetric RTCP.

-d

> I propose to describe these issues in a dedicated section.
> 
> Peter
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 20 15:40:58 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id F150A3A6863;
	Wed, 20 Aug 2008 15:40:57 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 697EB3A6863
	for <sip@core3.amsl.com>; Wed, 20 Aug 2008 15:40:57 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.279
X-Spam-Level: 
X-Spam-Status: No, score=-2.279 tagged_above=-999 required=5 tests=[AWL=0.320, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UBoWtlnNCbj7 for <sip@core3.amsl.com>;
	Wed, 20 Aug 2008 15:40:56 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 8475D3A6816
	for <sip@ietf.org>; Wed, 20 Aug 2008 15:40:56 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7KMeFZe021482
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Wed, 20 Aug 2008 17:40:17 -0500
Message-Id: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Dan Wing <dwing@cisco.com>
In-Reply-To: <033901c902fa$185457b0$a2736b80@cisco.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Wed, 20 Aug 2008 17:40:10 -0500
References: <085BE88FD18EE94085EB8960172CA359E9CA78@DEMUEXC006.nsn-intra.net>
	<033901c902fa$185457b0$a2736b80@cisco.com>
X-Mailer: Apple Mail (2.928.1)
Cc: sip@ietf.org, ekr@rtfm.com
Subject: Re: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 20, 2008, at 2:22 PM, Dan Wing wrote:
>
> There are some apparently-legitimate uses of early media,

No there aren't, IMHO.

> at least
> from the perspective of some network operators, to deliver things
> like "Than you for using <operator>", advertisements, colorful  
> ringback
> (music as ringback), and so on.  Brian did a great write-up of many
> scenarios in the (now expired)
> draft-stucker-sipping-early-media-coping-03.txt.

Well, if you caveat it that way., then your statement is correct. One  
might reasonably ask if those operators don't simply have their  
requirements confused.

My take, however, is that "early media" is a cop-out for coping with a  
fundamentally broken PSTN-interworking model, coupled with Bad Ideas  
about charging based on signaling rather than content.

But like forking, this genie has left the bottle, and we have to deal  
with the consequences of that failing as long as we have SIP 2.0.

---
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 08:15:42 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 874A93A69E6;
	Thu, 21 Aug 2008 08:15:42 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2FBB83A68AE
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 08:13:27 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id D90TOW+x9Xts for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 08:13:26 -0700 (PDT)
Received: from exprod6og112.obsmtp.com (exprod6og112.obsmtp.com [64.18.1.29])
	by core3.amsl.com (Postfix) with ESMTP id 34B733A6945
	for <sip@ietf.org>; Thu, 21 Aug 2008 08:13:22 -0700 (PDT)
Received: from source ([192.150.8.22]) by exprod6ob112.postini.com
	([64.18.5.12]) with SMTP; Thu, 21 Aug 2008 08:12:50 PDT
Received: from inner-relay-1.corp.adobe.com ([153.32.1.51])
	by outbound-smtp-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7LFChE0015506; Thu, 21 Aug 2008 08:12:46 -0700 (PDT)
Received: from apacmail.pac.adobe.com (apacmail.pac.adobe.com [130.248.36.99])
	by inner-relay-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7LFCfiq000599; Thu, 21 Aug 2008 08:12:42 -0700 (PDT)
Received: from namail5.corp.adobe.com ([10.8.192.88]) by
	apacmail.pac.adobe.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Aug 2008 00:12:40 +0900
Received: from 10.7.240.237 ([10.7.240.237]) by namail5.corp.adobe.com
	([10.8.192.88]) with Microsoft Exchange Server HTTP-DAV ; 
	Thu, 21 Aug 2008 15:12:38 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Thu, 21 Aug 2008 10:16:44 -0500
From: Henry Sinnreich <hsinnrei@adobe.com>
To: Dean Willis <dean.willis@softarmor.com>, Dan Wing <dwing@Cisco.COM>
Message-ID: <C4D2F10C.7CB9%hsinnrei@adobe.com>
Thread-Topic: Early media as an endpoint application
Thread-Index: AckDoOumDEmekShGS02Y1uyPGUy4Lg==
In-Reply-To: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com>
Mime-version: 1.0
X-OriginalArrivalTime: 21 Aug 2008 15:12:40.0935 (UTC)
	FILETIME=[5AC60F70:01C903A0]
Cc: sip@ietf.org, ekr@rtfm.com
Subject: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I have changed the Subject title

Early media should just be an endpoint application when the SIP endpoint is
a PSTN gateway. This seems logical, or does it?

===================

I agree that early media has no role in pure/clean IP-IP communications, but
only when connecting to the PSTN. Should early media support not be
localized in the respective SIP endpoints, that is in the SIP-PSTN gateway?

Support of early media in the SIP-PSTN gateway would resolve this issue.

What do you think?

Henry


On 8/20/08 5:40 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:

> 
> On Aug 20, 2008, at 2:22 PM, Dan Wing wrote:
>> 
>> There are some apparently-legitimate uses of early media,
> 
> No there aren't, IMHO.
> 
>> at least
>> from the perspective of some network operators, to deliver things
>> like "Than you for using <operator>", advertisements, colorful
>> ringback
>> (music as ringback), and so on.  Brian did a great write-up of many
>> scenarios in the (now expired)
>> draft-stucker-sipping-early-media-coping-03.txt.
> 
> Well, if you caveat it that way., then your statement is correct. One
> might reasonably ask if those operators don't simply have their
> requirements confused.
> 
> My take, however, is that "early media" is a cop-out for coping with a
> fundamentally broken PSTN-interworking model, coupled with Bad Ideas
> about charging based on signaling rather than content.
> 
> But like forking, this genie has left the bottle, and we have to deal
> with the consequences of that failing as long as we have SIP 2.0.
> 
> ---
> Dean
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 08:56:52 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 57FDF3A6B7A;
	Thu, 21 Aug 2008 08:56:52 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8B9133A6A8C
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 08:48:20 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4LDoKTThJ2P8 for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 08:48:16 -0700 (PDT)
Received: from omzesmtp01a.verizonbusiness.com
	(omzesmtp01a.verizonbusiness.com [199.249.25.195])
	by core3.amsl.com (Postfix) with ESMTP id 258173A6A7B
	for <sip@ietf.org>; Thu, 21 Aug 2008 08:48:15 -0700 (PDT)
Received: from pmismtp06.wcomnet.com ([166.37.158.166])
	by firewall.verizonbusiness.com
	(Sun Java(tm) System Messaging Server 6.3-5.02 (built Oct 12 2007;
	32bit))
	with ESMTP id <0K5Y00A1YJDW8600@firewall.verizonbusiness.com> for
	sip@ietf.org; Thu, 21 Aug 2008 15:37:09 +0000 (GMT)
Received: from pmismtp06.wcomnet.com ([127.0.0.1])
	by pmismtp06.mcilink.com (iPlanet Messaging Server 5.2 HotFix 2.08
	(built Sep
	22 2005)) with SMTP id <0K5Y0069FJDWON@pmismtp06.mcilink.com> for
	sip@ietf.org; Thu, 21 Aug 2008 15:37:09 +0000 (GMT)
Received: from ASHSRV139.mcilink.com ([153.39.68.165])
	by pmismtp06.mcilink.com (iPlanet Messaging Server 5.2 HotFix 2.08
	(built Sep
	22 2005)) with ESMTP id <0K5Y0070IJDW93@pmismtp06.mcilink.com> for
	sip@ietf.org; Thu, 21 Aug 2008 15:37:08 +0000 (GMT)
Received: from ASHEVS002.mcilink.com ([153.39.71.1])
	by ASHSRV139.mcilink.com with Microsoft SMTPSVC(6.0.3790.3959); Thu,
	21 Aug 2008 15:37:08 +0000
Date: Thu, 21 Aug 2008 15:37:06 +0000
From: "Dwight, Timothy M (Tim)" <timothy.dwight@verizonbusiness.com>
In-reply-to: <C4D2F10C.7CB9%hsinnrei@adobe.com>
To: Henry Sinnreich <hsinnrei@adobe.com>,
	Dean Willis <dean.willis@softarmor.com>, Dan Wing <dwing@Cisco.COM>
Message-id: <092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
Thread-topic: [Sip] Early media as an endpoint application
Thread-index: AckDoOumDEmekShGS02Y1uyPGUy4LgAAcLkA
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com>
	<C4D2F10C.7CB9%hsinnrei@adobe.com>
X-OriginalArrivalTime: 21 Aug 2008 15:37:08.0024 (UTC)
	FILETIME=[C53A1380:01C903A3]
Cc: sip@ietf.org, ekr@rtfm.com
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

What if you want to implement those or similar services between VoIP end
systems?  For example what if you want to provide "color ringback tones"
between VoIP end systems?  There is no PSTN gateway involvement in such
services. 

tim

> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
> Behalf Of Henry Sinnreich
> Sent: Thursday, August 21, 2008 10:17 AM
> To: Dean Willis; Dan Wing
> Cc: sip@ietf.org; ekr@rtfm.com
> Subject: [Sip] Early media as an endpoint application
> 
> I have changed the Subject title
> 
> Early media should just be an endpoint application when the 
> SIP endpoint is
> a PSTN gateway. This seems logical, or does it?
> 
> ===================
> 
> I agree that early media has no role in pure/clean IP-IP 
> communications, but
> only when connecting to the PSTN. Should early media support not be
> localized in the respective SIP endpoints, that is in the 
> SIP-PSTN gateway?
> 
> Support of early media in the SIP-PSTN gateway would resolve 
> this issue.
> 
> What do you think?
> 
> Henry
> 
> 
> On 8/20/08 5:40 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
> 
> > 
> > On Aug 20, 2008, at 2:22 PM, Dan Wing wrote:
> >> 
> >> There are some apparently-legitimate uses of early media,
> > 
> > No there aren't, IMHO.
> > 
> >> at least
> >> from the perspective of some network operators, to deliver things
> >> like "Than you for using <operator>", advertisements, colorful
> >> ringback
> >> (music as ringback), and so on.  Brian did a great write-up of many
> >> scenarios in the (now expired)
> >> draft-stucker-sipping-early-media-coping-03.txt.
> > 
> > Well, if you caveat it that way., then your statement is 
> correct. One
> > might reasonably ask if those operators don't simply have their
> > requirements confused.
> > 
> > My take, however, is that "early media" is a cop-out for 
> coping with a
> > fundamentally broken PSTN-interworking model, coupled with Bad Ideas
> > about charging based on signaling rather than content.
> > 
> > But like forking, this genie has left the bottle, and we 
> have to deal
> > with the consequences of that failing as long as we have SIP 2.0.
> > 
> > ---
> > Dean
> > 
> > _______________________________________________
> > Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 09:20:23 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 45F4F3A6917;
	Thu, 21 Aug 2008 09:20:23 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A49BA3A6917
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 09:18:48 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.397
X-Spam-Level: 
X-Spam-Status: No, score=-5.397 tagged_above=-999 required=5 tests=[AWL=1.202, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6I+VnJaU66vv for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 09:18:47 -0700 (PDT)
Received: from sj-iport-5.cisco.com (sj-iport-5.cisco.com [171.68.10.87])
	by core3.amsl.com (Postfix) with ESMTP id 358BA3A6780
	for <sip@ietf.org>; Thu, 21 Aug 2008 09:18:47 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,246,1217808000"; d="scan'208";a="42670565"
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-5.cisco.com with ESMTP; 21 Aug 2008 16:17:12 +0000
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7LGHCXD023472; 
	Thu, 21 Aug 2008 09:17:12 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-4.cisco.com (8.13.8/8.13.8) with ESMTP id m7LGHC2q009794;
	Thu, 21 Aug 2008 16:17:12 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Dwight, Timothy M \(Tim\)'" <timothy.dwight@verizonbusiness.com>,
	"'Henry Sinnreich'" <hsinnrei@adobe.com>,
	"'Dean Willis'" <dean.willis@softarmor.com>
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com>
	<C4D2F10C.7CB9%hsinnrei@adobe.com>
	<092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com>
Date: Thu, 21 Aug 2008 09:17:12 -0700
Message-ID: <038801c903a9$5e7b8740$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AckDoOumDEmekShGS02Y1uyPGUy4LgAAcLkAAAEn1nA=
In-Reply-To: <092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=4533; t=1219335432;
	x=1220199432; c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Early=20media=20as=20an=20endpo
	int=20application |Sender:=20;
	bh=AZ4nQILDKZ0M6HzC+n80rgYFO+lR25uPox7N8d/tJJg=;
	b=Gmvtt8Tza+KMLhDTLkrzehS2vD3EqYJA5Xz1RVq5RqEunMRgZLN67RC9S1
	IFeQ/Sd0GpzxUgkb8jg6RzFqs3B1hmDW9qcLhCn6iQFMlhin8EL5q5CakIKa
	8G2dS3sx8L;
Authentication-Results: sj-dkim-2; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim2002 verified; ); 
Cc: sip@ietf.org, ekr@rtfm.com
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 

> -----Original Message-----
> From: Dwight, Timothy M (Tim) 
> [mailto:timothy.dwight@verizonbusiness.com] 
> Sent: Thursday, August 21, 2008 8:37 AM
> To: Henry Sinnreich; Dean Willis; Dan Wing
> Cc: sip@ietf.org; ekr@rtfm.com
> Subject: RE: [Sip] Early media as an endpoint application
> 
> What if you want to implement those or similar services 
> between VoIP end
> systems?  For example what if you want to provide "color 
> ringback tones"
> between VoIP end systems?  There is no PSTN gateway 
> involvement in such services. 

There are friendlier ways of implementing color ringback tones than described
in Brian's document.  Brian's document only describes the current state of the
art.

It would be friendlier, more secure, and allow conveying RTP payload types, to
only play media after you have received SDP describing that media.  For
example, playing color ringback tone could first require sending the caller a
18x with the SDP of the stream generating the color ringback tone (IP address,
UDP port, codec, packetization interval, etc.), and then stream the music to
the caller.  When the called party generates its 18x and SDP, that would also
sent to the calling party (who continues playing back the color ringback
tone).  Sending the called party's SDP allows the calling party to prepare to
receive that RTP, such as kicking off DTLS-SRTP (if being used), invoking a
transcoder, etc. -- all the while the color ringback tone is being played.
When the called party answers, the 200 causes the calling party to prefer that
incoming (S)RTP over the color ringback and the color ringback music can be
stopped.

-d


> tim
> 
> > -----Original Message-----
> > From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
> > Behalf Of Henry Sinnreich
> > Sent: Thursday, August 21, 2008 10:17 AM
> > To: Dean Willis; Dan Wing
> > Cc: sip@ietf.org; ekr@rtfm.com
> > Subject: [Sip] Early media as an endpoint application
> > 
> > I have changed the Subject title
> > 
> > Early media should just be an endpoint application when the 
> > SIP endpoint is
> > a PSTN gateway. This seems logical, or does it?
> > 
> > ===================
> > 
> > I agree that early media has no role in pure/clean IP-IP 
> > communications, but
> > only when connecting to the PSTN. Should early media support not be
> > localized in the respective SIP endpoints, that is in the 
> > SIP-PSTN gateway?
> > 
> > Support of early media in the SIP-PSTN gateway would resolve 
> > this issue.
> > 
> > What do you think?
> > 
> > Henry
> > 
> > 
> > On 8/20/08 5:40 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
> > 
> > > 
> > > On Aug 20, 2008, at 2:22 PM, Dan Wing wrote:
> > >> 
> > >> There are some apparently-legitimate uses of early media,
> > > 
> > > No there aren't, IMHO.
> > > 
> > >> at least
> > >> from the perspective of some network operators, to deliver things
> > >> like "Than you for using <operator>", advertisements, colorful
> > >> ringback
> > >> (music as ringback), and so on.  Brian did a great 
> write-up of many
> > >> scenarios in the (now expired)
> > >> draft-stucker-sipping-early-media-coping-03.txt.
> > > 
> > > Well, if you caveat it that way., then your statement is 
> > correct. One
> > > might reasonably ask if those operators don't simply have their
> > > requirements confused.
> > > 
> > > My take, however, is that "early media" is a cop-out for 
> > coping with a
> > > fundamentally broken PSTN-interworking model, coupled 
> with Bad Ideas
> > > about charging based on signaling rather than content.
> > > 
> > > But like forking, this genie has left the bottle, and we 
> > have to deal
> > > with the consequences of that failing as long as we have SIP 2.0.
> > > 
> > > ---
> > > Dean
> > > 
> > > _______________________________________________
> > > Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> > > This list is for NEW development of the core SIP Protocol
> > > Use sip-implementors@cs.columbia.edu for questions on current sip
> > > Use sipping@ietf.org for new developments on the 
> application of sip
> > 
> > _______________________________________________
> > Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> > 

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 09:46:21 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1D2EF3A69E2;
	Thu, 21 Aug 2008 09:46:21 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 710293A67AB
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 09:44:09 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.901
X-Spam-Level: 
X-Spam-Status: No, score=0.901 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, J_CHICKENPOX_56=0.6, J_CHICKENPOX_57=0.6,
	MANGLED_HERE=2.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JjZVuNoXGG+c for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 09:44:08 -0700 (PDT)
Received: from demumfd002.nsn-inter.net (demumfd002.nsn-inter.net
	[217.115.75.234])
	by core3.amsl.com (Postfix) with ESMTP id AAB3C3A6A07
	for <sip@ietf.org>; Thu, 21 Aug 2008 09:44:07 -0700 (PDT)
Received: from demuprx016.emea.nsn-intra.net ([10.150.129.55])
	by demumfd002.nsn-inter.net (8.12.11.20060308/8.12.11) with ESMTP id
	m7LGgxDe006344
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Thu, 21 Aug 2008 18:42:59 +0200
Received: from demuexc023.nsn-intra.net (webmail.nsn-intra.net [10.150.128.36])
	by demuprx016.emea.nsn-intra.net (8.12.11.20060308/8.12.11) with ESMTP
	id m7LGgxSS021507; Thu, 21 Aug 2008 18:42:59 +0200
Received: from DEMUEXC006.nsn-intra.net ([10.150.128.103]) by
	demuexc023.nsn-intra.net with Microsoft SMTPSVC(6.0.3790.3959); 
	Thu, 21 Aug 2008 18:42:59 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 21 Aug 2008 18:42:58 +0200
Message-ID: <085BE88FD18EE94085EB8960172CA359ED81AE@DEMUEXC006.nsn-intra.net>
In-Reply-To: <033901c902fa$185457b0$a2736b80@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
Thread-Index: Acj4FXKRqVbVKo+7Rv62RrHIapSjKQK4k4twACvOcqA=
References: <085BE88FD18EE94085EB8960172CA359E9CA78@DEMUEXC006.nsn-intra.net>
	<033901c902fa$185457b0$a2736b80@cisco.com>
From: "Schneider, Peter (NSN - DE/Munich)" <peter.schneider@nsn.com>
To: "ext Dan Wing" <dwing@cisco.com>,
	"Tschofenig, Hannes (NSN - FI/Espoo)" <hannes.tschofenig@nsn.com>,
	<jason@counterpath.com>, <ekr@rtfm.com>
X-OriginalArrivalTime: 21 Aug 2008 16:42:59.0379 (UTC)
	FILETIME=[F86B0030:01C903AC]
Cc: sip@ietf.org
Subject: Re: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 =


> -----Urspr=FCngliche Nachricht-----
> Von: ext Dan Wing [mailto:dwing@cisco.com] =

> Gesendet: Mittwoch, 20. August 2008 21:23
> An: Schneider, Peter (NSN - DE/Munich); Tschofenig, Hannes =

> (NSN - FI/Espoo); jason@counterpath.com; ekr@rtfm.com
> Cc: sip@ietf.org
> Betreff: RE: [Sip] Some comments on =

> draft-ietf-sip-dtls-srtp-framework-02
> =

> > -----Original Message-----
> > From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On =

> > Behalf Of Schneider, Peter (NSN - DE/Munich)
> > Sent: Wednesday, August 06, 2008 3:41 PM
> > To: Tschofenig, Hannes (NSN - FI/Espoo); =

> > jason@counterpath.com; ekr@rtfm.com
> > Cc: sip@ietf.org
> > Subject: [Sip] Some comments on =

> draft-ietf-sip-dtls-srtp-framework-02
> > =

> > 1) The draft currently states in section 5:
> > =

> > "     The endpoint MUST use the setup attribute defined in =

> [RFC4145].
> >       The endpoint which is the offerer MUST use the setup attribute
> >       value of setup:actpass and be prepared to receive a =

> client_hello
> >       before it receives the answer.  The answerer SHOULD use =

> > the setup
> >       attribute value of setup:active and will send the =

> > client_hello in
> >       the media path."
> > =

> > My proposal is to replace the last sentence by "The =

> answerer MUST use
> > the setup
> > attribute value of setup:active or the setup attribute value of
> > setup:passive."
> > =

> > With this, if the receiver takes up the active role, as =

> recommended in
> > the original text, he can start the handshake and if the =

> handshake has
> > been carried out successfully before the SDP answer, he can send
> > encrypted early media (before the SDP answer). Obviously, =

> > with the usage
> > of self signed certificates, the offerer can authenticate the =

> > origin of
> > the early media only retrospectively, after he has received the SDP
> > answer, which somewhat reduces the value of encrypting the =

> > early media.
> > Early media as well as a handshake at that point in time =

> will however
> > not work in an environment, where middleboxes are present =

> > that will not
> > let traffic pass in the media plane before the answer has been sent.
> > =

> > So if the receiver assumes such an environment, he may decide =

> > to take up
> > the passive role. By this, the offerer will start the =

> > handshake as soon
> > as he receives an answer, which would typically be close to =

> the first
> > point in time at which the handshake messages will be able =

> to pass the
> > middleboxes.
> =

> But this will cause an SRTP-enabled call to suffer user-noticable
> call setup delay (due to DTLS-SRTP handshake that needs to occur).
> This is the R-CLIPPING requirement from =

> draft-ietf-sip-media-security-requirements.

The receiver chooses "passive" because he lives in an environment where a m=
anaged middlebox blocks the path before the SDP answer is transmitted (as d=
escribed in draft-ietf-mmusic-media-path-middleboxes-01). Clipping will hap=
pen not because of the passive role, but because of the middlebox.

> =

> To avoid this clipping, we would need =

> draft-ietf-sip-dtls-srtp-framework =

> to require the SDP answer be sent reliably before 200 Okay -- perhaps
> using a technique similar to what ICE does to send SDP reliably
> in 18x messages.  For DTLS-SRTP, this would mean re-transmitting
> the 18x with the SDP answer until a DTLS Client Hello is seen.  Would
> that be acceptable?

Sending the SDP answer in the first provisional response is a good idea and=
 helps in the middlebox scenario. But this is not an alternative to allowin=
g the receiver of the offer to take the passive role, but an addition. The =
receiver of the offer must have the passive role if he re-transmits "the 18=
x with the SDP answer until a DTLS Client Hello is seen", right? =


...
> =

> > 2) With respect to unmanaged (e.g. residential) stateful =

> firewalls the
> > draft currently states in section 6.6 that if ICE is not =

> used and the
> > handshake could not be completed (until offer and answer have been
> > exchanged)
> > =

> >   "the passive side MUST
> >    do a single unauthenticated STUN [I-D.ietf-behave-rfc3489bis]
> >    connectivity check in order to open up the appropriate =

> > pinhole.  All
> >    implementations MUST be prepared to answer this request =

> during the
> >    handshake period even if they do not otherwise do ICE."
> > =

> > And later, in the message flow on page 13 and the respective
> > explanations it becomes obvious that the idea is that the =

> > sender of this
> > STUN connectivity check in fact waits for an answer before =

> he proceeds
> =

> There is no choice:  until the SDP answer arrives, the =

> endpoint doesn't know
> the IP address or port to send a STUN connectivity check.
> =


The connectivity check is not sent by the SDP offerer in the draft, but by =
the answerer - but this is not relevant for my point, I think.

> > (although implementations must only *be prepared* to answer a
> > connectivity request - I wonder whether "be prepared" =

> should rather be
> > removed from this sentence). However, if there are =

> middleboxes on the
> > path that block the STUN connectivity check, an answer will =

> > never come,
> > although the purpose of the connectivity check - to establish =

> > a session
> > in the residential firewall and open it up for incoming =

> traffic - may
> > already have been achieved.
> =

> Could you draw a diagram of such a network, and the location of such
> a middlebox?
>

Sorry, I have no diagram at hand. Let me explain better what I had in mind:=
 The draft assumes some unmanaged NAT or firewall in this scenario, e.g. a =
residential one, close to the UA. IN ADDITION, there still can be the (mana=
ged) middleboxes described in draft-ietf-mmusic-media-path-middleboxes-01. =
Its them who may discard a STUN connectivity check and by this make the han=
dshake as described currently stall.
 =

...
> =

> -d
> =


Peter
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 11:25:34 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4FF9B3A6B5D;
	Thu, 21 Aug 2008 11:25:34 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 12FE13A69F7
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 11:10:12 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -106.599
X-Spam-Level: 
X-Spam-Status: No, score=-106.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4, USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ZOCr1xOBB+KU for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 11:10:10 -0700 (PDT)
Received: from mail146.messagelabs.com (mail146.messagelabs.com [216.82.245.3])
	by core3.amsl.com (Postfix) with ESMTP id 0165F3A69A7
	for <sip@ietf.org>; Thu, 21 Aug 2008 11:10:09 -0700 (PDT)
X-VirusChecked: Checked
X-Env-Sender: mdolly@att.com
X-Msg-Ref: server-2.tower-146.messagelabs.com!1219342164!8004275!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [144.160.20.54]
Received: (qmail 13048 invoked from network); 21 Aug 2008 18:09:24 -0000
Received: from sbcsmtp7.sbc.com (HELO mlpi135.enaf.sfdc.sbc.com)
	(144.160.20.54)
	by server-2.tower-146.messagelabs.com with AES256-SHA encrypted SMTP;
	21 Aug 2008 18:09:24 -0000
Received: from enaf.sfdc.sbc.com (localhost.localdomain [127.0.0.1])
	by mlpi135.enaf.sfdc.sbc.com (8.14.0/8.14.0) with ESMTP id
	m7LI9N7a032233 for <sip@ietf.org>; Thu, 21 Aug 2008 14:09:24 -0400
Received: from gaalpa1msgusr7e.ugd.att.com (gaalpa1msgusr7e.ugd.att.com
	[135.53.26.19])
	by mlpi135.enaf.sfdc.sbc.com (8.14.0/8.14.0) with ESMTP id
	m7LI9Hw9032180 for <sip@ietf.org>; Thu, 21 Aug 2008 14:09:17 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 21 Aug 2008 14:09:16 -0400
Message-ID: <14C85D6CCBE92743AF33663BF5D24EBA56E36D@gaalpa1msgusr7e.ugd.att.com>
In-Reply-To: <C4D2F10C.7CB9%hsinnrei@adobe.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Early media as an endpoint application
Thread-Index: AckDoOumDEmekShGS02Y1uyPGUy4LgAF+6aw
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com>
	<C4D2F10C.7CB9%hsinnrei@adobe.com>
From: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>
To: "Henry Sinnreich" <hsinnrei@adobe.com>,
	"Dean Willis" <dean.willis@softarmor.com>, "Dan Wing" <dwing@Cisco.COM>
Cc: sip@ietf.org, ekr@rtfm.com
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I would prefer the phrase "media before Answer". In SIP, translates to
media before 200 OK. 

-----Original Message-----
From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
Henry Sinnreich
Sent: Thursday, August 21, 2008 11:17 AM
To: Dean Willis; Dan Wing
Cc: sip@ietf.org; ekr@rtfm.com
Subject: [Sip] Early media as an endpoint application

I have changed the Subject title

Early media should just be an endpoint application when the SIP endpoint
is
a PSTN gateway. This seems logical, or does it?

===================

I agree that early media has no role in pure/clean IP-IP communications,
but
only when connecting to the PSTN. Should early media support not be
localized in the respective SIP endpoints, that is in the SIP-PSTN
gateway?

Support of early media in the SIP-PSTN gateway would resolve this issue.

What do you think?

Henry


On 8/20/08 5:40 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:

> 
> On Aug 20, 2008, at 2:22 PM, Dan Wing wrote:
>> 
>> There are some apparently-legitimate uses of early media,
> 
> No there aren't, IMHO.
> 
>> at least
>> from the perspective of some network operators, to deliver things
>> like "Than you for using <operator>", advertisements, colorful
>> ringback
>> (music as ringback), and so on.  Brian did a great write-up of many
>> scenarios in the (now expired)
>> draft-stucker-sipping-early-media-coping-03.txt.
> 
> Well, if you caveat it that way., then your statement is correct. One
> might reasonably ask if those operators don't simply have their
> requirements confused.
> 
> My take, however, is that "early media" is a cop-out for coping with a
> fundamentally broken PSTN-interworking model, coupled with Bad Ideas
> about charging based on signaling rather than content.
> 
> But like forking, this genie has left the bottle, and we have to deal
> with the consequences of that failing as long as we have SIP 2.0.
> 
> ---
> Dean
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 11:51:27 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 531A53A6B44;
	Thu, 21 Aug 2008 11:51:27 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9AD0E3A6A89
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 11:38:21 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id HF+3fCjQqqwd for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 11:38:20 -0700 (PDT)
Received: from exprod6og102.obsmtp.com (exprod6og102.obsmtp.com [64.18.1.183])
	by core3.amsl.com (Postfix) with ESMTP id 48E883A69F7
	for <sip@ietf.org>; Thu, 21 Aug 2008 11:38:17 -0700 (PDT)
Received: from source ([192.150.8.22]) by exprod6ob102.postini.com
	([64.18.5.12]) with SMTP; Thu, 21 Aug 2008 11:37:31 PDT
Received: from inner-relay-3.eur.adobe.com (inner-relay-3b [10.128.4.236])
	by outbound-smtp-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7LIbPE0019131; Thu, 21 Aug 2008 11:37:27 -0700 (PDT)
Received: from fe1.corp.adobe.com (fe1.corp.adobe.com [10.8.192.70])
	by inner-relay-3.eur.adobe.com (8.12.10/8.12.9) with ESMTP id
	m7LIbFqJ016164; Thu, 21 Aug 2008 11:37:16 -0700 (PDT)
Received: from namail5.corp.adobe.com ([10.8.192.88]) by fe1.corp.adobe.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 21 Aug 2008 11:37:15 -0700
Received: from 10.7.240.237 ([10.7.240.237]) by namail5.corp.adobe.com
	([10.8.192.88]) with Microsoft Exchange Server HTTP-DAV ; 
	Thu, 21 Aug 2008 18:37:13 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Thu, 21 Aug 2008 13:41:22 -0500
From: Henry Sinnreich <hsinnrei@adobe.com>
To: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>,
	Dean Willis <dean.willis@softarmor.com>, Dan Wing <dwing@Cisco.COM>
Message-ID: <C4D32102.7CDE%hsinnrei@adobe.com>
Thread-Topic: [Sip] Early media as an endpoint application
Thread-Index: AckDoOumDEmekShGS02Y1uyPGUy4LgAF+6awAAEp6pw=
In-Reply-To: <14C85D6CCBE92743AF33663BF5D24EBA56E36D@gaalpa1msgusr7e.ugd.att.com>
Mime-version: 1.0
X-OriginalArrivalTime: 21 Aug 2008 18:37:15.0085 (UTC)
	FILETIME=[EEBCB7D0:01C903BC]
Cc: sip@ietf.org, ekr@rtfm.com
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> I would prefer the phrase "media before Answer". In SIP, translates to
> media before 200 OK.

Yes, "Media Before Answer" would be a more accurate description.
It would also help to make the distinction with existing Early Media
definitions and/or interpretations.

Henry


On 8/21/08 1:09 PM, "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com> wrote:

> I would prefer the phrase "media before Answer". In SIP, translates to
> media before 200 OK.
> 
> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
> Henry Sinnreich
> Sent: Thursday, August 21, 2008 11:17 AM
> To: Dean Willis; Dan Wing
> Cc: sip@ietf.org; ekr@rtfm.com
> Subject: [Sip] Early media as an endpoint application
> 
> I have changed the Subject title
> 
> Early media should just be an endpoint application when the SIP endpoint
> is
> a PSTN gateway. This seems logical, or does it?
> 
> ===================
> 
> I agree that early media has no role in pure/clean IP-IP communications,
> but
> only when connecting to the PSTN. Should early media support not be
> localized in the respective SIP endpoints, that is in the SIP-PSTN
> gateway?
> 
> Support of early media in the SIP-PSTN gateway would resolve this issue.
> 
> What do you think?
> 
> Henry
> 
> 
> On 8/20/08 5:40 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
> 
>> 
>> On Aug 20, 2008, at 2:22 PM, Dan Wing wrote:
>>> 
>>> There are some apparently-legitimate uses of early media,
>> 
>> No there aren't, IMHO.
>> 
>>> at least
>>> from the perspective of some network operators, to deliver things
>>> like "Than you for using <operator>", advertisements, colorful
>>> ringback
>>> (music as ringback), and so on.  Brian did a great write-up of many
>>> scenarios in the (now expired)
>>> draft-stucker-sipping-early-media-coping-03.txt.
>> 
>> Well, if you caveat it that way., then your statement is correct. One
>> might reasonably ask if those operators don't simply have their
>> requirements confused.
>> 
>> My take, however, is that "early media" is a cop-out for coping with a
>> fundamentally broken PSTN-interworking model, coupled with Bad Ideas
>> about charging based on signaling rather than content.
>> 
>> But like forking, this genie has left the bottle, and we have to deal
>> with the consequences of that failing as long as we have SIP 2.0.
>> 
>> ---
>> Dean
>> 
>> _______________________________________________
>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 12:44:52 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 82E783A69A7;
	Thu, 21 Aug 2008 12:44:52 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0A5163A69A7
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 12:44:51 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id HgGn7tifwGLH for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 12:44:50 -0700 (PDT)
Received: from exprod6og114.obsmtp.com (exprod6og114.obsmtp.com [64.18.1.33])
	by core3.amsl.com (Postfix) with ESMTP id A86F63A6783
	for <sip@ietf.org>; Thu, 21 Aug 2008 12:44:49 -0700 (PDT)
Received: from source ([192.150.8.22]) by exprod6ob114.postini.com
	([64.18.5.12]) with SMTP; Thu, 21 Aug 2008 12:43:55 PDT
Received: from inner-relay-1.corp.adobe.com ([153.32.1.51])
	by outbound-smtp-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7LDxLE0005848; Thu, 21 Aug 2008 06:59:22 -0700 (PDT)
Received: from fe2.corp.adobe.com (fe2.corp.adobe.com [10.8.192.72])
	by inner-relay-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7LDxGiq018910; Thu, 21 Aug 2008 06:59:16 -0700 (PDT)
Received: from namail5.corp.adobe.com ([10.8.192.88]) by fe2.corp.adobe.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 21 Aug 2008 06:59:15 -0700
Received: from 10.7.240.237 ([10.7.240.237]) by namail5.corp.adobe.com
	([10.8.192.88]) with Microsoft Exchange Server HTTP-DAV ; 
	Thu, 21 Aug 2008 13:59:15 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Thu, 21 Aug 2008 09:03:23 -0500
From: Henry Sinnreich <hsinnrei@adobe.com>
To: Dean Willis <dean.willis@softarmor.com>, Dan Wing <dwing@Cisco.COM>
Message-ID: <C4D2DFDB.7CB0%hsinnrei@adobe.com>
Thread-Topic: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
Thread-Index: AckDlqxzZPPxehLrEU+b096swPHO/w==
In-Reply-To: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com>
Mime-version: 1.0
X-OriginalArrivalTime: 21 Aug 2008 13:59:15.0884 (UTC)
	FILETIME=[19289EC0:01C90396]
Cc: sip@ietf.org, ekr@rtfm.com
Subject: Re: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I agree that early media has no role in pure/clean IP-IP communications, but
only when connecting to the PSTN. Should early media support not be
localized in the respective SIP endpoints, that is in the SIP-PSTN gateway?

Support of early media in the SIP-PSTN gateway would resolve this issue.

What do you think?

Henry


On 8/20/08 5:40 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:

> 
> On Aug 20, 2008, at 2:22 PM, Dan Wing wrote:
>> 
>> There are some apparently-legitimate uses of early media,
> 
> No there aren't, IMHO.
> 
>> at least
>> from the perspective of some network operators, to deliver things
>> like "Than you for using <operator>", advertisements, colorful
>> ringback
>> (music as ringback), and so on.  Brian did a great write-up of many
>> scenarios in the (now expired)
>> draft-stucker-sipping-early-media-coping-03.txt.
> 
> Well, if you caveat it that way., then your statement is correct. One
> might reasonably ask if those operators don't simply have their
> requirements confused.
> 
> My take, however, is that "early media" is a cop-out for coping with a
> fundamentally broken PSTN-interworking model, coupled with Bad Ideas
> about charging based on signaling rather than content.
> 
> But like forking, this genie has left the bottle, and we have to deal
> with the consequences of that failing as long as we have SIP 2.0.
> 
> ---
> Dean
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 12:56:53 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AF00E3A69A1;
	Thu, 21 Aug 2008 12:56:53 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 15A673A6A07
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 12:53:10 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.183
X-Spam-Level: 
X-Spam-Status: No, score=-2.183 tagged_above=-999 required=5 tests=[AWL=0.417, 
	BAYES_00=-2.599, SPF_PASS=-0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id M1bNIG8l6n6O for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 12:53:08 -0700 (PDT)
Received: from nostrum.com (nostrum-pt.tunnel.tserv2.fmt.ipv6.he.net
	[IPv6:2001:470:1f03:267::2])
	by core3.amsl.com (Postfix) with ESMTP id 73D303A698B
	for <sip@ietf.org>; Thu, 21 Aug 2008 12:53:08 -0700 (PDT)
Received: from [172.16.3.232] (vicuna-alt.estacado.net [75.53.54.121])
	(authenticated bits=0)
	by nostrum.com (8.14.2/8.14.1) with ESMTP id m7LJrCp7096778
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO);
	Thu, 21 Aug 2008 14:53:13 -0500 (CDT)
	(envelope-from rjsparks@nostrum.com)
Message-Id: <D7FE46DE-FFA4-4C3A-A0B1-215C822CA55D@nostrum.com>
From: Robert Sparks <rjsparks@nostrum.com>
To: "sip-implementors@lists.cs.columbia.edu Implementors"
	<sip-implementors@lists.cs.columbia.edu>, SIP IETF <sip@ietf.org>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Thu, 21 Aug 2008 14:53:11 -0500
X-Mailer: Apple Mail (2.926)
Received-SPF: pass (nostrum.com: 75.53.54.121 is authenticated by a trusted
	mechanism)
X-Virus-Scanned: ClamAV 0.93.3/8069/Thu Aug 21 12:36:55 2008 on
	shaman.nostrum.com
X-Virus-Status: Clean
Subject: [Sip] Reminder: SIPit 23 registration
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

SIPit 23 will be held in Lannion, France October 13-17, hosted by ETSI  
with technical support from France-Telecom Orange Labs.

Registration is 490Euro per participant, and the deadline for  
registration is October 3.

If you are planning to attend, please register early.

Also note that some of the hotel blocks reserved by ETSI (see http://www.etsi.org/plugtests/SIPit/hotel.htm) 
  expire Aug 31 and Sep 25 - Attendees are strongly encouraged to make  
reservations and travel arrangements as soon as possible.

More information and links to registration are available at
http://www.sipit.net
and
http://www.etsi.org/plugtests/SIPit/SIPit.htm

Thanks,

RjS

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 12:57:51 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 81D9A3A687E;
	Thu, 21 Aug 2008 12:57:51 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 822A63A69DF
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 12:55:12 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.403
X-Spam-Level: 
X-Spam-Status: No, score=-1.403 tagged_above=-999 required=5
	tests=[AWL=-0.663, BAYES_20=-0.74]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id N0b6o3favVvi for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 12:55:11 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 8DE393A68FF
	for <sip@ietf.org>; Thu, 21 Aug 2008 12:55:11 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7LJs9Sk001140
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Thu, 21 Aug 2008 14:54:10 -0500
Message-Id: <B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: "Dwight, Timothy M (Tim)" <timothy.dwight@verizonbusiness.com>
In-Reply-To: <092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Thu, 21 Aug 2008 14:54:03 -0500
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com>
	<C4D2F10C.7CB9%hsinnrei@adobe.com>
	<092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com>
X-Mailer: Apple Mail (2.928.1)
Cc: sip@ietf.org, Henry Sinnreich <hsinnrei@adobe.com>, ekr@rtfm.com,
	Dan Wing <dwing@Cisco.COM>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 21, 2008, at 10:37 AM, Dwight, Timothy M (Tim) wrote:

> What if you want to implement those or similar services between VoIP  
> end
> systems?  For example what if you want to provide "color ringback  
> tones"
> between VoIP end systems?  There is no PSTN gateway involvement in  
> such
> services.

The problem with early media is that it assumes that there is a need  
to transfer media BEFORE a session is "established". We inherit this  
assumption from the PSTN, because the PSTN billing model allows one- 
way media to flow from destination to origin before the call is  
"established". It works only because the stateful-everything prevents  
multiple early media sessions. With SIP, and forking, we get chaos.

So the "right answer" is to have two separate but fully negotiated SIP  
sessions -- one for the early media, one for the regular media.  The  
second session, should it occur, replaces the first (and we have a  
signaling mechanism to do just that). This eliminates the whole (or at  
least most of)  "early media" problem. But it confuses the heck out of  
bellheads who have decided to start billing based on the 200 OK, but  
also want to slavishly imitate the billing sequence of PSTN. It's  
stupid, broken, and can be manipulated to get vast amounts of "free  
long distance" out of the system, but it is deeply entrenched.

More on this: In the model I'm describing, a PSTN gateway handling a  
call from SIP to PSTN would send an initial 200/sendonly on receipt of  
the ACM (or equivalent). This would give us a SIP session for the  
"early media" phase. Then the gateway could either reinvite or refer/ 
replaces on the ANS.

The problem with this is that, if you're billing on the INVITE/200  
transaction, a naive system starts billing on the first INVITE/200  
(the early media).  So one needs a smarter billing system that 1)  
knows that the call is to a gateway, so it should start billing when  
the gateway initiates the bidirectional session, and 2) knows to bill  
the user, rather than the gateway.  This could be helped by a SIP  
exetension of some sort that identifies the early 200 OK as "early"

Now this isn't perfect, as if one forks a call, and one fork goes to a  
PSTN gateway, that's the fork you're going to get connected to every  
time, as it sends back the quickest 200 OK. But hey, if that's where  
you're getting media from, that's where you should be listening,  
right? Forking is broken. If it hurts, don't do it. Forking to a PSTN  
gateway really requires a B2BUA that understands the "early media  
session" model proposed above, and is smart enough to drop the early- 
media session if it gets a non-early 200 OK from another leg.

On a pure VoIP system, localized ringback is probably better handled  
with extensions to "alert-info".

--
Dean


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 14:25:34 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5E49E3A6AE5;
	Thu, 21 Aug 2008 14:25:34 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BFF723A6B7A
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 14:18:22 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mSCk8yd6T24h for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 14:18:21 -0700 (PDT)
Received: from exprod6og116.obsmtp.com (exprod6og116.obsmtp.com [64.18.1.37])
	by core3.amsl.com (Postfix) with ESMTP id 3D08B3A696F
	for <sip@ietf.org>; Thu, 21 Aug 2008 14:18:15 -0700 (PDT)
Received: from source ([192.150.8.22]) by exprod6ob116.postini.com
	([64.18.5.12]) with SMTP; Thu, 21 Aug 2008 14:17:17 PDT
Received: from inner-relay-1.corp.adobe.com ([153.32.1.51])
	by outbound-smtp-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7LLHAE0012146; Thu, 21 Aug 2008 14:17:13 -0700 (PDT)
Received: from fe2.corp.adobe.com (fe2.corp.adobe.com [10.8.192.72])
	by inner-relay-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7LLH9iq011433; Thu, 21 Aug 2008 14:17:09 -0700 (PDT)
Received: from namail5.corp.adobe.com ([10.8.192.88]) by fe2.corp.adobe.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 21 Aug 2008 14:17:09 -0700
Received: from 10.7.240.237 ([10.7.240.237]) by namail5.corp.adobe.com
	([10.8.192.88]) with Microsoft Exchange Server HTTP-DAV ; 
	Thu, 21 Aug 2008 21:17:09 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Thu, 21 Aug 2008 16:21:17 -0500
From: Henry Sinnreich <hsinnrei@adobe.com>
To: Dean Willis <dean.willis@softarmor.com>,
	"Dwight, Timothy M (Tim)" <timothy.dwight@verizonbusiness.com>
Message-ID: <C4D3467D.7CF3%hsinnrei@adobe.com>
Thread-Topic: [Sip] Early media as an endpoint application
Thread-Index: AckD09j5drmAof5Q+kiWT3uyPXxkMw==
In-Reply-To: <B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com>
Mime-version: 1.0
X-OriginalArrivalTime: 21 Aug 2008 21:17:09.0873 (UTC)
	FILETIME=[45AD2E10:01C903D3]
Cc: sip@ietf.org, ekr@rtfm.com, Dan Wing <dwing@Cisco.COM>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Dean,

How would the proposed "Media Before Answer" endpoint/gateway application
affect the billing in your opinion? Would it change anything with the issues
here below? 

(The SIP servers in the network do not need to understand "Media Before
Answer", they just do the rendezvous job)

Henry


On 8/21/08 2:54 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:

> 
> On Aug 21, 2008, at 10:37 AM, Dwight, Timothy M (Tim) wrote:
> 
>> What if you want to implement those or similar services between VoIP
>> end
>> systems?  For example what if you want to provide "color ringback
>> tones"
>> between VoIP end systems?  There is no PSTN gateway involvement in
>> such
>> services.
> 
> The problem with early media is that it assumes that there is a need
> to transfer media BEFORE a session is "established". We inherit this
> assumption from the PSTN, because the PSTN billing model allows one-
> way media to flow from destination to origin before the call is
> "established". It works only because the stateful-everything prevents
> multiple early media sessions. With SIP, and forking, we get chaos.
> 
> So the "right answer" is to have two separate but fully negotiated SIP
> sessions -- one for the early media, one for the regular media.  The
> second session, should it occur, replaces the first (and we have a
> signaling mechanism to do just that). This eliminates the whole (or at
> least most of)  "early media" problem. But it confuses the heck out of
> bellheads who have decided to start billing based on the 200 OK, but
> also want to slavishly imitate the billing sequence of PSTN. It's
> stupid, broken, and can be manipulated to get vast amounts of "free
> long distance" out of the system, but it is deeply entrenched.
> 
> More on this: In the model I'm describing, a PSTN gateway handling a
> call from SIP to PSTN would send an initial 200/sendonly on receipt of
> the ACM (or equivalent). This would give us a SIP session for the
> "early media" phase. Then the gateway could either reinvite or refer/
> replaces on the ANS.
> 
> The problem with this is that, if you're billing on the INVITE/200
> transaction, a naive system starts billing on the first INVITE/200
> (the early media).  So one needs a smarter billing system that 1)
> knows that the call is to a gateway, so it should start billing when
> the gateway initiates the bidirectional session, and 2) knows to bill
> the user, rather than the gateway.  This could be helped by a SIP
> exetension of some sort that identifies the early 200 OK as "early"
> 
> Now this isn't perfect, as if one forks a call, and one fork goes to a
> PSTN gateway, that's the fork you're going to get connected to every
> time, as it sends back the quickest 200 OK. But hey, if that's where
> you're getting media from, that's where you should be listening,
> right? Forking is broken. If it hurts, don't do it. Forking to a PSTN
> gateway really requires a B2BUA that understands the "early media
> session" model proposed above, and is smart enough to drop the early-
> media session if it gets a non-early 200 OK from another leg.
> 
> On a pure VoIP system, localized ringback is probably better handled
> with extensions to "alert-info".
> 
> --
> Dean
> 
> 

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 15:14:35 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D927C3A6A86;
	Thu, 21 Aug 2008 15:14:35 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1BFAB28C102
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 15:09:25 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.248
X-Spam-Level: 
X-Spam-Status: No, score=-4.248 tagged_above=-999 required=5
	tests=[AWL=-1.149, BAYES_00=-2.599, J_CHICKENPOX_56=0.6,
	J_CHICKENPOX_57=0.6, MANGLED_HERE=2.3, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id bcV5dPzXvc4a for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 15:09:23 -0700 (PDT)
Received: from sj-iport-3.cisco.com (sj-iport-3.cisco.com [171.71.176.72])
	by core3.amsl.com (Postfix) with ESMTP id D683628C0EB
	for <sip@ietf.org>; Thu, 21 Aug 2008 15:09:23 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,247,1217808000"; d="scan'208";a="96602606"
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-3.cisco.com with ESMTP; 21 Aug 2008 22:09:04 +0000
Received: from sj-core-3.cisco.com (sj-core-3.cisco.com [171.68.223.137])
	by sj-dkim-4.cisco.com (8.12.11/8.12.11) with ESMTP id m7LM94Hg030110; 
	Thu, 21 Aug 2008 15:09:04 -0700
Received: from dwingwxp01 ([10.32.240.194])
	by sj-core-3.cisco.com (8.13.8/8.13.8) with ESMTP id m7LM939W021046;
	Thu, 21 Aug 2008 22:09:03 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Schneider, Peter \(NSN - DE/Munich\)'" <peter.schneider@nsn.com>,
	"'Tschofenig, Hannes \(NSN - FI/Espoo\)'" <hannes.tschofenig@nsn.com>, 
	<jason@counterpath.com>, <ekr@rtfm.com>
References: <085BE88FD18EE94085EB8960172CA359E9CA78@DEMUEXC006.nsn-intra.net>
	<033901c902fa$185457b0$a2736b80@cisco.com>
	<085BE88FD18EE94085EB8960172CA359ED81AE@DEMUEXC006.nsn-intra.net>
Date: Thu, 21 Aug 2008 15:09:03 -0700
Message-ID: <0a1501c903da$85e43850$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acj4FXKRqVbVKo+7Rv62RrHIapSjKQK4k4twACvOcqAADG648A==
In-Reply-To: <085BE88FD18EE94085EB8960172CA359ED81AE@DEMUEXC006.nsn-intra.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=8322; t=1219356544;
	x=1220220544; c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Some=20comments=20on=20draft-ie
	tf-sip-dtls-srtp-framework-02 |Sender:=20;
	bh=L3kBLL2e7cM5fPBRAfZnKN5DJJ3oSEjN6jBAqb6a1gM=;
	b=F2KUvdhEvijFpjYiHheeo7absKCAJVoYmCvBReqaJGMa43Kve7qQVHIN1P
	ikN16rZUAVOEu07/+XToyeh1Lh59L0hcD/IzFQ9otOEjXnUKu/6+y4xDX1N2
	cPYakYDdgh;
Authentication-Results: sj-dkim-4; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim4002 verified; ); 
Cc: sip@ietf.org
Subject: Re: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> > -----Urspr=FCngliche Nachricht-----
> > Von: ext Dan Wing [mailto:dwing@cisco.com] =

> > Gesendet: Mittwoch, 20. August 2008 21:23
> > An: Schneider, Peter (NSN - DE/Munich); Tschofenig, Hannes =

> > (NSN - FI/Espoo); jason@counterpath.com; ekr@rtfm.com
> > Cc: sip@ietf.org
> > Betreff: RE: [Sip] Some comments on =

> > draft-ietf-sip-dtls-srtp-framework-02
> > =

> > > -----Original Message-----
> > > From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On =

> > > Behalf Of Schneider, Peter (NSN - DE/Munich)
> > > Sent: Wednesday, August 06, 2008 3:41 PM
> > > To: Tschofenig, Hannes (NSN - FI/Espoo); =

> > > jason@counterpath.com; ekr@rtfm.com
> > > Cc: sip@ietf.org
> > > Subject: [Sip] Some comments on =

> > draft-ietf-sip-dtls-srtp-framework-02
> > > =

> > > 1) The draft currently states in section 5:
> > > =

> > > "     The endpoint MUST use the setup attribute defined in =

> > [RFC4145].
> > >       The endpoint which is the offerer MUST use the =

> setup attribute
> > >       value of setup:actpass and be prepared to receive a =

> > client_hello
> > >       before it receives the answer.  The answerer SHOULD use =

> > > the setup
> > >       attribute value of setup:active and will send the =

> > > client_hello in
> > >       the media path."
> > > =

> > > My proposal is to replace the last sentence by "The =

> > answerer MUST use
> > > the setup
> > > attribute value of setup:active or the setup attribute value of
> > > setup:passive."
> > > =

> > > With this, if the receiver takes up the active role, as =

> > recommended in
> > > the original text, he can start the handshake and if the =

> > handshake has
> > > been carried out successfully before the SDP answer, he can send
> > > encrypted early media (before the SDP answer). Obviously, =

> > > with the usage
> > > of self signed certificates, the offerer can authenticate the =

> > > origin of
> > > the early media only retrospectively, after he has =

> received the SDP
> > > answer, which somewhat reduces the value of encrypting the =

> > > early media.
> > > Early media as well as a handshake at that point in time =

> > will however
> > > not work in an environment, where middleboxes are present =

> > > that will not
> > > let traffic pass in the media plane before the answer has =

> been sent.
> > > =

> > > So if the receiver assumes such an environment, he may decide =

> > > to take up
> > > the passive role. By this, the offerer will start the =

> > > handshake as soon
> > > as he receives an answer, which would typically be close to =

> > the first
> > > point in time at which the handshake messages will be able =

> > to pass the
> > > middleboxes.
> > =

> > But this will cause an SRTP-enabled call to suffer user-noticable
> > call setup delay (due to DTLS-SRTP handshake that needs to occur).
> > This is the R-CLIPPING requirement from =

> > draft-ietf-sip-media-security-requirements.
> =

> The receiver chooses "passive" because he lives in an =

> environment where a managed middlebox blocks the path before =

> the SDP answer is transmitted (as described in =

> draft-ietf-mmusic-media-path-middleboxes-01). Clipping will =

> happen not because of the passive role, but because of the middlebox.

Yes, the clipping is caused by the middlebox.  However, due to
the DTLS-SRTP handshake (2 round trips) the clipping for a =

DTLS-SRTP session will be more user noticable.

> > To avoid this clipping, we would need =

> > draft-ietf-sip-dtls-srtp-framework =

> > to require the SDP answer be sent reliably before 200 Okay =

> -- perhaps
> > using a technique similar to what ICE does to send SDP reliably
> > in 18x messages.  For DTLS-SRTP, this would mean re-transmitting
> > the 18x with the SDP answer until a DTLS Client Hello is =

> seen.  Would
> > that be acceptable?
> =

> Sending the SDP answer in the first provisional response is a =

> good idea and helps in the middlebox scenario. But this is =

> not an alternative to allowing the receiver of the offer to =

> take the passive role, but an addition. The receiver of the =

> offer must have the passive role if he re-transmits "the 18x =

> with the SDP answer until a DTLS Client Hello is seen", right? =


I have an idea for another approach, which might even be better =

than what is in the document right now:  leave the DTLS client/server =

roles as described in draft-ietf-sip-dtls-srtp-framework-02, and
when the offerer gets the 200 Ok, the offerer sends a DTLS
HelloRequest.  This will open NAT bindings and cause an SBC
to 'latch' -- just like an ICE connectivity check would.

(If there are no middleboxes interfering with the media path,
the answerer would have initiated DTLS-SRTP by its own accord
by sending ClientHello message(s).)

> ...
> > =

> > > 2) With respect to unmanaged (e.g. residential) stateful =

> > firewalls the
> > > draft currently states in section 6.6 that if ICE is not =

> > used and the
> > > handshake could not be completed (until offer and answer have been
> > > exchanged)
> > > =

> > >   "the passive side MUST
> > >    do a single unauthenticated STUN [I-D.ietf-behave-rfc3489bis]
> > >    connectivity check in order to open up the appropriate =

> > > pinhole.  All
> > >    implementations MUST be prepared to answer this request =

> > during the
> > >    handshake period even if they do not otherwise do ICE."
> > > =

> > > And later, in the message flow on page 13 and the respective
> > > explanations it becomes obvious that the idea is that the =

> > > sender of this
> > > STUN connectivity check in fact waits for an answer before =

> > he proceeds
> > =

> > There is no choice:  until the SDP answer arrives, the =

> > endpoint doesn't know
> > the IP address or port to send a STUN connectivity check.
> > =

> =

> The connectivity check is not sent by the SDP offerer in the =

> draft, but by the answerer - but this is not relevant for my =

> point, I think.

Here is the text from -02's Section 6.6, ("ICE Interaction"), =

with a correction that is needed in one sentence.  Other parts =

of the document describe the offerer as having the passive role, =

and Section 6.6, it is the offerer has the passive role and =

that sends the connectivity check:

   If ICE is not being used, then there is potential for a bad
   interaction with SBCs via "latching", as described in
   [I-D.ietf-mmusic-media-path-middleboxes].  In order to avoid this
   issue, if ICE is not being used and the DTLS handshake has not
   completed, upon receiving the other side's then the passive side MUST
                                             ^
                                         "SDP answer"
   do a single unauthenticated STUN [I-D.ietf-behave-rfc3489bis]
   connectivity check in order to open up the appropriate pinhole.  All
   implementations MUST be prepared to answer this request during the
   handshake period even if they do not otherwise do ICE.

> > > (although implementations must only *be prepared* to answer a
> > > connectivity request - I wonder whether "be prepared" =

> > should rather be
> > > removed from this sentence). However, if there are =

> > middleboxes on the
> > > path that block the STUN connectivity check, an answer will =

> > > never come,
> > > although the purpose of the connectivity check - to establish =

> > > a session
> > > in the residential firewall and open it up for incoming =

> > traffic - may
> > > already have been achieved.
> > =

> > Could you draw a diagram of such a network, and the location of such
> > a middlebox?
> >
> =

> Sorry, I have no diagram at hand. Let me explain better what =

> I had in mind: The draft assumes some unmanaged NAT or =

> firewall in this scenario, e.g. a residential one, close to =

> the UA. IN ADDITION, there still can be the (managed) =

> middleboxes described in =

> draft-ietf-mmusic-media-path-middleboxes-01. Its them who may =

> discard a STUN connectivity check and by this make the =

> handshake as described currently stall.

Ok -- so a standard consumer VoIP box connected to a as-typically-deployed
SBC.

-d

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 16:05:49 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 25FD73A6950;
	Thu, 21 Aug 2008 16:05:49 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0C1693A6800
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 16:05:11 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -106.599
X-Spam-Level: 
X-Spam-Status: No, score=-106.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4, USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id r4Ed-RnDUysV for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 16:05:10 -0700 (PDT)
Received: from mail121.messagelabs.com (mail121.messagelabs.com
	[216.82.245.115])
	by core3.amsl.com (Postfix) with ESMTP id B600E3A67E6
	for <sip@ietf.org>; Thu, 21 Aug 2008 16:05:09 -0700 (PDT)
X-VirusChecked: Checked
X-Env-Sender: mdolly@att.com
X-Msg-Ref: server-7.tower-121.messagelabs.com!1219359879!24184601!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [144.160.20.54]
Received: (qmail 16795 invoked from network); 21 Aug 2008 23:04:40 -0000
Received: from sbcsmtp7.sbc.com (HELO mlpi135.enaf.sfdc.sbc.com)
	(144.160.20.54)
	by server-7.tower-121.messagelabs.com with AES256-SHA encrypted SMTP;
	21 Aug 2008 23:04:40 -0000
Received: from enaf.sfdc.sbc.com (localhost.localdomain [127.0.0.1])
	by mlpi135.enaf.sfdc.sbc.com (8.14.0/8.14.0) with ESMTP id
	m7LN4dNk017561 for <sip@ietf.org>; Thu, 21 Aug 2008 19:04:39 -0400
Received: from gaalpa1msgusr7e.ugd.att.com (gaalpa1msgusr7e.ugd.att.com
	[135.53.26.19])
	by mlpi135.enaf.sfdc.sbc.com (8.14.0/8.14.0) with ESMTP id
	m7LN4YQp017528 for <sip@ietf.org>; Thu, 21 Aug 2008 19:04:34 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 21 Aug 2008 19:04:34 -0400
Message-ID: <14C85D6CCBE92743AF33663BF5D24EBA56E371@gaalpa1msgusr7e.ugd.att.com>
In-Reply-To: <C4D3467D.7CF3%hsinnrei@adobe.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Early media as an endpoint application
Thread-Index: AckD09j5drmAof5Q+kiWT3uyPXxkMwADihxg
References: <B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com>
	<C4D3467D.7CF3%hsinnrei@adobe.com>
From: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>
To: "Henry Sinnreich" <hsinnrei@adobe.com>,
	"Dean Willis" <dean.willis@softarmor.com>,
	"Dwight, Timothy M (Tim)" <timothy.dwight@verizonbusiness.com>
Cc: sip@ietf.org, ekr@rtfm.com, Dan Wing <dwing@Cisco.COM>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Dean,

Wrong, ISUP allows for media  in both directions before answer.

Also, is the IETF taking on the topic of "billing/charging" now?

Martin 

-----Original Message-----
From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
Henry Sinnreich
Sent: Thursday, August 21, 2008 5:21 PM
To: Dean Willis; Dwight, Timothy M (Tim)
Cc: sip@ietf.org; ekr@rtfm.com; Dan Wing
Subject: Re: [Sip] Early media as an endpoint application

Dean,

How would the proposed "Media Before Answer" endpoint/gateway
application
affect the billing in your opinion? Would it change anything with the
issues
here below? 

(The SIP servers in the network do not need to understand "Media Before
Answer", they just do the rendezvous job)

Henry


On 8/21/08 2:54 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:

> 
> On Aug 21, 2008, at 10:37 AM, Dwight, Timothy M (Tim) wrote:
> 
>> What if you want to implement those or similar services between VoIP
>> end
>> systems?  For example what if you want to provide "color ringback
>> tones"
>> between VoIP end systems?  There is no PSTN gateway involvement in
>> such
>> services.
> 
> The problem with early media is that it assumes that there is a need
> to transfer media BEFORE a session is "established". We inherit this
> assumption from the PSTN, because the PSTN billing model allows one-
> way media to flow from destination to origin before the call is
> "established". It works only because the stateful-everything prevents
> multiple early media sessions. With SIP, and forking, we get chaos.
> 
> So the "right answer" is to have two separate but fully negotiated SIP
> sessions -- one for the early media, one for the regular media.  The
> second session, should it occur, replaces the first (and we have a
> signaling mechanism to do just that). This eliminates the whole (or at
> least most of)  "early media" problem. But it confuses the heck out of
> bellheads who have decided to start billing based on the 200 OK, but
> also want to slavishly imitate the billing sequence of PSTN. It's
> stupid, broken, and can be manipulated to get vast amounts of "free
> long distance" out of the system, but it is deeply entrenched.
> 
> More on this: In the model I'm describing, a PSTN gateway handling a
> call from SIP to PSTN would send an initial 200/sendonly on receipt of
> the ACM (or equivalent). This would give us a SIP session for the
> "early media" phase. Then the gateway could either reinvite or refer/
> replaces on the ANS.
> 
> The problem with this is that, if you're billing on the INVITE/200
> transaction, a naive system starts billing on the first INVITE/200
> (the early media).  So one needs a smarter billing system that 1)
> knows that the call is to a gateway, so it should start billing when
> the gateway initiates the bidirectional session, and 2) knows to bill
> the user, rather than the gateway.  This could be helped by a SIP
> exetension of some sort that identifies the early 200 OK as "early"
> 
> Now this isn't perfect, as if one forks a call, and one fork goes to a
> PSTN gateway, that's the fork you're going to get connected to every
> time, as it sends back the quickest 200 OK. But hey, if that's where
> you're getting media from, that's where you should be listening,
> right? Forking is broken. If it hurts, don't do it. Forking to a PSTN
> gateway really requires a B2BUA that understands the "early media
> session" model proposed above, and is smart enough to drop the early-
> media session if it gets a non-early 200 OK from another leg.
> 
> On a pure VoIP system, localized ringback is probably better handled
> with extensions to "alert-info".
> 
> --
> Dean
> 
> 

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 16:47:17 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 44A513A6BD1;
	Thu, 21 Aug 2008 16:47:17 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 450B33A6809;
	Thu, 21 Aug 2008 16:45:35 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -105.372
X-Spam-Level: 
X-Spam-Status: No, score=-105.372 tagged_above=-999 required=5
	tests=[AWL=-1.228, BAYES_00=-2.599, FRT_ADOBE2=2.455,
	RCVD_IN_DNSWL_MED=-4, USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id oD09lLL4iWbD; Thu, 21 Aug 2008 16:45:28 -0700 (PDT)
Received: from mail120.messagelabs.com (mail120.messagelabs.com
	[216.82.250.83])
	by core3.amsl.com (Postfix) with ESMTP id 4D66828C119;
	Thu, 21 Aug 2008 16:45:24 -0700 (PDT)
X-VirusChecked: Checked
X-Env-Sender: mdolly@att.com
X-Msg-Ref: server-3.tower-120.messagelabs.com!1219362276!34432035!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [144.160.20.54]
Received: (qmail 21837 invoked from network); 21 Aug 2008 23:44:37 -0000
Received: from sbcsmtp7.sbc.com (HELO mlpi135.enaf.sfdc.sbc.com)
	(144.160.20.54)
	by server-3.tower-120.messagelabs.com with AES256-SHA encrypted SMTP;
	21 Aug 2008 23:44:37 -0000
Received: from enaf.sfdc.sbc.com (localhost.localdomain [127.0.0.1])
	by mlpi135.enaf.sfdc.sbc.com (8.14.0/8.14.0) with ESMTP id
	m7LNiahQ028439; Thu, 21 Aug 2008 19:44:36 -0400
Received: from gaalpa1msgusr7e.ugd.att.com (gaalpa1msgusr7e.ugd.att.com
	[135.53.26.19])
	by mlpi135.enaf.sfdc.sbc.com (8.14.0/8.14.0) with ESMTP id
	m7LNiWBt028422; Thu, 21 Aug 2008 19:44:33 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 21 Aug 2008 19:44:32 -0400
Message-ID: <14C85D6CCBE92743AF33663BF5D24EBA56E374@gaalpa1msgusr7e.ugd.att.com>
In-Reply-To: <2111245615-1219361799-cardhu_decombobulator_blackberry.rim.net-2145149396-@bxe025.bisx.prod.on.blackberry>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Early media as an endpoint application
Thread-Index: AckD5saC4jpJeeQAQrqmTOyOFEz5MQAAOq6w
References: <B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><C4D3467D.7CF3%hsinnrei@adobe.com><14C85D6CCBE92743AF33663BF5D24EBA56E371@gaalpa1msgusr7e.ugd.att.com>
	<2111245615-1219361799-cardhu_decombobulator_blackberry.rim.net-2145149396-@bxe025.bisx.prod.on.blackberry>
From: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>
To: <dyork@voxeo.com>, <sip-bounces@ietf.org>,
	"Henry Sinnreich" <hsinnrei@adobe.com>,
	"Dean Willis" <dean.willis@softarmor.com>,
	"Dwight, Timothy M (Tim)" <timothy.dwight@verizonbusiness.com>
Cc: sip@ietf.org, ekr@rtfm.com, Dan Wing <dwing@Cisco.COM>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Dan,

I support a draft that relays a CN, but would have issues with the IETF
addressing issues WRT when billing/charging should begin and end.

Martin 

-----Original Message-----
From: Dan York [mailto:dyork@voxeo.com] 
Sent: Thursday, August 21, 2008 7:37 PM
To: DOLLY, MARTIN C, ATTLABS; sip-bounces@ietf.org; Henry Sinnreich;
Dean Willis; Dwight, Timothy M (Tim)
Cc: sip@ietf.org; ekr@rtfm.com; Dan Wing
Subject: Re: [Sip] Early media as an endpoint application

Martin,

To a certain degree, some of us have already been taking on the
billing/charging question. See my P-Charge-Info draft (which I have been
told in comments today is doing something similar to the ISUP Charge
Number parameter).

Dan
-- 
Dan York, CISSP, Director of Emerging Communication Technology
Office of the CTO    Voxeo Corporation     dyork@voxeo.com
Phone: +1-407-455-5859  Skype: danyork  http://www.voxeo.com
Blogs: http://blogs.voxeo.com  http://www.disruptivetelephony.com

Bring your web applications to the phone.
Find out how at http://evolution.voxeo.com



-----Original Message-----
From: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>

Date: Thu, 21 Aug 2008 19:04:34 
To: Henry Sinnreich<hsinnrei@adobe.com>; Dean
Willis<dean.willis@softarmor.com>; Dwight, Timothy M
(Tim)<timothy.dwight@verizonbusiness.com>
Cc: <sip@ietf.org>; <ekr@rtfm.com>; Dan Wing<dwing@Cisco.COM>
Subject: Re: [Sip] Early media as an endpoint application


Dean,

Wrong, ISUP allows for media  in both directions before answer.

Also, is the IETF taking on the topic of "billing/charging" now?

Martin

-----Original Message-----
From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
Henry Sinnreich
Sent: Thursday, August 21, 2008 5:21 PM
To: Dean Willis; Dwight, Timothy M (Tim)
Cc: sip@ietf.org; ekr@rtfm.com; Dan Wing
Subject: Re: [Sip] Early media as an endpoint application

Dean,

How would the proposed "Media Before Answer" endpoint/gateway
application
affect the billing in your opinion? Would it change anything with the
issues
here below?

(The SIP servers in the network do not need to understand "Media Before
Answer", they just do the rendezvous job)

Henry


On 8/21/08 2:54 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:

>
> On Aug 21, 2008, at 10:37 AM, Dwight, Timothy M (Tim) wrote:
>
>> What if you want to implement those or similar services between VoIP
>> end
>> systems?  For example what if you want to provide "color ringback
>> tones"
>> between VoIP end systems?  There is no PSTN gateway involvement in
>> such
>> services.
>
> The problem with early media is that it assumes that there is a need
> to transfer media BEFORE a session is "established". We inherit this
> assumption from the PSTN, because the PSTN billing model allows one-
> way media to flow from destination to origin before the call is
> "established". It works only because the stateful-everything prevents
> multiple early media sessions. With SIP, and forking, we get chaos.
>
> So the "right answer" is to have two separate but fully negotiated SIP
> sessions -- one for the early media, one for the regular media.  The
> second session, should it occur, replaces the first (and we have a
> signaling mechanism to do just that). This eliminates the whole (or at
> least most of)  "early media" problem. But it confuses the heck out of
> bellheads who have decided to start billing based on the 200 OK, but
> also want to slavishly imitate the billing sequence of PSTN. It's
> stupid, broken, and can be manipulated to get vast amounts of "free
> long distance" out of the system, but it is deeply entrenched.
>
> More on this: In the model I'm describing, a PSTN gateway handling a
> call from SIP to PSTN would send an initial 200/sendonly on receipt of
> the ACM (or equivalent). This would give us a SIP session for the
> "early media" phase. Then the gateway could either reinvite or refer/
> replaces on the ANS.
>
> The problem with this is that, if you're billing on the INVITE/200
> transaction, a naive system starts billing on the first INVITE/200
> (the early media).  So one needs a smarter billing system that 1)
> knows that the call is to a gateway, so it should start billing when
> the gateway initiates the bidirectional session, and 2) knows to bill
> the user, rather than the gateway.  This could be helped by a SIP
> exetension of some sort that identifies the early 200 OK as "early"
>
> Now this isn't perfect, as if one forks a call, and one fork goes to a
> PSTN gateway, that's the fork you're going to get connected to every
> time, as it sends back the quickest 200 OK. But hey, if that's where
> you're getting media from, that's where you should be listening,
> right? Forking is broken. If it hurts, don't do it. Forking to a PSTN
> gateway really requires a B2BUA that understands the "early media
> session" model proposed above, and is smart enough to drop the early-
> media session if it gets a non-early 200 OK from another leg.
>
> On a pure VoIP system, localized ringback is probably better handled
> with extensions to "alert-info".
>
> --
> Dean
>
>

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 21 17:32:45 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 875FB28C0D7;
	Thu, 21 Aug 2008 17:32:45 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B6A013A69EB
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 17:29:23 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5 tests=[AWL=0.000, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id fE668GlKStE7 for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 17:29:22 -0700 (PDT)
Received: from gs19.inmotionhosting.com (gs19b.inmotionhosting.com
	[66.117.3.189]) by core3.amsl.com (Postfix) with ESMTP id E74523A69DD
	for <SIP@ietf.org>; Thu, 21 Aug 2008 17:29:22 -0700 (PDT)
Received: from [75.68.119.237] (port=62658 helo=[192.168.15.101])
	by gs19.inmotionhosting.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68) (envelope-from <eburger@standardstrack.com>)
	id 1KWKWO-0004HW-Oz; Thu, 21 Aug 2008 17:28:57 -0700
Message-Id: <B7C01274-E841-400A-ADD4-934D1B9EB7DD@standardstrack.com>
From: Eric Burger <eburger@standardstrack.com>
To: Paul Kyzivat <pkyzivat@cisco.com>,
 John Elwell <john.elwell@siemens.com>
In-Reply-To: <48AC4490.2090308@cisco.com>
Mime-Version: 1.0 (Apple Message framework v926)
Date: Thu, 21 Aug 2008 20:29:01 -0400
References: <0D5F89FAC29E2C41B98A6A762007F5D0010197C4@GBNTHT12009MSX.gb002.siemens.net>
	<48AC4490.2090308@cisco.com>
X-Mailer: Apple Mail (2.926)
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs19.inmotionhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - standardstrack.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Cc: SIP IETF <SIP@ietf.org>
Subject: Re: [Sip] Comments on draft-kaplan-sip-info-events-01
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0748700539=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


--===============0748700539==
Content-Type: multipart/signed; boundary=Apple-Mail-88-539573326; micalg=sha1; protocol="application/pkcs7-signature"


--Apple-Mail-88-539573326
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Good thing I'm not done with the update :-)
On Aug 20, 2008, at 12:21 PM, Paul Kyzivat wrote:

>
>
> Elwell, John wrote:
>> 1. Section 6.1 includes a question whether it is OK to prohibit
>> Send-Info/Recv-Info in re-INVITE or UPDATE, and mentions that Adam
>> points out 3PCC needs it. I agree with Adam.
>> 2. There is no provision for Send-Info/Recv-Info in 200/ACK (i.e.
>> omitting from an INVITE request, in the same way that SDP offer can  
>> be
>> omitted). It seems to me that some of the use cases that motivate  
>> INVITE
>> without SDP offer could also motivate INVITE without
>> Send-Info/Recv-Info. For example, a 3PCC make-call might need to do
>> this.
>
> Yep. It is usually my role to remind people that it isn't done until  
> it works with 3PCC. But thats true regardless of who does the  
> reminding.
>
> 	Thanks,
> 	Paul
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip


--Apple-Mail-88-539573326
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGPTCCBjkw
ggUhoAMCAQICEC+VK1RLWxrF8KJZDR9k8p8wDQYJKoZIhvcNAQEFBQAwga4xCzAJBgNVBAYTAlVT
MQswCQYDVQQIEwJVVDEXMBUGA1UEBxMOU2FsdCBMYWtlIENpdHkxHjAcBgNVBAoTFVRoZSBVU0VS
VFJVU1QgTmV0d29yazEhMB8GA1UECxMYaHR0cDovL3d3dy51c2VydHJ1c3QuY29tMTYwNAYDVQQD
Ey1VVE4tVVNFUkZpcnN0LUNsaWVudCBBdXRoZW50aWNhdGlvbiBhbmQgRW1haWwwHhcNMDgwODEz
MDAwMDAwWhcNMDkwODEzMjM1OTU5WjCB4TE1MDMGA1UECxMsQ29tb2RvIFRydXN0IE5ldHdvcmsg
LSBQRVJTT05BIE5PVCBWQUxJREFURUQxRjBEBgNVBAsTPVRlcm1zIGFuZCBDb25kaXRpb25zIG9m
IHVzZTogaHR0cDovL3d3dy5jb21vZG8ubmV0L3JlcG9zaXRvcnkxHzAdBgNVBAsTFihjKTIwMDMg
Q29tb2RvIExpbWl0ZWQxFDASBgNVBAMTC0VyaWMgQnVyZ2VyMSkwJwYJKoZIhvcNAQkBFhplYnVy
Z2VyQHN0YW5kYXJkc3RyYWNrLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMTF
RRoA4LgOACMFph0aomRC/UpqoA5C/d6DUTOvTMrYSEqkjwnU4zxDtBcHlcB4AxKAov00MYsUvEU4
loz7BHjfDjv76AIkcwu33VYQbzGmarVnyaXsVb6f/cyRL3fPT0VOVO2tQAEEgwg//CX0jN8Kn2jH
uXD/HEvko7cmpL3Pwevf3+DwB61v7ca79PpEZfn/WhaqRKA4uVNPj/JbieeaLo2v/0RJzrEElZK0
pHCqxiD3mQ8ossPkA9fUCSxLlbdMcPU3be5x8vt8Q8mYTXF5Z3d9RZmYrmNkvTQtdzVpfYWr/hgV
Xqm9tByOOAR+hoN3FKbubR/OrAHL9yDAd4sCAwEAAaOCAhwwggIYMB8GA1UdIwQYMBaAFImCZ33E
nSZwAEu0UEh83j2uBG59MB0GA1UdDgQWBBRDWgutb7b8R/L7G3Y3D+molAA3VzAOBgNVHQ8BAf8E
BAMCBaAwDAYDVR0TAQH/BAIwADAgBgNVHSUEGTAXBggrBgEFBQcDBAYLKwYBBAGyMQEDBQIwEQYJ
YIZIAYb4QgEBBAQDAgUgMEYGA1UdIAQ/MD0wOwYMKwYBBAGyMQECAQEBMCswKQYIKwYBBQUHAgEW
HWh0dHBzOi8vc2VjdXJlLmNvbW9kby5uZXQvQ1BTMIGlBgNVHR8EgZ0wgZowTKBKoEiGRmh0dHA6
Ly9jcmwuY29tb2RvY2EuY29tL1VUTi1VU0VSRmlyc3QtQ2xpZW50QXV0aGVudGljYXRpb25hbmRF
bWFpbC5jcmwwSqBIoEaGRGh0dHA6Ly9jcmwuY29tb2RvLm5ldC9VVE4tVVNFUkZpcnN0LUNsaWVu
dEF1dGhlbnRpY2F0aW9uYW5kRW1haWwuY3JsMGwGCCsGAQUFBwEBBGAwXjA2BggrBgEFBQcwAoYq
aHR0cDovL2NydC5jb21vZG9jYS5jb20vVVROQUFBQ2xpZW50Q0EuY3J0MCQGCCsGAQUFBzABhhho
dHRwOi8vb2NzcC5jb21vZG9jYS5jb20wJQYDVR0RBB4wHIEaZWJ1cmdlckBzdGFuZGFyZHN0cmFj
ay5jb20wDQYJKoZIhvcNAQEFBQADggEBAGeBR7NPCvrY3GQoIi49JOuciatY2r4st905Jw1etp6J
umFFWlaCBl11tFSclk/3S45B+lUv3SEvG4CEjUByPScprVmCqHR+y8BAQaB/CV+N1y14x3MbhJ+Z
8XDGKeUXuuyGd9w0l3/t/QPid6TRXQjQFrLPFs1IALuNpNiFMHEF/xFbMG1Z2vznR/gSPlePekoZ
TqcExIDBNZTBebpZqwAXzPpedNNOclbMLFLWDMOAozVRpkfjI0eiFsk8SF1Ho1Gb9Bx8DeG4peE2
KRVOR9FFnZZgBpFjXYRcglsMOSKCY8HgE+NGvbbqbrMoBV/BlYyxRXwfti71RL9Zs2Cq1eQxggP8
MIID+AIBATCBwzCBrjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAlVUMRcwFQYDVQQHEw5TYWx0IExh
a2UgQ2l0eTEeMBwGA1UEChMVVGhlIFVTRVJUUlVTVCBOZXR3b3JrMSEwHwYDVQQLExhodHRwOi8v
d3d3LnVzZXJ0cnVzdC5jb20xNjA0BgNVBAMTLVVUTi1VU0VSRmlyc3QtQ2xpZW50IEF1dGhlbnRp
Y2F0aW9uIGFuZCBFbWFpbAIQL5UrVEtbGsXwolkNH2TynzAJBgUrDgMCGgUAoIICDTAYBgkqhkiG
9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0wODA4MjIwMDI5MDJaMCMGCSqGSIb3
DQEJBDEWBBTF8JZrXPiyDtDskCdtEdNLO/ZhZDCB1AYJKwYBBAGCNxAEMYHGMIHDMIGuMQswCQYD
VQQGEwJVUzELMAkGA1UECBMCVVQxFzAVBgNVBAcTDlNhbHQgTGFrZSBDaXR5MR4wHAYDVQQKExVU
aGUgVVNFUlRSVVNUIE5ldHdvcmsxITAfBgNVBAsTGGh0dHA6Ly93d3cudXNlcnRydXN0LmNvbTE2
MDQGA1UEAxMtVVROLVVTRVJGaXJzdC1DbGllbnQgQXV0aGVudGljYXRpb24gYW5kIEVtYWlsAhAv
lStUS1saxfCiWQ0fZPKfMIHWBgsqhkiG9w0BCRACCzGBxqCBwzCBrjELMAkGA1UEBhMCVVMxCzAJ
BgNVBAgTAlVUMRcwFQYDVQQHEw5TYWx0IExha2UgQ2l0eTEeMBwGA1UEChMVVGhlIFVTRVJUUlVT
VCBOZXR3b3JrMSEwHwYDVQQLExhodHRwOi8vd3d3LnVzZXJ0cnVzdC5jb20xNjA0BgNVBAMTLVVU
Ti1VU0VSRmlyc3QtQ2xpZW50IEF1dGhlbnRpY2F0aW9uIGFuZCBFbWFpbAIQL5UrVEtbGsXwolkN
H2TynzANBgkqhkiG9w0BAQEFAASCAQCA2hq+okVRKIQ/aZl61EKqCtqk0CATWziGgHWJQf2lF7CZ
a7iwPTRdQCzMV6VpiZwh4I71+qkSZUdb0CK5uy1TsQl8AOcunhSAADkIEMUZ/2Kco3bGZYVUfrlu
GF4bCVf6nMjLtBvJEB4mBU2TGexcMTCfhHpWKGbi4VcIfAhCU6dJ/GqKHMC0PHmxc6h8E8HfE8LG
TKXddw3wH28pbWQom4p9DvltlN6Aj4+7X9GZKtb6j0zPDtcDtyTC9V+1I9UgDStf3oy/ueEdoWDC
R68DQCdYod4fQW/MizoiSwe3glkfeJTk2jk9OSK5vfNVMuKp6Ni0tOfAezWZLXJ15dmyAAAAAAAA

--Apple-Mail-88-539573326--

--===============0748700539==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0748700539==--


From sip-bounces@ietf.org  Thu Aug 21 19:56:54 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 151B628C1C5;
	Thu, 21 Aug 2008 19:56:34 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B2D073A6878
	for <sip@core3.amsl.com>; Thu, 21 Aug 2008 19:42:27 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XmiMkJuQebhL for <sip@core3.amsl.com>;
	Thu, 21 Aug 2008 19:42:26 -0700 (PDT)
Received: from ashesmtp02.verizonbusiness.com (ashesmtp02.verizonbusiness.com
	[198.4.8.166]) by core3.amsl.com (Postfix) with ESMTP id B1C983A67DD
	for <sip@ietf.org>; Thu, 21 Aug 2008 19:42:26 -0700 (PDT)
Received: from pmismtp02.mcilink.com ([166.37.158.162])
	by firewall.verizonbusiness.com
	(Sun Java(tm) System Messaging Server 6.3-5.02 (built Oct 12 2007;
	32bit))
	with ESMTP id <0K5Z00M8DE04MU00@firewall.verizonbusiness.com> for
	sip@ietf.org; Fri, 22 Aug 2008 02:38:28 +0000 (GMT)
Received: from pmismtp02.mcilink.com ([127.0.0.1])
	by pmismtp02.mcilink.com (iPlanet Messaging Server 5.2 HotFix 2.08
	(built Sep
	22 2005)) with SMTP id <0K5Z00LFAE03SA@pmismtp02.mcilink.com> for
	sip@ietf.org; Fri, 22 Aug 2008 02:38:28 +0000 (GMT)
Received: from ASHSRV141.mcilink.com ([153.39.68.167])
	by pmismtp02.mcilink.com (iPlanet Messaging Server 5.2 HotFix 2.08
	(built Sep
	22 2005)) with ESMTP id <0K5Z00M7ZE03ZJ@pmismtp02.mcilink.com> for
	sip@ietf.org; Fri, 22 Aug 2008 02:38:27 +0000 (GMT)
Received: from ASHEVS002.mcilink.com ([153.39.71.1])
	by ASHSRV141.mcilink.com with Microsoft SMTPSVC(6.0.3790.3959); Fri,
	22 Aug 2008 02:38:26 +0000
Date: Fri, 22 Aug 2008 02:38:13 +0000
From: "Dwight, Timothy M (Tim)" <timothy.dwight@verizonbusiness.com>
In-reply-to: <B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com>
To: Dean Willis <dean.willis@softarmor.com>
Message-id: <092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
Thread-topic: [Sip] Early media as an endpoint application
Thread-index: AckDyhYn8gJn4XCdTwO8RU19V9AymAAM3bNw
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com>
	<C4D2F10C.7CB9%hsinnrei@adobe.com>
	<092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com>
	<B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com>
X-OriginalArrivalTime: 22 Aug 2008 02:38:26.0992 (UTC)
	FILETIME=[27BC1B00:01C90400]
Cc: sip@ietf.org, Henry Sinnreich <hsinnrei@adobe.com>, ekr@rtfm.com,
	Dan Wing <dwing@Cisco.COM>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I'm sorry but it seems pretty far-fetched to try and blame SIP
shortcomings on "Bell-heads".  Since when have they (we) been that
influential?

My point to Henry was just that this "problem" is not specific to PSTN
gateways; so it wouldn't be appropriate to confine its solution to such
a device.  The need for media interaction prior to call completion
(which as Martin notes can be 2-way) arises from the intermediated
service model; which is as applicable to VoIP as to circuit switched
networks.

Tim


> -----Original Message-----
> From: Dean Willis [mailto:dean.willis@softarmor.com] 
> Sent: Thursday, August 21, 2008 2:54 PM
> To: Dwight, Timothy M (Tim)
> Cc: Henry Sinnreich; Dan Wing; sip@ietf.org; ekr@rtfm.com
> Subject: Re: [Sip] Early media as an endpoint application
> 
> 
> On Aug 21, 2008, at 10:37 AM, Dwight, Timothy M (Tim) wrote:
> 
> > What if you want to implement those or similar services 
> between VoIP  
> > end
> > systems?  For example what if you want to provide "color ringback  
> > tones"
> > between VoIP end systems?  There is no PSTN gateway involvement in  
> > such
> > services.
> 
> The problem with early media is that it assumes that there is a need  
> to transfer media BEFORE a session is "established". We inherit this  
> assumption from the PSTN, because the PSTN billing model allows one- 
> way media to flow from destination to origin before the call is  
> "established". It works only because the stateful-everything 
> prevents  
> multiple early media sessions. With SIP, and forking, we get chaos.
> 
> So the "right answer" is to have two separate but fully 
> negotiated SIP  
> sessions -- one for the early media, one for the regular media.  The  
> second session, should it occur, replaces the first (and we have a  
> signaling mechanism to do just that). This eliminates the 
> whole (or at  
> least most of)  "early media" problem. But it confuses the 
> heck out of  
> bellheads who have decided to start billing based on the 200 OK, but  
> also want to slavishly imitate the billing sequence of PSTN. It's  
> stupid, broken, and can be manipulated to get vast amounts of "free  
> long distance" out of the system, but it is deeply entrenched.
> 
> More on this: In the model I'm describing, a PSTN gateway handling a  
> call from SIP to PSTN would send an initial 200/sendonly on 
> receipt of  
> the ACM (or equivalent). This would give us a SIP session for the  
> "early media" phase. Then the gateway could either reinvite or refer/ 
> replaces on the ANS.
> 
> The problem with this is that, if you're billing on the INVITE/200  
> transaction, a naive system starts billing on the first INVITE/200  
> (the early media).  So one needs a smarter billing system that 1)  
> knows that the call is to a gateway, so it should start billing when  
> the gateway initiates the bidirectional session, and 2) knows 
> to bill  
> the user, rather than the gateway.  This could be helped by a SIP  
> exetension of some sort that identifies the early 200 OK as "early"
> 
> Now this isn't perfect, as if one forks a call, and one fork 
> goes to a  
> PSTN gateway, that's the fork you're going to get connected to every  
> time, as it sends back the quickest 200 OK. But hey, if that's where  
> you're getting media from, that's where you should be listening,  
> right? Forking is broken. If it hurts, don't do it. Forking 
> to a PSTN  
> gateway really requires a B2BUA that understands the "early media  
> session" model proposed above, and is smart enough to drop the early- 
> media session if it gets a non-early 200 OK from another leg.
> 
> On a pure VoIP system, localized ringback is probably better handled  
> with extensions to "alert-info".
> 
> --
> Dean
> 
> 
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 00:24:18 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9CF673A677E;
	Fri, 22 Aug 2008 00:24:18 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 760FE3A6403
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 00:24:17 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.598
X-Spam-Level: 
X-Spam-Status: No, score=-6.598 tagged_above=-999 required=5
	tests=[AWL=-0.000, BAYES_00=-2.599, HTML_MESSAGE=0.001,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DsmLdY7JQFXM for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 00:24:16 -0700 (PDT)
Received: from ind-iport-1.cisco.com (ind-iport-1.cisco.com [64.104.129.195])
	by core3.amsl.com (Postfix) with ESMTP id 84A823A677E
	for <sip@ietf.org>; Fri, 22 Aug 2008 00:24:15 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,250,1217808000"; d="scan'208,217";a="26406863"
Received: from hkg-dkim-2.cisco.com ([10.75.231.163])
	by ind-iport-1.cisco.com with ESMTP; 22 Aug 2008 07:24:05 +0000
Received: from hkg-core-1.cisco.com (hkg-core-1.cisco.com [64.104.123.94])
	by hkg-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7M7O4pv024846
	for <sip@ietf.org>; Fri, 22 Aug 2008 15:24:04 +0800
Received: from xbh-hkg-411.apac.cisco.com (xbh-hkg-411.cisco.com
	[64.104.123.72])
	by hkg-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7M7O2Qq011045
	for <sip@ietf.org>; Fri, 22 Aug 2008 07:24:04 GMT
Received: from xmb-hkg-412.apac.cisco.com ([64.104.123.84]) by
	xbh-hkg-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Aug 2008 15:23:58 +0800
X-Mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 22 Aug 2008 15:24:36 +0800
Message-ID: <F86B91A10B14744E88408E80B8A30EF30371B9D6@xmb-hkg-412.apac.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Does proxy need cancel forked non-INVITE req ?
Thread-Index: AckDXvpn3wCEqBv7T8Kmh05qpHfYjgAyRYGw
From: "Rockson Li (zhengyli)" <zhengyli@cisco.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 22 Aug 2008 07:23:58.0898 (UTC)
	FILETIME=[0B258120:01C90428]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=6315; t=1219389845;
	x=1220253845; c=relaxed/simple; s=hkgdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=zhengyli@cisco.com;
	z=From:=20=22Rockson=20Li=20(zhengyli)=22=20<zhengyli@cisco.
	com>
	|Subject:=20FW=3A=20Does=20proxy=20need=20cancel=20forked=2
	0non-INVITE=20req=20? |Sender:=20;
	bh=fcoBXXMP55DqIl3XW8aNn3L/3UNL4SN8jZCWRJFokj8=;
	b=QUIV/VSAFk1rntQQunUmRPvMH+UgMJomqWKplB5P+5fGa/IsrfD1grt+XI
	iA7bS1gmX8FmEWP23KWiudKiV7NEWNdDa17IjdmNH2u2xjgoRXnTDThefMIy
	Pyuy1gk190AdeMESwUIVdsWd5PKTyY2AVrZsFWohlwoF6FTKHTELE=;
Authentication-Results: hkg-dkim-2; header.From=zhengyli@cisco.com; dkim=pass (
	sig from cisco.com/hkgdkim2001 verified; ); 
Subject: [Sip] FW: Does proxy need cancel forked non-INVITE req ?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1732996279=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1732996279==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C90428.0B055C8F"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C90428.0B055C8F
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Try to get more comments from this list.
=20
thanks

________________________________

From: Rockson Li (zhengyli)=20
Sent: Thursday, August 21, 2008 3:25 PM
To: sip-implementors@lists.cs.columbia.edu
Subject: Does proxy need cancel forked non-INVITE req ?


Hi folks,
=20
Suppose a proxy which forks OPTIONS to two endpoints,
endpoint A responds with 200 promptly, endpoint B responds with 100.
=20
so does proxy need to send to CANCEL to  endpoint B?
=20
from RFC3261,
=20
16.7 Response Processing
      10. Generate CANCELs
=20
         If the forwarded response was a final response, the proxy MUST
         generate a CANCEL request for all pending client transactions
         associated with this response context.=20
=20
=20
it looks proxy MUST do it.
=20
However, I wonder if it's really true.
=20
since=20
=20
sec 9.1 Client Behavior
=20
   A CANCEL request SHOULD NOT be sent to cancel a request other than
   INVITE.
=20
=20
so why proxy MUST cancel forked non-INVITE req here?
=20
thanks
-Rockson

------_=_NextPart_001_01C90428.0B055C8F
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.6000.16674" name=3DGENERATOR></HEAD>
<BODY>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D765072407-22082008><FONT =
face=3DArial=20
color=3D#0000ff size=3D2>Try to get more comments from this=20
list.</FONT></SPAN></DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D765072407-22082008><FONT =
face=3DArial=20
color=3D#0000ff size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D765072407-22082008><FONT =
face=3DArial=20
color=3D#0000ff size=3D2>thanks</FONT></SPAN></DIV><BR>
<DIV class=3DOutlookMessageHeader lang=3Den-us dir=3Dltr align=3Dleft>
<HR tabIndex=3D-1>
<FONT face=3DTahoma size=3D2><B>From:</B> Rockson Li (zhengyli) =
<BR><B>Sent:</B>=20
Thursday, August 21, 2008 3:25 PM<BR><B>To:</B>=20
sip-implementors@lists.cs.columbia.edu<BR><B>Subject:</B> Does proxy =
need cancel=20
forked non-INVITE req ?<BR></FONT><BR></DIV>
<DIV></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial size=3D2>Hi=20
folks,</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial =
size=3D2>Suppose a proxy=20
which forks OPTIONS to two endpoints,</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial =
size=3D2>endpoint=20
A&nbsp;responds with 200 promptly, endpoint B </FONT></SPAN><SPAN=20
class=3D671391007-21082008><FONT face=3DArial size=3D2>responds with=20
100.</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial =
size=3D2>so&nbsp;does proxy=20
need to&nbsp;send to&nbsp;CANCEL&nbsp;to </FONT>&nbsp;<FONT face=3DArial =

size=3D2>endpoint B?</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial size=3D2>from=20
RFC3261,</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial size=3D2>16.7 =
Response=20
Processing</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10. Generate =
CANCELs</FONT></SPAN></DIV>
<DIV>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If the =
forwarded=20
response was a final response, the proxy=20
MUST<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; generate a =
CANCEL=20
request for all pending client=20
transactions<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
associated with=20
this response context. </FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial size=3D2>it =
looks proxy MUST=20
do it.</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial =
size=3D2>However, I wonder if=20
it's really true.</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial size=3D2>since=20
</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial size=3D2>sec=20
</FONT></SPAN><SPAN class=3D671391007-21082008><FONT face=3DArial =
size=3D2>9.1 Client=20
Behavior</FONT></SPAN></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial =
size=3D2>&nbsp;&nbsp; A=20
CANCEL request SHOULD NOT be sent to cancel a request other =
than<BR>&nbsp;&nbsp;=20
INVITE.</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial size=3D2>so why =
proxy MUST=20
cancel forked non-INVITE req here?</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2>thanks</FONT></SPAN></DIV>
<DIV><SPAN class=3D671391007-21082008><FONT face=3DArial=20
size=3D2>-Rockson</FONT></SPAN></DIV></BODY></HTML>

------_=_NextPart_001_01C90428.0B055C8F--

--===============1732996279==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1732996279==--


From sip-bounces@ietf.org  Fri Aug 22 03:06:08 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D0DCE3A6924;
	Fri, 22 Aug 2008 03:06:08 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CFC893A69DC
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 03:01:48 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.699
X-Spam-Level: 
X-Spam-Status: No, score=-1.699 tagged_above=-999 required=5 tests=[AWL=2.600, 
	BAYES_00=-2.599, MANGLED_HERE=2.3, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6sDwJUBnUuOV for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 03:01:48 -0700 (PDT)
Received: from demumfd001.nsn-inter.net (demumfd001.nsn-inter.net
	[217.115.75.233])
	by core3.amsl.com (Postfix) with ESMTP id B024A3A686D
	for <sip@ietf.org>; Fri, 22 Aug 2008 03:01:47 -0700 (PDT)
Received: from demuprx016.emea.nsn-intra.net ([10.150.129.55])
	by demumfd001.nsn-inter.net (8.12.11.20060308/8.12.11) with ESMTP id
	m7MA148E027107
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Fri, 22 Aug 2008 12:01:04 +0200
Received: from demuexc022.nsn-intra.net (webmail.nsn-intra.net [10.150.128.35])
	by demuprx016.emea.nsn-intra.net (8.12.11.20060308/8.12.11) with ESMTP
	id m7MA13pK018835; Fri, 22 Aug 2008 12:01:03 +0200
Received: from DEMUEXC006.nsn-intra.net ([10.150.128.103]) by
	demuexc022.nsn-intra.net with Microsoft SMTPSVC(6.0.3790.3959); 
	Fri, 22 Aug 2008 12:01:03 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 22 Aug 2008 12:01:02 +0200
Message-ID: <085BE88FD18EE94085EB8960172CA359F0F991@DEMUEXC006.nsn-intra.net>
In-Reply-To: <0a1501c903da$85e43850$c2f0200a@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
Thread-Index: Acj4FXKRqVbVKo+7Rv62RrHIapSjKQK4k4twACvOcqAADG648AAZEGsA
References: <085BE88FD18EE94085EB8960172CA359E9CA78@DEMUEXC006.nsn-intra.net>
	<033901c902fa$185457b0$a2736b80@cisco.com>
	<085BE88FD18EE94085EB8960172CA359ED81AE@DEMUEXC006.nsn-intra.net>
	<0a1501c903da$85e43850$c2f0200a@cisco.com>
From: "Schneider, Peter (NSN - DE/Munich)" <peter.schneider@nsn.com>
To: "ext Dan Wing" <dwing@cisco.com>,
	"Tschofenig, Hannes (NSN - FI/Espoo)" <hannes.tschofenig@nsn.com>,
	<jason@counterpath.com>, <ekr@rtfm.com>
X-OriginalArrivalTime: 22 Aug 2008 10:01:03.0349 (UTC)
	FILETIME=[FC8E9A50:01C9043D]
Cc: sip@ietf.org
Subject: Re: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> 
> > > To avoid this clipping, we would need 
> > > draft-ietf-sip-dtls-srtp-framework 
> > > to require the SDP answer be sent reliably before 200 Okay 
> > -- perhaps
> > > using a technique similar to what ICE does to send SDP reliably
> > > in 18x messages.  For DTLS-SRTP, this would mean re-transmitting
> > > the 18x with the SDP answer until a DTLS Client Hello is 
> > seen.  Would
> > > that be acceptable?
> > 
> > Sending the SDP answer in the first provisional response is a 
> > good idea and helps in the middlebox scenario. But this is 
> > not an alternative to allowing the receiver of the offer to 
> > take the passive role, but an addition. The receiver of the 
> > offer must have the passive role if he re-transmits "the 18x 
> > with the SDP answer until a DTLS Client Hello is seen", right? 
> 
> I have an idea for another approach, which might even be better 
> than what is in the document right now:  leave the DTLS client/server 
> roles as described in draft-ietf-sip-dtls-srtp-framework-02, and
> when the offerer gets the 200 Ok, the offerer sends a DTLS
> HelloRequest.  This will open NAT bindings and cause an SBC
> to 'latch' -- just like an ICE connectivity check would.
> 
> (If there are no middleboxes interfering with the media path,
> the answerer would have initiated DTLS-SRTP by its own accord
> by sending ClientHello message(s).)
> 

A good idea. I'd say, the offerer should send this HelloRequest as soon
as he gets the SDP answer, if he hasn't got the ClientHello before. And
the answerer should send the answer as soon as possible, e.g. in an 18x,
even if PRACK is not used. (The HelloRequest lets the answerer know that
the answer has reached its destination.)

Peter
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 07:43:33 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0842D3A699C;
	Fri, 22 Aug 2008 07:43:33 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id DE3F53A67AE;
	Fri, 22 Aug 2008 07:43:17 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.704
X-Spam-Level: 
X-Spam-Status: No, score=-5.704 tagged_above=-999 required=5 tests=[AWL=0.895, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8Ay4YMKYJMFq; Fri, 22 Aug 2008 07:43:17 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id A79C63A6765;
	Fri, 22 Aug 2008 07:43:16 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,252,1217808000"; d="scan'208";a="18405157"
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 22 Aug 2008 14:43:16 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m7MEhGg7002078; 
	Fri, 22 Aug 2008 10:43:16 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m7MEhGRd006982;
	Fri, 22 Aug 2008 14:43:16 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Aug 2008 10:43:15 -0400
Received: from [10.86.243.101] ([10.86.243.101]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Aug 2008 10:43:15 -0400
Message-ID: <48AED0BE.3030304@cisco.com>
Date: Fri, 22 Aug 2008 10:44:14 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>
References: <B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><C4D3467D.7CF3%hsinnrei@adobe.com><14C85D6CCBE92743AF33663BF5D24EBA56E371@gaalpa1msgusr7e.ugd.att.com>	<2111245615-1219361799-cardhu_decombobulator_blackberry.rim.net-2145149396-@bxe025.bisx.prod.on.blackberry>
	<14C85D6CCBE92743AF33663BF5D24EBA56E374@gaalpa1msgusr7e.ugd.att.com>
In-Reply-To: <14C85D6CCBE92743AF33663BF5D24EBA56E374@gaalpa1msgusr7e.ugd.att.com>
X-OriginalArrivalTime: 22 Aug 2008 14:43:15.0379 (UTC)
	FILETIME=[68D55830:01C90465]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1733; t=1219416196;
	x=1220280196; c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Early=20media=20as=20an=20endpo
	int=20application |Sender:=20
	|To:=20=22DOLLY,=20MARTIN=20C,=20ATTLABS=22=20<mdolly@att.c
	om>; bh=2vdNOyylZAexYJn0mvi3LX6RyvScIWnzgWuGLlOM3Mo=;
	b=GDUNdFABZL8Dx8HC0y0udH37grMji5Rw+FDft/aRlQHM4rGShpK8FMFgib
	H9BjdsYzBMwMyAkoCu9g2B0G62tiyln7sIbrw6CqwcP+yOpdkZqh5a9gtC7q
	ncSB69R1ci;
Authentication-Results: rtp-dkim-1; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim1001 verified; ); 
Cc: ekr@rtfm.com, sip@ietf.org, Dean Willis <dean.willis@softarmor.com>,
	Henry Sinnreich <hsinnrei@adobe.com>, Dan Wing <dwing@cisco.com>,
	sip-bounces@ietf.org
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



DOLLY, MARTIN C, ATTLABS wrote:
> Dan,
> 
> I support a draft that relays a CN, but would have issues with the IETF
> addressing issues WRT when billing/charging should begin and end.

IMO the ietf has no desire to be involved in deciding when billing 
begins and ends. But its hard to deny that the issue isn't a subtext to 
many other decisions about how things are done.

Its like some of the requests that have come from IMS - they sometimes 
start out as a request that some particular artifact be added to sip, 
with little explanation of why, or how it will be used, or why the 
proposed mechanism was selected rather than some other one. Usually in 
such cases we push back and ask for requirements that are more in the 
form of use cases, so that an appropriately general mechanism can be 
designed.

I think it *might* be reasonable for accounting to be taken up as a 
topic by Bliss - not to standardize how it is done, but to examine a 
number of use cases of differing ways that accounting might be done, and 
how the protocol does/doesn't facilitate them.

	Thanks,
	Paul

> Martin 
> 
> -----Original Message-----
> From: Dan York [mailto:dyork@voxeo.com] 
> Sent: Thursday, August 21, 2008 7:37 PM
> To: DOLLY, MARTIN C, ATTLABS; sip-bounces@ietf.org; Henry Sinnreich;
> Dean Willis; Dwight, Timothy M (Tim)
> Cc: sip@ietf.org; ekr@rtfm.com; Dan Wing
> Subject: Re: [Sip] Early media as an endpoint application
> 
> Martin,
> 
> To a certain degree, some of us have already been taking on the
> billing/charging question. See my P-Charge-Info draft (which I have been
> told in comments today is doing something similar to the ISUP Charge
> Number parameter).
> 
> Dan
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 10:35:04 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D8C4D3A67E3;
	Fri, 22 Aug 2008 10:35:04 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6388E3A67CC
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 10:35:03 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.238
X-Spam-Level: 
X-Spam-Status: No, score=-2.238 tagged_above=-999 required=5 tests=[AWL=0.361, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OkxiFmA5zSgq for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 10:35:02 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id A90853A67E3
	for <sip@ietf.org>; Fri, 22 Aug 2008 10:35:02 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7MHYIWa008946
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Fri, 22 Aug 2008 12:34:19 -0500
Message-Id: <E716F8E2-A025-4F66-B406-4941891FD94C@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Henry Sinnreich <hsinnrei@adobe.com>
In-Reply-To: <C4D3467D.7CF3%hsinnrei@adobe.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Fri, 22 Aug 2008 12:34:12 -0500
References: <C4D3467D.7CF3%hsinnrei@adobe.com>
X-Mailer: Apple Mail (2.928.1)
Cc: sip@ietf.org, ekr@rtfm.com, Dan Wing <dwing@Cisco.COM>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 21, 2008, at 4:21 PM, Henry Sinnreich wrote:

> Dean,
>
> How would the proposed "Media Before Answer" endpoint/gateway  
> application
> affect the billing in your opinion? Would it change anything with  
> the issues
> here below?

If you wanted to bill on signaling, the billing nodes would need to be  
able to differentiate between the "early" session and the "real"  
session. They might could do this by noting the initiator of the  
session if a "repalces" model or "reinvite" model is used, or by  
adding a header field.
>

--
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 10:37:57 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E2B983A6818;
	Fri, 22 Aug 2008 10:37:56 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9576A3A6818
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 10:37:55 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.283
X-Spam-Level: 
X-Spam-Status: No, score=-2.283 tagged_above=-999 required=5 tests=[AWL=0.316, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mhA3Etva0PH8 for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 10:37:54 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 9D5053A67A5
	for <sip@ietf.org>; Fri, 22 Aug 2008 10:37:54 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7MHbG9V008975
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Fri, 22 Aug 2008 12:37:18 -0500
Message-Id: <98A2FB9E-B9FC-41E5-8243-CEDA0FEED695@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>
In-Reply-To: <14C85D6CCBE92743AF33663BF5D24EBA56E371@gaalpa1msgusr7e.ugd.att.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Fri, 22 Aug 2008 12:37:11 -0500
References: <B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com>
	<C4D3467D.7CF3%hsinnrei@adobe.com>
	<14C85D6CCBE92743AF33663BF5D24EBA56E371@gaalpa1msgusr7e.ugd.att.com>
X-Mailer: Apple Mail (2.928.1)
Cc: sip@ietf.org, Henry Sinnreich <hsinnrei@adobe.com>, ekr@rtfm.com,
	Dan Wing <dwing@Cisco.COM>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 21, 2008, at 6:04 PM, DOLLY, MARTIN C, ATTLABS wrote:

> Dean,
>
> Wrong, ISUP allows for media  in both directions before answer.

However, that's not the use case that is commonly cited as causing the  
SIP interaction problem. If it were, we'd probably have come to a more  
reasonable conclusion on SIP early media.

>
> Also, is the IETF taking on the topic of "billing/charging" now?

I'd argue that we moved into the topic of "accommodating broken  
billing/charging models" by the concessions we made with our flawed  
and mostly dysfunctional early-media model.

It's broken now, it has always been broken, and I predict it will  
continue to be broken for the future of SIP 2.0.

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 10:40:05 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0B58D3A67CC;
	Fri, 22 Aug 2008 10:40:05 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 855DB3A677D;
	Fri, 22 Aug 2008 10:40:02 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.318
X-Spam-Level: 
X-Spam-Status: No, score=-2.318 tagged_above=-999 required=5 tests=[AWL=0.281, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YsdjskLhXJ7n; Fri, 22 Aug 2008 10:40:01 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 2C06F3A67A5;
	Fri, 22 Aug 2008 10:40:01 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7MHd9n7009007
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Fri, 22 Aug 2008 12:39:11 -0500
Message-Id: <C75B7C19-1778-4756-A40B-FAAC3E0F5304@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>
In-Reply-To: <14C85D6CCBE92743AF33663BF5D24EBA56E374@gaalpa1msgusr7e.ugd.att.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Fri, 22 Aug 2008 12:39:04 -0500
References: <B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><C4D3467D.7CF3%hsinnrei@adobe.com><14C85D6CCBE92743AF33663BF5D24EBA56E371@gaalpa1msgusr7e.ugd.att.com>
	<2111245615-1219361799-cardhu_decombobulator_blackberry.rim.net-2145149396-@bxe025.bisx.prod.on.blackberry>
	<14C85D6CCBE92743AF33663BF5D24EBA56E374@gaalpa1msgusr7e.ugd.att.com>
X-Mailer: Apple Mail (2.928.1)
Cc: ekr@rtfm.com, sip@ietf.org, Henry Sinnreich <hsinnrei@adobe.com>,
	Dan Wing <dwing@Cisco.COM>, sip-bounces@ietf.org
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 21, 2008, at 6:44 PM, DOLLY, MARTIN C, ATTLABS wrote:
>
> I... would have issues with the IETF
> addressing issues WRT when billing/charging should begin and end.

I agree to that also. However, I support having a clearly defined  
state machine that a billing/charging model could queue off of.

The problem is that the current "early media" model lacks such a  
mechanism, especially when forking has occurred.

--
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 10:40:44 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2A2563A69A2;
	Fri, 22 Aug 2008 10:40:44 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 548513A6931;
	Fri, 22 Aug 2008 10:40:43 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.152
X-Spam-Level: 
X-Spam-Status: No, score=-6.152 tagged_above=-999 required=5 tests=[AWL=0.447, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id QtqYojN4RwkY; Fri, 22 Aug 2008 10:40:42 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id 46C3F3A69A2;
	Fri, 22 Aug 2008 10:40:42 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,252,1217808000"; d="scan'208";a="144603151"
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 22 Aug 2008 17:40:10 +0000
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7MHe9ZY014559; 
	Fri, 22 Aug 2008 10:40:09 -0700
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by sj-core-5.cisco.com (8.13.8/8.13.8) with ESMTP id m7MHe90g009271;
	Fri, 22 Aug 2008 17:40:09 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Aug 2008 13:40:09 -0400
Received: from [10.86.243.101] ([10.86.243.101]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Aug 2008 13:40:08 -0400
Message-ID: <48AEFA33.5070405@cisco.com>
Date: Fri, 22 Aug 2008 13:41:07 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>
References: <B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><C4D3467D.7CF3%hsinnrei@adobe.com><14C85D6CCBE92743AF33663BF5D24EBA56E371@gaalpa1msgusr7e.ugd.att.com>	<2111245615-1219361799-cardhu_decombobulator_blackberry.rim.net-2145149396-@bxe025.bisx.prod.on.blackberry>
	<14C85D6CCBE92743AF33663BF5D24EBA56E374@gaalpa1msgusr7e.ugd.att.com>
	<48AED0BE.3030304@cisco.com>
	<14C85D6CCBE92743AF33663BF5D24EBA56E37D@gaalpa1msgusr7e.ugd.att.com>
In-Reply-To: <14C85D6CCBE92743AF33663BF5D24EBA56E37D@gaalpa1msgusr7e.ugd.att.com>
X-OriginalArrivalTime: 22 Aug 2008 17:40:08.0826 (UTC)
	FILETIME=[1EF0D5A0:01C9047E]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2484; t=1219426809;
	x=1220290809; c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Early=20media=20as=20an=20endpo
	int=20application |Sender:=20;
	bh=t/znd0UiaffZvgcucSsUw19GfGpum/NbGoo4swSmQQM=;
	b=B3wWePm7OPaBbc6OPhnLTa4Ln0Rjl8nI+hKUbVo9nxyDzhChEON40rbwY6
	vMIoTx+/k4MDUjVckBZJ4iXiMI99XAUnKPcioHIX9KjiW2F31gJFedyWNlAz
	Plh8THOhzE;
Authentication-Results: sj-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim2002 verified; ); 
Cc: ekr@rtfm.com, sip@ietf.org, Dean Willis <dean.willis@softarmor.com>,
	Henry Sinnreich <hsinnrei@adobe.com>, Dan Wing <dwing@cisco.com>,
	sip-bounces@ietf.org
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



DOLLY, MARTIN C, ATTLABS wrote:
> Paul,
> 
> We could try taking up the accounting topic in BLISS, but need to be
> aware of all the national variants.

Well, "all" is rather daunting. :-)
Perhaps it would be sufficient to have a "representative set" of use cases?

	Thanks,
	Paul

> Martin
> 
> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> Sent: Friday, August 22, 2008 10:44 AM
> To: DOLLY, MARTIN C, ATTLABS
> Cc: dyork@voxeo.com; sip-bounces@ietf.org; Henry Sinnreich; Dean Willis;
> Dwight, Timothy M (Tim); sip@ietf.org; ekr@rtfm.com; Dan Wing
> Subject: Re: [Sip] Early media as an endpoint application
> 
> 
> 
> DOLLY, MARTIN C, ATTLABS wrote:
>> Dan,
>>
>> I support a draft that relays a CN, but would have issues with the
> IETF
>> addressing issues WRT when billing/charging should begin and end.
> 
> IMO the ietf has no desire to be involved in deciding when billing 
> begins and ends. But its hard to deny that the issue isn't a subtext to 
> many other decisions about how things are done.
> 
> Its like some of the requests that have come from IMS - they sometimes 
> start out as a request that some particular artifact be added to sip, 
> with little explanation of why, or how it will be used, or why the 
> proposed mechanism was selected rather than some other one. Usually in 
> such cases we push back and ask for requirements that are more in the 
> form of use cases, so that an appropriately general mechanism can be 
> designed.
> 
> I think it *might* be reasonable for accounting to be taken up as a 
> topic by Bliss - not to standardize how it is done, but to examine a 
> number of use cases of differing ways that accounting might be done, and
> 
> how the protocol does/doesn't facilitate them.
> 
> 	Thanks,
> 	Paul
> 
>> Martin 
>>
>> -----Original Message-----
>> From: Dan York [mailto:dyork@voxeo.com] 
>> Sent: Thursday, August 21, 2008 7:37 PM
>> To: DOLLY, MARTIN C, ATTLABS; sip-bounces@ietf.org; Henry Sinnreich;
>> Dean Willis; Dwight, Timothy M (Tim)
>> Cc: sip@ietf.org; ekr@rtfm.com; Dan Wing
>> Subject: Re: [Sip] Early media as an endpoint application
>>
>> Martin,
>>
>> To a certain degree, some of us have already been taking on the
>> billing/charging question. See my P-Charge-Info draft (which I have
> been
>> told in comments today is doing something similar to the ISUP Charge
>> Number parameter).
>>
>> Dan
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 10:55:53 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 78D3B3A69D9;
	Fri, 22 Aug 2008 10:55:53 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6C22B3A69D9
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 10:55:52 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.346
X-Spam-Level: 
X-Spam-Status: No, score=-2.346 tagged_above=-999 required=5 tests=[AWL=0.253, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 17ZV4Xu6QwFY for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 10:55:51 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 4FE0F3A6818
	for <sip@ietf.org>; Fri, 22 Aug 2008 10:55:51 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7MHtcTS009149
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Fri, 22 Aug 2008 12:55:40 -0500
Message-Id: <68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: "Dwight, Timothy M (Tim)" <timothy.dwight@verizonbusiness.com>
In-Reply-To: <092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Fri, 22 Aug 2008 12:55:33 -0500
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com>
	<C4D2F10C.7CB9%hsinnrei@adobe.com>
	<092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com>
	<B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com>
	<092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 21, 2008, at 9:38 PM, Dwight, Timothy M (Tim) wrote:

> I'm sorry but it seems pretty far-fetched to try and blame SIP
> shortcomings on "Bell-heads".  Since when have they (we) been that
> influential?

Since we were busy defining the SIP-PSTN interworking model back in  
about 1998, and came up with the "early media" approach. Mots of us  
working on SIP back then were bell-headed, even if we didn't think so  
at the time. It's a matter of accepting the preconceived notions that  
the telephone system was reasonable. I'm quite guilty of it myself.  
Remember, Henry and I were sponsored by MCI back then, and our mission  
was to make something that interopped with the PSTN and that the  
business people could understand how to make a business out of.

A lot of the insanity here stems back to obtuseness on my part at the  
interim meeting we held with the DCS cable team back in 1999, where we  
came up with the idea of QOS preconditions negotiated with reliable- 
provisionals rather than just using a two-stage invite. We should have  
had a first INVITE for QoS, and a re-invite for media, and probably  
would have if we hadn't had people thinking that the first 200 OK  
meant "start billing", or if we had realized that gateway/precondition  
forking really requires a B2BUA, not a proxy. But JDR and I really  
believed in proxies back then . . .

See:

http://www.softarmor.com/sipwg/meets/interim-nov-1999/


> My point to Henry was just that this "problem" is not specific to PSTN
> gateways; so it wouldn't be appropriate to confine its solution to  
> such
> a device.  The need for media interaction prior to call completion
> (which as Martin notes can be 2-way) arises from the intermediated
> service model; which is as applicable to VoIP as to circuit switched
> networks.
>

So we need to be able to differentiate the "intermediated" session  
from the "non-intermediated" session. Insisting that the "session"  
hasn't started (despite the fact that media is flowing) until some  
arbitrary downstream event has occurred is just silly.

We've massed layers of complexity (early media, early session,  
preconditions)  onto the rather elegant base protocol just to  
compensate for this misunderstanding. And frankly, it hasn't helped  
things all that much -- implementations are now insanely difficult,  
I'm confused by it, and AFAIK, nobody's stuff actually works 100% to  
the specs. Why should we be happy with this? As (I think it was  
Douglas Adams that said) it is easy to become blind to the essential  
uselessness of these things due to the sense of wonder and fulfillment  
one gets from getting them to do anything at all.

--
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 11:00:47 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C4E6C28C128;
	Fri, 22 Aug 2008 11:00:47 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BC04C28C115
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 11:00:45 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 1.001
X-Spam-Level: *
X-Spam-Status: No, score=1.001 tagged_above=-999 required=5 tests=[BAYES_60=1, 
	HTML_MESSAGE=0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id flFbUItSLx7D for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 11:00:45 -0700 (PDT)
Received: from yx-out-2324.google.com (yx-out-2324.google.com [74.125.44.29])
	by core3.amsl.com (Postfix) with ESMTP id D843628C11F
	for <sip@ietf.org>; Fri, 22 Aug 2008 11:00:44 -0700 (PDT)
Received: by yx-out-2324.google.com with SMTP id 8so298521yxg.49
	for <sip@ietf.org>; Fri, 22 Aug 2008 11:00:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;
	h=domainkey-signature:received:received:message-id:date:from:to
	:subject:mime-version:content-type;
	bh=6w3x7EodvSe/x4GzOSNDijtgamOHIxwjm8MngoO528k=;
	b=JeBMvuV8eFhpUemGrR9G6M/gCM5/4zH/BENfdW6kkKuJ4JmE8mlM4YsmbXYB3tcfYV
	znXVLKaJLypn84Iy/b29/YsZ4+K1rm/LTu3LVN1qu5Qzx1qZ7AZWRnbUXtRuyjh56SDf
	p0dXr5W+Qseklgsew+Xc6Y6rBjPbdF1brxjYo=
DomainKey-Signature: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma;
	h=message-id:date:from:to:subject:mime-version:content-type;
	b=s3BbbF8EV0GS1M9+TzmFZcJqV2rUFiXlBaCF6ulHMjHegia+8hACdPs9G4oZxLxEFU
	NwwS2DhpepTqEhyRj5A3CqV79DokIsQyk7eEGx+3//JuWX8OxYNlPjqJvO7RddFprQZH
	UGMiYUKDjBBQE7IgG0TbnDNc+AhErBjQ26lhY=
Received: by 10.142.135.16 with SMTP id i16mr501491wfd.144.1219428038553;
	Fri, 22 Aug 2008 11:00:38 -0700 (PDT)
Received: by 10.142.98.11 with HTTP; Fri, 22 Aug 2008 11:00:38 -0700 (PDT)
Message-ID: <d93f19e20808221100x6f5a185fud9dca9140a94e5f7@mail.gmail.com>
Date: Fri, 22 Aug 2008 23:30:38 +0530
From: "Lokesh Agrawal" <lokesh.agrawal@gmail.com>
To: sip@ietf.org
MIME-Version: 1.0
Subject: [Sip] Web based Soft Phone!
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0846106549=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

--===============0846106549==
Content-Type: multipart/alternative; 
	boundary="----=_Part_58751_15571401.1219428038552"

------=_Part_58751_15571401.1219428038552
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I am looking for a open source Web based Soft Phone.
Can anyone give me details?

-- 
Regards
Lokesh Agrawal

---------------------------------------------------------------------------------------------------------------------------
"Dream is not what you see in sleep, is the the thing which does not let you
sleep"
---------------------------------------------------------------------------------------------------------------------------

------=_Part_58751_15571401.1219428038552
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<div dir="ltr">Hi All,<br><br>I am looking for a open source Web based Soft Phone.<br>Can anyone give me details?<br clear="all"><br>-- <br>Regards<br>Lokesh Agrawal<br><br>---------------------------------------------------------------------------------------------------------------------------<br>
&quot;Dream is not what you see in sleep, is the the thing which does not let you sleep&quot;<br>---------------------------------------------------------------------------------------------------------------------------<br>

</div>

------=_Part_58751_15571401.1219428038552--

--===============0846106549==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0846106549==--


From sip-bounces@ietf.org  Fri Aug 22 12:08:12 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 39B3E3A6ABD;
	Fri, 22 Aug 2008 12:08:12 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C3D9F3A6ABD
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 12:08:10 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.811
X-Spam-Level: 
X-Spam-Status: No, score=-0.811 tagged_above=-999 required=5
	tests=[AWL=-0.001, BAYES_05=-1.11, MIME_8BIT_HEADER=0.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ezX9+WQmqaVv for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 12:08:10 -0700 (PDT)
Received: from ik-out-1112.google.com (ik-out-1112.google.com [66.249.90.181])
	by core3.amsl.com (Postfix) with ESMTP id D59E63A6A85
	for <sip@ietf.org>; Fri, 22 Aug 2008 12:08:09 -0700 (PDT)
Received: by ik-out-1112.google.com with SMTP id c28so412353ika.5
	for <sip@ietf.org>; Fri, 22 Aug 2008 12:07:29 -0700 (PDT)
Received: by 10.210.67.20 with SMTP id p20mr1942488eba.66.1219432048844;
	Fri, 22 Aug 2008 12:07:28 -0700 (PDT)
Received: from portatil.local ( [85.58.130.246])
	by mx.google.com with ESMTPS id t12sm6769813gvd.4.2008.08.22.12.07.26
	(version=TLSv1/SSLv3 cipher=RC4-MD5);
	Fri, 22 Aug 2008 12:07:27 -0700 (PDT)
From: =?utf-8?q?I=C3=B1aki_Baz_Castillo?= <ibc@aliax.net>
To: sip@ietf.org
Date: Fri, 22 Aug 2008 21:07:24 +0200
User-Agent: KMail/1.9.9
References: <d93f19e20808221100x6f5a185fud9dca9140a94e5f7@mail.gmail.com>
In-Reply-To: <d93f19e20808221100x6f5a185fud9dca9140a94e5f7@mail.gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200808222107.24874.ibc@aliax.net>
Subject: Re: [Sip] Web based Soft Phone!
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

RWwgVmllcm5lcywgMjIgZGUgQWdvc3RvIGRlIDIwMDgsIExva2VzaCBBZ3Jhd2FsIGVzY3JpYmnD
szoKPiBIaSBBbGwsCj4KPiBJIGFtIGxvb2tpbmcgZm9yIGEgb3BlbiBzb3VyY2UgV2ViIGJhc2Vk
IFNvZnQgUGhvbmUuCj4gQ2FuIGFueW9uZSBnaXZlIG1lIGRldGFpbHM/CgpBRkFJSyB0aGlzIG1h
aWxpc3QgaXMgbm90IGZvciB0aGF0IHB1cnBvc2UuCgotLSAKScOxYWtpIEJheiBDYXN0aWxsbwpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpTaXAgbWFpbGlu
ZyBsaXN0ICBodHRwczovL3d3dy5pZXRmLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NpcApUaGlzIGxp
c3QgaXMgZm9yIE5FVyBkZXZlbG9wbWVudCBvZiB0aGUgY29yZSBTSVAgUHJvdG9jb2wKVXNlIHNp
cC1pbXBsZW1lbnRvcnNAY3MuY29sdW1iaWEuZWR1IGZvciBxdWVzdGlvbnMgb24gY3VycmVudCBz
aXAKVXNlIHNpcHBpbmdAaWV0Zi5vcmcgZm9yIG5ldyBkZXZlbG9wbWVudHMgb24gdGhlIGFwcGxp
Y2F0aW9uIG9mIHNpcA==


From sip-bounces@ietf.org  Fri Aug 22 14:00:02 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C15D728C0CE;
	Fri, 22 Aug 2008 14:00:02 -0700 (PDT)
X-Original-To: sip@ietf.org
Delivered-To: sip@core3.amsl.com
Received: by core3.amsl.com (Postfix, from userid 0)
	id 3BF033A6A10; Fri, 22 Aug 2008 14:00:01 -0700 (PDT)
From: Internet-Drafts@ietf.org
To: i-d-announce@ietf.org
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
Message-Id: <20080822210001.3BF033A6A10@core3.amsl.com>
Date: Fri, 22 Aug 2008 14:00:01 -0700 (PDT)
Cc: sip@ietf.org
Subject: [Sip] I-D Action:draft-ietf-sip-session-policy-framework-04.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.


	Title           : A Framework for Session Initiation Protocol (SIP) Session Policies
	Author(s)       : V. Hilt, et al.
	Filename        : draft-ietf-sip-session-policy-framework-04.txt
	Pages           : 35
	Date            : 2008-08-22

Proxy servers play a central role as an intermediary in the Session
Initiation Protocol (SIP) as they define and impact policies on call
routing, rendezvous, and other call features.  This document
specifies a framework for SIP session policies that provides a
standard mechanism by which a proxy can define or influence policies
on sessions, such as the codecs or media types to be used.  It
defines a model, an overall architecture and new protocol mechanisms
for session policies.

A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-session-policy-framework-04.txt

Internet-Drafts are also available by anonymous FTP at:
ftp://ftp.ietf.org/internet-drafts/

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Message/External-body;
	name="draft-ietf-sip-session-policy-framework-04.txt";
	site="ftp.ietf.org";
	access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2008-08-22135512.I-D@ietf.org>


--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--


From sip-bounces@ietf.org  Fri Aug 22 14:19:02 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 7EFFE3A699E;
	Fri, 22 Aug 2008 14:19:02 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AD9853A6876
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 14:19:01 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.369
X-Spam-Level: 
X-Spam-Status: No, score=-2.369 tagged_above=-999 required=5 tests=[AWL=0.230, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id fUQa-G7jk5bl for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 14:19:00 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 5E7AF3A699E
	for <sip@ietf.org>; Fri, 22 Aug 2008 14:19:00 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7MLIqX4010269
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Fri, 22 Aug 2008 16:18:53 -0500
Message-Id: <B22B1F30-3170-4DB6-98A2-4929007901CA@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: SIP IETF <sip@ietf.org>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Fri, 22 Aug 2008 16:18:46 -0500
X-Mailer: Apple Mail (2.928.1)
Cc: Cullen Jennings <fluffy@cisco.com>, Keith Drage <drage@alcatel-lucent.com>
Subject: [Sip] Draft minutes for SIP at IETF 72
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="windows-1252"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Please review and post any needed corrections or discussions back to  =

myself and the list

----------------------


Draft Minutes for Meeting of SIP Working Group, IETF 72
Edited by Dean Willis based on notes by Brian Rosen, Alan Johnston,
Ben Campbell, and John Elwell.


Session 1, Tuesday 13:00 =96 15:00 Convention 3


Topic: Agenda and Status
Led by Chairs
Slides presented and included in proceedings

Agenda accepted as presented.


Topic: Identify requirements for test matrix to move SIP to Draft
Standard
Led by Robert Sparks
Slides presented and included in proceedings

Robert discussed the requirements for moving to draft standard. One
key issue is the decision of which RFCs to revise as a group, with the
two apparent alternatives being 1) 3261 and its dependencies including
TLS, SDP, etc. vs 2) The larger SIP Roadmap family, including Events,
Refer, 100Rel, etc.

Robert proposed three paths forward, including 1) move some set of
documents to draft, 2) revise the set of documents at "proposed", and
3) do nothing.

A poll was taken, and there was a strong consensus in favor of
reycling the core documents at the "proposed" level.

Robert discussed the concept of an implementation report, and a
majority in the room supported the position that such a report would
be useful. A number of participants volunteered to form a team to
pursue such a report.


Topic: Delivery of Request URI and Parameters to UAS Through Proxy
Led by Jonathan Rosenberg
Slides presented and included in proceedings

Jonathan reiewed the requirements and the previously proposed
solutions as the state of discussions on the topic. He proposed
solving the problem by extending the History-Info header field using a
new "Target" parameter. The room demonstrated consensus on this
general approach, although it was noted that the deletion of other H-I
fields as proposed might create a security issue.

Jonathan volunteered to write a draft documenting the proposal,
without including the deletion of other H-I fields as noted.


Topic: INFO Issues
Led by Eric Burger 30
Slides presented and included in proceedings

Eric reviewed the problem's history and the various proposals taht
have been made.

The room showed a consensus that a user-to-user INFO like mechanism is
required, that said mechanism should be called INFO (rather than
something else), and that the SIP WG should adopt
draft-kaplan-sip-info-events as the basis for a solution.

The chairs are to coordinate with the ADs on getting this work item
approved and setting a milestone for its completion.

Furtehr discussion occurred on the need for documenting the guidelines
for signaling-path bs. media-path transport. Tehre was a general
consensus (with some objections) for pursuing this work. SIPPING chair
Gonzalo Camarillo encouraged the discussion of requirements for this
work in the SIPPING working group.



Topic: Identity Issues

Led by John Elwell

Slides presented and included in proceedings

John discussed the problem background and discussed a significant use
case involving SBCs that perform media steering, with which RFC 4474
may not be effectively used.

Discussion followed as to whether this "failure" is actually a feature
and design goal of RFC 4474, with no consensus developing. This
discussion included a lengthy review of the rationale of RFC 4474 by
Jon Peterson.

Further use cases, such as preservation of identity across multiple
service provider SBC boundaries, were raised.

Discussion on what to do next continued without final conclusions.



Session 2, Thursday 15:10 =96 16:10 Convention 3


Topic: Agenda bash and status

Noted that chairs will be assigning reviewers for
draft-ietf-sip-record-route-fix, as list review appears to be light.

Noted also that draft-ietf-sip-dtls-framework is in WGLC until 8/8/08,
and that there is a parallel doc in AVT also in WGLC.

Agenda accepted as proposed.


Topic: Mechanisms for UA Initiated Privacy
Led by Mayumi Munakata
Slides presented and included in proceedings

Mayumi reviewed the status of the draft and its relationship to the
Privacy RFC (which it augments but does not replace).

Issue: What dhould this draft say about sending privacy-id?

Noted that proxies that don't know better may insert
privacy-compromisng information, so requesting pricacy is still
important. Also noted that location privacy (as per geopriv) is
outside the scope of this draft.

Noted that using GRUU will not anonymize the domain name. Author will
add text explaining use of third-party or anonymizing GRUU servers
servers to control this aspect of privacy.

Noted that it would be useful to capture implentation info on this
draft at future SIPIts, and the SIPIt Coordinator is asked to do so.

The author expects to make one more revision of this draft based on
current feedback, then request WGLC.


Topic: Termination of early dialog prior to final response
Led by Christer Holmberg
Slides presented and included in proceedings

Issue: Allow reliable 199? If so, where does the resulting PRACK go

Notedt that this might require updating the 100Rel RFC, which there
is general consensus to avoid. This issue will require further
discussion on-list.

Issue: Should a UAS be allowed to send a 199?

Agreed that proxy-initiated 199 is a transitional measure, and that
the long-term solution requires UAS support. Robert Sparks volunteered
to contribute supporting text.

Issue: Should a 199 contain a sipfrag from the final response that
triggered it?

Discussion cenetred on the relationship between 199 and HERFP, with it
noted that solving HERFP was previously agreed explicitly out of scope
for 199. The concludion was that the draft will remain silent on the
inclusion of sipfrag in the 199.

Issue: Do we need an option tag?

Discussion centered on the impact of not supporting 199, or of not
receiving a 199 when it is expected. The current consensus is that we
may not have all the use cases considered, but that the current use
cases do not require an option tag.


Topic: Keepalive Without Outbound
Led by  Christer Holmberg
Slides presented and included in proceedings

Christer reviewed problem definition and use cases, without going into
the details of the proposed solution.

A poll on "who is interested in working on this problem" resulted in a
small but non-zero number of positive responses. A followup poll on
"Who thinks solving this problem is critical" received a larger number
of positive responses.

Discussion was inconclusive, and the group resolved to continue the
discussion of use-cases on the mailing list.

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 14:44:45 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4A0193A6942;
	Fri, 22 Aug 2008 14:44:45 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A6FF73A6942
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 14:44:42 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.077
X-Spam-Level: 
X-Spam-Status: No, score=-6.077 tagged_above=-999 required=5 tests=[AWL=0.172, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AwJsOLF8tDAn for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 14:44:41 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 859963A68AA
	for <sip@ietf.org>; Fri, 22 Aug 2008 14:44:40 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	D0FCD205AB; Fri, 22 Aug 2008 23:44:38 +0200 (CEST)
X-AuditID: c1b4fb3c-ac8cbbb0000015b5-24-48af3346f205
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	AE9902058B; Fri, 22 Aug 2008 23:44:38 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Aug 2008 23:44:35 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 22 Aug 2008 23:44:31 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0791B680@esealmw113.eemea.ericsson.se>
In-Reply-To: <E716F8E2-A025-4F66-B406-4941891FD94C@softarmor.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Early media as an endpoint application
thread-index: AckEfXiqFXjhtBLGQHiRIsm0hysP5AAIQWwg
References: <C4D3467D.7CF3%hsinnrei@adobe.com>
	<E716F8E2-A025-4F66-B406-4941891FD94C@softarmor.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Dean Willis" <dean.willis@softarmor.com>,
	"Henry Sinnreich" <hsinnrei@adobe.com>
X-OriginalArrivalTime: 22 Aug 2008 21:44:35.0554 (UTC)
	FILETIME=[44FDEC20:01C904A0]
X-Brightmail-Tracker: AAAAAA==
Cc: sip@ietf.org, ekr@rtfm.com, Dan Wing <dwing@Cisco.COM>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi, 

>>How would the proposed "Media Before Answer" endpoint/gateway 
>>application affect the billing in your opinion? Would it change 
>>nything with the issues here below?
>
>If you wanted to bill on signaling, the billing nodes would need to be
able to differentiate between the "early" session >and the "real"
session. They might could do this by noting the initiator of the session
if a "repalces" model or 
>"reinvite" model is used, or by adding a header field.

The differentiation is based on what comes before 200 OK, and what comes
after.

I am not sure how separate/replaced dialogs etc would help.

I don't think early media as such is the problem, but (as others have
also said) forking. And, to be precise: parallel forking.

Two potential solutions:

1. Forbid parallel forking.

- That is probably no problem when forking occurs "in the network", for
example when a request is first forked to an anouncement server, and
after that towards the called user. I believe serial forking is mostly
used in such scenarios - and 199 helps to indicate when one forked leg
is "finished" :)

- That is probably a problem when a registrar forks, because it would
take a long time before all of the called user's terminals would be
given a chance to "ring". Once the registrar has tried all terminals the
calling user has probably hang up...


2. Terminate forking already on 18x

- When a forking proxy receives a 18x (with SDP) on one leg, it would
terminate all other legs. That is very similar to Dean's proposal on
sending 200 OK already for early media (but it would not affect charging
models etc which are based on the assumption that 200 OK means that the
user has answered).

- The problem, as Dean said earlier, is of course that the one that the
entity that first starts to send early media (and 18x) may not be the
entity that would accept the call. But, since all other legs would be
terminated, the only entity which can accept the call is the one who
send 18x first.

Regards,

Christer
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 14:53:30 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A388D3A685B;
	Fri, 22 Aug 2008 14:53:30 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 774B53A6782
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 14:53:29 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.098
X-Spam-Level: 
X-Spam-Status: No, score=-6.098 tagged_above=-999 required=5 tests=[AWL=0.151, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SFVellN3GS92 for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 14:53:28 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 3072A3A6858
	for <sip@ietf.org>; Fri, 22 Aug 2008 14:53:28 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	A56F0204C9; Fri, 22 Aug 2008 23:52:41 +0200 (CEST)
X-AuditID: c1b4fb3c-ae0cebb0000015b5-d3-48af3529a3f9
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	815C62025A; Fri, 22 Aug 2008 23:52:41 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Aug 2008 23:52:40 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 22 Aug 2008 23:52:39 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>
In-Reply-To: <68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Early media as an endpoint application
thread-index: AckEgF/TsKXtYQapSgmz0EhANKdBTgAH+skw
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
	<68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Dean Willis" <dean.willis@softarmor.com>,
	"Dwight, Timothy M (Tim)" <timothy.dwight@verizonbusiness.com>
X-OriginalArrivalTime: 22 Aug 2008 21:52:40.0468 (UTC)
	FILETIME=[6605ED40:01C904A1]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi, 

>>I'm sorry but it seems pretty far-fetched to try and blame SIP
shortcomings on "Bell-heads".  Since when have they (we) >>been that
influential?
>
>Since we were busy defining the SIP-PSTN interworking model back in
about 1998, and came up with the "early media" 
>approach. Mots of us working on SIP back then were bell-headed, even if
we didn't think so at the time. It's a matter of 
>accepting the preconceived notions that the telephone system was
reasonable. I'm quite guilty of it myself.  
>Remember, Henry and I were sponsored by MCI back then, and our mission
was to make something that interopped with the 
>PSTN and that the business people could understand how to make a
business out of.

I think we should all be thankful for your mission back then. Otherwise
we would all now be working on H.323 version 56.

...and they don't serve cookies in SG16.

Whether the protocol solution for early media could have been done in
another way is of course one question, but I agree with Tim that
use-cases where early media is needed is nothing PSTN specific. I think
there are useful IP services (no matter whether they are implemented in
the network or in Henry's pure/clean IP-IP world) which use early media.

>A lot of the insanity here stems back to obtuseness on my part at the
interim meeting we held with the DCS cable team 
>back in 1999, where we came up with the idea of QOS preconditions
negotiated with reliable- provisionals rather than just 
>using a two-stage invite. We should have had a first INVITE for QoS,
and a re-invite for media, and probably would have 
>if we hadn't had people thinking that the first 200 OK meant "start
billing", 

Instead of the first 200 OK you could have used 202, and 200 OK whenever
the billing was supposed to start.

...if there would have been a 202 at that time, that is :)

>or if we had realized that gateway/precondition forking really requires
a B2BUA, not a proxy. But JDR and I really 
>believed in proxies back then . . .

If we could turn back time...

Regards,

Christer




> My point to Henry was just that this "problem" is not specific to PSTN

> gateways; so it wouldn't be appropriate to confine its solution to 
> such a device.  The need for media interaction prior to call 
> completion (which as Martin notes can be 2-way) arises from the 
> intermediated service model; which is as applicable to VoIP as to 
> circuit switched networks.
>

So we need to be able to differentiate the "intermediated" session from
the "non-intermediated" session. Insisting that the "session"  
hasn't started (despite the fact that media is flowing) until some
arbitrary downstream event has occurred is just silly.

We've massed layers of complexity (early media, early session,
preconditions)  onto the rather elegant base protocol just to compensate
for this misunderstanding. And frankly, it hasn't helped things all that
much -- implementations are now insanely difficult, I'm confused by it,
and AFAIK, nobody's stuff actually works 100% to the specs. Why should
we be happy with this? As (I think it was Douglas Adams that said) it is
easy to become blind to the essential uselessness of these things due to
the sense of wonder and fulfillment one gets from getting them to do
anything at all.

--
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol Use
sip-implementors@cs.columbia.edu for questions on current sip Use
sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Fri Aug 22 23:37:11 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0450D28C259;
	Fri, 22 Aug 2008 23:37:11 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D498D28C258
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 23:37:09 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.388
X-Spam-Level: 
X-Spam-Status: No, score=-2.388 tagged_above=-999 required=5 tests=[AWL=0.211, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id nGIMS696laV1 for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 23:37:09 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id F001628C24B
	for <sip@ietf.org>; Fri, 22 Aug 2008 23:37:08 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7N6aJnZ013163
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Sat, 23 Aug 2008 01:36:21 -0500
Message-Id: <865BA838-48F9-453C-AD11-0AF49BA9FD79@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Christer Holmberg <christer.holmberg@ericsson.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Sat, 23 Aug 2008 01:36:14 -0500
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
	<68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="us-ascii"; Format="flowed"; DelSp="yes"
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 22, 2008, at 4:52 PM, Christer Holmberg wrote:

>
> I think we should all be thankful for your mission back then.  
> Otherwise
> we would all now be working on H.323 version 56.
>
> ...and they don't serve cookies in SG16.
>

Thanks! I look at my mission is making the Internet better, one cookie  
at a time.

> Whether the protocol solution for early media could have been done in
> another way is of course one question, but I agree with Tim that
> use-cases where early media is needed is nothing PSTN specific. I  
> think
> there are useful IP services (no matter whether they are implemented  
> in
> the network or in Henry's pure/clean IP-IP world) which use early  
> media.


I'll agree that there are services that use media transmission before  
the final session is established.

Would these services be impossible if there were actually separate SIP  
sessions for the "early" and "regular" sessions?

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug 23 04:16:21 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A245C3A6BAF;
	Sat, 23 Aug 2008 04:16:21 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id DD1243A6BC1
	for <sip@core3.amsl.com>; Sat, 23 Aug 2008 04:16:19 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.115
X-Spam-Level: 
X-Spam-Status: No, score=-6.115 tagged_above=-999 required=5 tests=[AWL=0.134, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pQEBlR8U6bfz for <sip@core3.amsl.com>;
	Sat, 23 Aug 2008 04:16:19 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id DB73D3A6BAF
	for <sip@ietf.org>; Sat, 23 Aug 2008 04:16:18 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	EB24C2033A; Sat, 23 Aug 2008 13:15:50 +0200 (CEST)
X-AuditID: c1b4fb3e-a8e85bb000007a96-4d-48aff1663bfd
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	CDF0B20141; Sat, 23 Aug 2008 13:15:50 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 23 Aug 2008 13:15:50 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sat, 23 Aug 2008 13:12:10 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C7916@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Early media as an endpoint application
thread-index: AckE6pGgtbTz/vw/TGKHkml7tC7EXwAJoSpi
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
	<68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>
	<865BA838-48F9-453C-AD11-0AF49BA9FD79@softarmor.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Dean Willis" <dean.willis@softarmor.com>
X-OriginalArrivalTime: 23 Aug 2008 11:15:50.0676 (UTC)
	FILETIME=[99A01D40:01C90511]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

>>I think we should all be thankful for your mission back then.  
>>Otherwise we would all now be working on H.323 version 56.
>>
>>...and they don't serve cookies in SG16.
>>
>
>Thanks! I look at my mission is making the Internet better, one cookie  
>at a time.

Geneva has better fondue than Minneapolis, though...

>>Whether the protocol solution for early media could have been done in
>>another way is of course one question, but I agree with Tim that
>>use-cases where early media is needed is nothing PSTN specific. I  
>>think there are useful IP services (no matter whether they are implemented  
>>in the network or in Henry's pure/clean IP-IP world) which use early  
>>media.
>
>
>I'll agree that there are services that use media transmission before  
>the final session is established.
>
>Would these services be impossible if there were actually separate SIP  
>sessions for the "early" and "regular" sessions?

Maybe not, but I am still not sure what problems you would solve by having separate sessions.

Regards,

Christer


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug 23 21:07:31 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9BCF63A6A2A;
	Sat, 23 Aug 2008 21:07:31 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 26F6D28C0FF
	for <sip@core3.amsl.com>; Sat, 23 Aug 2008 21:07:31 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.001
X-Spam-Level: 
X-Spam-Status: No, score=0.001 tagged_above=-999 required=5
	tests=[BAYES_50=0.001]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5JRCRmlAcAow for <sip@core3.amsl.com>;
	Sat, 23 Aug 2008 21:07:29 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id ABA783A69B7
	for <sip@ietf.org>; Sat, 23 Aug 2008 21:07:29 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7O46vOu019936
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Sat, 23 Aug 2008 23:06:58 -0500
Message-Id: <25AEB4FF-0DD7-4F69-98D8-F02B0CC794C3@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Christer Holmberg <christer.holmberg@ericsson.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C7916@esealmw113.eemea.ericsson.se>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Sat, 23 Aug 2008 23:06:52 -0500
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
	<68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>
	<865BA838-48F9-453C-AD11-0AF49BA9FD79@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C7916@esealmw113.eemea.ericsson.se>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 23, 2008, at 6:12 AM, Christer Holmberg wrote:
>>
>>
>> Would these services be impossible if there were actually separate  
>> SIP
>> sessions for the "early" and "regular" sessions?
>
> Maybe not, but I am still not sure what problems you would solve by  
> having separate sessions.


By having a fully connected "offer/answer" completed session instead  
of "early session", we  escape most of the state machine complexities,  
resolve the "media before answer" pinhole opening and codec loading  
problem, etc. It also makes ICE and SRTP much easier to deal with. By  
making the transition to "regular" session a re-invite  the gateway  
can transition from send-only to send-receive (if needed), the billing  
system (if it cares) can start the meter running, etc.

Plus we can drop all the 100-rel and preconditions cruft out of the  
state machine completely, making life MUCH better for the coder.

Think of it this way -- If I'm calling a PSTN gateway, do I really  
want to wait until the PSTN side connection completes before I do the  
setup work for SRTP? I think I'd rather get that out of the way before  
the called party answers, or before I even see early media coming back  
unprotected.

Now, lets think about forking. When we fork in a proxy, the UAC can  
only deal with one "best answer", and early media is anybody's guess  
as to how it might work or what might happen (it pretty much turns to  
soup, especially if you get multiple early media channels).

Consider instead that a forking node is really a "forking gateway",  
not a proxy. It takes one call in, establishes a fully-negotiated  
"early session",  then sends out its multiple INVITES.  As those  
sessions (which might have early media) connect up, the forking  
gateway deals with the multiple media streams (by bridging,  
discarding, whatever). When a forked session matures to a "regular  
session", the forking gateway can re-invite the UAC to make that  
session a "regular session", or can even arrange to drop itself out of  
the media path if needed.

If we have to have forking, and we have to have media before there's a  
final answer, then I think something like this is needed to make it  
work.
--
Dean

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 24 05:25:37 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 77DF73A6C89;
	Sun, 24 Aug 2008 05:25:37 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3EF833A6C89
	for <sip@core3.amsl.com>; Sun, 24 Aug 2008 05:25:36 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.249
X-Spam-Level: 
X-Spam-Status: No, score=-6.249 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6ieucockJr7s for <sip@core3.amsl.com>;
	Sun, 24 Aug 2008 05:25:35 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id E773D3A67A6
	for <sip@ietf.org>; Sun, 24 Aug 2008 05:25:34 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	2923720546; Sun, 24 Aug 2008 14:25:33 +0200 (CEST)
X-AuditID: c1b4fb3e-a8e85bb000007a96-72-48b1533d6b18
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	066C3200D4; Sun, 24 Aug 2008 14:25:33 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 24 Aug 2008 14:25:32 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sun, 24 Aug 2008 14:25:32 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C7918@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: VS: [Sip] Early media as an endpoint application
Thread-Index: AckFntyJzDGfzl1XRLyLeB3hjtQxHQAPiZrZ
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
	<68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>
	<865BA838-48F9-453C-AD11-0AF49BA9FD79@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C7916@esealmw113.eemea.ericsson.se>
	<25AEB4FF-0DD7-4F69-98D8-F02B0CC794C3@softarmor.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Dean Willis" <dean.willis@softarmor.com>
X-OriginalArrivalTime: 24 Aug 2008 12:25:32.0761 (UTC)
	FILETIME=[80C16490:01C905E4]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

>>>Would these services be impossible if there were actually separate  
>>>SIP sessions for the "early" and "regular" sessions?
>>
>>Maybe not, but I am still not sure what problems you would solve by  
>>having separate sessions.
>
>
>By having a fully connected "offer/answer" completed session instead  
>of "early session", we  escape most of the state machine complexities,

Having worked with/implemented offer/answer state machines for many years, it really isn't that complex in my opinion. The problem is that people are often trying to "implement call flows", not taking forking and multiple early dialogs into consideration etc.

>resolve the "media before answer" pinhole opening and codec loading  
>problem, etc.

The "media before answer" (if you refer to SDP answer) can be solve by simply saying that one must send an SDP answer must be sent before media is sent.

The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE doesn't work, because today media sent before SDP answer will often be discarded anyway.

>It also makes ICE and SRTP much easier to deal with. By  
>making the transition to "regular" session a re-invite  the gateway  
>can transition from send-only to send-receive (if needed), the billing  
>system (if it cares) can start the meter running, etc.

So, just to clarify, you are still talking about a single SIP session, right?

The issue with that solution is of course that a forking proxy, as currently defined, would terminate all other legs once the first 200 OK (establishing the early media path of the session) arrives.

But, that would minimize multiple early media streams, which again in my opinion shows that the main problem is not offer/answer, but forking :)

>Plus we can drop all the 100-rel and preconditions cruft out of the  
>state machine completely, making life MUCH better for the coder.

If you separate the offer/answer state machine from the SIP transaction state machine it shouldn't really matter in what SIP messages the offers and answers are carried.

And, eventhough we probably would be able to remove SDP from provisional responses, I think provisional responses would still be useful for other things (indicating ringing etc).

But, of course we could have instead have used something like UPDATE (or even INFO) to indicate "ringing" etc, instead of provisional responses.

>Think of it this way -- If I'm calling a PSTN gateway, do I really  
>want to wait until the PSTN side connection completes before I do the  
>setup work for SRTP? I think I'd rather get that out of the way before  
>the called party answers, or before I even see early media coming back  
>unprotected.

What prevents you from doing the SRTP negotiation using reliable provisional responses, in the same way you are able to perform preconditions before the called party answers? 

>Now, lets think about forking. When we fork in a proxy, the UAC can  
>only deal with one "best answer", and early media is anybody's guess  
>as to how it might work or what might happen (it pretty much turns to  
>soup, especially if you get multiple early media channels).

Correct. And, that will be a problem as long as it is possible for the UAC to receive multiple early streams - no matter how they are negotiated.

>Consider instead that a forking node is really a "forking gateway",  
>not a proxy. It takes one call in, establishes a fully-negotiated  
>"early session",  then sends out its multiple INVITES.  As those  
>sessions (which might have early media) connect up, the forking  
>gateway deals with the multiple media streams (by bridging,  
>discarding, whatever).

Doesn't that simply move the how-to-choose-which-early-media-stream-to-listen-to from the UAC to the forking proxy/gateway?

>When a forked session matures to a "regular session", the forking gateway can re-invite the UAC to >make that session a "regular session",

Today it does that again by sending 200 OK. 

Again, I agree that many things probably could be done in a "cleaner" way, but I think the main problem still exists: if there are multiple early media streams (due to forking proxy or forking gateway), how do I choose which one to play?

>or can even arrange to drop itself out of the media path if needed.

How would that work? It would be able to change the local contact from itself to the called party, but it would not be able to add the possible Record-Routes between itself and the called user.

Not being able to modify the signaling path during a session (read: update the Record-Route) is a "bug" in the protocol, I think, but it's a separate issue :)

>If we have to have forking, and we have to have media before there's a  
>final answer, then I think something like this is needed to make it  
>work.

Again, it could make the signaling flows a little more nicer, and it would move some decissions from the UAC to the forking gateway, but the problem with multiple media streams (no matter whether you call them early or not :) would still exist.

In my opinion, the only solution, using what we have today, is to make sure there is only one early media stream sent.
 
Regards,

Christer
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 24 12:31:14 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 865C93A6A95;
	Sun, 24 Aug 2008 12:31:14 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C693B3A6AB0
	for <sip@core3.amsl.com>; Sun, 24 Aug 2008 12:31:12 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.299
X-Spam-Level: 
X-Spam-Status: No, score=-1.299 tagged_above=-999 required=5 tests=[AWL=1.300, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 9ERIlU0ERV0i for <sip@core3.amsl.com>;
	Sun, 24 Aug 2008 12:31:11 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 76CC13A6A02
	for <sip@ietf.org>; Sun, 24 Aug 2008 12:31:11 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7OJV0WL028756
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Sun, 24 Aug 2008 14:31:06 -0500
Message-Id: <B000304C-162A-4EE4-BA44-FC3FA689AD54@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Christer Holmberg <christer.holmberg@ericsson.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C7918@esealmw113.eemea.ericsson.se>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Sun, 24 Aug 2008 14:30:55 -0500
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
	<68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>
	<865BA838-48F9-453C-AD11-0AF49BA9FD79@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C7916@esealmw113.eemea.ericsson.se>
	<25AEB4FF-0DD7-4F69-98D8-F02B0CC794C3@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C7918@esealmw113.eemea.ericsson.se>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:

>>
> The "media before answer" (if you refer to SDP answer) can be solve  
> by simply saying that one must send an SDP answer must be sent  
> before media is sent.
>
> The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE  
> doesn't work, because today media sent before SDP answer will often  
> be discarded anyway.
>

Perhaps not, but it's how ever device and service  I currently have  
works.

Not that they work well, mind you.

>> It also makes ICE and SRTP much easier to deal with. By
>> making the transition to "regular" session a re-invite  the gateway
>> can transition from send-only to send-receive (if needed), the  
>> billing
>> system (if it cares) can start the meter running, etc.
>
> So, just to clarify, you are still talking about a single SIP  
> session, right?

That's one of the two possible approaches, and probably the easiest to  
explain.


> The issue with that solution is of course that a forking proxy, as  
> currently defined, would terminate all other legs once the first 200  
> OK (establishing the early media path of the session) arrives.

One could of course change that behavior and have the forking proxy  
return ALL responses.


>
>
> But, that would minimize multiple early media streams, which again  
> in my opinion shows that the main problem is not offer/answer, but  
> forking :)

The two certainly play poorly with each other.

>
>
>> Plus we can drop all the 100-rel and preconditions cruft out of the
>> state machine completely, making life MUCH better for the coder.
>
> If you separate the offer/answer state machine from the SIP  
> transaction state machine it shouldn't really matter in what SIP  
> messages the offers and answers are carried.

Perhaps true, but the SIP 100-rel state machine is profoundly ugly all  
by itself.

>
>
> And, eventhough we probably would be able to remove SDP from  
> provisional responses, I think provisional responses would still be  
> useful for other things (indicating ringing etc).

Yes, and provisionals also impact the resend timers. We need them. We  
just don't need 100-rel.

>
>
> But, of course we could have instead have used something like UPDATE  
> (or even INFO) to indicate "ringing" etc, instead of provisional  
> responses.
>
>> Think of it this way -- If I'm calling a PSTN gateway, do I really
>> want to wait until the PSTN side connection completes before I do the
>> setup work for SRTP? I think I'd rather get that out of the way  
>> before
>> the called party answers, or before I even see early media coming  
>> back
>> unprotected.
>
> What prevents you from doing the SRTP negotiation using reliable  
> provisional responses, in the same way you are able to perform  
> preconditions before the called party answers?

In my case, mostly the desire to avoid reliable provisional responses.

And when you cross-factor reliable provisional, SRTP, and forking, you  
get a real mess.

>
>
>> Now, lets think about forking. When we fork in a proxy, the UAC can
>> only deal with one "best answer", and early media is anybody's guess
>> as to how it might work or what might happen (it pretty much turns to
>> soup, especially if you get multiple early media channels).
>
> Correct. And, that will be a problem as long as it is possible for  
> the UAC to receive multiple early streams - no matter how they are  
> negotiated.
>
>> Consider instead that a forking node is really a "forking gateway",
>> not a proxy. It takes one call in, establishes a fully-negotiated
>> "early session",  then sends out its multiple INVITES.  As those
>> sessions (which might have early media) connect up, the forking
>> gateway deals with the multiple media streams (by bridging,
>> discarding, whatever).
>
> Doesn't that simply move the how-to-choose-which-early-media-stream- 
> to-listen-to from the UAC to the forking proxy/gateway?

It allows the forking gateway to either mix all the streams into one  
(a boon to the bandwidth-restricted UAC), or more intelligently choose  
which one to relay based on media-analysis. For example, ringing can  
easily be differentiated from speech, so if a forking-b2bua sees four  
legs of ringing and one of speech, it could quite reasonably choose  
the speech channel to send back to the UAC.

>
>
>> When a forked session matures to a "regular session", the forking  
>> gateway can re-invite the UAC to >make that session a "regular  
>> session",
>
> Today it does that again by sending 200 OK.

Right -- assuming you did your media setup in provisional (and keying  
in reliable provisional, which is messy)

> Again, I agree that many things probably could be done in a  
> "cleaner" way, but I think the main problem still exists: if there  
> are multiple early media streams (due to forking proxy or forking  
> gateway), how do I choose which one to play?
>

I'm not aware of a perfect asnwer, but (as above) can say there are  
definitely several "better" answers than what we have now.


>> or can even arrange to drop itself out of the media path if needed.
>
> How would that work? It would be able to change the local contact  
> from itself to the called party, but it would not be able to add the  
> possible Record-Routes between itself and the called user.

Media path, not signaling. Fall back to 3PCC setup techniques on a  
reinvite sequence.

>
> Not being able to modify the signaling path during a session (read:  
> update the Record-Route) is a "bug" in the protocol, I think, but  
> it's a separate issue :)
>

yeah, re-invite should be abele to re-route.


>> If we have to have forking, and we have to have media before  
>> there's a
>> final answer, then I think something like this is needed to make it
>> work.
>
> Again, it could make the signaling flows a little more nicer, and it  
> would move some decissions from the UAC to the forking gateway, but  
> the problem with multiple media streams (no matter whether you call  
> them early or not :) would still exist.

Perhaps. However, one of the more profound problems today (as with  
mobile nets) is limited bandwidth to the UA. Dealing with mixing,  
recoding, and selection-from-alternatives in a "server" is much easier.

>
> In my opinion, the only solution, using what we have today, is to  
> make sure there is only one early media stream sent.

Yep. That's quite true. It's also very difficult, if anything forks.  
Our greatest power is our greatest problem.

--
Dean


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 24 12:58:42 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 009D93A6A9D;
	Sun, 24 Aug 2008 12:58:42 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8FA4F3A6AB0
	for <sip@core3.amsl.com>; Sun, 24 Aug 2008 12:58:40 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id s1J789L-r9Ws for <sip@core3.amsl.com>;
	Sun, 24 Aug 2008 12:58:39 -0700 (PDT)
Received: from exprod6og104.obsmtp.com (exprod6og104.obsmtp.com [64.18.1.187])
	by core3.amsl.com (Postfix) with ESMTP id 67B5E3A6A9D
	for <sip@ietf.org>; Sun, 24 Aug 2008 12:58:04 -0700 (PDT)
Received: from source ([192.150.11.134]) by exprod6ob104.postini.com
	([64.18.5.12]) with SMTP; Sun, 24 Aug 2008 12:57:36 PDT
Received: from inner-relay-1.corp.adobe.com ([153.32.1.51])
	by outbound-smtp-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7OJriG3010378; Sun, 24 Aug 2008 12:53:45 -0700 (PDT)
Received: from fe1.corp.adobe.com (fe1.corp.adobe.com [10.8.192.70])
	by inner-relay-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7OJvViq021588; Sun, 24 Aug 2008 12:57:31 -0700 (PDT)
Received: from namail5.corp.adobe.com ([10.8.192.88]) by fe1.corp.adobe.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 24 Aug 2008 12:57:31 -0700
Received: from 10.7.241.23 ([10.7.241.23]) by namail5.corp.adobe.com
	([10.8.192.88]) with Microsoft Exchange Server HTTP-DAV ; 
	Sun, 24 Aug 2008 19:57:30 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Sun, 24 Aug 2008 15:01:54 -0500
From: Henry Sinnreich <hsinnrei@adobe.com>
To: Dean Willis <dean.willis@softarmor.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Message-ID: <C4D72862.7DCD%hsinnrei@adobe.com>
Thread-Topic: Fixing SIP with OS reference implementations for UA and server
Thread-Index: AckGJEE+Q+AvFyCzBUOA74WBS4APIA==
In-Reply-To: <B000304C-162A-4EE4-BA44-FC3FA689AD54@softarmor.com>
Mime-version: 1.0
X-OriginalArrivalTime: 24 Aug 2008 19:57:31.0823 (UTC)
	FILETIME=[A4F9DBF0:01C90623]
Cc: SIP IETF <sip@ietf.org>, Cullen Jennings <fluffy@cisco.com>
Subject: [Sip] Fixing SIP with OS reference implementations for UA and server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

(changed the subject line)
I have followed this discussion and am convinced that (though I started it)
the issues raised here and in countless other SIPPING/SIP related
discussions cannot be solved by apparent logic, no matter how long and how
thorough. Just like the physics cannot be proven by discussions but only by
experiment. This is the whole difference between engineering/science and
beliefs/opinions. 

The only way IMO to fix the SIPPING/SIP issues discussed here is to have an
open reference implementation running in a test bed (such as one provided
maybe by the SIP Forum) and cooperate in LUNIX-style with testing (why not
in SIPit events as well) and fixing the code. Any fruitful discussions must
be part of fixing running code based on test results. This is actually
pretty plain, so forgive my rant...

Selecting a reference SIP implementation:
There are quite a few SIP UA and and SIP server OS code sites available and
the next step could be selecting the best candidate(s).
If asked, I would be only to happy to recommend some candidates.

Continuing such discussions without a reference implementation is fruitless
and the SIP issues discussed here will not get fixed so as to meet the
requirements for a good standard. This applies to all SIP related WGs.

Any comments?

Thanks, Henry


On 8/24/08 2:30 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:

> 
> On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:
> 
>>> 
>> The "media before answer" (if you refer to SDP answer) can be solve
>> by simply saying that one must send an SDP answer must be sent
>> before media is sent.
>> 
>> The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
>> doesn't work, because today media sent before SDP answer will often
>> be discarded anyway.
>> 
> 
> Perhaps not, but it's how ever device and service  I currently have
> works.
> 
> Not that they work well, mind you.
> 
>>> It also makes ICE and SRTP much easier to deal with. By
>>> making the transition to "regular" session a re-invite  the gateway
>>> can transition from send-only to send-receive (if needed), the
>>> billing
>>> system (if it cares) can start the meter running, etc.
>> 
>> So, just to clarify, you are still talking about a single SIP
>> session, right?
> 
> That's one of the two possible approaches, and probably the easiest to
> explain.
> 
> 
>> The issue with that solution is of course that a forking proxy, as
>> currently defined, would terminate all other legs once the first 200
>> OK (establishing the early media path of the session) arrives.
> 
> One could of course change that behavior and have the forking proxy
> return ALL responses.
> 
> 
>> 
>> 
>> But, that would minimize multiple early media streams, which again
>> in my opinion shows that the main problem is not offer/answer, but
>> forking :)
> 
> The two certainly play poorly with each other.
> 
>> 
>> 
>>> Plus we can drop all the 100-rel and preconditions cruft out of the
>>> state machine completely, making life MUCH better for the coder.
>> 
>> If you separate the offer/answer state machine from the SIP
>> transaction state machine it shouldn't really matter in what SIP
>> messages the offers and answers are carried.
> 
> Perhaps true, but the SIP 100-rel state machine is profoundly ugly all
> by itself.
> 
>> 
>> 
>> And, eventhough we probably would be able to remove SDP from
>> provisional responses, I think provisional responses would still be
>> useful for other things (indicating ringing etc).
> 
> Yes, and provisionals also impact the resend timers. We need them. We
> just don't need 100-rel.
> 
>> 
>> 
>> But, of course we could have instead have used something like UPDATE
>> (or even INFO) to indicate "ringing" etc, instead of provisional
>> responses.
>> 
>>> Think of it this way -- If I'm calling a PSTN gateway, do I really
>>> want to wait until the PSTN side connection completes before I do the
>>> setup work for SRTP? I think I'd rather get that out of the way
>>> before
>>> the called party answers, or before I even see early media coming
>>> back
>>> unprotected.
>> 
>> What prevents you from doing the SRTP negotiation using reliable
>> provisional responses, in the same way you are able to perform
>> preconditions before the called party answers?
> 
> In my case, mostly the desire to avoid reliable provisional responses.
> 
> And when you cross-factor reliable provisional, SRTP, and forking, you
> get a real mess.
> 
>> 
>> 
>>> Now, lets think about forking. When we fork in a proxy, the UAC can
>>> only deal with one "best answer", and early media is anybody's guess
>>> as to how it might work or what might happen (it pretty much turns to
>>> soup, especially if you get multiple early media channels).
>> 
>> Correct. And, that will be a problem as long as it is possible for
>> the UAC to receive multiple early streams - no matter how they are
>> negotiated.
>> 
>>> Consider instead that a forking node is really a "forking gateway",
>>> not a proxy. It takes one call in, establishes a fully-negotiated
>>> "early session",  then sends out its multiple INVITES.  As those
>>> sessions (which might have early media) connect up, the forking
>>> gateway deals with the multiple media streams (by bridging,
>>> discarding, whatever).
>> 
>> Doesn't that simply move the how-to-choose-which-early-media-stream-
>> to-listen-to from the UAC to the forking proxy/gateway?
> 
> It allows the forking gateway to either mix all the streams into one
> (a boon to the bandwidth-restricted UAC), or more intelligently choose
> which one to relay based on media-analysis. For example, ringing can
> easily be differentiated from speech, so if a forking-b2bua sees four
> legs of ringing and one of speech, it could quite reasonably choose
> the speech channel to send back to the UAC.
> 
>> 
>> 
>>> When a forked session matures to a "regular session", the forking
>>> gateway can re-invite the UAC to >make that session a "regular
>>> session",
>> 
>> Today it does that again by sending 200 OK.
> 
> Right -- assuming you did your media setup in provisional (and keying
> in reliable provisional, which is messy)
> 
>> Again, I agree that many things probably could be done in a
>> "cleaner" way, but I think the main problem still exists: if there
>> are multiple early media streams (due to forking proxy or forking
>> gateway), how do I choose which one to play?
>> 
> 
> I'm not aware of a perfect asnwer, but (as above) can say there are
> definitely several "better" answers than what we have now.
> 
> 
>>> or can even arrange to drop itself out of the media path if needed.
>> 
>> How would that work? It would be able to change the local contact
>> from itself to the called party, but it would not be able to add the
>> possible Record-Routes between itself and the called user.
> 
> Media path, not signaling. Fall back to 3PCC setup techniques on a
> reinvite sequence.
> 
>> 
>> Not being able to modify the signaling path during a session (read:
>> update the Record-Route) is a "bug" in the protocol, I think, but
>> it's a separate issue :)
>> 
> 
> yeah, re-invite should be abele to re-route.
> 
> 
>>> If we have to have forking, and we have to have media before
>>> there's a
>>> final answer, then I think something like this is needed to make it
>>> work.
>> 
>> Again, it could make the signaling flows a little more nicer, and it
>> would move some decissions from the UAC to the forking gateway, but
>> the problem with multiple media streams (no matter whether you call
>> them early or not :) would still exist.
> 
> Perhaps. However, one of the more profound problems today (as with
> mobile nets) is limited bandwidth to the UA. Dealing with mixing,
> recoding, and selection-from-alternatives in a "server" is much easier.
> 
>> 
>> In my opinion, the only solution, using what we have today, is to
>> make sure there is only one early media stream sent.
> 
> Yep. That's quite true. It's also very difficult, if anything forks.
> Our greatest power is our greatest problem.
> 
> --
> Dean
> 
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 24 13:19:42 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 15CE83A68C7;
	Sun, 24 Aug 2008 13:19:42 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 748503A68C7
	for <sip@core3.amsl.com>; Sun, 24 Aug 2008 13:19:41 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.021
X-Spam-Level: 
X-Spam-Status: No, score=-5.021 tagged_above=-999 required=5
	tests=[AWL=-1.227, BAYES_00=-2.599, FRT_ADOBE2=2.455, HELO_EQ_SE=0.35, 
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7zwepv7Oghxq for <sip@core3.amsl.com>;
	Sun, 24 Aug 2008 13:19:40 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id ADE6A3A68B9
	for <sip@ietf.org>; Sun, 24 Aug 2008 13:19:39 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	F25442027A; Sun, 24 Aug 2008 22:19:04 +0200 (CEST)
X-AuditID: c1b4fb3e-aae89bb000007a96-57-48b1c2389c92
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	D29EC20209; Sun, 24 Aug 2008 22:19:04 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 24 Aug 2008 22:19:04 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sun, 24 Aug 2008 22:19:04 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C791D@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Fixing SIP with OS reference implementations for UA and server
Thread-Index: AckGJEE+Q+AvFyCzBUOA74WBS4APIAAAY1Km
References: <C4D72862.7DCD%hsinnrei@adobe.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Henry Sinnreich" <hsinnrei@adobe.com>,
	"Dean Willis" <dean.willis@softarmor.com>
X-OriginalArrivalTime: 24 Aug 2008 20:19:04.0479 (UTC)
	FILETIME=[A77582F0:01C90626]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>, Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and
	server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi Henry,

Based on what criteria would you choose the reference implementation(s), an=
d what is it that you really want to test? Offer/answer?

Because, eventhough there seems to be problems implementing offer/answer co=
rrectly, the early media/forking problem, raised by Dean, is more of a "bi =
product" of the way we designed the protocol. In other words, even if you h=
ave an implementation which works 100% according to the specs, it doesn't s=
olve the problem which may come up when you, due to forking, receive early =
media from multiple locations :)

Regards,

Christer


-----Alkuper=E4inen viesti-----
L=E4hett=E4j=E4: Henry Sinnreich [mailto:hsinnrei@adobe.com]
L=E4hetetty: su 24.8.2008 22:01
Vastaanottaja: Dean Willis; Christer Holmberg
Kopio: SIP IETF; Cullen Jennings
Aihe: Fixing SIP with OS reference implementations for UA and server
 =

(changed the subject line)
I have followed this discussion and am convinced that (though I started it)
the issues raised here and in countless other SIPPING/SIP related
discussions cannot be solved by apparent logic, no matter how long and how
thorough. Just like the physics cannot be proven by discussions but only by
experiment. This is the whole difference between engineering/science and
beliefs/opinions. =


The only way IMO to fix the SIPPING/SIP issues discussed here is to have an
open reference implementation running in a test bed (such as one provided
maybe by the SIP Forum) and cooperate in LUNIX-style with testing (why not
in SIPit events as well) and fixing the code. Any fruitful discussions must
be part of fixing running code based on test results. This is actually
pretty plain, so forgive my rant...

Selecting a reference SIP implementation:
There are quite a few SIP UA and and SIP server OS code sites available and
the next step could be selecting the best candidate(s).
If asked, I would be only to happy to recommend some candidates.

Continuing such discussions without a reference implementation is fruitless
and the SIP issues discussed here will not get fixed so as to meet the
requirements for a good standard. This applies to all SIP related WGs.

Any comments?

Thanks, Henry


On 8/24/08 2:30 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:

> =

> On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:
> =

>>> =

>> The "media before answer" (if you refer to SDP answer) can be solve
>> by simply saying that one must send an SDP answer must be sent
>> before media is sent.
>> =

>> The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
>> doesn't work, because today media sent before SDP answer will often
>> be discarded anyway.
>> =

> =

> Perhaps not, but it's how ever device and service  I currently have
> works.
> =

> Not that they work well, mind you.
> =

>>> It also makes ICE and SRTP much easier to deal with. By
>>> making the transition to "regular" session a re-invite  the gateway
>>> can transition from send-only to send-receive (if needed), the
>>> billing
>>> system (if it cares) can start the meter running, etc.
>> =

>> So, just to clarify, you are still talking about a single SIP
>> session, right?
> =

> That's one of the two possible approaches, and probably the easiest to
> explain.
> =

> =

>> The issue with that solution is of course that a forking proxy, as
>> currently defined, would terminate all other legs once the first 200
>> OK (establishing the early media path of the session) arrives.
> =

> One could of course change that behavior and have the forking proxy
> return ALL responses.
> =

> =

>> =

>> =

>> But, that would minimize multiple early media streams, which again
>> in my opinion shows that the main problem is not offer/answer, but
>> forking :)
> =

> The two certainly play poorly with each other.
> =

>> =

>> =

>>> Plus we can drop all the 100-rel and preconditions cruft out of the
>>> state machine completely, making life MUCH better for the coder.
>> =

>> If you separate the offer/answer state machine from the SIP
>> transaction state machine it shouldn't really matter in what SIP
>> messages the offers and answers are carried.
> =

> Perhaps true, but the SIP 100-rel state machine is profoundly ugly all
> by itself.
> =

>> =

>> =

>> And, eventhough we probably would be able to remove SDP from
>> provisional responses, I think provisional responses would still be
>> useful for other things (indicating ringing etc).
> =

> Yes, and provisionals also impact the resend timers. We need them. We
> just don't need 100-rel.
> =

>> =

>> =

>> But, of course we could have instead have used something like UPDATE
>> (or even INFO) to indicate "ringing" etc, instead of provisional
>> responses.
>> =

>>> Think of it this way -- If I'm calling a PSTN gateway, do I really
>>> want to wait until the PSTN side connection completes before I do the
>>> setup work for SRTP? I think I'd rather get that out of the way
>>> before
>>> the called party answers, or before I even see early media coming
>>> back
>>> unprotected.
>> =

>> What prevents you from doing the SRTP negotiation using reliable
>> provisional responses, in the same way you are able to perform
>> preconditions before the called party answers?
> =

> In my case, mostly the desire to avoid reliable provisional responses.
> =

> And when you cross-factor reliable provisional, SRTP, and forking, you
> get a real mess.
> =

>> =

>> =

>>> Now, lets think about forking. When we fork in a proxy, the UAC can
>>> only deal with one "best answer", and early media is anybody's guess
>>> as to how it might work or what might happen (it pretty much turns to
>>> soup, especially if you get multiple early media channels).
>> =

>> Correct. And, that will be a problem as long as it is possible for
>> the UAC to receive multiple early streams - no matter how they are
>> negotiated.
>> =

>>> Consider instead that a forking node is really a "forking gateway",
>>> not a proxy. It takes one call in, establishes a fully-negotiated
>>> "early session",  then sends out its multiple INVITES.  As those
>>> sessions (which might have early media) connect up, the forking
>>> gateway deals with the multiple media streams (by bridging,
>>> discarding, whatever).
>> =

>> Doesn't that simply move the how-to-choose-which-early-media-stream-
>> to-listen-to from the UAC to the forking proxy/gateway?
> =

> It allows the forking gateway to either mix all the streams into one
> (a boon to the bandwidth-restricted UAC), or more intelligently choose
> which one to relay based on media-analysis. For example, ringing can
> easily be differentiated from speech, so if a forking-b2bua sees four
> legs of ringing and one of speech, it could quite reasonably choose
> the speech channel to send back to the UAC.
> =

>> =

>> =

>>> When a forked session matures to a "regular session", the forking
>>> gateway can re-invite the UAC to >make that session a "regular
>>> session",
>> =

>> Today it does that again by sending 200 OK.
> =

> Right -- assuming you did your media setup in provisional (and keying
> in reliable provisional, which is messy)
> =

>> Again, I agree that many things probably could be done in a
>> "cleaner" way, but I think the main problem still exists: if there
>> are multiple early media streams (due to forking proxy or forking
>> gateway), how do I choose which one to play?
>> =

> =

> I'm not aware of a perfect asnwer, but (as above) can say there are
> definitely several "better" answers than what we have now.
> =

> =

>>> or can even arrange to drop itself out of the media path if needed.
>> =

>> How would that work? It would be able to change the local contact
>> from itself to the called party, but it would not be able to add the
>> possible Record-Routes between itself and the called user.
> =

> Media path, not signaling. Fall back to 3PCC setup techniques on a
> reinvite sequence.
> =

>> =

>> Not being able to modify the signaling path during a session (read:
>> update the Record-Route) is a "bug" in the protocol, I think, but
>> it's a separate issue :)
>> =

> =

> yeah, re-invite should be abele to re-route.
> =

> =

>>> If we have to have forking, and we have to have media before
>>> there's a
>>> final answer, then I think something like this is needed to make it
>>> work.
>> =

>> Again, it could make the signaling flows a little more nicer, and it
>> would move some decissions from the UAC to the forking gateway, but
>> the problem with multiple media streams (no matter whether you call
>> them early or not :) would still exist.
> =

> Perhaps. However, one of the more profound problems today (as with
> mobile nets) is limited bandwidth to the UA. Dealing with mixing,
> recoding, and selection-from-alternatives in a "server" is much easier.
> =

>> =

>> In my opinion, the only solution, using what we have today, is to
>> make sure there is only one early media stream sent.
> =

> Yep. That's quite true. It's also very difficult, if anything forks.
> Our greatest power is our greatest problem.
> =

> --
> Dean
> =

> =

> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 24 13:27:27 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 3DDF33A690D;
	Sun, 24 Aug 2008 13:27:27 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 56F103A6999
	for <sip@core3.amsl.com>; Sun, 24 Aug 2008 13:27:26 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.144
X-Spam-Level: 
X-Spam-Status: No, score=-4.144 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, FRT_ADOBE2=2.455, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SoPB-bSV6rFr for <sip@core3.amsl.com>;
	Sun, 24 Aug 2008 13:27:25 -0700 (PDT)
Received: from exprod6og110.obsmtp.com (exprod6og110.obsmtp.com [64.18.1.25])
	by core3.amsl.com (Postfix) with ESMTP id D780F3A690D
	for <sip@ietf.org>; Sun, 24 Aug 2008 13:27:20 -0700 (PDT)
Received: from source ([192.150.11.134]) by exprod6ob110.postini.com
	([64.18.5.12]) with SMTP; Sun, 24 Aug 2008 13:27:21 PDT
Received: from inner-relay-1.corp.adobe.com ([153.32.1.51])
	by outbound-smtp-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7OKNXG3022364; Sun, 24 Aug 2008 13:23:33 -0700 (PDT)
Received: from apacmail.pac.adobe.com (apacmail.pac.adobe.com [130.248.36.99])
	by inner-relay-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7OKRJiq001654; Sun, 24 Aug 2008 13:27:20 -0700 (PDT)
Received: from namail5.corp.adobe.com ([10.8.192.88]) by
	apacmail.pac.adobe.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 05:27:19 +0900
Received: from 10.7.241.23 ([10.7.241.23]) by namail5.corp.adobe.com
	([10.8.192.88]) with Microsoft Exchange Server HTTP-DAV ; 
	Sun, 24 Aug 2008 20:27:16 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Sun, 24 Aug 2008 15:31:41 -0500
From: Henry Sinnreich <hsinnrei@adobe.com>
To: Christer Holmberg <christer.holmberg@ericsson.com>,
	Dean Willis <dean.willis@softarmor.com>
Message-ID: <C4D72F5D.7DD9%hsinnrei@adobe.com>
Thread-Topic: VS: Fixing SIP with OS reference implementations for UA and
	server
Thread-Index: AckGJEE+Q+AvFyCzBUOA74WBS4APIAAAY1KmAACm9lg=
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C791D@esealmw113.eemea.ericsson.se>
Mime-version: 1.0
X-OriginalArrivalTime: 24 Aug 2008 20:27:19.0244 (UTC)
	FILETIME=[CE5CA8C0:01C90627]
Cc: SIP IETF <sip@ietf.org>, Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and
 server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Christer,

I agree with both you and Dean and should have also specified that the SIP
standard should be amended step by step, based on testing the reference
implementation. There is nothing wrong with an I-D with fixes for SIP based
on testing a reference implementation.

Sorry for not having been clear also on the need to fix the standard
document by adding an amendment RFC.

Henry =



On 8/24/08 3:19 PM, "Christer Holmberg" <christer.holmberg@ericsson.com>
wrote:

> =

> Hi Henry,
> =

> Based on what criteria would you choose the reference implementation(s), =
and
> what is it that you really want to test? Offer/answer?
> =

> Because, eventhough there seems to be problems implementing offer/answer
> correctly, the early media/forking problem, raised by Dean, is more of a =
"bi
> product" of the way we designed the protocol. In other words, even if you=
 have
> an implementation which works 100% according to the specs, it doesn't sol=
ve
> the problem which may come up when you, due to forking, receive early med=
ia
> from multiple locations :)
> =

> Regards,
> =

> Christer
> =

> =

> -----Alkuper=E4inen viesti-----
> L=E4hett=E4j=E4: Henry Sinnreich [mailto:hsinnrei@adobe.com]
> L=E4hetetty: su 24.8.2008 22:01
> Vastaanottaja: Dean Willis; Christer Holmberg
> Kopio: SIP IETF; Cullen Jennings
> Aihe: Fixing SIP with OS reference implementations for UA and server
>  =

> (changed the subject line)
> I have followed this discussion and am convinced that (though I started i=
t)
> the issues raised here and in countless other SIPPING/SIP related
> discussions cannot be solved by apparent logic, no matter how long and how
> thorough. Just like the physics cannot be proven by discussions but only =
by
> experiment. This is the whole difference between engineering/science and
> beliefs/opinions.
> =

> The only way IMO to fix the SIPPING/SIP issues discussed here is to have =
an
> open reference implementation running in a test bed (such as one provided
> maybe by the SIP Forum) and cooperate in LUNIX-style with testing (why not
> in SIPit events as well) and fixing the code. Any fruitful discussions mu=
st
> be part of fixing running code based on test results. This is actually
> pretty plain, so forgive my rant...
> =

> Selecting a reference SIP implementation:
> There are quite a few SIP UA and and SIP server OS code sites available a=
nd
> the next step could be selecting the best candidate(s).
> If asked, I would be only to happy to recommend some candidates.
> =

> Continuing such discussions without a reference implementation is fruitle=
ss
> and the SIP issues discussed here will not get fixed so as to meet the
> requirements for a good standard. This applies to all SIP related WGs.
> =

> Any comments?
> =

> Thanks, Henry
> =

> =

> On 8/24/08 2:30 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
> =

>> =

>> On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:
>> =

>>>> =

>>> The "media before answer" (if you refer to SDP answer) can be solve
>>> by simply saying that one must send an SDP answer must be sent
>>> before media is sent.
>>> =

>>> The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
>>> doesn't work, because today media sent before SDP answer will often
>>> be discarded anyway.
>>> =

>> =

>> Perhaps not, but it's how ever device and service  I currently have
>> works.
>> =

>> Not that they work well, mind you.
>> =

>>>> It also makes ICE and SRTP much easier to deal with. By
>>>> making the transition to "regular" session a re-invite  the gateway
>>>> can transition from send-only to send-receive (if needed), the
>>>> billing
>>>> system (if it cares) can start the meter running, etc.
>>> =

>>> So, just to clarify, you are still talking about a single SIP
>>> session, right?
>> =

>> That's one of the two possible approaches, and probably the easiest to
>> explain.
>> =

>> =

>>> The issue with that solution is of course that a forking proxy, as
>>> currently defined, would terminate all other legs once the first 200
>>> OK (establishing the early media path of the session) arrives.
>> =

>> One could of course change that behavior and have the forking proxy
>> return ALL responses.
>> =

>> =

>>> =

>>> =

>>> But, that would minimize multiple early media streams, which again
>>> in my opinion shows that the main problem is not offer/answer, but
>>> forking :)
>> =

>> The two certainly play poorly with each other.
>> =

>>> =

>>> =

>>>> Plus we can drop all the 100-rel and preconditions cruft out of the
>>>> state machine completely, making life MUCH better for the coder.
>>> =

>>> If you separate the offer/answer state machine from the SIP
>>> transaction state machine it shouldn't really matter in what SIP
>>> messages the offers and answers are carried.
>> =

>> Perhaps true, but the SIP 100-rel state machine is profoundly ugly all
>> by itself.
>> =

>>> =

>>> =

>>> And, eventhough we probably would be able to remove SDP from
>>> provisional responses, I think provisional responses would still be
>>> useful for other things (indicating ringing etc).
>> =

>> Yes, and provisionals also impact the resend timers. We need them. We
>> just don't need 100-rel.
>> =

>>> =

>>> =

>>> But, of course we could have instead have used something like UPDATE
>>> (or even INFO) to indicate "ringing" etc, instead of provisional
>>> responses.
>>> =

>>>> Think of it this way -- If I'm calling a PSTN gateway, do I really
>>>> want to wait until the PSTN side connection completes before I do the
>>>> setup work for SRTP? I think I'd rather get that out of the way
>>>> before
>>>> the called party answers, or before I even see early media coming
>>>> back
>>>> unprotected.
>>> =

>>> What prevents you from doing the SRTP negotiation using reliable
>>> provisional responses, in the same way you are able to perform
>>> preconditions before the called party answers?
>> =

>> In my case, mostly the desire to avoid reliable provisional responses.
>> =

>> And when you cross-factor reliable provisional, SRTP, and forking, you
>> get a real mess.
>> =

>>> =

>>> =

>>>> Now, lets think about forking. When we fork in a proxy, the UAC can
>>>> only deal with one "best answer", and early media is anybody's guess
>>>> as to how it might work or what might happen (it pretty much turns to
>>>> soup, especially if you get multiple early media channels).
>>> =

>>> Correct. And, that will be a problem as long as it is possible for
>>> the UAC to receive multiple early streams - no matter how they are
>>> negotiated.
>>> =

>>>> Consider instead that a forking node is really a "forking gateway",
>>>> not a proxy. It takes one call in, establishes a fully-negotiated
>>>> "early session",  then sends out its multiple INVITES.  As those
>>>> sessions (which might have early media) connect up, the forking
>>>> gateway deals with the multiple media streams (by bridging,
>>>> discarding, whatever).
>>> =

>>> Doesn't that simply move the how-to-choose-which-early-media-stream-
>>> to-listen-to from the UAC to the forking proxy/gateway?
>> =

>> It allows the forking gateway to either mix all the streams into one
>> (a boon to the bandwidth-restricted UAC), or more intelligently choose
>> which one to relay based on media-analysis. For example, ringing can
>> easily be differentiated from speech, so if a forking-b2bua sees four
>> legs of ringing and one of speech, it could quite reasonably choose
>> the speech channel to send back to the UAC.
>> =

>>> =

>>> =

>>>> When a forked session matures to a "regular session", the forking
>>>> gateway can re-invite the UAC to >make that session a "regular
>>>> session",
>>> =

>>> Today it does that again by sending 200 OK.
>> =

>> Right -- assuming you did your media setup in provisional (and keying
>> in reliable provisional, which is messy)
>> =

>>> Again, I agree that many things probably could be done in a
>>> "cleaner" way, but I think the main problem still exists: if there
>>> are multiple early media streams (due to forking proxy or forking
>>> gateway), how do I choose which one to play?
>>> =

>> =

>> I'm not aware of a perfect asnwer, but (as above) can say there are
>> definitely several "better" answers than what we have now.
>> =

>> =

>>>> or can even arrange to drop itself out of the media path if needed.
>>> =

>>> How would that work? It would be able to change the local contact
>>> from itself to the called party, but it would not be able to add the
>>> possible Record-Routes between itself and the called user.
>> =

>> Media path, not signaling. Fall back to 3PCC setup techniques on a
>> reinvite sequence.
>> =

>>> =

>>> Not being able to modify the signaling path during a session (read:
>>> update the Record-Route) is a "bug" in the protocol, I think, but
>>> it's a separate issue :)
>>> =

>> =

>> yeah, re-invite should be abele to re-route.
>> =

>> =

>>>> If we have to have forking, and we have to have media before
>>>> there's a
>>>> final answer, then I think something like this is needed to make it
>>>> work.
>>> =

>>> Again, it could make the signaling flows a little more nicer, and it
>>> would move some decissions from the UAC to the forking gateway, but
>>> the problem with multiple media streams (no matter whether you call
>>> them early or not :) would still exist.
>> =

>> Perhaps. However, one of the more profound problems today (as with
>> mobile nets) is limited bandwidth to the UA. Dealing with mixing,
>> recoding, and selection-from-alternatives in a "server" is much easier.
>> =

>>> =

>>> In my opinion, the only solution, using what we have today, is to
>>> make sure there is only one early media stream sent.
>> =

>> Yep. That's quite true. It's also very difficult, if anything forks.
>> Our greatest power is our greatest problem.
>> =

>> --
>> Dean
>> =

>> =

>> _______________________________________________
>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
> =

> =


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 24 13:52:40 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E189A3A69EF;
	Sun, 24 Aug 2008 13:52:40 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BBC283A69EF
	for <sip@core3.amsl.com>; Sun, 24 Aug 2008 13:52:39 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.635
X-Spam-Level: 
X-Spam-Status: No, score=-5.635 tagged_above=-999 required=5 tests=[AWL=0.614, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id kziryEXfmlDE for <sip@core3.amsl.com>;
	Sun, 24 Aug 2008 13:52:38 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 5FBD33A68F0
	for <sip@ietf.org>; Sun, 24 Aug 2008 13:52:38 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	7AEDF20225; Sun, 24 Aug 2008 22:52:19 +0200 (CEST)
X-AuditID: c1b4fb3e-a8684bb000007a96-5b-48b1ca03c91a
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	56A6C2005D; Sun, 24 Aug 2008 22:52:19 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 24 Aug 2008 22:52:19 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Sun, 24 Aug 2008 22:52:18 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C791E@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: VS: VS: [Sip] Early media as an endpoint application
Thread-Index: AckGH/dR2FKJyY2zT5iOxv7I8/KytwABrRj9
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
	<68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>
	<865BA838-48F9-453C-AD11-0AF49BA9FD79@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C7916@esealmw113.eemea.ericsson.se>
	<25AEB4FF-0DD7-4F69-98D8-F02B0CC794C3@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C7918@esealmw113.eemea.ericsson.se>
	<B000304C-162A-4EE4-BA44-FC3FA689AD54@softarmor.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Dean Willis" <dean.willis@softarmor.com>
X-OriginalArrivalTime: 24 Aug 2008 20:52:19.0141 (UTC)
	FILETIME=[4C5EC750:01C9062B]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

>>The "media before answer" (if you refer to SDP answer) can be solve  
>>by simply saying that one must send an SDP answer must be sent  
>>before media is sent.
>>
>>The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE  
>>doesn't work, because today media sent before SDP answer will often  
>>be discarded anyway.
>
>
>Perhaps not, but it's how ever device and service  I currently have  
>works.

At least in environments with gating, SBCs and/or bandwidth/radio resource reservation procedures I don't think those devices would work very well, because the media sent before the SDP answer would most likely be terminated somewhere.

>Not that they work well, mind you.

So, the first step would then be: make sure you don't send media until you have sent an SDP answer :)

>>>It also makes ICE and SRTP much easier to deal with. By
>>>making the transition to "regular" session a re-invite  the gateway
>>>can transition from send-only to send-receive (if needed), the  
>>>billing system (if it cares) can start the meter running, etc.
>>
>>So, just to clarify, you are still talking about a single SIP  
>>session, right?
>
>That's one of the two possible approaches, and probably the easiest to  
>explain.

Probably the easiest to implement also. Because, if you would use separate SIP sessions, you would need to somehow "transfer" the ICE/SRTP/resource reservation state between them.

...unless you want to perform separate ICE/SRTP/resource reservation on the early- and the full dialog sessions, which would be really bad.

>>The issue with that solution is of course that a forking proxy, as  
>>currently defined, would terminate all other legs once the first 200  
>>OK (establishing the early media path of the session) arrives.
>
>One could of course change that behavior and have the forking proxy  
>return ALL responses.

They do currently forward all 200 OK responses, but there will of course only be multiple 200 OK responses if they were sent before the CANCEL sent by the forking proxy arrived. 

>>>Plus we can drop all the 100-rel and preconditions cruft out of the
>>>state machine completely, making life MUCH better for the coder.
>>
>>If you separate the offer/answer state machine from the SIP  
>>transaction state machine it shouldn't really matter in what SIP  
>>messages the offers and answers are carried.
>
>Perhaps true, but the SIP 100-rel state machine is profoundly ugly all  
>by itself.
>
>>And, eventhough we probably would be able to remove SDP from  
>>provisional responses, I think provisional responses would still be  
>>useful for other things (indicating ringing etc).
>
>Yes, and provisionals also impact the resend timers. We need them. We  
>just don't need 100-rel.

If you want to get rid of 100-rel there is also another way: get rid of UDP ;)

>>> Consider instead that a forking node is really a "forking gateway",
>>> not a proxy. It takes one call in, establishes a fully-negotiated
>>> "early session",  then sends out its multiple INVITES.  As those
>>> sessions (which might have early media) connect up, the forking
>>> gateway deals with the multiple media streams (by bridging,
>>> discarding, whatever).
>>
>>Doesn't that simply move the how-to-choose-which-early-media-stream- 
>>to-listen-to from the UAC to the forking proxy/gateway?
>
>It allows the forking gateway to either mix all the streams into one  
>(a boon to the bandwidth-restricted UAC), or more intelligently choose  
>which one to relay based on media-analysis. For example, ringing can  
>easily be differentiated from speech, so if a forking-b2bua sees four  
>legs of ringing and one of speech, it could quite reasonably choose  
>the speech channel to send back to the UAC.

What if it sees four legs of speech and one of ringing?

I agree that you could make the life of the UAC easier, and better control that the media sent towards the UAC "fits" within the negotiated UAC-proxy bandwidth etc, using this kind of forking-b2bua.

But, it would require a big box, media mixing and possibly transcoding, in the network, and someone told me that IETF is about UA-to-UA-with-nothing-but-stupid-cable in between :)

>>>If we have to have forking, and we have to have media before there's a
>>>final answer, then I think something like this is needed to make it
>>>work.
>>
>>Again, it could make the signaling flows a little more nicer, and it  
>>would move some decissions from the UAC to the forking gateway, but  
>>the problem with multiple media streams (no matter whether you call  
>>them early or not :) would still exist.
>
>Perhaps. However, one of the more profound problems today (as with  
>mobile nets) is limited bandwidth to the UA. Dealing with mixing,  
>recoding, and selection-from-alternatives in a "server" is much easier.

Yes, but saying that is not politically correct, is it? :)

>>In my opinion, the only solution, using what we have today, is to make sure there is only one early >>media stream sent.
>
>Yep. That's quite true. It's also very difficult, if anything forks.  
>Our greatest power is our greatest problem.

Eventhough it doesn't solve the problem, I think many things would work much better if people implemented and used RFC 3841 (and RFC 3840). It e.g. allows you to indicate that you don't wish parallel forking to occur.

Regards,

Christer

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 24 19:31:39 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 740CA3A6962;
	Sun, 24 Aug 2008 19:31:39 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 038333A6962
	for <sip@core3.amsl.com>; Sun, 24 Aug 2008 19:31:38 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.144
X-Spam-Level: 
X-Spam-Status: No, score=-4.144 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, FRT_ADOBE2=2.455, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id HXXcIK0shQM7 for <sip@core3.amsl.com>;
	Sun, 24 Aug 2008 19:31:36 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 16E763A685F
	for <sip@ietf.org>; Sun, 24 Aug 2008 19:31:36 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,264,1217808000"; d="scan'208";a="18563875"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 25 Aug 2008 02:30:38 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7P2UccJ010780; 
	Sun, 24 Aug 2008 22:30:38 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7P2UcQY020032;
	Mon, 25 Aug 2008 02:30:38 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 24 Aug 2008 22:30:38 -0400
Received: from [10.86.250.94] ([10.86.250.94]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Sun, 24 Aug 2008 22:30:37 -0400
Message-ID: <48B21988.1090500@cisco.com>
Date: Sun, 24 Aug 2008 22:31:36 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Henry Sinnreich <hsinnrei@adobe.com>
References: <C4D72F5D.7DD9%hsinnrei@adobe.com>
In-Reply-To: <C4D72F5D.7DD9%hsinnrei@adobe.com>
X-OriginalArrivalTime: 25 Aug 2008 02:30:38.0034 (UTC)
	FILETIME=[8F740B20:01C9065A]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=12989; t=1219631438;
	x=1220495438; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Fixing=20SIP=20with=20OS=20refe
	rence=20implementations=20for=20UA=20and=0A=20server
	|Sender:=20 |To:=20Henry=20Sinnreich=20<hsinnrei@adobe.com>;
	bh=qK3zuvH3jV9QU48mjfWRHAvNTOtu2zVOkCujDKppAIY=;
	b=frqSdq+Elxq0uU9maTDS6SxDPh4Lp4bt6xokEnf76h64qmTnzRdeqrdGan
	y59iVCAtNjD1AtnHrAsZ7EGJ0Hxi0XW6aVMQdDdFjui1BpzZwr2JebS0d20x
	C+7TDxeBTD;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <sip@ietf.org>, Cullen Jennings <fluffy@cisco.com>,
	Dean Willis <dean.willis@softarmor.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and
 server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Henry,

Its interesting that you have drawn parallels here with physics.
In physics there are theorists and experimentalists. I think most of =

them agree that progress in physics requires both - the experimentalists =

require a theory to verify, and the theorists need observed violations =

of the theory and data that is unexplained by existing theories.

I agree that experimentalists are useful in our business too. I in =

general agree with your implied assertion that we (the IETF sip-related =

WGs) are theorists.

Its not entirely clear to me whether we need *more* experimentalists =

than we already have, or if they could or should be more closely =

affiliated with the IETF than they already are. We do already have SIP =

Forum, running SIPit. We hear the results of that. And clearly there are =

plenty of participants here that speak for implementations.

Based on what you have said before, I gather you think there is too much =

standardization done in relation to the amount of implementation done. =

There certainly are cases when that is true. But remember that most of =

the documents we are producing are only drafts - they aren't even =

complete theories ready to be tested. Even the RFCs we produce are only =

Proposed Standards, and so are probably good candidates for testing.

If one person, or a very few working closely together, are doing all the =

design and implementation of something, then you *might* be able to get =

by just implementing without first specifying what is being implemented. =

Some of the agile methods advocate that kind of approach.  If what you =

are attempting has too many moving parts for that, then its still =

necessary to write a spec. Doing an open source implementation doesn't =

change that. It may just change which group does the specification. In a =

way this is like having the experimental physicists develop the theories.

Bottom line - IMO it would be good to get more early implementation =

experience than we seem to get now. An open reference implementation is =

one way to get that. But I don't think we should make some sort of rule =

that you can't submit a draft without a reference implementation, or =

even that you can't have an RFC without a reference implementation. =

(There is already a requirement for multiple implementations before a =

*Draft* standard.)

	Thanks,
	Paul

Henry Sinnreich wrote:
> Christer,
> =

> I agree with both you and Dean and should have also specified that the SIP
> standard should be amended step by step, based on testing the reference
> implementation. There is nothing wrong with an I-D with fixes for SIP bas=
ed
> on testing a reference implementation.
> =

> Sorry for not having been clear also on the need to fix the standard
> document by adding an amendment RFC.
> =

> Henry =

> =

> =

> On 8/24/08 3:19 PM, "Christer Holmberg" <christer.holmberg@ericsson.com>
> wrote:
> =

>> Hi Henry,
>>
>> Based on what criteria would you choose the reference implementation(s),=
 and
>> what is it that you really want to test? Offer/answer?
>>
>> Because, eventhough there seems to be problems implementing offer/answer
>> correctly, the early media/forking problem, raised by Dean, is more of a=
 "bi
>> product" of the way we designed the protocol. In other words, even if yo=
u have
>> an implementation which works 100% according to the specs, it doesn't so=
lve
>> the problem which may come up when you, due to forking, receive early me=
dia
>> from multiple locations :)
>>
>> Regards,
>>
>> Christer
>>
>>
>> -----Alkuper=E4inen viesti-----
>> L=E4hett=E4j=E4: Henry Sinnreich [mailto:hsinnrei@adobe.com]
>> L=E4hetetty: su 24.8.2008 22:01
>> Vastaanottaja: Dean Willis; Christer Holmberg
>> Kopio: SIP IETF; Cullen Jennings
>> Aihe: Fixing SIP with OS reference implementations for UA and server
>>  =

>> (changed the subject line)
>> I have followed this discussion and am convinced that (though I started =
it)
>> the issues raised here and in countless other SIPPING/SIP related
>> discussions cannot be solved by apparent logic, no matter how long and h=
ow
>> thorough. Just like the physics cannot be proven by discussions but only=
 by
>> experiment. This is the whole difference between engineering/science and
>> beliefs/opinions.
>>
>> The only way IMO to fix the SIPPING/SIP issues discussed here is to have=
 an
>> open reference implementation running in a test bed (such as one provided
>> maybe by the SIP Forum) and cooperate in LUNIX-style with testing (why n=
ot
>> in SIPit events as well) and fixing the code. Any fruitful discussions m=
ust
>> be part of fixing running code based on test results. This is actually
>> pretty plain, so forgive my rant...
>>
>> Selecting a reference SIP implementation:
>> There are quite a few SIP UA and and SIP server OS code sites available =
and
>> the next step could be selecting the best candidate(s).
>> If asked, I would be only to happy to recommend some candidates.
>>
>> Continuing such discussions without a reference implementation is fruitl=
ess
>> and the SIP issues discussed here will not get fixed so as to meet the
>> requirements for a good standard. This applies to all SIP related WGs.
>>
>> Any comments?
>>
>> Thanks, Henry
>>
>>
>> On 8/24/08 2:30 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
>>
>>> On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:
>>>
>>>> The "media before answer" (if you refer to SDP answer) can be solve
>>>> by simply saying that one must send an SDP answer must be sent
>>>> before media is sent.
>>>>
>>>> The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
>>>> doesn't work, because today media sent before SDP answer will often
>>>> be discarded anyway.
>>>>
>>> Perhaps not, but it's how ever device and service  I currently have
>>> works.
>>>
>>> Not that they work well, mind you.
>>>
>>>>> It also makes ICE and SRTP much easier to deal with. By
>>>>> making the transition to "regular" session a re-invite  the gateway
>>>>> can transition from send-only to send-receive (if needed), the
>>>>> billing
>>>>> system (if it cares) can start the meter running, etc.
>>>> So, just to clarify, you are still talking about a single SIP
>>>> session, right?
>>> That's one of the two possible approaches, and probably the easiest to
>>> explain.
>>>
>>>
>>>> The issue with that solution is of course that a forking proxy, as
>>>> currently defined, would terminate all other legs once the first 200
>>>> OK (establishing the early media path of the session) arrives.
>>> One could of course change that behavior and have the forking proxy
>>> return ALL responses.
>>>
>>>
>>>>
>>>> But, that would minimize multiple early media streams, which again
>>>> in my opinion shows that the main problem is not offer/answer, but
>>>> forking :)
>>> The two certainly play poorly with each other.
>>>
>>>>
>>>>> Plus we can drop all the 100-rel and preconditions cruft out of the
>>>>> state machine completely, making life MUCH better for the coder.
>>>> If you separate the offer/answer state machine from the SIP
>>>> transaction state machine it shouldn't really matter in what SIP
>>>> messages the offers and answers are carried.
>>> Perhaps true, but the SIP 100-rel state machine is profoundly ugly all
>>> by itself.
>>>
>>>>
>>>> And, eventhough we probably would be able to remove SDP from
>>>> provisional responses, I think provisional responses would still be
>>>> useful for other things (indicating ringing etc).
>>> Yes, and provisionals also impact the resend timers. We need them. We
>>> just don't need 100-rel.
>>>
>>>>
>>>> But, of course we could have instead have used something like UPDATE
>>>> (or even INFO) to indicate "ringing" etc, instead of provisional
>>>> responses.
>>>>
>>>>> Think of it this way -- If I'm calling a PSTN gateway, do I really
>>>>> want to wait until the PSTN side connection completes before I do the
>>>>> setup work for SRTP? I think I'd rather get that out of the way
>>>>> before
>>>>> the called party answers, or before I even see early media coming
>>>>> back
>>>>> unprotected.
>>>> What prevents you from doing the SRTP negotiation using reliable
>>>> provisional responses, in the same way you are able to perform
>>>> preconditions before the called party answers?
>>> In my case, mostly the desire to avoid reliable provisional responses.
>>>
>>> And when you cross-factor reliable provisional, SRTP, and forking, you
>>> get a real mess.
>>>
>>>>
>>>>> Now, lets think about forking. When we fork in a proxy, the UAC can
>>>>> only deal with one "best answer", and early media is anybody's guess
>>>>> as to how it might work or what might happen (it pretty much turns to
>>>>> soup, especially if you get multiple early media channels).
>>>> Correct. And, that will be a problem as long as it is possible for
>>>> the UAC to receive multiple early streams - no matter how they are
>>>> negotiated.
>>>>
>>>>> Consider instead that a forking node is really a "forking gateway",
>>>>> not a proxy. It takes one call in, establishes a fully-negotiated
>>>>> "early session",  then sends out its multiple INVITES.  As those
>>>>> sessions (which might have early media) connect up, the forking
>>>>> gateway deals with the multiple media streams (by bridging,
>>>>> discarding, whatever).
>>>> Doesn't that simply move the how-to-choose-which-early-media-stream-
>>>> to-listen-to from the UAC to the forking proxy/gateway?
>>> It allows the forking gateway to either mix all the streams into one
>>> (a boon to the bandwidth-restricted UAC), or more intelligently choose
>>> which one to relay based on media-analysis. For example, ringing can
>>> easily be differentiated from speech, so if a forking-b2bua sees four
>>> legs of ringing and one of speech, it could quite reasonably choose
>>> the speech channel to send back to the UAC.
>>>
>>>>
>>>>> When a forked session matures to a "regular session", the forking
>>>>> gateway can re-invite the UAC to >make that session a "regular
>>>>> session",
>>>> Today it does that again by sending 200 OK.
>>> Right -- assuming you did your media setup in provisional (and keying
>>> in reliable provisional, which is messy)
>>>
>>>> Again, I agree that many things probably could be done in a
>>>> "cleaner" way, but I think the main problem still exists: if there
>>>> are multiple early media streams (due to forking proxy or forking
>>>> gateway), how do I choose which one to play?
>>>>
>>> I'm not aware of a perfect asnwer, but (as above) can say there are
>>> definitely several "better" answers than what we have now.
>>>
>>>
>>>>> or can even arrange to drop itself out of the media path if needed.
>>>> How would that work? It would be able to change the local contact
>>>> from itself to the called party, but it would not be able to add the
>>>> possible Record-Routes between itself and the called user.
>>> Media path, not signaling. Fall back to 3PCC setup techniques on a
>>> reinvite sequence.
>>>
>>>> Not being able to modify the signaling path during a session (read:
>>>> update the Record-Route) is a "bug" in the protocol, I think, but
>>>> it's a separate issue :)
>>>>
>>> yeah, re-invite should be abele to re-route.
>>>
>>>
>>>>> If we have to have forking, and we have to have media before
>>>>> there's a
>>>>> final answer, then I think something like this is needed to make it
>>>>> work.
>>>> Again, it could make the signaling flows a little more nicer, and it
>>>> would move some decissions from the UAC to the forking gateway, but
>>>> the problem with multiple media streams (no matter whether you call
>>>> them early or not :) would still exist.
>>> Perhaps. However, one of the more profound problems today (as with
>>> mobile nets) is limited bandwidth to the UA. Dealing with mixing,
>>> recoding, and selection-from-alternatives in a "server" is much easier.
>>>
>>>> In my opinion, the only solution, using what we have today, is to
>>>> make sure there is only one early media stream sent.
>>> Yep. That's quite true. It's also very difficult, if anything forks.
>>> Our greatest power is our greatest problem.
>>>
>>> --
>>> Dean
>>>
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>
> =

> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> =

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sun Aug 24 21:41:17 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2DFB43A696E;
	Sun, 24 Aug 2008 21:41:17 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0F1163A696E
	for <sip@core3.amsl.com>; Sun, 24 Aug 2008 21:41:16 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.949
X-Spam-Level: 
X-Spam-Status: No, score=-1.949 tagged_above=-999 required=5 tests=[AWL=0.650, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id l4Kaf-Cq6WA5 for <sip@core3.amsl.com>;
	Sun, 24 Aug 2008 21:41:15 -0700 (PDT)
Received: from nylon.softarmor.com (nylon.softarmor.com [66.135.38.164])
	by core3.amsl.com (Postfix) with ESMTP id 12D843A683B
	for <sip@ietf.org>; Sun, 24 Aug 2008 21:41:14 -0700 (PDT)
Received: from [192.168.2.103] (cpe-76-185-142-113.tx.res.rr.com
	[76.185.142.113]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.8/8.13.8/Debian-3) with ESMTP id
	m7P4eveZ031271
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NOT);
	Sun, 24 Aug 2008 23:41:00 -0500
Message-Id: <B5A2FD0B-525D-464C-B4FC-1751D1D1EE85@softarmor.com>
From: Dean Willis <dean.willis@softarmor.com>
To: Christer Holmberg <christer.holmberg@ericsson.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C791E@esealmw113.eemea.ericsson.se>
Mime-Version: 1.0 (Apple Message framework v928.1)
Date: Sun, 24 Aug 2008 23:40:51 -0500
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>
	<68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>
	<865BA838-48F9-453C-AD11-0AF49BA9FD79@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C7916@esealmw113.eemea.ericsson.se>
	<25AEB4FF-0DD7-4F69-98D8-F02B0CC794C3@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C7918@esealmw113.eemea.ericsson.se>
	<B000304C-162A-4EE4-BA44-FC3FA689AD54@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C791E@esealmw113.eemea.ericsson.se>
X-Mailer: Apple Mail (2.928.1)
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


On Aug 24, 2008, at 3:52 PM, Christer Holmberg wrote:

>
> Probably the easiest to implement also. Because, if you would use  
> separate SIP sessions, you would need to somehow "transfer" the ICE/ 
> SRTP/resource reservation state between them.
>
> ...unless you want to perform separate ICE/SRTP/resource reservation  
> on the early- and the full dialog sessions, which would be really bad.
>

Good point.



>>> The issue with that solution is of course that a forking proxy, as
>>> currently defined, would terminate all other legs once the first 200
>>> OK (establishing the early media path of the session) arrives.
>>
>> One could of course change that behavior and have the forking proxy
>> return ALL responses.
>
> They do currently forward all 200 OK responses, but there will of  
> course only be multiple 200 OK responses if they were sent before  
> the CANCEL sent by the forking proxy arrived.

Right. I meant that the forking proxy would have to not prune the  
forks, and the UA might have to deal with multiple concurrent media  
sessions as a result.


>
> If you want to get rid of 100-rel there is also another way: get rid  
> of UDP ;)
>

I've suggested that from time to time. Very seriously.

However, you still need end-to-end reliability, because proxies might  
receive a message (satisfying TCP), but then drop it.

So one really has to eliminate UDP and proxies. I'm OK with that.

>>>> Consider instead that a forking node is really a "forking gateway",
>>>> not a proxy. It takes one call in, establishes a fully-negotiated
>>>> "early session",  then sends out its multiple INVITES.  As those
>>>> sessions (which might have early media) connect up, the forking
>>>> gateway deals with the multiple media streams (by bridging,
>>>> discarding, whatever).
>>>
>>> Doesn't that simply move the how-to-choose-which-early-media-stream-
>>> to-listen-to from the UAC to the forking proxy/gateway?
>>
>> It allows the forking gateway to either mix all the streams into one
>> (a boon to the bandwidth-restricted UAC), or more intelligently  
>> choose
>> which one to relay based on media-analysis. For example, ringing can
>> easily be differentiated from speech, so if a forking-b2bua sees four
>> legs of ringing and one of speech, it could quite reasonably choose
>> the speech channel to send back to the UAC.
>
> What if it sees four legs of speech and one of ringing?
>
> I agree that you could make the life of the UAC easier, and better  
> control that the media sent towards the UAC "fits" within the  
> negotiated UAC-proxy bandwidth etc, using this kind of forking-b2bua.
>
> But, it would require a big box, media mixing and possibly  
> transcoding, in the network, and someone told me that IETF is about  
> UA-to-UA-with-nothing-but-stupid-cable in between :)

See above discussion of eliminating proxies too .  . .

>
>
>>>> If we have to have forking, and we have to have media before  
>>>> there's a
>>>> final answer, then I think something like this is needed to make it
>>>> work.
>>>
>>> Again, it could make the signaling flows a little more nicer, and it
>>> would move some decissions from the UAC to the forking gateway, but
>>> the problem with multiple media streams (no matter whether you call
>>> them early or not :) would still exist.
>>
>> Perhaps. However, one of the more profound problems today (as with
>> mobile nets) is limited bandwidth to the UA. Dealing with mixing,
>> recoding, and selection-from-alternatives in a "server" is much  
>> easier.
>
> Yes, but saying that is not politically correct, is it? :)

Me, politically correct? Surely you jest.

--
Dean
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 25 06:01:20 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id DFEB928D029;
	Mon, 25 Aug 2008 06:01:20 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 06CB228D01A
	for <sip@core3.amsl.com>; Mon, 25 Aug 2008 06:01:20 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6Mh6-CjQ-WIo for <sip@core3.amsl.com>;
	Mon, 25 Aug 2008 06:01:16 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id D290628D01E
	for <sip@ietf.org>; Mon, 25 Aug 2008 06:01:15 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,265,1217808000"; d="scan'208";a="18593806"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 25 Aug 2008 13:00:44 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7PD0iBB023370; 
	Mon, 25 Aug 2008 09:00:44 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m7PD0iZI026235;
	Mon, 25 Aug 2008 13:00:44 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 09:00:43 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 09:00:43 -0400
Message-ID: <48B2AD37.2090505@cisco.com>
Date: Mon, 25 Aug 2008 09:01:43 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Dean Willis <dean.willis@softarmor.com>
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com>	<68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com>	<CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se>	<865BA838-48F9-453C-AD11-0AF49BA9FD79@softarmor.com>	<CA9998CD4A020D418654FCDEF4E707DF046C7916@esealmw113.eemea.ericsson.se>	<25AEB4FF-0DD7-4F69-98D8-F02B0CC794C3@softarmor.com>	<CA9998CD4A020D418654FCDEF4E707DF046C7918@esealmw113.eemea.ericsson.se>	<B000304C-162A-4EE4-BA44-FC3FA689AD54@softarmor.com>	<CA9998CD4A020D418654FCDEF4E707DF046C791E@esealmw113.eemea.ericsson.se>
	<B5A2FD0B-525D-464C-B4FC-1751D1D1EE85@softarmor.com>
In-Reply-To: <B5A2FD0B-525D-464C-B4FC-1751D1D1EE85@softarmor.com>
X-OriginalArrivalTime: 25 Aug 2008 13:00:43.0596 (UTC)
	FILETIME=[955300C0:01C906B2]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1294; t=1219669244;
	x=1220533244; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Early=20media=20as=20an=20endpo
	int=20application |Sender:=20
	|To:=20Dean=20Willis=20<dean.willis@softarmor.com>;
	bh=H7JgBiRw9tQTx5UB6Gy6ifECtbKMUsxb/ouC0ibttB4=;
	b=r4at0rV0WS+QLUZZA1lnNsjpK+gUPDz8QHJYIDN0o9NJUKN/4uZhHc9gJP
	mUhl1tF40BuWmsI74IIds8Ld3ORHWsqNmxL6QenC2ygT/v3VskPd2Fl8OJPU
	4on54j5YaY;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <sip@ietf.org>, Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Dean Willis wrote:
> On Aug 24, 2008, at 3:52 PM, Christer Holmberg wrote:
> 
>> Probably the easiest to implement also. Because, if you would use  
>> separate SIP sessions, you would need to somehow "transfer" the ICE/ 
>> SRTP/resource reservation state between them.
>>
>> ...unless you want to perform separate ICE/SRTP/resource reservation  
>> on the early- and the full dialog sessions, which would be really bad.
>>
> 
> Good point.
> 
> 
> 
>>>> The issue with that solution is of course that a forking proxy, as
>>>> currently defined, would terminate all other legs once the first 200
>>>> OK (establishing the early media path of the session) arrives.
>>> One could of course change that behavior and have the forking proxy
>>> return ALL responses.
>> They do currently forward all 200 OK responses, but there will of  
>> course only be multiple 200 OK responses if they were sent before  
>> the CANCEL sent by the forking proxy arrived.
> 
> Right. I meant that the forking proxy would have to not prune the  
> forks, and the UA might have to deal with multiple concurrent media  
> sessions as a result.

There is the Request-Disposition header defined in 3841. 
(Request-Disposition:no-cancel). If anybody actually implemented it.

	Paul
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 25 09:10:40 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 01CF43A6883;
	Mon, 25 Aug 2008 09:10:40 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 907413A6816
	for <sip@core3.amsl.com>; Mon, 25 Aug 2008 09:10:01 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -2.599
X-Spam-Level: 
X-Spam-Status: No, score=-2.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dlPgwvTcXOSq for <sip@core3.amsl.com>;
	Mon, 25 Aug 2008 09:10:00 -0700 (PDT)
Received: from ihemail2.lucent.com (ihemail2.lucent.com [135.245.0.35])
	by core3.amsl.com (Postfix) with ESMTP id E03DA3A6886
	for <sip@ietf.org>; Mon, 25 Aug 2008 09:09:33 -0700 (PDT)
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail2.lucent.com (8.13.8/IER-o) with ESMTP id m7PG8UjN022225;
	Mon, 25 Aug 2008 11:08:35 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 11:08:34 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 18:08:31 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 25 Aug 2008 18:08:29 +0200
Message-ID: <5D1A7985295922448D5550C94DE2918002259764@DEEXC1U01.de.lucent.com>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C791E@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Early media as an endpoint application
Thread-Index: AckGH/dR2FKJyY2zT5iOxv7I8/KytwABrRj9ACl869A=
References: <16BE241A-8699-485A-A450-BD27AA2EFAE6@softarmor.com><C4D2F10C.7CB9%hsinnrei@adobe.com><092B2658AAB56A4D80836399A4C4703105E30A9C@ASHEVS002.mcilink.com><B328D2F6-AE16-40CB-B4AE-5BD59CFA5F7D@softarmor.com><092B2658AAB56A4D80836399A4C4703105B7C626@ASHEVS002.mcilink.com><68BCCF24-16B2-499C-A4FC-3EF5A760C150@softarmor.com><CA9998CD4A020D418654FCDEF4E707DF0791B681@esealmw113.eemea.ericsson.se><865BA838-48F9-453C-AD11-0AF49BA9FD79@softarmor.com><CA9998CD4A020D418654FCDEF4E707DF046C7916@esealmw113.eemea.ericsson.se><25AEB4FF-0DD7-4F69-98D8-F02B0CC794C3@softarmor.com><CA9998CD4A020D418654FCDEF4E707DF046C7918@esealmw113.eemea.ericsson.se><B000304C-162A-4EE4-BA44-FC3FA689AD54@softarmor.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C791E@esealmw113.eemea.ericsson.se>
From: "DRAGE, Keith \(Keith\)" <drage@alcatel-lucent.com>
To: "Christer Holmberg" <christer.holmberg@ericsson.com>,
	"Dean Willis" <dean.willis@softarmor.com>
X-OriginalArrivalTime: 25 Aug 2008 16:08:31.0983 (UTC)
	FILETIME=[D1CE67F0:01C906CC]
X-Scanned-By: MIMEDefang 2.57 on 135.245.2.35
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] Early media as an endpoint application
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

> What if it sees four legs of speech and one of ringing? 

You have a talking donkey touring a poor sound engineer?

Keith

> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
> Behalf Of Christer Holmberg
> Sent: Sunday, August 24, 2008 9:52 PM
> To: Dean Willis
> Cc: SIP IETF
> Subject: Re: [Sip] Early media as an endpoint application
> 
> 
> Hi,
> 
> >>The "media before answer" (if you refer to SDP answer) can 
> be solve by 
> >>simply saying that one must send an SDP answer must be sent before 
> >>media is sent.
> >>
> >>The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
> >>doesn't work, because today media sent before SDP answer 
> will often be 
> >>discarded anyway.
> >
> >
> >Perhaps not, but it's how ever device and service  I currently have 
> >works.
> 
> At least in environments with gating, SBCs and/or 
> bandwidth/radio resource reservation procedures I don't think 
> those devices would work very well, because the media sent 
> before the SDP answer would most likely be terminated somewhere.
> 
> >Not that they work well, mind you.
> 
> So, the first step would then be: make sure you don't send 
> media until you have sent an SDP answer :)
> 
> >>>It also makes ICE and SRTP much easier to deal with. By making the 
> >>>transition to "regular" session a re-invite  the gateway can 
> >>>transition from send-only to send-receive (if needed), the billing 
> >>>system (if it cares) can start the meter running, etc.
> >>
> >>So, just to clarify, you are still talking about a single 
> SIP session, 
> >>right?
> >
> >That's one of the two possible approaches, and probably the 
> easiest to 
> >explain.
> 
> Probably the easiest to implement also. Because, if you would 
> use separate SIP sessions, you would need to somehow 
> "transfer" the ICE/SRTP/resource reservation state between them.
> 
> ...unless you want to perform separate ICE/SRTP/resource 
> reservation on the early- and the full dialog sessions, which 
> would be really bad.
> 
> >>The issue with that solution is of course that a forking proxy, as 
> >>currently defined, would terminate all other legs once the 
> first 200 
> >>OK (establishing the early media path of the session) arrives.
> >
> >One could of course change that behavior and have the forking proxy 
> >return ALL responses.
> 
> They do currently forward all 200 OK responses, but there 
> will of course only be multiple 200 OK responses if they were 
> sent before the CANCEL sent by the forking proxy arrived. 
> 
> >>>Plus we can drop all the 100-rel and preconditions cruft 
> out of the 
> >>>state machine completely, making life MUCH better for the coder.
> >>
> >>If you separate the offer/answer state machine from the SIP 
> >>transaction state machine it shouldn't really matter in what SIP 
> >>messages the offers and answers are carried.
> >
> >Perhaps true, but the SIP 100-rel state machine is 
> profoundly ugly all 
> >by itself.
> >
> >>And, eventhough we probably would be able to remove SDP from 
> >>provisional responses, I think provisional responses would still be 
> >>useful for other things (indicating ringing etc).
> >
> >Yes, and provisionals also impact the resend timers. We need 
> them. We 
> >just don't need 100-rel.
> 
> If you want to get rid of 100-rel there is also another way: 
> get rid of UDP ;)
> 
> >>> Consider instead that a forking node is really a "forking 
> gateway", 
> >>> not a proxy. It takes one call in, establishes a fully-negotiated 
> >>> "early session",  then sends out its multiple INVITES.  As those 
> >>> sessions (which might have early media) connect up, the forking 
> >>> gateway deals with the multiple media streams (by bridging, 
> >>> discarding, whatever).
> >>
> >>Doesn't that simply move the how-to-choose-which-early-media-stream-
> >>to-listen-to from the UAC to the forking proxy/gateway?
> >
> >It allows the forking gateway to either mix all the streams 
> into one (a 
> >boon to the bandwidth-restricted UAC), or more intelligently choose 
> >which one to relay based on media-analysis. For example, ringing can 
> >easily be differentiated from speech, so if a forking-b2bua 
> sees four 
> >legs of ringing and one of speech, it could quite reasonably 
> choose the 
> >speech channel to send back to the UAC.
> 
> What if it sees four legs of speech and one of ringing?
> 
> I agree that you could make the life of the UAC easier, and 
> better control that the media sent towards the UAC "fits" 
> within the negotiated UAC-proxy bandwidth etc, using this 
> kind of forking-b2bua.
> 
> But, it would require a big box, media mixing and possibly 
> transcoding, in the network, and someone told me that IETF is 
> about UA-to-UA-with-nothing-but-stupid-cable in between :)
> 
> >>>If we have to have forking, and we have to have media 
> before there's 
> >>>a final answer, then I think something like this is needed 
> to make it 
> >>>work.
> >>
> >>Again, it could make the signaling flows a little more 
> nicer, and it 
> >>would move some decissions from the UAC to the forking gateway, but 
> >>the problem with multiple media streams (no matter whether you call 
> >>them early or not :) would still exist.
> >
> >Perhaps. However, one of the more profound problems today (as with 
> >mobile nets) is limited bandwidth to the UA. Dealing with mixing, 
> >recoding, and selection-from-alternatives in a "server" is 
> much easier.
> 
> Yes, but saying that is not politically correct, is it? :)
> 
> >>In my opinion, the only solution, using what we have today, 
> is to make sure there is only one early >>media stream sent.
> >
> >Yep. That's quite true. It's also very difficult, if 
> anything forks.  
> >Our greatest power is our greatest problem.
> 
> Eventhough it doesn't solve the problem, I think many things 
> would work much better if people implemented and used RFC 
> 3841 (and RFC 3840). It e.g. allows you to indicate that you 
> don't wish parallel forking to occur.
> 
> Regards,
> 
> Christer
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use 
> sip-implementors@cs.columbia.edu for questions on current sip 
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 25 14:27:26 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 798333A6833;
	Mon, 25 Aug 2008 14:27:26 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 352083A6833
	for <sip@core3.amsl.com>; Mon, 25 Aug 2008 14:27:25 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.247
X-Spam-Level: 
X-Spam-Status: No, score=-4.247 tagged_above=-999 required=5
	tests=[AWL=-0.248, BAYES_50=0.001, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EFQjXAR4EaKy for <sip@core3.amsl.com>;
	Mon, 25 Aug 2008 14:27:24 -0700 (PDT)
Received: from sj-iport-6.cisco.com (sj-iport-6.cisco.com [171.71.176.117])
	by core3.amsl.com (Postfix) with ESMTP id F286F3A677D
	for <sip@ietf.org>; Mon, 25 Aug 2008 14:27:23 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,266,1217808000"; d="scan'208";a="146190963"
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 25 Aug 2008 21:26:47 +0000
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7PLQlxL023112
	for <sip@ietf.org>; Mon, 25 Aug 2008 14:26:47 -0700
Received: from dwingwxp01 (dhcp-128-107-163-117.cisco.com [128.107.163.117])
	by sj-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7PLQlFG008573
	for <sip@ietf.org>; Mon, 25 Aug 2008 21:26:47 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'SIP IETF'" <sip@ietf.org>
Date: Mon, 25 Aug 2008 14:26:47 -0700
Message-ID: <07ee01c906f9$47de63b0$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AckG+Ue8qxmwLQokRgKO0uSfc0aF1g==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=393; t=1219699607; x=1220563607;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20Perspectives=20for=20E.164=20ownership |Sender:=20;
	bh=f9uKWAGgtQjuSBidipyl/kjpt1afnKicICmdKbJpMkc=;
	b=hrrwpIxZZMJwtAjoSCBOARZfbyXmztTCRGxk3NzTQWwCmEtUeGj6DHCbST
	FOpK+qxbrmhgAj/Z0bvtaxaZGIEwNzplbtAYve0pWIVhI4m9b9hLmguNA/fY
	o9DPCHt/rZ;
Authentication-Results: sj-dkim-2; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim2002 verified; ); 
Subject: [Sip] Perspectives for E.164 ownership
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

It seems that asking the question "Who do you think owns +1.408.555.1234" of a
bunch of network elements could be an interesting way to approach SIP's "Who
owns a certain E.164" problem.

  "Improving SSH-style Host Authentication with Multi-path Network Probing"
  http://www.cs.cmu.edu/~perspectives/
  http://www.cs.cmu.edu/~perspectives/perspectives_usenix08.pdf  

Thoughts?
-d

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 25 14:41:35 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BA0AE28C0F3;
	Mon, 25 Aug 2008 14:41:35 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1172D28C0ED
	for <sip@core3.amsl.com>; Mon, 25 Aug 2008 14:41:35 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id s8nvp-BexyK3 for <sip@core3.amsl.com>;
	Mon, 25 Aug 2008 14:41:34 -0700 (PDT)
Received: from sj-iport-3.cisco.com (sj-iport-3.cisco.com [171.71.176.72])
	by core3.amsl.com (Postfix) with ESMTP id BC55C28C0F3
	for <sip@ietf.org>; Mon, 25 Aug 2008 14:41:33 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,266,1217808000"; d="scan'208";a="97101746"
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-3.cisco.com with ESMTP; 25 Aug 2008 21:40:56 +0000
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m7PLeuoF020725
	for <sip@ietf.org>; Mon, 25 Aug 2008 14:40:56 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7PLesZK019793
	for <sip@ietf.org>; Mon, 25 Aug 2008 21:40:56 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 17:40:56 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 17:40:56 -0400
Message-ID: <48B32724.5090001@cisco.com>
Date: Mon, 25 Aug 2008 17:41:56 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Dan Wing <dwing@cisco.com>
References: <07ee01c906f9$47de63b0$c2f0200a@cisco.com>
In-Reply-To: <07ee01c906f9$47de63b0$c2f0200a@cisco.com>
X-OriginalArrivalTime: 25 Aug 2008 21:40:56.0345 (UTC)
	FILETIME=[41928890:01C906FB]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1154; t=1219700456;
	x=1220564456; c=relaxed/simple; s=sjdkim1004;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Perspectives=20for=20E.164=20ow
	nership |Sender:=20;
	bh=bECEDS8hUhLGRdQzvn2opiItmSaA/umfJBdq99+S9Aw=;
	b=t0ThBXhyJdHgBGRHdIR4d2+eFHWx3LKrkTYp05aklaJ/+Bo6BxXDYiWb7X
	N+R1+n/2BWG1oQirlqtQb2E3hH8efOaBwxU6BIZt5Qg5QcpfJI7dqr2D8IwI
	0cfNjn5e+D5lGZUvFn/JNGItD4aMnMXcdWO16B83pSOZgptTr0L+g=;
Authentication-Results: sj-dkim-1; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1004 verified; ); 
Cc: 'SIP IETF' <sip@ietf.org>
Subject: Re: [Sip] Perspectives for E.164 ownership
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org



Dan Wing wrote:
> It seems that asking the question "Who do you think owns +1.408.555.1234" of a
> bunch of network elements could be an interesting way to approach SIP's "Who
> owns a certain E.164" problem.
> 
>   "Improving SSH-style Host Authentication with Multi-path Network Probing"
>   http://www.cs.cmu.edu/~perspectives/
>   http://www.cs.cmu.edu/~perspectives/perspectives_usenix08.pdf  
> 
> Thoughts?

Hmm... seems like there is a bootstrapping problem.
At the moment, there must be in excess of a billion E.164 numbers in 
use. But most network elements have no clue who owns any of them.
Most PSTN GWs don't know. I suppose the major SPs are in a position to 
figure it out, but are they willing to say?

I might eventually decide I know for a particular E.164 after having 
received a call from it and decided its the right person. But that's 
leap of faith again. And then its only me that knows, which won't help 
most other callers. And what I "know" will be the domain name that I 
get, which may the be the true one due to SBCs.

So I'm missing some piece of how this could be helpful.

	Thanks,
	Paul
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 25 14:49:58 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6FD2C3A6862;
	Mon, 25 Aug 2008 14:49:58 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id A207D3A6862
	for <sip@core3.amsl.com>; Mon, 25 Aug 2008 14:49:56 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.815
X-Spam-Level: 
X-Spam-Status: No, score=-5.815 tagged_above=-999 required=5 tests=[AWL=0.784, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Vwtjs0giFvta for <sip@core3.amsl.com>;
	Mon, 25 Aug 2008 14:49:54 -0700 (PDT)
Received: from sj-iport-1.cisco.com (sj-iport-1.cisco.com [171.71.176.70])
	by core3.amsl.com (Postfix) with ESMTP id 90C9F3A681C
	for <sip@ietf.org>; Mon, 25 Aug 2008 14:49:54 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,266,1217808000"; d="scan'208";a="69275708"
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-1.cisco.com with ESMTP; 25 Aug 2008 21:49:16 +0000
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-3.cisco.com (8.12.11/8.12.11) with ESMTP id m7PLnGkp023408; 
	Mon, 25 Aug 2008 14:49:16 -0700
Received: from dwingwxp01 (dhcp-128-107-163-117.cisco.com [128.107.163.117])
	by sj-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m7PLnGX9020960;
	Mon, 25 Aug 2008 21:49:16 GMT
From: "Dan Wing" <dwing@cisco.com>
To: "'Paul Kyzivat'" <pkyzivat@cisco.com>
References: <07ee01c906f9$47de63b0$c2f0200a@cisco.com>
	<48B32724.5090001@cisco.com>
Date: Mon, 25 Aug 2008 14:49:16 -0700
Message-ID: <07fd01c906fc$6be0f540$c2f0200a@cisco.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AckG+0H2SyEBfFBQRbOFYvXY+q3RcQAARepg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <48B32724.5090001@cisco.com>
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=1655; t=1219700956;
	x=1220564956; c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=dwing@cisco.com;
	z=From:=20=22Dan=20Wing=22=20<dwing@cisco.com>
	|Subject:=20RE=3A=20[Sip]=20Perspectives=20for=20E.164=20ow
	nership |Sender:=20;
	bh=FUms9h5A74r69SJr/TWCMmcRHnZVVG0kZu6JAytRKTk=;
	b=Jgbw7abCNhtuRweeMvHKKi5Z+d4BjAc1h5VfsBU18ozjzMoTSaviLJoXCi
	DH9oB/+X8Pko1LTvPiwRm/bNSpdD9M6Rn86WDIiKQdtxghPSQOA4Nr8AwT8X
	x4eMNAmVKn;
Authentication-Results: sj-dkim-3; header.From=dwing@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim3002 verified; ); 
Cc: 'SIP IETF' <sip@ietf.org>
Subject: Re: [Sip] Perspectives for E.164 ownership
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 

> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> Sent: Monday, August 25, 2008 2:42 PM
> To: Dan Wing
> Cc: 'SIP IETF'
> Subject: Re: [Sip] Perspectives for E.164 ownership
> 
> 
> 
> Dan Wing wrote:
> > It seems that asking the question "Who do you think owns 
> +1.408.555.1234" of a
> > bunch of network elements could be an interesting way to 
> approach SIP's "Who
> > owns a certain E.164" problem.
> > 
> >   "Improving SSH-style Host Authentication with Multi-path 
> Network Probing"
> >   http://www.cs.cmu.edu/~perspectives/
> >   http://www.cs.cmu.edu/~perspectives/perspectives_usenix08.pdf  
> > 
> > Thoughts?
> 
> Hmm... seems like there is a bootstrapping problem.
> At the moment, there must be in excess of a billion E.164 numbers in 
> use.

We don't care about those.  We only care about the ones that have
SIP endpoints and which we can establish strong cryptographic
identity -- not the ones connectable via a PSTN gateway.

-d


> But most network elements have no clue who owns any of them.
> Most PSTN GWs don't know. I suppose the major SPs are in a 
> position to 
> figure it out, but are they willing to say?
> 
> I might eventually decide I know for a particular E.164 after having 
> received a call from it and decided its the right person. But that's 
> leap of faith again. And then its only me that knows, which 
> won't help 
> most other callers. And what I "know" will be the domain name that I 
> get, which may the be the true one due to SBCs.
> 
> So I'm missing some piece of how this could be helpful.
> 
> 	Thanks,
> 	Paul

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 25 15:02:06 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AD3713A6877;
	Mon, 25 Aug 2008 15:02:06 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D66763A6877
	for <sip@core3.amsl.com>; Mon, 25 Aug 2008 15:02:05 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.372
X-Spam-Level: 
X-Spam-Status: No, score=-5.372 tagged_above=-999 required=5
	tests=[AWL=-1.228, BAYES_00=-2.599, FRT_ADOBE2=2.455,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id akKpglZnk9QH for <sip@core3.amsl.com>;
	Mon, 25 Aug 2008 15:02:04 -0700 (PDT)
Received: from exprod6og112.obsmtp.com (exprod6og112.obsmtp.com [64.18.1.29])
	by core3.amsl.com (Postfix) with ESMTP id 4B8EB3A6765
	for <sip@ietf.org>; Mon, 25 Aug 2008 15:01:59 -0700 (PDT)
Received: from source ([192.150.11.134]) by exprod6ob112.postini.com
	([64.18.5.12]) with SMTP; Mon, 25 Aug 2008 15:01:29 PDT
Received: from inner-relay-1.corp.adobe.com ([153.32.1.51])
	by outbound-smtp-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7PLvbG3025106; Mon, 25 Aug 2008 14:57:37 -0700 (PDT)
Received: from fe2.corp.adobe.com (fe2.corp.adobe.com [10.8.192.72])
	by inner-relay-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7PM1Oiq013259; Mon, 25 Aug 2008 15:01:24 -0700 (PDT)
Received: from namail5.corp.adobe.com ([10.8.192.88]) by fe2.corp.adobe.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 15:01:24 -0700
Received: from 10.58.20.192 ([10.58.20.192]) by namail5.corp.adobe.com
	([10.8.192.88]) with Microsoft Exchange Server HTTP-DAV ; 
	Mon, 25 Aug 2008 22:01:22 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Mon, 25 Aug 2008 15:04:56 -0700
From: Henry Sinnreich <hsinnrei@adobe.com>
To: Paul Kyzivat <pkyzivat@cisco.com>
Message-ID: <C4D87A98.7E29%hsinnrei@adobe.com>
Thread-Topic: [Sip] Fixing SIP with OS reference implementations for UA and
	server
Thread-Index: AckG/pusrsQuHvDSgE2cGoSKHO0/Sw==
In-Reply-To: <48B21988.1090500@cisco.com>
Mime-version: 1.0
X-OriginalArrivalTime: 25 Aug 2008 22:01:24.0573 (UTC)
	FILETIME=[1DA740D0:01C906FE]
Cc: SIP IETF <sip@ietf.org>, Cullen Jennings <fluffy@cisco.com>,
	Dean Willis <dean.willis@softarmor.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and
 server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Paul,

I really love your way of arguing, but feel it's too apologetic of the
present way of doing business as usual, since SIP has become an ecosystem in
its own right and has spawned a global VoIP industry. This implies far
greater sense of responsibility that can only be met by using the most
successful examples of software development in academia and R&D:

The same person(s) to write both the code and papers in parallel and publish
them along with ample test results. It's much of a looped process. There are
plenty of such sites, for example in the open source community. There are
bug fixes, lists of know issues, etc. We all know them and have the
responsibility to apply such engineering _discipline_ here as well.

* When seeing over 100 standards, how is one going to know SIP in adequate
depth?
* What is the cost of this complexity?
* When proposing an extension what are the unintended consequences?
* When seeing dissent among the leading SIP experts, where to go for
guidance, except in some test environment?

That explains my insistence on running code and testing as part and parcel
of further SIP development, and also for fixing the problems currently
discussed here - but not mainly by discussions :-)

The endless flow of I-Ds without running code and test results has to stop
somewhere IMO, but I don't want to belabor it since we probably disagree.

Thanks again for your thoughtful comments.
My two cents,

Henry


On 8/24/08 9:31 PM, "Paul Kyzivat" <pkyzivat@cisco.com> wrote:

> Henry,
> =

> Its interesting that you have drawn parallels here with physics.
> In physics there are theorists and experimentalists. I think most of
> them agree that progress in physics requires both - the experimentalists
> require a theory to verify, and the theorists need observed violations
> of the theory and data that is unexplained by existing theories.
> =

> I agree that experimentalists are useful in our business too. I in
> general agree with your implied assertion that we (the IETF sip-related
> WGs) are theorists.
> =

> Its not entirely clear to me whether we need *more* experimentalists
> than we already have, or if they could or should be more closely
> affiliated with the IETF than they already are. We do already have SIP
> Forum, running SIPit. We hear the results of that. And clearly there are
> plenty of participants here that speak for implementations.
> =

> Based on what you have said before, I gather you think there is too much
> standardization done in relation to the amount of implementation done.
> There certainly are cases when that is true. But remember that most of
> the documents we are producing are only drafts - they aren't even
> complete theories ready to be tested. Even the RFCs we produce are only
> Proposed Standards, and so are probably good candidates for testing.
> =

> If one person, or a very few working closely together, are doing all the
> design and implementation of something, then you *might* be able to get
> by just implementing without first specifying what is being implemented.
> Some of the agile methods advocate that kind of approach.  If what you
> are attempting has too many moving parts for that, then its still
> necessary to write a spec. Doing an open source implementation doesn't
> change that. It may just change which group does the specification. In a
> way this is like having the experimental physicists develop the theories.
> =

> Bottom line - IMO it would be good to get more early implementation
> experience than we seem to get now. An open reference implementation is
> one way to get that. But I don't think we should make some sort of rule
> that you can't submit a draft without a reference implementation, or
> even that you can't have an RFC without a reference implementation.
> (There is already a requirement for multiple implementations before a
> *Draft* standard.)
> =

> Thanks,
> Paul
> =

> Henry Sinnreich wrote:
>> Christer,
>> =

>> I agree with both you and Dean and should have also specified that the S=
IP
>> standard should be amended step by step, based on testing the reference
>> implementation. There is nothing wrong with an I-D with fixes for SIP ba=
sed
>> on testing a reference implementation.
>> =

>> Sorry for not having been clear also on the need to fix the standard
>> document by adding an amendment RFC.
>> =

>> Henry =

>> =

>> =

>> On 8/24/08 3:19 PM, "Christer Holmberg" <christer.holmberg@ericsson.com>
>> wrote:
>> =

>>> Hi Henry,
>>> =

>>> Based on what criteria would you choose the reference implementation(s)=
, and
>>> what is it that you really want to test? Offer/answer?
>>> =

>>> Because, eventhough there seems to be problems implementing offer/answer
>>> correctly, the early media/forking problem, raised by Dean, is more of =
a "bi
>>> product" of the way we designed the protocol. In other words, even if y=
ou
>>> have
>>> an implementation which works 100% according to the specs, it doesn't s=
olve
>>> the problem which may come up when you, due to forking, receive early m=
edia
>>> from multiple locations :)
>>> =

>>> Regards,
>>> =

>>> Christer
>>> =

>>> =

>>> -----Alkuper=E4inen viesti-----
>>> L=E4hett=E4j=E4: Henry Sinnreich [mailto:hsinnrei@adobe.com]
>>> L=E4hetetty: su 24.8.2008 22:01
>>> Vastaanottaja: Dean Willis; Christer Holmberg
>>> Kopio: SIP IETF; Cullen Jennings
>>> Aihe: Fixing SIP with OS reference implementations for UA and server
>>>  =

>>> (changed the subject line)
>>> I have followed this discussion and am convinced that (though I started=
 it)
>>> the issues raised here and in countless other SIPPING/SIP related
>>> discussions cannot be solved by apparent logic, no matter how long and =
how
>>> thorough. Just like the physics cannot be proven by discussions but onl=
y by
>>> experiment. This is the whole difference between engineering/science and
>>> beliefs/opinions.
>>> =

>>> The only way IMO to fix the SIPPING/SIP issues discussed here is to hav=
e an
>>> open reference implementation running in a test bed (such as one provid=
ed
>>> maybe by the SIP Forum) and cooperate in LUNIX-style with testing (why =
not
>>> in SIPit events as well) and fixing the code. Any fruitful discussions =
must
>>> be part of fixing running code based on test results. This is actually
>>> pretty plain, so forgive my rant...
>>> =

>>> Selecting a reference SIP implementation:
>>> There are quite a few SIP UA and and SIP server OS code sites available=
 and
>>> the next step could be selecting the best candidate(s).
>>> If asked, I would be only to happy to recommend some candidates.
>>> =

>>> Continuing such discussions without a reference implementation is fruit=
less
>>> and the SIP issues discussed here will not get fixed so as to meet the
>>> requirements for a good standard. This applies to all SIP related WGs.
>>> =

>>> Any comments?
>>> =

>>> Thanks, Henry
>>> =

>>> =

>>> On 8/24/08 2:30 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
>>> =

>>>> On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:
>>>> =

>>>>> The "media before answer" (if you refer to SDP answer) can be solve
>>>>> by simply saying that one must send an SDP answer must be sent
>>>>> before media is sent.
>>>>> =

>>>>> The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
>>>>> doesn't work, because today media sent before SDP answer will often
>>>>> be discarded anyway.
>>>>> =

>>>> Perhaps not, but it's how ever device and service  I currently have
>>>> works.
>>>> =

>>>> Not that they work well, mind you.
>>>> =

>>>>>> It also makes ICE and SRTP much easier to deal with. By
>>>>>> making the transition to "regular" session a re-invite  the gateway
>>>>>> can transition from send-only to send-receive (if needed), the
>>>>>> billing
>>>>>> system (if it cares) can start the meter running, etc.
>>>>> So, just to clarify, you are still talking about a single SIP
>>>>> session, right?
>>>> That's one of the two possible approaches, and probably the easiest to
>>>> explain.
>>>> =

>>>> =

>>>>> The issue with that solution is of course that a forking proxy, as
>>>>> currently defined, would terminate all other legs once the first 200
>>>>> OK (establishing the early media path of the session) arrives.
>>>> One could of course change that behavior and have the forking proxy
>>>> return ALL responses.
>>>> =

>>>> =

>>>>> =

>>>>> But, that would minimize multiple early media streams, which again
>>>>> in my opinion shows that the main problem is not offer/answer, but
>>>>> forking :)
>>>> The two certainly play poorly with each other.
>>>> =

>>>>> =

>>>>>> Plus we can drop all the 100-rel and preconditions cruft out of the
>>>>>> state machine completely, making life MUCH better for the coder.
>>>>> If you separate the offer/answer state machine from the SIP
>>>>> transaction state machine it shouldn't really matter in what SIP
>>>>> messages the offers and answers are carried.
>>>> Perhaps true, but the SIP 100-rel state machine is profoundly ugly all
>>>> by itself.
>>>> =

>>>>> =

>>>>> And, eventhough we probably would be able to remove SDP from
>>>>> provisional responses, I think provisional responses would still be
>>>>> useful for other things (indicating ringing etc).
>>>> Yes, and provisionals also impact the resend timers. We need them. We
>>>> just don't need 100-rel.
>>>> =

>>>>> =

>>>>> But, of course we could have instead have used something like UPDATE
>>>>> (or even INFO) to indicate "ringing" etc, instead of provisional
>>>>> responses.
>>>>> =

>>>>>> Think of it this way -- If I'm calling a PSTN gateway, do I really
>>>>>> want to wait until the PSTN side connection completes before I do the
>>>>>> setup work for SRTP? I think I'd rather get that out of the way
>>>>>> before
>>>>>> the called party answers, or before I even see early media coming
>>>>>> back
>>>>>> unprotected.
>>>>> What prevents you from doing the SRTP negotiation using reliable
>>>>> provisional responses, in the same way you are able to perform
>>>>> preconditions before the called party answers?
>>>> In my case, mostly the desire to avoid reliable provisional responses.
>>>> =

>>>> And when you cross-factor reliable provisional, SRTP, and forking, you
>>>> get a real mess.
>>>> =

>>>>> =

>>>>>> Now, lets think about forking. When we fork in a proxy, the UAC can
>>>>>> only deal with one "best answer", and early media is anybody's guess
>>>>>> as to how it might work or what might happen (it pretty much turns to
>>>>>> soup, especially if you get multiple early media channels).
>>>>> Correct. And, that will be a problem as long as it is possible for
>>>>> the UAC to receive multiple early streams - no matter how they are
>>>>> negotiated.
>>>>> =

>>>>>> Consider instead that a forking node is really a "forking gateway",
>>>>>> not a proxy. It takes one call in, establishes a fully-negotiated
>>>>>> "early session",  then sends out its multiple INVITES.  As those
>>>>>> sessions (which might have early media) connect up, the forking
>>>>>> gateway deals with the multiple media streams (by bridging,
>>>>>> discarding, whatever).
>>>>> Doesn't that simply move the how-to-choose-which-early-media-stream-
>>>>> to-listen-to from the UAC to the forking proxy/gateway?
>>>> It allows the forking gateway to either mix all the streams into one
>>>> (a boon to the bandwidth-restricted UAC), or more intelligently choose
>>>> which one to relay based on media-analysis. For example, ringing can
>>>> easily be differentiated from speech, so if a forking-b2bua sees four
>>>> legs of ringing and one of speech, it could quite reasonably choose
>>>> the speech channel to send back to the UAC.
>>>> =

>>>>> =

>>>>>> When a forked session matures to a "regular session", the forking
>>>>>> gateway can re-invite the UAC to >make that session a "regular
>>>>>> session",
>>>>> Today it does that again by sending 200 OK.
>>>> Right -- assuming you did your media setup in provisional (and keying
>>>> in reliable provisional, which is messy)
>>>> =

>>>>> Again, I agree that many things probably could be done in a
>>>>> "cleaner" way, but I think the main problem still exists: if there
>>>>> are multiple early media streams (due to forking proxy or forking
>>>>> gateway), how do I choose which one to play?
>>>>> =

>>>> I'm not aware of a perfect asnwer, but (as above) can say there are
>>>> definitely several "better" answers than what we have now.
>>>> =

>>>> =

>>>>>> or can even arrange to drop itself out of the media path if needed.
>>>>> How would that work? It would be able to change the local contact
>>>>> from itself to the called party, but it would not be able to add the
>>>>> possible Record-Routes between itself and the called user.
>>>> Media path, not signaling. Fall back to 3PCC setup techniques on a
>>>> reinvite sequence.
>>>> =

>>>>> Not being able to modify the signaling path during a session (read:
>>>>> update the Record-Route) is a "bug" in the protocol, I think, but
>>>>> it's a separate issue :)
>>>>> =

>>>> yeah, re-invite should be abele to re-route.
>>>> =

>>>> =

>>>>>> If we have to have forking, and we have to have media before
>>>>>> there's a
>>>>>> final answer, then I think something like this is needed to make it
>>>>>> work.
>>>>> Again, it could make the signaling flows a little more nicer, and it
>>>>> would move some decissions from the UAC to the forking gateway, but
>>>>> the problem with multiple media streams (no matter whether you call
>>>>> them early or not :) would still exist.
>>>> Perhaps. However, one of the more profound problems today (as with
>>>> mobile nets) is limited bandwidth to the UA. Dealing with mixing,
>>>> recoding, and selection-from-alternatives in a "server" is much easier.
>>>> =

>>>>> In my opinion, the only solution, using what we have today, is to
>>>>> make sure there is only one early media stream sent.
>>>> Yep. That's quite true. It's also very difficult, if anything forks.
>>>> Our greatest power is our greatest problem.
>>>> =

>>>> --
>>>> Dean
>>>> =

>>>> =

>>>> _______________________________________________
>>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>>> This list is for NEW development of the core SIP Protocol
>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>> Use sipping@ietf.org for new developments on the application of sip
>>> =

>> =

>> _______________________________________________
>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>> =


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 25 15:44:59 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4D47A3A69D5;
	Mon, 25 Aug 2008 15:44:59 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 434943A69D5
	for <sip@core3.amsl.com>; Mon, 25 Aug 2008 15:44:58 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.372
X-Spam-Level: 
X-Spam-Status: No, score=-5.372 tagged_above=-999 required=5
	tests=[AWL=-1.228, BAYES_00=-2.599, FRT_ADOBE2=2.455,
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cyFzxD2rNo3f for <sip@core3.amsl.com>;
	Mon, 25 Aug 2008 15:44:56 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id E9BE43A681C
	for <sip@ietf.org>; Mon, 25 Aug 2008 15:44:55 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,266,1217808000"; d="scan'208";a="18659859"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 25 Aug 2008 22:44:10 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7PMiAbH000766; 
	Mon, 25 Aug 2008 18:44:10 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m7PMiAiO016723;
	Mon, 25 Aug 2008 22:44:10 GMT
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 18:44:10 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 18:44:09 -0400
Message-ID: <48B335F5.2060401@cisco.com>
Date: Mon, 25 Aug 2008 18:45:09 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Henry Sinnreich <hsinnrei@adobe.com>
References: <C4D87A98.7E29%hsinnrei@adobe.com>
In-Reply-To: <C4D87A98.7E29%hsinnrei@adobe.com>
X-OriginalArrivalTime: 25 Aug 2008 22:44:09.0752 (UTC)
	FILETIME=[169E8180:01C90704]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=17651; t=1219704250;
	x=1220568250; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20Fixing=20SIP=20with=20OS=20refe
	rence=20implementations=20for=20UA=20and=0A=20server
	|Sender:=20 |To:=20Henry=20Sinnreich=20<hsinnrei@adobe.com>;
	bh=DZs66bGu43A1zE+s58e5ul/i3X5R06IBTl4B1+D9aOg=;
	b=pKKulPcsI0H0IN2vpQwC4ls0/++d4yCf/PEn6DbugIAM4D37KY/eHeAoEz
	4auLsFkamNi3AuwudnC28slUwJxDdZDfqCxbhxS+MrAT1VKec61GkqKetPba
	qLaYGAR8kk;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <sip@ietf.org>, Cullen Jennings <fluffy@cisco.com>,
	Dean Willis <dean.willis@softarmor.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and
 server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Henry,

I've been thinking about this a bit recently. (But not too much or too =

deeply.)

In the open source world, in some sense there is only one =

implementation. If that is the implementation of a distributed =

application, then the protocol connecting the pieces is embedded in the =

implementation, rather than being an external interface. (Though I guess =

it *could* be an external interface if it was sufficiently documented, =

but that would tie down the evolution of the application.)

If you would like to enable *multiple* implementations of different =

components of that application, e.g. using different languages or for =

different OSs, then for them to able to remain consistent with the rest =

I guess they must be merged into the same open source initiative. That =

is one way to do things, but not everybody wants to work that way.

In a sense, the IETF is also an open source initiative. But what is =

being developed is interface specs rather than running code. The =

assumption being that those interfaces are the stable part, while the =

implementations are many, varied, and changing over time.

If the goal is to have everybody working on and using a single =

implementation then an open source approach is probably better and =

quicker. If the goal is to facilitate a multiplicity of interoperable =

implementations, then the IETF process may be better.

In any case I still think there is a valid distinction between theory =

and experiment. Do you want a crypto implementation that hasn't had its =

algorithm designed by a crypto theorist? Do you want a communication =

protocol that has been implemented for the common cases but hasn't had =

all the subtle cases considered? (There is a reason we make fun of =

implementors that implement to the use cases rather than the spec. Its =

even worse if all you have is the use cases and the code - no spec.) It =

is much easier to examine those kinds of issues with a high level spec =

than a piece of executable code.

There is no doubt a place for all these techniques. The process of =

writing the spec first is slow - no doubt about it. Its not appropriate =

for everything - only for critical stuff that is going to be implemented =

lots of times. Just doing an open source project without a separate spec =

may be more practical for more narrowly focused goals. And of course you =

can always have an open source project to implement a spec that is =

developed alongside that project.

	Thanks,
	Paul

Henry Sinnreich wrote:
> Paul,
> =

> I really love your way of arguing, but feel it's too apologetic of the
> present way of doing business as usual, since SIP has become an ecosystem=
 in
> its own right and has spawned a global VoIP industry. This implies far
> greater sense of responsibility that can only be met by using the most
> successful examples of software development in academia and R&D:
> =

> The same person(s) to write both the code and papers in parallel and publ=
ish
> them along with ample test results. It's much of a looped process. There =
are
> plenty of such sites, for example in the open source community. There are
> bug fixes, lists of know issues, etc. We all know them and have the
> responsibility to apply such engineering _discipline_ here as well.
> =

> * When seeing over 100 standards, how is one going to know SIP in adequate
> depth?
> * What is the cost of this complexity?
> * When proposing an extension what are the unintended consequences?
> * When seeing dissent among the leading SIP experts, where to go for
> guidance, except in some test environment?
> =

> That explains my insistence on running code and testing as part and parcel
> of further SIP development, and also for fixing the problems currently
> discussed here - but not mainly by discussions :-)
> =

> The endless flow of I-Ds without running code and test results has to stop
> somewhere IMO, but I don't want to belabor it since we probably disagree.
> =

> Thanks again for your thoughtful comments.
> My two cents,
> =

> Henry
> =

> =

> On 8/24/08 9:31 PM, "Paul Kyzivat" <pkyzivat@cisco.com> wrote:
> =

>> Henry,
>>
>> Its interesting that you have drawn parallels here with physics.
>> In physics there are theorists and experimentalists. I think most of
>> them agree that progress in physics requires both - the experimentalists
>> require a theory to verify, and the theorists need observed violations
>> of the theory and data that is unexplained by existing theories.
>>
>> I agree that experimentalists are useful in our business too. I in
>> general agree with your implied assertion that we (the IETF sip-related
>> WGs) are theorists.
>>
>> Its not entirely clear to me whether we need *more* experimentalists
>> than we already have, or if they could or should be more closely
>> affiliated with the IETF than they already are. We do already have SIP
>> Forum, running SIPit. We hear the results of that. And clearly there are
>> plenty of participants here that speak for implementations.
>>
>> Based on what you have said before, I gather you think there is too much
>> standardization done in relation to the amount of implementation done.
>> There certainly are cases when that is true. But remember that most of
>> the documents we are producing are only drafts - they aren't even
>> complete theories ready to be tested. Even the RFCs we produce are only
>> Proposed Standards, and so are probably good candidates for testing.
>>
>> If one person, or a very few working closely together, are doing all the
>> design and implementation of something, then you *might* be able to get
>> by just implementing without first specifying what is being implemented.
>> Some of the agile methods advocate that kind of approach.  If what you
>> are attempting has too many moving parts for that, then its still
>> necessary to write a spec. Doing an open source implementation doesn't
>> change that. It may just change which group does the specification. In a
>> way this is like having the experimental physicists develop the theories.
>>
>> Bottom line - IMO it would be good to get more early implementation
>> experience than we seem to get now. An open reference implementation is
>> one way to get that. But I don't think we should make some sort of rule
>> that you can't submit a draft without a reference implementation, or
>> even that you can't have an RFC without a reference implementation.
>> (There is already a requirement for multiple implementations before a
>> *Draft* standard.)
>>
>> Thanks,
>> Paul
>>
>> Henry Sinnreich wrote:
>>> Christer,
>>>
>>> I agree with both you and Dean and should have also specified that the =
SIP
>>> standard should be amended step by step, based on testing the reference
>>> implementation. There is nothing wrong with an I-D with fixes for SIP b=
ased
>>> on testing a reference implementation.
>>>
>>> Sorry for not having been clear also on the need to fix the standard
>>> document by adding an amendment RFC.
>>>
>>> Henry =

>>>
>>>
>>> On 8/24/08 3:19 PM, "Christer Holmberg" <christer.holmberg@ericsson.com>
>>> wrote:
>>>
>>>> Hi Henry,
>>>>
>>>> Based on what criteria would you choose the reference implementation(s=
), and
>>>> what is it that you really want to test? Offer/answer?
>>>>
>>>> Because, eventhough there seems to be problems implementing offer/answ=
er
>>>> correctly, the early media/forking problem, raised by Dean, is more of=
 a "bi
>>>> product" of the way we designed the protocol. In other words, even if =
you
>>>> have
>>>> an implementation which works 100% according to the specs, it doesn't =
solve
>>>> the problem which may come up when you, due to forking, receive early =
media
>>>> from multiple locations :)
>>>>
>>>> Regards,
>>>>
>>>> Christer
>>>>
>>>>
>>>> -----Alkuper=E4inen viesti-----
>>>> L=E4hett=E4j=E4: Henry Sinnreich [mailto:hsinnrei@adobe.com]
>>>> L=E4hetetty: su 24.8.2008 22:01
>>>> Vastaanottaja: Dean Willis; Christer Holmberg
>>>> Kopio: SIP IETF; Cullen Jennings
>>>> Aihe: Fixing SIP with OS reference implementations for UA and server
>>>>  =

>>>> (changed the subject line)
>>>> I have followed this discussion and am convinced that (though I starte=
d it)
>>>> the issues raised here and in countless other SIPPING/SIP related
>>>> discussions cannot be solved by apparent logic, no matter how long and=
 how
>>>> thorough. Just like the physics cannot be proven by discussions but on=
ly by
>>>> experiment. This is the whole difference between engineering/science a=
nd
>>>> beliefs/opinions.
>>>>
>>>> The only way IMO to fix the SIPPING/SIP issues discussed here is to ha=
ve an
>>>> open reference implementation running in a test bed (such as one provi=
ded
>>>> maybe by the SIP Forum) and cooperate in LUNIX-style with testing (why=
 not
>>>> in SIPit events as well) and fixing the code. Any fruitful discussions=
 must
>>>> be part of fixing running code based on test results. This is actually
>>>> pretty plain, so forgive my rant...
>>>>
>>>> Selecting a reference SIP implementation:
>>>> There are quite a few SIP UA and and SIP server OS code sites availabl=
e and
>>>> the next step could be selecting the best candidate(s).
>>>> If asked, I would be only to happy to recommend some candidates.
>>>>
>>>> Continuing such discussions without a reference implementation is frui=
tless
>>>> and the SIP issues discussed here will not get fixed so as to meet the
>>>> requirements for a good standard. This applies to all SIP related WGs.
>>>>
>>>> Any comments?
>>>>
>>>> Thanks, Henry
>>>>
>>>>
>>>> On 8/24/08 2:30 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
>>>>
>>>>> On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:
>>>>>
>>>>>> The "media before answer" (if you refer to SDP answer) can be solve
>>>>>> by simply saying that one must send an SDP answer must be sent
>>>>>> before media is sent.
>>>>>>
>>>>>> The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
>>>>>> doesn't work, because today media sent before SDP answer will often
>>>>>> be discarded anyway.
>>>>>>
>>>>> Perhaps not, but it's how ever device and service  I currently have
>>>>> works.
>>>>>
>>>>> Not that they work well, mind you.
>>>>>
>>>>>>> It also makes ICE and SRTP much easier to deal with. By
>>>>>>> making the transition to "regular" session a re-invite  the gateway
>>>>>>> can transition from send-only to send-receive (if needed), the
>>>>>>> billing
>>>>>>> system (if it cares) can start the meter running, etc.
>>>>>> So, just to clarify, you are still talking about a single SIP
>>>>>> session, right?
>>>>> That's one of the two possible approaches, and probably the easiest to
>>>>> explain.
>>>>>
>>>>>
>>>>>> The issue with that solution is of course that a forking proxy, as
>>>>>> currently defined, would terminate all other legs once the first 200
>>>>>> OK (establishing the early media path of the session) arrives.
>>>>> One could of course change that behavior and have the forking proxy
>>>>> return ALL responses.
>>>>>
>>>>>
>>>>>> But, that would minimize multiple early media streams, which again
>>>>>> in my opinion shows that the main problem is not offer/answer, but
>>>>>> forking :)
>>>>> The two certainly play poorly with each other.
>>>>>
>>>>>>> Plus we can drop all the 100-rel and preconditions cruft out of the
>>>>>>> state machine completely, making life MUCH better for the coder.
>>>>>> If you separate the offer/answer state machine from the SIP
>>>>>> transaction state machine it shouldn't really matter in what SIP
>>>>>> messages the offers and answers are carried.
>>>>> Perhaps true, but the SIP 100-rel state machine is profoundly ugly all
>>>>> by itself.
>>>>>
>>>>>> And, eventhough we probably would be able to remove SDP from
>>>>>> provisional responses, I think provisional responses would still be
>>>>>> useful for other things (indicating ringing etc).
>>>>> Yes, and provisionals also impact the resend timers. We need them. We
>>>>> just don't need 100-rel.
>>>>>
>>>>>> But, of course we could have instead have used something like UPDATE
>>>>>> (or even INFO) to indicate "ringing" etc, instead of provisional
>>>>>> responses.
>>>>>>
>>>>>>> Think of it this way -- If I'm calling a PSTN gateway, do I really
>>>>>>> want to wait until the PSTN side connection completes before I do t=
he
>>>>>>> setup work for SRTP? I think I'd rather get that out of the way
>>>>>>> before
>>>>>>> the called party answers, or before I even see early media coming
>>>>>>> back
>>>>>>> unprotected.
>>>>>> What prevents you from doing the SRTP negotiation using reliable
>>>>>> provisional responses, in the same way you are able to perform
>>>>>> preconditions before the called party answers?
>>>>> In my case, mostly the desire to avoid reliable provisional responses.
>>>>>
>>>>> And when you cross-factor reliable provisional, SRTP, and forking, you
>>>>> get a real mess.
>>>>>
>>>>>>> Now, lets think about forking. When we fork in a proxy, the UAC can
>>>>>>> only deal with one "best answer", and early media is anybody's guess
>>>>>>> as to how it might work or what might happen (it pretty much turns =
to
>>>>>>> soup, especially if you get multiple early media channels).
>>>>>> Correct. And, that will be a problem as long as it is possible for
>>>>>> the UAC to receive multiple early streams - no matter how they are
>>>>>> negotiated.
>>>>>>
>>>>>>> Consider instead that a forking node is really a "forking gateway",
>>>>>>> not a proxy. It takes one call in, establishes a fully-negotiated
>>>>>>> "early session",  then sends out its multiple INVITES.  As those
>>>>>>> sessions (which might have early media) connect up, the forking
>>>>>>> gateway deals with the multiple media streams (by bridging,
>>>>>>> discarding, whatever).
>>>>>> Doesn't that simply move the how-to-choose-which-early-media-stream-
>>>>>> to-listen-to from the UAC to the forking proxy/gateway?
>>>>> It allows the forking gateway to either mix all the streams into one
>>>>> (a boon to the bandwidth-restricted UAC), or more intelligently choose
>>>>> which one to relay based on media-analysis. For example, ringing can
>>>>> easily be differentiated from speech, so if a forking-b2bua sees four
>>>>> legs of ringing and one of speech, it could quite reasonably choose
>>>>> the speech channel to send back to the UAC.
>>>>>
>>>>>>> When a forked session matures to a "regular session", the forking
>>>>>>> gateway can re-invite the UAC to >make that session a "regular
>>>>>>> session",
>>>>>> Today it does that again by sending 200 OK.
>>>>> Right -- assuming you did your media setup in provisional (and keying
>>>>> in reliable provisional, which is messy)
>>>>>
>>>>>> Again, I agree that many things probably could be done in a
>>>>>> "cleaner" way, but I think the main problem still exists: if there
>>>>>> are multiple early media streams (due to forking proxy or forking
>>>>>> gateway), how do I choose which one to play?
>>>>>>
>>>>> I'm not aware of a perfect asnwer, but (as above) can say there are
>>>>> definitely several "better" answers than what we have now.
>>>>>
>>>>>
>>>>>>> or can even arrange to drop itself out of the media path if needed.
>>>>>> How would that work? It would be able to change the local contact
>>>>>> from itself to the called party, but it would not be able to add the
>>>>>> possible Record-Routes between itself and the called user.
>>>>> Media path, not signaling. Fall back to 3PCC setup techniques on a
>>>>> reinvite sequence.
>>>>>
>>>>>> Not being able to modify the signaling path during a session (read:
>>>>>> update the Record-Route) is a "bug" in the protocol, I think, but
>>>>>> it's a separate issue :)
>>>>>>
>>>>> yeah, re-invite should be abele to re-route.
>>>>>
>>>>>
>>>>>>> If we have to have forking, and we have to have media before
>>>>>>> there's a
>>>>>>> final answer, then I think something like this is needed to make it
>>>>>>> work.
>>>>>> Again, it could make the signaling flows a little more nicer, and it
>>>>>> would move some decissions from the UAC to the forking gateway, but
>>>>>> the problem with multiple media streams (no matter whether you call
>>>>>> them early or not :) would still exist.
>>>>> Perhaps. However, one of the more profound problems today (as with
>>>>> mobile nets) is limited bandwidth to the UA. Dealing with mixing,
>>>>> recoding, and selection-from-alternatives in a "server" is much easie=
r.
>>>>>
>>>>>> In my opinion, the only solution, using what we have today, is to
>>>>>> make sure there is only one early media stream sent.
>>>>> Yep. That's quite true. It's also very difficult, if anything forks.
>>>>> Our greatest power is our greatest problem.
>>>>>
>>>>> --
>>>>> Dean
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>>>> This list is for NEW development of the core SIP Protocol
>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>> Use sipping@ietf.org for new developments on the application of sip
>>> _______________________________________________
>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
> =

> =

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Mon Aug 25 16:01:13 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 68F963A6A3F;
	Mon, 25 Aug 2008 16:01:13 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E8F343A69E3
	for <sip@core3.amsl.com>; Mon, 25 Aug 2008 16:01:11 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.144
X-Spam-Level: 
X-Spam-Status: No, score=-4.144 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, FRT_ADOBE2=2.455, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Z7xIX-L0u-rM for <sip@core3.amsl.com>;
	Mon, 25 Aug 2008 16:01:10 -0700 (PDT)
Received: from psmtp.com (exprod6ob117.obsmtp.com [64.18.1.38])
	by core3.amsl.com (Postfix) with ESMTP id 18FCC3A6A3F
	for <sip@ietf.org>; Mon, 25 Aug 2008 16:00:19 -0700 (PDT)
Received: from source ([192.150.8.22]) by exprod6ob117.postini.com
	([64.18.5.12]) with SMTP; Mon, 25 Aug 2008 16:00:07 PDT
Received: from inner-relay-3.eur.adobe.com (inner-relay-3b [10.128.4.236])
	by outbound-smtp-2.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7PN02E0023792; Mon, 25 Aug 2008 16:00:03 -0700 (PDT)
Received: from fe1.corp.adobe.com (fe1.corp.adobe.com [10.8.192.70])
	by inner-relay-3.eur.adobe.com (8.12.10/8.12.9) with ESMTP id
	m7PMxsqJ012961; Mon, 25 Aug 2008 15:59:55 -0700 (PDT)
Received: from namail5.corp.adobe.com ([10.8.192.88]) by fe1.corp.adobe.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Aug 2008 15:59:54 -0700
Received: from 10.58.20.192 ([10.58.20.192]) by namail5.corp.adobe.com
	([10.8.192.88]) with Microsoft Exchange Server HTTP-DAV ; 
	Mon, 25 Aug 2008 22:59:53 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Mon, 25 Aug 2008 16:04:22 -0700
From: Henry Sinnreich <hsinnrei@adobe.com>
To: Paul Kyzivat <pkyzivat@cisco.com>
Message-ID: <C4D88886.7E3B%hsinnrei@adobe.com>
Thread-Topic: [Sip] Fixing SIP with OS reference implementations for UA and
	server
Thread-Index: AckHBuksJ3H65g76c0qgVALuWCHncg==
In-Reply-To: <48B335F5.2060401@cisco.com>
Mime-version: 1.0
X-OriginalArrivalTime: 25 Aug 2008 22:59:54.0425 (UTC)
	FILETIME=[49B02A90:01C90706]
Cc: SIP IETF <sip@ietf.org>, Cullen Jennings <fluffy@cisco.com>,
	Dean Willis <dean.willis@softarmor.com>,
	Christer Holmberg <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and
 server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Paul,

We sure agree on the need for the protocol specification, but seem to differ
on how to get there.

Henry


On 8/25/08 3:45 PM, "Paul Kyzivat" <pkyzivat@cisco.com> wrote:

> Henry,
> =

> I've been thinking about this a bit recently. (But not too much or too
> deeply.)
> =

> In the open source world, in some sense there is only one
> implementation. If that is the implementation of a distributed
> application, then the protocol connecting the pieces is embedded in the
> implementation, rather than being an external interface. (Though I guess
> it *could* be an external interface if it was sufficiently documented,
> but that would tie down the evolution of the application.)
> =

> If you would like to enable *multiple* implementations of different
> components of that application, e.g. using different languages or for
> different OSs, then for them to able to remain consistent with the rest
> I guess they must be merged into the same open source initiative. That
> is one way to do things, but not everybody wants to work that way.
> =

> In a sense, the IETF is also an open source initiative. But what is
> being developed is interface specs rather than running code. The
> assumption being that those interfaces are the stable part, while the
> implementations are many, varied, and changing over time.
> =

> If the goal is to have everybody working on and using a single
> implementation then an open source approach is probably better and
> quicker. If the goal is to facilitate a multiplicity of interoperable
> implementations, then the IETF process may be better.
> =

> In any case I still think there is a valid distinction between theory
> and experiment. Do you want a crypto implementation that hasn't had its
> algorithm designed by a crypto theorist? Do you want a communication
> protocol that has been implemented for the common cases but hasn't had
> all the subtle cases considered? (There is a reason we make fun of
> implementors that implement to the use cases rather than the spec. Its
> even worse if all you have is the use cases and the code - no spec.) It
> is much easier to examine those kinds of issues with a high level spec
> than a piece of executable code.
> =

> There is no doubt a place for all these techniques. The process of
> writing the spec first is slow - no doubt about it. Its not appropriate
> for everything - only for critical stuff that is going to be implemented
> lots of times. Just doing an open source project without a separate spec
> may be more practical for more narrowly focused goals. And of course you
> can always have an open source project to implement a spec that is
> developed alongside that project.
> =

> Thanks,
> Paul
> =

> Henry Sinnreich wrote:
>> Paul,
>> =

>> I really love your way of arguing, but feel it's too apologetic of the
>> present way of doing business as usual, since SIP has become an ecosyste=
m in
>> its own right and has spawned a global VoIP industry. This implies far
>> greater sense of responsibility that can only be met by using the most
>> successful examples of software development in academia and R&D:
>> =

>> The same person(s) to write both the code and papers in parallel and pub=
lish
>> them along with ample test results. It's much of a looped process. There=
 are
>> plenty of such sites, for example in the open source community. There are
>> bug fixes, lists of know issues, etc. We all know them and have the
>> responsibility to apply such engineering _discipline_ here as well.
>> =

>> * When seeing over 100 standards, how is one going to know SIP in adequa=
te
>> depth?
>> * What is the cost of this complexity?
>> * When proposing an extension what are the unintended consequences?
>> * When seeing dissent among the leading SIP experts, where to go for
>> guidance, except in some test environment?
>> =

>> That explains my insistence on running code and testing as part and parc=
el
>> of further SIP development, and also for fixing the problems currently
>> discussed here - but not mainly by discussions :-)
>> =

>> The endless flow of I-Ds without running code and test results has to st=
op
>> somewhere IMO, but I don't want to belabor it since we probably disagree.
>> =

>> Thanks again for your thoughtful comments.
>> My two cents,
>> =

>> Henry
>> =

>> =

>> On 8/24/08 9:31 PM, "Paul Kyzivat" <pkyzivat@cisco.com> wrote:
>> =

>>> Henry,
>>> =

>>> Its interesting that you have drawn parallels here with physics.
>>> In physics there are theorists and experimentalists. I think most of
>>> them agree that progress in physics requires both - the experimentalists
>>> require a theory to verify, and the theorists need observed violations
>>> of the theory and data that is unexplained by existing theories.
>>> =

>>> I agree that experimentalists are useful in our business too. I in
>>> general agree with your implied assertion that we (the IETF sip-related
>>> WGs) are theorists.
>>> =

>>> Its not entirely clear to me whether we need *more* experimentalists
>>> than we already have, or if they could or should be more closely
>>> affiliated with the IETF than they already are. We do already have SIP
>>> Forum, running SIPit. We hear the results of that. And clearly there are
>>> plenty of participants here that speak for implementations.
>>> =

>>> Based on what you have said before, I gather you think there is too much
>>> standardization done in relation to the amount of implementation done.
>>> There certainly are cases when that is true. But remember that most of
>>> the documents we are producing are only drafts - they aren't even
>>> complete theories ready to be tested. Even the RFCs we produce are only
>>> Proposed Standards, and so are probably good candidates for testing.
>>> =

>>> If one person, or a very few working closely together, are doing all the
>>> design and implementation of something, then you *might* be able to get
>>> by just implementing without first specifying what is being implemented.
>>> Some of the agile methods advocate that kind of approach.  If what you
>>> are attempting has too many moving parts for that, then its still
>>> necessary to write a spec. Doing an open source implementation doesn't
>>> change that. It may just change which group does the specification. In a
>>> way this is like having the experimental physicists develop the theorie=
s.
>>> =

>>> Bottom line - IMO it would be good to get more early implementation
>>> experience than we seem to get now. An open reference implementation is
>>> one way to get that. But I don't think we should make some sort of rule
>>> that you can't submit a draft without a reference implementation, or
>>> even that you can't have an RFC without a reference implementation.
>>> (There is already a requirement for multiple implementations before a
>>> *Draft* standard.)
>>> =

>>> Thanks,
>>> Paul
>>> =

>>> Henry Sinnreich wrote:
>>>> Christer,
>>>> =

>>>> I agree with both you and Dean and should have also specified that the=
 SIP
>>>> standard should be amended step by step, based on testing the reference
>>>> implementation. There is nothing wrong with an I-D with fixes for SIP =
based
>>>> on testing a reference implementation.
>>>> =

>>>> Sorry for not having been clear also on the need to fix the standard
>>>> document by adding an amendment RFC.
>>>> =

>>>> Henry =

>>>> =

>>>> =

>>>> On 8/24/08 3:19 PM, "Christer Holmberg" <christer.holmberg@ericsson.co=
m>
>>>> wrote:
>>>> =

>>>>> Hi Henry,
>>>>> =

>>>>> Based on what criteria would you choose the reference implementation(=
s),
>>>>> and
>>>>> what is it that you really want to test? Offer/answer?
>>>>> =

>>>>> Because, eventhough there seems to be problems implementing offer/ans=
wer
>>>>> correctly, the early media/forking problem, raised by Dean, is more o=
f a
>>>>> "bi
>>>>> product" of the way we designed the protocol. In other words, even if=
 you
>>>>> have
>>>>> an implementation which works 100% according to the specs, it doesn't
>>>>> solve
>>>>> the problem which may come up when you, due to forking, receive early
>>>>> media
>>>>> from multiple locations :)
>>>>> =

>>>>> Regards,
>>>>> =

>>>>> Christer
>>>>> =

>>>>> =

>>>>> -----Alkuper=E4inen viesti-----
>>>>> L=E4hett=E4j=E4: Henry Sinnreich [mailto:hsinnrei@adobe.com]
>>>>> L=E4hetetty: su 24.8.2008 22:01
>>>>> Vastaanottaja: Dean Willis; Christer Holmberg
>>>>> Kopio: SIP IETF; Cullen Jennings
>>>>> Aihe: Fixing SIP with OS reference implementations for UA and server
>>>>>  =

>>>>> (changed the subject line)
>>>>> I have followed this discussion and am convinced that (though I start=
ed
>>>>> it)
>>>>> the issues raised here and in countless other SIPPING/SIP related
>>>>> discussions cannot be solved by apparent logic, no matter how long an=
d how
>>>>> thorough. Just like the physics cannot be proven by discussions but o=
nly
>>>>> by
>>>>> experiment. This is the whole difference between engineering/science =
and
>>>>> beliefs/opinions.
>>>>> =

>>>>> The only way IMO to fix the SIPPING/SIP issues discussed here is to h=
ave
>>>>> an
>>>>> open reference implementation running in a test bed (such as one prov=
ided
>>>>> maybe by the SIP Forum) and cooperate in LUNIX-style with testing (wh=
y not
>>>>> in SIPit events as well) and fixing the code. Any fruitful discussions
>>>>> must
>>>>> be part of fixing running code based on test results. This is actually
>>>>> pretty plain, so forgive my rant...
>>>>> =

>>>>> Selecting a reference SIP implementation:
>>>>> There are quite a few SIP UA and and SIP server OS code sites availab=
le
>>>>> and
>>>>> the next step could be selecting the best candidate(s).
>>>>> If asked, I would be only to happy to recommend some candidates.
>>>>> =

>>>>> Continuing such discussions without a reference implementation is
>>>>> fruitless
>>>>> and the SIP issues discussed here will not get fixed so as to meet the
>>>>> requirements for a good standard. This applies to all SIP related WGs.
>>>>> =

>>>>> Any comments?
>>>>> =

>>>>> Thanks, Henry
>>>>> =

>>>>> =

>>>>> On 8/24/08 2:30 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
>>>>> =

>>>>>> On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:
>>>>>> =

>>>>>>> The "media before answer" (if you refer to SDP answer) can be solve
>>>>>>> by simply saying that one must send an SDP answer must be sent
>>>>>>> before media is sent.
>>>>>>> =

>>>>>>> The you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
>>>>>>> doesn't work, because today media sent before SDP answer will often
>>>>>>> be discarded anyway.
>>>>>>> =

>>>>>> Perhaps not, but it's how ever device and service  I currently have
>>>>>> works.
>>>>>> =

>>>>>> Not that they work well, mind you.
>>>>>> =

>>>>>>>> It also makes ICE and SRTP much easier to deal with. By
>>>>>>>> making the transition to "regular" session a re-invite  the gateway
>>>>>>>> can transition from send-only to send-receive (if needed), the
>>>>>>>> billing
>>>>>>>> system (if it cares) can start the meter running, etc.
>>>>>>> So, just to clarify, you are still talking about a single SIP
>>>>>>> session, right?
>>>>>> That's one of the two possible approaches, and probably the easiest =
to
>>>>>> explain.
>>>>>> =

>>>>>> =

>>>>>>> The issue with that solution is of course that a forking proxy, as
>>>>>>> currently defined, would terminate all other legs once the first 200
>>>>>>> OK (establishing the early media path of the session) arrives.
>>>>>> One could of course change that behavior and have the forking proxy
>>>>>> return ALL responses.
>>>>>> =

>>>>>> =

>>>>>>> But, that would minimize multiple early media streams, which again
>>>>>>> in my opinion shows that the main problem is not offer/answer, but
>>>>>>> forking :)
>>>>>> The two certainly play poorly with each other.
>>>>>> =

>>>>>>>> Plus we can drop all the 100-rel and preconditions cruft out of the
>>>>>>>> state machine completely, making life MUCH better for the coder.
>>>>>>> If you separate the offer/answer state machine from the SIP
>>>>>>> transaction state machine it shouldn't really matter in what SIP
>>>>>>> messages the offers and answers are carried.
>>>>>> Perhaps true, but the SIP 100-rel state machine is profoundly ugly a=
ll
>>>>>> by itself.
>>>>>> =

>>>>>>> And, eventhough we probably would be able to remove SDP from
>>>>>>> provisional responses, I think provisional responses would still be
>>>>>>> useful for other things (indicating ringing etc).
>>>>>> Yes, and provisionals also impact the resend timers. We need them. We
>>>>>> just don't need 100-rel.
>>>>>> =

>>>>>>> But, of course we could have instead have used something like UPDATE
>>>>>>> (or even INFO) to indicate "ringing" etc, instead of provisional
>>>>>>> responses.
>>>>>>> =

>>>>>>>> Think of it this way -- If I'm calling a PSTN gateway, do I really
>>>>>>>> want to wait until the PSTN side connection completes before I do =
the
>>>>>>>> setup work for SRTP? I think I'd rather get that out of the way
>>>>>>>> before
>>>>>>>> the called party answers, or before I even see early media coming
>>>>>>>> back
>>>>>>>> unprotected.
>>>>>>> What prevents you from doing the SRTP negotiation using reliable
>>>>>>> provisional responses, in the same way you are able to perform
>>>>>>> preconditions before the called party answers?
>>>>>> In my case, mostly the desire to avoid reliable provisional response=
s.
>>>>>> =

>>>>>> And when you cross-factor reliable provisional, SRTP, and forking, y=
ou
>>>>>> get a real mess.
>>>>>> =

>>>>>>>> Now, lets think about forking. When we fork in a proxy, the UAC can
>>>>>>>> only deal with one "best answer", and early media is anybody's gue=
ss
>>>>>>>> as to how it might work or what might happen (it pretty much turns=
 to
>>>>>>>> soup, especially if you get multiple early media channels).
>>>>>>> Correct. And, that will be a problem as long as it is possible for
>>>>>>> the UAC to receive multiple early streams - no matter how they are
>>>>>>> negotiated.
>>>>>>> =

>>>>>>>> Consider instead that a forking node is really a "forking gateway",
>>>>>>>> not a proxy. It takes one call in, establishes a fully-negotiated
>>>>>>>> "early session",  then sends out its multiple INVITES.  As those
>>>>>>>> sessions (which might have early media) connect up, the forking
>>>>>>>> gateway deals with the multiple media streams (by bridging,
>>>>>>>> discarding, whatever).
>>>>>>> Doesn't that simply move the how-to-choose-which-early-media-stream-
>>>>>>> to-listen-to from the UAC to the forking proxy/gateway?
>>>>>> It allows the forking gateway to either mix all the streams into one
>>>>>> (a boon to the bandwidth-restricted UAC), or more intelligently choo=
se
>>>>>> which one to relay based on media-analysis. For example, ringing can
>>>>>> easily be differentiated from speech, so if a forking-b2bua sees four
>>>>>> legs of ringing and one of speech, it could quite reasonably choose
>>>>>> the speech channel to send back to the UAC.
>>>>>> =

>>>>>>>> When a forked session matures to a "regular session", the forking
>>>>>>>> gateway can re-invite the UAC to >make that session a "regular
>>>>>>>> session",
>>>>>>> Today it does that again by sending 200 OK.
>>>>>> Right -- assuming you did your media setup in provisional (and keying
>>>>>> in reliable provisional, which is messy)
>>>>>> =

>>>>>>> Again, I agree that many things probably could be done in a
>>>>>>> "cleaner" way, but I think the main problem still exists: if there
>>>>>>> are multiple early media streams (due to forking proxy or forking
>>>>>>> gateway), how do I choose which one to play?
>>>>>>> =

>>>>>> I'm not aware of a perfect asnwer, but (as above) can say there are
>>>>>> definitely several "better" answers than what we have now.
>>>>>> =

>>>>>> =

>>>>>>>> or can even arrange to drop itself out of the media path if needed.
>>>>>>> How would that work? It would be able to change the local contact
>>>>>>> from itself to the called party, but it would not be able to add the
>>>>>>> possible Record-Routes between itself and the called user.
>>>>>> Media path, not signaling. Fall back to 3PCC setup techniques on a
>>>>>> reinvite sequence.
>>>>>> =

>>>>>>> Not being able to modify the signaling path during a session (read:
>>>>>>> update the Record-Route) is a "bug" in the protocol, I think, but
>>>>>>> it's a separate issue :)
>>>>>>> =

>>>>>> yeah, re-invite should be abele to re-route.
>>>>>> =

>>>>>> =

>>>>>>>> If we have to have forking, and we have to have media before
>>>>>>>> there's a
>>>>>>>> final answer, then I think something like this is needed to make it
>>>>>>>> work.
>>>>>>> Again, it could make the signaling flows a little more nicer, and it
>>>>>>> would move some decissions from the UAC to the forking gateway, but
>>>>>>> the problem with multiple media streams (no matter whether you call
>>>>>>> them early or not :) would still exist.
>>>>>> Perhaps. However, one of the more profound problems today (as with
>>>>>> mobile nets) is limited bandwidth to the UA. Dealing with mixing,
>>>>>> recoding, and selection-from-alternatives in a "server" is much easi=
er.
>>>>>> =

>>>>>>> In my opinion, the only solution, using what we have today, is to
>>>>>>> make sure there is only one early media stream sent.
>>>>>> Yep. That's quite true. It's also very difficult, if anything forks.
>>>>>> Our greatest power is our greatest problem.
>>>>>> =

>>>>>> --
>>>>>> Dean
>>>>>> =

>>>>>> =

>>>>>> _______________________________________________
>>>>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>>>>> This list is for NEW development of the core SIP Protocol
>>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>>> Use sipping@ietf.org for new developments on the application of sip
>>>> _______________________________________________
>>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>>> This list is for NEW development of the core SIP Protocol
>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>> Use sipping@ietf.org for new developments on the application of sip
>>>> =

>> =

>> =


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug 26 00:02:04 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 479093A685B;
	Tue, 26 Aug 2008 00:02:04 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6A9363A6955
	for <sip@core3.amsl.com>; Tue, 26 Aug 2008 00:02:03 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.389
X-Spam-Level: 
X-Spam-Status: No, score=-4.389 tagged_above=-999 required=5
	tests=[AWL=-0.596, BAYES_00=-2.599, FRT_ADOBE2=2.455, HELO_EQ_SE=0.35, 
	RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dbIPho3K5PFX for <sip@core3.amsl.com>;
	Tue, 26 Aug 2008 00:02:01 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 624C33A6843
	for <sip@ietf.org>; Tue, 26 Aug 2008 00:01:59 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	5267D20199; Tue, 26 Aug 2008 09:01:58 +0200 (CEST)
X-AuditID: c1b4fb3e-a5e7fbb000007a96-f5-48b3aa665a5a
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	20C2A213B0; Tue, 26 Aug 2008 09:01:58 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Aug 2008 09:01:57 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 26 Aug 2008 09:01:57 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0797B3D7@esealmw113.eemea.ericsson.se>
In-Reply-To: <C4D87A98.7E29%hsinnrei@adobe.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Fixing SIP with OS reference implementations for UA and
	server
Thread-Index: AckG/pusrsQuHvDSgE2cGoSKHO0/SwAQxeGg
References: <48B21988.1090500@cisco.com> <C4D87A98.7E29%hsinnrei@adobe.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Henry Sinnreich" <hsinnrei@adobe.com>, "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 26 Aug 2008 07:01:57.0725 (UTC)
	FILETIME=[A15180D0:01C90749]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>, Cullen Jennings <fluffy@cisco.com>,
	Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and
	server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi Henry,

As I've said before, I don't think the number of standards is the problem.

Many of the extension specifications simply specify ways (headers, paramete=
rs etc) to transport specific data. Those normally don't have big impact on=
 the core SIP state machine, and whether they are implemented or not depend=
s on the requirements of the network environment in which they are to be us=
ed. If there are no requirement, it doesn't matter whether you have impleme=
nted header X and I haven't (the header should simply be ignored).

The important thing is that people get the relatively small number of core =
specifications correct - specs like 3261, 3264 etc. If you don't get those =
right, it doesn't matter if you have implemented every other SIP related sp=
ecification out there... =


Regards,

Christer

 =


-----Original Message-----
From: Henry Sinnreich [mailto:hsinnrei@adobe.com] =

Sent: 26. elokuuta 2008 1:05
To: Paul Kyzivat
Cc: Christer Holmberg; Dean Willis; SIP IETF; Cullen Jennings
Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and =
server

Paul,

I really love your way of arguing, but feel it's too apologetic of the pres=
ent way of doing business as usual, since SIP has become an ecosystem in it=
s own right and has spawned a global VoIP industry. This implies far greate=
r sense of responsibility that can only be met by using the most successful=
 examples of software development in academia and R&D:

The same person(s) to write both the code and papers in parallel and publis=
h them along with ample test results. It's much of a looped process. There =
are plenty of such sites, for example in the open source community. There a=
re bug fixes, lists of know issues, etc. We all know them and have the resp=
onsibility to apply such engineering _discipline_ here as well.

* When seeing over 100 standards, how is one going to know SIP in adequate =
depth?
* What is the cost of this complexity?
* When proposing an extension what are the unintended consequences?
* When seeing dissent among the leading SIP experts, where to go for guidan=
ce, except in some test environment?

That explains my insistence on running code and testing as part and parcel =
of further SIP development, and also for fixing the problems currently disc=
ussed here - but not mainly by discussions :-)

The endless flow of I-Ds without running code and test results has to stop =
somewhere IMO, but I don't want to belabor it since we probably disagree.

Thanks again for your thoughtful comments.
My two cents,

Henry


On 8/24/08 9:31 PM, "Paul Kyzivat" <pkyzivat@cisco.com> wrote:

> Henry,
> =

> Its interesting that you have drawn parallels here with physics.
> In physics there are theorists and experimentalists. I think most of =

> them agree that progress in physics requires both - the =

> experimentalists require a theory to verify, and the theorists need =

> observed violations of the theory and data that is unexplained by existin=
g theories.
> =

> I agree that experimentalists are useful in our business too. I in =

> general agree with your implied assertion that we (the IETF =

> sip-related
> WGs) are theorists.
> =

> Its not entirely clear to me whether we need *more* experimentalists =

> than we already have, or if they could or should be more closely =

> affiliated with the IETF than they already are. We do already have SIP =

> Forum, running SIPit. We hear the results of that. And clearly there =

> are plenty of participants here that speak for implementations.
> =

> Based on what you have said before, I gather you think there is too =

> much standardization done in relation to the amount of implementation don=
e.
> There certainly are cases when that is true. But remember that most of =

> the documents we are producing are only drafts - they aren't even =

> complete theories ready to be tested. Even the RFCs we produce are =

> only Proposed Standards, and so are probably good candidates for testing.
> =

> If one person, or a very few working closely together, are doing all =

> the design and implementation of something, then you *might* be able =

> to get by just implementing without first specifying what is being implem=
ented.
> Some of the agile methods advocate that kind of approach.  If what you =

> are attempting has too many moving parts for that, then its still =

> necessary to write a spec. Doing an open source implementation doesn't =

> change that. It may just change which group does the specification. In =

> a way this is like having the experimental physicists develop the theorie=
s.
> =

> Bottom line - IMO it would be good to get more early implementation =

> experience than we seem to get now. An open reference implementation =

> is one way to get that. But I don't think we should make some sort of =

> rule that you can't submit a draft without a reference implementation, =

> or even that you can't have an RFC without a reference implementation.
> (There is already a requirement for multiple implementations before a
> *Draft* standard.)
> =

> Thanks,
> Paul
> =

> Henry Sinnreich wrote:
>> Christer,
>> =

>> I agree with both you and Dean and should have also specified that =

>> the SIP standard should be amended step by step, based on testing the =

>> reference implementation. There is nothing wrong with an I-D with =

>> fixes for SIP based on testing a reference implementation.
>> =

>> Sorry for not having been clear also on the need to fix the standard =

>> document by adding an amendment RFC.
>> =

>> Henry
>> =

>> =

>> On 8/24/08 3:19 PM, "Christer Holmberg" =

>> <christer.holmberg@ericsson.com>
>> wrote:
>> =

>>> Hi Henry,
>>> =

>>> Based on what criteria would you choose the reference =

>>> implementation(s), and what is it that you really want to test? Offer/a=
nswer?
>>> =

>>> Because, eventhough there seems to be problems implementing =

>>> offer/answer correctly, the early media/forking problem, raised by =

>>> Dean, is more of a "bi product" of the way we designed the protocol. =

>>> In other words, even if you have an implementation which works 100% =

>>> according to the specs, it doesn't solve the problem which may come =

>>> up when you, due to forking, receive early media from multiple =

>>> locations :)
>>> =

>>> Regards,
>>> =

>>> Christer
>>> =

>>> =

>>> -----Alkuper=E4inen viesti-----
>>> L=E4hett=E4j=E4: Henry Sinnreich [mailto:hsinnrei@adobe.com]
>>> L=E4hetetty: su 24.8.2008 22:01
>>> Vastaanottaja: Dean Willis; Christer Holmberg
>>> Kopio: SIP IETF; Cullen Jennings
>>> Aihe: Fixing SIP with OS reference implementations for UA and server
>>>  =

>>> (changed the subject line)
>>> I have followed this discussion and am convinced that (though I =

>>> started it) the issues raised here and in countless other =

>>> SIPPING/SIP related discussions cannot be solved by apparent logic, =

>>> no matter how long and how thorough. Just like the physics cannot be =

>>> proven by discussions but only by experiment. This is the whole =

>>> difference between engineering/science and beliefs/opinions.
>>> =

>>> The only way IMO to fix the SIPPING/SIP issues discussed here is to =

>>> have an open reference implementation running in a test bed (such as =

>>> one provided maybe by the SIP Forum) and cooperate in LUNIX-style =

>>> with testing (why not in SIPit events as well) and fixing the code. =

>>> Any fruitful discussions must be part of fixing running code based =

>>> on test results. This is actually pretty plain, so forgive my rant...
>>> =

>>> Selecting a reference SIP implementation:
>>> There are quite a few SIP UA and and SIP server OS code sites =

>>> available and the next step could be selecting the best candidate(s).
>>> If asked, I would be only to happy to recommend some candidates.
>>> =

>>> Continuing such discussions without a reference implementation is =

>>> fruitless and the SIP issues discussed here will not get fixed so as =

>>> to meet the requirements for a good standard. This applies to all SIP r=
elated WGs.
>>> =

>>> Any comments?
>>> =

>>> Thanks, Henry
>>> =

>>> =

>>> On 8/24/08 2:30 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
>>> =

>>>> On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:
>>>> =

>>>>> The "media before answer" (if you refer to SDP answer) can be =

>>>>> solve by simply saying that one must send an SDP answer must be =

>>>>> sent before media is sent.
>>>>> =

>>>>> The =

>>>>> you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
>>>>> doesn't work, because today media sent before SDP answer will =

>>>>> often be discarded anyway.
>>>>> =

>>>> Perhaps not, but it's how ever device and service  I currently have =

>>>> works.
>>>> =

>>>> Not that they work well, mind you.
>>>> =

>>>>>> It also makes ICE and SRTP much easier to deal with. By making =

>>>>>> the transition to "regular" session a re-invite  the gateway can =

>>>>>> transition from send-only to send-receive (if needed), the =

>>>>>> billing system (if it cares) can start the meter running, etc.
>>>>> So, just to clarify, you are still talking about a single SIP =

>>>>> session, right?
>>>> That's one of the two possible approaches, and probably the easiest =

>>>> to explain.
>>>> =

>>>> =

>>>>> The issue with that solution is of course that a forking proxy, as =

>>>>> currently defined, would terminate all other legs once the first =

>>>>> 200 OK (establishing the early media path of the session) arrives.
>>>> One could of course change that behavior and have the forking proxy =

>>>> return ALL responses.
>>>> =

>>>> =

>>>>> =

>>>>> But, that would minimize multiple early media streams, which again =

>>>>> in my opinion shows that the main problem is not offer/answer, but =

>>>>> forking :)
>>>> The two certainly play poorly with each other.
>>>> =

>>>>> =

>>>>>> Plus we can drop all the 100-rel and preconditions cruft out of =

>>>>>> the state machine completely, making life MUCH better for the coder.
>>>>> If you separate the offer/answer state machine from the SIP =

>>>>> transaction state machine it shouldn't really matter in what SIP =

>>>>> messages the offers and answers are carried.
>>>> Perhaps true, but the SIP 100-rel state machine is profoundly ugly =

>>>> all by itself.
>>>> =

>>>>> =

>>>>> And, eventhough we probably would be able to remove SDP from =

>>>>> provisional responses, I think provisional responses would still =

>>>>> be useful for other things (indicating ringing etc).
>>>> Yes, and provisionals also impact the resend timers. We need them. =

>>>> We just don't need 100-rel.
>>>> =

>>>>> =

>>>>> But, of course we could have instead have used something like =

>>>>> UPDATE (or even INFO) to indicate "ringing" etc, instead of =

>>>>> provisional responses.
>>>>> =

>>>>>> Think of it this way -- If I'm calling a PSTN gateway, do I =

>>>>>> really want to wait until the PSTN side connection completes =

>>>>>> before I do the setup work for SRTP? I think I'd rather get that =

>>>>>> out of the way before the called party answers, or before I even =

>>>>>> see early media coming back unprotected.
>>>>> What prevents you from doing the SRTP negotiation using reliable =

>>>>> provisional responses, in the same way you are able to perform =

>>>>> preconditions before the called party answers?
>>>> In my case, mostly the desire to avoid reliable provisional responses.
>>>> =

>>>> And when you cross-factor reliable provisional, SRTP, and forking, =

>>>> you get a real mess.
>>>> =

>>>>> =

>>>>>> Now, lets think about forking. When we fork in a proxy, the UAC =

>>>>>> can only deal with one "best answer", and early media is =

>>>>>> anybody's guess as to how it might work or what might happen (it =

>>>>>> pretty much turns to soup, especially if you get multiple early medi=
a channels).
>>>>> Correct. And, that will be a problem as long as it is possible for =

>>>>> the UAC to receive multiple early streams - no matter how they are =

>>>>> negotiated.
>>>>> =

>>>>>> Consider instead that a forking node is really a "forking =

>>>>>> gateway", not a proxy. It takes one call in, establishes a =

>>>>>> fully-negotiated "early session",  then sends out its multiple =

>>>>>> INVITES.  As those sessions (which might have early media) =

>>>>>> connect up, the forking gateway deals with the multiple media =

>>>>>> streams (by bridging, discarding, whatever).
>>>>> Doesn't that simply move the =

>>>>> how-to-choose-which-early-media-stream-
>>>>> to-listen-to from the UAC to the forking proxy/gateway?
>>>> It allows the forking gateway to either mix all the streams into =

>>>> one (a boon to the bandwidth-restricted UAC), or more intelligently =

>>>> choose which one to relay based on media-analysis. For example, =

>>>> ringing can easily be differentiated from speech, so if a =

>>>> forking-b2bua sees four legs of ringing and one of speech, it could =

>>>> quite reasonably choose the speech channel to send back to the UAC.
>>>> =

>>>>> =

>>>>>> When a forked session matures to a "regular session", the forking =

>>>>>> gateway can re-invite the UAC to >make that session a "regular =

>>>>>> session",
>>>>> Today it does that again by sending 200 OK.
>>>> Right -- assuming you did your media setup in provisional (and =

>>>> keying in reliable provisional, which is messy)
>>>> =

>>>>> Again, I agree that many things probably could be done in a =

>>>>> "cleaner" way, but I think the main problem still exists: if there =

>>>>> are multiple early media streams (due to forking proxy or forking =

>>>>> gateway), how do I choose which one to play?
>>>>> =

>>>> I'm not aware of a perfect asnwer, but (as above) can say there are =

>>>> definitely several "better" answers than what we have now.
>>>> =

>>>> =

>>>>>> or can even arrange to drop itself out of the media path if needed.
>>>>> How would that work? It would be able to change the local contact =

>>>>> from itself to the called party, but it would not be able to add =

>>>>> the possible Record-Routes between itself and the called user.
>>>> Media path, not signaling. Fall back to 3PCC setup techniques on a =

>>>> reinvite sequence.
>>>> =

>>>>> Not being able to modify the signaling path during a session (read:
>>>>> update the Record-Route) is a "bug" in the protocol, I think, but =

>>>>> it's a separate issue :)
>>>>> =

>>>> yeah, re-invite should be abele to re-route.
>>>> =

>>>> =

>>>>>> If we have to have forking, and we have to have media before =

>>>>>> there's a final answer, then I think something like this is =

>>>>>> needed to make it work.
>>>>> Again, it could make the signaling flows a little more nicer, and =

>>>>> it would move some decissions from the UAC to the forking gateway, =

>>>>> but the problem with multiple media streams (no matter whether you =

>>>>> call them early or not :) would still exist.
>>>> Perhaps. However, one of the more profound problems today (as with =

>>>> mobile nets) is limited bandwidth to the UA. Dealing with mixing, =

>>>> recoding, and selection-from-alternatives in a "server" is much easier.
>>>> =

>>>>> In my opinion, the only solution, using what we have today, is to =

>>>>> make sure there is only one early media stream sent.
>>>> Yep. That's quite true. It's also very difficult, if anything forks.
>>>> Our greatest power is our greatest problem.
>>>> =

>>>> --
>>>> Dean
>>>> =

>>>> =

>>>> _______________________________________________
>>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>>> This list is for NEW development of the core SIP Protocol Use =

>>>> sip-implementors@cs.columbia.edu for questions on current sip Use =

>>>> sipping@ietf.org for new developments on the application of sip
>>> =

>> =

>> _______________________________________________
>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol Use =

>> sip-implementors@cs.columbia.edu for questions on current sip Use =

>> sipping@ietf.org for new developments on the application of sip
>> =


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug 26 03:36:53 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5CCD828C106;
	Tue, 26 Aug 2008 03:36:53 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 400C728C0FD
	for <sip@core3.amsl.com>; Tue, 26 Aug 2008 03:36:52 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.197
X-Spam-Level: 
X-Spam-Status: No, score=-4.197 tagged_above=-999 required=5
	tests=[AWL=-0.549, BAYES_50=0.001, HELO_EQ_SE=0.35,
	HTML_MESSAGE=0.001, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0zrewFrELPdv for <sip@core3.amsl.com>;
	Tue, 26 Aug 2008 03:36:51 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id ABECF28C104
	for <sip@ietf.org>; Tue, 26 Aug 2008 03:36:50 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	1690F208B0 for <sip@ietf.org>; Tue, 26 Aug 2008 12:36:40 +0200 (CEST)
X-AuditID: c1b4fb3c-ab0c8bb0000015b5-1b-48b3dcb77ed8
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	EE57420843 for <sip@ietf.org>; Tue, 26 Aug 2008 12:36:39 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Aug 2008 12:36:39 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 26 Aug 2008 12:36:39 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF0797BFC7@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: keep parameter also for registered emergency calls?
Thread-Index: AckHZ59CVN5HlE4eS4iW6eo/rklIPw==
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "SIP IETF" <sip@ietf.org>
X-OriginalArrivalTime: 26 Aug 2008 10:36:39.0698 (UTC)
	FILETIME=[9F929720:01C90767]
X-Brightmail-Tracker: AAAAAA==
Subject: [Sip] keep parameter also for registered emergency calls?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============2132609204=="
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============2132609204==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C90767.9F6B69E0"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C90767.9F6B69E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,

One of the use-cases for the keep parameter is non-registration
emergency calls, where Outbound can't be used even if supported.

However, a question has come up whether it could also be useful in
certain emergency use-cases WITH registration.

At least in 3GPP, when a UA performs an emergency registration, the
S-CSCF/registrar does not insert itself in the "path" (it does not
insert Service-Route), which means that the INVITE for the emergency
call will not traverse the S-CSCF.=20

And, therefor the usage of Outbound is not needed, since there is no
idea of establishing multiple flows between the UA and the
S-CSCF/registrar.

So, in this case the keep parameter could be used by the UA and
P-CSCF/edge proxy to indicate support of keep-alive also for
registration emergency calls.

Regards,

Christer

------_=_NextPart_001_01C90767.9F6B69E0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7653.38">
<TITLE>keep parameter also for registered emergency calls?</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">One of the use-cases for the keep =
parameter is non-registration emergency calls, where Outbound can't be =
used even if supported.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">However, a question has come up whether =
it could also be useful in certain emergency use-cases WITH =
registration.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">At least in 3GPP, when a UA performs an =
emergency registration, the S-CSCF/registrar does not insert itself in =
the &quot;path&quot; (it does not insert Service-Route), which means =
that the INVITE for the emergency call will not traverse the S-CSCF. =
</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">And, therefor the usage of Outbound is =
not needed, since there is no idea of establishing multiple flows =
between the UA and the S-CSCF/registrar.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">So, in this case the keep parameter =
could be used by the UA and P-CSCF/edge proxy to indicate support of =
keep-alive also for registration emergency calls.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Regards,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Christer</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C90767.9F6B69E0--

--===============2132609204==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============2132609204==--


From sip-bounces@ietf.org  Tue Aug 26 09:58:39 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BFFC13A6ACD;
	Tue, 26 Aug 2008 09:58:39 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 6BF333A69C5
	for <sip@core3.amsl.com>; Tue, 26 Aug 2008 09:58:38 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -4.144
X-Spam-Level: 
X-Spam-Status: No, score=-4.144 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, FRT_ADOBE2=2.455, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id MHcE6OKGu8ag for <sip@core3.amsl.com>;
	Tue, 26 Aug 2008 09:58:36 -0700 (PDT)
Received: from psmtp.com (exprod6ob109.obsmtp.com [64.18.1.22])
	by core3.amsl.com (Postfix) with ESMTP id D998A3A6A67
	for <sip@ietf.org>; Tue, 26 Aug 2008 09:58:31 -0700 (PDT)
Received: from source ([192.150.11.134]) by exprod6ob109.postini.com
	([64.18.5.12]) with SMTP; Tue, 26 Aug 2008 09:58:32 PDT
Received: from inner-relay-3.eur.adobe.com ([192.150.8.236])
	by outbound-smtp-1.corp.adobe.com (8.12.10/8.12.10) with ESMTP id
	m7QGsdG3008114; Tue, 26 Aug 2008 09:54:39 -0700 (PDT)
Received: from fe2.corp.adobe.com (fe2.corp.adobe.com [10.8.192.72])
	by inner-relay-3.eur.adobe.com (8.12.10/8.12.9) with ESMTP id
	m7QGwGqJ018751; Tue, 26 Aug 2008 09:58:21 -0700 (PDT)
Received: from namail5.corp.adobe.com ([10.8.192.88]) by fe2.corp.adobe.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Aug 2008 09:58:16 -0700
Received: from 10.131.65.183 ([10.131.65.183]) by namail5.corp.adobe.com
	([10.8.192.88]) with Microsoft Exchange Server HTTP-DAV ; 
	Tue, 26 Aug 2008 16:58:15 +0000
User-Agent: Microsoft-Entourage/12.11.0.080522
Date: Tue, 26 Aug 2008 10:02:51 -0700
From: Henry Sinnreich <hsinnrei@adobe.com>
To: Christer Holmberg <christer.holmberg@ericsson.com>,
	Paul Kyzivat <pkyzivat@cisco.com>
Message-ID: <C4D9854B.7E85%hsinnrei@adobe.com>
Thread-Topic: [Sip] Fixing SIP with OS reference implementations for UA and
	server
Thread-Index: AckG/pusrsQuHvDSgE2cGoSKHO0/SwAQxeGgABb34/s=
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF0797B3D7@esealmw113.eemea.ericsson.se>
Mime-version: 1.0
X-OriginalArrivalTime: 26 Aug 2008 16:58:16.0212 (UTC)
	FILETIME=[EEF55D40:01C9079C]
Cc: SIP IETF <sip@ietf.org>, Cullen Jennings <fluffy@cisco.com>,
	Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and
 server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Christer,

> The important thing is that people get the relatively small number of core
> specifications correct - specs like 3261, 3264 etc. If you don't get those
> right, it doesn't matter if you have implemented every other SIP related
> specification out there...

I could not agree with you more.

Incidentally, we have also published such a short list in
"Simple SIP Usage Scenario for Applications in the Endpoints"
http://www.ietf.org/internet-drafts/draft-sinnreich-sip-tools-03.txt

We could compare notes, though our I-D is tailored to the usage scenario
where all applications reside in the endpoints and only the rendezvous and
session setup of SIP are used. This usage scenario is of interest when
combining SIP with Rich Internet Applications (RIA) in the Web browser.
So many apps are in the browser already, so why not add SIP apps?

Could you help out and share what the short list of key SIP standards may be
for other usage scenarios? This is of interest to a larger audience.

Henry


On 8/26/08 12:01 AM, "Christer Holmberg" <christer.holmberg@ericsson.com>
wrote:

> =

> Hi Henry,
> =

> As I've said before, I don't think the number of standards is the problem.
> =

> Many of the extension specifications simply specify ways (headers, parame=
ters
> etc) to transport specific data. Those normally don't have big impact on =
the
> core SIP state machine, and whether they are implemented or not depends o=
n the
> requirements of the network environment in which they are to be used. If =
there
> are no requirement, it doesn't matter whether you have implemented header=
 X
> and I haven't (the header should simply be ignored).
> =

> The important thing is that people get the relatively small number of core
> specifications correct - specs like 3261, 3264 etc. If you don't get those
> right, it doesn't matter if you have implemented every other SIP related
> specification out there...
> =

> Regards,
> =

> Christer
> =

>  =

> =

> -----Original Message-----
> From: Henry Sinnreich [mailto:hsinnrei@adobe.com]
> Sent: 26. elokuuta 2008 1:05
> To: Paul Kyzivat
> Cc: Christer Holmberg; Dean Willis; SIP IETF; Cullen Jennings
> Subject: Re: [Sip] Fixing SIP with OS reference implementations for UA and
> server
> =

> Paul,
> =

> I really love your way of arguing, but feel it's too apologetic of the pr=
esent
> way of doing business as usual, since SIP has become an ecosystem in its =
own
> right and has spawned a global VoIP industry. This implies far greater se=
nse
> of responsibility that can only be met by using the most successful examp=
les
> of software development in academia and R&D:
> =

> The same person(s) to write both the code and papers in parallel and publ=
ish
> them along with ample test results. It's much of a looped process. There =
are
> plenty of such sites, for example in the open source community. There are=
 bug
> fixes, lists of know issues, etc. We all know them and have the responsib=
ility
> to apply such engineering _discipline_ here as well.
> =

> * When seeing over 100 standards, how is one going to know SIP in adequate
> depth?
> * What is the cost of this complexity?
> * When proposing an extension what are the unintended consequences?
> * When seeing dissent among the leading SIP experts, where to go for guid=
ance,
> except in some test environment?
> =

> That explains my insistence on running code and testing as part and parce=
l of
> further SIP development, and also for fixing the problems currently discu=
ssed
> here - but not mainly by discussions :-)
> =

> The endless flow of I-Ds without running code and test results has to stop
> somewhere IMO, but I don't want to belabor it since we probably disagree.
> =

> Thanks again for your thoughtful comments.
> My two cents,
> =

> Henry
> =

> =

> On 8/24/08 9:31 PM, "Paul Kyzivat" <pkyzivat@cisco.com> wrote:
> =

>> Henry,
>> =

>> Its interesting that you have drawn parallels here with physics.
>> In physics there are theorists and experimentalists. I think most of
>> them agree that progress in physics requires both - the
>> experimentalists require a theory to verify, and the theorists need
>> observed violations of the theory and data that is unexplained by existi=
ng
>> theories.
>> =

>> I agree that experimentalists are useful in our business too. I in
>> general agree with your implied assertion that we (the IETF
>> sip-related
>> WGs) are theorists.
>> =

>> Its not entirely clear to me whether we need *more* experimentalists
>> than we already have, or if they could or should be more closely
>> affiliated with the IETF than they already are. We do already have SIP
>> Forum, running SIPit. We hear the results of that. And clearly there
>> are plenty of participants here that speak for implementations.
>> =

>> Based on what you have said before, I gather you think there is too
>> much standardization done in relation to the amount of implementation do=
ne.
>> There certainly are cases when that is true. But remember that most of
>> the documents we are producing are only drafts - they aren't even
>> complete theories ready to be tested. Even the RFCs we produce are
>> only Proposed Standards, and so are probably good candidates for testing.
>> =

>> If one person, or a very few working closely together, are doing all
>> the design and implementation of something, then you *might* be able
>> to get by just implementing without first specifying what is being
>> implemented.
>> Some of the agile methods advocate that kind of approach.  If what you
>> are attempting has too many moving parts for that, then its still
>> necessary to write a spec. Doing an open source implementation doesn't
>> change that. It may just change which group does the specification. In
>> a way this is like having the experimental physicists develop the theori=
es.
>> =

>> Bottom line - IMO it would be good to get more early implementation
>> experience than we seem to get now. An open reference implementation
>> is one way to get that. But I don't think we should make some sort of
>> rule that you can't submit a draft without a reference implementation,
>> or even that you can't have an RFC without a reference implementation.
>> (There is already a requirement for multiple implementations before a
>> *Draft* standard.)
>> =

>> Thanks,
>> Paul
>> =

>> Henry Sinnreich wrote:
>>> Christer,
>>> =

>>> I agree with both you and Dean and should have also specified that
>>> the SIP standard should be amended step by step, based on testing the
>>> reference implementation. There is nothing wrong with an I-D with
>>> fixes for SIP based on testing a reference implementation.
>>> =

>>> Sorry for not having been clear also on the need to fix the standard
>>> document by adding an amendment RFC.
>>> =

>>> Henry
>>> =

>>> =

>>> On 8/24/08 3:19 PM, "Christer Holmberg"
>>> <christer.holmberg@ericsson.com>
>>> wrote:
>>> =

>>>> Hi Henry,
>>>> =

>>>> Based on what criteria would you choose the reference
>>>> implementation(s), and what is it that you really want to test?
>>>> Offer/answer?
>>>> =

>>>> Because, eventhough there seems to be problems implementing
>>>> offer/answer correctly, the early media/forking problem, raised by
>>>> Dean, is more of a "bi product" of the way we designed the protocol.
>>>> In other words, even if you have an implementation which works 100%
>>>> according to the specs, it doesn't solve the problem which may come
>>>> up when you, due to forking, receive early media from multiple
>>>> locations :)
>>>> =

>>>> Regards,
>>>> =

>>>> Christer
>>>> =

>>>> =

>>>> -----Alkuper=E4inen viesti-----
>>>> L=E4hett=E4j=E4: Henry Sinnreich [mailto:hsinnrei@adobe.com]
>>>> L=E4hetetty: su 24.8.2008 22:01
>>>> Vastaanottaja: Dean Willis; Christer Holmberg
>>>> Kopio: SIP IETF; Cullen Jennings
>>>> Aihe: Fixing SIP with OS reference implementations for UA and server
>>>>  =

>>>> (changed the subject line)
>>>> I have followed this discussion and am convinced that (though I
>>>> started it) the issues raised here and in countless other
>>>> SIPPING/SIP related discussions cannot be solved by apparent logic,
>>>> no matter how long and how thorough. Just like the physics cannot be
>>>> proven by discussions but only by experiment. This is the whole
>>>> difference between engineering/science and beliefs/opinions.
>>>> =

>>>> The only way IMO to fix the SIPPING/SIP issues discussed here is to
>>>> have an open reference implementation running in a test bed (such as
>>>> one provided maybe by the SIP Forum) and cooperate in LUNIX-style
>>>> with testing (why not in SIPit events as well) and fixing the code.
>>>> Any fruitful discussions must be part of fixing running code based
>>>> on test results. This is actually pretty plain, so forgive my rant...
>>>> =

>>>> Selecting a reference SIP implementation:
>>>> There are quite a few SIP UA and and SIP server OS code sites
>>>> available and the next step could be selecting the best candidate(s).
>>>> If asked, I would be only to happy to recommend some candidates.
>>>> =

>>>> Continuing such discussions without a reference implementation is
>>>> fruitless and the SIP issues discussed here will not get fixed so as
>>>> to meet the requirements for a good standard. This applies to all SIP
>>>> related WGs.
>>>> =

>>>> Any comments?
>>>> =

>>>> Thanks, Henry
>>>> =

>>>> =

>>>> On 8/24/08 2:30 PM, "Dean Willis" <dean.willis@softarmor.com> wrote:
>>>> =

>>>>> On Aug 24, 2008, at 7:25 AM, Christer Holmberg wrote:
>>>>> =

>>>>>> The "media before answer" (if you refer to SDP answer) can be
>>>>>> solve by simply saying that one must send an SDP answer must be
>>>>>> sent before media is sent.
>>>>>> =

>>>>>> The =

>>>>>> you-must-be-able-to-receive-media-once-you-have-sent-the-INVITE
>>>>>> doesn't work, because today media sent before SDP answer will
>>>>>> often be discarded anyway.
>>>>>> =

>>>>> Perhaps not, but it's how ever device and service  I currently have
>>>>> works.
>>>>> =

>>>>> Not that they work well, mind you.
>>>>> =

>>>>>>> It also makes ICE and SRTP much easier to deal with. By making
>>>>>>> the transition to "regular" session a re-invite  the gateway can
>>>>>>> transition from send-only to send-receive (if needed), the
>>>>>>> billing system (if it cares) can start the meter running, etc.
>>>>>> So, just to clarify, you are still talking about a single SIP
>>>>>> session, right?
>>>>> That's one of the two possible approaches, and probably the easiest
>>>>> to explain.
>>>>> =

>>>>> =

>>>>>> The issue with that solution is of course that a forking proxy, as
>>>>>> currently defined, would terminate all other legs once the first
>>>>>> 200 OK (establishing the early media path of the session) arrives.
>>>>> One could of course change that behavior and have the forking proxy
>>>>> return ALL responses.
>>>>> =

>>>>> =

>>>>>> =

>>>>>> But, that would minimize multiple early media streams, which again
>>>>>> in my opinion shows that the main problem is not offer/answer, but
>>>>>> forking :)
>>>>> The two certainly play poorly with each other.
>>>>> =

>>>>>> =

>>>>>>> Plus we can drop all the 100-rel and preconditions cruft out of
>>>>>>> the state machine completely, making life MUCH better for the coder.
>>>>>> If you separate the offer/answer state machine from the SIP
>>>>>> transaction state machine it shouldn't really matter in what SIP
>>>>>> messages the offers and answers are carried.
>>>>> Perhaps true, but the SIP 100-rel state machine is profoundly ugly
>>>>> all by itself.
>>>>> =

>>>>>> =

>>>>>> And, eventhough we probably would be able to remove SDP from
>>>>>> provisional responses, I think provisional responses would still
>>>>>> be useful for other things (indicating ringing etc).
>>>>> Yes, and provisionals also impact the resend timers. We need them.
>>>>> We just don't need 100-rel.
>>>>> =

>>>>>> =

>>>>>> But, of course we could have instead have used something like
>>>>>> UPDATE (or even INFO) to indicate "ringing" etc, instead of
>>>>>> provisional responses.
>>>>>> =

>>>>>>> Think of it this way -- If I'm calling a PSTN gateway, do I
>>>>>>> really want to wait until the PSTN side connection completes
>>>>>>> before I do the setup work for SRTP? I think I'd rather get that
>>>>>>> out of the way before the called party answers, or before I even
>>>>>>> see early media coming back unprotected.
>>>>>> What prevents you from doing the SRTP negotiation using reliable
>>>>>> provisional responses, in the same way you are able to perform
>>>>>> preconditions before the called party answers?
>>>>> In my case, mostly the desire to avoid reliable provisional responses.
>>>>> =

>>>>> And when you cross-factor reliable provisional, SRTP, and forking,
>>>>> you get a real mess.
>>>>> =

>>>>>> =

>>>>>>> Now, lets think about forking. When we fork in a proxy, the UAC
>>>>>>> can only deal with one "best answer", and early media is
>>>>>>> anybody's guess as to how it might work or what might happen (it
>>>>>>> pretty much turns to soup, especially if you get multiple early med=
ia
>>>>>>> channels).
>>>>>> Correct. And, that will be a problem as long as it is possible for
>>>>>> the UAC to receive multiple early streams - no matter how they are
>>>>>> negotiated.
>>>>>> =

>>>>>>> Consider instead that a forking node is really a "forking
>>>>>>> gateway", not a proxy. It takes one call in, establishes a
>>>>>>> fully-negotiated "early session",  then sends out its multiple
>>>>>>> INVITES.  As those sessions (which might have early media)
>>>>>>> connect up, the forking gateway deals with the multiple media
>>>>>>> streams (by bridging, discarding, whatever).
>>>>>> Doesn't that simply move the
>>>>>> how-to-choose-which-early-media-stream-
>>>>>> to-listen-to from the UAC to the forking proxy/gateway?
>>>>> It allows the forking gateway to either mix all the streams into
>>>>> one (a boon to the bandwidth-restricted UAC), or more intelligently
>>>>> choose which one to relay based on media-analysis. For example,
>>>>> ringing can easily be differentiated from speech, so if a
>>>>> forking-b2bua sees four legs of ringing and one of speech, it could
>>>>> quite reasonably choose the speech channel to send back to the UAC.
>>>>> =

>>>>>> =

>>>>>>> When a forked session matures to a "regular session", the forking
>>>>>>> gateway can re-invite the UAC to >make that session a "regular
>>>>>>> session",
>>>>>> Today it does that again by sending 200 OK.
>>>>> Right -- assuming you did your media setup in provisional (and
>>>>> keying in reliable provisional, which is messy)
>>>>> =

>>>>>> Again, I agree that many things probably could be done in a
>>>>>> "cleaner" way, but I think the main problem still exists: if there
>>>>>> are multiple early media streams (due to forking proxy or forking
>>>>>> gateway), how do I choose which one to play?
>>>>>> =

>>>>> I'm not aware of a perfect asnwer, but (as above) can say there are
>>>>> definitely several "better" answers than what we have now.
>>>>> =

>>>>> =

>>>>>>> or can even arrange to drop itself out of the media path if needed.
>>>>>> How would that work? It would be able to change the local contact
>>>>>> from itself to the called party, but it would not be able to add
>>>>>> the possible Record-Routes between itself and the called user.
>>>>> Media path, not signaling. Fall back to 3PCC setup techniques on a
>>>>> reinvite sequence.
>>>>> =

>>>>>> Not being able to modify the signaling path during a session (read:
>>>>>> update the Record-Route) is a "bug" in the protocol, I think, but
>>>>>> it's a separate issue :)
>>>>>> =

>>>>> yeah, re-invite should be abele to re-route.
>>>>> =

>>>>> =

>>>>>>> If we have to have forking, and we have to have media before
>>>>>>> there's a final answer, then I think something like this is
>>>>>>> needed to make it work.
>>>>>> Again, it could make the signaling flows a little more nicer, and
>>>>>> it would move some decissions from the UAC to the forking gateway,
>>>>>> but the problem with multiple media streams (no matter whether you
>>>>>> call them early or not :) would still exist.
>>>>> Perhaps. However, one of the more profound problems today (as with
>>>>> mobile nets) is limited bandwidth to the UA. Dealing with mixing,
>>>>> recoding, and selection-from-alternatives in a "server" is much easie=
r.
>>>>> =

>>>>>> In my opinion, the only solution, using what we have today, is to
>>>>>> make sure there is only one early media stream sent.
>>>>> Yep. That's quite true. It's also very difficult, if anything forks.
>>>>> Our greatest power is our greatest problem.
>>>>> =

>>>>> --
>>>>> Dean
>>>>> =

>>>>> =

>>>>> _______________________________________________
>>>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>>>> This list is for NEW development of the core SIP Protocol Use
>>>>> sip-implementors@cs.columbia.edu for questions on current sip Use
>>>>> sipping@ietf.org for new developments on the application of sip
>>>> =

>>> =

>>> _______________________________________________
>>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol Use
>>> sip-implementors@cs.columbia.edu for questions on current sip Use
>>> sipping@ietf.org for new developments on the application of sip
>>> =

> =


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug 26 14:54:37 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 0E44128C266;
	Tue, 26 Aug 2008 14:54:37 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C59E228C25D
	for <sip@core3.amsl.com>; Tue, 26 Aug 2008 14:54:35 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.571
X-Spam-Level: 
X-Spam-Status: No, score=0.571 tagged_above=-999 required=5 tests=[AWL=-1.044, 
	BAYES_40=-0.185, J_CHICKENPOX_45=0.6, J_CHICKENPOX_56=0.6,
	J_CHICKENPOX_57=0.6]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id U0NDlHYjKCsU for <sip@core3.amsl.com>;
	Tue, 26 Aug 2008 14:54:32 -0700 (PDT)
Received: from romeo.rtfm.com (romeo.rtfm.com [74.95.2.173])
	by core3.amsl.com (Postfix) with ESMTP id A26AC3A6C21
	for <sip@ietf.org>; Tue, 26 Aug 2008 14:54:32 -0700 (PDT)
Received: from romeo.rtfm.com (localhost.rtfm.com [127.0.0.1])
	by romeo.rtfm.com (Postfix) with ESMTP id 568BE50846
	for <sip@ietf.org>; Tue, 26 Aug 2008 15:05:39 -0700 (PDT)
Date: Tue, 26 Aug 2008 15:05:39 -0700
From: Eric Rescorla <ekr@networkresonance.com>
To: sip@ietf.org
User-Agent: Wanderlust/2.14.0 (Africa) Emacs/21.3 Mule/5.0 (SAKAKI)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Message-Id: <20080826220539.568BE50846@romeo.rtfm.com>
Subject: [Sip] New version of draft-ietf-sip-dtls-srtp-framework
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

I just submitted a new version of this document intended to address
the WGLC comments. Attached below are the dispositions of the
comments I received. Please let me know if I've screwed anything
up.

-Ekr

John Elwell:
> This is in good shape - just a bunch of minor comments.
> 
> 1. "The Real-time Transport Protocol (RTP) [RFC3550] is used
>    to transmit real time media on top of UDP and TCP [RFC4571].
>    Datagram TLS [RFC4347] was introduced to allow TLS functionality to
>    be applied to datagram transport protocols, such as UDP and DCCP.
>    This draft provides guidelines on how to establish SRTP [RFC3711]
>    security using an extension to DTLS (see [I-D.ietf-avt-dtls-srtp])."
> This first says that RTP can be used on top of UDP and TCP, but then
> says that this draft addresses the use of DTLS for establishing SRTP.
> DTLS is applicable only when SRTP is carried over UDP, not TCP. This
> should be made clear, e.g.,
> "...guidelines on how to establish SRTP [RFC3711] security over UDP..."

Done.


> 2. "S/MIME
>    signatures, as described in RFC 3261, or SIP Identity, as described
>    in [RFC4474] provides the highest level of security because they are
>    not susceptible to modification by malicious intermediaries."
> Also there are other places in the draft that mention S/MIME, including
> section 8.3. In the SIP session at IETF72 there was discussion about
> deprecating S/MIME in SIP. If this is the intent of the WG, is it wise
> to mention the technique in new RFCs?

I think I'd prefer to leave this in here. S/MIME hasn't been deprecated
yet, and it's add to not mention something that after all is in 
RFC 3261 and would get the job done.


> 3. "The SIP message
>    containing the offer SHOULD be sent to the offerer's sip proxy over
>    an integrity protected channel which SHOULD add an identity header
>    according to the procedures outlined in [RFC4474]. "
> It is the proxy, not the channel, that should add the Identity header
> field. Also some other nits. Change to:
> "The endpoint SHOULD send the SIP message
>    containing the offer to the offerer's sip proxy over
>    an integrity protected channel. The proxy SHOULD add an Identity
> header field
>    according to the procedures outlined in [RFC4474]."

Done.


> 4. "The far endpoint (answerer) may now establish a mutually
>    authenticated DTLS association to the offerer."
> This assumes that the far endpoint will play the active role. However,
> that is not necessarily so, and will depend what is negotiated in SDP.

Fixed.


> 5. "DTLS-SRTP does not provide anonymous calling."
> Should this say:
> "DTLS-SRTP does not prevent anonymous calling."?

No, but I agree it's unclear. I rewrote as

        The use of DTLS-SRTP does not provide anonymous calling,
	however it also does not prevent it.



> 6. "Additionally, it MUST be ensured that the Privacy header [RFC3325]
> is
>    used in conjunction with the SIP identity mechanism to ensure that
>    the identity of the user is not asserted when enabling anonymous
>    calls."
> In fact 3325 does not define the Privacy header field - it only defines
> the additional value 'id'. Suggest we say:
> "Additionally, it MUST be ensured that the Privacy header field with
> value 'id' [RFC3325]...."
> I don't know whether we also need a reference to RFC 3323, in which case
> it would become:
> "Additionally, it MUST be ensured that the Privacy header field
> [RFC3323] with value 'id' [RFC3325]....".

Fixed.


> 7. Should section 6.1 on anonymous calls have an informative reference
> to the ua-privacy draft?

Added.


> 8. "Each answerer will create a DTLS association with
>    the offerer."
> It is not necessarily the case that the answerer will create the
> association - it could also be the offerer.

s/create/form/


> 9. "Once the answer is received, the active endpoint
>    will either reuse the existing association or establish a new one,
>    tearing down the existing association as soon as the offer/answer
>    exchange is completed."
> If the answerer is the active endpoint, how can it determine that the
> offer/answer exchange is completed, i.e., how does it know the offerer
> has received the answer?

Yeeah, that is weird. I think I fixed that.


> 10. "Note
>    that this may mean adjusting the endpoint IP addresses if the
>    selected candidate pair shifts, just as if the DTLS packets were an
>    ordinary media stream."
> What is the impact on the in-progress or completed DTLS handshake if
> there is a shift of IP address?

None. DTLS does not care about IP addresses as long as it gets 
the data it needs.


> 11. "Implementations of this specification SHOULD support DTLS-SRTP
>    [I-D.ietf-avt-dtls-srtp]."
> I thought the whole draft was about DTLS-SRTP. Therefore why is this
> only SHOULD strength? Under what circumstances are exceptions allowed?
> What are the alternatives to be used in these exceptional circumstances?

It should say MUST. It does now.


> 12. "Also note
>       that there is a fingerprint attribute on the 'c' line of the SDP."
> An attribute is a separate line, not part of a c-line.

Fixed.


> 13. "This is computed from Bob's self-signed certificate."
> That is true for the answer, but for the offer it is from Alice's
> certificate.

Doh!


> 14. "a=tcap:1 UDP/TLS/RTP/AVP RTP/AVP"
> Shouldn't this be:
> "a=tcap:1 UDP/TLS/RTP/SAVP RTP/AVP"

Done.


> 15. "Message 3 shows Bob
>       sending a DTLS ClientHello directly to Alice for each 'm' line in
>       the SDP.  In this case two DTLS ClientHello messages are sent to
>       Alice.  Bob sends a DTLS ClientHello to 192.168.1.103:6056 for RTP
>       and another to port 6057 for RTCP."
> The figure does not show two ClientHello messages, but it should do.
> This would then make the first sentence above wrong - it would be two
> per 'm'line, not one per 'm' line. It is only one per 'm' line if
> RTP/RTCP mux is used.

I fixed this by rewriting the text, not the figure.


> 16. "Note that in this case, Bob signals the actual transport protocol
>       configuration of SRTP over DTLS in the acfg parameter."
> This appears under message 9 (RTP/RTCP), but really it should occur
> under message 8 (200 OK).

Fixed.


> 17. "When phone number URIs (e.g.,
>       'sip:+17005551008@chicago.example.com') are used, there is no
>       structural reason to trust that the domain name is authoritative
>       for a given phone number, although individual proxies and UAs may
>       have private arrangements that allow them to trust other domains."
> This might suggest that the problem exists only when user=phone is
> absent, whereas it exists also (more particularly so) when user=phone is
> present. It might be better to say:
> "When phone number URIs (e.g.,
>       'sip:+17005551008@chicago.example.com' or
> 'sip:+17005551008@chicago.example.com;user=phone') are used...."

Done.


> NITS:
> - Change "media plan" to "media plane".
> - "in Enhancements for Authenticated Identity
>    Management in SIP [RFC4474] is used" - delete "in".
> - "SIP proxies downstream of the identity service" change to "SIP
> proxies downstream of the authentication service"
> - "Since the identity header is a
>    digital signature across several SIP headers, in addition to the
>    bodies of the SIP message, "
> This contains several instances of wrong terminology. "identity header"
> should be "Identity header field. "SIP headers" should be "SIP header
> fields", and "bodies" should be "body". A SIP message has a single
> header (comprising header fields) and a single body (perhaps containing
> multiple body parts). Similar corrections are needed throughout the
> document.

I think I got all these.


> - "upon receiving the other side's then"
> I think this should say:
> "upon receiving the other side's SDP then"

Done.

> - "and key negotiation succeeds otherwise RTP is used"
> Change to:
> "and key negotiation succeeds, otherwise RTP is used"

Done.

> - "RTP is the
>    default and will be understood by endpoints that do not understand
>    SRTP or this key exchange mechanism but SRTP is preferred."
> Change to:
> "This allows an offerer to express a preference for SRTP, but RTP is the
>    default and will be understood by endpoints that do not understand
>    SRTP or this key exchange mechanism.

Done.

"
> - "Answerers SHOULD use this UPDATE mechanisms."
> Change "mechanisms" to "mechanism".
> - "the assurances of DTLS-SRTP provides "
> Change to:
> "the assurances that DTLS-SRTP provides"
                ^^^^

Done.


John





Hannes Tschofenig:
> A few random comments:


>    The fingerprint alone protects against active attacks on the media
>    but not active attacks on the signalling.  In order to prevent active
>    attacks on the signalling, in Enhancements for Authenticated Identity
>    Management in SIP [RFC4474] is used.
> 
> I believe we should indicate that SIP Identity >>may<< be used.

Done.


>   When Bob receives the offer,
>    Bob establishes a mutually authenticated DTLS connection with Alice.
> 
> It is not really mutually authenticated at this point in time. 
> Something like
> "
>   When Bob receives the offer,
>    Bob initiates a DTLS exchange with Alice.
> "
> 
>    At this point Bob can begin sending media to Alice.  Once Bob accepts
>    Alice's offer and sends an SDP answer to Alice, Alice can begin
>    sending confidential media to Bob.

I rewrote this a little differently.


> 
> We would have to assume symmetric RTP (which is only recommended by
> draft-ietf-avt-dtls-srtp) here to allow Alice to send media immediately
> after the DTLS handshake. Otherwise we may need another DTLS handshake
> before Alice can send media to Bob. 

I think the new text covers this.


> I was actually wondering why not to mandate symmetric RTP given that the
> number of exchanges are much lower. 

the consensus in AVT was not to do so.

>  Alice and Bob will verify the
>    fingerprints from the certificates received over the DTLS handshakes
>    match with the fingerprints received in the SDP of the SIP signaling.
>    This provides the security property that Alice knows that the media
>    traffic is going to Bob and vice-versa without necessarily requiring
>    global PKI certificates for Alice and Bob.
> 
> 
>    o  When RFC 4474 Identity is used, this solution works even when the
>       SIP proxies downstream of the identity service are not trusted.
> 
> We could provide a pointer to the security considerations section,
> namely Section 8.6. 

I provided a pointer.


> A pointer to RFC 4916 ("Connected Identity"), even though I do not
> consider it as too important based on the scenarios it addresses, would
> not hurt here. 
> Maybe something like would help:
> "Retargeting of a dialog-forming request (changing the value of the
> Request-URI), the UA that receives
>    it (the User Agent Server, UAS) can have a different identity from
>    that in the To header field. When RFC 4916 is used then it is
> possible to supply its identity to the peer UA by means of a request in
> the
>    reverse direction, and for that identity to be signed by an
>    Authentication Service. 
> "

Added.


>       There is no need to reveal keys in the SIP signaling or in the SDP
>       message exchange.  In order for SDES and MIKEY to provide this
>       security property, they require distribution of certificates to
>       the endpoints that are signed by well known certificate
>       authorities.
> 
> 
> I believe we should delete the last sentence since we provide a detailed
> discussion of SDES and MIKEY in the media security requirements
> document. 
> 
Removed.

> Section 5
> 
>    The far endpoint (answerer) may now establish a mutually
>    authenticated DTLS association to the offerer. 
> 
> 
> The same comment from above applies since at this stage there two end
> points aren't mutually authenticated yet. 
> 
> 
>    o  If the fingerprint does not match the hashed certificate then the
>       endpoint MUST tear down the media session immediately.
> 
> Tentatively establishing a session and tearing it down if the
> fingerprint doesn't match is one possible strategy. Alternatively, the
> offerer could wait for an answer with the fingerprint and subsequently
> execute the DTLS handshake and cancel the handshake and the session
> establishment immediately if the cert used in the handshake does not
> match the fingerprint.

I added some material.


> This would obviously delay the establishment of the secure channel.
> Particularly for early media this would mean that media is unprotected.
> Early media will, however, be tough anyway. 
> 
> I don't have a strong opinion on the two approaches but I believe we
> should mention the DoS potential in the security consideration section. 

I don't see that there is any signifciant DoS potential. Can you
provide some text?




> 6.5.  Session Modification
> 
>    Once an answer is provided to the offerer, either endpoint MAY
>    request a session modification which MAY include an updated offer.
>    This session modification can be carried in either an INVITE or
>    UPDATE request.  Once the answer is received, the active endpoint
>    will either reuse the existing association or establish a new one,
>    tearing down the existing association as soon as the offer/answer
>    exchange is completed.
> 
> 
> I think we need to differentiate the case where the SDP changes only
> slightly, for example, a change in codec vs. the case where, for
> example, an IP address changes. 
> Hence, in some cases creating a new association might not even be
> possible. 

I added some text.


> Section 7:
> 
>    The SIP signaling from Alice to her proxy is transported over TLS to
>    ensure an integrity protected channel between Alice and her identity
>    service.  Note that all other signaling is transported over TCP in
>    this example although it could be done over any supported transport.
> 
> I guess we should also say that the communication between the SIP
> proxies is protected someone, specifically when SIP Identity (or other
> security mechanisms) is not available. 

I added some text.


>       This shows the initial INVITE from Alice to Bob carried over the
>       TLS transport protocol to ensure an integrity protected channel
>       between Alice and her proxy which acts as Alice's identity
>       service.  Note that Alice has requested to be either the active or
>       passive endpoint by specifying a=setup:actpass.  Bob chooses to
>       act as the DTLS server and will initiate the session.  Also note
>       that there is a fingerprint attribute on the 'c' line of the SDP.
>       This is computed from Bob's self-signed certificate.
> 
> Shouldn't this be Alice's self-signed cert, as shown in the subsequent
> exchange. 

Fixed.


>       At this point, Bob can begin sending early media (RTP and RTCP) to
>       Alice.  Note that Alice can't yet trust the media since the
>       fingerprint has not yet been received.  This lack of trusted,
>       secure media is indicated to Alice.
> 
> At the last sentence we should indicate that this indication is part of
> the user interface rather than something that is meant to be part of the
> protocol exchange. 

Fixed.

> Section 8: Security Considerations
> 
> 
> Other mechanisms, such as the S/MIME mechanism described
>    in RFC 3261, or the mechanisms described in
>    [I-D.wing-sip-identity-media] or [I-D.fischer-sip-e2e-sec-media],
>    could also serve this purpose.
> 
> 
> I believe we should just mention S/MIME and SIP CERT rather than
> individual drafts that may not go anywhere. 

I've removed this, but I have no strong position so I'll put it back in
if people object.


> Section 8.2: 
> 
> 
> This sentence is a bit tough to read:
> 
>   If SIP Identity is not used, but the signaling is protected by SIPS,
>    the security guarantees are weaker, but some security is still
>    provided as long as all proxies are trusted, this provides integrity
>    for the fingerprint.
> 
> 
> Suggest to break it into 3 sentences:
> 
>  If SIP Identity is not used, but the signaling is protected by SIPS,
>    the security guarantees are weaker. Some security is still
>    provided as long as all proxies are trusted. This provides integrity
>    for the fingerprint in a chain-of-trust security model. 

Done.


> It does not provide a strong assertion of who
>    Alice is communicating with.  However, as much as the target domain
>    can be trusted to correctly populate the From header field value,
>    Alice can use that.  The security issue with this approach is that if
>    one of the Proxies wished to mount a man-in-the-middle attack, it
>    could convince Alice that she was talking to Bob when really the
>    media was flowing through a man in the middle media relay.  However,
>    this attack could not convince Bob that he was taking to Alice.
> 
> 
> I believe that this last paragraph does not provide a lot of value given
> that SIPS fits into the chain of trust security model and hence, by
> definition, you have to trust the proxies. If the proxies are, for some
> reason, not trustworthy anymore than there is a problem. 

 I trimmed this down quite a bit.


> 8.3.  S/MIME
> 
> 
> I would delete the last sentence from that section, namely 
> "
>  However, so far there have been no deployments of S/MIME
>  for SIP.
> "
> 
> Reason: The problem is not really S/MIME as such. The problem is how to
> distribute the certificates. This problem has, however, been tackeled
> with SIP CERT and hence the situation may look different in a few years.
> Additionally, one could argue of lack of deployment of other security
> mechanisms as well. 

Removed.

> 8.5.  Short Authentication String
> 
> DTLS does not natively support
>    this mode, however it would be straightforward to add one as a TLS
>    extension [RFC3546].
> 
> I would delete the term "straightforward" and say something like
> "
>    DTLS does not natively support
>    this mode. Based on the level of deployment interest a TLS
>    extension [RFC3546] could provide support for it. 
> "
> 
> Reason: There has not been a lot of interest in this mechanism lately.
> Hence, I am not sure whether there is actually a lot interest from the
> community. 

Done.


> Additionally, it might be useful to indicate that this mechanism only
> helps when you actually know the person's voice. This fits to some
> communication patters. When you know your communication partners already
> out-of-band then things are a lot easier anyway. 
> For those cases where this is not true things get more complicated. For
> example, how do I know that I talk to a person at my bank, insurance
> company, car dealer, travel agency, help desk, etc.? One may not know
> the voice of these folks. 

Added some material.


> Appendix A:
> 
> A.4.  Clipping (R-AVOID-CLIPPING)
> 
>    Because the key establishment occurs in the media plane, media need
>    not be clipped before the receipt of the SDP answer.
> 
> 
> I believe we should indicate that in this case the early media is not
> secured.

That's not 100% accurate. I've added clarifying text.


> A.7.  (R-SIG-MEDIA, R-ACT-ACT)
> 
> 
> It might be good to indicate that the interaction between the UA and the
> authentication service needs to be secured as well and that the
> authentication service is responsible for executing proper
> authentication of the user. 

Done.


> A.8.  Binding to Identifiers (R-ID-BINDING)
> 
> We should weaken the language a bit to indicate that other mechanisms,
> such as SIP CERT and S/MIME may also be used and not only SIP Identity. 

Done.


> A.11.  RTP Validity Check (R-RTP-VALID)
> 
> We should also mention STUN packets by referencing Section 5.1.2 of
> http://tools.ietf.org/html/draft-ietf-avt-dtls-srtp-03

Done.


> A.15.  Denial of Service Vulnerability (R-DOS)
> 
>    DTLS offers some degree of DoS protection particuarly as a built-in
>    feature.
> 
> 
> 
> A.16 is already covered by A.7. I would delete it. 


Done.


> A.18: Maybe we should add one more sentence: "RFC 4474 is able to
> prevent an active attacker on the signalling path to downgrade the call
> from SRTP to RTP."

Done.


> A.22.  Interworking with Intermediaries (R-TRANSCODER)
> 
> "
>    A description of the interworking with Session Border Controllers is
>    described in this document.
> "
> 
> The interworking with SBCs is covered in 
> http://www.ietf.org/internet-drafts/draft-ietf-mmusic-media-path-middleb
> oxes-01.txt
> 
> However, as the text of interworking is written in
> http://www.ietf.org/internet-drafts/draft-ietf-sip-media-security-requir
> ements-07.txt
> the transcoder needs to have access to the keying material and therefore
> the description from A.21 on media recording (and key disclosure) is
> applicable here as well. 


I added a short amount of text.


> A.23.  PSTN Gateway Termination (R-PSTN)
> 
>    The DTLS-SRTP framework allows the media security to terminate at a
>    PSTN gateway.  This does not provide end-to-end security, but is
>    consistent with the security goals of this framework because the
>    gateway is authorized to speak for the PSTN namespace.
> 
> 
> There are several scenarios that would have to be discussed in this
> context; they are described in Section 3 of
> draft-schwartz-sip-e164-ownership-01.txt, namely 
> * IP-IP Case (not relevant to Section A.23 although E.164 numbers are
> used).
> * IP-PSTN-IP Case
> * PSTN-to-IP Case
> * IP-to-PSTN Case
> 
> The problems are slightly different for each of these cases. However, as
> most folks would probably agree the security of all these cases is
> rather weak (or at least unpredictable). 
> 
> I wonder how to best treat this subject but it may not hurt to describe
> the issues in more detail in the appendix. Text is already available --
> hence it would be more of a copy-and-paste operation. 

I think this is actually contentious enough that I'd rather not
get into it, since this is just about media-security-requirements
compliance.


> There are two requirements that have not been discussed: R-ALLOW-RTP and
> R-HERFP.
> 
> "R-ALLOW-RTP: DTLS-SRTP allows RTP media to be received by the calling
> party until SRTP has been negotiated with the answerer, after which SRTP
> is preferred over RTP.
> "
> 
> Here is first try:
> "
> R-HERFP: The Heterogeneous Error Response Forking Problem (HERFP) is not
> applicable to DTLS-SRTP since the key exchange protocol will be executed
> along the media path and hence error messages are communicated along
> this path and proxies do not need to progress them.
 "

I added this text.



Dan Wing:
> > From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of Dean
> Willis
> > Sent: Wednesday, July 23, 2008 1:26 AM
> > To: SIP IETF
> > Cc: Cullen Jennings
> > Subject: [Sip] WGLC on DTLS Framework draft-ietf-sip-dtls-srtp-framework-02
> >
> >
> > I'm happy to announce a Working Group Last Call on the 
> > standards-track DTLS Framework document:
> > 
> >
> http://www.ietf.org/internet-drafts/draft-ietf-sip-dtls-srtp-framework-02.txt
> >
> > I'd like to conclude this WGLC by Friday, August 8, 2008.
> >
> > Please review the document and send any comments to the list and  
> > author Eric Rescorla.
> 
> I'm happy to see this finally WGLC'd, too!
> 
> 
> 
> Overall:
> 
> The framework document needs to require endpoints send and
> receive ietf-mmusic-sdp-capability-negotiation.  Without support
> for that draft, many of the media security requirements cannot be 
> met (as mentioned in A.1 of draft-ietf-sip-dtls-srtp-framework-02).
> ietf-mmusic-sdp-capability-negotiation should be promoted
> to a normative requirement, and should be required (MUST) for 
> endpoints to support in order to adhere to the DTLS-SRTP framework.  
> Otherwise, we are hosed for forking and hosed for retargeting.

Agreed. Added.



> Section 1, Introduction:
> 
>    However, even hop-by-hop security such as provided by SIPS provides
>    some protection against modification by attackers who are not on the
>    signalling path.
> 
> With or without SIPS, if the attacker is off the signalling path, the
> attacker has little hope of doing much damage -- they need to 
> guess a lot of SDP values and guess a bunch of SIP values (call-id)
> in order to be successful.
> 
> So, I would replace the last phrase with:
> 
> "... who are not in control of on-path signaling elements."
> 
> resulting in:
> 
>    However, even hop-by-hop security such as provided by SIPS provides
>    some protection against modification by attackers who are not in 
>    control of on-path signaling elements."

Done.


> Section 5, Exchanging Certificates:
> 
> (the text exceeds the section title when it goes beyond just what 
> happens with certificate exchange; perhaps consider re-titling).
> 
> My slightly more substantive comment is:
> 
>   The answerer SHOULD use the setup	attribute value of 
>   setup:active and will send the client_hello in the media path."
>                    ^^^^
>                    MUST

Refined to match your comments and Peter's.


> Section 6.6, "ICE Interaction":
> 
>    ...
>    If ICE is not being used, then there is potential for a bad
>    interaction with SBCs via "latching", as described in
>    [I-D.ietf-mmusic-media-path-middleboxes].  In order to avoid this
>    issue, if ICE is not being used and the DTLS handshake has not
>    completed, upon receiving the other side's then the passive side MUST
>                                              ^
>                                             SDP
> 
>    do a single unauthenticated STUN [I-D.ietf-behave-rfc3489bis]
>    connectivity check in order to open up the appropriate pinhole. 
> 
> 
> Requirements to do something when ICE is *not* being used should not be in a
> section titled "ICE Interaction".  I would move this paragraph describing how
> to handle SBC 'latching' to its own section perhaps titled "SBC Interaction".

Done.


> Section 8.6,
> 
>    o When phone number URIs (e.g., 
>      'sip:+17005551008@chicago.example.com') are used, 
> 
> I believe the current consensus is that a phone number would include
> ;user=phone, so the example should be
> sip:+17005551008@chicago.example.com;user=phone

Done


> Section 8.6, "Limits of Identity Assertions"
> 
> (This section is well written.)
> 
> 
>    Implementors should therefore take care not to indicate
>    misleading peer identity information in the user interface. e.g.  If
>                                                              ^^^^^^
>                                                formatting error around here
>    the peer's identity is sip:+17005551008@chicago.example.com, it is
>    not sufficient to display that the identity of the peer as
>    +17005551008, unless there is some policy that states that the domain
>    "chicago.example.com" is trusted to assert E.164 numbers. 
> 
> chicago.example.com only needs to be trusted to assert numbers you trust
> it to assert -- not a blanked "to assert E.164 numbers".  For example,
> I might trust, and expect, Verizon to claim E.164s that it owns, but
> I do not trust, nor expect, Verizon to claim an E.164 with a +353
> country code.
> 
> I would revise the above to end with something like:
> 
>    ... unless there is some policy that states that the domain
>    "chicago.example.com" is trusted to assert the E.164 number
>    is it asserting.
>    ^^^^^^^^^^^^^^^

Done.


> later,
> 
>    Otherwise, the recipient cannot rely on the RFC 4474 Identity
>    assertion and the UA MUST not indicate to the user that a secure call
>                         ^^^^^^^^
>                         MUST NOT
>    has been established to the claimed identity.  Implementations which
>    are configured to only establish secure calls SHOULD terminate the
>    call in this case.

Done.


> Section A.3:  
> 
> 
> add a reference to draft-ietf-avt-dtls-srtp-03.txt
> which describes how session resumption is supposed to be
> implemented.

Done.

> 
> Section A.12., "3rd Party Certificates (R-CERTS, R-EXISTING)"
> 
>    Third party certificates are not required.  However, if the parties
>    share an authentication infrastructure that is compatible with TLS
>    (3rd party certificates or shared keys) it can be used.
> 
> 
> RFC4474 is part of the framework for securing DTLS-SRTP, and
> as you know there is a lot of consternation around this point.
> Citing section 13.4 of RFC4474 would be helpful, because section
> A.12 of sip-dtls-srtp-framework relies on the following small 
> sentence in Section 13.4 of RFC4474:
> 
>    It
>    is strongly RECOMMENDED that self-signed domain certificates should
>    not be trusted by verifiers, unless some previous key exchange has
>                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>    justified such trust.
>    ^^^^^^^^^^^^^^^^^^^^

I added a reference.


> Section A.15, Denial of Service Vulnerability (R-DOS)
> 
> Please add a reference to Section 4.2.1 of RFC4347.

Done.

> 
> Section A.18., "Downgrading Protection (R-DOWNGRADE)"
> 
>    DTLS provides protection against downgrading attacks since the
>    selection of the offered ciphersuites is confirmed in a later stage
>    of the handshake.  This protection is efficient unless an adversary
>    is able to break a ciphersuite in real-time.
> 
> This should also mention integrity protection of signaling is 
> necessary in order to prevent downgrade to RTP (because I believe
> we need to require sdp-capability-negotiation for all of this to
> work correctly.)

Agreed.  added some text per this and Hannes's comments.




> Peter Schneider:
> 
> 
> 1) The draft currently states in section 5:
> 
> "     The endpoint MUST use the setup attribute defined in [RFC4145].
>      The endpoint which is the offerer MUST use the setup attribute
>      value of setup:actpass and be prepared to receive a client_hello
>      before it receives the answer.  The answerer SHOULD use the setup
>      attribute value of setup:active and will send the client_hello in
>      the media path."
> 
> My proposal is to replace the last sentence by "The answerer MUST use
> the setup
> attribute value of setup:active or the setup attribute value of
> setup:passive."

I set this to MUST use both but with active as recommended.

        The answerer MUST use either a setup attribute value of
	setup:active or setup:passive. Note that if the answerer uses
	setup:passive, then the DTLS handshake will not begin until
	the answerer is received, which adds additional
	latency. setup:active allows the answer and the DTLS handshake
	to occur in parallel. Thus, setup:active is RECOMMENDED.  The
	active party MUST send the ClientHello in the media path.

I think this is the best compromise. There's really no advantage
to being passive.


> With this, if the receiver takes up the active role, as recommended in
> the original text, he can start the handshake and if the handshake has
> been carried out successfully before the SDP answer, he can send
> encrypted early media (before the SDP answer). Obviously, with the usage
> of self signed certificates, the offerer can authenticate the origin of
> the early media only retrospectively, after he has received the SDP
> answer, which somewhat reduces the value of encrypting the early media.
> Early media as well as a handshake at that point in time will however
> not work in an environment, where middleboxes are present that will not
> let traffic pass in the media plane before the answer has been sent.
> 
> So if the receiver assumes such an environment, he may decide to take up
> the passive role. By this, the offerer will start the handshake as soon
> as he receives an answer, which would typically be close to the first
> point in time at which the handshake messages will be able to pass the
> middleboxes.
> 
> I feel it's quite reasonable to do the handshake after offer and answer
> have been exchanged, because the offerer can check the fingerprint of
> the certificate received in the handshake immediately; and he will not
> accept encrypted media that may be sent by an attacker. So he is less
> vulnerable to DoS. This does not allow encrypted early media to be
> received, but is this so essential? In fact, accepting only encrypted
> early media could be harmful, as it would prevent a caller to receive
> e.g. an announcement that is sent by some server in the network that
> only sends unsensitive announcements and therefore does not support
> encryption at all.

I think this is covered in the security considerations section.

I don't really understand what DoS issue you're concerned about.



> 2) With respect to unmanaged (e.g. residential) stateful firewalls the
> draft currently states in section 6.6 that if ICE is not used and the
> handshake could not be completed (until offer and answer have been
> exchanged)
> 
>  "the passive side MUST
>   do a single unauthenticated STUN [I-D.ietf-behave-rfc3489bis]
>   connectivity check in order to open up the appropriate pinhole.  All
>   implementations MUST be prepared to answer this request during the
>   handshake period even if they do not otherwise do ICE."
> 
> And later, in the message flow on page 13 and the respective
> explanations it becomes obvious that the idea is that the sender of this
> STUN connectivity check in fact waits for an answer before he proceeds

That's not intended at all. They're done in parallel.


> (although implementations must only *be prepared* to answer a
> connectivity request - I wonder whether "be prepared" should rather be
> removed from this sentence). However, if there are middleboxes on the
> path that block the STUN connectivity check, an answer will never come,
> although the purpose of the connectivity check - to establish a session
> in the residential firewall and open it up for incoming traffic - may
> already have been achieved.
> 
> So instead of making the sending of the STUN connectivity check
> mandatory in this situation, I propose rather to recommend that the
> passive UA in the connection setup should try to make sure that a
> firewall protecting the UA does not block the client hello starting the
> handshake. This could be done by STUN or other means. This is exactly
> what is recommended also in draft-ietf-mmusic-media-path-middleboxes-01,
> section 7, REC #1.

I think IETF general policy is to prefer ICE, which is what you
would do here. This is a stopgap.


> 3) More generally, I propose that the draft should mention possible
> problems with middleboxes, and should advise implementors to follow the
> recommendations in draft-ietf-mmusic-media-path-middleboxes.

I don't want to create a normative reference, but I added a
section that points at that and states it has recommendations.

  
> 4) Concerning the possible sequence of messages used to establish
> sessions that use DTLS-SRTP, the draft IMO should give clearer
> recommendations. This is currently mostly treated in the section
> "example message flow", which indeed explains two flows currently. It is
> unclear, to which degree this is normative, and what variants of such
> flows would also be considered compliant to the draft.

I went through and tried to add some clarifying text where I thought 
appropriate. That said, since TLS allows inband negotiation and
there is some inherent reordering due to the use of multiple parallel
flows, a lot of different variants are legal. Is there some particular
point you want clarified?


> 5) Another topic where information is only given in the example flows is
> the treatment of RTCP. If RTP/RTCP multiplexing on a single port is not
> used, at which time should the handshake for RTCP be done - immediately
> after the handshake for RTP, so that sender reports could be sent for
> early media? Or only after the SDP answer, when both sides know which
> ports are used on both sides? This becomes even more complex, if
> non-symmetric RTP/RTCP would be applied, which is not excluded in
> draft-ietf-avt-dtls-srtp-02.
> I propose to describe these issues in a dedicated section.

I added some text and referenced the AVT draft which talks about
the performance issues.

-Ekr

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Tue Aug 26 15:00:03 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 891133A6C08;
	Tue, 26 Aug 2008 15:00:03 -0700 (PDT)
X-Original-To: sip@ietf.org
Delivered-To: sip@core3.amsl.com
Received: by core3.amsl.com (Postfix, from userid 0)
	id ED9993A6C2C; Tue, 26 Aug 2008 15:00:01 -0700 (PDT)
From: Internet-Drafts@ietf.org
To: i-d-announce@ietf.org
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
Message-Id: <20080826220001.ED9993A6C2C@core3.amsl.com>
Date: Tue, 26 Aug 2008 15:00:01 -0700 (PDT)
Cc: sip@ietf.org
Subject: [Sip] I-D Action:draft-ietf-sip-dtls-srtp-framework-03.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.


	Title           : Framework for Establishing an SRTP Security Context using DTLS
	Author(s)       : J. Fischl, et al.
	Filename        : draft-ietf-sip-dtls-srtp-framework-03.txt
	Pages           : 34
	Date            : 2008-08-26

This document specifies how to use the Session Initiation Protocol
(SIP) to establish an Secure Real-time Transport Protocol (SRTP)
security context using the Datagram Transport Layer Security (DTLS)
protocol.  It describes a mechanism of transporting a fingerprint
attribute in the Session Description Protocol (SDP) that identifies
the key that will be presented during the DTLS handshake.  The key
exchange travels along the media path as opposed to the signaling
path.  The SIP Identity mechanism can be used to protect the
integrity of the fingerprint attribute from modification by
intermediate proxies.

A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-dtls-srtp-framework-03.txt

Internet-Drafts are also available by anonymous FTP at:
ftp://ftp.ietf.org/internet-drafts/

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Message/External-body;
	name="draft-ietf-sip-dtls-srtp-framework-03.txt";
	site="ftp.ietf.org";
	access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2008-08-26145044.I-D@ietf.org>


--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--


From sip-bounces@ietf.org  Wed Aug 27 03:45:10 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9FDF128C1E0;
	Wed, 27 Aug 2008 03:45:09 -0700 (PDT)
X-Original-To: sip@ietf.org
Delivered-To: sip@core3.amsl.com
Received: by core3.amsl.com (Postfix, from userid 0)
	id 766BA3A6C66; Wed, 27 Aug 2008 03:45:02 -0700 (PDT)
From: Internet-Drafts@ietf.org
To: i-d-announce@ietf.org
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
Message-Id: <20080827104502.766BA3A6C66@core3.amsl.com>
Date: Wed, 27 Aug 2008 03:45:02 -0700 (PDT)
Cc: sip@ietf.org
Subject: [Sip] I-D Action:draft-ietf-sip-199-01.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.


	Title           : Response Code for Indication of Terminated Dialog
	Author(s)       : C. Holmberg
	Filename        : draft-ietf-sip-199-01.txt
	Pages           : 11
	Date            : 2008-08-27

This specification defines a new SIP response code, 199 Early Dialog
Terminated, which a SIP entity can use to indicate upstream that an
early dialog has been terminated.  The response code can be used by a
SIP entity to indicate to the UAC that an early dialog has been
terminated, before a final response is sent to the UAC.

A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-199-01.txt

Internet-Drafts are also available by anonymous FTP at:
ftp://ftp.ietf.org/internet-drafts/

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Message/External-body;
	name="draft-ietf-sip-199-01.txt";
	site="ftp.ietf.org";
	access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2008-08-27034317.I-D@ietf.org>


--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--


From sip-bounces@ietf.org  Wed Aug 27 03:46:31 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E8E0328C1F1;
	Wed, 27 Aug 2008 03:46:30 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AF91128C1F3
	for <sip@core3.amsl.com>; Wed, 27 Aug 2008 03:46:29 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.527
X-Spam-Level: 
X-Spam-Status: No, score=-5.527 tagged_above=-999 required=5 tests=[AWL=0.722, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id p4RNaZfxSWvr for <sip@core3.amsl.com>;
	Wed, 27 Aug 2008 03:46:28 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 99A0B28C1EF
	for <sip@ietf.org>; Wed, 27 Aug 2008 03:46:28 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	5174F20868 for <sip@ietf.org>; Wed, 27 Aug 2008 12:46:29 +0200 (CEST)
X-AuditID: c1b4fb3c-ab8c9bb0000015b5-22-48b5308507fc
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	3137120DE9 for <sip@ietf.org>; Wed, 27 Aug 2008 12:46:29 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Aug 2008 12:45:27 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 27 Aug 2008 12:45:26 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF079F23C0@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: New version of draft-ietf-sip-199
Thread-Index: AckIMgQWGXdB8squQvmFOTY530kfvQ==
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "SIP IETF" <sip@ietf.org>
X-OriginalArrivalTime: 27 Aug 2008 10:45:27.0389 (UTC)
	FILETIME=[048398D0:01C90832]
X-Brightmail-Tracker: AAAAAA==
Subject: [Sip] New version of draft-ietf-sip-199
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi,

Based on a large number of good comments and suggestions off-line I have
produced and submitted a new version (-01) of the draft-ietf-sip-199
draft.

Until available, it can also be found at:

http://users.piuha.net/cholmber/drafts/draft-ietf-sip-199-01.txt

Some work is still needed on the security section.

I also realized that, in the reference section, I still refer to the
dialog-usage draft document, eventhough it became an RFC.

Regards,

Christer

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 27 03:48:02 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E44E928C20D;
	Wed, 27 Aug 2008 03:48:01 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 38F0B3A6842
	for <sip@core3.amsl.com>; Wed, 27 Aug 2008 03:48:01 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.617
X-Spam-Level: 
X-Spam-Status: No, score=-5.617 tagged_above=-999 required=5 tests=[AWL=0.632, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id f61Bd+2PswkE for <sip@core3.amsl.com>;
	Wed, 27 Aug 2008 03:48:00 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id CEA8B28C210
	for <sip@ietf.org>; Wed, 27 Aug 2008 03:47:05 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	244172079A for <sip@ietf.org>; Wed, 27 Aug 2008 12:47:04 +0200 (CEST)
X-AuditID: c1b4fb3c-aa8c7bb0000015b5-a7-48b530a8be87
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	0C6BF205A9 for <sip@ietf.org>; Wed, 27 Aug 2008 12:47:04 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Aug 2008 12:47:03 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 27 Aug 2008 12:47:03 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF079F23D2@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: New version of draft-ietf-sip-199
Thread-Index: AckIMgQWGXdB8squQvmFOTY530kfvQAAC4QA
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "SIP IETF" <sip@ietf.org>
X-OriginalArrivalTime: 27 Aug 2008 10:47:03.0855 (UTC)
	FILETIME=[3E0323F0:01C90832]
X-Brightmail-Tracker: AAAAAA==
Subject: Re: [Sip] New version of draft-ietf-sip-199
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

 
Actually, the reference section is correct :)

Regards,

Christer

-----Original Message-----
From: Christer Holmberg 
Sent: 27. elokuuta 2008 13:45
To: SIP IETF
Subject: New version of draft-ietf-sip-199


Hi,

Based on a large number of good comments and suggestions off-line I have
produced and submitted a new version (-01) of the draft-ietf-sip-199
draft.

Until available, it can also be found at:

http://users.piuha.net/cholmber/drafts/draft-ietf-sip-199-01.txt

Some work is still needed on the security section.

I also realized that, in the reference section, I still refer to the
dialog-usage draft document, eventhough it became an RFC.

Regards,

Christer

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 27 06:33:51 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 236A228C226;
	Wed, 27 Aug 2008 06:33:51 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1040E3A68EF
	for <sip@core3.amsl.com>; Wed, 27 Aug 2008 06:33:50 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.799
X-Spam-Level: 
X-Spam-Status: No, score=-0.799 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, J_CHICKENPOX_45=0.6, J_CHICKENPOX_56=0.6,
	J_CHICKENPOX_57=0.6]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JxM-T4dCO3W8 for <sip@core3.amsl.com>;
	Wed, 27 Aug 2008 06:33:47 -0700 (PDT)
Received: from mailgate.siemenscomms.co.uk (mailgate.siemenscomms.co.uk
	[195.171.110.225])
	by core3.amsl.com (Postfix) with ESMTP id 61EBC3A6970
	for <sip@ietf.org>; Wed, 27 Aug 2008 06:33:46 -0700 (PDT)
Received: from GBNTHT12009MSX.gb002.siemens.net ([137.223.219.235])
	by siemenscomms.co.uk (PMDF V6.3-x14 #31430)
	with ESMTP id <0K6900A65HMQ5C@siemenscomms.co.uk> for sip@ietf.org; Wed,
	27 Aug 2008 14:33:00 +0100 (BST)
Date: Wed, 27 Aug 2008 14:28:49 +0100
From: "Elwell, John" <john.elwell@siemens.com>
In-reply-to: <20080826220539.568BE50846@romeo.rtfm.com>
To: Eric Rescorla <ekr@networkresonance.com>, sip@ietf.org
Message-id: <0D5F89FAC29E2C41B98A6A762007F5D001046139@GBNTHT12009MSX.gb002.siemens.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: [Sip] New version of draft-ietf-sip-dtls-srtp-framework
Thread-Index: AckHxvGzeWaktK1JTky0j72UDzQqFAAgaJ3A
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <20080826220539.568BE50846@romeo.rtfm.com>
Subject: Re: [Sip] New version of draft-ietf-sip-dtls-srtp-framework
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Eric,

Thanks. The new draft takes care of my comments.

John 

> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On 
> Behalf Of Eric Rescorla
> Sent: 26 August 2008 23:06
> To: sip@ietf.org
> Subject: [Sip] New version of draft-ietf-sip-dtls-srtp-framework
> 
> I just submitted a new version of this document intended to address
> the WGLC comments. Attached below are the dispositions of the
> comments I received. Please let me know if I've screwed anything
> up.
> 
> -Ekr
> 
> John Elwell:
> > This is in good shape - just a bunch of minor comments.
> > 
> > 1. "The Real-time Transport Protocol (RTP) [RFC3550] is used
> >    to transmit real time media on top of UDP and TCP [RFC4571].
> >    Datagram TLS [RFC4347] was introduced to allow TLS 
> functionality to
> >    be applied to datagram transport protocols, such as UDP and DCCP.
> >    This draft provides guidelines on how to establish SRTP [RFC3711]
> >    security using an extension to DTLS (see 
> [I-D.ietf-avt-dtls-srtp])."
> > This first says that RTP can be used on top of UDP and TCP, but then
> > says that this draft addresses the use of DTLS for 
> establishing SRTP.
> > DTLS is applicable only when SRTP is carried over UDP, not TCP. This
> > should be made clear, e.g.,
> > "...guidelines on how to establish SRTP [RFC3711] security 
> over UDP..."
> 
> Done.
> 
> 
> > 2. "S/MIME
> >    signatures, as described in RFC 3261, or SIP Identity, 
> as described
> >    in [RFC4474] provides the highest level of security 
> because they are
> >    not susceptible to modification by malicious intermediaries."
> > Also there are other places in the draft that mention 
> S/MIME, including
> > section 8.3. In the SIP session at IETF72 there was discussion about
> > deprecating S/MIME in SIP. If this is the intent of the WG, 
> is it wise
> > to mention the technique in new RFCs?
> 
> I think I'd prefer to leave this in here. S/MIME hasn't been 
> deprecated
> yet, and it's add to not mention something that after all is in 
> RFC 3261 and would get the job done.
> 
> 
> > 3. "The SIP message
> >    containing the offer SHOULD be sent to the offerer's sip 
> proxy over
> >    an integrity protected channel which SHOULD add an 
> identity header
> >    according to the procedures outlined in [RFC4474]. "
> > It is the proxy, not the channel, that should add the 
> Identity header
> > field. Also some other nits. Change to:
> > "The endpoint SHOULD send the SIP message
> >    containing the offer to the offerer's sip proxy over
> >    an integrity protected channel. The proxy SHOULD add an Identity
> > header field
> >    according to the procedures outlined in [RFC4474]."
> 
> Done.
> 
> 
> > 4. "The far endpoint (answerer) may now establish a mutually
> >    authenticated DTLS association to the offerer."
> > This assumes that the far endpoint will play the active 
> role. However,
> > that is not necessarily so, and will depend what is 
> negotiated in SDP.
> 
> Fixed.
> 
> 
> > 5. "DTLS-SRTP does not provide anonymous calling."
> > Should this say:
> > "DTLS-SRTP does not prevent anonymous calling."?
> 
> No, but I agree it's unclear. I rewrote as
> 
>         The use of DTLS-SRTP does not provide anonymous calling,
> 	however it also does not prevent it.
> 
> 
> 
> > 6. "Additionally, it MUST be ensured that the Privacy 
> header [RFC3325]
> > is
> >    used in conjunction with the SIP identity mechanism to 
> ensure that
> >    the identity of the user is not asserted when enabling anonymous
> >    calls."
> > In fact 3325 does not define the Privacy header field - it 
> only defines
> > the additional value 'id'. Suggest we say:
> > "Additionally, it MUST be ensured that the Privacy header field with
> > value 'id' [RFC3325]...."
> > I don't know whether we also need a reference to RFC 3323, 
> in which case
> > it would become:
> > "Additionally, it MUST be ensured that the Privacy header field
> > [RFC3323] with value 'id' [RFC3325]....".
> 
> Fixed.
> 
> 
> > 7. Should section 6.1 on anonymous calls have an 
> informative reference
> > to the ua-privacy draft?
> 
> Added.
> 
> 
> > 8. "Each answerer will create a DTLS association with
> >    the offerer."
> > It is not necessarily the case that the answerer will create the
> > association - it could also be the offerer.
> 
> s/create/form/
> 
> 
> > 9. "Once the answer is received, the active endpoint
> >    will either reuse the existing association or establish 
> a new one,
> >    tearing down the existing association as soon as the offer/answer
> >    exchange is completed."
> > If the answerer is the active endpoint, how can it 
> determine that the
> > offer/answer exchange is completed, i.e., how does it know 
> the offerer
> > has received the answer?
> 
> Yeeah, that is weird. I think I fixed that.
> 
> 
> > 10. "Note
> >    that this may mean adjusting the endpoint IP addresses if the
> >    selected candidate pair shifts, just as if the DTLS 
> packets were an
> >    ordinary media stream."
> > What is the impact on the in-progress or completed DTLS handshake if
> > there is a shift of IP address?
> 
> None. DTLS does not care about IP addresses as long as it gets 
> the data it needs.
> 
> 
> > 11. "Implementations of this specification SHOULD support DTLS-SRTP
> >    [I-D.ietf-avt-dtls-srtp]."
> > I thought the whole draft was about DTLS-SRTP. Therefore why is this
> > only SHOULD strength? Under what circumstances are 
> exceptions allowed?
> > What are the alternatives to be used in these exceptional 
> circumstances?
> 
> It should say MUST. It does now.
> 
> 
> > 12. "Also note
> >       that there is a fingerprint attribute on the 'c' line 
> of the SDP."
> > An attribute is a separate line, not part of a c-line.
> 
> Fixed.
> 
> 
> > 13. "This is computed from Bob's self-signed certificate."
> > That is true for the answer, but for the offer it is from Alice's
> > certificate.
> 
> Doh!
> 
> 
> > 14. "a=tcap:1 UDP/TLS/RTP/AVP RTP/AVP"
> > Shouldn't this be:
> > "a=tcap:1 UDP/TLS/RTP/SAVP RTP/AVP"
> 
> Done.
> 
> 
> > 15. "Message 3 shows Bob
> >       sending a DTLS ClientHello directly to Alice for each 
> 'm' line in
> >       the SDP.  In this case two DTLS ClientHello messages 
> are sent to
> >       Alice.  Bob sends a DTLS ClientHello to 
> 192.168.1.103:6056 for RTP
> >       and another to port 6057 for RTCP."
> > The figure does not show two ClientHello messages, but it should do.
> > This would then make the first sentence above wrong - it 
> would be two
> > per 'm'line, not one per 'm' line. It is only one per 'm' line if
> > RTP/RTCP mux is used.
> 
> I fixed this by rewriting the text, not the figure.
> 
> 
> > 16. "Note that in this case, Bob signals the actual 
> transport protocol
> >       configuration of SRTP over DTLS in the acfg parameter."
> > This appears under message 9 (RTP/RTCP), but really it should occur
> > under message 8 (200 OK).
> 
> Fixed.
> 
> 
> > 17. "When phone number URIs (e.g.,
> >       'sip:+17005551008@chicago.example.com') are used, there is no
> >       structural reason to trust that the domain name is 
> authoritative
> >       for a given phone number, although individual proxies 
> and UAs may
> >       have private arrangements that allow them to trust 
> other domains."
> > This might suggest that the problem exists only when user=phone is
> > absent, whereas it exists also (more particularly so) when 
> user=phone is
> > present. It might be better to say:
> > "When phone number URIs (e.g.,
> >       'sip:+17005551008@chicago.example.com' or
> > 'sip:+17005551008@chicago.example.com;user=phone') are used...."
> 
> Done.
> 
> 
> > NITS:
> > - Change "media plan" to "media plane".
> > - "in Enhancements for Authenticated Identity
> >    Management in SIP [RFC4474] is used" - delete "in".
> > - "SIP proxies downstream of the identity service" change to "SIP
> > proxies downstream of the authentication service"
> > - "Since the identity header is a
> >    digital signature across several SIP headers, in addition to the
> >    bodies of the SIP message, "
> > This contains several instances of wrong terminology. 
> "identity header"
> > should be "Identity header field. "SIP headers" should be 
> "SIP header
> > fields", and "bodies" should be "body". A SIP message has a single
> > header (comprising header fields) and a single body 
> (perhaps containing
> > multiple body parts). Similar corrections are needed throughout the
> > document.
> 
> I think I got all these.
> 
> 
> > - "upon receiving the other side's then"
> > I think this should say:
> > "upon receiving the other side's SDP then"
> 
> Done.
> 
> > - "and key negotiation succeeds otherwise RTP is used"
> > Change to:
> > "and key negotiation succeeds, otherwise RTP is used"
> 
> Done.
> 
> > - "RTP is the
> >    default and will be understood by endpoints that do not 
> understand
> >    SRTP or this key exchange mechanism but SRTP is preferred."
> > Change to:
> > "This allows an offerer to express a preference for SRTP, 
> but RTP is the
> >    default and will be understood by endpoints that do not 
> understand
> >    SRTP or this key exchange mechanism.
> 
> Done.
> 
> "
> > - "Answerers SHOULD use this UPDATE mechanisms."
> > Change "mechanisms" to "mechanism".
> > - "the assurances of DTLS-SRTP provides "
> > Change to:
> > "the assurances that DTLS-SRTP provides"
>                 ^^^^
> 
> Done.
> 
> 
> John
> 
> 
> 
> 
> 
> Hannes Tschofenig:
> > A few random comments:
> 
> 
> >    The fingerprint alone protects against active attacks on 
> the media
> >    but not active attacks on the signalling.  In order to 
> prevent active
> >    attacks on the signalling, in Enhancements for 
> Authenticated Identity
> >    Management in SIP [RFC4474] is used.
> > 
> > I believe we should indicate that SIP Identity >>may<< be used.
> 
> Done.
> 
> 
> >   When Bob receives the offer,
> >    Bob establishes a mutually authenticated DTLS connection 
> with Alice.
> > 
> > It is not really mutually authenticated at this point in time. 
> > Something like
> > "
> >   When Bob receives the offer,
> >    Bob initiates a DTLS exchange with Alice.
> > "
> > 
> >    At this point Bob can begin sending media to Alice.  
> Once Bob accepts
> >    Alice's offer and sends an SDP answer to Alice, Alice can begin
> >    sending confidential media to Bob.
> 
> I rewrote this a little differently.
> 
> 
> > 
> > We would have to assume symmetric RTP (which is only recommended by
> > draft-ietf-avt-dtls-srtp) here to allow Alice to send media 
> immediately
> > after the DTLS handshake. Otherwise we may need another 
> DTLS handshake
> > before Alice can send media to Bob. 
> 
> I think the new text covers this.
> 
> 
> > I was actually wondering why not to mandate symmetric RTP 
> given that the
> > number of exchanges are much lower. 
> 
> the consensus in AVT was not to do so.
> 
> >  Alice and Bob will verify the
> >    fingerprints from the certificates received over the 
> DTLS handshakes
> >    match with the fingerprints received in the SDP of the 
> SIP signaling.
> >    This provides the security property that Alice knows 
> that the media
> >    traffic is going to Bob and vice-versa without 
> necessarily requiring
> >    global PKI certificates for Alice and Bob.
> > 
> > 
> >    o  When RFC 4474 Identity is used, this solution works 
> even when the
> >       SIP proxies downstream of the identity service are 
> not trusted.
> > 
> > We could provide a pointer to the security considerations section,
> > namely Section 8.6. 
> 
> I provided a pointer.
> 
> 
> > A pointer to RFC 4916 ("Connected Identity"), even though I do not
> > consider it as too important based on the scenarios it 
> addresses, would
> > not hurt here. 
> > Maybe something like would help:
> > "Retargeting of a dialog-forming request (changing the value of the
> > Request-URI), the UA that receives
> >    it (the User Agent Server, UAS) can have a different 
> identity from
> >    that in the To header field. When RFC 4916 is used then it is
> > possible to supply its identity to the peer UA by means of 
> a request in
> > the
> >    reverse direction, and for that identity to be signed by an
> >    Authentication Service. 
> > "
> 
> Added.
> 
> 
> >       There is no need to reveal keys in the SIP signaling 
> or in the SDP
> >       message exchange.  In order for SDES and MIKEY to provide this
> >       security property, they require distribution of 
> certificates to
> >       the endpoints that are signed by well known certificate
> >       authorities.
> > 
> > 
> > I believe we should delete the last sentence since we 
> provide a detailed
> > discussion of SDES and MIKEY in the media security requirements
> > document. 
> > 
> Removed.
> 
> > Section 5
> > 
> >    The far endpoint (answerer) may now establish a mutually
> >    authenticated DTLS association to the offerer. 
> > 
> > 
> > The same comment from above applies since at this stage 
> there two end
> > points aren't mutually authenticated yet. 
> > 
> > 
> >    o  If the fingerprint does not match the hashed 
> certificate then the
> >       endpoint MUST tear down the media session immediately.
> > 
> > Tentatively establishing a session and tearing it down if the
> > fingerprint doesn't match is one possible strategy. 
> Alternatively, the
> > offerer could wait for an answer with the fingerprint and 
> subsequently
> > execute the DTLS handshake and cancel the handshake and the session
> > establishment immediately if the cert used in the handshake does not
> > match the fingerprint.
> 
> I added some material.
> 
> 
> > This would obviously delay the establishment of the secure channel.
> > Particularly for early media this would mean that media is 
> unprotected.
> > Early media will, however, be tough anyway. 
> > 
> > I don't have a strong opinion on the two approaches but I believe we
> > should mention the DoS potential in the security 
> consideration section. 
> 
> I don't see that there is any signifciant DoS potential. Can you
> provide some text?
> 
> 
> 
> 
> > 6.5.  Session Modification
> > 
> >    Once an answer is provided to the offerer, either endpoint MAY
> >    request a session modification which MAY include an 
> updated offer.
> >    This session modification can be carried in either an INVITE or
> >    UPDATE request.  Once the answer is received, the active endpoint
> >    will either reuse the existing association or establish 
> a new one,
> >    tearing down the existing association as soon as the offer/answer
> >    exchange is completed.
> > 
> > 
> > I think we need to differentiate the case where the SDP changes only
> > slightly, for example, a change in codec vs. the case where, for
> > example, an IP address changes. 
> > Hence, in some cases creating a new association might not even be
> > possible. 
> 
> I added some text.
> 
> 
> > Section 7:
> > 
> >    The SIP signaling from Alice to her proxy is transported 
> over TLS to
> >    ensure an integrity protected channel between Alice and 
> her identity
> >    service.  Note that all other signaling is transported 
> over TCP in
> >    this example although it could be done over any 
> supported transport.
> > 
> > I guess we should also say that the communication between the SIP
> > proxies is protected someone, specifically when SIP 
> Identity (or other
> > security mechanisms) is not available. 
> 
> I added some text.
> 
> 
> >       This shows the initial INVITE from Alice to Bob 
> carried over the
> >       TLS transport protocol to ensure an integrity 
> protected channel
> >       between Alice and her proxy which acts as Alice's identity
> >       service.  Note that Alice has requested to be either 
> the active or
> >       passive endpoint by specifying a=setup:actpass.  Bob 
> chooses to
> >       act as the DTLS server and will initiate the session. 
>  Also note
> >       that there is a fingerprint attribute on the 'c' line 
> of the SDP.
> >       This is computed from Bob's self-signed certificate.
> > 
> > Shouldn't this be Alice's self-signed cert, as shown in the 
> subsequent
> > exchange. 
> 
> Fixed.
> 
> 
> >       At this point, Bob can begin sending early media (RTP 
> and RTCP) to
> >       Alice.  Note that Alice can't yet trust the media since the
> >       fingerprint has not yet been received.  This lack of trusted,
> >       secure media is indicated to Alice.
> > 
> > At the last sentence we should indicate that this 
> indication is part of
> > the user interface rather than something that is meant to 
> be part of the
> > protocol exchange. 
> 
> Fixed.
> 
> > Section 8: Security Considerations
> > 
> > 
> > Other mechanisms, such as the S/MIME mechanism described
> >    in RFC 3261, or the mechanisms described in
> >    [I-D.wing-sip-identity-media] or [I-D.fischer-sip-e2e-sec-media],
> >    could also serve this purpose.
> > 
> > 
> > I believe we should just mention S/MIME and SIP CERT rather than
> > individual drafts that may not go anywhere. 
> 
> I've removed this, but I have no strong position so I'll put 
> it back in
> if people object.
> 
> 
> > Section 8.2: 
> > 
> > 
> > This sentence is a bit tough to read:
> > 
> >   If SIP Identity is not used, but the signaling is 
> protected by SIPS,
> >    the security guarantees are weaker, but some security is still
> >    provided as long as all proxies are trusted, this 
> provides integrity
> >    for the fingerprint.
> > 
> > 
> > Suggest to break it into 3 sentences:
> > 
> >  If SIP Identity is not used, but the signaling is 
> protected by SIPS,
> >    the security guarantees are weaker. Some security is still
> >    provided as long as all proxies are trusted. This 
> provides integrity
> >    for the fingerprint in a chain-of-trust security model. 
> 
> Done.
> 
> 
> > It does not provide a strong assertion of who
> >    Alice is communicating with.  However, as much as the 
> target domain
> >    can be trusted to correctly populate the From header field value,
> >    Alice can use that.  The security issue with this 
> approach is that if
> >    one of the Proxies wished to mount a man-in-the-middle attack, it
> >    could convince Alice that she was talking to Bob when really the
> >    media was flowing through a man in the middle media 
> relay.  However,
> >    this attack could not convince Bob that he was taking to Alice.
> > 
> > 
> > I believe that this last paragraph does not provide a lot 
> of value given
> > that SIPS fits into the chain of trust security model and hence, by
> > definition, you have to trust the proxies. If the proxies 
> are, for some
> > reason, not trustworthy anymore than there is a problem. 
> 
>  I trimmed this down quite a bit.
> 
> 
> > 8.3.  S/MIME
> > 
> > 
> > I would delete the last sentence from that section, namely 
> > "
> >  However, so far there have been no deployments of S/MIME
> >  for SIP.
> > "
> > 
> > Reason: The problem is not really S/MIME as such. The 
> problem is how to
> > distribute the certificates. This problem has, however, 
> been tackeled
> > with SIP CERT and hence the situation may look different in 
> a few years.
> > Additionally, one could argue of lack of deployment of 
> other security
> > mechanisms as well. 
> 
> Removed.
> 
> > 8.5.  Short Authentication String
> > 
> > DTLS does not natively support
> >    this mode, however it would be straightforward to add 
> one as a TLS
> >    extension [RFC3546].
> > 
> > I would delete the term "straightforward" and say something like
> > "
> >    DTLS does not natively support
> >    this mode. Based on the level of deployment interest a TLS
> >    extension [RFC3546] could provide support for it. 
> > "
> > 
> > Reason: There has not been a lot of interest in this 
> mechanism lately.
> > Hence, I am not sure whether there is actually a lot 
> interest from the
> > community. 
> 
> Done.
> 
> 
> > Additionally, it might be useful to indicate that this 
> mechanism only
> > helps when you actually know the person's voice. This fits to some
> > communication patters. When you know your communication 
> partners already
> > out-of-band then things are a lot easier anyway. 
> > For those cases where this is not true things get more 
> complicated. For
> > example, how do I know that I talk to a person at my bank, insurance
> > company, car dealer, travel agency, help desk, etc.? One 
> may not know
> > the voice of these folks. 
> 
> Added some material.
> 
> 
> > Appendix A:
> > 
> > A.4.  Clipping (R-AVOID-CLIPPING)
> > 
> >    Because the key establishment occurs in the media plane, 
> media need
> >    not be clipped before the receipt of the SDP answer.
> > 
> > 
> > I believe we should indicate that in this case the early 
> media is not
> > secured.
> 
> That's not 100% accurate. I've added clarifying text.
> 
> 
> > A.7.  (R-SIG-MEDIA, R-ACT-ACT)
> > 
> > 
> > It might be good to indicate that the interaction between 
> the UA and the
> > authentication service needs to be secured as well and that the
> > authentication service is responsible for executing proper
> > authentication of the user. 
> 
> Done.
> 
> 
> > A.8.  Binding to Identifiers (R-ID-BINDING)
> > 
> > We should weaken the language a bit to indicate that other 
> mechanisms,
> > such as SIP CERT and S/MIME may also be used and not only 
> SIP Identity. 
> 
> Done.
> 
> 
> > A.11.  RTP Validity Check (R-RTP-VALID)
> > 
> > We should also mention STUN packets by referencing Section 5.1.2 of
> > http://tools.ietf.org/html/draft-ietf-avt-dtls-srtp-03
> 
> Done.
> 
> 
> > A.15.  Denial of Service Vulnerability (R-DOS)
> > 
> >    DTLS offers some degree of DoS protection particuarly as 
> a built-in
> >    feature.
> > 
> > 
> > 
> > A.16 is already covered by A.7. I would delete it. 
> 
> 
> Done.
> 
> 
> > A.18: Maybe we should add one more sentence: "RFC 4474 is able to
> > prevent an active attacker on the signalling path to 
> downgrade the call
> > from SRTP to RTP."
> 
> Done.
> 
> 
> > A.22.  Interworking with Intermediaries (R-TRANSCODER)
> > 
> > "
> >    A description of the interworking with Session Border 
> Controllers is
> >    described in this document.
> > "
> > 
> > The interworking with SBCs is covered in 
> > 
> http://www.ietf.org/internet-drafts/draft-ietf-mmusic-media-pa
> th-middleb
> > oxes-01.txt
> > 
> > However, as the text of interworking is written in
> > 
> http://www.ietf.org/internet-drafts/draft-ietf-sip-media-secur
> ity-requir
> > ements-07.txt
> > the transcoder needs to have access to the keying material 
> and therefore
> > the description from A.21 on media recording (and key disclosure) is
> > applicable here as well. 
> 
> 
> I added a short amount of text.
> 
> 
> > A.23.  PSTN Gateway Termination (R-PSTN)
> > 
> >    The DTLS-SRTP framework allows the media security to 
> terminate at a
> >    PSTN gateway.  This does not provide end-to-end security, but is
> >    consistent with the security goals of this framework because the
> >    gateway is authorized to speak for the PSTN namespace.
> > 
> > 
> > There are several scenarios that would have to be discussed in this
> > context; they are described in Section 3 of
> > draft-schwartz-sip-e164-ownership-01.txt, namely 
> > * IP-IP Case (not relevant to Section A.23 although E.164 
> numbers are
> > used).
> > * IP-PSTN-IP Case
> > * PSTN-to-IP Case
> > * IP-to-PSTN Case
> > 
> > The problems are slightly different for each of these 
> cases. However, as
> > most folks would probably agree the security of all these cases is
> > rather weak (or at least unpredictable). 
> > 
> > I wonder how to best treat this subject but it may not hurt 
> to describe
> > the issues in more detail in the appendix. Text is already 
> available --
> > hence it would be more of a copy-and-paste operation. 
> 
> I think this is actually contentious enough that I'd rather not
> get into it, since this is just about media-security-requirements
> compliance.
> 
> 
> > There are two requirements that have not been discussed: 
> R-ALLOW-RTP and
> > R-HERFP.
> > 
> > "R-ALLOW-RTP: DTLS-SRTP allows RTP media to be received by 
> the calling
> > party until SRTP has been negotiated with the answerer, 
> after which SRTP
> > is preferred over RTP.
> > "
> > 
> > Here is first try:
> > "
> > R-HERFP: The Heterogeneous Error Response Forking Problem 
> (HERFP) is not
> > applicable to DTLS-SRTP since the key exchange protocol 
> will be executed
> > along the media path and hence error messages are communicated along
> > this path and proxies do not need to progress them.
>  "
> 
> I added this text.
> 
> 
> 
> Dan Wing:
> > > From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] 
> On Behalf Of Dean
> > Willis
> > > Sent: Wednesday, July 23, 2008 1:26 AM
> > > To: SIP IETF
> > > Cc: Cullen Jennings
> > > Subject: [Sip] WGLC on DTLS Framework 
> draft-ietf-sip-dtls-srtp-framework-02
> > >
> > >
> > > I'm happy to announce a Working Group Last Call on the 
> > > standards-track DTLS Framework document:
> > > 
> > >
> > 
> http://www.ietf.org/internet-drafts/draft-ietf-sip-dtls-srtp-f
> ramework-02.txt
> > >
> > > I'd like to conclude this WGLC by Friday, August 8, 2008.
> > >
> > > Please review the document and send any comments to the list and  
> > > author Eric Rescorla.
> > 
> > I'm happy to see this finally WGLC'd, too!
> > 
> > 
> > 
> > Overall:
> > 
> > The framework document needs to require endpoints send and
> > receive ietf-mmusic-sdp-capability-negotiation.  Without support
> > for that draft, many of the media security requirements cannot be 
> > met (as mentioned in A.1 of draft-ietf-sip-dtls-srtp-framework-02).
> > ietf-mmusic-sdp-capability-negotiation should be promoted
> > to a normative requirement, and should be required (MUST) for 
> > endpoints to support in order to adhere to the DTLS-SRTP 
> framework.  
> > Otherwise, we are hosed for forking and hosed for retargeting.
> 
> Agreed. Added.
> 
> 
> 
> > Section 1, Introduction:
> > 
> >    However, even hop-by-hop security such as provided by 
> SIPS provides
> >    some protection against modification by attackers who 
> are not on the
> >    signalling path.
> > 
> > With or without SIPS, if the attacker is off the signalling 
> path, the
> > attacker has little hope of doing much damage -- they need to 
> > guess a lot of SDP values and guess a bunch of SIP values (call-id)
> > in order to be successful.
> > 
> > So, I would replace the last phrase with:
> > 
> > "... who are not in control of on-path signaling elements."
> > 
> > resulting in:
> > 
> >    However, even hop-by-hop security such as provided by 
> SIPS provides
> >    some protection against modification by attackers who are not in 
> >    control of on-path signaling elements."
> 
> Done.
> 
> 
> > Section 5, Exchanging Certificates:
> > 
> > (the text exceeds the section title when it goes beyond just what 
> > happens with certificate exchange; perhaps consider re-titling).
> > 
> > My slightly more substantive comment is:
> > 
> >   The answerer SHOULD use the setup	attribute value of 
> >   setup:active and will send the client_hello in the media path."
> >                    ^^^^
> >                    MUST
> 
> Refined to match your comments and Peter's.
> 
> 
> > Section 6.6, "ICE Interaction":
> > 
> >    ...
> >    If ICE is not being used, then there is potential for a bad
> >    interaction with SBCs via "latching", as described in
> >    [I-D.ietf-mmusic-media-path-middleboxes].  In order to avoid this
> >    issue, if ICE is not being used and the DTLS handshake has not
> >    completed, upon receiving the other side's then the 
> passive side MUST
> >                                              ^
> >                                             SDP
> > 
> >    do a single unauthenticated STUN [I-D.ietf-behave-rfc3489bis]
> >    connectivity check in order to open up the appropriate pinhole. 
> > 
> > 
> > Requirements to do something when ICE is *not* being used 
> should not be in a
> > section titled "ICE Interaction".  I would move this 
> paragraph describing how
> > to handle SBC 'latching' to its own section perhaps titled 
> "SBC Interaction".
> 
> Done.
> 
> 
> > Section 8.6,
> > 
> >    o When phone number URIs (e.g., 
> >      'sip:+17005551008@chicago.example.com') are used, 
> > 
> > I believe the current consensus is that a phone number would include
> > ;user=phone, so the example should be
> > sip:+17005551008@chicago.example.com;user=phone
> 
> Done
> 
> 
> > Section 8.6, "Limits of Identity Assertions"
> > 
> > (This section is well written.)
> > 
> > 
> >    Implementors should therefore take care not to indicate
> >    misleading peer identity information in the user 
> interface. e.g.  If
> >                                                              ^^^^^^
> >                                                formatting 
> error around here
> >    the peer's identity is 
> sip:+17005551008@chicago.example.com, it is
> >    not sufficient to display that the identity of the peer as
> >    +17005551008, unless there is some policy that states 
> that the domain
> >    "chicago.example.com" is trusted to assert E.164 numbers. 
> > 
> > chicago.example.com only needs to be trusted to assert 
> numbers you trust
> > it to assert -- not a blanked "to assert E.164 numbers".  
> For example,
> > I might trust, and expect, Verizon to claim E.164s that it owns, but
> > I do not trust, nor expect, Verizon to claim an E.164 with a +353
> > country code.
> > 
> > I would revise the above to end with something like:
> > 
> >    ... unless there is some policy that states that the domain
> >    "chicago.example.com" is trusted to assert the E.164 number
> >    is it asserting.
> >    ^^^^^^^^^^^^^^^
> 
> Done.
> 
> 
> > later,
> > 
> >    Otherwise, the recipient cannot rely on the RFC 4474 Identity
> >    assertion and the UA MUST not indicate to the user that 
> a secure call
> >                         ^^^^^^^^
> >                         MUST NOT
> >    has been established to the claimed identity.  
> Implementations which
> >    are configured to only establish secure calls SHOULD 
> terminate the
> >    call in this case.
> 
> Done.
> 
> 
> > Section A.3:  
> > 
> > 
> > add a reference to draft-ietf-avt-dtls-srtp-03.txt
> > which describes how session resumption is supposed to be
> > implemented.
> 
> Done.
> 
> > 
> > Section A.12., "3rd Party Certificates (R-CERTS, R-EXISTING)"
> > 
> >    Third party certificates are not required.  However, if 
> the parties
> >    share an authentication infrastructure that is 
> compatible with TLS
> >    (3rd party certificates or shared keys) it can be used.
> > 
> > 
> > RFC4474 is part of the framework for securing DTLS-SRTP, and
> > as you know there is a lot of consternation around this point.
> > Citing section 13.4 of RFC4474 would be helpful, because section
> > A.12 of sip-dtls-srtp-framework relies on the following small 
> > sentence in Section 13.4 of RFC4474:
> > 
> >    It
> >    is strongly RECOMMENDED that self-signed domain 
> certificates should
> >    not be trusted by verifiers, unless some previous key 
> exchange has
> >                                 
> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> >    justified such trust.
> >    ^^^^^^^^^^^^^^^^^^^^
> 
> I added a reference.
> 
> 
> > Section A.15, Denial of Service Vulnerability (R-DOS)
> > 
> > Please add a reference to Section 4.2.1 of RFC4347.
> 
> Done.
> 
> > 
> > Section A.18., "Downgrading Protection (R-DOWNGRADE)"
> > 
> >    DTLS provides protection against downgrading attacks since the
> >    selection of the offered ciphersuites is confirmed in a 
> later stage
> >    of the handshake.  This protection is efficient unless 
> an adversary
> >    is able to break a ciphersuite in real-time.
> > 
> > This should also mention integrity protection of signaling is 
> > necessary in order to prevent downgrade to RTP (because I believe
> > we need to require sdp-capability-negotiation for all of this to
> > work correctly.)
> 
> Agreed.  added some text per this and Hannes's comments.
> 
> 
> 
> 
> > Peter Schneider:
> > 
> > 
> > 1) The draft currently states in section 5:
> > 
> > "     The endpoint MUST use the setup attribute defined in 
> [RFC4145].
> >      The endpoint which is the offerer MUST use the setup attribute
> >      value of setup:actpass and be prepared to receive a 
> client_hello
> >      before it receives the answer.  The answerer SHOULD 
> use the setup
> >      attribute value of setup:active and will send the 
> client_hello in
> >      the media path."
> > 
> > My proposal is to replace the last sentence by "The 
> answerer MUST use
> > the setup
> > attribute value of setup:active or the setup attribute value of
> > setup:passive."
> 
> I set this to MUST use both but with active as recommended.
> 
>         The answerer MUST use either a setup attribute value of
> 	setup:active or setup:passive. Note that if the answerer uses
> 	setup:passive, then the DTLS handshake will not begin until
> 	the answerer is received, which adds additional
> 	latency. setup:active allows the answer and the DTLS handshake
> 	to occur in parallel. Thus, setup:active is RECOMMENDED.  The
> 	active party MUST send the ClientHello in the media path.
> 
> I think this is the best compromise. There's really no advantage
> to being passive.
> 
> 
> > With this, if the receiver takes up the active role, as 
> recommended in
> > the original text, he can start the handshake and if the 
> handshake has
> > been carried out successfully before the SDP answer, he can send
> > encrypted early media (before the SDP answer). Obviously, 
> with the usage
> > of self signed certificates, the offerer can authenticate 
> the origin of
> > the early media only retrospectively, after he has received the SDP
> > answer, which somewhat reduces the value of encrypting the 
> early media.
> > Early media as well as a handshake at that point in time 
> will however
> > not work in an environment, where middleboxes are present 
> that will not
> > let traffic pass in the media plane before the answer has been sent.
> > 
> > So if the receiver assumes such an environment, he may 
> decide to take up
> > the passive role. By this, the offerer will start the 
> handshake as soon
> > as he receives an answer, which would typically be close to 
> the first
> > point in time at which the handshake messages will be able 
> to pass the
> > middleboxes.
> > 
> > I feel it's quite reasonable to do the handshake after 
> offer and answer
> > have been exchanged, because the offerer can check the 
> fingerprint of
> > the certificate received in the handshake immediately; and 
> he will not
> > accept encrypted media that may be sent by an attacker. So 
> he is less
> > vulnerable to DoS. This does not allow encrypted early media to be
> > received, but is this so essential? In fact, accepting only 
> encrypted
> > early media could be harmful, as it would prevent a caller 
> to receive
> > e.g. an announcement that is sent by some server in the network that
> > only sends unsensitive announcements and therefore does not support
> > encryption at all.
> 
> I think this is covered in the security considerations section.
> 
> I don't really understand what DoS issue you're concerned about.
> 
> 
> 
> > 2) With respect to unmanaged (e.g. residential) stateful 
> firewalls the
> > draft currently states in section 6.6 that if ICE is not 
> used and the
> > handshake could not be completed (until offer and answer have been
> > exchanged)
> > 
> >  "the passive side MUST
> >   do a single unauthenticated STUN [I-D.ietf-behave-rfc3489bis]
> >   connectivity check in order to open up the appropriate 
> pinhole.  All
> >   implementations MUST be prepared to answer this request during the
> >   handshake period even if they do not otherwise do ICE."
> > 
> > And later, in the message flow on page 13 and the respective
> > explanations it becomes obvious that the idea is that the 
> sender of this
> > STUN connectivity check in fact waits for an answer before 
> he proceeds
> 
> That's not intended at all. They're done in parallel.
> 
> 
> > (although implementations must only *be prepared* to answer a
> > connectivity request - I wonder whether "be prepared" 
> should rather be
> > removed from this sentence). However, if there are 
> middleboxes on the
> > path that block the STUN connectivity check, an answer will 
> never come,
> > although the purpose of the connectivity check - to 
> establish a session
> > in the residential firewall and open it up for incoming 
> traffic - may
> > already have been achieved.
> > 
> > So instead of making the sending of the STUN connectivity check
> > mandatory in this situation, I propose rather to recommend that the
> > passive UA in the connection setup should try to make sure that a
> > firewall protecting the UA does not block the client hello 
> starting the
> > handshake. This could be done by STUN or other means. This 
> is exactly
> > what is recommended also in 
> draft-ietf-mmusic-media-path-middleboxes-01,
> > section 7, REC #1.
> 
> I think IETF general policy is to prefer ICE, which is what you
> would do here. This is a stopgap.
> 
> 
> > 3) More generally, I propose that the draft should mention possible
> > problems with middleboxes, and should advise implementors 
> to follow the
> > recommendations in draft-ietf-mmusic-media-path-middleboxes.
> 
> I don't want to create a normative reference, but I added a
> section that points at that and states it has recommendations.
> 
>   
> > 4) Concerning the possible sequence of messages used to establish
> > sessions that use DTLS-SRTP, the draft IMO should give clearer
> > recommendations. This is currently mostly treated in the section
> > "example message flow", which indeed explains two flows 
> currently. It is
> > unclear, to which degree this is normative, and what 
> variants of such
> > flows would also be considered compliant to the draft.
> 
> I went through and tried to add some clarifying text where I thought 
> appropriate. That said, since TLS allows inband negotiation and
> there is some inherent reordering due to the use of multiple parallel
> flows, a lot of different variants are legal. Is there some particular
> point you want clarified?
> 
> 
> > 5) Another topic where information is only given in the 
> example flows is
> > the treatment of RTCP. If RTP/RTCP multiplexing on a single 
> port is not
> > used, at which time should the handshake for RTCP be done - 
> immediately
> > after the handshake for RTP, so that sender reports could 
> be sent for
> > early media? Or only after the SDP answer, when both sides 
> know which
> > ports are used on both sides? This becomes even more complex, if
> > non-symmetric RTP/RTCP would be applied, which is not excluded in
> > draft-ietf-avt-dtls-srtp-02.
> > I propose to describe these issues in a dedicated section.
> 
> I added some text and referenced the AVT draft which talks about
> the performance issues.
> 
> -Ekr
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 27 07:44:26 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id CA00A3A67EF;
	Wed, 27 Aug 2008 07:44:26 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id E764C3A67A3
	for <sip@core3.amsl.com>; Wed, 27 Aug 2008 07:44:25 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.19
X-Spam-Level: 
X-Spam-Status: No, score=-6.19 tagged_above=-999 required=5 tests=[AWL=0.409, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YIfVAol6CALV for <sip@core3.amsl.com>;
	Wed, 27 Aug 2008 07:44:24 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 0130D3A67EF
	for <sip@ietf.org>; Wed, 27 Aug 2008 07:44:23 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,279,1217808000"; d="scan'208";a="18863078"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 27 Aug 2008 14:43:54 +0000
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7REhsDg026421; 
	Wed, 27 Aug 2008 10:43:54 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7REhsxx002952;
	Wed, 27 Aug 2008 14:43:54 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Aug 2008 10:43:42 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Aug 2008 10:43:41 -0400
Message-ID: <48B5685B.1030106@cisco.com>
Date: Wed, 27 Aug 2008 10:44:43 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <CA9998CD4A020D418654FCDEF4E707DF079F23C0@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF079F23C0@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 27 Aug 2008 14:43:41.0669 (UTC)
	FILETIME=[4C91A150:01C90853]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=5182; t=1219848234;
	x=1220712234; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20[Sip]=20New=20version=20of=20draft-ietf
	-sip-199 |Sender:=20
	|To:=20Christer=20Holmberg=20<christer.holmberg@ericsson.co m>;
	bh=VtM7nMNEOtHUdf/phwPeF6UsilsH4DEoY2CmdSaNCsg=;
	b=gv5z45V35y6lvegEBm9gETK/TUptLwZIM4mDi3zxWDUmype0k8nMheXrpn
	YR8ybuw58hkyJdgbMcxJ/faXMzgzEWCSuLGb5VYs4BAyUEhi8++uJCD7lL29
	MZzYoX7IhK;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] New version of draft-ietf-sip-199
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi Christer,

This seems to have covered most things. The addition of descriptions of 
the sorts of resources that can be released is quite helpful. I have a 
few comments on the new version

>    If multiple usages [RFC5057] are used within an early dialog, and it
>    is not clear which dialogusage the 199 response terminates, SIP
>    entities that keep dialog state SHALL NOT release resources
>    associated with the early dialog when they receive the 199 response.

Under what circumstances can it not be clear which usage the 199 applies 
to? AFAIK the 199 should only be used with an INVITE dialog usage, and 
there can only be one of those per dialog. (We don't allow early dialogs 
for other usages.)

>    5. limited access resources - in case of forking and multiple stream
>    there may not be possible to allow early media on all dialogs, so
>    some dialogs may e.g. be set to "inactive".  When a dialog is
>    terminated, media can be allowed on other dialogs.

s/there may not be possible/it may not be possible/

>    When a forking proxy receives a non-2xx final response which
>    terminates one or more early dialogs and the proxy does not intend to
>    forward the final response immediately (due to the rules for a
>    forking proxy), and the UAC has indicated support of the 199 response
>    code, the forking proxy MUST send a 199 provisional response, for
>    each associated early dialog that it can associate with the final
>    response, upstream towards the sender of the associated request.  The
>    199 provisional response MUST contain a To header tag parameter,
>    which identifies the early dialog that has been terminated.

This still seems to require sending a 199 even if a 199 was previously 
received and forwarded. IMO the proxy should never send a 199 if one was 
previously received and forwarded for the same dialog. Keeping record of 
that should be a requirement for any proxy that intends to send a 199.

>    Since all SIP entities involved in a session setup do not necessarily
>    support the specific meaning of the 199 Early Dialog Terminated
>    provisional response, the sender of the response MUST be prepared to
>    receive SIP requests and responses associated with the dialog for
>    which the 199 response was sent (a proxy may receive SIP messages
>    from either direction).  If such request is received, and the
>    receiver maintains state of the dialogs, the receiver MUST reply to
>    such requests with a 481 final response.  A UAC that receives a 199
>    response for an early dialog MUST NOT send any further requests on
>    that dialog, except for requests which acknowledge reliable
>    responses.

I'm dubious of requiring, or even expecting or allowing, proxies to 
generate 481 responses. For instance, the UAC is still permitted to send 
PRACKs, and the proxies had better forward them. So I think it would be 
best for a proxy to always forward requests even if it thinks the dialog 
has ceased to exist.

>    NOTE: According to [RFC3262] and [RFC3264], if the INVITE request did
>    not contain an SPD offer, the first relaible response (provisonal or
>    final) MUST contain an SDP offer.  However, since 199 is only sent on
>    established early dialog, it will never be the first response sent.

IMO a better rationale here is that the 199 response is not sent 
reliably, and so isn't obligated to carry the offer. I think the above 
logic is weaker and questionable - an early dialog can be established 
without sending a reliable response. And I *think* a 199 can still be 
used in that case.

I guess the UAS is permitted to send a reliable 199, but it would be 
sufficient to say that it must not do so if that would obligate it to 
include an offer. Better yet, lets just say that 199 should *never* be 
sent reliably.

>    This section registers a new SIP response code, 199.  The required
>    information for this registration, as specified in RFC 3261, is:

I have mixed feelings about using "199" as the option-tag. It is 
syntactically valid, but using an all-numeric token bothers me. It could 
be something like "use199". But if nobody else is bothered by a numeric 
token I can live with it.

	Thanks,
	Paul


Christer Holmberg wrote:
> Hi,
> 
> Based on a large number of good comments and suggestions off-line I have
> produced and submitted a new version (-01) of the draft-ietf-sip-199
> draft.
> 
> Until available, it can also be found at:
> 
> http://users.piuha.net/cholmber/drafts/draft-ietf-sip-199-01.txt
> 
> Some work is still needed on the security section.
> 
> I also realized that, in the reference section, I still refer to the
> dialog-usage draft document, eventhough it became an RFC.
> 
> Regards,
> 
> Christer
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 27 10:31:54 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 2A86E28C103;
	Wed, 27 Aug 2008 10:31:54 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9C7313A6C02
	for <sip@core3.amsl.com>; Wed, 27 Aug 2008 10:31:52 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.789
X-Spam-Level: 
X-Spam-Status: No, score=-5.789 tagged_above=-999 required=5 tests=[AWL=0.460, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id HkNU1t8gtKcR for <sip@core3.amsl.com>;
	Wed, 27 Aug 2008 10:31:51 -0700 (PDT)
Received: from mailgw3.ericsson.se (mailgw3.ericsson.se [193.180.251.60])
	by core3.amsl.com (Postfix) with ESMTP id 2713A3A6BF1
	for <sip@ietf.org>; Wed, 27 Aug 2008 10:31:50 -0700 (PDT)
Received: from mailgw3.ericsson.se (unknown [127.0.0.1])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	6A77720D20; Wed, 27 Aug 2008 19:31:52 +0200 (CEST)
X-AuditID: c1b4fb3c-af0d0bb0000015b5-97-48b58f88490c
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	482CD2051D; Wed, 27 Aug 2008 19:31:52 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Aug 2008 19:31:52 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Wed, 27 Aug 2008 19:31:51 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF046C792D@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] New version of draft-ietf-sip-199
Thread-Index: AckIU1jmBMHPqGC5T++U4phwRpQr5wAFQJ7J
References: <CA9998CD4A020D418654FCDEF4E707DF079F23C0@esealmw113.eemea.ericsson.se>
	<48B5685B.1030106@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 27 Aug 2008 17:31:52.0042 (UTC)
	FILETIME=[CAE65CA0:01C9086A]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] New version of draft-ietf-sip-199
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi Paul,

>This seems to have covered most things. The addition of descriptions of 
>the sorts of resources that can be released is quite helpful. I have a 
>few comments on the new version
>
>    If multiple usages [RFC5057] are used within an early dialog, and it
>    is not clear which dialogusage the 199 response terminates, SIP
>    entities that keep dialog state SHALL NOT release resources
>    associated with the early dialog when they receive the 199 response.
>
>Under what circumstances can it not be clear which usage the 199 applies 
>to? AFAIK the 199 should only be used with an INVITE dialog usage, and 
>there can only be one of those per dialog. (We don't allow early dialogs 
>for other usages.)

I think it's clear that the 199 applies to the invite dialog usage. But, what if there are other usages? You would need to know whether the error response which triggered the 199 also affects those usages.

Again, this would only happen if you have established the other usage during the early phase of the invite dialog (which I think is only theoretical).



>    5. limited access resources - in case of forking and multiple stream
>    there may not be possible to allow early media on all dialogs, so
>    some dialogs may e.g. be set to "inactive".  When a dialog is
>    terminated, media can be allowed on other dialogs.

>s/there may not be possible/it may not be possible/

I'll fix that.



>    When a forking proxy receives a non-2xx final response which
>    terminates one or more early dialogs and the proxy does not intend to
>    forward the final response immediately (due to the rules for a
>    forking proxy), and the UAC has indicated support of the 199 response
>    code, the forking proxy MUST send a 199 provisional response, for
>    each associated early dialog that it can associate with the final
>    response, upstream towards the sender of the associated request.  The
>    199 provisional response MUST contain a To header tag parameter,
>    which identifies the early dialog that has been terminated.

>This still seems to require sending a 199 even if a 199 was previously 
>received and forwarded. IMO the proxy should never send a 199 if one was 
>previously received and forwarded for the same dialog. Keeping record of 
>that should be a requirement for any proxy that intends to send a 199.

Yes, I was thinking about the same thing. Having two 199s sent (one by the forking proxy, and one by the UAS) is not a good thing.



>    Since all SIP entities involved in a session setup do not necessarily
>    support the specific meaning of the 199 Early Dialog Terminated
>    provisional response, the sender of the response MUST be prepared to
>    receive SIP requests and responses associated with the dialog for
>    which the 199 response was sent (a proxy may receive SIP messages
>    from either direction).  If such request is received, and the
>    receiver maintains state of the dialogs, the receiver MUST reply to
>    such requests with a 481 final response.  A UAC that receives a 199
>    response for an early dialog MUST NOT send any further requests on
>    that dialog, except for requests which acknowledge reliable
>    responses.

>I'm dubious of requiring, or even expecting or allowing, proxies to 
>generate 481 responses. For instance, the UAC is still permitted to send 
>PRACKs, and the proxies had better forward them. So I think it would be 
>best for a proxy to always forward requests even if it thinks the dialog 
>has ceased to exist.

Yes. I was thinking of an UAS only, so I will clarify that this does not apply to proxies.



>    NOTE: According to [RFC3262] and [RFC3264], if the INVITE request did
>    not contain an SPD offer, the first relaible response (provisonal or
>    final) MUST contain an SDP offer.  However, since 199 is only sent on
>    established early dialog, it will never be the first response sent.
>
>IMO a better rationale here is that the 199 response is not sent 
>reliably, and so isn't obligated to carry the offer. I think the above 
>logic is weaker and questionable - an early dialog can be established 
without sending a reliable response. And I *think* a 199 can still be 
>used in that case.
>
>I guess the UAS is permitted to send a reliable 199, but it would be 
>sufficient to say that it must not do so if that would obligate it to 
>include an offer. Better yet, lets just say that 199 should *never* be 
>sent reliably.

I have no problem saying that. But, again, I don't think there are cases where you would be obligated  to include an offer/answer in 199, because you have already sent at least one 18x.

Of course, one use-case is when the UAS first sends a 18x unreliably, and then send a 199 reliably. In this case, if the INVITE didn't contain an offer, the 199 would have to contain one, since it's the first RELIABLE provisional response sent.

But, I have no problem saying that 199 must not be sent reliably (not even by a UAS), if people are ok with that.



>    This section registers a new SIP response code, 199.  The required
>    information for this registration, as specified in RFC 3261, is:
>
>I have mixed feelings about using "199" as the option-tag. It is 
>syntactically valid, but using an all-numeric token bothers me. It could 
>be something like "use199". But if nobody else is bothered by a numeric 
>token I can live with it.

We can use another value, if someone comes up with something more sexy than "199" :)

Regards,

Christer





Christer Holmberg wrote:
> Hi,
> 
> Based on a large number of good comments and suggestions off-line I have
> produced and submitted a new version (-01) of the draft-ietf-sip-199
> draft.
> 
> Until available, it can also be found at:
> 
> http://users.piuha.net/cholmber/drafts/draft-ietf-sip-199-01.txt
> 
> Some work is still needed on the security section.
> 
> I also realized that, in the reference section, I still refer to the
> dialog-usage draft document, eventhough it became an RFC.
> 
> Regards,
> 
> Christer
> 
> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 27 17:44:53 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D74703A68F1;
	Wed, 27 Aug 2008 17:44:53 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 494993A6932
	for <sip@core3.amsl.com>; Wed, 27 Aug 2008 17:44:52 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.394
X-Spam-Level: 
X-Spam-Status: No, score=-6.394 tagged_above=-999 required=5 tests=[AWL=0.205, 
	BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id e9KE3ZpZGiE4 for <sip@core3.amsl.com>;
	Wed, 27 Aug 2008 17:44:50 -0700 (PDT)
Received: from rtp-iport-2.cisco.com (rtp-iport-2.cisco.com [64.102.122.149])
	by core3.amsl.com (Postfix) with ESMTP id 26DEF3A68BA
	for <sip@ietf.org>; Wed, 27 Aug 2008 17:44:50 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,283,1217808000"; d="scan'208";a="18930730"
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 28 Aug 2008 00:44:50 +0000
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id m7S0iocG005480; 
	Wed, 27 Aug 2008 20:44:50 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.13.8/8.13.8) with ESMTP id m7S0io3s020694;
	Thu, 28 Aug 2008 00:44:50 GMT
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Aug 2008 20:44:50 -0400
Received: from [161.44.174.168] ([161.44.174.168]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Aug 2008 20:44:49 -0400
Message-ID: <48B5F53D.9090909@cisco.com>
Date: Wed, 27 Aug 2008 20:45:49 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Christer Holmberg <christer.holmberg@ericsson.com>
References: <CA9998CD4A020D418654FCDEF4E707DF079F23C0@esealmw113.eemea.ericsson.se>
	<48B5685B.1030106@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C792D@esealmw113.eemea.ericsson.se>
In-Reply-To: <CA9998CD4A020D418654FCDEF4E707DF046C792D@esealmw113.eemea.ericsson.se>
X-OriginalArrivalTime: 28 Aug 2008 00:44:49.0691 (UTC)
	FILETIME=[46C906B0:01C908A7]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=7796; t=1219884290;
	x=1220748290; c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:=20Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:=20Re=3A=20VS=3A=20[Sip]=20New=20version=20of=20dr
	aft-ietf-sip-199 |Sender:=20
	|To:=20Christer=20Holmberg=20<christer.holmberg@ericsson.co m>;
	bh=ECpQzZFiwGTXvKotJGxQpNl8oZMZJ1PnCy9lmNIkBhg=;
	b=wr7p3b5YM1xpOE5lijbx6s6yZUvBJSl4rT8vQnPGkyLs4lXMiBA0+O2VPK
	SOv0gk+MsrcjIgwSTKRtxRP6HQFzrC57e98HscoLbXAlQijZUcwP+unyD4Rh
	f+OWKf3Bc6;
Authentication-Results: rtp-dkim-2; header.From=pkyzivat@cisco.com; dkim=pass (
	sig from cisco.com/rtpdkim2001 verified; ); 
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] New version of draft-ietf-sip-199
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Comments inline. I think we are in substantial agreement.

	Thanks,
	Paul

Christer Holmberg wrote:
> Hi Paul,
> 
>> This seems to have covered most things. The addition of descriptions of 
>> the sorts of resources that can be released is quite helpful. I have a 
>> few comments on the new version
>>
>>    If multiple usages [RFC5057] are used within an early dialog, and it
>>    is not clear which dialogusage the 199 response terminates, SIP
>>    entities that keep dialog state SHALL NOT release resources
>>    associated with the early dialog when they receive the 199 response.
>>
>> Under what circumstances can it not be clear which usage the 199 applies 
>> to? AFAIK the 199 should only be used with an INVITE dialog usage, and 
>> there can only be one of those per dialog. (We don't allow early dialogs 
>> for other usages.)
> 
> I think it's clear that the 199 applies to the invite dialog usage. But, what if there are other usages? You would need to know whether the error response which triggered the 199 also affects those usages.
> 
> Again, this would only happen if you have established the other usage during the early phase of the invite dialog (which I think is only theoretical).

OK. I think I see what you are getting at, but it is somewhat obscure.

Lets suppose for a minute we have an early invite dialog usage, and have 
another dialog usage sharing the dialog with it. (E.g. maybe we sent a 
REFER and got a refer subscription going.) [At this point Robert runs 
out of the room, screaming.]

Of course the invite was also forked, and we have another early dialog 
going as well.

Now something happens that leads the forking proxy to want to send a 199 
response. Because this is a 1xx class response, it must be something 
that has happened pertaining to the INVITE, since we now only allow 
provisionals for INVITE. I guess the question is whether the response 
that provokes the 199 might *also* imply the termination of the dialog 
as a whole rather than just the invite dialog usage. That can only be 
determined if the actual final response is known, and we have excluded 
that have we not?

>>    5. limited access resources - in case of forking and multiple stream
>>    there may not be possible to allow early media on all dialogs, so
>>    some dialogs may e.g. be set to "inactive".  When a dialog is
>>    terminated, media can be allowed on other dialogs.
> 
>> s/there may not be possible/it may not be possible/
> 
> I'll fix that.
> 
> 
> 
>>    When a forking proxy receives a non-2xx final response which
>>    terminates one or more early dialogs and the proxy does not intend to
>>    forward the final response immediately (due to the rules for a
>>    forking proxy), and the UAC has indicated support of the 199 response
>>    code, the forking proxy MUST send a 199 provisional response, for
>>    each associated early dialog that it can associate with the final
>>    response, upstream towards the sender of the associated request.  The
>>    199 provisional response MUST contain a To header tag parameter,
>>    which identifies the early dialog that has been terminated.
> 
>> This still seems to require sending a 199 even if a 199 was previously 
>> received and forwarded. IMO the proxy should never send a 199 if one was 
>> previously received and forwarded for the same dialog. Keeping record of 
>> that should be a requirement for any proxy that intends to send a 199.
> 
> Yes, I was thinking about the same thing. Having two 199s sent (one by the forking proxy, and one by the UAS) is not a good thing.
> 
> 
> 
>>    Since all SIP entities involved in a session setup do not necessarily
>>    support the specific meaning of the 199 Early Dialog Terminated
>>    provisional response, the sender of the response MUST be prepared to
>>    receive SIP requests and responses associated with the dialog for
>>    which the 199 response was sent (a proxy may receive SIP messages
>>    from either direction).  If such request is received, and the
>>    receiver maintains state of the dialogs, the receiver MUST reply to
>>    such requests with a 481 final response.  A UAC that receives a 199
>>    response for an early dialog MUST NOT send any further requests on
>>    that dialog, except for requests which acknowledge reliable
>>    responses.
> 
>> I'm dubious of requiring, or even expecting or allowing, proxies to 
>> generate 481 responses. For instance, the UAC is still permitted to send 
>> PRACKs, and the proxies had better forward them. So I think it would be 
>> best for a proxy to always forward requests even if it thinks the dialog 
>> has ceased to exist.
> 
> Yes. I was thinking of an UAS only, so I will clarify that this does not apply to proxies.
> 
> 
> 
>>    NOTE: According to [RFC3262] and [RFC3264], if the INVITE request did
>>    not contain an SPD offer, the first relaible response (provisonal or
>>    final) MUST contain an SDP offer.  However, since 199 is only sent on
>>    established early dialog, it will never be the first response sent.
>>
>> IMO a better rationale here is that the 199 response is not sent 
>> reliably, and so isn't obligated to carry the offer. I think the above 
>> logic is weaker and questionable - an early dialog can be established 
> without sending a reliable response. And I *think* a 199 can still be 
>> used in that case.
>>
>> I guess the UAS is permitted to send a reliable 199, but it would be 
>> sufficient to say that it must not do so if that would obligate it to 
>> include an offer. Better yet, lets just say that 199 should *never* be 
>> sent reliably.
> 
> I have no problem saying that. But, again, I don't think there are cases where you would be obligated  to include an offer/answer in 199, because you have already sent at least one 18x.
> 
> Of course, one use-case is when the UAS first sends a 18x unreliably, and then send a 199 reliably. In this case, if the INVITE didn't contain an offer, the 199 would have to contain one, since it's the first RELIABLE provisional response sent.

Good - you found your own counterexample!

> But, I have no problem saying that 199 must not be sent reliably (not even by a UAS), if people are ok with that.
> 
> 
> 
>>    This section registers a new SIP response code, 199.  The required
>>    information for this registration, as specified in RFC 3261, is:
>>
>> I have mixed feelings about using "199" as the option-tag. It is 
>> syntactically valid, but using an all-numeric token bothers me. It could 
>> be something like "use199". But if nobody else is bothered by a numeric 
>> token I can live with it.
> 
> We can use another value, if someone comes up with something more sexy than "199" :)
> 
> Regards,
> 
> Christer
> 
> 
> 
> 
> 
> Christer Holmberg wrote:
>> Hi,
>>
>> Based on a large number of good comments and suggestions off-line I have
>> produced and submitted a new version (-01) of the draft-ietf-sip-199
>> draft.
>>
>> Until available, it can also be found at:
>>
>> http://users.piuha.net/cholmber/drafts/draft-ietf-sip-199-01.txt
>>
>> Some work is still needed on the security section.
>>
>> I also realized that, in the reference section, I still refer to the
>> dialog-usage draft document, eventhough it became an RFC.
>>
>> Regards,
>>
>> Christer
>>
>> _______________________________________________
>> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>
> 
> 
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Wed Aug 27 23:18:20 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 90FFB3A6996;
	Wed, 27 Aug 2008 23:18:20 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 60C073A6879
	for <sip@core3.amsl.com>; Wed, 27 Aug 2008 23:18:19 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -5.86
X-Spam-Level: 
X-Spam-Status: No, score=-5.86 tagged_above=-999 required=5 tests=[AWL=0.389, 
	BAYES_00=-2.599, HELO_EQ_SE=0.35, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id l6NZ-AK4X1OC for <sip@core3.amsl.com>;
	Wed, 27 Aug 2008 23:18:18 -0700 (PDT)
Received: from mailgw4.ericsson.se (mailgw4.ericsson.se [193.180.251.62])
	by core3.amsl.com (Postfix) with ESMTP id 0C1BF3A67F1
	for <sip@ietf.org>; Wed, 27 Aug 2008 23:18:17 -0700 (PDT)
Received: from mailgw4.ericsson.se (unknown [127.0.0.1])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	AF7EE205A9; Thu, 28 Aug 2008 08:17:49 +0200 (CEST)
X-AuditID: c1b4fb3e-a8e85bb000007a96-29-48b6430de554
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	8AAB320336; Thu, 28 Aug 2008 08:17:49 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Aug 2008 08:17:49 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 28 Aug 2008 08:17:48 +0200
Message-ID: <CA9998CD4A020D418654FCDEF4E707DF07A1A4F7@esealmw113.eemea.ericsson.se>
In-Reply-To: <48B5F53D.9090909@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: VS: [Sip] New version of draft-ietf-sip-199
Thread-Index: AckIp0so9yT1G+eCTBGKV/8Hdj4X2AALO4tQ
References: <CA9998CD4A020D418654FCDEF4E707DF079F23C0@esealmw113.eemea.ericsson.se>
	<48B5685B.1030106@cisco.com>
	<CA9998CD4A020D418654FCDEF4E707DF046C792D@esealmw113.eemea.ericsson.se>
	<48B5F53D.9090909@cisco.com>
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 28 Aug 2008 06:17:49.0408 (UTC)
	FILETIME=[CB9FE600:01C908D5]
X-Brightmail-Tracker: AAAAAA==
Cc: SIP IETF <sip@ietf.org>
Subject: Re: [Sip] New version of draft-ietf-sip-199
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org


Hi Paul, 

>>>Under what circumstances can it not be clear which usage the 199 
>>>applies to? AFAIK the 199 should only be used with an INVITE dialog 
>>>usage, and there can only be one of those per dialog. (We don't allow

>>>early dialogs for other usages.)
>> 
>>I think it's clear that the 199 applies to the invite dialog usage.
But, what if there are other usages? You would need to know whether the
error response which triggered the 199 also affects 
>>those usages.
>> 
>>Again, this would only happen if you have established the other usage
during the early phase of the invite dialog (which I think is only
theoretical).
>
>OK. I think I see what you are getting at, but it is somewhat obscure.
>
>Lets suppose for a minute we have an early invite dialog usage, and
have another dialog usage sharing the dialog with it. (E.g. maybe we
sent a REFER and got a refer subscription going.) [At 
>this point Robert runs out of the room, screaming.]
>
>Of course the invite was also forked, and we have another early dialog
going as well.
>
>Now something happens that leads the forking proxy to want to send a
199 response. Because this is a 1xx class response, it must be something
that has happened pertaining to the INVITE, since 
>we now only allow provisionals for INVITE. I guess the question is
whether the response that provokes the 199 might *also* imply the
termination of the dialog as a whole rather than just the 
>invite dialog usage. That can only be determined if the actual final
response is known, and we have excluded that have we not?

We have not excluded it, but we don't mandate it. 

In Dublin we decided that the 199 draft will not talk about transfering
SIP headers, response codes etc in the 199 response - but it won't
forbid it either. Then, if someone wants to use 199 e.g. to solve HERFP,
he/she will have to separately specify what headers to included.


>>>IMO a better rationale here is that the 199 response is not sent
reliably, and so isn't obligated to carry the offer. I think the 
>>>above logic is weaker and questionable - an early dialog can be
established
>>>without sending a reliable response. And I *think* a 199 can still be
used in that case.
>>>
>>>I guess the UAS is permitted to send a reliable 199, but it would be 
>>>sufficient to say that it must not do so if that would obligate it to

>>>include an offer. Better yet, lets just say that 199 should *never* 
>>>be sent reliably.
>> 
>>I have no problem saying that. But, again, I don't think there are
cases where you would be obligated  to include an offer/answer in 199,
because you have already sent at least one 18x.
>> 
>>Of course, one use-case is when the UAS first sends a 18x unreliably,
and then send a 199 reliably. In this case, if the INVITE didn't contain
an offer, the 199 would have to contain one, 
>>since it's the first RELIABLE provisional response sent.
>
>Good - you found your own counterexample!

DOH! :)

Of course, since it is only the UAS which is currently allowed to send
199 reliably, I guess it wouldn't matter even if the UAS inserted an SDP
body. But, if there are some entities which don't understand 199, they
may look at the SDP and think that the UAS is trying to establish a
media path, which is not good.

So, either we say that 199 must not (or should not, if there is a future
use-case where it would be useful to send it reliably) ne be sent
reliably, or we say that 199 should not (or must not) be sent reliably
if it is required to carry SDP.

Regards,

Christer

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 28 04:51:32 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5F0343A6B2E;
	Thu, 28 Aug 2008 04:51:32 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 4E95E3A6975
	for <sip@core3.amsl.com>; Thu, 28 Aug 2008 04:51:31 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 3.157
X-Spam-Level: ***
X-Spam-Status: No, score=3.157 tagged_above=-999 required=5
	tests=[BAYES_50=0.001, FH_RELAY_NODNS=1.451, HELO_MISMATCH_NET=0.611,
	RDNS_NONE=0.1, RELAY_IS_203=0.994]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SxItNa7i28vb for <sip@core3.amsl.com>;
	Thu, 28 Aug 2008 04:51:30 -0700 (PDT)
Received: from ns2.nestgroup.net (unknown [203.200.144.202])
	by core3.amsl.com (Postfix) with ESMTP id 156E23A68EC
	for <sip@ietf.org>; Thu, 28 Aug 2008 04:51:28 -0700 (PDT)
Received: from MAIL-TVM.tvm.nestgroup.net ([192.168.192.74])
	by ns2.nestgroup.net (8.13.1/8.13.1) with ESMTP id m7SCCNW8002133;
	Thu, 28 Aug 2008 17:42:41 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 28 Aug 2008 17:19:42 +0530
Message-ID: <9A1299C7A40D7447A108107E951450CA09AC9601@MAIL-TVM.tvm.nestgroup.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SIP Trunk implementation in a PBX
Thread-Index: AcjzvKE6oGL3Pp1SRQeu5RyMgz2FvAVRysMg
From: "Anisha Kumar" <anisha.kumar@nestgroup.net>
To: <discussion@sipforum.org>, <sip@ietf.org>
Subject: [Sip] SIP Trunk implementation in a PBX
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi all ,

  Is there any specification or RFC detailing the implementations for
SIP trunking. Can anyone provide details on how to implement SIP
trunking functionality to an existing IP-PBX ? Any inputs will be highly
useful.

 Awaiting a positive response.

Regards,
Anisha
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 28 07:16:12 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 9187F28C2D9;
	Thu, 28 Aug 2008 07:16:12 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id AFB7C28C2D9
	for <sip@core3.amsl.com>; Thu, 28 Aug 2008 07:16:11 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EpdxEoeRRtVN for <sip@core3.amsl.com>;
	Thu, 28 Aug 2008 07:16:10 -0700 (PDT)
Received: from ind-iport-1.cisco.com (ind-iport-1.cisco.com [64.104.129.195])
	by core3.amsl.com (Postfix) with ESMTP id E759928C2BC
	for <sip@ietf.org>; Thu, 28 Aug 2008 07:16:09 -0700 (PDT)
X-IronPort-AV: E=Sophos;i="4.32,286,1217808000"; d="scan'208";a="26892394"
Received: from hkg-dkim-1.cisco.com ([10.75.231.161])
	by ind-iport-1.cisco.com with ESMTP; 28 Aug 2008 14:16:05 +0000
Received: from hkg-core-1.cisco.com (hkg-core-1.cisco.com [64.104.123.94])
	by hkg-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id m7SEG4E4020999; 
	Thu, 28 Aug 2008 22:16:04 +0800
Received: from xbh-hkg-411.apac.cisco.com (xbh-hkg-411.cisco.com
	[64.104.123.72])
	by hkg-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id m7SEG4AF009685;
	Thu, 28 Aug 2008 14:16:04 GMT
Received: from xmb-hkg-412.apac.cisco.com ([64.104.123.84]) by
	xbh-hkg-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Aug 2008 22:16:04 +0800
X-Mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 28 Aug 2008 22:16:45 +0800
Message-ID: <F86B91A10B14744E88408E80B8A30EF30377C451@xmb-hkg-412.apac.cisco.com>
In-Reply-To: <9A1299C7A40D7447A108107E951450CA09AC9601@MAIL-TVM.tvm.nestgroup.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] SIP Trunk implementation in a PBX
Thread-Index: AcjzvKE6oGL3Pp1SRQeu5RyMgz2FvAVRysMgAAUzSiA=
References: <9A1299C7A40D7447A108107E951450CA09AC9601@MAIL-TVM.tvm.nestgroup.net>
From: "Rockson Li (zhengyli)" <zhengyli@cisco.com>
To: "Anisha Kumar" <anisha.kumar@nestgroup.net>, <discussion@sipforum.org>,
	<sip@ietf.org>
X-OriginalArrivalTime: 28 Aug 2008 14:16:04.0369 (UTC)
	FILETIME=[9B277810:01C90918]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=930; t=1219932964; x=1220796964;
	c=relaxed/simple; s=hkgdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=zhengyli@cisco.com;
	z=From:=20=22Rockson=20Li=20(zhengyli)=22=20<zhengyli@cisco.
	com>
	|Subject:=20RE=3A=20[Sip]=20SIP=20Trunk=20implementation=20
	in=20a=20PBX |Sender:=20;
	bh=ndTU8A9bdRrQg+qCND39UzM+1J4x2To5uEh4icDs780=;
	b=P5lrnTP4L+j5bUuB27GoGu52W4TC6EpcHTkOYb7ql9AXocn+ThZ2Fp0TJ9
	rGlsB2HfbWKBdQ9f/Q76dH11IVyhVWQxJvpM2dqO/9S/l7X/gV01ltc/WCb0
	XWhcMYyyJ1Na/F61iSPUvtjs3KFiqO4fAlntY+94LSeWRkWmf/x10=;
Authentication-Results: hkg-dkim-1; header.From=zhengyli@cisco.com; dkim=pass (
	sig from cisco.com/hkgdkim1002 verified; ); 
Subject: Re: [Sip] SIP Trunk implementation in a PBX
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

This draft might be helpful to you 
draft-rosenberg-sipping-siptrunk

-Rockson 

-----Original Message-----
From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
Anisha Kumar
Sent: Thursday, August 28, 2008 7:50 PM
To: discussion@sipforum.org; sip@ietf.org
Subject: [Sip] SIP Trunk implementation in a PBX

Hi all ,

  Is there any specification or RFC detailing the implementations for
SIP trunking. Can anyone provide details on how to implement SIP
trunking functionality to an existing IP-PBX ? Any inputs will be highly
useful.

 Awaiting a positive response.

Regards,
Anisha
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol Use
sip-implementors@cs.columbia.edu for questions on current sip Use
sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 28 07:17:47 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1DB4128C2F2;
	Thu, 28 Aug 2008 07:17:47 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5514F28C273
	for <sip@core3.amsl.com>; Thu, 28 Aug 2008 07:17:46 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -106.599
X-Spam-Level: 
X-Spam-Status: No, score=-106.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4, USER_IN_WHITELIST=-100]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id S9WIU-ANMf85 for <sip@core3.amsl.com>;
	Thu, 28 Aug 2008 07:17:42 -0700 (PDT)
Received: from mail121.messagelabs.com (mail121.messagelabs.com
	[216.82.245.115])
	by core3.amsl.com (Postfix) with ESMTP id F262028C2F2
	for <sip@ietf.org>; Thu, 28 Aug 2008 07:17:07 -0700 (PDT)
X-VirusChecked: Checked
X-Env-Sender: mdolly@att.com
X-Msg-Ref: server-5.tower-121.messagelabs.com!1219933021!25765755!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [144.160.20.54]
Received: (qmail 11910 invoked from network); 28 Aug 2008 14:17:01 -0000
Received: from sbcsmtp7.sbc.com (HELO mlpi135.enaf.sfdc.sbc.com)
	(144.160.20.54)
	by server-5.tower-121.messagelabs.com with AES256-SHA encrypted SMTP;
	28 Aug 2008 14:17:01 -0000
Received: from enaf.sfdc.sbc.com (localhost.localdomain [127.0.0.1])
	by mlpi135.enaf.sfdc.sbc.com (8.14.0/8.14.0) with ESMTP id
	m7SEH0aL007169; Thu, 28 Aug 2008 10:17:00 -0400
Received: from gaalpa1msgusr7e.ugd.att.com (gaalpa1msgusr7e.ugd.att.com
	[135.53.26.19])
	by mlpi135.enaf.sfdc.sbc.com (8.14.0/8.14.0) with ESMTP id
	m7SEGssw007114; Thu, 28 Aug 2008 10:16:55 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 28 Aug 2008 10:16:54 -0400
Message-ID: <14C85D6CCBE92743AF33663BF5D24EBA56E3AF@gaalpa1msgusr7e.ugd.att.com>
In-Reply-To: <F86B91A10B14744E88408E80B8A30EF30377C451@xmb-hkg-412.apac.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] SIP Trunk implementation in a PBX
Thread-Index: AcjzvKE6oGL3Pp1SRQeu5RyMgz2FvAVRysMgAAUzSiAAAAdA8A==
References: <9A1299C7A40D7447A108107E951450CA09AC9601@MAIL-TVM.tvm.nestgroup.net>
	<F86B91A10B14744E88408E80B8A30EF30377C451@xmb-hkg-412.apac.cisco.com>
From: "DOLLY, MARTIN C, ATTLABS" <mdolly@att.com>
To: "Rockson Li (zhengyli)" <zhengyli@cisco.com>,
	"Anisha Kumar" <anisha.kumar@nestgroup.net>, <discussion@sipforum.org>, 
	<sip@ietf.org>
Subject: Re: [Sip] SIP Trunk implementation in a PBX
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

NO 

-----Original Message-----
From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
Rockson Li (zhengyli)
Sent: Thursday, August 28, 2008 10:17 AM
To: Anisha Kumar; discussion@sipforum.org; sip@ietf.org
Subject: Re: [Sip] SIP Trunk implementation in a PBX

This draft might be helpful to you 
draft-rosenberg-sipping-siptrunk

-Rockson 

-----Original Message-----
From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
Anisha Kumar
Sent: Thursday, August 28, 2008 7:50 PM
To: discussion@sipforum.org; sip@ietf.org
Subject: [Sip] SIP Trunk implementation in a PBX

Hi all ,

  Is there any specification or RFC detailing the implementations for
SIP trunking. Can anyone provide details on how to implement SIP
trunking functionality to an existing IP-PBX ? Any inputs will be highly
useful.

 Awaiting a positive response.

Regards,
Anisha
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol Use
sip-implementors@cs.columbia.edu for questions on current sip Use
sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 28 07:40:59 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 58F063A6C96;
	Thu, 28 Aug 2008 07:40:59 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B34C63A6C96
	for <sip@core3.amsl.com>; Thu, 28 Aug 2008 07:40:57 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -1.392
X-Spam-Level: 
X-Spam-Status: No, score=-1.392 tagged_above=-999 required=5 tests=[AWL=1.207, 
	BAYES_00=-2.599]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Xh6TCPAS0vs3 for <sip@core3.amsl.com>;
	Thu, 28 Aug 2008 07:40:56 -0700 (PDT)
Received: from ihemail3.lucent.com (ihemail3.lucent.com [135.245.0.37])
	by core3.amsl.com (Postfix) with ESMTP id AA1433A6AEC
	for <sip@ietf.org>; Thu, 28 Aug 2008 07:40:55 -0700 (PDT)
Received: from umail.lucent.com (h135-3-40-61.lucent.com [135.3.40.61])
	by ihemail3.lucent.com (8.13.8/IER-o) with ESMTP id m7SEd5kl007321
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Thu, 28 Aug 2008 09:39:05 -0500 (CDT)
Received: from [135.185.236.17] (il0015vkg1.ih.lucent.com [135.185.236.17])
	by umail.lucent.com (8.13.8/TPES) with ESMTP id m7SEd3eI002821;
	Thu, 28 Aug 2008 09:39:04 -0500 (CDT)
Message-ID: <48B6B887.50205@alcatel-lucent.com>
Date: Thu, 28 Aug 2008 09:39:03 -0500
From: "Vijay K. Gurbani" <vkg@alcatel-lucent.com>
Organization: Bell Labs Security Technology Research Group
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: Anisha Kumar <anisha.kumar@nestgroup.net>
References: <9A1299C7A40D7447A108107E951450CA09AC9601@MAIL-TVM.tvm.nestgroup.net>
In-Reply-To: <9A1299C7A40D7447A108107E951450CA09AC9601@MAIL-TVM.tvm.nestgroup.net>
X-Scanned-By: MIMEDefang 2.57 on 135.245.2.37
Cc: sip@ietf.org, discussion@sipforum.org
Subject: Re: [Sip] SIP Trunk implementation in a PBX
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Anisha Kumar wrote:
> Hi all ,
> 
>   Is there any specification or RFC detailing the implementations for
> SIP trunking. Can anyone provide details on how to implement SIP
> trunking functionality to an existing IP-PBX ? Any inputs will be highly
> useful.

Anisha: There isn't an RFC or I-D that details specific
implementation aspects on SIP trunking that I am aware of.

That said, there is some work on this topic in the SIP Forum in
the form of IP peering arrangements between SIP-enabled IP PBXes
and SIP-enabled service providers.  The SIPConnect specification is
probably the closest to what you are looking for (see
http://www.sipforum.org/component/option,com_docman/task,doc_download/gid,134/Itemid,75/)

You may also want to glance at the speermint (see
http://www.ietf.org/html.charters/speermint-charter.html), and
to a lesser extent the newly formed drinks WG (see
http://www.ietf.org/html.charters/drinks-charter.html)
for information tangentially related to your topic.

Hope that helps.

- vijay
-- 
Vijay K. Gurbani, Bell Laboratories, Alcatel-Lucent
1960 Lucent Lane, Rm. 9C-533, Naperville, Illinois 60566 (USA)
Email: vkg@{alcatel-lucent.com,bell-labs.com,acm.org}
WWW:   http://www.alcatel-lucent.com/bell-labs
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 28 08:18:32 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B22373A690F;
	Thu, 28 Aug 2008 08:18:32 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id BACB43A690F
	for <sip@core3.amsl.com>; Thu, 28 Aug 2008 08:18:30 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -6.599
X-Spam-Level: 
X-Spam-Status: No, score=-6.599 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, RCVD_IN_DNSWL_MED=-4]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5wCdAEDjB3qA for <sip@core3.amsl.com>;
	Thu, 28 Aug 2008 08:18:30 -0700 (PDT)
Received: from mail119.messagelabs.com (mail119.messagelabs.com
	[216.82.245.51]) by core3.amsl.com (Postfix) with SMTP id B77A33A6880
	for <sip@ietf.org>; Thu, 28 Aug 2008 08:18:29 -0700 (PDT)
X-VirusChecked: Checked
X-Env-Sender: sam.ganesan@motorola.com
X-Msg-Ref: server-12.tower-119.messagelabs.com!1219936688!32074218!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [136.182.1.15]
Received: (qmail 26710 invoked from network); 28 Aug 2008 15:18:08 -0000
Received: from unknown (HELO motgate5.mot.com) (136.182.1.15)
	by server-12.tower-119.messagelabs.com with SMTP;
	28 Aug 2008 15:18:08 -0000
Received: from il27exr01.cig.mot.com ([10.17.196.70])
	by motgate5.mot.com (8.12.11/Motorola) with ESMTP id m7SFI7Z8011559
	for <sip@ietf.org>; Thu, 28 Aug 2008 08:18:07 -0700 (MST)
Received: from az10vts04.mot.com (il27vts04.cig.mot.com [10.17.196.88])
	by il27exr01.cig.mot.com (8.13.1/Vontu) with SMTP id m7SFI6Ya024975
	for <sip@ietf.org>; Thu, 28 Aug 2008 10:18:07 -0500 (CDT)
Received: from de01exm62.ds.mot.com (de01exm62.am.mot.com [10.176.8.107])
	by il27exr01.cig.mot.com (8.13.1/8.13.0) with ESMTP id m7SFI54x024966
	for <sip@ietf.org>; Thu, 28 Aug 2008 10:18:06 -0500 (CDT)
Received: from 10.177.8.42 ([10.177.8.42]) by de01exm62.ds.mot.com
	([10.176.8.107]) with Microsoft Exchange Server HTTP-DAV ; 
	Thu, 28 Aug 2008 15:18:03 +0000
MIME-Version: 1.0
Message-ID: <1671201c90921$43e20465$2a08b10a@ds.mot.com>
Content-class: 
thread-topic: [Sip] SIP Trunk implementation in a PBX
thread-index: AcjzvKE6oGL3Pp1SRQeu5RyMgz2FvAVRysMgAAUzSiAAAiqcnw==
X-MimeOLE: Produced By Microsoft Exchange V6.5
From: "Ganesan Sam-W00184" <sam.ganesan@motorola.com>
Date: Thu, 28 Aug 2008 11:18:01 -0400
Importance: normal
X-Priority: 3
To: "Rockson Li (zhengyli)" <zhengyli@cisco.com>,
	"Anisha Kumar" <anisha.kumar@nestgroup.net>, <discussion@sipforum.org>, 
	<sip@ietf.org>
X-CFilter-Loop: Reflected
Subject: Re: [Sip] SIP Trunk implementation in a PBX
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

NOOOOOOOOOOOOO

Sam Ganesan 
--sent from my Q--

-----Original Message-----
From: Rockson Li (zhengyli) <zhengyli@cisco.com>
Sent: Thursday, August 28, 2008 10:16 AM
To: Anisha Kumar <anisha.kumar@nestgroup.net>; discussion@sipforum.org <discussion@sipforum.org>; sip@ietf.org <sip@ietf.org>
Subject: Re: [Sip] SIP Trunk implementation in a PBX

This draft might be helpful to you 
draft-rosenberg-sipping-siptrunk

-Rockson 

-----Original Message-----
From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
Anisha Kumar
Sent: Thursday, August 28, 2008 7:50 PM
To: discussion@sipforum.org; sip@ietf.org
Subject: [Sip] SIP Trunk implementation in a PBX

Hi all ,

  Is there any specification or RFC detailing the implementations for
SIP trunking. Can anyone provide details on how to implement SIP
trunking functionality to an existing IP-PBX ? Any inputs will be highly
useful.

 Awaiting a positive response.

Regards,
Anisha
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol Use
sip-implementors@cs.columbia.edu for questions on current sip Use
sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 28 10:03:50 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D234F28C152;
	Thu, 28 Aug 2008 10:03:50 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 8EF3E3A6C15
	for <sip@core3.amsl.com>; Thu, 28 Aug 2008 10:03:49 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.747
X-Spam-Level: 
X-Spam-Status: No, score=-0.747 tagged_above=-999 required=5
	tests=[AWL=-1.048, BAYES_50=0.001, MIME_8BIT_HEADER=0.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ErgcCcRoumUf for <sip@core3.amsl.com>;
	Thu, 28 Aug 2008 10:03:45 -0700 (PDT)
Received: from ebru.winwebhosting.com (ebru.winwebhosting.com [74.55.202.130])
	by core3.amsl.com (Postfix) with ESMTP id A99783A6823
	for <sip@ietf.org>; Thu, 28 Aug 2008 10:03:45 -0700 (PDT)
Received: from neustargw.va.neustar.com ([209.173.53.233] helo=BROSLT61xp)
	by ebru.winwebhosting.com with esmtpa (Exim 4.69)
	(envelope-from <br@brianrosen.net>)
	id 1KYkuG-0004Pj-Op; Thu, 28 Aug 2008 12:03:37 -0500
From: "Brian Rosen" <br@brianrosen.net>
To: =?iso-8859-2?Q?'Bart=B3omiej_Ko=B3akowski'?= <b.kolakowski@plus.pl>,
	<draft-ietf-sip-location-conveyance@tools.ietf.org>, <sip@ietf.org>
References: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
	<008301c8fd82$96c29710$0c00a8c0@cis.neustar.com>
	<31CB570C7D71214790963DB8A02D07A810A412C6@E2K2.corp.plusnet>
Date: Thu, 28 Aug 2008 13:03:39 -0400
Message-ID: <03f401c90930$06473560$640fa8c0@cis.neustar.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: Acj9TWvzdojVJbMCQoKKMyiekh68ngAM8MgwAuY0fZAABXnTsA==
In-Reply-To: <31CB570C7D71214790963DB8A02D07A810A412C6@E2K2.corp.plusnet>
X-AntiAbuse: This header was added to track abuse,
	please include it with any abuse report
X-AntiAbuse: Primary Hostname - ebru.winwebhosting.com
X-AntiAbuse: Original Domain - ietf.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - brianrosen.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 
Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question about
	potential usage of the Geolocation header
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

There is no standard to include a cell-id in a PIDF-LO.  It has been
discussed 2-3 times and the consensus was that it's a bad idea.

Brian

> -----Original Message-----
> From: Bart=B3omiej Ko=B3akowski [mailto:b.kolakowski@plus.pl]
> Sent: Thursday, August 28, 2008 10:32 AM
> To: Brian Rosen; draft-ietf-sip-location-conveyance@tools.ietf.org;
> sip@ietf.org
> Subject: RE: draft-ietf-sip-location-conveyance - Question about potential
> usage of the Geolocation header
> =

> Thanks for reply Brian.
> Probably we'll go for the SUBSCRIBE/NOTIFY option. We'd rather keep cell
> ids inside our network, but anyway it's not really possible (see Google's
> My Location). So far we won't have any 3rd parties connected to IMS
> though.
> =

> Do you know if there is any standard to include a cell-id into PIDF-LO?
> =

> Bartek
> =

> =

> -----Original Message-----
> From: Brian Rosen [mailto:br@brianrosen.net]
> Sent: Wednesday, August 13, 2008 10:24 PM
> To: Bart=B3omiej Ko=B3akowski; draft-ietf-sip-location-
> conveyance@tools.ietf.org; sip@ietf.org
> Subject: RE: draft-ietf-sip-location-conveyance - Question about potential
> usage of the Geolocation header
> =

> You can use the "HELD" protocol, rather than a SIP SUBSCRIBE/NOTIFY for
> the dereference, if that makes it seem simpler to you.  SUBSCRIBE/NOTIFY
> is quite simple, and most devices and services implement it for other
> reasons.
> =

> We have discussed using cell-id as a representation mechanism, but have
> been told, many times, that operators will not divulge location of cell
> ids beyond the immediate network, which makes this form of location
> entirely
> unsuitable for the range of applications we envisioned.   If you have
> different information, please share it.
> =

> On the other hand, even if we did allow cell id as a form of location, it
> would be inside a PIDF-LO, and thus would need to be in a body.
> =

> I don't think putting actual location in the header is a good idea, as it
> cannot be protected against inadvertent disclosure.  That would be a
> problem in the IETF.
> =

> Brian
> ________________________________________
> From: Bart=B3omiej Ko=B3akowski [mailto:b.kolakowski@plus.pl]
> Sent: Wednesday, August 13, 2008 10:04 AM
> To: draft-ietf-sip-location-conveyance@tools.ietf.org; sip@ietf.org
> Subject: draft-ietf-sip-location-conveyance - Question about potential
> usage of the Geolocation header
> =

> Hello,
> I have got such concern regarding location conveyance in SIP messages: I
> am designing IMS Appilcation Server, acting as a proxy, that would query
> network elements for location information. As you wrote proxies cannot
> insert message body, so the only way is to provide location by reference.
> This requires appling SUBSCRIBE-NOTIFY mechanism, which makes the
> architecture of the solution quit complex.
> In order to make it simpler I thought about including location information
> as locationValue inside the Geolocation header. In fact we do not need
> location represented with coordinates, but with cell-id (that's mobile
> network). PIDF-LO does not support it, but maybe inside a header that
> would be possible? There would be also an issue in indicating loaction
> target whose location is included (we plan to include both A and B parties
> location). Geolocation header would look like this:
> Geolocation: {cell-id-3gpp}
> ;location-target=3D"bob@plus.pl";inserted-by=3D"las@plus.pl"
> What do you think about souch a usage of Geolocation header, maybe you
> could give us some other solution?
> Thank you in advance,
> Bart=B3omiej Ko=B3akowski
> Service Solutions Architect
> Service Development Support Department
> Polkomtel S.A
> tel. 601131509

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 28 18:01:15 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 104CC3A6C93;
	Thu, 28 Aug 2008 18:01:15 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id D5B7F3A6A7D
	for <sip@core3.amsl.com>; Thu, 28 Aug 2008 18:01:13 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.903
X-Spam-Level: 
X-Spam-Status: No, score=-0.903 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, MIME_8BIT_HEADER=0.3, MIME_QP_LONG_LINE=1.396]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AAbDOvJE2as8 for <sip@core3.amsl.com>;
	Thu, 28 Aug 2008 18:01:12 -0700 (PDT)
Received: from andrew.com (smtp3.andrew.com [198.135.207.235])
	by core3.amsl.com (Postfix) with ESMTP id C17FD3A6990
	for <sip@ietf.org>; Thu, 28 Aug 2008 18:01:12 -0700 (PDT)
X-SEF-Processed: 5_0_0_910__2008_08_28_20_17_08
X-SEF-16EBA1E9-99E8-4E1D-A1CA-4971F5510AF: 1
Received: from acdcexbh1.andrew.com [10.86.20.91] by smtp3.andrew.com -
	SurfControl E-mail Filter (5.2.1); Thu, 28 Aug 2008 20:17:08 -0500
Received: from AHQEX1.andrew.com ([10.86.20.21]) by acdcexbh1.andrew.com with
	Microsoft SMTPSVC(6.0.3790.3959); Thu, 28 Aug 2008 20:01:03 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 28 Aug 2008 20:01:01 -0500
Message-ID: <E51D5B15BFDEFD448F90BDD17D41CFF104C3E4E9@AHQEX1.andrew.com>
In-Reply-To: <03f401c90930$06473560$640fa8c0@cis.neustar.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] draft-ietf-sip-location-conveyance - Question
	aboutpotential usage of the Geolocation header
Thread-Index: Acj9TWvzdojVJbMCQoKKMyiekh68ngAM8MgwAuY0fZAABXnTsAAQlWCA
References: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet><008301c8fd82$96c29710$0c00a8c0@cis.neustar.com><31CB570C7D71214790963DB8A02D07A810A412C6@E2K2.corp.plusnet>
	<03f401c90930$06473560$640fa8c0@cis.neustar.com>
From: "Winterbottom, James" <James.Winterbottom@andrew.com>
To: "Brian Rosen" <br@brianrosen.net>,
	=?iso-8859-2?Q?Bart=B3omiej_Ko=B3akowski?= <b.kolakowski@plus.pl>,
	<draft-ietf-sip-location-conveyance@tools.ietf.org>, <sip@ietf.org>
X-OriginalArrivalTime: 29 Aug 2008 01:01:03.0278 (UTC)
	FILETIME=[B5805CE0:01C90972]
Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question
	aboutpotential usage of the Geolocation header
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Depending on you application, providing a location by reference does not re=
quire a subscribe notification, though it does require a dereference.
http://tools.ietf.org/html/draft-winterbottom-geopriv-deref-protocol-02 is =
one example of how you can do this without a SUBSCRIBE/NOTIFY.

Cheers
James




> -----Original Message-----
> From: sip-bounces@ietf.org [mailto:sip-bounces@ietf.org] On Behalf Of
> Brian Rosen
> Sent: Friday, 29 August 2008 3:04 AM
> To: 'Bart=B3omiej Ko=B3akowski'; draft-ietf-sip-location-
> conveyance@tools.ietf.org; sip@ietf.org
> Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question
> aboutpotential usage of the Geolocation header
> =

> There is no standard to include a cell-id in a PIDF-LO.  It has been
> discussed 2-3 times and the consensus was that it's a bad idea.
> =

> Brian
> =

> > -----Original Message-----
> > From: Bart=B3omiej Ko=B3akowski [mailto:b.kolakowski@plus.pl]
> > Sent: Thursday, August 28, 2008 10:32 AM
> > To: Brian Rosen; draft-ietf-sip-location-conveyance@tools.ietf.org;
> > sip@ietf.org
> > Subject: RE: draft-ietf-sip-location-conveyance - Question about
> potential
> > usage of the Geolocation header
> >
> > Thanks for reply Brian.
> > Probably we'll go for the SUBSCRIBE/NOTIFY option. We'd rather keep cell
> > ids inside our network, but anyway it's not really possible (see
> Google's
> > My Location). So far we won't have any 3rd parties connected to IMS
> > though.
> >
> > Do you know if there is any standard to include a cell-id into PIDF-LO?
> >
> > Bartek
> >
> >
> > -----Original Message-----
> > From: Brian Rosen [mailto:br@brianrosen.net]
> > Sent: Wednesday, August 13, 2008 10:24 PM
> > To: Bart=B3omiej Ko=B3akowski; draft-ietf-sip-location-
> > conveyance@tools.ietf.org; sip@ietf.org
> > Subject: RE: draft-ietf-sip-location-conveyance - Question about
> potential
> > usage of the Geolocation header
> >
> > You can use the "HELD" protocol, rather than a SIP SUBSCRIBE/NOTIFY for
> > the dereference, if that makes it seem simpler to you.  SUBSCRIBE/NOTIFY
> > is quite simple, and most devices and services implement it for other
> > reasons.
> >
> > We have discussed using cell-id as a representation mechanism, but have
> > been told, many times, that operators will not divulge location of cell
> > ids beyond the immediate network, which makes this form of location
> > entirely
> > unsuitable for the range of applications we envisioned.   If you have
> > different information, please share it.
> >
> > On the other hand, even if we did allow cell id as a form of location,
> it
> > would be inside a PIDF-LO, and thus would need to be in a body.
> >
> > I don't think putting actual location in the header is a good idea, as
> it
> > cannot be protected against inadvertent disclosure.  That would be a
> > problem in the IETF.
> >
> > Brian
> > ________________________________________
> > From: Bart=B3omiej Ko=B3akowski [mailto:b.kolakowski@plus.pl]
> > Sent: Wednesday, August 13, 2008 10:04 AM
> > To: draft-ietf-sip-location-conveyance@tools.ietf.org; sip@ietf.org
> > Subject: draft-ietf-sip-location-conveyance - Question about potential
> > usage of the Geolocation header
> >
> > Hello,
> > I have got such concern regarding location conveyance in SIP messages: I
> > am designing IMS Appilcation Server, acting as a proxy, that would query
> > network elements for location information. As you wrote proxies cannot
> > insert message body, so the only way is to provide location by referenc=
e.
> > This requires appling SUBSCRIBE-NOTIFY mechanism, which makes the
> > architecture of the solution quit complex.
> > In order to make it simpler I thought about including location
> information
> > as locationValue inside the Geolocation header. In fact we do not need
> > location represented with coordinates, but with cell-id (that's mobile
> > network). PIDF-LO does not support it, but maybe inside a header that
> > would be possible? There would be also an issue in indicating loaction
> > target whose location is included (we plan to include both A and B
> parties
> > location). Geolocation header would look like this:
> > Geolocation: {cell-id-3gpp}
> > ;location-target=3D"bob@plus.pl";inserted-by=3D"las@plus.pl"
> > What do you think about souch a usage of Geolocation header, maybe you
> > could give us some other solution?
> > Thank you in advance,
> > Bart=B3omiej Ko=B3akowski
> > Service Solutions Architect
> > Service Development Support Department
> > Polkomtel S.A
> > tel. 601131509
> =

> _______________________________________________
> Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

---------------------------------------------------------------------------=
---------------------
This message is for the designated recipient only and may
contain privileged, proprietary, or otherwise private information.  =

If you have received it in error, please notify the sender
immediately and delete the original.  Any unauthorized use of
this email is prohibited.
---------------------------------------------------------------------------=
---------------------
[mf2]

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Thu Aug 28 21:46:21 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 5CE883A6913;
	Thu, 28 Aug 2008 21:46:21 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id EB9773A6913
	for <sip@core3.amsl.com>; Thu, 28 Aug 2008 21:46:19 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 1.857
X-Spam-Level: *
X-Spam-Status: No, score=1.857 tagged_above=-999 required=5 tests=[AWL=1.300, 
	BAYES_00=-2.599, FH_RELAY_NODNS=1.451, HELO_MISMATCH_NET=0.611, 
	RDNS_NONE=0.1, RELAY_IS_203=0.994]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ggvUvwCrk4np for <sip@core3.amsl.com>;
	Thu, 28 Aug 2008 21:46:18 -0700 (PDT)
Received: from ns2.nestgroup.net (unknown [203.200.144.202])
	by core3.amsl.com (Postfix) with ESMTP id DC51D3A680F
	for <sip@ietf.org>; Thu, 28 Aug 2008 21:46:16 -0700 (PDT)
Received: from MAIL-TVM.tvm.nestgroup.net ([192.168.192.74])
	by ns2.nestgroup.net (8.13.1/8.13.1) with ESMTP id m7T57RXb011805;
	Fri, 29 Aug 2008 10:37:34 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 29 Aug 2008 10:14:30 +0530
Message-ID: <9A1299C7A40D7447A108107E951450CA09B02E05@MAIL-TVM.tvm.nestgroup.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] SIP Trunk implementation in a PBX
Thread-Index: AckJG/KErxkh0JvFQ0CFnLX6V0W3bgAdbAcg
From: "Anisha Kumar" <anisha.kumar@nestgroup.net>
To: <discussion@sipforum.org>, <sip@ietf.org>
Subject: Re: [Sip] SIP Trunk implementation in a PBX
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Hi all, 

 Thank you Vijay, Dan, Rockson for your valuable suggestions and guiding
me in looking at the proper places. I would refer them and get back in
case of any queries. 

 Regards,
anisha 

-----Original Message-----
From: Vijay K. Gurbani [mailto:vkg@alcatel-lucent.com] 
Sent: Thursday, August 28, 2008 8:09 PM
To: Anisha Kumar
Cc: discussion@sipforum.org; sip@ietf.org
Subject: Re: [Sip] SIP Trunk implementation in a PBX

Anisha Kumar wrote:
> Hi all ,
> 
>   Is there any specification or RFC detailing the implementations for 
> SIP trunking. Can anyone provide details on how to implement SIP 
> trunking functionality to an existing IP-PBX ? Any inputs will be 
> highly useful.

Anisha: There isn't an RFC or I-D that details specific implementation
aspects on SIP trunking that I am aware of.

That said, there is some work on this topic in the SIP Forum in the form
of IP peering arrangements between SIP-enabled IP PBXes and SIP-enabled
service providers.  The SIPConnect specification is probably the closest
to what you are looking for (see
http://www.sipforum.org/component/option,com_docman/task,doc_download/gi
d,134/Itemid,75/)

You may also want to glance at the speermint (see
http://www.ietf.org/html.charters/speermint-charter.html), and to a
lesser extent the newly formed drinks WG (see
http://www.ietf.org/html.charters/drinks-charter.html)
for information tangentially related to your topic.

Hope that helps.

- vijay
--
Vijay K. Gurbani, Bell Laboratories, Alcatel-Lucent 1960 Lucent Lane,
Rm. 9C-533, Naperville, Illinois 60566 (USA)
Email: vkg@{alcatel-lucent.com,bell-labs.com,acm.org}
WWW:   http://www.alcatel-lucent.com/bell-labs
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug 30 10:01:32 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 25D9A3A67D7;
	Sat, 30 Aug 2008 10:01:32 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 1EF623A6C8D
	for <sip@core3.amsl.com>; Thu, 28 Aug 2008 07:33:05 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 2.2
X-Spam-Level: **
X-Spam-Status: No, score=2.2 tagged_above=-999 required=5
	tests=[BAYES_40=-0.185, HELO_EQ_PL=1.135, HOST_EQ_PL=1.95,
	MIME_8BIT_HEADER=0.3, RCVD_IN_DNSWL_LOW=-1]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uIJkN+JPxQ1X for <sip@core3.amsl.com>;
	Thu, 28 Aug 2008 07:33:01 -0700 (PDT)
Received: from plusmx1.polkomtel.com.pl (plusmx1.polkomtel.com.pl
	[212.2.96.51]) by core3.amsl.com (Postfix) with ESMTP id 013293A6CB2
	for <sip@ietf.org>; Thu, 28 Aug 2008 07:33:00 -0700 (PDT)
Received: from mswwaw1.corp.plusnet (plus-96-161.polkomtel.com.pl
	[212.2.96.161])
	by plusmx1.polkomtel.com.pl (Postfix) with ESMTP id B3F6733A6B5
	for <sip@ietf.org>; Thu, 28 Aug 2008 16:33:02 +0200 (CEST)
Received: from E2K2.corp.plusnet (MCSGEO2N4B.corp.plusnet) by
	mswwaw1.corp.plusnet
	(Content Technologies SMTPRS 4.3.20) with ESMTP id
	<T891691ec4ec0a8011db30@mswwaw1.corp.plusnet>; 
	Thu, 28 Aug 2008 16:33:01 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 28 Aug 2008 16:31:37 +0200
Message-ID: <31CB570C7D71214790963DB8A02D07A810A412C6@E2K2.corp.plusnet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: draft-ietf-sip-location-conveyance - Question about potential
	usage of the Geolocation header
Thread-Index: Acj9TWvzdojVJbMCQoKKMyiekh68ngAM8MgwAuY0fZA=
References: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
	<008301c8fd82$96c29710$0c00a8c0@cis.neustar.com>
From: =?iso-8859-2?Q?Bart=B3omiej_Ko=B3akowski?= <b.kolakowski@plus.pl>
To: "Brian Rosen" <br@brianrosen.net>,
	<draft-ietf-sip-location-conveyance@tools.ietf.org>, <sip@ietf.org>
X-Mailman-Approved-At: Sat, 30 Aug 2008 10:01:30 -0700
Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question about
	potential usage of the Geolocation header
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

Thanks for reply Brian.
Probably we'll go for the SUBSCRIBE/NOTIFY option. We'd rather keep cell id=
s inside our network, but anyway it's not really possible (see Google's My =
Location). So far we won't have any 3rd parties connected to IMS though.

Do you know if there is any standard to include a cell-id into PIDF-LO?

Bartek


-----Original Message-----
From: Brian Rosen [mailto:br@brianrosen.net] =

Sent: Wednesday, August 13, 2008 10:24 PM
To: Bart=B3omiej Ko=B3akowski; draft-ietf-sip-location-conveyance@tools.iet=
f.org; sip@ietf.org
Subject: RE: draft-ietf-sip-location-conveyance - Question about potential =
usage of the Geolocation header

You can use the "HELD" protocol, rather than a SIP SUBSCRIBE/NOTIFY for the=
 dereference, if that makes it seem simpler to you.  SUBSCRIBE/NOTIFY is qu=
ite simple, and most devices and services implement it for other reasons.

We have discussed using cell-id as a representation mechanism, but have bee=
n told, many times, that operators will not divulge location of cell ids be=
yond the immediate network, which makes this form of location entirely
unsuitable for the range of applications we envisioned.   If you have
different information, please share it.

On the other hand, even if we did allow cell id as a form of location, it w=
ould be inside a PIDF-LO, and thus would need to be in a body.

I don't think putting actual location in the header is a good idea, as it c=
annot be protected against inadvertent disclosure.  That would be a problem=
 in the IETF.

Brian
________________________________________
From: Bart=B3omiej Ko=B3akowski [mailto:b.kolakowski@plus.pl]
Sent: Wednesday, August 13, 2008 10:04 AM
To: draft-ietf-sip-location-conveyance@tools.ietf.org; sip@ietf.org
Subject: draft-ietf-sip-location-conveyance - Question about potential usag=
e of the Geolocation header

Hello,
I have got such concern regarding location conveyance in SIP messages: I am=
 designing IMS Appilcation Server, acting as a proxy, that would query netw=
ork elements for location information. As you wrote proxies cannot insert m=
essage body, so the only way is to provide location by reference.
This requires appling SUBSCRIBE-NOTIFY mechanism, which makes the architect=
ure of the solution quit complex.
In order to make it simpler I thought about including location information =
as locationValue inside the Geolocation header. In fact we do not need loca=
tion represented with coordinates, but with cell-id (that's mobile network)=
. PIDF-LO does not support it, but maybe inside a header that would be poss=
ible? There would be also an issue in indicating loaction target whose loca=
tion is included (we plan to include both A and B parties location). Geoloc=
ation header would look like this:
Geolocation: {cell-id-3gpp}
;location-target=3D"bob@plus.pl";inserted-by=3D"las@plus.pl" =

What do you think about souch a usage of Geolocation header, maybe you coul=
d give us some other solution? =

Thank you in advance,
Bart=B3omiej Ko=B3akowski
Service Solutions Architect
Service Development Support Department
Polkomtel S.A
tel. 601131509 =


_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug 30 10:03:07 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 75C9728C0DD;
	Sat, 30 Aug 2008 10:03:07 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 150D23A67B0
	for <sip@core3.amsl.com>; Fri, 29 Aug 2008 08:12:19 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.993
X-Spam-Level: 
X-Spam-Status: No, score=0.993 tagged_above=-999 required=5 tests=[AWL=1.207, 
	BAYES_00=-2.599, HELO_EQ_PL=1.135, HOST_EQ_PL=1.95,
	MIME_8BIT_HEADER=0.3, RCVD_IN_DNSWL_LOW=-1]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7q6V5qVxcURE for <sip@core3.amsl.com>;
	Fri, 29 Aug 2008 08:12:18 -0700 (PDT)
Received: from plusmx1.polkomtel.com.pl (plusmx1.polkomtel.com.pl
	[212.2.96.51]) by core3.amsl.com (Postfix) with ESMTP id D2A403A68BC
	for <sip@ietf.org>; Fri, 29 Aug 2008 08:12:16 -0700 (PDT)
Received: from mswwaw3.corp.plusnet (plus-96-163.polkomtel.com.pl
	[212.2.96.163])
	by plusmx1.polkomtel.com.pl (Postfix) with ESMTP id 466AD33A6DC
	for <sip@ietf.org>; Fri, 29 Aug 2008 17:12:17 +0200 (CEST)
Received: from E2K2.corp.plusnet (mcsgeo2n4b.corp.plusnet) by
	mswwaw3.corp.plusnet
	(Content Technologies SMTPRS 4.3.20) with ESMTP id
	<T891bd7b8d10a0b4d0ed0c@mswwaw3.corp.plusnet>; 
	Fri, 29 Aug 2008 17:07:21 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 29 Aug 2008 17:05:44 +0200
Message-ID: <31CB570C7D71214790963DB8A02D07A810A412DA@E2K2.corp.plusnet>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: draft-ietf-sip-location-conveyance - Question about potential
	usage of the Geolocation header
Thread-Index: Acj9TWvzdojVJbMCQoKKMyiekh68ngAM8MgwAuY0fZAABXnTsAAuJM2g
References: <31CB570C7D71214790963DB8A02D07A810A41295@E2K2.corp.plusnet>
	<008301c8fd82$96c29710$0c00a8c0@cis.neustar.com>
	<31CB570C7D71214790963DB8A02D07A810A412C6@E2K2.corp.plusnet>
	<03f401c90930$06473560$640fa8c0@cis.neustar.com>
From: =?iso-8859-2?Q?Bart=B3omiej_Ko=B3akowski?= <b.kolakowski@plus.pl>
To: "Brian Rosen" <br@brianrosen.net>,
	<draft-ietf-sip-location-conveyance@tools.ietf.org>, <sip@ietf.org>
X-Mailman-Approved-At: Sat, 30 Aug 2008 10:03:06 -0700
Subject: Re: [Sip] draft-ietf-sip-location-conveyance - Question about
	potential usage of the Geolocation header
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

In that case we will try to extend PIDF-LO and add a cell-id tag under <loc=
ation-info>.

Best wishes,
Bartek =



-----Original Message-----
From: Brian Rosen [mailto:br@brianrosen.net] =

Sent: Thursday, August 28, 2008 7:04 PM
To: Bart=B3omiej Ko=B3akowski; draft-ietf-sip-location-conveyance@tools.iet=
f.org; sip@ietf.org
Subject: RE: draft-ietf-sip-location-conveyance - Question about potential =
usage of the Geolocation header

There is no standard to include a cell-id in a PIDF-LO.  It has been discus=
sed 2-3 times and the consensus was that it's a bad idea.

Brian

> -----Original Message-----
> From: Bart=B3omiej Ko=B3akowski [mailto:b.kolakowski@plus.pl]
> Sent: Thursday, August 28, 2008 10:32 AM
> To: Brian Rosen; draft-ietf-sip-location-conveyance@tools.ietf.org;
> sip@ietf.org
> Subject: RE: draft-ietf-sip-location-conveyance - Question about =

> potential usage of the Geolocation header
> =

> Thanks for reply Brian.
> Probably we'll go for the SUBSCRIBE/NOTIFY option. We'd rather keep =

> cell ids inside our network, but anyway it's not really possible (see =

> Google's My Location). So far we won't have any 3rd parties connected =

> to IMS though.
> =

> Do you know if there is any standard to include a cell-id into PIDF-LO?
> =

> Bartek
> =

> =

> -----Original Message-----
> From: Brian Rosen [mailto:br@brianrosen.net]
> Sent: Wednesday, August 13, 2008 10:24 PM
> To: Bart=B3omiej Ko=B3akowski; draft-ietf-sip-location- =

> conveyance@tools.ietf.org; sip@ietf.org
> Subject: RE: draft-ietf-sip-location-conveyance - Question about =

> potential usage of the Geolocation header
> =

> You can use the "HELD" protocol, rather than a SIP SUBSCRIBE/NOTIFY =

> for the dereference, if that makes it seem simpler to you.  =

> SUBSCRIBE/NOTIFY is quite simple, and most devices and services =

> implement it for other reasons.
> =

> We have discussed using cell-id as a representation mechanism, but =

> have been told, many times, that operators will not divulge location =

> of cell ids beyond the immediate network, which makes this form of =

> location entirely
> unsuitable for the range of applications we envisioned.   If you have
> different information, please share it.
> =

> On the other hand, even if we did allow cell id as a form of location, =

> it would be inside a PIDF-LO, and thus would need to be in a body.
> =

> I don't think putting actual location in the header is a good idea, as =

> it cannot be protected against inadvertent disclosure.  That would be =

> a problem in the IETF.
> =

> Brian
> ________________________________________
> From: Bart=B3omiej Ko=B3akowski [mailto:b.kolakowski@plus.pl]
> Sent: Wednesday, August 13, 2008 10:04 AM
> To: draft-ietf-sip-location-conveyance@tools.ietf.org; sip@ietf.org
> Subject: draft-ietf-sip-location-conveyance - Question about potential =

> usage of the Geolocation header
> =

> Hello,
> I have got such concern regarding location conveyance in SIP messages: =

> I am designing IMS Appilcation Server, acting as a proxy, that would =

> query network elements for location information. As you wrote proxies =

> cannot insert message body, so the only way is to provide location by ref=
erence.
> This requires appling SUBSCRIBE-NOTIFY mechanism, which makes the =

> architecture of the solution quit complex.
> In order to make it simpler I thought about including location =

> information as locationValue inside the Geolocation header. In fact we =

> do not need location represented with coordinates, but with cell-id =

> (that's mobile network). PIDF-LO does not support it, but maybe inside =

> a header that would be possible? There would be also an issue in =

> indicating loaction target whose location is included (we plan to =

> include both A and B parties location). Geolocation header would look lik=
e this:
> Geolocation: {cell-id-3gpp}
> ;location-target=3D"bob@plus.pl";inserted-by=3D"las@plus.pl"
> What do you think about souch a usage of Geolocation header, maybe you =

> could give us some other solution?
> Thank you in advance,
> Bart=B3omiej Ko=B3akowski
> Service Solutions Architect
> Service Development Support Department Polkomtel S.A tel. 601131509

_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug 30 10:03:50 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C6D4328C120;
	Sat, 30 Aug 2008 10:03:50 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id 62B803A68B7
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 07:01:52 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: 0.323
X-Spam-Level: 
X-Spam-Status: No, score=0.323 tagged_above=-999 required=5
	tests=[BAYES_00=-2.599, FM_FORGED_GMAIL=0.622, MANGLED_HERE=2.3]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id TqlaSKXfu9Eb for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 07:01:51 -0700 (PDT)
Received: from mail-gx0-f16.google.com (mail-gx0-f16.google.com
	[209.85.217.16])
	by core3.amsl.com (Postfix) with ESMTP id 6A2AE3A6765
	for <sip@ietf.org>; Fri, 22 Aug 2008 07:01:51 -0700 (PDT)
Received: by gxk9 with SMTP id 9so1145850gxk.13
	for <sip@ietf.org>; Fri, 22 Aug 2008 07:01:11 -0700 (PDT)
Received: by 10.150.150.3 with SMTP id x3mr1855025ybd.216.1219413671766;
	Fri, 22 Aug 2008 07:01:11 -0700 (PDT)
Received: by 10.151.83.8 with HTTP; Fri, 22 Aug 2008 07:01:11 -0700 (PDT)
Message-ID: <d3aa5d00808220701i6b92eb83vf6b7862eea7b845b@mail.gmail.com>
Date: Fri, 22 Aug 2008 07:01:11 -0700
From: "Eric Rescorla" <ekr@rtfm.com>
To: "Schneider, Peter (NSN - DE/Munich)" <peter.schneider@nsn.com>
In-Reply-To: <085BE88FD18EE94085EB8960172CA359F0F991@DEMUEXC006.nsn-intra.net>
MIME-Version: 1.0
Content-Disposition: inline
References: <085BE88FD18EE94085EB8960172CA359E9CA78@DEMUEXC006.nsn-intra.net>
	<033901c902fa$185457b0$a2736b80@cisco.com>
	<085BE88FD18EE94085EB8960172CA359ED81AE@DEMUEXC006.nsn-intra.net>
	<0a1501c903da$85e43850$c2f0200a@cisco.com>
	<085BE88FD18EE94085EB8960172CA359F0F991@DEMUEXC006.nsn-intra.net>
X-Mailman-Approved-At: Sat, 30 Aug 2008 10:03:50 -0700
Cc: sip@ietf.org, ext Dan Wing <dwing@cisco.com>
Subject: Re: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

On Fri, Aug 22, 2008 at 3:01 AM, Schneider, Peter (NSN - DE/Munich)
<peter.schneider@nsn.com> wrote:
>>
>> > > To avoid this clipping, we would need
>> > > draft-ietf-sip-dtls-srtp-framework
>> > > to require the SDP answer be sent reliably before 200 Okay
>> > -- perhaps
>> > > using a technique similar to what ICE does to send SDP reliably
>> > > in 18x messages.  For DTLS-SRTP, this would mean re-transmitting
>> > > the 18x with the SDP answer until a DTLS Client Hello is
>> > seen.  Would
>> > > that be acceptable?
>> >
>> > Sending the SDP answer in the first provisional response is a
>> > good idea and helps in the middlebox scenario. But this is
>> > not an alternative to allowing the receiver of the offer to
>> > take the passive role, but an addition. The receiver of the
>> > offer must have the passive role if he re-transmits "the 18x
>> > with the SDP answer until a DTLS Client Hello is seen", right?
>>
>> I have an idea for another approach, which might even be better
>> than what is in the document right now:  leave the DTLS client/server
>> roles as described in draft-ietf-sip-dtls-srtp-framework-02, and
>> when the offerer gets the 200 Ok, the offerer sends a DTLS
>> HelloRequest.  This will open NAT bindings and cause an SBC
>> to 'latch' -- just like an ICE connectivity check would.
>>
>> (If there are no middleboxes interfering with the media path,
>> the answerer would have initiated DTLS-SRTP by its own accord
>> by sending ClientHello message(s).)
>>
>
> A good idea. I'd say, the offerer should send this HelloRequest as soon
> as he gets the SDP answer, if he hasn't got the ClientHello before. And
> the answerer should send the answer as soon as possible, e.g. in an 18x,
> even if PRACK is not used. (The HelloRequest lets the answerer know that
> the answer has reached its destination.)

When we discussed the latching issue before, this HelloRequest technique
was considered and rejected in favor of the current STUN check based
technique. Among the reasons was that we should have one set of
NAT traversal mechanisms, namely those based on STUN and ICE.

-Ekr
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


From sip-bounces@ietf.org  Sat Aug 30 10:04:35 2008
Return-Path: <sip-bounces@ietf.org>
X-Original-To: sip-archive@optimus.ietf.org
Delivered-To: ietfarch-sip-archive@core3.amsl.com
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id B932F28C108;
	Sat, 30 Aug 2008 10:04:35 -0700 (PDT)
X-Original-To: sip@core3.amsl.com
Delivered-To: sip@core3.amsl.com
Received: from localhost (localhost [127.0.0.1])
	by core3.amsl.com (Postfix) with ESMTP id C4F253A677D
	for <sip@core3.amsl.com>; Fri, 22 Aug 2008 10:56:59 -0700 (PDT)
X-Virus-Scanned: amavisd-new at amsl.com
X-Spam-Flag: NO
X-Spam-Score: -0.827
X-Spam-Level: 
X-Spam-Status: No, score=-0.827 tagged_above=-999 required=5 tests=[AWL=1.150, 
	BAYES_00=-2.599, FM_FORGED_GMAIL=0.622]
Received: from mail.ietf.org ([64.170.98.32])
	by localhost (core3.amsl.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id NKViusfrxYvc for <sip@core3.amsl.com>;
	Fri, 22 Aug 2008 10:56:58 -0700 (PDT)
Received: from mail-gx0-f16.google.com (mail-gx0-f16.google.com
	[209.85.217.16])
	by core3.amsl.com (Postfix) with ESMTP id B03683A69F5
	for <sip@ietf.org>; Fri, 22 Aug 2008 10:56:58 -0700 (PDT)
Received: by gxk9 with SMTP id 9so1416670gxk.13
	for <sip@ietf.org>; Fri, 22 Aug 2008 10:57:04 -0700 (PDT)
Received: by 10.150.92.13 with SMTP id p13mr2245284ybb.59.1219427224201;
	Fri, 22 Aug 2008 10:47:04 -0700 (PDT)
Received: by 10.151.83.8 with HTTP; Fri, 22 Aug 2008 10:47:04 -0700 (PDT)
Message-ID: <d3aa5d00808221047j47debca5ke5044fd939187c67@mail.gmail.com>
Date: Fri, 22 Aug 2008 10:47:04 -0700
From: "Eric Rescorla" <ekr@rtfm.com>
To: "Dan Wing" <dwing@cisco.com>
In-Reply-To: <100a01c9046c$ec72b7d0$c2f0200a@cisco.com>
MIME-Version: 1.0
Content-Disposition: inline
References: <085BE88FD18EE94085EB8960172CA359E9CA78@DEMUEXC006.nsn-intra.net>
	<033901c902fa$185457b0$a2736b80@cisco.com>
	<085BE88FD18EE94085EB8960172CA359ED81AE@DEMUEXC006.nsn-intra.net>
	<0a1501c903da$85e43850$c2f0200a@cisco.com>
	<085BE88FD18EE94085EB8960172CA359F0F991@DEMUEXC006.nsn-intra.net>
	<d3aa5d00808220701i6b92eb83vf6b7862eea7b845b@mail.gmail.com>
	<100a01c9046c$ec72b7d0$c2f0200a@cisco.com>
X-Mailman-Approved-At: Sat, 30 Aug 2008 10:04:33 -0700
Cc: sip@ietf.org
Subject: Re: [Sip] Some comments on draft-ietf-sip-dtls-srtp-framework-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.9
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: sip-bounces@ietf.org
Errors-To: sip-bounces@ietf.org

On Fri, Aug 22, 2008 at 8:37 AM, Dan Wing <dwing@cisco.com> wrote:
>
>> >> I have an idea for another approach, which might even be better
>> >> than what is in the document right now:  leave the DTLS
>> client/server
>> >> roles as described in draft-ietf-sip-dtls-srtp-framework-02, and
>> >> when the offerer gets the 200 Ok, the offerer sends a DTLS
>> >> HelloRequest.  This will open NAT bindings and cause an SBC
>> >> to 'latch' -- just like an ICE connectivity check would.
>> >>
>> >> (If there are no middleboxes interfering with the media path,
>> >> the answerer would have initiated DTLS-SRTP by its own accord
>> >> by sending ClientHello message(s).)
>> >>
>> >
>> > A good idea. I'd say, the offerer should send this
>> HelloRequest as soon
>> > as he gets the SDP answer, if he hasn't got the ClientHello
>> before. And
>> > the answerer should send the answer as soon as possible,
>> e.g. in an 18x,
>> > even if PRACK is not used. (The HelloRequest lets the
>> answerer know that
>> > the answer has reached its destination.)
>>
>> When we discussed the latching issue before, this
>> HelloRequest technique
>> was considered and rejected in favor of the current STUN check based
>> technique. Among the reasons was that we should have one set of
>> NAT traversal mechanisms, namely those based on STUN and ICE.
>
> Considering Peter's proposal, though, is it more disruprive to
> swap DTLS client/server roles, or more disruprive to keep them
> the same (offerer is always DTLS server) and use HelloRequest?

I don't see a problem with the roles being variable, as long as the
offerer is prepared to take on either role.

-Ekr
_______________________________________________
Sip mailing list  https://www.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


