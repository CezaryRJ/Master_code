From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  1 07:37:42 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id HAA03755
	for <sip-archive@odin.ietf.org>; Wed, 1 Dec 1999 07:37:42 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 34EFD52BB; Wed,  1 Dec 1999 07:35:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 94FB752C4; Wed,  1 Dec 1999 07:35:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id C5B5E52BB
	for <sip@lists.research.bell-labs.com>; Wed,  1 Dec 1999 07:35:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec  1 07:34:43 EST 1999
Received: from jupiter.iwatsu.co.jp ([202.248.35.18]) by dusty; Wed Dec  1 07:33:20 EST 1999
Received: from moon.iwatsu.co.jp (moon [172.20.12.25])
	by jupiter.iwatsu.co.jp (8.9.1a/3.7W) with ESMTP id VAA09819
	for <sip@lists.research.bell-labs.com>; Wed, 1 Dec 1999 21:37:55 +0900 (JST)
Received: from nt02.iwatsu.co.jp (localhost [127.0.0.1])
	by moon.iwatsu.co.jp (8.9.1a/3.7W) with SMTP id VAA27023
	for <sip@lists.research.bell-labs.com>; Wed, 1 Dec 1999 21:28:45 +0900 (JST)
Received: from spc13080 ([192.168.13.80] (may be forged))
	by nt02.iwatsu.co.jp (2.5 Build 2640 (Berkeley 8.8.6)/3.7W) with SMTP id VAA02960
	for <sip@lists.research.bell-labs.com>; Wed, 01 Dec 1999 21:27:01 +0900
Message-ID: <00a401bf3bf9$4d418be0$500da8c0@spc13080>
From: "Masanori Inui" <inui@iwatsu.co.jp>
To: "SIP-MailingList" <sip@lists.research.bell-labs.com>
Subject: The value of CSeq
Date: Wed, 1 Dec 1999 21:39:18 +0900
Organization: IWATSU Electric CO.,LTD.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2014.211
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2014.211
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Hi,

I have a simple question.

Does the specification of the SIP allow to increase the value of CSeq every
time
 where the UAC originates a new INVITE request?

ex)
I assume that the request is from A to B and the response is from B to A.

INVITE(CSeq:1) -> 180 -> 200 -> ACK -> BYE(CSeq:2) -> INVITE(CSeq:3) ->
       ^^^^^^                              ^^^^^^            ^^^^^^
Thanks,

===========================
Masanori Inui
IWATSU Electric CO.,LTD
Project Team No.2
Solution Engineering Dept.
Engineering Division
---------------------------
1-7-41 Kugayama Suginami-ku
Tokyo, 168-8501, Japan
---------------------------
Tel.+81-3-5370-5211
Fax.+81-3-5370-5193
Email inui@iwatsu.co.jp
===========================





From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  1 08:41:42 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id IAA04109
	for <sip-archive@odin.ietf.org>; Wed, 1 Dec 1999 08:41:42 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7D04D52B6; Wed,  1 Dec 1999 08:39:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id EFA9E52D5; Wed,  1 Dec 1999 08:39:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 7D5FC52B6
	for <sip@lists.research.bell-labs.com>; Wed,  1 Dec 1999 08:39:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  1 08:38:35 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Wed Dec  1 08:37:13 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhrsg12640;
	Wed, 1 Dec 1999 13:35:50 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id IAA07922;
	Wed, 1 Dec 1999 08:38:33 -0500 (EST)
Message-ID: <384525DD.EEC37D45@dynamicsoft.com>
Date: Wed, 01 Dec 1999 08:42:53 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Masanori Inui <inui@iwatsu.co.jp>
Cc: SIP-MailingList <sip@lists.research.bell-labs.com>
Subject: Re: The value of CSeq
References: <00a401bf3bf9$4d418be0$500da8c0@spc13080>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

I'm not sure I understand your flow below. The CSeq space is defined
within the Call-ID, To and From fields. For each request from a UAC to a
UAS, the CSeq must increment. The CSeq values are different in the
reverse direction. So, if A invites B, it might use CSeq 1, and then to
hang up, it must increment the CSeq when it sends a BYE. If A invites B,
but B hangs up, the first CSeq can be any value in the BYE from B to A.

-Jonathan R.

Masanori Inui wrote:
> 
> Hi,
> 
> I have a simple question.
> 
> Does the specification of the SIP allow to increase the value of CSeq every
> time
>  where the UAC originates a new INVITE request?
> 
> ex)
> I assume that the request is from A to B and the response is from B to A.
> 
> INVITE(CSeq:1) -> 180 -> 200 -> ACK -> BYE(CSeq:2) -> INVITE(CSeq:3) ->
>        ^^^^^^                              ^^^^^^            ^^^^^^
> Thanks,
> 
> ===========================
> Masanori Inui
> IWATSU Electric CO.,LTD
> Project Team No.2
> Solution Engineering Dept.
> Engineering Division
> ---------------------------
> 1-7-41 Kugayama Suginami-ku
> Tokyo, 168-8501, Japan
> ---------------------------
> Tel.+81-3-5370-5211
> Fax.+81-3-5370-5193
> Email inui@iwatsu.co.jp
> ===========================

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  1 12:38:06 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA01212
	for <sip-archive@odin.ietf.org>; Wed, 1 Dec 1999 12:38:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 1598E52D5; Wed,  1 Dec 1999 12:35:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 8AA6D52DB; Wed,  1 Dec 1999 12:35:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 8FB7252D5
	for <sip@lists.research.bell-labs.com>; Wed,  1 Dec 1999 12:35:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec  1 12:33:08 EST 1999
Received: from alpha.mcit.com ([199.249.19.243]) by dusty; Wed Dec  1 12:31:41 EST 1999
Received: from omzrelay.mcit.com ([166.37.204.49])
 by firewall.mcit.com (PMDF V5.2-32 #38416)
 with ESMTP id <0FM20018YOPC7X@firewall.mcit.com> for
 sip@lists.research.bell-labs.com; Wed,  1 Dec 1999 17:32:01 +0000 (GMT)
Received: from omzmta04.mcit.com (omzmta04.mcit.com [166.37.194.122])
 by omzrelay.mcit.com (8.8.7/) with ESMTP	id RAA07111; Wed,
 01 Dec 1999 17:32:02 +0000 (GMT)
Received: from C25776A ([166.37.186.204])
 by omzmta04.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991201173157.ISRC23219@C25776A>; Wed,
 01 Dec 1999 17:31:57 +0000
Date: Wed, 01 Dec 1999 11:31:55 -0600
From: Henry Sinnreich <henry.sinnreich@wcom.com>
Subject: RE: Available UACs?
In-reply-to: <199911302006.VAA27642@uran.ipl.net>
To: sip@lists.research.bell-labs.com, Marcin Michalak <mm@ipl.net>
Message-id: <NBBBIIJFOKPMFOOILMBKIEOKEOAA.henry.sinnreich@wcom.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Marcin,

I believe there will be 33 organizations with products and about 100 people
at the 3rd bake-off next week (please see the SIP home page
www.cs.columbia.edu/sip ) and some of them may be able to help you. Suggest
to write to them directly starting from the SIP bake-off list.

Henry

> -----Original Message-----
> From: owner-sip@lists.research.bell-labs.com
> [mailto:owner-sip@lists.research.bell-labs.com]On Behalf Of Marcin
> Michalak
> Sent: Tuesday, November 30, 1999 1:09 PM
> To: sip@lists.research.bell-labs.com
> Subject: Available UACs?
>
>
> Hi,
>  I'm writing a SIP Telephony gateway on Dialogic board and am just
> starting to perform compatibility tests. So far I'm using SIPHONE from
> Bell Labs for my internal tests, but I'd like to try also other
> clients, if
> there're any.
>  My question is whether You know of any other SIP UAC
> implementations with audio support (PCMU or GSM) which I could use
> for my internal tests?
>  I'll also try to make my gateway (which is called sip-telip) publicly
> available to let You try it. So far it's not possible, because
> it's behind
> the
> firewall but I'll try to negotiate with the administrator.
>  Any other people doing SIP Telephony gateways? My project is run on
> the University and is educational, but hope it'll be possible to use it
> somewhere.
>  Any people with Dialogic D41/ESC board interested in trying it?
>   Greetings from Krakow, Poland
>    Marcin Michalak, Computer Sciences, AGH
>
>            Marcin Michalak - SQ9APQ
>         	 mm@ipl.net
>




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  1 15:58:10 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA10361
	for <sip-archive@odin.ietf.org>; Wed, 1 Dec 1999 15:58:09 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 6FD7352DC; Wed,  1 Dec 1999 15:55:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id BDBBF52DD; Wed,  1 Dec 1999 15:55:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 86F6A52DC
	for <sip@lists.research.bell-labs.com>; Wed,  1 Dec 1999 15:55:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  1 15:53:23 EST 1999
Received: from PMESPTM01 ([199.249.20.1]) by dusty; Wed Dec  1 15:51:59 EST 1999
Received: from ndcrelay2.mcit.com ([166.37.172.6])
 by firewall.mcit.com (PMDF V5.2-32 #41714)
 with ESMTP id <0FM200K44XTZBH@firewall.mcit.com> for
 sip@lists.research.bell-labs.com; Wed,  1 Dec 1999 20:49:12 +0000 (GMT)
Received: from omzexch006.mcit.com (OMZEXCH006.mcit.com [166.37.194.37])
 by ndcrelay2.mcit.com (8.8.7/) with ESMTP	id UAA12680; Wed,
 01 Dec 1999 20:44:11 +0000 (GMT)
Received: by omzexch006 with Internet Mail Service (5.5.2571.0)
	id <XR3ZWJZT>; Wed, 01 Dec 1999 20:48:59 +0000
Content-return: allowed
Date: Wed, 01 Dec 1999 20:48:57 +0000
From: "Donovan, Steven R." <Steven.R.Donovan@wcom.com>
Subject: RE: one-way media with 183 Session Progress
To: "'Daniel G. Petrie'" <dpetrie@pingtel.com>,
        "David R. Oran" <oran@cisco.com>
Cc: Matt Squire <msquire@nortelnetworks.com>,
        "Willis, Dean." <Dean.Willis@wcom.com>,
        sip@lists.research.bell-labs.com
Message-id: <75C79E507864D3118AFC00805FEAB7D8018F9F@ripexch001.mcit.com>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2571.0)
Content-type: multipart/alternative;
	boundary="----_=_NextPart_001_01BF3C3D.7D901C32"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01BF3C3D.7D901C32
Content-Type: text/plain;
	charset="ISO-8859-1"

Dan,

When a gateway hands a call off to the PSTN, it has no way of knowing
whether or not the call will be answered, be busy or result in an
announcement.  Thus it has no way to determine whether the caller will get a
happy or sad result.

The additional status over a 100 Trying (actually, 100 Trying is a bad
example, as it could have come from an intermediate proxy) message is in the
fact that an early media request has been made.  This will tell the calling
UA to playback this early media instead of playing a ringtone (or some other
type of local alerting).

Steve

-----Original Message-----
From: Daniel G. Petrie [mailto:dpetrie@pingtel.com]
Sent: Tuesday, November 30, 1999 4:54 PM
To: David R. Oran
Cc: Matt Squire; Willis, Dean.; sip@lists.research.bell-labs.com
Subject: Re: one-way media with 183 Session Progress


Dave:
I think that we are in agreement.  The problem is that the message may
indicate
a failure, queued, ringing or some other status.

Sorry  I should clearify my concern.  I do not object to early
media.  Handling the early media is not the problem.  The problem is that
183 Session Progress as it stands gives no indication of the meaning of the
message.  It contains little more status than a 100.  Will the user hear a
happy message or a sad one?  ;-)

One comment below:
Cheers,
Dan



"David R. Oran" wrote:

> Gee, I'm not conflicted by this early media stuff at all. Let's say
instead
> of an SDP in the 183 Session Progress the responder put a JPEG image, or a
> HTML page saying "thank you for using AT&T". Only AI level intelligence on
> the part of the initiating UA would give it enough information to know for
> sure what it ought to do with the content. All I see the early media as
> really meaning is "hey, listen to this while I'm trying to complete your
> call".
>
> I can even see uses for this outside of the PSTN gateway scenario. For
> example, I might want to supply music or audio status along with a 182
> QUEUED response - you know - "please stay on the line and an agent will be
> with you as soon as possible".
>
> The fact that this is the ONLY feedback sometimes available is an
> unfortunate consequence of legacy PSTN technology. The alternative is to
> implement full outbound-telemarketer tone/announcement recognition
> capability in every PSTN gateway. Not a tradeoff I'd like to force on the
> gateway vendors (since I "are" one :-) ).
>

I am not suggesting that every gateway need be full featured.  A simple
gateway
could always default to 180 Ringing or 182 Queued.  This signaling problem
exists
with the PSTN and/or Gateway interface.  I am suggesting that we leave it
there,

not propogate it through SIP.  Over time I would hope that the PSTN
signaling
and/or gateway capabilities will evolve to make it economically feasable to
fix
this interface, transparently to the rest of the SIP world.

>
> One point I did make in my comments on the original 183 draft was that we
> should keep the notion of early media, along with the QoS and Security
> advisories separate from the particular 1xx response type. I think the
> authors agreed to separate these things.
>
> I have one question for Dan, interspersed in his note below:
>
> > -----Original Message-----
> > From: owner-sip@lists.research.bell-labs.com
> > [mailto:owner-sip@lists.research.bell-labs.com]On Behalf Of Daniel G.
> > Petrie
> > Sent: Tuesday, November 30, 1999 4:07 PM
> > To: Matt Squire
> > Cc: Dean Willis; sip@lists.research.bell-labs.com
> > Subject: Re: one-way media with 183 Session Progress
> >
> >
> > The problem that I see with early media is that there is not
> > enough sematics
> > in the response to allow the user agent to make any decisions on
> > what to do
> > with the call.  The user agent may not know whether the call is
> > forked and other
> > responses may come back.  It does not know that whether the message to
> > be played is "number you have reached is out of order" or "please
> > hold your call
> > is being transfered" (i.e. pending failure or setup).
> >
> > I understand that the gateway may not have the sematics either
> > (i.e. because it
> > is a simple gateway without signaling channels or it is blinded
> > by a PSTN switch
> > which is not sending signaling).  Passing this all the way through the
SIP
> > network
> > without a meaning in the early media message is only passing the
> > problem off. The
> >
> > UA is farthest from the source of the issue, how can you expect it to do
> > something
> > intelligent with it.  Enabling intelligence in the end point  is
> > one of the
> > greatest
> > strengths of SIP.  I do not want to pass more noise and confusion
> > to the end
> > user.
> > I want to filter it out.  Without any meaning to 183, the user
> > agent will be
> > forced
> > to either make dumb decisions or overload and confuse the user with more
> > messages.
> >
> > I can see two possible solutions:
> > 1) As Matt has suggested only allow a complete session setup.
> > This does not provide the UA with any more information to make a
decision.
> > It eliminates the decision.
> >
> > 2) Provide more meaningful response:
> > Minimally expand to 183 Session Pending and 184 Session Failing.
>
> Gee, if the gateway could tell that a session was failing it could
probably
> send back a final response directly and dispense with this stuff. As I
point
> out though, it isn't just failure notices that can come back in the audio.
> It's anything that the PSTN stuffs in-band rather than sending back
through
> out-of-band signaling.
>
> > This way
> > the abiguity is not transmitted in SIP.  The meaning of 183
> > Session Pending
> > being that it is likely, but not guaranteed to proceed.  If a
> > gateway is dumb
> > or blinded, it can default to 183.  Let's not make SIP blind as well.
> >
> > Regards,
> > Dan
> >
> > Matt Squire wrote:
> >
> > > I really don't disagree with anything you say except the conclusion:)
> > >
> > > As you state, the billing & QoS aspects are orthogonal to the goal of
> > > getting the "number you have reached is out of order" messages
> > back to the
> > > SIP client.  The 183 I-D says
> > >
> > > "   The only method in the current SIP specification that allows the
> > >    called UA to playback media is to set up a full SIP session. In
PSTN
> > >    interworking situations (and likely in end-to-end SIP sessions)
this
> > >    will cause a billing relationship to be established between
networks
> > >    for the session.  This causes a problem when the reason for setting
> > >    up the media session is to indicate a failure in the session
> > setup.  "
> > >
> > > This seems to indicate that billing is the major impetus for the
special
> > > handling of early media, and I don't think that's the case.
> > >
> > > If the QoS and billing are orthogonal, then the justification for this
> > > seems to be that there's a slight reduction in the number of
> > messages.  I
> > > believe the diagrams in the I-D are slightly misleading, as the
> > 183 has to
> > > be sent reliably, so there are implicit acknowledgement going
> > back that are
> > > not shown in the pictures.  The message savings are not as shown in
the
> > > draft.
> > >
> > > People have raised issues that arise when INVITEs get forked,
> > and you start
> > > playing some early media like "the number has been
> > disconnected" and then
> > > you actually get an answer (200 OK) from another branch.
> > Certainly we can
> > > just have each UA handle things as they see fit, but it
> > demonstrates some
> > > inconsistencies with these 'half-sessions.'
> > >
> > > Early media sessions are media sessions.  Changing the SIP behavior to
> > > accomodate billing/QoS doesn't seem necessary.  The message savings
seem
> > > minimal.  Forking can lead to inconsistent behavior.  The
> > message seems to
> > > be easily bastardizable (is that a word?) to signal 2-way media
> > or anything
> > > else for that matter.
> > >
> > > I just thought SIP had a 3way handshake to establish a media flow for
a
> > > reason.  Getting rid of it in special cases worries me.  But
> > I'm probably
> > > in the minority, so I'll shut up about it now.
> > >
> > > - Matt
> > >
> > > >The early media response is one of the few workable solutions
> > to getting the
> > > >"The number you have reached has been disconnected" messages
> > sourced by a
> > > >terminating LEC switch back to a SIP client accessing PSTN through a
> > > >gateway. The terminating switch never actually sends an asnwer
> > message back
> > > >to the gateway to get mapped into an ACK message, so the
> > originating client
> > > >has to know to "listen" without ever receiving an ACK. From a
> > phone company
> > > >perspective, this call was never completed. Once upon a time
> > the switches
> > > >cut through two ways, but once people learned how to talk
> > in-between the
> > > >rings or send phreak tones, we switched to a one-way cut
> > through towards the
> > > >caller.
> > > >
> > > >I believe this is a completely separable issue from
> > controlling the billing
> > > >aspects of the call, and from establishing QoS around the call.
> > > >
> > > >The issue with early media is that some people see a fraud
opportunity
> > > >tantamount to tricking the phone company into playing the
> > frauding message
> > > >INSTEAD of "the number you have reached" . . .
> > > >
> > > >For example, in the PSTN case one might want any traffic between an
IP
> > > >client and a gateway to have QoS. That's easy enough to do --
> > we just use
> > > >RSVP to set up the QoS like we would beween any other pair of
> > hosts. The DCS
> > > >issues around call clipping pretty much don't occur for IP->PSTN
calls,
> > > >because as the gateway is known BEFORE the digits are outpulsed to
the
> > > >switch, QoS can be set up during the PSTN-side post-dial-delay.
> > > >
> > > >Incoming PSTN->IP calls have a diffeent QoS problem, but they
generally
> > > >don't need to worry about (and perhaps shouldn't even accept
> > at the gateway)
> > > >early media signaling.
> > > >
> > > >--
> > > >Dean
> > > >
> > > >
> >
> >
> >
> >


------_=_NextPart_001_01BF3C3D.7D901C32
Content-Type: text/html;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3DISO-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2569.0">
<TITLE>RE: one-way media with 183 Session Progress</TITLE>
</HEAD>
<BODY>

<P><FONT SIZE=3D2>Dan,</FONT>
</P>

<P><FONT SIZE=3D2>When a gateway hands a call off to the PSTN, it has =
no way of knowing whether or not the call will be answered, be busy or =
result in an announcement.&nbsp; Thus it has no way to determine =
whether the caller will get a happy or sad result.</FONT></P>

<P><FONT SIZE=3D2>The additional status over a 100 Trying (actually, =
100 Trying is a bad example, as it could have come from an intermediate =
proxy) message is in the fact that an early media request has been =
made.&nbsp; This will tell the calling UA to playback this early media =
instead of playing a ringtone (or some other type of local =
alerting).</FONT></P>

<P><FONT SIZE=3D2>Steve</FONT>
</P>

<P><FONT SIZE=3D2>-----Original Message-----</FONT>
<BR><FONT SIZE=3D2>From: Daniel G. Petrie [<A =
HREF=3D"mailto:dpetrie@pingtel.com">mailto:dpetrie@pingtel.com</A>]</FON=
T>
<BR><FONT SIZE=3D2>Sent: Tuesday, November 30, 1999 4:54 PM</FONT>
<BR><FONT SIZE=3D2>To: David R. Oran</FONT>
<BR><FONT SIZE=3D2>Cc: Matt Squire; Willis, Dean.; =
sip@lists.research.bell-labs.com</FONT>
<BR><FONT SIZE=3D2>Subject: Re: one-way media with 183 Session =
Progress</FONT>
</P>
<BR>

<P><FONT SIZE=3D2>Dave:</FONT>
<BR><FONT SIZE=3D2>I think that we are in agreement.&nbsp; The problem =
is that the message may indicate</FONT>
<BR><FONT SIZE=3D2>a failure, queued, ringing or some other =
status.</FONT>
</P>

<P><FONT SIZE=3D2>Sorry&nbsp; I should clearify my concern.&nbsp; I do =
not object to early</FONT>
<BR><FONT SIZE=3D2>media.&nbsp; Handling the early media is not the =
problem.&nbsp; The problem is that</FONT>
<BR><FONT SIZE=3D2>183 Session Progress as it stands gives no =
indication of the meaning of the</FONT>
<BR><FONT SIZE=3D2>message.&nbsp; It contains little more status than a =
100.&nbsp; Will the user hear a</FONT>
<BR><FONT SIZE=3D2>happy message or a sad one?&nbsp; ;-)</FONT>
</P>

<P><FONT SIZE=3D2>One comment below:</FONT>
<BR><FONT SIZE=3D2>Cheers,</FONT>
<BR><FONT SIZE=3D2>Dan</FONT>
</P>
<BR>
<BR>

<P><FONT SIZE=3D2>&quot;David R. Oran&quot; wrote:</FONT>
</P>

<P><FONT SIZE=3D2>&gt; Gee, I'm not conflicted by this early media =
stuff at all. Let's say instead</FONT>
<BR><FONT SIZE=3D2>&gt; of an SDP in the 183 Session Progress the =
responder put a JPEG image, or a</FONT>
<BR><FONT SIZE=3D2>&gt; HTML page saying &quot;thank you for using =
AT&amp;T&quot;. Only AI level intelligence on</FONT>
<BR><FONT SIZE=3D2>&gt; the part of the initiating UA would give it =
enough information to know for</FONT>
<BR><FONT SIZE=3D2>&gt; sure what it ought to do with the content. All =
I see the early media as</FONT>
<BR><FONT SIZE=3D2>&gt; really meaning is &quot;hey, listen to this =
while I'm trying to complete your</FONT>
<BR><FONT SIZE=3D2>&gt; call&quot;.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; I can even see uses for this outside of the =
PSTN gateway scenario. For</FONT>
<BR><FONT SIZE=3D2>&gt; example, I might want to supply music or audio =
status along with a 182</FONT>
<BR><FONT SIZE=3D2>&gt; QUEUED response - you know - &quot;please stay =
on the line and an agent will be</FONT>
<BR><FONT SIZE=3D2>&gt; with you as soon as possible&quot;.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; The fact that this is the ONLY feedback =
sometimes available is an</FONT>
<BR><FONT SIZE=3D2>&gt; unfortunate consequence of legacy PSTN =
technology. The alternative is to</FONT>
<BR><FONT SIZE=3D2>&gt; implement full outbound-telemarketer =
tone/announcement recognition</FONT>
<BR><FONT SIZE=3D2>&gt; capability in every PSTN gateway. Not a =
tradeoff I'd like to force on the</FONT>
<BR><FONT SIZE=3D2>&gt; gateway vendors (since I &quot;are&quot; one =
:-) ).</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
</P>

<P><FONT SIZE=3D2>I am not suggesting that every gateway need be full =
featured.&nbsp; A simple gateway</FONT>
<BR><FONT SIZE=3D2>could always default to 180 Ringing or 182 =
Queued.&nbsp; This signaling problem</FONT>
<BR><FONT SIZE=3D2>exists</FONT>
<BR><FONT SIZE=3D2>with the PSTN and/or Gateway interface.&nbsp; I am =
suggesting that we leave it there,</FONT>
</P>

<P><FONT SIZE=3D2>not propogate it through SIP.&nbsp; Over time I would =
hope that the PSTN signaling</FONT>
<BR><FONT SIZE=3D2>and/or gateway capabilities will evolve to make it =
economically feasable to fix</FONT>
<BR><FONT SIZE=3D2>this interface, transparently to the rest of the SIP =
world.</FONT>
</P>

<P><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; One point I did make in my comments on the =
original 183 draft was that we</FONT>
<BR><FONT SIZE=3D2>&gt; should keep the notion of early media, along =
with the QoS and Security</FONT>
<BR><FONT SIZE=3D2>&gt; advisories separate from the particular 1xx =
response type. I think the</FONT>
<BR><FONT SIZE=3D2>&gt; authors agreed to separate these things.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; I have one question for Dan, interspersed in =
his note below:</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; -----Original Message-----</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; From: =
owner-sip@lists.research.bell-labs.com</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; [<A =
HREF=3D"mailto:owner-sip@lists.research.bell-labs.com">mailto:owner-sip@=
lists.research.bell-labs.com</A>]On Behalf Of Daniel G.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Petrie</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Sent: Tuesday, November 30, 1999 4:07 =
PM</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; To: Matt Squire</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Cc: Dean Willis; =
sip@lists.research.bell-labs.com</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Subject: Re: one-way media with 183 =
Session Progress</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; The problem that I see with early media is =
that there is not</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; enough sematics</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; in the response to allow the user agent to =
make any decisions on</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; what to do</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; with the call.&nbsp; The user agent may =
not know whether the call is</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; forked and other</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; responses may come back.&nbsp; It does not =
know that whether the message to</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; be played is &quot;number you have reached =
is out of order&quot; or &quot;please</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; hold your call</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; is being transfered&quot; (i.e. pending =
failure or setup).</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; I understand that the gateway may not have =
the sematics either</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; (i.e. because it</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; is a simple gateway without signaling =
channels or it is blinded</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; by a PSTN switch</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; which is not sending signaling).&nbsp; =
Passing this all the way through the SIP</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; network</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; without a meaning in the early media =
message is only passing the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; problem off. The</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; UA is farthest from the source of the =
issue, how can you expect it to do</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; something</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; intelligent with it.&nbsp; Enabling =
intelligence in the end point&nbsp; is</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; one of the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; greatest</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; strengths of SIP.&nbsp; I do not want to =
pass more noise and confusion</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; to the end</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; user.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; I want to filter it out.&nbsp; Without any =
meaning to 183, the user</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; agent will be</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; forced</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; to either make dumb decisions or overload =
and confuse the user with more</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; messages.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; I can see two possible solutions:</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; 1) As Matt has suggested only allow a =
complete session setup.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; This does not provide the UA with any more =
information to make a decision.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; It eliminates the decision.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; 2) Provide more meaningful =
response:</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Minimally expand to 183 Session Pending =
and 184 Session Failing.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; Gee, if the gateway could tell that a session =
was failing it could probably</FONT>
<BR><FONT SIZE=3D2>&gt; send back a final response directly and =
dispense with this stuff. As I point</FONT>
<BR><FONT SIZE=3D2>&gt; out though, it isn't just failure notices that =
can come back in the audio.</FONT>
<BR><FONT SIZE=3D2>&gt; It's anything that the PSTN stuffs in-band =
rather than sending back through</FONT>
<BR><FONT SIZE=3D2>&gt; out-of-band signaling.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; This way</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; the abiguity is not transmitted in =
SIP.&nbsp; The meaning of 183</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Session Pending</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; being that it is likely, but not =
guaranteed to proceed.&nbsp; If a</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; gateway is dumb</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; or blinded, it can default to 183.&nbsp; =
Let's not make SIP blind as well.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Regards,</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Dan</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Matt Squire wrote:</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; I really don't disagree with anything =
you say except the conclusion:)</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; As you state, the billing &amp; QoS =
aspects are orthogonal to the goal of</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; getting the &quot;number you have =
reached is out of order&quot; messages</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; back to the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; SIP client.&nbsp; The 183 I-D =
says</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &quot;&nbsp;&nbsp; The only method in =
the current SIP specification that allows the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp; called UA to =
playback media is to set up a full SIP session. In PSTN</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp; interworking =
situations (and likely in end-to-end SIP sessions) this</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp; will cause a =
billing relationship to be established between networks</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp; for the =
session.&nbsp; This causes a problem when the reason for setting</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;&nbsp;&nbsp;&nbsp; up the media =
session is to indicate a failure in the session</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; setup.&nbsp; &quot;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; This seems to indicate that billing =
is the major impetus for the special</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; handling of early media, and I don't =
think that's the case.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; If the QoS and billing are =
orthogonal, then the justification for this</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; seems to be that there's a slight =
reduction in the number of</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; messages.&nbsp; I</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; believe the diagrams in the I-D are =
slightly misleading, as the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; 183 has to</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; be sent reliably, so there are =
implicit acknowledgement going</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; back that are</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; not shown in the pictures.&nbsp; The =
message savings are not as shown in the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; draft.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; People have raised issues that arise =
when INVITEs get forked,</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; and you start</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; playing some early media like =
&quot;the number has been</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; disconnected&quot; and then</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; you actually get an answer (200 OK) =
from another branch.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Certainly we can</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; just have each UA handle things as =
they see fit, but it</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; demonstrates some</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; inconsistencies with these =
'half-sessions.'</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; Early media sessions are media =
sessions.&nbsp; Changing the SIP behavior to</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; accomodate billing/QoS doesn't seem =
necessary.&nbsp; The message savings seem</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; minimal.&nbsp; Forking can lead to =
inconsistent behavior.&nbsp; The</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; message seems to</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; be easily bastardizable (is that a =
word?) to signal 2-way media</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; or anything</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; else for that matter.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; I just thought SIP had a 3way =
handshake to establish a media flow for a</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; reason.&nbsp; Getting rid of it in =
special cases worries me.&nbsp; But</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; I'm probably</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; in the minority, so I'll shut up =
about it now.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; - Matt</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;The early media response is one =
of the few workable solutions</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; to getting the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;&quot;The number you have reached =
has been disconnected&quot; messages</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; sourced by a</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;terminating LEC switch back to a =
SIP client accessing PSTN through a</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;gateway. The terminating switch =
never actually sends an asnwer</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; message back</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;to the gateway to get mapped into =
an ACK message, so the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; originating client</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;has to know to &quot;listen&quot; =
without ever receiving an ACK. From a</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; phone company</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;perspective, this call was never =
completed. Once upon a time</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; the switches</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;cut through two ways, but once =
people learned how to talk</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; in-between the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;rings or send phreak tones, we =
switched to a one-way cut</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; through towards the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;caller.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;I believe this is a completely =
separable issue from</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; controlling the billing</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;aspects of the call, and from =
establishing QoS around the call.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;The issue with early media is =
that some people see a fraud opportunity</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;tantamount to tricking the phone =
company into playing the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; frauding message</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;INSTEAD of &quot;the number you =
have reached&quot; . . .</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;For example, in the PSTN case one =
might want any traffic between an IP</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;client and a gateway to have QoS. =
That's easy enough to do --</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; we just use</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;RSVP to set up the QoS like we =
would beween any other pair of</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; hosts. The DCS</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;issues around call clipping =
pretty much don't occur for IP-&gt;PSTN calls,</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;because as the gateway is known =
BEFORE the digits are outpulsed to the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;switch, QoS can be set up during =
the PSTN-side post-dial-delay.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;Incoming PSTN-&gt;IP calls have a =
diffeent QoS problem, but they generally</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;don't need to worry about (and =
perhaps shouldn't even accept</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; at the gateway)</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;early media signaling.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;--</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;Dean</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01BF3C3D.7D901C32--



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  1 16:31:52 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id QAA26339
	for <sip-archive@odin.ietf.org>; Wed, 1 Dec 1999 16:31:52 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 24E1352DD; Wed,  1 Dec 1999 16:29:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 750A152DE; Wed,  1 Dec 1999 16:29:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 6C25052DD
	for <sip@lists.research.bell-labs.com>; Wed,  1 Dec 1999 16:29:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  1 16:27:59 EST 1999
Received: from omzrelay02.mcit.com ([199.249.19.244]) by dusty; Wed Dec  1 16:26:35 EST 1999
Received: from ndcrelay.mcit.com ([166.37.172.49])
 by firewall.mcit.com (PMDF V5.2-29 #38417)
 with ESMTP id <0FM200DCIZ6IYH@firewall.mcit.com> for
 sip@lists.research.bell-labs.com; Wed,  1 Dec 1999 21:18:19 +0000 (GMT)
Received: from omzexch007.mcit.com (OMZEXCH007.mcit.com [166.37.194.38])
 by ndcrelay.mcit.com (8.8.7/) with ESMTP	id VAA05456; Wed,
 01 Dec 1999 21:16:44 +0000 (GMT)
Received: by omzexch007 with Internet Mail Service (5.5.2571.0)
	id <YC1MR0FQ>; Wed, 01 Dec 1999 21:18:17 +0000
Content-return: allowed
Date: Wed, 01 Dec 1999 21:18:16 +0000
From: "Donovan, Steven R." <Steven.R.Donovan@wcom.com>
Subject: RE: one-way media with 183 Session Progress
To: "'Matt Squire'" <msquire@nortelnetworks.com>,
        "David R. Oran" <oran@cisco.com>,
        Anders Kristensen <ak@hplb.hpl.hp.com>
Cc: "Daniel G. Petrie" <dpetrie@pingtel.com>,
        "Willis, Dean." <Dean.Willis@wcom.com>,
        sip <sip@lists.research.bell-labs.com>
Message-id: <75C79E507864D3118AFC00805FEAB7D8018FA0@ripexch001.mcit.com>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2571.0)
Content-type: multipart/alternative;
	boundary="----_=_NextPart_001_01BF3C41.958747F8"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01BF3C41.958747F8
Content-Type: text/plain;
	charset="ISO-8859-1"

Matt,

The unfortunate reality is that SIP needs to interwork with the PSTN.  In
this interworking, there are scenarios where the eventual disposition of the
call is not communicated via a signaling message.  Instead, it is
communicated via a media session (usually a one-way media session).

It might be possible to set up a full media session in the SIP network for
carrying the early media information.  However, as discussed in the 183
draft, this introduces some other interesting problems.

For instance, there are also requirements that the SIP/PSTN interworking to
be able to properly map SIP signaling messages to PSTN signaling messages.
This is where some of the inter carrier billing discussion came into the 183
draft.  The ability to properly map the SIP signaling messages with the PSTN
signaling messages has a direct effect on the amount of money carriers
charge each other.  Billing may be a bad word when developing protocols, but
it is a reality in the PSTN that signaling events result in billing events.
As such, it is a requirement of the interworking design to make sure that
the signaling does not result in invalid billing events.  

As outlined in the 183 specification, it becomes difficult to address the
second problem without the use of early media sessions.  Not necessarily
impossible, but difficult.

Steve

-----Original Message-----
From: Matt Squire [mailto:msquire@nortelnetworks.com]
Sent: Tuesday, November 30, 1999 4:15 PM
To: David R. Oran; Anders Kristensen
Cc: Daniel G. Petrie; Willis, Dean.; sip
Subject: RE: one-way media with 183 Session Progress


At 05:00 PM 11/30/99 -0500, David R. Oran wrote:
>> Well, Matts objection remains though: whether it would be "better" to
>> just establish a regular SIP connection right away, play the media, and
>> then possibly transfer the call later.
>>
>Then would you argue that the 182QUEUED response is unecessary as well?
>

I certainly do not argue that 182Queued is unnecessary.  Nor have I argued
that 183 is unnecessary.  Using 183 to establish preconditions (QoS,
security) for a media session is great.  I'm all for it.  

I just don't see a media session as a precondition for a media session.  If
the signalling response has semantics that can be interpreted by the
signalling layer, like 182, great.  If media is being sent back to a higher
layer that has to intepret the media and then filter some appropriate
actions back down the stack, then I'd say a media session was established.
A normal media session.  Not a half-session, not an early media session, an
honest-to-goodness media flow was established.  And I question why we need
to signal it in a different way.  

- Matt


------_=_NextPart_001_01BF3C41.958747F8
Content-Type: text/html;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3DISO-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2569.0">
<TITLE>RE: one-way media with 183 Session Progress</TITLE>
</HEAD>
<BODY>

<P><FONT SIZE=3D2>Matt,</FONT>
</P>

<P><FONT SIZE=3D2>The unfortunate reality is that SIP needs to =
interwork with the PSTN.&nbsp; In this interworking, there are =
scenarios where the eventual disposition of the call is not =
communicated via a signaling message.&nbsp; Instead, it is communicated =
via a media session (usually a one-way media session).</FONT></P>

<P><FONT SIZE=3D2>It might be possible to set up a full media session =
in the SIP network for carrying the early media information.&nbsp; =
However, as discussed in the 183 draft, this introduces some other =
interesting problems.</FONT></P>

<P><FONT SIZE=3D2>For instance, there are also requirements that the =
SIP/PSTN interworking to be able to properly map SIP signaling messages =
to PSTN signaling messages.&nbsp; This is where some of the inter =
carrier billing discussion came into the 183 draft.&nbsp; The ability =
to properly map the SIP signaling messages with the PSTN signaling =
messages has a direct effect on the amount of money carriers charge =
each other.&nbsp; Billing may be a bad word when developing protocols, =
but it is a reality in the PSTN that signaling events result in billing =
events.&nbsp; As such, it is a requirement of the interworking design =
to make sure that the signaling does not result in invalid billing =
events.&nbsp; </FONT></P>

<P><FONT SIZE=3D2>As outlined in the 183 specification, it becomes =
difficult to address the second problem without the use of early media =
sessions.&nbsp; Not necessarily impossible, but difficult.</FONT></P>

<P><FONT SIZE=3D2>Steve</FONT>
</P>

<P><FONT SIZE=3D2>-----Original Message-----</FONT>
<BR><FONT SIZE=3D2>From: Matt Squire [<A =
HREF=3D"mailto:msquire@nortelnetworks.com">mailto:msquire@nortelnetworks=
.com</A>]</FONT>
<BR><FONT SIZE=3D2>Sent: Tuesday, November 30, 1999 4:15 PM</FONT>
<BR><FONT SIZE=3D2>To: David R. Oran; Anders Kristensen</FONT>
<BR><FONT SIZE=3D2>Cc: Daniel G. Petrie; Willis, Dean.; sip</FONT>
<BR><FONT SIZE=3D2>Subject: RE: one-way media with 183 Session =
Progress</FONT>
</P>
<BR>

<P><FONT SIZE=3D2>At 05:00 PM 11/30/99 -0500, David R. Oran =
wrote:</FONT>
<BR><FONT SIZE=3D2>&gt;&gt; Well, Matts objection remains though: =
whether it would be &quot;better&quot; to</FONT>
<BR><FONT SIZE=3D2>&gt;&gt; just establish a regular SIP connection =
right away, play the media, and</FONT>
<BR><FONT SIZE=3D2>&gt;&gt; then possibly transfer the call =
later.</FONT>
<BR><FONT SIZE=3D2>&gt;&gt;</FONT>
<BR><FONT SIZE=3D2>&gt;Then would you argue that the 182QUEUED response =
is unecessary as well?</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
</P>

<P><FONT SIZE=3D2>I certainly do not argue that 182Queued is =
unnecessary.&nbsp; Nor have I argued</FONT>
<BR><FONT SIZE=3D2>that 183 is unnecessary.&nbsp; Using 183 to =
establish preconditions (QoS,</FONT>
<BR><FONT SIZE=3D2>security) for a media session is great.&nbsp; I'm =
all for it.&nbsp; </FONT>
</P>

<P><FONT SIZE=3D2>I just don't see a media session as a precondition =
for a media session.&nbsp; If</FONT>
<BR><FONT SIZE=3D2>the signalling response has semantics that can be =
interpreted by the</FONT>
<BR><FONT SIZE=3D2>signalling layer, like 182, great.&nbsp; If media is =
being sent back to a higher</FONT>
<BR><FONT SIZE=3D2>layer that has to intepret the media and then filter =
some appropriate</FONT>
<BR><FONT SIZE=3D2>actions back down the stack, then I'd say a media =
session was established.</FONT>
<BR><FONT SIZE=3D2>A normal media session.&nbsp; Not a half-session, =
not an early media session, an</FONT>
<BR><FONT SIZE=3D2>honest-to-goodness media flow was established.&nbsp; =
And I question why we need</FONT>
<BR><FONT SIZE=3D2>to signal it in a different way.&nbsp; </FONT>
</P>

<P><FONT SIZE=3D2>- Matt</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01BF3C41.958747F8--



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  1 17:27:42 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA22874
	for <sip-archive@odin.ietf.org>; Wed, 1 Dec 1999 17:27:41 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3658A52C4; Wed,  1 Dec 1999 17:25:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 91C6B52DE; Wed,  1 Dec 1999 17:25:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9F16152C4
	for <sip@lists.research.bell-labs.com>; Wed,  1 Dec 1999 17:25:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec  1 17:23:15 EST 1999
Received: from alpha.mcit.com ([199.249.19.243]) by dusty; Wed Dec  1 17:21:52 EST 1999
Received: from ndcrelay2.mcit.com ([166.37.172.6])
 by firewall.mcit.com (PMDF V5.2-32 #38416)
 with ESMTP id <0FM300IC524W85@firewall.mcit.com> for
 sip@lists.research.bell-labs.com; Wed,  1 Dec 1999 22:22:08 +0000 (GMT)
Received: from omzexch006.mcit.com (OMZEXCH006.mcit.com [166.37.194.37])
 by ndcrelay2.mcit.com (8.8.7/) with ESMTP	id WAA23951 for
 <sip@lists.research.bell-labs.com>; Wed, 01 Dec 1999 22:17:19 +0000 (GMT)
Received: by omzexch006 with Internet Mail Service (5.5.2571.0)
	id <XR3ZWN67>; Wed, 01 Dec 1999 22:22:07 +0000
Content-return: allowed
Date: Wed, 01 Dec 1999 22:22:03 +0000
From: "Donovan, Steven R." <Steven.R.Donovan@wcom.com>
Subject: "Legal" via loops
To: sip@lists.research.bell-labs.com
Message-id: <75C79E507864D3118AFC00805FEAB7D8018FA5@ripexch001.mcit.com>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2571.0)
Content-type: multipart/alternative;
	boundary="----_=_NextPart_001_01BF3C4A.7F0360BC"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01BF3C4A.7F0360BC
Content-Type: text/plain;
	charset="ISO-8859-1"

I believe that this has been discussed in the past, but I don't believe
there was a resolution.

It reframe the problem, assume user A invites user B at proxy 1.  User B
redirects the call to User C at proxy 2 and user C redirects the call to
user D at proxy 1.

User A            Proxy 1           Proxy 2
----------------->
Invite B@P1
V: A
F: UserA@A
T: UserB@P1
I: 1234@A
Cseq: 1 INVITE
                  ----------------->
                  Invite C@P2
                  V: P1
                  V: A
                  F: UserA@A
                  T: UserB@P1
                  I: 1234@A
                  Cseq: 1 INVITE
                  <-----------------
                  Invite D@P1
                  V: P2
                  V: P1
                  V: A
                  F: UserA@A
                  T: UserB@P1
                  I: 1234@A
                  Cseq: 1 INVITE

At this point, proxy 1 will reject the call with a 482 Loop Detected.  This
is despite the fact that it is a new request for a different request URI.
It just happens that two users in the path of the INVITE are served by the
same proxy.

Am I correct that no resolution to this problem has been proposed?

Steve

P.S. We have some ideas on how to address this, but first I want to make
sure that  I haven't missed an already proposed solution.

P.P.S There is a second level problem lurking for stateful proxies, even if
we solve the via loop issue.  This is due to the fact that a stateful proxy
that does not detect this as a via loop will detect it as a retransmission
(same call leg (to, from, callid) with the same cseq and probably drop the
invite.

------_=_NextPart_001_01BF3C4A.7F0360BC
Content-Type: text/html;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3DISO-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2569.0">
<TITLE>&quot;Legal&quot; via loops</TITLE>
</HEAD>
<BODY>

<P><FONT SIZE=3D2 FACE=3D"Courier New">I believe that this has been =
discussed in the past, but I don't believe there was a =
resolution.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">It reframe the problem, assume =
user A invites user B at proxy 1.&nbsp; User B redirects the call to =
User C at proxy 2 and user C redirects the call to user D at proxy =
1.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">User =
A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Proxy 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Proxy 2</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier New">-----------------&gt;</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier New">Invite B@P1</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier New">V: A</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier New">F: UserA@A</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier New">T: UserB@P1</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier New">I: 1234@A</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier New">Cseq: 1 INVITE</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -----------------&gt;</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Invite C@P2</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: P1</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: A<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; F: UserA@A</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T: UserB@P1</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I: 1234@A</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cseq: 1 INVITE</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-----------------</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Invite D@P1</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: P2</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: P1</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: A</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; F: UserA@A</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T: UserB@P1</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I: 1234@A</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier =
New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cseq: 1 INVITE</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">At this point, proxy 1 will =
reject the call with a 482 Loop Detected.&nbsp; This is despite the =
fact that it is a new request for a different request URI.&nbsp; It =
just happens that two users in the path of the INVITE are served by the =
same proxy.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">Am I correct that no resolution =
to this problem has been proposed?</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">Steve</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">P.S. We have some ideas on how =
to address this, but first I want to make sure that&nbsp; I haven't =
missed an already proposed solution.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">P.P.S There is a second level =
problem lurking for stateful proxies, even if we solve the via loop =
issue.&nbsp; This is due to the fact that a stateful proxy that does =
not detect this as a via loop will detect it as a retransmission (same =
call leg (to, from, callid) with the same cseq and probably drop the =
invite.</FONT></P>

</BODY>
</HTML>
------_=_NextPart_001_01BF3C4A.7F0360BC--



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  1 18:29:56 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id SAA22947
	for <sip-archive@odin.ietf.org>; Wed, 1 Dec 1999 18:29:56 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9CDEE52AB; Wed,  1 Dec 1999 18:27:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 134C452DE; Wed,  1 Dec 1999 18:27:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 0056952AB
	for <sip@lists.research.bell-labs.com>; Wed,  1 Dec 1999 18:27:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  1 18:25:43 EST 1999
Received: from smtprtp1.ntcom.nortel.net ([137.118.22.14]) by dusty; Wed Dec  1 18:24:20 EST 1999
Received: from zcard00n.ca.nortel.com (actually zcard00n) 
          by smtprtp1.ntcom.nortel.net; Wed, 1 Dec 1999 18:24:12 -0500
Received: from zbl6c008.corpeast.baynetworks.com ([132.245.205.58]) 
          by zcard00n.ca.nortel.com 
          with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2448.0) 
          id XHBWPVSF; Wed, 1 Dec 1999 18:24:12 -0500
Received: from msquire (extranet-139-117.corpeast.baynetworks.com [132.245.139.117]) 
          by zbl6c008.corpeast.baynetworks.com 
          with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2448.0) 
          id WMJAGZ3S; Wed, 1 Dec 1999 18:24:07 -0500
Message-Id: <3.0.32.19991202182802.00b6dc40@zbl6c008.corpeast.baynetworks.com>
X-Sender: msquire@zbl6c008.corpeast.baynetworks.com
X-Mailer: Windows Eudora Pro Version 3.0 (32)
Date: Thu, 02 Dec 1999 18:28:07 -0500
To: "Donovan, Steven R." <Steven.R.Donovan@wcom.com>,
        "David R. Oran" <oran@cisco.com>,
        Anders Kristensen <ak@hplb.hpl.hp.com>
From: "Matt Squire" <msquire@nortelnetworks.com>
Subject: RE: one-way media with 183 Session Progress
Cc: sip <sip@lists.research.bell-labs.com>
Mime-Version: 1.0
Content-Type: text/enriched; charset="us-ascii"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



Steve -


I understand that there exist situations where call disposition is not
communicated via signalling and is carried via media...but why can't this
media be signaled like any other media?


I don't understand the billing argument.  There have to be measures
(authentication, accounting, billing) that exist outside of the Early
Media to prevent or cause charging for calls.  There are many reasons why
you may not charge for the call - changing signalling for one particular
reason seems wrong.  Besides, you still need those extra measures for the
Early Media.  What prevents my SIP phone from using an Early Media
response to play back an answering machine message so that I don't get
charged for that media?  Even worse, what prevents me from returning an
Early Media response to establish a 2-way call?  The authorization,
accounting, and billing arguments are orthogonal to the Early Media
response.  Accounting should always happen for the signaling events,
billing can happen later, and may or may not result in charges.  


I understand that your intended usage is for one-way media that contains
information about signaling disposition.  But there is no guarantee that
(a) the media is one-way, (b) the intent of the media is for signalling
information, (c) that the receiver will be able to decipher the intent of
the media and take appropriate signaling action.  This makes the whole
thing seem dangerous to me.  


Signaling disposition is a loose term.  If I setup a proxy at my home
that searches N locations for me while playing back media, "Hi, I'm not
here right now, searching for me at other locations, here's some music to
listen to while we search.."  This is early media with a signaling
dispotion, is it not?  Its just not from a PSTN gateway.  I'm assuming
this Early Media with signalling disposition should not be signaled in a
special way?  


And whose to say that the media is early?  There's no assurance that
other media will follow, this could be all the media you get.   


According to the draft, the reasons for the Early Media response over
just establishing a session are (a) message overhead, and (b) may result
in clipping in the fast answer scenario.  


For (a), since the 183 is reliable, the message overhead for the 'early
media' session is 3 sip messages for both, either INVITE,200-OK,ACK or
INVITE,183,RE-INVITE(for reliability).  If there is additional media, and
you have no guarantee that additional media is forthcoming, then the
second media session can be shortcut by a single message.  Instead of
INVITE,200-OK,ACK, its 200-OK,ACK.  So its half a round-trip *if* a
second session follows.  


For (b), I honestly don't know enough about the clipping issues to argue.
 All I know is that SIP potentially has general clipping problems that we
either need to accept or to fix, regardless of early, late, or normal
medial.  


With a regular SIP who's who as the author list on the 183 I-D, and with
you, Dean, and Dave all speaking for it, I'm sure I'll lose this
argument.  I understand your basic goals, and I agree that they need to
be solved.  


It just makes me a bit queazy to realize that the Early Media response
would allow one to establish an arbitrary media session *without*
establishing the SIP session.  This seems like a blatant and fundamental
violation of the architecture.    In my opinion, and to quote the famous
scholar Deputy Barney Fife, "Someone oughta nip it in the bud."  


- Matt


At 09:18 PM 12/1/99 +0000, Donovan, Steven R. wrote: 

>>>>

<excerpt>RE: one-way media with 183 Session Progress 


<bigger>Matt,</bigger> 


<bigger>The unfortunate reality is that SIP needs to interwork with the
PSTN.  In this interworking, there are scenarios where the eventual
disposition of the call is not communicated via a signaling message. 
Instead, it is communicated via a media session (usually a one-way media
session).</bigger> 


<bigger>It might be possible to set up a full media session in the SIP
network for carrying the early media information.  However, as discussed
in the 183 draft, this introduces some other interesting
problems.</bigger> 


<bigger>For instance, there are also requirements that the SIP/PSTN
interworking to be able to properly map SIP signaling messages to PSTN
signaling messages.  This is where some of the inter carrier billing
discussion came into the 183 draft.  The ability to properly map the SIP
signaling messages with the PSTN signaling messages has a direct effect
on the amount of money carriers charge each other.  Billing may be a bad
word when developing protocols, but it is a reality in the PSTN that
signaling events result in billing events.  As such, it is a requirement
of the interworking design to make sure that the signaling does not
result in invalid billing events.  </bigger> 


<bigger>As outlined in the 183 specification, it becomes difficult to
address the second problem without the use of early media sessions.  Not
necessarily impossible, but difficult.</bigger> 


<bigger>Steve</bigger> 

</excerpt>



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  1 23:05:52 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id XAA12358
	for <sip-archive@odin.ietf.org>; Wed, 1 Dec 1999 23:05:50 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id E4E3552B6; Wed,  1 Dec 1999 23:03:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 5DE1452BB; Wed,  1 Dec 1999 23:03:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 1729E52B6
	for <sip@lists.research.bell-labs.com>; Wed,  1 Dec 1999 23:03:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  1 23:01:46 EST 1999
Received: from jupiter.iwatsu.co.jp ([202.248.35.18]) by dusty; Wed Dec  1 23:00:24 EST 1999
Received: from moon.iwatsu.co.jp (moon [172.20.12.25])
	by jupiter.iwatsu.co.jp (8.9.1a/3.7W) with ESMTP id NAA16813;
	Thu, 2 Dec 1999 13:04:55 +0900 (JST)
Received: from nt02.iwatsu.co.jp (localhost [127.0.0.1])
	by moon.iwatsu.co.jp (8.9.1a/3.7W) with SMTP id MAA05106;
	Thu, 2 Dec 1999 12:55:44 +0900 (JST)
Received: from spc13080 ([192.168.13.80] (may be forged))
	by nt02.iwatsu.co.jp (2.5 Build 2640 (Berkeley 8.8.6)/3.7W) with SMTP id MAA03329;
	Thu, 02 Dec 1999 12:53:57 +0900
Message-ID: <001501bf3c7a$cce1f3e0$500da8c0@spc13080>
From: "Masanori Inui" <inui@iwatsu.co.jp>
To: "Jonathan Rosenberg" <jdrosen@dynamicsoft.com>
Cc: "SIP-MailingList" <sip@lists.research.bell-labs.com>
References: <00a401bf3bf9$4d418be0$500da8c0@spc13080> <384525DD.EEC37D45@dynamicsoft.com>
Subject: Re: The value of CSeq
Date: Thu, 2 Dec 1999 13:05:02 +0900
Organization: IWATSU Electric CO.,LTD.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.00.2014.211
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2014.211
X-MIME-Autoconverted: from 8bit to quoted-printable by nt02.iwatsu.co.jp id MAA03329
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by ietf.org id XAA12358

I assume that two person caller is A and callee is B.
Both A and B have their own sip-telephone.

A invites B and they are talking. And A hang up. Then this conversation is
finished.
A invites B without a break, is the CSeq value in this INVITE request
increased to before?

When the UAC originates new request, I intend to implement the CSeq value
increases every time.
Is it usual?

Thanks,
Masanori I.

----- Original Message -----
'-M : Jonathan Rosenberg <jdrosen@dynamicsoft.com>
^ : Masanori Inui <inui@iwatsu.co.jp>
Cc: SIP-MailingList <sip@lists.research.bell-labs.com>
'-M" : 1999"N12O1" 22:42
O- : Re: The value of CSeq


> I'm not sure I understand your flow below. The CSeq space is defined
> within the Call-ID, To and From fields. For each request from a UAC to a
> UAS, the CSeq must increment. The CSeq values are different in the
> reverse direction. So, if A invites B, it might use CSeq 1, and then to
> hang up, it must increment the CSeq when it sends a BYE. If A invites B,
> but B hangs up, the first CSeq can be any value in the BYE from B to A.
>
> -Jonathan R.
>
> Masanori Inui wrote:
> >
> > Hi,
> >
> > I have a simple question.
> >
> > Does the specification of the SIP allow to increase the value of CSeq
every
> > time
> >  where the UAC originates a new INVITE request?
> >
> > ex)
> > I assume that the request is from A to B and the response is from B to
A.
> >
> > INVITE(CSeq:1) -> 180 -> 200 -> ACK -> BYE(CSeq:2) -> INVITE(CSeq:3) ->
> >        ^^^^^^                              ^^^^^^            ^^^^^^
> > Thanks,
> >
> > ===========================
> > Masanori Inui
> > IWATSU Electric CO.,LTD
> > Project Team No.2
> > Solution Engineering Dept.
> > Engineering Division
> > ---------------------------
> > 1-7-41 Kugayama Suginami-ku
> > Tokyo, 168-8501, Japan
> > ---------------------------
> > Tel.+81-3-5370-5211
> > Fax.+81-3-5370-5193
> > Email inui@iwatsu.co.jp
> > ===========================
>
> --
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com
>




From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 01:09:51 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA14590
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 01:09:51 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 8A38352C4; Thu,  2 Dec 1999 01:07:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id F1AE252D5; Thu,  2 Dec 1999 01:07:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 4BB6E52C4
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 01:07:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec  2 01:05:46 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec  2 01:04:23 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhruu16870;
	Thu, 2 Dec 1999 06:03:03 GMT
Received: from dynamicsoft.com (1Cust68.tnt1.freehold.nj.da.uu.net [63.17.113.68])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id BAA09092;
	Thu, 2 Dec 1999 01:05:42 -0500 (EST)
Message-ID: <38460D3C.DDAB715@dynamicsoft.com>
Date: Thu, 02 Dec 1999 01:10:04 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Masanori Inui <inui@iwatsu.co.jp>
Cc: SIP-MailingList <sip@lists.research.bell-labs.com>
Subject: Re: The value of CSeq
References: <00a401bf3bf9$4d418be0$500da8c0@spc13080> <384525DD.EEC37D45@dynamicsoft.com> <001501bf3c7a$cce1f3e0$500da8c0@spc13080>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Masanori Inui wrote:
> 
> I assume that two person caller is A and callee is B.
> Both A and B have their own sip-telephone.
> 
> A invites B and they are talking. And A hang up. Then this conversation is
> finished.
> A invites B without a break, is the CSeq value in this INVITE request
> increased to before?

If this is a new call, it has a new Call-ID, so it doesn't matter what
the CSeq is compared to the previous call. For a re-INVITE within a
call, the CSeq is always incremented from the previous.

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 01:35:41 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA28970
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 01:35:40 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 1B37C52D5; Thu,  2 Dec 1999 01:33:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 624A052D6; Thu,  2 Dec 1999 01:33:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 26F3652D5
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 01:33:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec  2 01:33:03 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec  2 01:31:41 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhruw23419;
	Thu, 2 Dec 1999 06:30:20 GMT
Received: from dynamicsoft.com (1Cust68.tnt1.freehold.nj.da.uu.net [63.17.113.68])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id BAA09117;
	Thu, 2 Dec 1999 01:32:59 -0500 (EST)
Message-ID: <384613A1.5EC0854@dynamicsoft.com>
Date: Thu, 02 Dec 1999 01:37:21 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: "Donovan, Steven R." <Steven.R.Donovan@wcom.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: "Legal" via loops
References: <75C79E507864D3118AFC00805FEAB7D8018FA5@ripexch001.mcit.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Yes, this is a problem. We have discussed it in the past, and I don't
think there was an agreed upon solution.

I believe the solution to this that is backwards compatible is to make
use of the branch ID parameter in the Via field. Let me explain.

At a proxy, we say that a request is a new transaction (not a
retransmission, and not a loop), if its Call-ID, To, From CSeq *and*
request URI are different from another request. In that case, we can
define a transaction ID as a hash over these quantities. Call this hash
H. Also assume that a proxy is set up so that if it forks, it never
forks more than 2**N times, for some N that is sufficiently large. When
a proxy forks, the ith branch has a branchid parameter with the value (H
<< N) + i. 

When a response arrives, the proxy takes the branch ID parameter from
the top Via field, shifts it right by N, and obains the transaction ID.
This allows the response to be matched to the request. The N bits that
were shifted out identify which branch the response is for.

To do loop detection, when a request arrives, the proxy looks for its
own address in the Via list. If it finds it, AND if the branch ID
parameter in that Via field, shifted right N bits, match the transaction
ID computed for this request, it is considered a loop. Otherwise, if the
proxy doesn't find its address in the Via list, but the transaction ID
computed from the request matches the transaction ID of an existing
transaction, its a retransmission. Otherwise, its a request for a new
transaction.

There are other ways to place both the actual branch ID, and this new
hash, into the branch ID parameter in the Via field, besides this shift
by N.

Comments?

-Jonathan R.

> "Donovan, Steven R." wrote:
> 
> I believe that this has been discussed in the past, but I don't
> believe there was a resolution.
> 
> It reframe the problem, assume user A invites user B at proxy 1.  User
> B redirects the call to User C at proxy 2 and user C redirects the
> call to user D at proxy 1.
> 
> User A            Proxy 1           Proxy 2
> ----------------->
> Invite B@P1
> V: A
> F: UserA@A
> T: UserB@P1
> I: 1234@A
> Cseq: 1 INVITE
>                   ----------------->
>                   Invite C@P2
>                   V: P1
>                   V: A
>                   F: UserA@A
>                   T: UserB@P1
>                   I: 1234@A
>                   Cseq: 1 INVITE
>                   <-----------------
>                   Invite D@P1
>                   V: P2
>                   V: P1
>                   V: A
>                   F: UserA@A
>                   T: UserB@P1
>                   I: 1234@A
>                   Cseq: 1 INVITE
> 
> At this point, proxy 1 will reject the call with a 482 Loop Detected.
> This is despite the fact that it is a new request for a different
> request URI.  It just happens that two users in the path of the INVITE
> are served by the same proxy.
> 
> Am I correct that no resolution to this problem has been proposed?
> 
> Steve
> 
> P.S. We have some ideas on how to address this, but first I want to
> make sure that  I haven't missed an already proposed solution.
> 
> P.P.S There is a second level problem lurking for stateful proxies,
> even if we solve the via loop issue.  This is due to the fact that a
> stateful proxy that does not detect this as a via loop will detect it
> as a retransmission (same call leg (to, from, callid) with the same
> cseq and probably drop the invite.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 08:25:48 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id IAA04448
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 08:25:47 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id CBCD752AB; Thu,  2 Dec 1999 08:23:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4A4C552C4; Thu,  2 Dec 1999 08:23:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id DF18452AB
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 08:23:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec  2 08:21:58 EST 1999
Received: from mailserv2.iuinc.com ([206.245.164.55]) by dusty; Thu Dec  2 08:20:34 EST 1999
Received: (qmail 23397 invoked from network); 2 Dec 1999 13:21:45 -0000
Received: from unknown (HELO raymond) (216.181.56.35)
  by mailserv2.iuinc.com with SMTP; 2 Dec 1999 13:21:45 -0000
From: "Doug Sauder" <doug@broadsoft.com>
To: <sip@lists.research.bell-labs.com>
Subject: Where is IPv6 in SIP?
Date: Thu, 2 Dec 1999 08:23:37 -0500
Message-ID: <NDBBIAKOPKHFGPLCODIGKEELCCAA.doug@broadsoft.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2314.1300
Importance: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by ietf.org id IAA04448

Will there be any changes in SIP to provide better support for IPv6?  Specifically, will the "host" element eventually allow IPv6 addresses?

For example:

   Via: SIP/2.0/UDP ::193.168.2.39:9000
   Via: SIP/2.0/UDP ::C1A8:228:9000

or something similar?  (I'm not sure about using a colon to separate address and port.)

Doug Sauder
Broadsoft, Inc.




From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 10:22:58 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA07270
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 10:22:57 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D17B052C4; Thu,  2 Dec 1999 10:20:31 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 47BFF52D5; Thu,  2 Dec 1999 10:20:31 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from soran.bos.ascend.com (unknown [152.148.40.24])
	by lists.research.bell-labs.com (Postfix) with ESMTP id DA82452C4
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 10:20:14 -0500 (EST)
Received: from daimanta.ascend.com (daimanta [152.148.40.20])
	by soran.bos.ascend.com (8.9.3/8.9.3) with ESMTP id KAA05300;
	Thu, 2 Dec 1999 10:18:56 -0500 (EST)
Received: from reddog.casc.com (reddog.ascend.com [152.148.100.22])
	by daimanta.ascend.com (8.8.8+Sun/8.8.8) with ESMTP id KAA00114;
	Thu, 2 Dec 1999 10:19:40 -0500 (EST)
Received: from lucent.com ([152.148.210.58])
	by reddog.casc.com (8.8.8+Sun/8.8.8) with ESMTP id KAA21619;
	Thu, 2 Dec 1999 10:02:06 -0500 (EST)
Message-ID: <38468E61.40FC5F3A@lucent.com>
Date: Thu, 02 Dec 1999 10:21:05 -0500
From: Kim Liu <kliu@lucent.com>
Organization: Lucent Technologies
X-Mailer: Mozilla 4.7 [en] (WinNT; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Doug Sauder <doug@broadsoft.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: Where is IPv6 in SIP?
References: <NDBBIAKOPKHFGPLCODIGKEELCCAA.doug@broadsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Doug Sauder wrote:
> 
> Will there be any changes in SIP to provide better support for IPv6?  Specifically, will the "host" element eventually allow IPv6 addresses?
> 
> For example:
> 
>    Via: SIP/2.0/UDP ::193.168.2.39:9000
>    Via: SIP/2.0/UDP ::C1A8:228:9000
> 
> or something similar?  (I'm not sure about using a colon to separate address and port.)

This came up as a general URL format issue in a W3.org mailing list 
for specifying ports and IPv6 addresses in URLs in general.  If you
go to the www.w3.org site and search the mailing lists for IPv6, it
will probably turn up the discussion.  I do not rememebr if there was
an official resolution to the matter, but the final discussion leaned
towards using an extra '.' to separate the port in the IPv6 address.

For example:
  IPv6 ::193.168.2.39.9000
  IPv6 ::C1A8:0228.9000

The representation is non-ambiguous (i.e. you are either going to see
one '.' (a port), three (an IPv4 address), or 4 (IPv4 address plus 
port) and does not add any more special characters to parsing.  It 
would probably be best to see if this did get addressed in a general
manner in URL/URI formatting/specifications.

Reference (look in document for the 'URL parsing and IPV6' thread)
  http://lists.w3.org/Archives/Public/www-talk/threads.html#02788

Cheers,
Kim Liu
kliu@lucent.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 10:37:47 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA14652
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 10:37:45 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id F11E952D5; Thu,  2 Dec 1999 10:35:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 7264752D6; Thu,  2 Dec 1999 10:35:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 92B9C52D5
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 10:35:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec  2 10:33:14 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec  2 10:31:52 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhrwg07096;
	Thu, 2 Dec 1999 15:30:33 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id KAA09662;
	Thu, 2 Dec 1999 10:33:12 -0500 (EST)
Message-ID: <38469241.AC9FFDB3@dynamicsoft.com>
Date: Thu, 02 Dec 1999 10:37:37 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Doug Sauder <doug@broadsoft.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: Where is IPv6 in SIP?
References: <NDBBIAKOPKHFGPLCODIGKEELCCAA.doug@broadsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

We very much wanted to support it in rfc2543, but the problem was that
there was no support for IPv6 in the general URL syntax (rfc2396). A
document was, and still is, moving through the IETF to standardize a
format for IPv6 literals in URLs. If you're interested, its:

http://search.ietf.org/internet-drafts/draft-ietf-ipngwg-url-literal-04.txt

Kim later writes:

> will probably turn up the discussion.  I do not rememebr if there was
> an official resolution to the matter, but the final discussion leaned
> towards using an extra '.' to separate the port in the IPv6 address.
> 
> For example:
>   IPv6 ::193.168.2.39.9000
>   IPv6 ::C1A8:0228.9000

interestingly, this differs from how its done in the above draft, which
uses a [] to enclose the v6 address. So, it would be:

sip:[::193.168.2.39]:9000

I personally don't care, and its not an issue we should debate here.
Whatever it is, once this is standardized, we can use it, and then
support v6 in the next revision of SIP.

-Jonathan R.

Doug Sauder wrote:
> 
> Will there be any changes in SIP to provide better support for IPv6?  Specifically, will the "host" element eventually allow IPv6 addresses?
> 
> For example:
> 
>    Via: SIP/2.0/UDP ::193.168.2.39:9000
>    Via: SIP/2.0/UDP ::C1A8:228:9000
> 
> or something similar?  (I'm not sure about using a colon to separate address and port.)
> 
> Doug Sauder
> Broadsoft, Inc.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 10:53:38 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA23113
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 10:53:37 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id C353652B6; Thu,  2 Dec 1999 10:51:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3C6E552DC; Thu,  2 Dec 1999 10:51:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 63D0D52B6
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 10:51:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec  2 10:49:56 EST 1999
Received: from paleale.cisco.com ([171.71.154.60]) by dusty; Thu Dec  2 10:48:34 EST 1999
Received: from OranLT ([171.69.210.5]) by paleale.cisco.com (8.8.4-Cisco.1/8.6.5) with SMTP id HAA21106; Thu, 2 Dec 1999 07:49:51 -0800 (PST)
From: "David R. Oran" <oran@cisco.com>
To: "Jonathan Rosenberg" <jdrosen@dynamicsoft.com>,
        "Donovan, Steven R." <Steven.R.Donovan@wcom.com>
Cc: <sip@lists.research.bell-labs.com>
Subject: RE: "Legal" via loops
Date: Thu, 2 Dec 1999 10:49:45 -0500
Keywords: IETF
Message-ID: <NDBBKHCGKKIOOIJEGCOEGEEICMAA.oran@cisco.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
In-reply-to: <384613A1.5EC0854@dynamicsoft.com>
Importance: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

On first blush, it appears this will work. Another approach that may be
simpler is to allow a VIA to be marked explicitly as a "loop-barrier", so
that any proxy doing loop detect does not look further back in the VIA list
than the first "loop-barrier". Any stateful proxy that intercepts responses
and re-issues INVITES would mark its VIA with a loop-barrier.

This seems simpler than Jonathan's proposal but may have backward
compatibility problems. OTOH, existing proxies will falsely detect loops no
matter what we do, right?

> -----Original Message-----
> From: owner-sip@lists.research.bell-labs.com
> [mailto:owner-sip@lists.research.bell-labs.com]On Behalf Of Jonathan
> Rosenberg
> Sent: Thursday, December 02, 1999 1:37 AM
> To: Donovan, Steven R.
> Cc: sip@lists.research.bell-labs.com
> Subject: Re: "Legal" via loops
>
>
> Yes, this is a problem. We have discussed it in the past, and I don't
> think there was an agreed upon solution.
>
> I believe the solution to this that is backwards compatible is to make
> use of the branch ID parameter in the Via field. Let me explain.
>
> At a proxy, we say that a request is a new transaction (not a
> retransmission, and not a loop), if its Call-ID, To, From CSeq *and*
> request URI are different from another request. In that case, we can
> define a transaction ID as a hash over these quantities. Call this hash
> H. Also assume that a proxy is set up so that if it forks, it never
> forks more than 2**N times, for some N that is sufficiently large. When
> a proxy forks, the ith branch has a branchid parameter with the value (H
> << N) + i.
>
> When a response arrives, the proxy takes the branch ID parameter from
> the top Via field, shifts it right by N, and obains the transaction ID.
> This allows the response to be matched to the request. The N bits that
> were shifted out identify which branch the response is for.
>
> To do loop detection, when a request arrives, the proxy looks for its
> own address in the Via list. If it finds it, AND if the branch ID
> parameter in that Via field, shifted right N bits, match the transaction
> ID computed for this request, it is considered a loop. Otherwise, if the
> proxy doesn't find its address in the Via list, but the transaction ID
> computed from the request matches the transaction ID of an existing
> transaction, its a retransmission. Otherwise, its a request for a new
> transaction.
>
> There are other ways to place both the actual branch ID, and this new
> hash, into the branch ID parameter in the Via field, besides this shift
> by N.
>
> Comments?
>
> -Jonathan R.
>
> > "Donovan, Steven R." wrote:
> >
> > I believe that this has been discussed in the past, but I don't
> > believe there was a resolution.
> >
> > It reframe the problem, assume user A invites user B at proxy 1.  User
> > B redirects the call to User C at proxy 2 and user C redirects the
> > call to user D at proxy 1.
> >
> > User A            Proxy 1           Proxy 2
> > ----------------->
> > Invite B@P1
> > V: A
> > F: UserA@A
> > T: UserB@P1
> > I: 1234@A
> > Cseq: 1 INVITE
> >                   ----------------->
> >                   Invite C@P2
> >                   V: P1
> >                   V: A
> >                   F: UserA@A
> >                   T: UserB@P1
> >                   I: 1234@A
> >                   Cseq: 1 INVITE
> >                   <-----------------
> >                   Invite D@P1
> >                   V: P2
> >                   V: P1
> >                   V: A
> >                   F: UserA@A
> >                   T: UserB@P1
> >                   I: 1234@A
> >                   Cseq: 1 INVITE
> >
> > At this point, proxy 1 will reject the call with a 482 Loop Detected.
> > This is despite the fact that it is a new request for a different
> > request URI.  It just happens that two users in the path of the INVITE
> > are served by the same proxy.
> >
> > Am I correct that no resolution to this problem has been proposed?
> >
> > Steve
> >
> > P.S. We have some ideas on how to address this, but first I want to
> > make sure that  I haven't missed an already proposed solution.
> >
> > P.P.S There is a second level problem lurking for stateful proxies,
> > even if we solve the via loop issue.  This is due to the fact that a
> > stateful proxy that does not detect this as a via loop will detect it
> > as a retransmission (same call leg (to, from, callid) with the same
> > cseq and probably drop the invite.
>
> --
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com
>
>
>




From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 12:01:59 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA26901
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 12:01:58 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7486A52D6; Thu,  2 Dec 1999 11:59:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id C0C3952DC; Thu,  2 Dec 1999 11:59:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9EB9352D6
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 11:59:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec  2 11:58:33 EST 1999
Received: from ogopogo.flash.net ([209.30.2.14]) by dusty; Thu Dec  2 11:57:11 EST 1999
Received: from mckinley (209-30-194-209.flash.net [209.30.194.209])
	by ogopogo.flash.net (8.9.3/Pro-8.9.3) with SMTP id KAA02200
	for <sip@lists.research.bell-labs.com>; Thu, 2 Dec 1999 10:58:31 -0600 (CST)
Reply-To: <gcote@awardsolutions.com>
From: "Gary Cote" <gcote@awardsolutions.com>
To: <sip@lists.research.bell-labs.com>
Subject: Inconsistency regarding use of Allow header
Date: Thu, 2 Dec 1999 08:59:48 -0800
Message-ID: <8F7ED3E5E583D311BA5F0050DA261DB01ACB04@pikespeak>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2615.200
Importance: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Please pardon if this has been discussed before. I did not see any reference
to it in the mail archive, or in the SIP notes and clarifications page.

RFC2543, Section 6 contains a table summarizing the use of various header
fields. It indicates that the Allow header is mandatory for responses to the
OPTIONS method, and optional for all 405 (Method Not Found) responses.

This appears to be inconsistent with other references to the Allow header.
Sections 4.2.3 and 6.10 contradict the table - in effect stating the exact
opposite.

I'm guessing that the table is inaccurate, most likely due to a typo. Could
somebody please confirm for me?

Thanks.

--
Gary Cote
AWARD Solutions, Inc.
972-664-0727 x229






From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 12:27:46 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA10601
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 12:27:44 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 0216552DC; Thu,  2 Dec 1999 12:25:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 62FDC52DD; Thu,  2 Dec 1999 12:25:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id BE4C452DC
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 12:25:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec  2 12:24:12 EST 1999
Received: from alpha.mcit.com ([199.249.19.243]) by dusty; Thu Dec  2 12:22:49 EST 1999
Received: from ndcrelay.mcit.com ([166.37.172.49])
 by firewall.mcit.com (PMDF V5.2-32 #38416)
 with ESMTP id <0FM400DCMHV2DR@firewall.mcit.com> for
 sip@lists.research.bell-labs.com; Thu,  2 Dec 1999 16:59:27 +0000 (GMT)
Received: from omzexch007.mcit.com (OMZEXCH007.mcit.com [166.37.194.38])
 by ndcrelay.mcit.com (8.8.7/) with ESMTP	id QAA16352; Thu,
 02 Dec 1999 16:57:47 +0000 (GMT)
Received: by omzexch007 with Internet Mail Service (5.5.2571.0)
	id <YC1MSQ0X>; Thu, 02 Dec 1999 16:59:09 +0000
Content-return: allowed
Date: Thu, 02 Dec 1999 16:59:07 +0000
From: "Donovan, Steven R." <Steven.R.Donovan@wcom.com>
Subject: RE: "Legal" via loops
To: "'David R. Oran'" <oran@cisco.com>,
        Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: sip@lists.research.bell-labs.com
Message-id: <75C79E507864D3118AFC00805FEAB7D8018FA9@ripexch001.mcit.com>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2571.0)
Content-type: multipart/alternative;
	boundary="----_=_NextPart_001_01BF3CE6.8C7A2CE8"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01BF3CE6.8C7A2CE8
Content-Type: text/plain;
	charset="ISO-8859-1"

Dave Oran wrote:

On first blush, it appears this will work. Another approach that may be
simpler is to allow a VIA to be marked explicitly as a "loop-barrier", so
that any proxy doing loop detect does not look further back in the VIA list
than the first "loop-barrier". Any stateful proxy that intercepts responses
and re-issues INVITES would mark its VIA with a loop-barrier.

SRD> But then how is a true loop detected?  If proxy 2, after receiving a
request from proxy 1, adds its via as a loop-barrier and sends the request
back to proxy 1, using the same request URI as the original request to proxy
1, this should be treated as a via loop.  By your rule, proxy 1 would stop
its via loop detection at the loop-barrier and process the request.  It is
interesting that if proxy 1 is stateless then the request will be sent back
to proxy 2.  If it is a stateful proxy, then proxy 1 will treat the request
as a retransmission.

SRD> There still needs to be a way for the proxy to store the request URI in
the via header so it can know when an INVITE for an existing transaction is
really a new request.  Jonathan's approach achieves that with the assumption
that the proxy stores the request URI in the state information associated
with the transaction.  This approach has the merit that it uses an existing
parameter to the Via header.  

SRD> An alternative approach would be to add a parameter to the Via header
that could be used by the proxy to store the request URI.  For privacy
reasons, the proxy would need to encrypt the request URI when storing it.  

This seems simpler than Jonathan's proposal but may have backward
compatibility problems. OTOH, existing proxies will falsely detect loops no
matter what we do, right?

SRD> You are correct, existing proxies will detect loops no matter what we
do.

Steve

> -----Original Message-----
> From: owner-sip@lists.research.bell-labs.com
> [mailto:owner-sip@lists.research.bell-labs.com]On Behalf Of Jonathan
> Rosenberg
> Sent: Thursday, December 02, 1999 1:37 AM
> To: Donovan, Steven R.
> Cc: sip@lists.research.bell-labs.com
> Subject: Re: "Legal" via loops
>
>
> Yes, this is a problem. We have discussed it in the past, and I don't
> think there was an agreed upon solution.
>
> I believe the solution to this that is backwards compatible is to make
> use of the branch ID parameter in the Via field. Let me explain.
>
> At a proxy, we say that a request is a new transaction (not a
> retransmission, and not a loop), if its Call-ID, To, From CSeq *and*
> request URI are different from another request. In that case, we can
> define a transaction ID as a hash over these quantities. Call this hash
> H. Also assume that a proxy is set up so that if it forks, it never
> forks more than 2**N times, for some N that is sufficiently large. When
> a proxy forks, the ith branch has a branchid parameter with the value (H
> << N) + i.
>
> When a response arrives, the proxy takes the branch ID parameter from
> the top Via field, shifts it right by N, and obains the transaction ID.
> This allows the response to be matched to the request. The N bits that
> were shifted out identify which branch the response is for.
>
> To do loop detection, when a request arrives, the proxy looks for its
> own address in the Via list. If it finds it, AND if the branch ID
> parameter in that Via field, shifted right N bits, match the transaction
> ID computed for this request, it is considered a loop. Otherwise, if the
> proxy doesn't find its address in the Via list, but the transaction ID
> computed from the request matches the transaction ID of an existing
> transaction, its a retransmission. Otherwise, its a request for a new
> transaction.
>
> There are other ways to place both the actual branch ID, and this new
> hash, into the branch ID parameter in the Via field, besides this shift
> by N.
>
> Comments?
>
> -Jonathan R.
>
> > "Donovan, Steven R." wrote:
> >
> > I believe that this has been discussed in the past, but I don't
> > believe there was a resolution.
> >
> > It reframe the problem, assume user A invites user B at proxy 1.  User
> > B redirects the call to User C at proxy 2 and user C redirects the
> > call to user D at proxy 1.
> >
> > User A            Proxy 1           Proxy 2
> > ----------------->
> > Invite B@P1
> > V: A
> > F: UserA@A
> > T: UserB@P1
> > I: 1234@A
> > Cseq: 1 INVITE
> >                   ----------------->
> >                   Invite C@P2
> >                   V: P1
> >                   V: A
> >                   F: UserA@A
> >                   T: UserB@P1
> >                   I: 1234@A
> >                   Cseq: 1 INVITE
> >                   <-----------------
> >                   Invite D@P1
> >                   V: P2
> >                   V: P1
> >                   V: A
> >                   F: UserA@A
> >                   T: UserB@P1
> >                   I: 1234@A
> >                   Cseq: 1 INVITE
> >
> > At this point, proxy 1 will reject the call with a 482 Loop Detected.
> > This is despite the fact that it is a new request for a different
> > request URI.  It just happens that two users in the path of the INVITE
> > are served by the same proxy.
> >
> > Am I correct that no resolution to this problem has been proposed?
> >
> > Steve
> >
> > P.S. We have some ideas on how to address this, but first I want to
> > make sure that  I haven't missed an already proposed solution.
> >
> > P.P.S There is a second level problem lurking for stateful proxies,
> > even if we solve the via loop issue.  This is due to the fact that a
> > stateful proxy that does not detect this as a via loop will detect it
> > as a retransmission (same call leg (to, from, callid) with the same
> > cseq and probably drop the invite.
>
> --
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com
>
>
>

------_=_NextPart_001_01BF3CE6.8C7A2CE8
Content-Type: text/html;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3DISO-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2569.0">
<TITLE>RE: &quot;Legal&quot; via loops</TITLE>
</HEAD>
<BODY>

<P><FONT SIZE=3D2>Dave Oran wrote:</FONT>
</P>

<P><FONT SIZE=3D2>On first blush, it appears this will work. Another =
approach that may be</FONT>
<BR><FONT SIZE=3D2>simpler is to allow a VIA to be marked explicitly as =
a &quot;loop-barrier&quot;, so</FONT>
<BR><FONT SIZE=3D2>that any proxy doing loop detect does not look =
further back in the VIA list</FONT>
<BR><FONT SIZE=3D2>than the first &quot;loop-barrier&quot;. Any =
stateful proxy that intercepts responses</FONT>
<BR><FONT SIZE=3D2>and re-issues INVITES would mark its VIA with a =
loop-barrier.</FONT>
</P>

<P><FONT SIZE=3D2>SRD&gt; But then how is a true loop detected?&nbsp; =
If proxy 2, after receiving a request from proxy 1, adds its via as a =
loop-barrier and sends the request back to proxy 1, using the same =
request URI as the original request to proxy 1, this should be treated =
as a via loop.&nbsp; By your rule, proxy 1 would stop its via loop =
detection at the loop-barrier and process the request.&nbsp; It is =
interesting that if proxy 1 is stateless then the request will be sent =
back to proxy 2.&nbsp; If it is a stateful proxy, then proxy 1 will =
treat the request as a retransmission.</FONT></P>

<P><FONT SIZE=3D2>SRD&gt; There still needs to be a way for the proxy =
to store the request URI in the via header so it can know when an =
INVITE for an existing transaction is really a new request.&nbsp; =
Jonathan's approach achieves that with the assumption that the proxy =
stores the request URI in the state information associated with the =
transaction.&nbsp; This approach has the merit that it uses an existing =
parameter to the Via header.&nbsp; </FONT></P>

<P><FONT SIZE=3D2>SRD&gt; An alternative approach would be to add a =
parameter to the Via header that could be used by the proxy to store =
the request URI.&nbsp; For privacy reasons, the proxy would need to =
encrypt the request URI when storing it.&nbsp; </FONT></P>

<P><FONT SIZE=3D2>This seems simpler than Jonathan's proposal but may =
have backward</FONT>
<BR><FONT SIZE=3D2>compatibility problems. OTOH, existing proxies will =
falsely detect loops no</FONT>
<BR><FONT SIZE=3D2>matter what we do, right?</FONT>
</P>

<P><FONT SIZE=3D2>SRD&gt; You are correct, existing proxies will detect =
loops no matter what we do.</FONT>
</P>

<P><FONT SIZE=3D2>Steve</FONT>
</P>

<P><FONT SIZE=3D2>&gt; -----Original Message-----</FONT>
<BR><FONT SIZE=3D2>&gt; From: =
owner-sip@lists.research.bell-labs.com</FONT>
<BR><FONT SIZE=3D2>&gt; [<A =
HREF=3D"mailto:owner-sip@lists.research.bell-labs.com">mailto:owner-sip@=
lists.research.bell-labs.com</A>]On Behalf Of Jonathan</FONT>
<BR><FONT SIZE=3D2>&gt; Rosenberg</FONT>
<BR><FONT SIZE=3D2>&gt; Sent: Thursday, December 02, 1999 1:37 =
AM</FONT>
<BR><FONT SIZE=3D2>&gt; To: Donovan, Steven R.</FONT>
<BR><FONT SIZE=3D2>&gt; Cc: sip@lists.research.bell-labs.com</FONT>
<BR><FONT SIZE=3D2>&gt; Subject: Re: &quot;Legal&quot; via loops</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; Yes, this is a problem. We have discussed it in =
the past, and I don't</FONT>
<BR><FONT SIZE=3D2>&gt; think there was an agreed upon solution.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; I believe the solution to this that is =
backwards compatible is to make</FONT>
<BR><FONT SIZE=3D2>&gt; use of the branch ID parameter in the Via =
field. Let me explain.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; At a proxy, we say that a request is a new =
transaction (not a</FONT>
<BR><FONT SIZE=3D2>&gt; retransmission, and not a loop), if its =
Call-ID, To, From CSeq *and*</FONT>
<BR><FONT SIZE=3D2>&gt; request URI are different from another request. =
In that case, we can</FONT>
<BR><FONT SIZE=3D2>&gt; define a transaction ID as a hash over these =
quantities. Call this hash</FONT>
<BR><FONT SIZE=3D2>&gt; H. Also assume that a proxy is set up so that =
if it forks, it never</FONT>
<BR><FONT SIZE=3D2>&gt; forks more than 2**N times, for some N that is =
sufficiently large. When</FONT>
<BR><FONT SIZE=3D2>&gt; a proxy forks, the ith branch has a branchid =
parameter with the value (H</FONT>
<BR><FONT SIZE=3D2>&gt; &lt;&lt; N) + i.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; When a response arrives, the proxy takes the =
branch ID parameter from</FONT>
<BR><FONT SIZE=3D2>&gt; the top Via field, shifts it right by N, and =
obains the transaction ID.</FONT>
<BR><FONT SIZE=3D2>&gt; This allows the response to be matched to the =
request. The N bits that</FONT>
<BR><FONT SIZE=3D2>&gt; were shifted out identify which branch the =
response is for.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; To do loop detection, when a request arrives, =
the proxy looks for its</FONT>
<BR><FONT SIZE=3D2>&gt; own address in the Via list. If it finds it, =
AND if the branch ID</FONT>
<BR><FONT SIZE=3D2>&gt; parameter in that Via field, shifted right N =
bits, match the transaction</FONT>
<BR><FONT SIZE=3D2>&gt; ID computed for this request, it is considered =
a loop. Otherwise, if the</FONT>
<BR><FONT SIZE=3D2>&gt; proxy doesn't find its address in the Via list, =
but the transaction ID</FONT>
<BR><FONT SIZE=3D2>&gt; computed from the request matches the =
transaction ID of an existing</FONT>
<BR><FONT SIZE=3D2>&gt; transaction, its a retransmission. Otherwise, =
its a request for a new</FONT>
<BR><FONT SIZE=3D2>&gt; transaction.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; There are other ways to place both the actual =
branch ID, and this new</FONT>
<BR><FONT SIZE=3D2>&gt; hash, into the branch ID parameter in the Via =
field, besides this shift</FONT>
<BR><FONT SIZE=3D2>&gt; by N.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; Comments?</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; -Jonathan R.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; &quot;Donovan, Steven R.&quot; =
wrote:</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; I believe that this has been discussed in =
the past, but I don't</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; believe there was a resolution.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; It reframe the problem, assume user A =
invites user B at proxy 1.&nbsp; User</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; B redirects the call to User C at proxy 2 =
and user C redirects the</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; call to user D at proxy 1.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; User =
A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Proxy 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Proxy 2</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; -----------------&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Invite B@P1</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; V: A</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; F: UserA@A</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; T: UserB@P1</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; I: 1234@A</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Cseq: 1 INVITE</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -----------------&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Invite C@P2</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: P1</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: A</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; F: UserA@A</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T: UserB@P1</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I: 1234@A</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cseq: 1 INVITE</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;-----------------</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Invite D@P1</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: P2</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: P1</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; V: A</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; F: UserA@A</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T: UserB@P1</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I: 1234@A</FONT>
<BR><FONT SIZE=3D2>&gt; =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cseq: 1 INVITE</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; At this point, proxy 1 will reject the =
call with a 482 Loop Detected.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; This is despite the fact that it is a new =
request for a different</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; request URI.&nbsp; It just happens that =
two users in the path of the INVITE</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; are served by the same proxy.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Am I correct that no resolution to this =
problem has been proposed?</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Steve</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; P.S. We have some ideas on how to address =
this, but first I want to</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; make sure that&nbsp; I haven't missed an =
already proposed solution.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt;</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; P.P.S There is a second level problem =
lurking for stateful proxies,</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; even if we solve the via loop issue.&nbsp; =
This is due to the fact that a</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; stateful proxy that does not detect this =
as a via loop will detect it</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; as a retransmission (same call leg (to, =
from, callid) with the same</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; cseq and probably drop the invite.</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt; --</FONT>
<BR><FONT SIZE=3D2>&gt; Jonathan D. =
Rosenberg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
200 Executive Drive</FONT>
<BR><FONT SIZE=3D2>&gt; Chief =
Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Suite 120</FONT>
<BR><FONT SIZE=3D2>&gt; =
dynamicsoft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; West =
Orange, NJ 07052</FONT>
<BR><FONT SIZE=3D2>&gt; =
jdrosen@dynamicsoft.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
FAX:&nbsp;&nbsp; (732) 741-4778</FONT>
<BR><FONT SIZE=3D2>&gt; <A HREF=3D"http://www.cs.columbia.edu/~jdrosen" =
TARGET=3D"_blank">http://www.cs.columbia.edu/~jdrosen</A>&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PHONE: (732) 741-7244</FONT>
<BR><FONT SIZE=3D2>&gt; <A HREF=3D"http://www.dynamicsoft.com" =
TARGET=3D"_blank">http://www.dynamicsoft.com</A></FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
<BR><FONT SIZE=3D2>&gt;</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01BF3CE6.8C7A2CE8--



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 15:56:17 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA24131
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 15:56:09 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id E3B7B52DE; Thu,  2 Dec 1999 15:53:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 403CE52DF; Thu,  2 Dec 1999 15:53:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 0043152DE
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 15:53:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec  2 15:52:55 EST 1999
Received: from paleale.cisco.com ([171.71.154.60]) by dusty; Thu Dec  2 15:51:32 EST 1999
Received: from OranLT ([171.69.210.5]) by paleale.cisco.com (8.8.4-Cisco.1/8.6.5) with SMTP id MAA06707; Thu, 2 Dec 1999 12:52:48 -0800 (PST)
From: "David R. Oran" <oran@cisco.com>
To: "Donovan, Steven R." <Steven.R.Donovan@wcom.com>,
        "Jonathan Rosenberg" <jdrosen@dynamicsoft.com>
Cc: <sip@lists.research.bell-labs.com>
Subject: RE: "Legal" via loops
Date: Thu, 2 Dec 1999 15:50:03 -0500
Message-ID: <NDBBKHCGKKIOOIJEGCOEEEFFCMAA.oran@cisco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00B8_01BF3CDC.E5C18580"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
In-reply-to: <75C79E507864D3118AFC00805FEAB7D8018FA9@ripexch001.mcit.com>
Importance: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This is a multi-part message in MIME format.

------=_NextPart_000_00B8_01BF3CDC.E5C18580
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

RE: "Legal" via loops
  -----Original Message-----
  From: Donovan, Steven R. [mailto:Steven.R.Donovan@wcom.com]
  Sent: Thursday, December 02, 1999 11:59 AM
  To: 'David R. Oran'; Jonathan Rosenberg
  Cc: sip@lists.research.bell-labs.com
  Subject: RE: "Legal" via loops


  Dave Oran wrote:

  On first blush, it appears this will work. Another approach that may be
  simpler is to allow a VIA to be marked explicitly as a "loop-barrier", so
  that any proxy doing loop detect does not look further back in the VIA
list
  than the first "loop-barrier". Any stateful proxy that intercepts
responses
  and re-issues INVITES would mark its VIA with a loop-barrier.

  SRD> But then how is a true loop detected?  If proxy 2, after receiving a
request from proxy 1, adds its via as a loop-barrier and sends the request
back to proxy 1, using the same request URI as the original request to proxy
1, this should be treated as a via loop.  By your rule, proxy 1 would stop
its via loop detection at the loop-barrier and process the request.  It is
interesting that if proxy 1 is stateless then the request will be sent back
to proxy 2.  If it is a stateful proxy, then proxy 1 will treat the request
as a retransmission.

  Proxy 1 would'nt do this unless it had gotten a redirect back senting it
to a different Contact: header. That's why I said "a stateful proxy that
intercepts responses".

  SRD> There still needs to be a way for the proxy to store the request URI
in the via header so it can know when an INVITE for an existing transaction
is really a new request.  Jonathan's approach achieves that with the
assumption that the proxy stores the request URI in the state information
associated with the transaction.  This approach has the merit that it uses
an existing parameter to the Via header.

  True. I was trying to come up with a scheme that didn't require comparing
URIs.

  SRD> An alternative approach would be to add a parameter to the Via header
that could be used by the proxy to store the request URI.  For privacy
reasons, the proxy would need to encrypt the request URI when storing it.

  I prefer Jonathan's scheme to that.

  This seems simpler than Jonathan's proposal but may have backward
  compatibility problems. OTOH, existing proxies will falsely detect loops
no
  matter what we do, right?

  SRD> You are correct, existing proxies will detect loops no matter what we
do.

  Steve

  > -----Original Message-----
  > From: owner-sip@lists.research.bell-labs.com
  > [mailto:owner-sip@lists.research.bell-labs.com]On Behalf Of Jonathan
  > Rosenberg
  > Sent: Thursday, December 02, 1999 1:37 AM
  > To: Donovan, Steven R.
  > Cc: sip@lists.research.bell-labs.com
  > Subject: Re: "Legal" via loops
  >
  >
  > Yes, this is a problem. We have discussed it in the past, and I don't
  > think there was an agreed upon solution.
  >
  > I believe the solution to this that is backwards compatible is to make
  > use of the branch ID parameter in the Via field. Let me explain.
  >
  > At a proxy, we say that a request is a new transaction (not a
  > retransmission, and not a loop), if its Call-ID, To, From CSeq *and*
  > request URI are different from another request. In that case, we can
  > define a transaction ID as a hash over these quantities. Call this hash
  > H. Also assume that a proxy is set up so that if it forks, it never
  > forks more than 2**N times, for some N that is sufficiently large. When
  > a proxy forks, the ith branch has a branchid parameter with the value (H
  > << N) + i.
  >
  > When a response arrives, the proxy takes the branch ID parameter from
  > the top Via field, shifts it right by N, and obains the transaction ID.
  > This allows the response to be matched to the request. The N bits that
  > were shifted out identify which branch the response is for.
  >
  > To do loop detection, when a request arrives, the proxy looks for its
  > own address in the Via list. If it finds it, AND if the branch ID
  > parameter in that Via field, shifted right N bits, match the transaction
  > ID computed for this request, it is considered a loop. Otherwise, if the
  > proxy doesn't find its address in the Via list, but the transaction ID
  > computed from the request matches the transaction ID of an existing
  > transaction, its a retransmission. Otherwise, its a request for a new
  > transaction.
  >
  > There are other ways to place both the actual branch ID, and this new
  > hash, into the branch ID parameter in the Via field, besides this shift
  > by N.
  >
  > Comments?
  >
  > -Jonathan R.
  >
  > > "Donovan, Steven R." wrote:
  > >
  > > I believe that this has been discussed in the past, but I don't
  > > believe there was a resolution.
  > >
  > > It reframe the problem, assume user A invites user B at proxy 1.  User
  > > B redirects the call to User C at proxy 2 and user C redirects the
  > > call to user D at proxy 1.
  > >
  > > User A            Proxy 1           Proxy 2
  > > ----------------->
  > > Invite B@P1
  > > V: A
  > > F: UserA@A
  > > T: UserB@P1
  > > I: 1234@A
  > > Cseq: 1 INVITE
  > >                   ----------------->
  > >                   Invite C@P2
  > >                   V: P1
  > >                   V: A
  > >                   F: UserA@A
  > >                   T: UserB@P1
  > >                   I: 1234@A
  > >                   Cseq: 1 INVITE
  > >                   <-----------------
  > >                   Invite D@P1
  > >                   V: P2
  > >                   V: P1
  > >                   V: A
  > >                   F: UserA@A
  > >                   T: UserB@P1
  > >                   I: 1234@A
  > >                   Cseq: 1 INVITE
  > >
  > > At this point, proxy 1 will reject the call with a 482 Loop Detected.
  > > This is despite the fact that it is a new request for a different
  > > request URI.  It just happens that two users in the path of the INVITE
  > > are served by the same proxy.
  > >
  > > Am I correct that no resolution to this problem has been proposed?
  > >
  > > Steve
  > >
  > > P.S. We have some ideas on how to address this, but first I want to
  > > make sure that  I haven't missed an already proposed solution.
  > >
  > > P.P.S There is a second level problem lurking for stateful proxies,
  > > even if we solve the via loop issue.  This is due to the fact that a
  > > stateful proxy that does not detect this as a via loop will detect it
  > > as a retransmission (same call leg (to, from, callid) with the same
  > > cseq and probably drop the invite.
  >
  > --
  > Jonathan D. Rosenberg                       200 Executive Drive
  > Chief Scientist                             Suite 120
  > dynamicsoft                                 West Orange, NJ 07052
  > jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
  > http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
  > http://www.dynamicsoft.com
  >
  >
  >


------=_NextPart_000_00B8_01BF3CDC.E5C18580
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>RE: "Legal" via loops</TITLE>
<META content=3D"text/html; charset=3DISO-8859-1" =
http-equiv=3DContent-Type>
<META content=3D"MSHTML 5.00.2919.6307" name=3DGENERATOR></HEAD>
<BODY>
<DIV>&nbsp;</DIV>
<BLOCKQUOTE=20
style=3D"BORDER-LEFT: #0000ff 2px solid; MARGIN-LEFT: 5px; MARGIN-RIGHT: =
0px; PADDING-LEFT: 5px">
  <DIV align=3Dleft class=3DOutlookMessageHeader dir=3Dltr><FONT =
face=3DTahoma=20
  size=3D2>-----Original Message-----<BR><B>From:</B> Donovan, Steven R. =

  [mailto:Steven.R.Donovan@wcom.com]<BR><B>Sent:</B> Thursday, December =
02, 1999=20
  11:59 AM<BR><B>To:</B> 'David R. Oran'; Jonathan =
Rosenberg<BR><B>Cc:</B>=20
  sip@lists.research.bell-labs.com<BR><B>Subject:</B> RE: "Legal" via=20
  loops<BR><BR></DIV></FONT>
  <P><FONT size=3D2>Dave Oran wrote:</FONT> </P>
  <P><FONT size=3D2>On first blush, it appears this will work. Another =
approach=20
  that may be</FONT> <BR><FONT size=3D2>simpler is to allow a VIA to be =
marked=20
  explicitly as a "loop-barrier", so</FONT> <BR><FONT size=3D2>that any =
proxy=20
  doing loop detect does not look further back in the VIA list</FONT> =
<BR><FONT=20
  size=3D2>than the first "loop-barrier". Any stateful proxy that =
intercepts=20
  responses</FONT> <BR><FONT size=3D2>and re-issues INVITES would mark =
its VIA=20
  with a loop-barrier.</FONT> </P>
  <P><FONT size=3D2>SRD&gt; But then how is a true loop detected?&nbsp; =
If proxy=20
  2, after receiving a request from proxy 1, adds its via as a =
loop-barrier and=20
  sends the request back to proxy 1, using the same request URI as the =
original=20
  request to proxy 1, this should be treated as a via loop.&nbsp; By =
your rule,=20
  proxy 1 would stop its via loop detection at the loop-barrier and =
process the=20
  request.&nbsp; It is interesting that if proxy 1 is stateless then the =
request=20
  will be sent back to proxy 2.&nbsp; If it is a stateful proxy, then =
proxy 1=20
  will treat the request as a retransmission.<FONT color=3D#0000ff=20
  face=3DArial><SPAN =
class=3D290524620-02121999>&nbsp;</SPAN></FONT></FONT></P>
  <P><FONT size=3D2><FONT color=3D#0000ff face=3DArial><SPAN=20
  class=3D290524620-02121999>Proxy 1 would'nt do this unless it had =
gotten a=20
  redirect back senting it to a different Contact: header. That's why I =
said "a=20
  stateful proxy that intercepts =
responses".&nbsp;</SPAN></FONT></FONT></P>
  <P><FONT size=3D2>SRD&gt; There still needs to be a way for the proxy =
to store=20
  the request URI in the via header so it can know when an INVITE for an =

  existing transaction is really a new request.&nbsp; Jonathan's =
approach=20
  achieves that with the assumption that the proxy stores the request =
URI in the=20
  state information associated with the transaction.&nbsp; This approach =
has the=20
  merit that it uses an existing parameter to the Via =
header.&nbsp;&nbsp;<FONT=20
  color=3D#0000ff face=3DArial><SPAN=20
  class=3D290524620-02121999>&nbsp;</SPAN></FONT></FONT></P>
  <P><FONT size=3D2><FONT color=3D#0000ff face=3DArial><SPAN=20
  class=3D290524620-02121999>True. I was trying to come up with a scheme =
that=20
  didn't require comparing URIs.&nbsp;</SPAN></FONT></FONT></P>
  <P><FONT size=3D2>SRD&gt; An alternative approach would be to add a =
parameter to=20
  the Via header that could be used by the proxy to store the request =
URI.&nbsp;=20
  For privacy reasons, the proxy would need to encrypt the request URI =
when=20
  storing it.&nbsp;&nbsp;<FONT color=3D#0000ff face=3DArial><SPAN=20
  class=3D290524620-02121999>&nbsp;</SPAN></FONT></FONT></P>
  <P><FONT size=3D2><FONT color=3D#0000ff face=3DArial><SPAN=20
  class=3D290524620-02121999>I prefer Jonathan's scheme to=20
  that.&nbsp;</SPAN></FONT></FONT></P>
  <P><FONT size=3D2>This seems simpler than Jonathan's proposal but may =
have=20
  backward</FONT> <BR><FONT size=3D2>compatibility problems. OTOH, =
existing=20
  proxies will falsely detect loops no</FONT> <BR><FONT size=3D2>matter =
what we=20
  do, right?</FONT> </P>
  <P><FONT size=3D2>SRD&gt; You are correct, existing proxies will =
detect loops no=20
  matter what we do.</FONT> </P>
  <P><FONT size=3D2>Steve</FONT> </P>
  <P><FONT size=3D2>&gt; -----Original Message-----</FONT> <BR><FONT =
size=3D2>&gt;=20
  From: owner-sip@lists.research.bell-labs.com</FONT> <BR><FONT =
size=3D2>&gt; [<A=20
  =
href=3D"mailto:owner-sip@lists.research.bell-labs.com">mailto:owner-sip@l=
ists.research.bell-labs.com</A>]On=20
  Behalf Of Jonathan</FONT> <BR><FONT size=3D2>&gt; Rosenberg</FONT> =
<BR><FONT=20
  size=3D2>&gt; Sent: Thursday, December 02, 1999 1:37 AM</FONT> =
<BR><FONT=20
  size=3D2>&gt; To: Donovan, Steven R.</FONT> <BR><FONT size=3D2>&gt; =
Cc:=20
  sip@lists.research.bell-labs.com</FONT> <BR><FONT size=3D2>&gt; =
Subject: Re:=20
  "Legal" via loops</FONT> <BR><FONT size=3D2>&gt;</FONT> <BR><FONT=20
  size=3D2>&gt;</FONT> <BR><FONT size=3D2>&gt; Yes, this is a problem. =
We have=20
  discussed it in the past, and I don't</FONT> <BR><FONT size=3D2>&gt; =
think there=20
  was an agreed upon solution.</FONT> <BR><FONT size=3D2>&gt;</FONT> =
<BR><FONT=20
  size=3D2>&gt; I believe the solution to this that is backwards =
compatible is to=20
  make</FONT> <BR><FONT size=3D2>&gt; use of the branch ID parameter in =
the Via=20
  field. Let me explain.</FONT> <BR><FONT size=3D2>&gt;</FONT> <BR><FONT =

  size=3D2>&gt; At a proxy, we say that a request is a new transaction =
(not=20
  a</FONT> <BR><FONT size=3D2>&gt; retransmission, and not a loop), if =
its=20
  Call-ID, To, From CSeq *and*</FONT> <BR><FONT size=3D2>&gt; request =
URI are=20
  different from another request. In that case, we can</FONT> <BR><FONT=20
  size=3D2>&gt; define a transaction ID as a hash over these quantities. =
Call this=20
  hash</FONT> <BR><FONT size=3D2>&gt; H. Also assume that a proxy is set =
up so=20
  that if it forks, it never</FONT> <BR><FONT size=3D2>&gt; forks more =
than 2**N=20
  times, for some N that is sufficiently large. When</FONT> <BR><FONT=20
  size=3D2>&gt; a proxy forks, the ith branch has a branchid parameter =
with the=20
  value (H</FONT> <BR><FONT size=3D2>&gt; &lt;&lt; N) + i.</FONT> =
<BR><FONT=20
  size=3D2>&gt;</FONT> <BR><FONT size=3D2>&gt; When a response arrives, =
the proxy=20
  takes the branch ID parameter from</FONT> <BR><FONT size=3D2>&gt; the =
top Via=20
  field, shifts it right by N, and obains the transaction ID.</FONT> =
<BR><FONT=20
  size=3D2>&gt; This allows the response to be matched to the request. =
The N bits=20
  that</FONT> <BR><FONT size=3D2>&gt; were shifted out identify which =
branch the=20
  response is for.</FONT> <BR><FONT size=3D2>&gt;</FONT> <BR><FONT =
size=3D2>&gt; To=20
  do loop detection, when a request arrives, the proxy looks for =
its</FONT>=20
  <BR><FONT size=3D2>&gt; own address in the Via list. If it finds it, =
AND if the=20
  branch ID</FONT> <BR><FONT size=3D2>&gt; parameter in that Via field, =
shifted=20
  right N bits, match the transaction</FONT> <BR><FONT size=3D2>&gt; ID =
computed=20
  for this request, it is considered a loop. Otherwise, if the</FONT> =
<BR><FONT=20
  size=3D2>&gt; proxy doesn't find its address in the Via list, but the=20
  transaction ID</FONT> <BR><FONT size=3D2>&gt; computed from the =
request matches=20
  the transaction ID of an existing</FONT> <BR><FONT size=3D2>&gt; =
transaction,=20
  its a retransmission. Otherwise, its a request for a new</FONT> =
<BR><FONT=20
  size=3D2>&gt; transaction.</FONT> <BR><FONT size=3D2>&gt;</FONT> =
<BR><FONT=20
  size=3D2>&gt; There are other ways to place both the actual branch ID, =
and this=20
  new</FONT> <BR><FONT size=3D2>&gt; hash, into the branch ID parameter =
in the Via=20
  field, besides this shift</FONT> <BR><FONT size=3D2>&gt; by N.</FONT> =
<BR><FONT=20
  size=3D2>&gt;</FONT> <BR><FONT size=3D2>&gt; Comments?</FONT> =
<BR><FONT=20
  size=3D2>&gt;</FONT> <BR><FONT size=3D2>&gt; -Jonathan R.</FONT> =
<BR><FONT=20
  size=3D2>&gt;</FONT> <BR><FONT size=3D2>&gt; &gt; "Donovan, Steven R." =

  wrote:</FONT> <BR><FONT size=3D2>&gt; &gt;</FONT> <BR><FONT =
size=3D2>&gt; &gt; I=20
  believe that this has been discussed in the past, but I don't</FONT> =
<BR><FONT=20
  size=3D2>&gt; &gt; believe there was a resolution.</FONT> <BR><FONT =
size=3D2>&gt;=20
  &gt;</FONT> <BR><FONT size=3D2>&gt; &gt; It reframe the problem, =
assume user A=20
  invites user B at proxy 1.&nbsp; User</FONT> <BR><FONT size=3D2>&gt; =
&gt; B=20
  redirects the call to User C at proxy 2 and user C redirects =
the</FONT>=20
  <BR><FONT size=3D2>&gt; &gt; call to user D at proxy 1.</FONT> =
<BR><FONT=20
  size=3D2>&gt; &gt;</FONT> <BR><FONT size=3D2>&gt; &gt; User=20
  A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Proxy=20
  1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Proxy =
2</FONT>=20
  <BR><FONT size=3D2>&gt; &gt; -----------------&gt;</FONT> <BR><FONT =
size=3D2>&gt;=20
  &gt; Invite B@P1</FONT> <BR><FONT size=3D2>&gt; &gt; V: A</FONT> =
<BR><FONT=20
  size=3D2>&gt; &gt; F: UserA@A</FONT> <BR><FONT size=3D2>&gt; &gt; T:=20
  UserB@P1</FONT> <BR><FONT size=3D2>&gt; &gt; I: 1234@A</FONT> =
<BR><FONT=20
  size=3D2>&gt; &gt; Cseq: 1 INVITE</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  -----------------&gt;</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  Invite C@P2</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  V: P1</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  V: A</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  F: UserA@A</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  T: UserB@P1</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  I: 1234@A</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  Cseq: 1 INVITE</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  &lt;-----------------</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  Invite D@P1</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  V: P2</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  V: P1</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  V: A</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  F: UserA@A</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  T: UserB@P1</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  I: 1234@A</FONT> <BR><FONT size=3D2>&gt;=20
  =
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  Cseq: 1 INVITE</FONT> <BR><FONT size=3D2>&gt; &gt;</FONT> <BR><FONT =
size=3D2>&gt;=20
  &gt; At this point, proxy 1 will reject the call with a 482 Loop=20
  Detected.</FONT> <BR><FONT size=3D2>&gt; &gt; This is despite the fact =
that it=20
  is a new request for a different</FONT> <BR><FONT size=3D2>&gt; &gt; =
request=20
  URI.&nbsp; It just happens that two users in the path of the =
INVITE</FONT>=20
  <BR><FONT size=3D2>&gt; &gt; are served by the same proxy.</FONT> =
<BR><FONT=20
  size=3D2>&gt; &gt;</FONT> <BR><FONT size=3D2>&gt; &gt; Am I correct =
that no=20
  resolution to this problem has been proposed?</FONT> <BR><FONT =
size=3D2>&gt;=20
  &gt;</FONT> <BR><FONT size=3D2>&gt; &gt; Steve</FONT> <BR><FONT =
size=3D2>&gt;=20
  &gt;</FONT> <BR><FONT size=3D2>&gt; &gt; P.S. We have some ideas on =
how to=20
  address this, but first I want to</FONT> <BR><FONT size=3D2>&gt; &gt; =
make sure=20
  that&nbsp; I haven't missed an already proposed solution.</FONT> =
<BR><FONT=20
  size=3D2>&gt; &gt;</FONT> <BR><FONT size=3D2>&gt; &gt; P.P.S There is =
a second=20
  level problem lurking for stateful proxies,</FONT> <BR><FONT =
size=3D2>&gt; &gt;=20
  even if we solve the via loop issue.&nbsp; This is due to the fact =
that=20
  a</FONT> <BR><FONT size=3D2>&gt; &gt; stateful proxy that does not =
detect this=20
  as a via loop will detect it</FONT> <BR><FONT size=3D2>&gt; &gt; as a=20
  retransmission (same call leg (to, from, callid) with the same</FONT>=20
  <BR><FONT size=3D2>&gt; &gt; cseq and probably drop the invite.</FONT> =
<BR><FONT=20
  size=3D2>&gt;</FONT> <BR><FONT size=3D2>&gt; --</FONT> <BR><FONT =
size=3D2>&gt;=20
  Jonathan D.=20
  =
Rosenberg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  200 Executive Drive</FONT> <BR><FONT size=3D2>&gt; Chief=20
  =
Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  Suite 120</FONT> <BR><FONT size=3D2>&gt;=20
  =
dynamicsoft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  West Orange, NJ 07052</FONT> <BR><FONT size=3D2>&gt;=20
  =
jdrosen@dynamicsoft.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  FAX:&nbsp;&nbsp; (732) 741-4778</FONT> <BR><FONT size=3D2>&gt; <A=20
  href=3D"http://www.cs.columbia.edu/~jdrosen"=20
  =
target=3D_blank>http://www.cs.columbia.edu/~jdrosen</A>&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  PHONE: (732) 741-7244</FONT> <BR><FONT size=3D2>&gt; <A=20
  href=3D"http://www.dynamicsoft.com"=20
  target=3D_blank>http://www.dynamicsoft.com</A></FONT> <BR><FONT=20
  size=3D2>&gt;</FONT> <BR><FONT size=3D2>&gt;</FONT> <BR><FONT =
size=3D2>&gt;</FONT>=20
  </P></BLOCKQUOTE></BODY></HTML>

------=_NextPart_000_00B8_01BF3CDC.E5C18580--




From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 18:08:04 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id SAA28923
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 18:08:03 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7A30852DF; Thu,  2 Dec 1999 18:05:33 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 0130752E0; Thu,  2 Dec 1999 18:05:32 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from nova.dnrc.bell-labs.com (nova [135.180.131.5])
	by lists.research.bell-labs.com (Postfix) with ESMTP id D1B7852DF
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 18:05:16 -0500 (EST)
Received: from dnrc.bell-labs.com (igorspc.dnrc.bell-labs.com [135.180.130.146])
	by nova.dnrc.bell-labs.com (8.9.3/8.9.3) with ESMTP id SAA24304;
	Thu, 2 Dec 1999 18:05:14 -0500 (EST)
Message-ID: <3846FB7E.9593590E@dnrc.bell-labs.com>
Date: Thu, 02 Dec 1999 18:06:38 -0500
From: Igor Slepchin <igors@dnrc.bell-labs.com>
Organization: Bell Labs
X-Mailer: Mozilla 4.61 [en] (WinNT; U)
X-Accept-Language: en,ru
MIME-Version: 1.0
To: Marcin Michalak <mm@ipl.net>
Cc: sip@lists.research.bell-labs.com
Subject: Re: Available UACs?
References: <199911302006.VAA27642@uran.ipl.net>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

There is a list of implementations at
http://www.cs.columbia.edu/~hgs/sip/implementations.html.

---
Igor Slepchin


Marcin Michalak wrote:
> 
> Hi,
>  I'm writing a SIP Telephony gateway on Dialogic board and am just
> starting to perform compatibility tests. So far I'm using SIPHONE from
> Bell Labs for my internal tests, but I'd like to try also other clients, if
> there're any.
>  My question is whether You know of any other SIP UAC
> implementations with audio support (PCMU or GSM) which I could use
> for my internal tests?
>  I'll also try to make my gateway (which is called sip-telip) publicly
> available to let You try it. So far it's not possible, because it's behind
> the
> firewall but I'll try to negotiate with the administrator.
>  Any other people doing SIP Telephony gateways? My project is run on
> the University and is educational, but hope it'll be possible to use it
> somewhere.
>  Any people with Dialogic D41/ESC board interested in trying it?
>   Greetings from Krakow, Poland
>    Marcin Michalak, Computer Sciences, AGH
> 
>            Marcin Michalak - SQ9APQ
>                  mm@ipl.net



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  2 18:23:45 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id SAA06680
	for <sip-archive@odin.ietf.org>; Thu, 2 Dec 1999 18:23:43 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 38C5C52E0; Thu,  2 Dec 1999 18:21:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 90BCC52E1; Thu,  2 Dec 1999 18:21:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id D484452E0
	for <sip@lists.research.bell-labs.com>; Thu,  2 Dec 1999 18:21:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec  2 18:20:52 EST 1999
Received: from pmesmtp01.wcom.com ([199.249.20.1]) by dusty; Thu Dec  2 18:19:29 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #41714)
 id <0FM400701ZILS0@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Thu,  2 Dec 1999 23:20:45 +0000 (GMT)
Received: from ndcrelay2.mcit.com ([166.37.172.6])
 by firewall.mcit.com (PMDF V5.2-32 #41714)
 with ESMTP id <0FM4005JPZILLO@firewall.mcit.com>; Thu,
 02 Dec 1999 23:20:45 +0000 (GMT)
Received: from omzmta04.mcit.com (omzmta04.mcit.com [166.37.194.122])
 by ndcrelay2.mcit.com (8.8.7/) with ESMTP	id XAA26217; Thu,
 02 Dec 1999 23:15:56 +0000 (GMT)
Received: from C25776A ([166.37.187.186])
 by omzmta04.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991202232044.IFPY91@C25776A>; Thu, 02 Dec 1999 23:20:44 +0000
Date: Thu, 02 Dec 1999 17:20:43 -0600
From: Henry Sinnreich <henry.sinnreich@wcom.com>
Subject: RE: Available UACs?
In-reply-to: <3846FB7E.9593590E@dnrc.bell-labs.com>
To: Igor Slepchin <igors@dnrc.bell-labs.com>, Marcin Michalak <mm@ipl.net>
Cc: sip@lists.research.bell-labs.com, ulf.andersson@ericsson.com
Message-id: <NBBBIIJFOKPMFOOILMBKIEAKEPAA.henry.sinnreich@wcom.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

You may also contact participants at the 3rd SIP bakeoff next Mon-Tue:
http://www.sipbakeoff.org/ . I understand registration has been closed, but
the particpants may help you.

The organizer contact is Ulf Andersson [ulf.andersson@ericsson.com] .

Henry

> -----Original Message-----
> From: owner-sip@lists.research.bell-labs.com
> [mailto:owner-sip@lists.research.bell-labs.com]On Behalf Of Igor
> Slepchin
> Sent: Thursday, December 02, 1999 5:07 PM
> To: Marcin Michalak
> Cc: sip@lists.research.bell-labs.com
> Subject: Re: Available UACs?
>
>
> There is a list of implementations at
> http://www.cs.columbia.edu/~hgs/sip/implementations.html.
>
> ---
> Igor Slepchin
>
>
> Marcin Michalak wrote:
> >
> > Hi,
> >  I'm writing a SIP Telephony gateway on Dialogic board and am just
> > starting to perform compatibility tests. So far I'm using SIPHONE from
> > Bell Labs for my internal tests, but I'd like to try also other
> clients, if
> > there're any.
> >  My question is whether You know of any other SIP UAC
> > implementations with audio support (PCMU or GSM) which I could use
> > for my internal tests?
> >  I'll also try to make my gateway (which is called sip-telip) publicly
> > available to let You try it. So far it's not possible, because
> it's behind
> > the
> > firewall but I'll try to negotiate with the administrator.
> >  Any other people doing SIP Telephony gateways? My project is run on
> > the University and is educational, but hope it'll be possible to use it
> > somewhere.
> >  Any people with Dialogic D41/ESC board interested in trying it?
> >   Greetings from Krakow, Poland
> >    Marcin Michalak, Computer Sciences, AGH
> >
> >            Marcin Michalak - SQ9APQ
> >                  mm@ipl.net
>




From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec  3 23:48:06 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id XAA02409
	for <sip-archive@odin.ietf.org>; Fri, 3 Dec 1999 23:48:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id CBE4552BB; Fri,  3 Dec 1999 23:45:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3B10552C4; Fri,  3 Dec 1999 23:45:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 2F35952BB
	for <sip@lists.research.bell-labs.com>; Fri,  3 Dec 1999 23:45:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec  3 23:43:40 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec  3 23:42:15 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhsby10961;
	Sat, 4 Dec 1999 04:41:01 GMT
Received: from dynamicsoft.com (1Cust195.tnt2.freehold.nj.da.uu.net [63.17.114.195])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id XAA19921;
	Fri, 3 Dec 1999 23:43:33 -0500 (EST)
Message-ID: <38489D04.5D5DA25F@dynamicsoft.com>
Date: Fri, 03 Dec 1999 23:48:04 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: gcote@awardsolutions.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: Inconsistency regarding use of Allow header
References: <8F7ED3E5E583D311BA5F0050DA261DB01ACB04@pikespeak>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Gary Cote wrote:
> 
> Please pardon if this has been discussed before. I did not see any reference
> to it in the mail archive, or in the SIP notes and clarifications page.
> 
> RFC2543, Section 6 contains a table summarizing the use of various header
> fields. It indicates that the Allow header is mandatory for responses to the
> OPTIONS method, and optional for all 405 (Method Not Found) responses.
> 
> This appears to be inconsistent with other references to the Allow header.
> Sections 4.2.3 and 6.10 contradict the table - in effect stating the exact
> opposite.

Why is it inconsistent? 4.2.3 says:

> 600 (Busy). Such a server SHOULD return an Allow header field
>    indicating the methods that it supports. Proxy and redirect servers
>    simply forward the request without indicating their capabilities.

So, this is saying Allow is in the response to OPTIONS, as the table
says.

Section 6.10 does say something different:

> 6.10 Allow
> 
>    The Allow entity-header field lists the set of methods supported by
>    the resource identified by the Request-URI. The purpose of this field
>    is strictly to inform the recipient of valid methods associated with
>    the resource. An Allow header field MUST be present in a 405 (Method
>    Not Allowed) response and SHOULD be present in an OPTIONS response.

This says its a MUST in the 405 response, whereas the table says
optional in the response. This also says SHOULD in the OPTIONS response,
but the table says mandatory. These need to be made consistent, but they
are not opposites.

-Jonathan R.


-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec  4 00:08:11 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA12705
	for <sip-archive@odin.ietf.org>; Sat, 4 Dec 1999 00:08:11 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 2222852B6; Sat,  4 Dec 1999 00:05:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 94D8552D5; Sat,  4 Dec 1999 00:05:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id E92B052B6
	for <sip@lists.research.bell-labs.com>; Sat,  4 Dec 1999 00:05:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sat Dec  4 00:03:52 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Sat Dec  4 00:02:27 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhsca27536;
	Sat, 4 Dec 1999 05:01:16 GMT
Received: from dynamicsoft.com (1Cust195.tnt2.freehold.nj.da.uu.net [63.17.114.195])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id AAA19978;
	Sat, 4 Dec 1999 00:03:49 -0500 (EST)
Message-ID: <3848A1C4.75DB6140@dynamicsoft.com>
Date: Sat, 04 Dec 1999 00:08:20 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: "David R. Oran" <oran@cisco.com>
Cc: "Donovan, Steven R." <Steven.R.Donovan@wcom.com>,
        sip@lists.research.bell-labs.com
Subject: Re: "Legal" via loops
References: <NDBBKHCGKKIOOIJEGCOEEEFFCMAA.oran@cisco.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

> Dave Oran wrote: 
> 
>        On first blush, it appears this will work. Another approach that may be 
>        simpler is to allow a VIA to be marked explicitly as a "loop-barrier", so 
>        that any proxy doing loop detect does not look further back in the VIA list 
>        than the first "loop-barrier". Any stateful proxy that intercepts responses 
>        and re-issues INVITES would mark its VIA with a loop-barrier. 
> 
>        SRD> But then how is a true loop detected?  If proxy 2, after receiving a request from proxy 1, adds its via as a
>        loop-barrier and sends the request back to proxy 1, using the same request URI as the original request to proxy 1, this
>        should be treated as a via loop.  By your rule, proxy 1 would stop its via loop detection at the loop-barrier and process
>        the request.  It is interesting that if proxy 1 is stateless then the request will be sent back to proxy 2.  If it is a stateful
>        proxy, then proxy 1 will treat the request as a retransmission. 
> 
>        Proxy 1 would'nt do this unless it had gotten a redirect back senting it to a different Contact: header. That's
>        why I said "a stateful proxy that intercepts responses". 


You are both talking about two different problems. 

Loops are prevented by two means:

1. a proxy never forwards a request to a server currently on the Via
list
2. if a proxy receives a request and the proxy already appears on the
via list, it returns a loop detected error.

In theory, with (1) always done, (2) would never happen. But, you can't
rely on it being done at another proxy, so a proxy always needs to
verify that it doesn't propagate a problem created by another proxy. The
solution I suggest is for (2). I think Dave's suggestion is targeted at
(1). He is saying that when a redirect comes, its for some "new"
address, and therefore, its OK for the proxy to recurse on it and send
the request again to servers which received the request previously. The
problem with this approach is that a request can be forwarded to a "new"
address, in addition to a server being redirected to a "new" address. As
a result, Dave's mechanism only works for half the cases. What I propose
works for all of them. Note that my proposal also means that a proxy
shouldn't do (1) at all! THis is because the loop might be a legal one,
and the proxy can't know from the Via fields alone.

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec  5 13:37:51 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA22285
	for <sip-archive@odin.ietf.org>; Sun, 5 Dec 1999 13:37:50 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id A9D8952D6; Sun,  5 Dec 1999 13:35:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 1B5FE52DB; Sun,  5 Dec 1999 13:35:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 7978C52D6
	for <sip@lists.research.bell-labs.com>; Sun,  5 Dec 1999 13:35:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sun Dec  5 13:34:05 EST 1999
Received: from sheffield.cnchost.com ([207.155.252.12]) by dusty; Sun Dec  5 13:32:40 EST 1999
Received: from adsl-151-203-17-31.bellatlantic.net (adsl-151-203-17-31.bellatlantic.net [151.203.17.31])
	by sheffield.cnchost.com
	id NAA25278; Sun, 5 Dec 1999 13:33:58 -0500 (EST)
	[ConcentricHost SMTP Relay 1.8]
Date: Sun, 5 Dec 1999 13:08:53 -0500 (EST)
From: Scott Petrack <scott.petrack@metatel.com>
X-Sender: scott.petrack@adsl-151-203-17-31.bellatlantic.net
To: Dean Willis <dean.willis@wcom.com>
Cc: Jonathan Rosenberg <jdrosen@dynamicsoft.com>,
        Tom-PT Taylor <taylor@nortelnetworks.com>,
        sip@lists.research.bell-labs.com
Subject: Re: User signaling -- was  DTMF signaling between media gateways -
 ouch!
In-Reply-To: <003901bf3068$cd921c20$c5f7143f@dwillispc4>
Message-ID: <Pine.LNX.4.10.9912051246550.4803-100000@adsl-151-203-17-31.bellatlantic.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk


If the following is to out of date, forget it:

On Tue, 16 Nov 1999, Dean Willis wrote:

> Jonathan Rosenburg wrote:
> 
> See my previously posted example of an IVR which participates as a SIP
> signaling system but has all of its media paths terminated on set of media
> servers somewhere else.
> 
If there is DTMF involved, then somewhere in the system the DTMF
information must be produced or extracted or detected. (It is possible
that this happens in the end-system, if you are building a client that
is explicitly designed to reproduce the beautiful IVR UI). At that point,
wherever it is, DTMF events are being produced. All that we have ever been
saying is that in the overwhelming number of cases, the timing of the DTMF
events (at least their timing relative to something else) is important,
and the RTP format is the way to encode the events in such a way that
information is not lost. Whether this information is "media" or "not" is
sort of a red herring. What is not is if you really are encoding DTMF
information. If you are, then the application is probably best served by
using the standard encoding rather than invent a new one. If for whatever
reason it is vital that some SIP servers or clients get the DTMF
information synchronized with some other signals, then it would make sense
to put an audio/tones or audio/events payload into a SIP message. But in
fact this doesn't make sense very often. This is because if you are
interested in actual control signals and not lower-level DTMF events,
well, then you are not interesed in DTMF events.

> Yeah, I suppose we could have the detected tones schlepped back from the
> media server to the IVR over yet-another-potocol, but that doesn't seem
> particularly efficient.
> 
If you're detecting tones, then you have to detect them somewhere.
Wherever that place is, media is involved. If you're not detecting tones,
then I don't think you need any DTMF payload, since no DTMF was produced.

> Consider also that the end goal is NOT to ship DTMF, but to ship user input
> notifications. Today, a user input notification is DTMF because that's what
> the phones have, but it isn't going to stay that way.
> 
Yes, and the end goal is not to need gateways that receive DTMF and
translate them into some functional command. Today, there is a need for
DTMF detection in some place and then a translation into digital
information. That place is in fact a media gateway.


> If that isn't enough, let me propose another application.
> 
> 
> User A completes all calls through proxy P.
> 
> P provides additional services, along the lines of a "personal assistant".
> One of these services is a "voice recorder" ala President Nixon.
> 
> A uses an analog phone connected to a generic UA gateway.
> A calls party B, leaving P in the proxy path.
> A decides B is saying something interesting and wants B recorded.
> A presses the "R" key.
> P uses call control to add a voice recorder and recording announcement tone
> generator and conference bridge to the call.
> P never saw a single byte of media.
> 
No, P presumably saw a "record command" perhaps it was an RTSP server
(perhaps not, you didn't say). BUT if A's device sent some DTMF events in
response to A pressing the "R" key, then there will be a server somewhere
in the middle which gets the DTMF event and transforms it into a server
command.

I have no problem with the result of A's pressing the "R" key being that
A's device sends a SIP invite to a recording server, inviting the server
to listen in. In this case, it is entirely normal for the "R" key
resulting in a SIP INVITE being sent. (Although RTSP wouldn't be bad
either). But I certainly can't see how this is a reason to send DTMF
within a SIP message.

Now that we've allowed the INFO method as a way of transporting a
signalling payload along the SIP signalling path, I don't think that we
can stop putting an rtp payload in there.

Scott





From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec  6 12:50:09 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA00153
	for <sip-archive@odin.ietf.org>; Mon, 6 Dec 1999 12:50:09 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 2518B52B6; Mon,  6 Dec 1999 12:47:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 9282252D5; Mon,  6 Dec 1999 12:47:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 0DA3852B6
	for <sip@lists.research.bell-labs.com>; Mon,  6 Dec 1999 12:47:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec  6 12:46:20 EST 1999
Received: from beta.mcit.com ([199.249.19.244]) by dusty; Mon Dec  6 12:44:52 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-29 #38417)
 id <0FMB00M01YP11D@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Mon,  6 Dec 1999 17:46:13 +0000 (GMT)
Received: from ndcrelay2.mcit.com ([166.37.172.6])
 by firewall.mcit.com (PMDF V5.2-29 #38417)
 with ESMTP id <0FMB00KFGYP0X5@firewall.mcit.com>; Mon,
 06 Dec 1999 17:46:12 +0000 (GMT)
Received: from omzmta01.mcit.com (omzmta01.mcit.com [166.37.194.119])
 by ndcrelay2.mcit.com (8.8.7/) with ESMTP	id RAA11769; Mon,
 06 Dec 1999 17:41:16 +0000 (GMT)
Received: from dwillispc4 ([166.37.184.22])
 by omzmta01.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991206174607.LVFV10632@dwillispc4>; Mon,
 06 Dec 1999 17:46:07 +0000
Date: Mon, 06 Dec 1999 11:48:51 -0600
From: Dean Willis <dean.willis@wcom.com>
Subject: RE: User signaling -- was  DTMF signaling between media gateways -ouch!
In-reply-to: 
 <Pine.LNX.4.10.9912051246550.4803-100000@adsl-151-203-17-31.bellatlantic.net>
To: Scott Petrack <scott.petrack@metatel.com>,
        sip@lists.research.bell-labs.com
Message-id: <003501bf4012$27d7b420$e615563f@ericy.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2377.0
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Scott said:
. . .
> reason it is vital that some SIP servers or clients get the DTMF
> information synchronized with some other signals, then it would make sense
> to put an audio/tones or audio/events payload into a SIP message. But in
> fact this doesn't make sense very often. This is because if you are
> interested in actual control signals and not lower-level DTMF events,
> well, then you are not interesed in DTMF events.

Bingo. My position is that DTMF is in some cases a manifestation of a
control signal. We use it because it is the only user-invokable control
signal we know how to produce on a black phone (except maybe for speech
recognition).

> > Yeah, I suppose we could have the detected tones schlepped back from the
> > media server to the IVR over yet-another-potocol, but that doesn't seem
> > particularly efficient.

. . .
> >
> Yes, and the end goal is not to need gateways that receive DTMF and
> translate them into some functional command. Today, there is a need for
> DTMF detection in some place and then a translation into digital
> information. That place is in fact a media gateway.

Yes. I would suggest that a media gateway take a DS0 in one side, do a tone
detction, ship RTP audio and RTP tones out along its media path, and throw
SIP INFO messages on its signaling path.

Initially, I suggest just putting the DTMF representation into the INFO
message, as this requires no additional knowledge of the application in the
media gateway. This gives us a basic set of "function keys" that are going
to be present on every phone device -- kind of like F1-F12 on your PC
keyboard. Why use a DTMF representation? Because the phones send the data in
DTMF, and the gateway has to implement DTMF detection/decoding anyhow -- a
DTMF representation in INFO then becomes a very easy thing to build and is
rather generically useful.

Someday somebody may want to develop a gateway or phone that throws
customized INFO events, and probably a method for loading digit-event maps
into the gateway of phone so that the event thrown can correspond with the
application being used. One might even envision acivating custome soft-keys
on the keypad of an advanced phone. For basic telephony interaction, we
don't need that right now, and I'm not prepared to think about it yet.



>
>
> > If that isn't enough, let me propose another application.
> >
> >
> > User A completes all calls through proxy P.
> >
> > P provides additional services, along the lines of a "personal
> assistant".
> > One of these services is a "voice recorder" ala President Nixon.
> >
> > A uses an analog phone connected to a generic UA gateway.
> > A calls party B, leaving P in the proxy path.
> > A decides B is saying something interesting and wants B recorded.
> > A presses the "R" key.
> > P uses call control to add a voice recorder and recording
> announcement tone
> > generator and conference bridge to the call.
> > P never saw a single byte of media.
> >
> No, P presumably saw a "record command" perhaps it was an RTSP server
> (perhaps not, you didn't say). BUT if A's device sent some DTMF events in
> response to A pressing the "R" key, then there will be a server somewhere
> in the middle which gets the DTMF event and transforms it into a server
> command.
>

Yes, I think you have it here.

> I have no problem with the result of A's pressing the "R" key being that
> A's device sends a SIP invite to a recording server, inviting the server
> to listen in. In this case, it is entirely normal for the "R" key
> resulting in a SIP INVITE being sent. (Although RTSP wouldn't be bad
> either). But I certainly can't see how this is a reason to send DTMF
> within a SIP message.

I want to decouple control of the application from the endpoint and move it
to a server. In other words, A's device would not send an invite to the
recording server. A's device's proxy would. The question is how does A
signal the proxy so that the proxy can invoke the recorder.

I've proposed that in the absence of any specialized application logic, that
A's device can just throw DTMF-event INFO messages at the network, and a
network application (in a proxy) can control the application. This requires
no specialized applications logic in A's device because the interaction with
the proxy is entirely standard and generic.

> Now that we've allowed the INFO method as a way of transporting a
> signalling payload along the SIP signalling path, I don't think that we
> can stop putting an rtp payload in there.

Huh? The media stays in RTP . . .

--
Dean




From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec  6 17:14:08 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA03362
	for <sip-archive@odin.ietf.org>; Mon, 6 Dec 1999 17:14:08 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id A4B2852D5; Mon,  6 Dec 1999 17:11:50 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 1A3BF52DB; Mon,  6 Dec 1999 17:11:49 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id AE9EA52D5
	for <sip@lists.research.bell-labs.com>; Mon,  6 Dec 1999 17:11:18 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Mon Dec  6 17:09:39 EST 1999
Received: from rodney.cnchost.com ([207.155.252.4]) by dusty; Mon Dec  6 17:08:11 EST 1999
Received: from scott.metatel.office (metatel.ne.mediaone.net [24.128.100.134])
	by rodney.cnchost.com
	id RAA05512; Mon, 6 Dec 1999 17:09:34 -0500 (EST)
	[ConcentricHost SMTP Relay 1.8]
Date: Mon, 6 Dec 1999 16:44:29 -0500 (EST)
From: Scott Petrack <scott.petrack@metatel.com>
X-Sender: scott.petrack@adsl-151-203-17-31.bellatlantic.net
To: Dean Willis <dean.willis@wcom.com>
Cc: sip@lists.research.bell-labs.com
Subject: RE: User signaling -- was  DTMF signaling between media gateways
 -ouch!
In-Reply-To: <003501bf4012$27d7b420$e615563f@ericy.com>
Message-ID: <Pine.LNX.4.10.9912061518420.6899-100000@adsl-151-203-17-31.bellatlantic.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



On Mon, 6 Dec 1999, Dean Willis wrote:

> 
> Yes. I would suggest that a media gateway take a DS0 in one side, do a tone
> detction, ship RTP audio and RTP tones out along its media path, and throw
> SIP INFO messages on its signaling path.
> 

The only issue is how the media gateway sends the message to the
signalling server. There are already two solutions available:

	a) the media gateway sends the DTMF events encoded within RTP
to both the signaling server and the remote media endpoint. This could be
done either out two unicast streams or out to a multicast group. 
	b) the media gateway sends the DTMF events encoded in Megaco, as
if it were talking to an MGC that wants notification.

If the signalling server can take the information and do with it whatever
is appropriate. Those of us who like encoding DTMF within RTP point out
that DTMF is time-based information, often synchronized with other media
streams. 

A simple way to put it is to say that the INFO approach forces a
media gateway to know about SIP INFO messages, while the RTP approach
forces a signalling server to know about the RTP DTMF payload.

The problem I have with making the media gateway speak SIP is that there
are a lot of competing signaling protocols which could transport DTMF.
One customer will want it in a SIP INFO message, another in an H.245
message, a third in a Q.931 message, etc. Isn't it simplest to say that
in the Internet architecture, real-time DTMF is encoded in RTP.

Isn't it simpler just to say that DTMF events are always
encoded in a single way which doesn't lose information -- encoded in an
RTP payload format. 

Scott

> Initially, I suggest just putting the DTMF representation into the INFO
> message, as this requires no additional knowledge of the application in the
> media gateway. This gives us a basic set of "function keys" that are going
> to be present on every phone device -- kind of like F1-F12 on your PC
> keyboard. Why use a DTMF representation? Because the phones send the data in
> DTMF, and the gateway has to implement DTMF detection/decoding anyhow -- a
> DTMF representation in INFO then becomes a very easy thing to build and is
> rather generically useful.
> 

All this is even more "generic" if you just use the same DTMF
representation in every case.

> Someday somebody may want to develop a gateway or phone that throws
> customized INFO events, and probably a method for loading digit-event maps
> into the gateway of phone so that the event thrown can correspond with the
> application being used. One might even envision acivating custome soft-keys
> on the keypad of an advanced phone. For basic telephony interaction, we
> don't need that right now, and I'm not prepared to think about it yet.
> 
> 
> 
> >
> >
> > > If that isn't enough, let me propose another application.
> > >
> > >
> > > User A completes all calls through proxy P.
> > >
> > > P provides additional services, along the lines of a "personal
> > assistant".
> > > One of these services is a "voice recorder" ala President Nixon.
> > >
> > > A uses an analog phone connected to a generic UA gateway.
> > > A calls party B, leaving P in the proxy path.
> > > A decides B is saying something interesting and wants B recorded.
> > > A presses the "R" key.
> > > P uses call control to add a voice recorder and recording
> > announcement tone
> > > generator and conference bridge to the call.
> > > P never saw a single byte of media.
> > >
> > No, P presumably saw a "record command" perhaps it was an RTSP server
> > (perhaps not, you didn't say). BUT if A's device sent some DTMF events in
> > response to A pressing the "R" key, then there will be a server somewhere
> > in the middle which gets the DTMF event and transforms it into a server
> > command.
> >
> 
> Yes, I think you have it here.
> 
> > I have no problem with the result of A's pressing the "R" key being that
> > A's device sends a SIP invite to a recording server, inviting the server
> > to listen in. In this case, it is entirely normal for the "R" key
> > resulting in a SIP INVITE being sent. (Although RTSP wouldn't be bad
> > either). But I certainly can't see how this is a reason to send DTMF
> > within a SIP message.
> 
> I want to decouple control of the application from the endpoint and move it
> to a server. In other words, A's device would not send an invite to the
> recording server. A's device's proxy would. The question is how does A
> signal the proxy so that the proxy can invoke the recorder.
> 
> I've proposed that in the absence of any specialized application logic, that
> A's device can just throw DTMF-event INFO messages at the network, and a
> network application (in a proxy) can control the application. This requires
> no specialized applications logic in A's device because the interaction with
> the proxy is entirely standard and generic.
> 
> > Now that we've allowed the INFO method as a way of transporting a
> > signalling payload along the SIP signalling path, I don't think that we
> > can stop putting an rtp payload in there.
> 
> Huh? The media stays in RTP . . .
> 
> --
> Dean
> 
> 




From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 07:15:55 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id HAA00182
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 07:15:54 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id B0EC252AB; Tue,  7 Dec 1999 07:13:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 2767852C4; Tue,  7 Dec 1999 07:13:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 62C9852AB
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 07:13:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec  7 07:12:05 EST 1999
Received: from rakshaka.wipsys.soft.net ([164.164.68.8]) by dusty; Tue Dec  7 07:10:21 EST 1999
Received: (from fwtk@localhost)
	by rakshaka.wipsys.soft.net (8.9.1b+Sun/8.9.1) id RAA19503
	for <sip@lists.research.bell-labs.com>; Tue, 7 Dec 1999 17:40:01 -0500 (GMT)
X-Authentication-Warning: rakshaka.wipsys.soft.net: fwtk set sender to <anirbr@wipsys.soft.net> using -f
Received: from unknown(192.168.172.18) by rakshaka.wipsys.soft.net via smap (V2.0)
	id xma019491; Tue, 7 Dec 99 17:39:48 -0500
Received: from wipsys.soft.net ([192.168.178.175])
          by ecmail.wipsys.soft.net (Netscape Messaging Server 3.6)
           with ESMTP id AAA4148 for <sip@lists.research.bell-labs.com>;
          Tue, 7 Dec 1999 17:33:52 +0530
Message-ID: <384CF7DF.BD3E1C27@wipsys.soft.net>
Date: Tue, 07 Dec 1999 17:34:47 +0530
From: "ANIRBAN ROY" <anirbr@wipsys.soft.net>
X-Mailer: Mozilla 4.5 [en] (WinNT; I)
X-Accept-Language: en
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: More than one message in one SIP message
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

hi,

Can we have more then one message in one SIP message. e.g can there be
TRYING and RINGING in one sip message

SIP/2.0 100 Trying
Via: SIP/2.0/UDP kton.bell-tel.com
From: A. Bell <sip:a.g.bell@bell-tel.com>
To: T. Watson <sip:watson@bell-tel.com> ;tag=37462311
Call-ID: 3298420296@kton.bell-tel.com
CSeq: 1 INVITE
Content-Length: 0

SIP/2.0 180 Ringing
Via: SIP/2.0/UDP kton.bell-tel.com
From: A. Bell <sip:a.g.bell@bell-tel.com>
To: T. Watson <sip:watson@bell-tel.com> ;tag=37462311
Call-ID: 3298420296@kton.bell-tel.com
CSeq: 1 INVITE
Content-Length: 0


Just like MGCP with some difference.

regards
Anirban





From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 08:07:47 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id IAA27434
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 08:07:47 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id ADB5852D5; Tue,  7 Dec 1999 08:05:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 2CF2252D6; Tue,  7 Dec 1999 08:05:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id E2A6B52D5
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 08:05:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec  7 08:05:00 EST 1999
Received: from marvin.axion.bt.co.uk ([132.146.16.82]) by dusty; Tue Dec  7 08:03:32 EST 1999
Received: from cbtlipnt01.btlabs.bt.co.uk by marvin (local) with ESMTP;
          Tue, 7 Dec 1999 13:03:58 +0000
Received: by cbtlipnt01.btlabs.bt.co.uk 
          with Internet Mail Service (5.5.2448.0) id <YBFVS0Q6>;
          Tue, 7 Dec 1999 13:04:13 -0000
Message-ID: <5104D4DBC598D211B5FE0000F8FE7EB20476F814@mbtlipnt02.btlabs.bt.co.uk>
From: phil.m.clarke@bt.com
To: anirbr@wipsys.soft.net, sip@lists.research.bell-labs.com
Subject: RE: More than one message in one SIP message
Date: Tue, 7 Dec 1999 13:04:12 -0000 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

> Can we have more then one message in one SIP message. e.g can there be
TRYING and RINGING in one sip message

Hi,

I assume you mean in UDP packets? the bit of RFC 2543 dealing with this (1.5
protocol properties) doesnt specifically allow or disallow it, but the old
draft SIP specs (IIRC) said UDP SIP software should cope with one or more
SIP messages in one packet.

My SIP code (proxy server, plus several clients) is written to handle this,
if that helps.  :o)

regards ... Phil




From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 08:18:31 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id IAA03369
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 08:18:31 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 8AB4952D6; Tue,  7 Dec 1999 08:16:14 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id F23CB52DD; Tue,  7 Dec 1999 08:16:13 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 3A5A852D6
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 08:15:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec  7 08:14:23 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Tue Dec  7 08:12:54 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id TAA14149;
	Tue, 7 Dec 1999 19:22:19 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA SMTP v4.6 (462.2 9-3-1997))  id 65256840.00486199 ; Tue, 7 Dec 1999 18:40:35 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: phil.m.clarke@bt.com
Cc: anirbr@wipsys.soft.net, sip@lists.research.bell-labs.com
Message-ID: <65256840.004820C0.00@sampark.hss.hns.com>
Date: Tue, 7 Dec 1999 18:40:30 +0530
Subject: RE: More than one message in one SIP message
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Hi, RFC 2543 states [page 25]

"   Unlike HTTP, SIP MAY use UDP. When sent over TCP or UDP, multiple SIP
   transactions can be carried in a single TCP connection or UDP
   datagram. "

So  I think the RFC clearly states that multiple messages in one packet is
allowed.

Regds
Arjun

--
Arjun Roychowdhury @ Hughes Software Systems





phil.m.clarke@bt.com on 12/07/99 06:34:12 PM

To:   anirbr@wipsys.soft.net, sip@lists.research.bell-labs.com
cc:
Subject:  RE: More than one message in one SIP message




> Can we have more then one message in one SIP message. e.g can there be
TRYING and RINGING in one sip message
Hi,
I assume you mean in UDP packets? the bit of RFC 2543 dealing with this
(1.5
protocol properties) doesnt specifically allow or disallow it, but the old
draft SIP specs (IIRC) said UDP SIP software should cope with one or more
SIP messages in one packet.
My SIP code (proxy server, plus several clients) is written to handle this,
if that helps.  :o)
regards ... Phil








From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 09:15:59 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA03774
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 09:15:58 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id DA56D52C4; Tue,  7 Dec 1999 09:12:48 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3ADCF52DE; Tue,  7 Dec 1999 09:12:48 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9475D52B6
	for <sip@lists.research.bell-labs.com>; Mon,  6 Dec 1999 14:45:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec  6 14:43:25 EST 1999
Received: from ncc1701.iml-cti.com ([207.183.39.67]) by dusty; Mon Dec  6 14:41:57 EST 1999
Received: from pierrepo ([207.139.62.162])
	by ncc1701.iml-cti.com (8.9.3/8.9.3) with SMTP id OAA17084
	for <sip@lists.research.bell-labs.com>; Mon, 6 Dec 1999 14:42:53 -0500
Reply-To: <pierre.poirier@iml-cti.com>
From: "Pierre Poirier" <pierre.poirier@iml-cti.com>
To: <sip@lists.research.bell-labs.com>
Subject: How to distinguish call-leg when the caller and the receiver are in the same gateway
Date: Mon, 6 Dec 1999 14:43:56 -0500
Message-ID: <000401bf4022$3b9799c0$a23e8bcf@pierrepo.bishop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.3110.3
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Here is the situation.
Gateway-A is force by an EVENT X to issue an INVITE to proxy:

	INVITE sip:ResourceA@proxy:5060 SIP/2.0
	v: SIP/2.0/TCP www.xxx.yyy.zzz:5062
	f: sip:GateA@www.xxx.yyy.zzz
	t: sip:ResourceA
	i: 7072@www.xxx.yyy.zzz
	CSeq: 1 INVITE
	l: 0

The Proxy find a destination for ResourceA and relay this INVITE to this
destination to generate an EVENT Y.

	INVITE sip:ResourceA@Dest:5062 SIP/2.0
	v: SIP/2.0/TCP www.xxx.yyy.aaa:5060
	v: SIP/2.0/TCP www.xxx.yyy.zzz:5062
	f: sip:GateA@www.xxx.yyy.zzz
	t: sip:ResourceA
	i: 7072@www.xxx.yyy.zzz
	CSeq: 1 INVITE
	l: 0

If the destination is in the same gateway,
how can he distinguish the call-leg so that received msg. will be assign to
the proper event?

Thank.
Pierre Poirier.




From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 09:19:43 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA05605
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 09:19:42 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id E382852DE; Tue,  7 Dec 1999 09:17:27 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id DB8C152DB; Tue,  7 Dec 1999 09:17:25 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id BC47352DE
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 09:17:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec  7 09:16:59 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec  7 09:15:32 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhsom01879;
	Tue, 7 Dec 1999 14:14:34 GMT
Received: from dynamicsoft.com ([63.86.21.104])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id JAA05137;
	Tue, 7 Dec 1999 09:16:53 -0500 (EST)
Message-ID: <384D17F8.FCA9C93C@dynamicsoft.com>
Date: Tue, 07 Dec 1999 09:21:44 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: phil.m.clarke@bt.com, anirbr@wipsys.soft.net,
        sip@lists.research.bell-labs.com
Subject: Re: More than one message in one SIP message
References: <65256840.004820C0.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Correct. Multiple messages are allowed. Note that they do NOT need to be
separated by CRLF. The first message (actually, the first N-1 messages
when there are N in a packet) MUST have a Content-Length. The next
message may start as the first byte after the last byte of the previous
payload. However, there MAY be CRLFs between messages, and you should
ignore them.

-Jonathan R.

archow@hss.hns.com wrote:
> 
> Hi, RFC 2543 states [page 25]
> 
> "   Unlike HTTP, SIP MAY use UDP. When sent over TCP or UDP, multiple SIP
>    transactions can be carried in a single TCP connection or UDP
>    datagram. "
> 
> So  I think the RFC clearly states that multiple messages in one packet is
> allowed.
> 
> Regds
> Arjun
> 
> --
> Arjun Roychowdhury @ Hughes Software Systems
> 
> phil.m.clarke@bt.com on 12/07/99 06:34:12 PM
> 
> To:   anirbr@wipsys.soft.net, sip@lists.research.bell-labs.com
> cc:
> Subject:  RE: More than one message in one SIP message
> 
> > Can we have more then one message in one SIP message. e.g can there be
> TRYING and RINGING in one sip message
> Hi,
> I assume you mean in UDP packets? the bit of RFC 2543 dealing with this
> (1.5
> protocol properties) doesnt specifically allow or disallow it, but the old
> draft SIP specs (IIRC) said UDP SIP software should cope with one or more
> SIP messages in one packet.
> My SIP code (proxy server, plus several clients) is written to handle this,
> if that helps.  :o)
> regards ... Phil

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 11:09:59 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA29228
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 11:09:58 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id ED4EA52DB; Tue,  7 Dec 1999 11:07:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 7398F52DD; Tue,  7 Dec 1999 11:07:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9678A52DB
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 11:07:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Tue Dec  7 11:06:24 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Tue Dec  7 11:04:55 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id WAA21302
	for <sip@lists.research.bell-labs.com>; Tue, 7 Dec 1999 22:16:34 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA SMTP v4.6 (462.2 9-3-1997))  id 65256840.00585194 ; Tue, 7 Dec 1999 21:34:40 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: sip@lists.research.bell-labs.com
Message-ID: <65256840.005518B0.00@sampark.hss.hns.com>
Date: Tue, 7 Dec 1999 21:34:37 +0530
Subject: Yet another grammar related question
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Hi ,
Please refer to "SIP torture tests(Legal but not likely implemented)" of
the 2nd bake off.

Would someone please clarify the following point noted there:

Unknown parameters of known headers -

What exactly does the above mean ? Does it mean that this test involves
adding any arbitrary parameter to any Header ?
For example, if Allow is defined as
Allow: 1#Method
then if a message has
Allow: OPTIONS CANCEL ;tux=hedwig

then is <;tux=hedwig> supposed to be the unknown param of known headers and
 is hence legal ? I hope this is not the intention ?
(In that case any garbage after any header is legal..)

or is it that
Allow: OPTIONS CANCEL GOOGLE
then GOOGLE, although an unknown method, is a legal unknown param of Allow
? That is , a format which the grammar supports
but the value of which is not (maybe) understood/logical

The reason I ask this is that in test9.txt  (in the 2ndbakeoff) I saw:

Authorization: Super-PGP ajsohdaosdh0asyhdaind08yasdknasd09asidhas0d8

but according to the specs.

Authorization          =        "Authorization" ":" credentials
credentials             =        basic-credentials | (auth-scheme
#(auth-params))
basic-credentials =       "Basic" SP basic-cookie
auth-param             =        token "=" string
auth-params      =      token "=" string

So above example maps to auth-scheme #(auth-params)

However, the ajsoh.... after it is not token=string, but is token.

Now is this really valid  ? (ie test 9.txt) ? And if its valid- does the
above qualify as "Unknown parameters of known headers " ???


Also, date in RFC states that it should be in GMT format but EDT has been
used too.


Now I totally agree that we should be lenient on input, but I strongly
stand by the fact that lets make the grammar as lenient as possible
without specfying a "fixed" grammar and deviating way off from it.

Finally, are there any changes being made to the grammar n the upcoming SIP
 RFC to try and incorporate as many major tracked
deviations  ? (Id be glad to point out where all there has been total
disrespect for the grammar :-)


Regds
Arjun

--
Arjun Roychowdhury @ Hughes Software Systems






From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 15:00:09 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA22530
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 15:00:09 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 697AC52AB; Tue,  7 Dec 1999 14:57:25 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 857F452DC; Tue,  7 Dec 1999 14:57:24 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 4415A52AB
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 14:57:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Tue Dec  7 14:57:03 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec  7 14:55:35 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhspj23546;
	Tue, 7 Dec 1999 19:54:38 GMT
Received: from dynamicsoft.com ([63.86.21.104])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id OAA08442;
	Tue, 7 Dec 1999 14:56:59 -0500 (EST)
Message-ID: <384D67AE.A73DE6E4@dynamicsoft.com>
Date: Tue, 07 Dec 1999 15:01:50 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: Yet another grammar related question
References: <65256840.005518B0.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



archow@hss.hns.com wrote:
> 
> Hi ,
> Please refer to "SIP torture tests(Legal but not likely implemented)" of
> the 2nd bake off.
> 
> Would someone please clarify the following point noted there:
> 
> Unknown parameters of known headers -
> 
> What exactly does the above mean ? Does it mean that this test involves
> adding any arbitrary parameter to any Header ?

No, of course not. Only those headers where extensions are allowed, such
as Contact.



> The reason I ask this is that in test9.txt  (in the 2ndbakeoff) I saw:
> 
> Authorization: Super-PGP ajsohdaosdh0asyhdaind08yasdknasd09asidhas0d8
> 
> but according to the specs.
> 
> Authorization          =        "Authorization" ":" credentials
> credentials             =        basic-credentials | (auth-scheme
> #(auth-params))
> basic-credentials =       "Basic" SP basic-cookie
> auth-param             =        token "=" string
> auth-params      =      token "=" string
> 
> So above example maps to auth-scheme #(auth-params)
> 
> However, the ajsoh.... after it is not token=string, but is token.

You're right on that one. Good call. A better example would have been:

Authorization: Super-PGP response="aosjkndapojsbnda;ojsd",
algorithm=SHA-1


> Also, date in RFC states that it should be in GMT format but EDT has been
> used too.

Thats a mistake. Its GMT only. Where did you see EDT?


> Finally, are there any changes being made to the grammar n the upcoming SIP
>  RFC to try and incorporate as many major tracked
> deviations  ? (Id be glad to point out where all there has been total
> disrespect for the grammar :-)

The aim is to not do this if possible. I think the only changes (they're
fixes actually) so far is that extension-param was left off of one of
the headers, Via I think. And also that the PGP grammar isn't consistent
with the general grammar for the Authorization related headers.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 15:14:06 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA28985
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 15:14:04 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id EC26352DD; Tue,  7 Dec 1999 15:11:37 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 9848052E0; Tue,  7 Dec 1999 15:11:35 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 0059652DC
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 15:11:07 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Tue Dec  7 15:10:49 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec  7 15:09:20 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhspk23292;
	Tue, 7 Dec 1999 20:08:22 GMT
Received: from dynamicsoft.com ([63.86.21.104])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id PAA08462;
	Tue, 7 Dec 1999 15:10:43 -0500 (EST)
Message-ID: <384D6AE6.B782A9CC@dynamicsoft.com>
Date: Tue, 07 Dec 1999 15:15:34 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: pierre.poirier@iml-cti.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: How to distinguish call-leg when the caller and the receiver are in 
 the same gateway
References: <000401bf4022$3b9799c0$a23e8bcf@pierrepo.bishop>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

This issue came up at a prior bakeoff, albeit in a slightly different
flavor. Here was the clarification that was created for this:

> Identification of Call Leg
> 
> The spec is not clear on identification of a call leg. Section 1.3 says it's the combination of To, From, and Call-ID.
> However, requests from the callee to the caller have the To and From reversed, so this definition is not quite accurate.
> Additionally, the tag field should be included in the definition of call leg. The spec should rather say that a call leg is defined
> as the combination of local-address, remote-address, and call-id, where these addresses include tags. Also note that only
> the username and host part of the To and From headers are used for this purpose, so that: 
> 
> "User 1" <sip:user1@columbia.edu>
> 
> and 
> 
> "Joe" <sip:user1@columbia.edu>
> 
> would be the same when determining the call leg. Text was added to Section 6.21 to emphasize that the From and To
> headers designate the originator of the request, not that of the call leg. 


So, to answer your question, when the request is sent from a gateway
with From: A ant To: B, the call leg for the originator has:

local-address=A
remote-address=B

when the request arrives back at the gateway, the From field identifies
the remote-address, and the To field identifies the local address. Thus,
the gateway would compute:

local-address=B
remote-address=A

and thus view this as a different call leg.

-Jonathan R.

Pierre Poirier wrote:
> 
> Here is the situation.
> Gateway-A is force by an EVENT X to issue an INVITE to proxy:
> 
>         INVITE sip:ResourceA@proxy:5060 SIP/2.0
>         v: SIP/2.0/TCP www.xxx.yyy.zzz:5062
>         f: sip:GateA@www.xxx.yyy.zzz
>         t: sip:ResourceA
>         i: 7072@www.xxx.yyy.zzz
>         CSeq: 1 INVITE
>         l: 0
> 
> The Proxy find a destination for ResourceA and relay this INVITE to this
> destination to generate an EVENT Y.
> 
>         INVITE sip:ResourceA@Dest:5062 SIP/2.0
>         v: SIP/2.0/TCP www.xxx.yyy.aaa:5060
>         v: SIP/2.0/TCP www.xxx.yyy.zzz:5062
>         f: sip:GateA@www.xxx.yyy.zzz
>         t: sip:ResourceA
>         i: 7072@www.xxx.yyy.zzz
>         CSeq: 1 INVITE
>         l: 0
> 
> If the destination is in the same gateway,
> how can he distinguish the call-leg so that received msg. will be assign to
> the proper event?
> 
> Thank.
> Pierre Poirier.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 17:07:56 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA24308
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 17:07:55 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D322552B6; Tue,  7 Dec 1999 17:05:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3522F52DC; Tue,  7 Dec 1999 17:05:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A8C3C52B6
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 17:05:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec  7 17:03:47 EST 1999
Received: from alpha.mcit.com ([199.249.19.243]) by dusty; Tue Dec  7 17:02:20 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #38416)
 id <0FME00D012VVUZ@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Tue,  7 Dec 1999 21:11:56 +0000 (GMT)
Received: from ndcrelay2.mcit.com ([166.37.172.6])
 by firewall.mcit.com (PMDF V5.2-32 #38416)
 with ESMTP id <0FME00D622VTBO@firewall.mcit.com>; Tue,
 07 Dec 1999 21:11:54 +0000 (GMT)
Received: from omzmta04.mcit.com (omzmta04.mcit.com [166.37.194.122])
 by ndcrelay2.mcit.com (8.8.7/) with ESMTP	id VAA23949; Tue,
 07 Dec 1999 21:07:01 +0000 (GMT)
Received: from C25776A ([166.35.225.141])
 by omzmta04.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991207211152.KIIM91@C25776A>; Tue, 07 Dec 1999 21:11:52 +0000
Date: Tue, 07 Dec 1999 15:11:49 -0600
From: Henry Sinnreich <henry.sinnreich@wcom.com>
Subject: RE: User signaling -- was  DTMF signaling between media gateways -ouch!
In-reply-to: 
 <Pine.LNX.4.10.9912061518420.6899-100000@adsl-151-203-17-31.bellatlantic.net>
To: Scott Petrack <scott.petrack@metatel.com>,
        Dean Willis <dean.willis@wcom.com>
Cc: sip@lists.research.bell-labs.com
Message-id: <NBBBIIJFOKPMFOOILMBKAEEMEPAA.henry.sinnreich@wcom.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Scott wrote:
> One customer will want it in a SIP INFO message, another in an H.245
> message, a third in a Q.931 message, etc. Isn't it simplest to say that
> in the Internet architecture, real-time DTMF is encoded in RTP.

We have no control over H.xxx in the IETF, so need to look here what works
best in the Internet conferencing architecture.
SIP INFO seems to the job. What specifically does it not do? (If we keep the
required SIP servers in the signaling path)

Henry

> -----Original Message-----
> From: owner-sip@lists.research.bell-labs.com
> [mailto:owner-sip@lists.research.bell-labs.com]On Behalf Of Scott
> Petrack
> Sent: Monday, December 06, 1999 3:44 PM
> To: Dean Willis
> Cc: sip@lists.research.bell-labs.com
> Subject: RE: User signaling -- was DTMF signaling between media gateways
> -ouch!
>
>
>
>
> On Mon, 6 Dec 1999, Dean Willis wrote:
>
> >
> > Yes. I would suggest that a media gateway take a DS0 in one
> side, do a tone
> > detction, ship RTP audio and RTP tones out along its media
> path, and throw
> > SIP INFO messages on its signaling path.
> >
>
> The only issue is how the media gateway sends the message to the
> signalling server. There are already two solutions available:
>
> 	a) the media gateway sends the DTMF events encoded within RTP
> to both the signaling server and the remote media endpoint. This could be
> done either out two unicast streams or out to a multicast group.
> 	b) the media gateway sends the DTMF events encoded in Megaco, as
> if it were talking to an MGC that wants notification.
>
> If the signalling server can take the information and do with it whatever
> is appropriate. Those of us who like encoding DTMF within RTP point out
> that DTMF is time-based information, often synchronized with other media
> streams.
>
> A simple way to put it is to say that the INFO approach forces a
> media gateway to know about SIP INFO messages, while the RTP approach
> forces a signalling server to know about the RTP DTMF payload.
>
> The problem I have with making the media gateway speak SIP is that there
> are a lot of competing signaling protocols which could transport DTMF.
> One customer will want it in a SIP INFO message, another in an H.245
> message, a third in a Q.931 message, etc. Isn't it simplest to say that
> in the Internet architecture, real-time DTMF is encoded in RTP.
>
> Isn't it simpler just to say that DTMF events are always
> encoded in a single way which doesn't lose information -- encoded in an
> RTP payload format.
>
> Scott
>
> > Initially, I suggest just putting the DTMF representation into the INFO
> > message, as this requires no additional knowledge of the
> application in the
> > media gateway. This gives us a basic set of "function keys"
> that are going
> > to be present on every phone device -- kind of like F1-F12 on your PC
> > keyboard. Why use a DTMF representation? Because the phones
> send the data in
> > DTMF, and the gateway has to implement DTMF detection/decoding
> anyhow -- a
> > DTMF representation in INFO then becomes a very easy thing to
> build and is
> > rather generically useful.
> >
>
> All this is even more "generic" if you just use the same DTMF
> representation in every case.
>
> > Someday somebody may want to develop a gateway or phone that throws
> > customized INFO events, and probably a method for loading
> digit-event maps
> > into the gateway of phone so that the event thrown can
> correspond with the
> > application being used. One might even envision acivating
> custome soft-keys
> > on the keypad of an advanced phone. For basic telephony interaction, we
> > don't need that right now, and I'm not prepared to think about it yet.
> >
> >
> >
> > >
> > >
> > > > If that isn't enough, let me propose another application.
> > > >
> > > >
> > > > User A completes all calls through proxy P.
> > > >
> > > > P provides additional services, along the lines of a "personal
> > > assistant".
> > > > One of these services is a "voice recorder" ala President Nixon.
> > > >
> > > > A uses an analog phone connected to a generic UA gateway.
> > > > A calls party B, leaving P in the proxy path.
> > > > A decides B is saying something interesting and wants B recorded.
> > > > A presses the "R" key.
> > > > P uses call control to add a voice recorder and recording
> > > announcement tone
> > > > generator and conference bridge to the call.
> > > > P never saw a single byte of media.
> > > >
> > > No, P presumably saw a "record command" perhaps it was an RTSP server
> > > (perhaps not, you didn't say). BUT if A's device sent some
> DTMF events in
> > > response to A pressing the "R" key, then there will be a
> server somewhere
> > > in the middle which gets the DTMF event and transforms it
> into a server
> > > command.
> > >
> >
> > Yes, I think you have it here.
> >
> > > I have no problem with the result of A's pressing the "R" key
> being that
> > > A's device sends a SIP invite to a recording server, inviting
> the server
> > > to listen in. In this case, it is entirely normal for the "R" key
> > > resulting in a SIP INVITE being sent. (Although RTSP wouldn't be bad
> > > either). But I certainly can't see how this is a reason to send DTMF
> > > within a SIP message.
> >
> > I want to decouple control of the application from the endpoint
> and move it
> > to a server. In other words, A's device would not send an invite to the
> > recording server. A's device's proxy would. The question is how does A
> > signal the proxy so that the proxy can invoke the recorder.
> >
> > I've proposed that in the absence of any specialized
> application logic, that
> > A's device can just throw DTMF-event INFO messages at the network, and a
> > network application (in a proxy) can control the application.
> This requires
> > no specialized applications logic in A's device because the
> interaction with
> > the proxy is entirely standard and generic.
> >
> > > Now that we've allowed the INFO method as a way of transporting a
> > > signalling payload along the SIP signalling path, I don't
> think that we
> > > can stop putting an rtp payload in there.
> >
> > Huh? The media stays in RTP . . .
> >
> > --
> > Dean
> >
> >
>
>




From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 17:27:47 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA03512
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 17:27:47 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id CB72652DC; Tue,  7 Dec 1999 17:25:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4FD4752E0; Tue,  7 Dec 1999 17:25:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id DC0C352DC
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 17:25:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec  7 17:25:01 EST 1999
Received: from bounty.cisco.com ([161.44.2.72]) by dusty; Tue Dec  7 17:23:34 EST 1999
Received: from cisco.com (bounty.cisco.com [161.44.2.72])
	by bounty.cisco.com (8.8.8/2.5.1/Cisco List Logging/8.8.8) with ESMTP id RAA06069;
	Tue, 7 Dec 1999 17:24:55 -0500 (EST)
Message-ID: <384D8937.443A1A6A@cisco.com>
Date: Tue, 07 Dec 1999 17:24:55 -0500
From: Shail Bhatnagar <shbhatna@cisco.com>
Organization: CISCO
X-Mailer: Mozilla 4.51C-CISCOENG [en] (X11; U; SunOS 5.6 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: More questions about proxy behavior
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Some questions about a transaction stateful forking proxy.
Here are some scenarios :

1) It forks and sends an INVITE to 2 branches. Receives 2 300
responeses. Should it try all of the Contacts.

2) It forks and sends an INVITE to 2 branches. Gets a 200 OK on 
branch 1, sends CANCEL on branch 2 and then gets a 200 OK for original
INVITE on branch 2. ( CANCEL and 200 probably passed each other on
the wire as discussed in the bug list of RFC2543) Should it forward this
200 upstream ?

3) How long should a stateful forking proxy maintain state on 
branches which responded with a response that was dropped due to being
inferior to some other branch's response ?


-- 
Best regards,
Shail



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 18:50:11 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id SAA12200
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 18:50:10 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id A1E3B52AB; Tue,  7 Dec 1999 18:47:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 1AA5C52B6; Tue,  7 Dec 1999 18:47:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 3B66852AB
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 18:47:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec  7 18:46:55 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec  7 18:45:27 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhspy24257;
	Tue, 7 Dec 1999 23:44:30 GMT
Received: from dynamicsoft.com ([63.86.21.104])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id SAA08940;
	Tue, 7 Dec 1999 18:46:50 -0500 (EST)
Message-ID: <384D9D8B.F4FF219C@dynamicsoft.com>
Date: Tue, 07 Dec 1999 18:51:39 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Shail Bhatnagar <shbhatna@cisco.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: More questions about proxy behavior
References: <384D8937.443A1A6A@cisco.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Shail Bhatnagar wrote:
> 
> Some questions about a transaction stateful forking proxy.
> Here are some scenarios :
> 
> 1) It forks and sends an INVITE to 2 branches. Receives 2 300
> responeses. Should it try all of the Contacts.

Its implementation dependent. The caller preferences spec will allow a
user to ask for recursion or not, but its more of a suggestion than a
mandatory specification of behavior. Certain services that a proxy
provides will require recursion, and others won't.

> 
> 2) It forks and sends an INVITE to 2 branches. Gets a 200 OK on
> branch 1, sends CANCEL on branch 2 and then gets a 200 OK for original
> INVITE on branch 2. ( CANCEL and 200 probably passed each other on
> the wire as discussed in the bug list of RFC2543) Should it forward this
> 200 upstream ?

Absolutely.

> 
> 3) How long should a stateful forking proxy maintain state on
> branches which responded with a response that was dropped due to being
> inferior to some other branch's response ?

Well, you should still ACK those branches, not actually just "drop"
them. How long to maintain state for those branches is the same as how
long you maintain state in the case of no forking. You should keep state
for around 30 seconds after the final response. This should cover the
time for all final responses which may have been sent, so that you can
ACK them.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec  7 23:49:53 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id XAA12345
	for <sip-archive@odin.ietf.org>; Tue, 7 Dec 1999 23:49:53 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id A969F52AB; Tue,  7 Dec 1999 23:47:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 1D18C52DC; Tue,  7 Dec 1999 23:47:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9CCC552AB
	for <sip@lists.research.bell-labs.com>; Tue,  7 Dec 1999 23:47:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec  7 23:46:53 EST 1999
Received: from PMESMTP02.wcom.com ([199.249.20.2]) by dusty; Tue Dec  7 23:45:25 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #41713)
 id <0FME00D01NY3PH@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Wed,  8 Dec 1999 04:46:51 +0000 (GMT)
Received: from ndcrelay2.mcit.com ([166.37.172.6])
 by firewall.mcit.com (PMDF V5.2-32 #41713)
 with ESMTP id <0FME0054FNY26P@firewall.mcit.com> for
 sip@lists.research.bell-labs.com; Wed, 08 Dec 1999 04:46:51 +0000 (GMT)
Received: from omta3.mcit.com (omta3.mcit.com [166.37.204.5])
 by ndcrelay2.mcit.com (8.8.7/) with ESMTP	id EAA15004 for
 <sip@lists.research.bell-labs.com>; Wed, 08 Dec 1999 04:41:58 +0000 (GMT)
Received: from dwillispc4 ([166.44.162.174])
 by omta3.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991208044656.GCMS13986@dwillispc4> for
 <sip@lists.research.bell-labs.com>; Wed, 08 Dec 1999 04:46:56 +0000
Date: Tue, 07 Dec 1999 22:49:33 -0600
From: Dean Willis <dean.willis@wcom.com>
Subject: Minutes of Interim Meeting, Nov 7 (Final)
To: IETF SIP <sip@lists.research.bell-labs.com>
Message-id: <000801bf4137$9f5640e0$0200a8c0@dwillispc4>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2377.0
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


The SIP Working Group held an interim meeting on Nov 7, 1999 in the Empire
Room of the Omni Shoreham Hotel in Washington DC, USA.

The primary purpose of the meeting was to inform the SIP working group on
the PacketCable Distributed Call Services (DCS) work. DCS is based on SIP,
with some extensions and changes to support requirements identified by the
developers. Many participants feel that the requirements identified by DCS
may need to be addressed in the SIP standard in order to increase its
utility and maintain interoperability.

The meeting format included a presentation period followed by a discussion
period. Attendees were asked to restrict questions during the presentation
period to requests for clarification as opposed to exploration of
alternatives.

Tom Taylor provided note-taking support, and his detailed notes are posted
on the unofficial SIP Working Group home at:
http://www.softarmor.com/sipwg/meets/interim-nov-1999/
along with PDF copies of all presentations. The DCS submissions to the IETF
are available from the IETF internet drafts collection at:
http://www.ietf.org/ID.html, search key "dcsgroup". They will be archived at
a
later date on the unofficial WG home.

The presentations included detailed discussion of the assumptions and
service requirements underlying the DCS architecture and reviewed the DCS
utilization of and proposed changes and extensions to SIP.

Topics included:
  DCS and DQoS Architecture, presented by K. K. Ramakrishnan
  DCS Basic Call Flow, presented by Bill Guckel
  DCS Resource Management, presented by Bill Marshall
  DCS Authorization and QoS Establishment flow, presented by K. K.
Ramakrishnan
  DCS Proxy-Proxy Signaling, as presented by Mike Manette
  DCS Privacy, presented by Flemming Andreassen
  DCS State, presented by Poornima Lalwaney

Several hours of moderated discussion followed the presentations. Key points
follow.

Jonathan Rosenberg opened the discussion by asking whether the requirements
noted by DCS should be applied to SIP work in the IETF. There seemed to be
general consensus that the majority of requirements were generally
applicable, but that some might require further review.

Henning Schulzrinne noted that:
  -- one useful feature of SIP is that one can make progress on agreed
points while questioning others -- this is not all-or-nothing.
  -- a risk of text encoding is that everyone wants to express things their
own way.  We have to be concerned with integrity of the style.
  -- it would be nice if other applications outside cable architecture could
also use the capabilities added here
  -- we must be concerned for interoperability with other SIP applications,
running of multiple SIP-based applications on the same device, and avoid
being too special-purpose.

K.K. Ramakrishnan expressed general agreement with Henning's points.
The ability of SIP to support features in an incremental way is
a significant attraction for the DCS folks.
It is the intent of the developers of the DCS work that the work and
extensions be applicable in environments beyond the cable environment.

Scott Petrack discussed the similarity of the DCS approach and legacy PSTN,
noting that we need to assure this emulation doesn't create large amounts of
work to break away from that model later.

Dave Oran suggested attempting to emulate the PSTN user model and meet user
expectations, rather than recreating the PSTN itself. It has all along been
the
intent of the DCS group to primarily focus on the user expectations of
interactive voice communication.

Jonathan Rosenberg noted that the user expectation model is a valuable basis
for developing SIP. He expressed hopes to generalize the application of some
of the various DCS concepts e.g., distributed state and to broaden the
applicability of extensions so they can be reused.

Lawrence Conroy suggested that we might be able to simplify the DCS operator
services and break-in approach, asking whether issue is just whether an MTA
is engaged in call. Bill Marshall proposed a counter-example: someone with
heart attack, necessitating an operator to actually need to know if voice is
active.  Jonathan Rosenberg responded that this could be problematic if
other media are flowing. This leaves a question: Can we rephrase the
requirement to make it more generally applicable?

Dean Willis noted security issues with operator services. Since the MTA has
to cooperate to allow eavesdropping, how does it tell an operator break-in
from a wiretap?
Bill Marshall responded that it is not a requirement or an assumption that
the MTA has to cooperate to allow eavesdropping/wiretap. In fact, it is an
explicit assumption that the MTA cannot be expected to cooperate in this
situation.

Dean Willis noted that SDP limitations mean the source port for a session is
not conveyed, making it hard to set firewall rules based on content of SDP
and potentially difficult to define the parameters for an operator break-in
which is not occurring on an MTA (a mid-flow tap). Bill Marshall responded
that we agree that the source port is not available, and for operator
break-in, the MTA is expected to cooperate in providing the media stream for
operator services. Bill added add that DCS uses only partial classifiers (no
match on source port) at the CMTS (wildcard the port number on the socket).

Dean Willis discussed the controversiality of the DCS two-stage invite. The
current approach uses an "invite, no ring" followed by an "invite with
ring".  Dean asked if it might be feasible to used nested sessions, wherein
the outer session establishes QoS between the endpoints, and the inner
session actually sets up the call. The idea may not have been expressed
clearly as nobody seemed to get it, and Dean agreed to think about it and
discuss it on the group mailing list someday. Someone later pointed out that
this approach suffers from the same cascade failure in forking scenarios as
does the DCS approach. This probably warrants mailing list discussion.

Dean Willis pointed out that the behavior of DCS proxies is to blocking of
3xx responses in the proxy. This prevents passing back multiple contact
points to the originator, thereby breaking a number of services including
UAC controlled parallel search and menu selection of redirected contact. In
fact, it pretty much breaks the entire redirect model. In discussion, it was
pointed out that this approach arose from a privacy concern for hiding of
forwarding. Jonathan Rosenberg suggested that the privacy requirement is OK,
but that the solution shouldn't prevent other capabilities. Dean Willis
suggested that use of a proxy that actually proxies, rather than redirects
the call, is needed to assure privacy of forwarding, and that end points
with this requirement should simply refrain from using redirects for
forwarding.

Dean Willis suggested that the group consider using the draft-antti tel: URL
syntax to express telephone numbers and LNP status rather than adding LNP as
a DCS-specific parameter.
The DCS group agreed to look at this draft and incorporate necessary
changes.


Discussion then shifted to the point at which billing begins.

Henning Schulzrinne discussed issues with the DCS approach:
  -- per-minute billing doesn't encourage net-friendly behavior like
silence suppression.
  --  Routers will have to capture packet volumes.
  -- It may be desirable to support uses such as use of packet connection
for baby monitor.  Hence a held resource charge plus a packet volume charge
might be the appropriate structure.  This makes the bill-upon-answer issue
disappear.
  -- Two-stage setup shouldn't be driven by a desire to preserve the PSTN
billing structure.
  -- The separation of reservation from commitment is valid.  It applies on
a per-stream rather than per-session basis.
  -- there is a simpler way than two-phase to achieve user requirements if
one gets rid of billing model preconceptions.

Jonathan Rosenberg questioned the DCS requirement to establish QoS prior to
answer response in order tot prevent first-utterance clipping. He pointed
out that such clipping occurs in the PSTN today.  He suggested that there
may be enough "slack" in the network to support best-effort called party
greeting before QoS kicks in.  Bill Marshall counterpointed that this might
mean that the first few packets are delivered with significantly more delay
than the others, hence
requiring adaptability in the playout buffer, and that this could be
problematic given that DOCSIS delay adds 20 ms to best-effort latency.
Jonathan responded that designing application layer protocols around layer 2
is a questionable approach.

An attendee noted that dropping each proxy out of the signaling path after
the first phase may block the operation of some call features.  How does a
proxy get back "in" when required?  Bill Marshall answered that the UA has
to explicitly call upon the proxy for further service.  This leaves open the
question: how does the endpoint know when to call in the proxy?  e.g. user
requires a specific proxy to be present at all stages of a call.

Mike Mannette clarified the requirements and proposed solutions -- two-phase
invite addresses the call defect issue; direct 200 OK (proxy bypass) and QoS
transmission addresses clipping.  There was general agreement that these are
separate issues.

The group then discussed concerns with the call state model. It may imply
some dependence on UA reliability for the operation of some features such as
malicious call trace. Mike Mannette stated that the DCS group assumption was
that endpoint reliability is an engineerable item.  Some parties expressed
concern that this reintroduces the telco-supplied phone model, or that
people might not realize the implications of buying a cheap phone.  K.K.
proposed that a service provider could offer a state recording service,
to support features such as call trace even in the face of endpoint failure.
Someone summarized that the phone should be able to
keep state of active calls, but it may be easier for a network resource to
keep history. Jonathan Rosenberg described this as a different fate sharing
problem. There seemed to be general interest in the room toward expanding
the DCS state model into a generalized cookie model.

Henning Schulzrinne comment on trust and privacy, noting that it might be
more efficient to certify UA-supplied info rather than always overwriting
it, with an underlying assumption that people are usually honest.  K.K.
responded that this is not a fundamental decision and could change if good
reason given.

Wrap up:

Jonathan Rosenberg suggested that the group first agree on requirements,
then debate solutions. The DCS group has made the first part easy by
breaking the requirements apart. Jonathan again argued that we should avoid
special-case solutions to the extent possible, but that the solutions
proposed by the DCS group should be given first consideration, as much of
the work has already been done. The attendees expressed a strong consensus
in
favor of this approach. Several implementor groups agreed to offline talks,
and numerous calls for list discussion of various topics were voiced.


Open questions:

1) Can the operator services requirements be restated so as to make them
more generally applicable to SIP-initiated sessions? What are the relevant
security requirements?

2) Can the tel: URL syntax be used to meet DCS' needs for expressing phone
numbers and LNP contexts?

3) Can we refine the statement of the requirements sufficiently to determine
the general applicability of each?

4) Can we develop a reasonable compromise solution to the requirements
addressed by two-stage invite without the liabilities presented by the
two-stage invite process?

--
Dean Willis
SIP WG cochair




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 00:43:43 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA09387
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 00:43:43 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 2067352B6; Wed,  8 Dec 1999 00:41:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 7450B52DD; Wed,  8 Dec 1999 00:41:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 8A4C252B6
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 00:41:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 00:39:28 EST 1999
Received: from pmesmtp01.wcom.com ([199.249.20.1]) by dusty; Wed Dec  8 00:38:00 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #41714)
 id <0FME00B01QDQMP@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Wed,  8 Dec 1999 05:39:26 +0000 (GMT)
Received: from omzrelay.mcit.com ([166.37.204.49])
 by firewall.mcit.com (PMDF V5.2-32 #41714)
 with ESMTP id <0FME00994QDPEG@firewall.mcit.com> for
 sip@lists.research.bell-labs.com; Wed, 08 Dec 1999 05:39:25 +0000 (GMT)
Received: from omzmta04.mcit.com (omzmta04.mcit.com [166.37.194.122])
 by omzrelay.mcit.com (8.8.7/) with ESMTP	id FAA05337 for
 <sip@lists.research.bell-labs.com>; Wed, 08 Dec 1999 05:39:27 +0000 (GMT)
Received: from dwillispc4 ([166.44.162.174])
 by omzmta04.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991208053922.NFEW91@dwillispc4> for
 <sip@lists.research.bell-labs.com>; Wed, 08 Dec 1999 05:39:22 +0000
Date: Tue, 07 Dec 1999 23:42:07 -0600
From: Dean Willis <dean.willis@wcom.com>
Subject: Minutes of SIP WG at IETF 46, Final
To: IETF SIP <sip@lists.research.bell-labs.com>
Message-id: <000f01bf413e$f6b38080$0200a8c0@dwillispc4>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2377.0
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



An HTML version is available at:
http://www.softarmor.com/sipwg/meets/IETF46/notes/minutes.htm

-------------------------------------------
Minutes, SIP Working Group at IETF 46

The SIP Working Group met in conjunction with the 46th meeting of the IETF
in Washington DC on November 8 and 10, 1999. There were two standard
sessions, both of which were well attended (app. 200 persons), with very
full agendas. In addition to ongoing working group efforts, seventeen
Internet drafts were presented and discussed.

First Session, Monday November 8 0930-1130
------------------------------------------

Topic: Agenda Bashing, Current Work, WG Charter Review, presented by WG
chairs

Dean Willis discussed the agenda, with no objections being raised. Jonathan
discussed current mailing list topics including call termination procedures
(cancel vs. bye) and feature availability headers
(Supported/Unsupported/Desired/Required). The meeting consensus appeared to
be that the apparent consensus reached on the mailing list with respect to
bye and cancel overlaps is adequate for most cases of overlapping cancel/OK.
We expect this to be clarified in the next SIP specification document. There
seemed to be good consensus on the semantic range of feature availability
using the four headers (Supported/Unsupported to describe availability,
Desired/Required to describe rigidity of need). Further discussion of this
topic is required on-list. Jonathan also introduced the concept of
content-disposition for SIP message bodies. It may be that this mechanism
can be adopted from HTTP to address the application semantics of SIP. We
probably need a volunteer to analyze the HTTP usage and suggest
applicability for SIP.


Topic: SIP INFO Method, presented by Steve Donovan
draft-ietf-sip-info-method-00.txt

This is a WG charter item. The draft is fairly mature, and there is a strong
consensus to adopt the INFO method as a SIP component. There seemed to be a
good consensus to publish as an extension to SIP rather than including INFO
in the base spec at this time. The author agreed to finalize the draft with
this intent (address nits) and resubmit it with the intent of moving rapidly
to a WG last call.


Topic: ISUP bodies for SIP messages, presented by Eric Zimmerer
draft-zimmerer-sip-isup-mime-00.txt

Yet another MIME encoding for ISUP messages. No clear consensus has been
reached. We propose that the authors of the various approaches get together
and come up with a common approach. Tom Taylor noted that some sort of
version information in the encoding would be very helpful.


Topic: SIP BCP Draft, presented by Eric Zimmerer
draft-zimmerer-mmusic-sip-bcp-t-00.txt

The draft discusses a SIP-PSTN interworking methodology. Discussion centered
on limitations of the approach (for example, forking is not addressed and
may be precluded). The opinion appeared to be that the work, while
informational, may not yet constitute as "best current practice" as it does
not seem to have been actually implemented anywhere. Jonathan Rosenberg
called for input as to whether the SIP WG is the appropriate place to carry
this work forward, with other alternatives including a specialized working
group or an implementor's forum. Lawrence Conroy noted that there are really
two pieces of work here -- a set of extensions to SIP, and a profile of SIP
usage for telephony interworking, and that it should be possible to
decompose the work along these lines. There was consensus to definitely do
this work within IETF and that the work would move forward in such a way as
making it more broadly applicable, such as handling multiple proxies.


Topic: SIP-ISUP Mapping, presented by Gonzalo Camarillo
draft-camarillo-mmusic-sip-isup-bcp-00.txt

This draft deals with SG-MGC-MG architectures and the interworking between
an MGC and a SIP UA, specifically with message flows for calls in both
directions and parameter mappings. Gonzalo proposes that advanced ISUP
feature mapping can be vendor specific -- and that we need standardization
only on basic aspects. Accordingly, the draft is based on Q.767 rather than
Q.763. Discussion centered on issue of coordination of work on mapping and
references used. There may also be an need to clarify legal requirements on
the GSTN side. There were no substantive disagreements voiced with the
approach taken in the draft.

Topic: QSIG body for SIP messages, presented by Mo Zonoun
draft-ong-sip-qsig-mime-00.txt

QSIG is essentially a suite of peer-to-peer protocols between PBXs used for
feature signaling. The draft proposed a MIME encoding for QSIG and transport
of the MIME encodings as SIP message bodies, with call flows and various
examples. There was some discussion of the similarity between the QSIG and
ISUP approaches, with Henry Sinnreich asking if the various related drafts
could be unified. Jonathan Rosenberg commented that the interworking
difficulties not so obvious with ISUP, because of QSIG vs. SIP feature
interactions, and that there are interesting situations that might occur
when working between telephony and non-telephony endpoints, with QSIG
transport less likely to be general-purpose because of its more direct
conflict with SIP role. David Oran noted that QSIG in H.323 led to trouble,
with customers requiring H.323 awareness of some features. Christian Huitema
stated that awareness of the QSIG features in SIP collides directly with the
purpose and transparency requirement of SIP. The basic consensus is that the
approach for MIME types for ISUP, QSIG, etc. should be unified, and that
QSIG interworking is a separate issue. The WG did not state an opinion on
the need to carry out this interworking effort, with further discussion
deferred to the list.


Topic: SIP Call Flows, presented by Robert Sparks and Alan Johnston
draft-johnston-sip-call-flows-00.txt
draft-sparks-sip-service-examples-00.txt

These two documents contain several hundred pages of detailed call flows
showing a variety of SIP and SIP-PSTN sessions. The consensus of the group
was that this is a critical contribution, and that the WG should adopt a
call flow document as an ongoing effort. During the remainder of the
meeting, several requests were made to add specific scenarios or feature
invocations to the anthology. Jonathan Rosenberg proposed that these
documents be combined with the test cases from the bake-offs into an
informational RFC for issuance in January. This proposal received a loud hum
of consensus.


Topic: Intelligent Network Application Part (INAP) in SIP, presented by
Frans Haerens
draft-haerens-sip-inap-00.txt

This draft discusses approaches for exercising IN applications from SIP
devices. It was noted by Jonathan Rosenberg to have some commonalities with
a Lucent draft presented last year and that it might be possible to combine
the efforts. One speaker noted a strong overlap with SPIRITS work, but it
was noted that there is a need to fill in SIP as such as registration
outside of SPIRITS. Jonathan noted that there had been discussion in the
IPTEL meeting about a perceived lack of IN expertise in the IETF, making the
IETF an inappropriate forum for this sort of work. Jonathan whether the SIP
group feels more confident in this effort. After some noncommittal
responses, Dean Willis suggested that this conversation could move to the
list, which seemed to stimulate the conversation. Paul proposed that this
task is equivalent to the ISUP mapping work, only this for INAP, and is
therefore as appropriate in IETF as is ISUP mapping. Lawrence Conroy
suggested that ITU SG-11 might be addressing the topic, and suggested
submitting the draft there as well. Lawrence further proposed that mapping
to INAP should be done in ITU/ETSI, but that they might not understand SIP
well enough to do it right. Chip raised the question -- with respect to INAP
mapping, what does the author asking this WG? The response is that the SIP
WG would address the SIP enhancements needed to support INAP. Chip inquired
as to what forum would work the protocol between the softSSF and SIP Proxy,
and was told that it is not currently being worked. One speaker noted that
third-party call control is being worked in IPTEL using CPL, raising the
question as to whether multiple approaches are needed. Jonathan Rosenberg
responded that the IN approach has value, but fails in different
architectural contexts than the CPL approach, and that each should be used
appropriately.


Second Session, Wednesday November 10, 1300-1500
------------------------------------------------

Topic: Caller Preferences, presented by Jonathan Rosenberg
draft-ietf-sip-callerprefs-00.txt

Jonathan presented the current state of work on caller preferences.
The open issues include:

1) relationship with CPL: has description now
   how to reconcile conflicts between CPL and caller preferences, options
including
        -- let proxies decide,
        -- view both CPL and caller preferences as hints, etc.
Scott Petrack suggested that caller preferences take precedence.

2) syntax for capabilities. Can we use the CONNEG work?

3) IANA procedure for registering new capabilities. Joerg Ott suggested we
may wish to impose constraints or require documentation. What additional
capabilities should go into the baseline spec?

4) One speaker asked about interaction with the DCS no-ring proposal.
Jonathan sees the situations as different, whereas K.K. sees possibility of
an overlap. Further discussion appears warranted.


Topic: SIP Session Timer, presented by Steve Donovan
draft-ietf-sip-session-timer-00.txt

The session timer was presented in Oslo, with consensus to proceed. The
current draft is quite mature. Discussion centered on whether to include
this in the base spec or consider it an extension. By using the
requires/supported approach, it could be made a separable extension. The
consensus was to republish with this detail and nits corrected and proceed
to WG last call as soon as possible.


Topic: Early Media in Provisional Responses (183), presented by Steve
Donovan
draft-ietf-sip-183-00.txt 0:15 Steven.R.Donovan@wcom.com

An earlier version of this draft was presented in Oslo, with consensus to
proceed. This draft really includes two different elements which are needed
for certain telephony interworking cases. One element is the addition of
MIME bodies to provisional (1xx class) messages. This appears to have broad
utility to other applications as well, but has a dependency on reliable
provisional messages. The other element is the addition of a new method to
indicate call progress. It was noted that 183 has been allocated, so a new
number would need to be selected for the proposed feature. No consensus was
reached as to whether each element should be included in base or published
as an extension. One suggestion made was to divide the document into two
discrete drafts and develop the elements separately. No conclusion was
reached as to how to proceed, and discussion was deferred to the list.


Topic: Interdomain SIP, QoS, and OSP presented by Henry Sinnreich
draft-sinnreich-interdomain-sip-qos-osp-00.txt

This document covers an interesting interdisciplinary approach to dealing
with QoS, reporting, and settlement issues for SIP sessions crossing two or
more carriers.
David Oran noted that the media path is not the same as the signaling path,
which raises the question of how a SIP proxy knows which router to go to.
This apparently is unresolved in DCS as well. Jonathan noted that mix of
protocols suggests trotting through a series of WGs, but that this is not
truly a SIP WG item because no SIP changes are proposed. K.K. suggested that
there is a large community of interest here, which led Jonathan to suggest a
joint WG meeting as an option. One speaker suggested adding these examples
to the call flows draft. Steve Donovan noted the open SIP question of when
to trigger QOS -- a SIP extension may be needed to handle this case. A
non-WG informational RFC, with review across groups, was also suggested.
Further discussion on how to continue this work was deferred to the list.

Topic: Using SIP with MPLS for QOS Reservations, presented by Mark Gibson
and Jon Crowcroft
draft-gibson-sip-qos-resv-00.txt

This draft suggests a novel use of modified SIP with a route header to probe
for and establish MPLS paths. As this is interdisciplinary with MPLS, no
consensus was reached to move forward with this as a SIP WG effort.


Topic: Usage of the SIP INFO Method such as DTMF presented by Jiri Kuthan
draft-kuthan-sip-infopayload-00.txt

This draft discussed usage of the INFO method for transporting a variety of
things including mid-call signaling, DTMF, and others, and proposed means
for enhancing reliability and in-order delivery. Discussion rapidly devolved
to a moderately heated exchange on DTMF-in-RTP vs. DTMF-in-INFO, with no
conclusion reached.


Topic: Authentication through Multiple Proxies, presented by Robert Sparks
draft-sparks-sip-multiproxy-auth-00.txt

This draft discussed approaches for allowing multiple proxies to challenge a
SIP method. It appears that this can be accomplished via a slight
clarification of the response syntax and some discussion of proxy behavior
without impacting the current SIP specification. These can be included in
the next SIP draft. However, implications of hop-by-hop vs. end-to-en
security remain to be considered.


Topic: Host Mobility Management Protocol with SIP presented by Faramak Vakil
draft-itsumo-hmmp-00.txt

This draft proposes extensions to SIP needed to support a host mobility
management protocol potentially useful in 3G wireless and other
environments. Further discussion is needed as to whether this work should be
addressed in the SIP WG.


Topic: SIP Servlet API presented by Anders Kristensen
draft-kristensen-sip-servlet-00.txt

The SIP Servlet approach is promising for development of SIP services using
Java. Discussion centered on finding an appropriate forum for further work,
as there appeared to be a general consensus (reinforced by an area director)
that the IETF is not an appropriate forum to refine software APIs. The
proposal was made an accepted to establish a new mailing list for further
discussion.

--
Dean Willis
SIP WG co-chair




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 07:05:54 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id HAA27261
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 07:05:53 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id A7F4252B6; Wed,  8 Dec 1999 07:03:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 1E4D852C4; Wed,  8 Dec 1999 07:03:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9CC9952B6
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 07:03:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 07:02:51 EST 1999
Received: from rakshaka.wipsys.soft.net ([164.164.68.8]) by dusty; Wed Dec  8 07:01:21 EST 1999
Received: (from fwtk@localhost)
	by rakshaka.wipsys.soft.net (8.9.1b+Sun/8.9.1) id RAA21542
	for <sip@lists.research.bell-labs.com>; Wed, 8 Dec 1999 17:30:20 -0500 (GMT)
X-Authentication-Warning: rakshaka.wipsys.soft.net: fwtk set sender to <anirbr@wipsys.soft.net> using -f
Received: from unknown(192.168.172.18) by rakshaka.wipsys.soft.net via smap (V2.0)
	id xma021530; Wed, 8 Dec 99 17:30:08 -0500
Received: from wipsys.soft.net ([192.168.178.175])
          by ecmail.wipsys.soft.net (Netscape Messaging Server 3.6)
           with ESMTP id AAA740D for <sip@lists.research.bell-labs.com>;
          Wed, 8 Dec 1999 17:27:49 +0530
Message-ID: <384E4803.9CA02D2A@wipsys.soft.net>
Date: Wed, 08 Dec 1999 17:28:59 +0530
From: "ANIRBAN ROY" <anirbr@wipsys.soft.net>
X-Mailer: Mozilla 4.5 [en] (WinNT; I)
X-Accept-Language: en
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: where can i get the latest draft of SIP
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

hi,

can any body please tell me where can i get the latest draft of  SIP.

regards
Anirban




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 09:16:25 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA05981
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 09:16:20 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D77C952DC; Wed,  8 Dec 1999 09:13:36 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A93FD52C4; Wed,  8 Dec 1999 09:13:32 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 38D9B52D5
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 09:13:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 09:12:40 EST 1999
Received: from smtp-out1.bellatlantic.net ([199.45.39.156]) by dusty; Wed Dec  8 09:11:13 EST 1999
Received: from cs.columbia.edu (adsl-151-198-20-48.bellatlantic.net [151.198.20.48])
	by smtp-out1.bellatlantic.net (8.9.1/8.9.1) with ESMTP id JAA29049
	for <sip@lists.research.bell-labs.com>; Wed, 8 Dec 1999 09:10:50 -0500 (EST)
Message-ID: <384E6772.CC943AD5@cs.columbia.edu>
Date: Wed, 08 Dec 1999 09:13:06 -0500
From: Henning Schulzrinne <hgs@cs.columbia.edu>
Organization: Columbia University
X-Mailer: Mozilla 4.7 [en]C-CCK-MCD BA45DSL  (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: Syntax for WWW-Authenticate
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

The Authorization and WWW-Authenticate headers have truly awful syntax
(*), since they allow the use of commas for both parameter and header
separation. The following is legal to declare one's ability to support
both basic and digest authentication:

WWW-Authenticate: basic realm=br, digest realm=dr, nonce=hex,
                  more=parameter

Note that the only way to tell that a new header has begun is to either
recognize "digest" (dangerous, since new mechanisms could be invented)
or to see that two words are separated by white space, rather than
comma. This means that the parser has to look ahead to decide what to do
and can't split headers.

My suggestion would be to strongly discourage this syntax and only use
the equivalent

WWW-Authenticate: basic realm=br, par=value, par=value
WWW-Authenticate: digest realm=dr, ...

instead. The pain of supporting the single-header form just doesn't seem
worth it.

Henning

(*) which we inherited from HTTP, just to place blame properly :-)



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 09:37:34 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA17574
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 09:37:34 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 6863252C4; Wed,  8 Dec 1999 09:35:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E1BFE52D5; Wed,  8 Dec 1999 09:35:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 32F8A52C4
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 09:35:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 09:34:22 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Wed Dec  8 09:32:54 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhssg05308;
	Wed, 8 Dec 1999 14:32:00 GMT
Received: from dynamicsoft.com ([63.86.21.104])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id JAA09642;
	Wed, 8 Dec 1999 09:34:19 -0500 (EST)
Message-ID: <384E6D90.D65A2B0C@dynamicsoft.com>
Date: Wed, 08 Dec 1999 09:39:12 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: ANIRBAN ROY <anirbr@wipsys.soft.net>
Cc: sip@lists.research.bell-labs.com
Subject: Re: where can i get the latest draft of SIP
References: <384E4803.9CA02D2A@wipsys.soft.net>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

SIP is rfc2543, available at:
ftp://ftp.isi.edu/in-notes/rfc2543.txt

-Jonathan R.

ANIRBAN ROY wrote:
> 
> hi,
> 
> can any body please tell me where can i get the latest draft of  SIP.
> 
> regards
> Anirban

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 11:13:55 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA10156
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 11:13:54 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id E1DDF52B6; Wed,  8 Dec 1999 11:11:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4557452E1; Wed,  8 Dec 1999 11:11:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9093752B6
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 11:11:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 11:09:14 EST 1999
Received: from bounty.cisco.com ([161.44.2.72]) by dusty; Wed Dec  8 11:07:46 EST 1999
Received: from cisco.com (bounty.cisco.com [161.44.2.72])
	by bounty.cisco.com (8.8.8/2.5.1/Cisco List Logging/8.8.8) with ESMTP id LAA22592;
	Wed, 8 Dec 1999 11:09:11 -0500 (EST)
Message-ID: <384E82A7.B7E4F99B@cisco.com>
Date: Wed, 08 Dec 1999 11:09:11 -0500
From: Shail Bhatnagar <shbhatna@cisco.com>
Organization: CISCO
X-Mailer: Mozilla 4.51C-CISCOENG [en] (X11; U; SunOS 5.6 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: More questions about proxy behavior
References: <384D8937.443A1A6A@cisco.com> <384D9D8B.F4FF219C@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

> > 2) It forks and sends an INVITE to 2 branches. Gets a 200 OK on
> > branch 1, sends CANCEL on branch 2 and then gets a 200 OK for original
> > INVITE on branch 2. ( CANCEL and 200 probably passed each other on
> > the wire as discussed in the bug list of RFC2543) Should it forward this
> > 200 upstream ?
> 

<Jonathan> Absolutely.

Jonathan, On a slightly different note, how should a forking proxy
handle a CANCEL (sent by the client), when some branches are pending and
some branches returned a final response. I mean should it still forward
the best final response ?

Thanks,
Shail



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 11:51:13 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA29893
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 11:51:13 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id C8A1A52E5; Wed,  8 Dec 1999 09:57:37 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 251BA52AB; Wed,  8 Dec 1999 09:57:37 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 93B0D52E5
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 09:57:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec  8 09:55:14 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Wed Dec  8 09:53:46 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhssh14634;
	Wed, 8 Dec 1999 14:52:52 GMT
Received: from dynamicsoft.com ([63.86.21.104])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id JAA09697;
	Wed, 8 Dec 1999 09:55:11 -0500 (EST)
Message-ID: <384E7278.53AF5F97@dynamicsoft.com>
Date: Wed, 08 Dec 1999 10:00:08 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Henning Schulzrinne <hgs@cs.columbia.edu>
Cc: sip@lists.research.bell-labs.com
Subject: Re: Syntax for WWW-Authenticate
References: <384E6772.CC943AD5@cs.columbia.edu>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Henning Schulzrinne wrote:
> 
> Note that the only way to tell that a new header has begun is to either
> recognize "digest" (dangerous, since new mechanisms could be invented)
> or to see that two words are separated by white space, rather than
> comma. This means that the parser has to look ahead to decide what to do
> and can't split headers.
> 
> My suggestion would be to strongly discourage this syntax and only use
> the equivalent
> 
> WWW-Authenticate: basic realm=br, par=value, par=value
> WWW-Authenticate: digest realm=dr, ...
> 
> instead. The pain of supporting the single-header form just doesn't seem
> worth it.

My concerns are about having special cases; every other header can
appear in both forms, but not this one. This may cause problems for
existing parsers which assume they can always convert between the two. I
guess the best thing is to make this an open call for comment: Does
anyone have a parser/implementation for which mandating separate headers
is going to break things?

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 11:56:24 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA02606
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 11:56:24 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7E10452DD; Wed,  8 Dec 1999 10:03:27 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 9B9B352ED; Wed,  8 Dec 1999 10:03:26 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id A5ADB52DD
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 10:03:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec  8 10:02:07 EST 1999
Received: from bounty.cisco.com ([161.44.2.72]) by dusty; Wed Dec  8 10:00:40 EST 1999
Received: from cisco.com (bounty.cisco.com [161.44.2.72])
	by bounty.cisco.com (8.8.8/2.5.1/Cisco List Logging/8.8.8) with ESMTP id KAA17795;
	Wed, 8 Dec 1999 10:02:04 -0500 (EST)
Message-ID: <384E72EC.8191B21B@cisco.com>
Date: Wed, 08 Dec 1999 10:02:04 -0500
From: Shail Bhatnagar <shbhatna@cisco.com>
Organization: CISCO
X-Mailer: Mozilla 4.51C-CISCOENG [en] (X11; U; SunOS 5.6 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: More questions about proxy behavior
References: <384D8937.443A1A6A@cisco.com> <384D9D8B.F4FF219C@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Jonathan Rosenberg wrote:
> 
> Shail Bhatnagar wrote:
> >
> > Some questions about a transaction stateful forking proxy.
> > Here are some scenarios :
> >
> > 1) It forks and sends an INVITE to 2 branches. Receives 2 300
> > responeses. Should it try all of the Contacts.
> 
> Its implementation dependent. The caller preferences spec will allow a
> user to ask for recursion or not, but its more of a suggestion than a
> mandatory specification of behavior. Certain services that a proxy
> provides will require recursion, and others won't.

Jonathan, Let us assume that the proxy is a forking recursive proxy.
I am saying what should it do with multiple 300 responses and 300
is the best response class you have received.
Thanks for the answers.

Regards,
Shail



> 
> >
> > 2) It forks and sends an INVITE to 2 branches. Gets a 200 OK on
> > branch 1, sends CANCEL on branch 2 and then gets a 200 OK for original
> > INVITE on branch 2. ( CANCEL and 200 probably passed each other on
> > the wire as discussed in the bug list of RFC2543) Should it forward this
> > 200 upstream ?
> 
> Absolutely.
> 
> >
> > 3) How long should a stateful forking proxy maintain state on
> > branches which responded with a response that was dropped due to being
> > inferior to some other branch's response ?
> 
> Well, you should still ACK those branches, not actually just "drop"
> them. How long to maintain state for those branches is the same as how
> long you maintain state in the case of no forking. You should keep state
> for around 30 seconds after the final response. This should cover the
> time for all final responses which may have been sent, so that you can
> ACK them.
>



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 11:59:18 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA03901
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 11:59:18 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 59FA552EA; Wed,  8 Dec 1999 10:01:28 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id B3F4E52DD; Wed,  8 Dec 1999 10:01:27 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A05BC52EA
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 10:01:09 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 09:59:24 EST 1999
Received: from smtp-out2.bellatlantic.net ([199.45.39.157]) by dusty; Wed Dec  8 09:57:57 EST 1999
Received: from cs.columbia.edu (adsl-151-198-20-48.bellatlantic.net [151.198.20.48])
	by smtp-out2.bellatlantic.net (8.9.1/8.9.1) with ESMTP id KAA02714;
	Wed, 8 Dec 1999 10:05:09 -0500 (EST)
Message-ID: <384E7264.93B5F43D@cs.columbia.edu>
Date: Wed, 08 Dec 1999 09:59:48 -0500
From: Henning Schulzrinne <hgs@cs.columbia.edu>
Organization: Columbia University
X-Mailer: Mozilla 4.7 [en]C-CCK-MCD BA45DSL  (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: Syntax for WWW-Authenticate
References: <384E6772.CC943AD5@cs.columbia.edu> <384E7278.53AF5F97@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Jonathan Rosenberg wrote:
> 
> Henning Schulzrinne wrote:
> >
> > Note that the only way to tell that a new header has begun is to either
> > recognize "digest" (dangerous, since new mechanisms could be invented)
> > or to see that two words are separated by white space, rather than
> > comma. This means that the parser has to look ahead to decide what to do
> > and can't split headers.
> >
> > My suggestion would be to strongly discourage this syntax and only use
> > the equivalent
> >
> > WWW-Authenticate: basic realm=br, par=value, par=value
> > WWW-Authenticate: digest realm=dr, ...
> >
> > instead. The pain of supporting the single-header form just doesn't seem
> > worth it.
> 
> My concerns are about having special cases; every other header can
> appear in both forms, but not this one. This may cause problems for

I agree, except that this header already breaks the standard HTTP syntax
rules (which would mandate the use of semicolons to avoids this
problem), so this header gets no sympathy from me :-)

> existing parsers which assume they can always convert between the two. I
> guess the best thing is to make this an open call for comment: Does
> anyone have a parser/implementation for which mandating separate headers
> is going to break things?

Note that this only affects the generation of headers, not the parsing.
Indeed, the two-header version is already suggested as the canonical
form in any event.

The inverse question would be which parsers actually correctly *handle*
the merged form...



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 12:03:21 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA06003
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 12:03:20 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 1512C52F5; Wed,  8 Dec 1999 11:25:12 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 615E952F1; Wed,  8 Dec 1999 11:25:11 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from chair.dnrc.bell-labs.com (chair [135.180.161.201])
	by lists.research.bell-labs.com (Postfix) with ESMTP id 700DF52F8
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 11:24:04 -0500 (EST)
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by chair.dnrc.bell-labs.com (8.9.3/8.9.3) with SMTP id KAA24961
	for <sip@lists.research.bell-labs.com>; Wed, 8 Dec 1999 10:27:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec  8 10:25:32 EST 1999
Received: from pmesmtp01.wcom.com ([199.249.20.1]) by dusty; Wed Dec  8 10:24:04 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #41714)
 id <0FMF00301HG3MT@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Wed,  8 Dec 1999 15:24:07 +0000 (GMT)
Received: from omzrelay.mcit.com ([166.37.204.49])
 by firewall.mcit.com (PMDF V5.2-32 #41714)
 with ESMTP id <0FMF001IRHG055@firewall.mcit.com>; Wed,
 08 Dec 1999 15:24:00 +0000 (GMT)
Received: from omzexch006.mcit.com (OMZEXCH006.mcit.com [166.37.194.37])
 by omzrelay.mcit.com (8.8.7/) with ESMTP	id PAA07743; Wed,
 08 Dec 1999 15:24:01 +0000 (GMT)
Received: by omzexch006 with Internet Mail Service (5.5.2571.0)
 id <YGNP85Z8>; Wed, 08 Dec 1999 15:23:58 +0000
Content-return: allowed
Date: Wed, 08 Dec 1999 15:23:56 +0000
From: "Donovan, Steven R." <Steven.R.Donovan@wcom.com>
Subject: RE: User signaling -- was  DTMF signaling between media gateways	-ouch!
To: "'Scott Petrack'" <scott.petrack@metatel.com>,
        "Willis, Dean." <Dean.Willis@wcom.com>
Cc: sip@lists.research.bell-labs.com
Message-id: <75C79E507864D3118AFC00805FEAB7D8018FC6@ripexch001.mcit.com>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2571.0)
Content-type: multipart/alternative;
 boundary="Boundary_(ID_JmtRW7lFeQVSgvbYUMszUg)"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

--Boundary_(ID_JmtRW7lFeQVSgvbYUMszUg)
Content-type: text/plain; charset="iso-8859-1"

Scott Petrack wrote:

> 
> On Mon, 6 Dec 1999, Dean Willis wrote:
> 
> > 
> > Yes. I would suggest that a media gateway take a DS0 in one 
> side, do a tone
> > detction, ship RTP audio and RTP tones out along its media 
> path, and throw
> > SIP INFO messages on its signaling path.
> > 
> 
> The only issue is how the media gateway sends the message to the
> signalling server. There are already two solutions available:
> 
> 	a) the media gateway sends the DTMF events encoded within RTP
> to both the signaling server and the remote media endpoint. 
> This could be
> done either out two unicast streams or out to a multicast group. 

I'm not sure what you mean by the signaling server here.  In addition to
sending the DTMF to the remote media endpoint, it also needs to make sure
that the SIP user agent is notified of the DTMF events.

> 	b) the media gateway sends the DTMF events encoded in Megaco, as
> if it were talking to an MGC that wants notification.
> 
> If the signalling server can take the information and do with 
> it whatever
> is appropriate. Those of us who like encoding DTMF within RTP 
> point out
> that DTMF is time-based information, often synchronized with 
> other media
> streams. 

It is certainly the case the DTMF, as part of the media stream, is time
based information.  It is also the case that DTMF events are used for
service control.  The time sensitivity for this use of DTMF is much less
stringent and the synchronization with other media is not necessarily
important.

> 
> A simple way to put it is to say that the INFO approach forces a
> media gateway to know about SIP INFO messages, while the RTP approach
> forces a signalling server to know about the RTP DTMF payload.

The SIP user agent needs to know about SIP INFO messages.  The media server
needs to be able to notify the UA of the DTMF events.

> 
> The problem I have with making the media gateway speak SIP is 
> that there
> are a lot of competing signaling protocols which could transport DTMF.
> One customer will want it in a SIP INFO message, another in an H.245
> message, a third in a Q.931 message, etc. Isn't it simplest 
> to say that
> in the Internet architecture, real-time DTMF is encoded in RTP.

Maybe this is the distinction that we have been missing.  I would argue that
we are not really talking about "real-time" DTMF for the SIP INFO message.
If the DTMF is meant to be re-inserted into the media stream or there is a
need to maintain a temporal relationship with other media information, then
RTP encoding and transport is the only thing that makes sense.  

The use of DTMF for service level signaling information does not have the
same real-time constraints.  Yes, it is important that it be delivered in a
timely manner, but not with the same constraints as RTP transport of DTMF.

> 
> Isn't it simpler just to say that DTMF events are always
> encoded in a single way which doesn't lose information -- 
> encoded in an
> RTP payload format. 
> 

The question is where the SIP user agent resides.  In the case that the user
agent is physically part of the media server, then the DTMF events would be
sent as part of the RTP media session and as a payload in the INFO message.
The communication of between the media server and the SIP UA in this case
would be an internal issue.

If the SIP user agent resides in the media gateway controller, then there
needs to be a method for the media server to report on the DTMF events to
the MGC.  MEGACO has defined a method for this to happen.  The media server
would still send the DTMF as part of the RTP session.  It would also need to
send the DTMF event notifications to the MGC.  The SIP UA in the MGC would
then be responsible for sending the SIP INFO message.

Steve

<snip>

--Boundary_(ID_JmtRW7lFeQVSgvbYUMszUg)
Content-type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2569.0">
<TITLE>RE: User signaling -- was  DTMF signaling between media gateways =
-ouch!</TITLE>
</HEAD>
<BODY>

<P><FONT SIZE=3D2>Scott Petrack wrote:</FONT>
</P>

<P><FONT SIZE=3D2>&gt; </FONT>
<BR><FONT SIZE=3D2>&gt; On Mon, 6 Dec 1999, Dean Willis wrote:</FONT>
<BR><FONT SIZE=3D2>&gt; </FONT>
<BR><FONT SIZE=3D2>&gt; &gt; </FONT>
<BR><FONT SIZE=3D2>&gt; &gt; Yes. I would suggest that a media gateway =
take a DS0 in one </FONT>
<BR><FONT SIZE=3D2>&gt; side, do a tone</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; detction, ship RTP audio and RTP tones out =
along its media </FONT>
<BR><FONT SIZE=3D2>&gt; path, and throw</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; SIP INFO messages on its signaling =
path.</FONT>
<BR><FONT SIZE=3D2>&gt; &gt; </FONT>
<BR><FONT SIZE=3D2>&gt; </FONT>
<BR><FONT SIZE=3D2>&gt; The only issue is how the media gateway sends =
the message to the</FONT>
<BR><FONT SIZE=3D2>&gt; signalling server. There are already two =
solutions available:</FONT>
<BR><FONT SIZE=3D2>&gt; </FONT>
<BR><FONT SIZE=3D2>&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a) the media =
gateway sends the DTMF events encoded within RTP</FONT>
<BR><FONT SIZE=3D2>&gt; to both the signaling server and the remote =
media endpoint. </FONT>
<BR><FONT SIZE=3D2>&gt; This could be</FONT>
<BR><FONT SIZE=3D2>&gt; done either out two unicast streams or out to a =
multicast group. </FONT>
</P>

<P><FONT SIZE=3D2>I'm not sure what you mean by the signaling server =
here.&nbsp; In addition to sending the DTMF to the remote media =
endpoint, it also needs to make sure that the SIP user agent is =
notified of the DTMF events.</FONT></P>

<P><FONT SIZE=3D2>&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b) the media =
gateway sends the DTMF events encoded in Megaco, as</FONT>
<BR><FONT SIZE=3D2>&gt; if it were talking to an MGC that wants =
notification.</FONT>
<BR><FONT SIZE=3D2>&gt; </FONT>
<BR><FONT SIZE=3D2>&gt; If the signalling server can take the =
information and do with </FONT>
<BR><FONT SIZE=3D2>&gt; it whatever</FONT>
<BR><FONT SIZE=3D2>&gt; is appropriate. Those of us who like encoding =
DTMF within RTP </FONT>
<BR><FONT SIZE=3D2>&gt; point out</FONT>
<BR><FONT SIZE=3D2>&gt; that DTMF is time-based information, often =
synchronized with </FONT>
<BR><FONT SIZE=3D2>&gt; other media</FONT>
<BR><FONT SIZE=3D2>&gt; streams. </FONT>
</P>

<P><FONT SIZE=3D2>It is certainly the case the DTMF, as part of the =
media stream, is time based information.&nbsp; It is also the case that =
DTMF events are used for service control.&nbsp; The time sensitivity =
for this use of DTMF is much less stringent and the synchronization =
with other media is not necessarily important.</FONT></P>

<P><FONT SIZE=3D2>&gt; </FONT>
<BR><FONT SIZE=3D2>&gt; A simple way to put it is to say that the INFO =
approach forces a</FONT>
<BR><FONT SIZE=3D2>&gt; media gateway to know about SIP INFO messages, =
while the RTP approach</FONT>
<BR><FONT SIZE=3D2>&gt; forces a signalling server to know about the =
RTP DTMF payload.</FONT>
</P>

<P><FONT SIZE=3D2>The SIP user agent needs to know about SIP INFO =
messages.&nbsp; The media server needs to be able to notify the UA of =
the DTMF events.</FONT></P>

<P><FONT SIZE=3D2>&gt; </FONT>
<BR><FONT SIZE=3D2>&gt; The problem I have with making the media =
gateway speak SIP is </FONT>
<BR><FONT SIZE=3D2>&gt; that there</FONT>
<BR><FONT SIZE=3D2>&gt; are a lot of competing signaling protocols =
which could transport DTMF.</FONT>
<BR><FONT SIZE=3D2>&gt; One customer will want it in a SIP INFO =
message, another in an H.245</FONT>
<BR><FONT SIZE=3D2>&gt; message, a third in a Q.931 message, etc. Isn't =
it simplest </FONT>
<BR><FONT SIZE=3D2>&gt; to say that</FONT>
<BR><FONT SIZE=3D2>&gt; in the Internet architecture, real-time DTMF is =
encoded in RTP.</FONT>
</P>

<P><FONT SIZE=3D2>Maybe this is the distinction that we have been =
missing.&nbsp; I would argue that we are not really talking about =
&quot;real-time&quot; DTMF for the SIP INFO message.&nbsp; If the DTMF =
is meant to be re-inserted into the media stream or there is a need to =
maintain a temporal relationship with other media information, then RTP =
encoding and transport is the only thing that makes sense.&nbsp; =
</FONT></P>

<P><FONT SIZE=3D2>The use of DTMF for service level signaling =
information does not have the same real-time constraints.&nbsp; Yes, it =
is important that it be delivered in a timely manner, but not with the =
same constraints as RTP transport of DTMF.</FONT></P>

<P><FONT SIZE=3D2>&gt; </FONT>
<BR><FONT SIZE=3D2>&gt; Isn't it simpler just to say that DTMF events =
are always</FONT>
<BR><FONT SIZE=3D2>&gt; encoded in a single way which doesn't lose =
information -- </FONT>
<BR><FONT SIZE=3D2>&gt; encoded in an</FONT>
<BR><FONT SIZE=3D2>&gt; RTP payload format. </FONT>
<BR><FONT SIZE=3D2>&gt; </FONT>
</P>

<P><FONT SIZE=3D2>The question is where the SIP user agent =
resides.&nbsp; In the case that the user agent is physically part of =
the media server, then the DTMF events would be sent as part of the RTP =
media session and as a payload in the INFO message.&nbsp; The =
communication of between the media server and the SIP UA in this case =
would be an internal issue.</FONT></P>

<P><FONT SIZE=3D2>If the SIP user agent resides in the media gateway =
controller, then there needs to be a method for the media server to =
report on the DTMF events to the MGC.&nbsp; MEGACO has defined a method =
for this to happen.&nbsp; The media server would still send the DTMF as =
part of the RTP session.&nbsp; It would also need to send the DTMF =
event notifications to the MGC.&nbsp; The SIP UA in the MGC would then =
be responsible for sending the SIP INFO message.</FONT></P>

<P><FONT SIZE=3D2>Steve</FONT>
</P>

<P><FONT SIZE=3D2>&lt;snip&gt;</FONT>
</P>

</BODY>
</HTML>

--Boundary_(ID_JmtRW7lFeQVSgvbYUMszUg)--



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 12:59:59 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA06615
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 12:59:54 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9AD2E52B6; Wed,  8 Dec 1999 12:57:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 16AAE52C4; Wed,  8 Dec 1999 12:57:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 788E652B6
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 12:57:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 12:56:50 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Wed Dec  8 12:55:22 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhsst26218;
	Wed, 8 Dec 1999 17:52:48 GMT
Received: from dynamicsoft.com ([63.86.21.104])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id MAA11640;
	Wed, 8 Dec 1999 12:55:01 -0500 (EST)
Message-ID: <384E9C9B.4BF53BDC@dynamicsoft.com>
Date: Wed, 08 Dec 1999 12:59:55 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Shail Bhatnagar <shbhatna@cisco.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: More questions about proxy behavior
References: <384D8937.443A1A6A@cisco.com> <384D9D8B.F4FF219C@dynamicsoft.com> <384E82A7.B7E4F99B@cisco.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Shail Bhatnagar wrote:
> 
> > > 2) It forks and sends an INVITE to 2 branches. Gets a 200 OK on
> > > branch 1, sends CANCEL on branch 2 and then gets a 200 OK for original
> > > INVITE on branch 2. ( CANCEL and 200 probably passed each other on
> > > the wire as discussed in the bug list of RFC2543) Should it forward this
> > > 200 upstream ?
> >
> 
> <Jonathan> Absolutely.
> 
> Jonathan, On a slightly different note, how should a forking proxy
> handle a CANCEL (sent by the client), when some branches are pending and
> some branches returned a final response. I mean should it still forward
> the best final response ?

Generally, yes. The process is as follows:

1. THe proxy receives a CANCEL, and responds with 200 OK.
2. The proxy forwards the CANCEL on all pending branches.
3. The proxy waits for either (1) a final response to the original
request, or (2) a response to the CANCEL.
4. For each pending branch that responded to the CANCEL, wait a small
timeout (some small number of seconds) in case they had a final response
on the wire before receiving the CANCEL. In the next version of SIP, the
UA will have to send a final response to the original request, so you
generally won't need to wait.
5. of course, ACK any non-200 final responses you get.
6. return the best response to the request.

Step 6 is sort of optional for non-200. In rfc2543, the UA won't expect
a final response to the original request, so if you don't send it, its
OK. But, since the CANCEL and final response to the original request may
pass on the wire, the UAC needs to be prepared to get a final response
even after sending a CANCEL. 

Thanks,
Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 13:03:06 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA08487
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 13:03:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9621A52D5; Wed,  8 Dec 1999 12:59:42 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A718A52DC; Wed,  8 Dec 1999 12:59:41 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id CF0C952D5
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 12:59:09 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 12:58:05 EST 1999
Received: from dirty.research.bell-labs.com ([204.178.16.6]) by dusty; Wed Dec  8 12:56:38 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dirty; Wed Dec  8 12:56:33 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhsst27900;
	Wed, 8 Dec 1999 17:53:48 GMT
Received: from dynamicsoft.com ([63.86.21.104])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id MAA11644;
	Wed, 8 Dec 1999 12:56:06 -0500 (EST)
Message-ID: <384E9CDE.5E0664B9@dynamicsoft.com>
Date: Wed, 08 Dec 1999 13:01:02 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Shail Bhatnagar <shbhatna@cisco.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: More questions about proxy behavior
References: <384D8937.443A1A6A@cisco.com> <384D9D8B.F4FF219C@dynamicsoft.com> <384E72EC.8191B21B@cisco.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Shail Bhatnagar wrote:
> 
> > Its implementation dependent. The caller preferences spec will allow a
> > user to ask for recursion or not, but its more of a suggestion than a
> > mandatory specification of behavior. Certain services that a proxy
> > provides will require recursion, and others won't.
> 
> Jonathan, Let us assume that the proxy is a forking recursive proxy.
> I am saying what should it do with multiple 300 responses and 300
> is the best response class you have received.
> Thanks for the answers.

Same answer. It can recurse on all of them, recurse on some of them, or
return one of them. You generally shouldn't return a 300 response you
already recursed on, though.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 14:41:48 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA01770
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 14:41:47 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7380E52AB; Wed,  8 Dec 1999 14:39:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E619952C4; Wed,  8 Dec 1999 14:39:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id DD62952AB
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 14:39:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec  8 14:38:05 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Wed Dec  8 14:36:37 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id BAA27099;
	Thu, 9 Dec 1999 01:47:49 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA SMTP v4.6 (462.2 9-3-1997))  id 65256841.00520FAD ; Wed, 8 Dec 1999 20:26:19 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Henning Schulzrinne <hgs@cs.columbia.edu>
Cc: sip@lists.research.bell-labs.com
Message-ID: <65256841.0051503A.00@sampark.hss.hns.com>
Date: Wed, 8 Dec 1999 20:26:18 +0530
Subject: Re: Syntax for WWW-Authenticate
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Hi,
since the syntax specifies that all parameters must be of type token=token,
so a parser should, if it sees only  a token, assume its a new  auth-scheme
since  there is no = after it, and can hence
take it as a new www-auth header (taking care of LWSs around)

(btw, the sipgrammar html file for www-auth incorrectly states it as
auth-scheme 1#challenge -- it should only be 1#challenge as auth-scheme is
contained in it)

why do you say that this is difficult and should be discouraged ? Infact I
think things like nested comments inbetween params are more difficult and
still allowed ?

regds
Arjun

--
Arjun Roychowdhury @ Hughes Software Systems







Henning Schulzrinne <hgs@cs.columbia.edu> on 12/08/99 07:43:06 PM

To:   sip@lists.research.bell-labs.com
cc:
Subject:  Syntax for WWW-Authenticate




The Authorization and WWW-Authenticate headers have truly awful syntax
(*), since they allow the use of commas for both parameter and header
separation. The following is legal to declare one's ability to support
both basic and digest authentication:
WWW-Authenticate: basic realm=br, digest realm=dr, nonce=hex,
                  more=parameter
Note that the only way to tell that a new header has begun is to either
recognize "digest" (dangerous, since new mechanisms could be invented)
or to see that two words are separated by white space, rather than
comma. This means that the parser has to look ahead to decide what to do
and can't split headers.
My suggestion would be to strongly discourage this syntax and only use
the equivalent
WWW-Authenticate: basic realm=br, par=value, par=value
WWW-Authenticate: digest realm=dr, ...
instead. The pain of supporting the single-header form just doesn't seem
worth it.
Henning
(*) which we inherited from HTTP, just to place blame properly :-)








From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 14:51:45 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA07161
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 14:51:44 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D796152B6; Wed,  8 Dec 1999 14:49:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 591E652D5; Wed,  8 Dec 1999 14:49:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A3E7D52B6
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 14:49:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 14:48:00 EST 1999
Received: from cs.columbia.edu ([128.59.16.20]) by dusty; Wed Dec  8 14:46:33 EST 1999
Received: from cs.columbia.edu (bart.cs.columbia.edu [128.59.19.191])
	by cs.columbia.edu (8.9.1/8.9.1) with ESMTP id OAA22868;
	Wed, 8 Dec 1999 14:47:56 -0500 (EST)
Message-ID: <384EB5EC.B37D6857@cs.columbia.edu>
Date: Wed, 08 Dec 1999 14:47:56 -0500
From: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Organization: Columbia University, Dept. of Computer Science
X-Mailer: Mozilla 4.7 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: Syntax for WWW-Authenticate
References: <65256841.0051503A.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

archow@hss.hns.com wrote:
> 
> Hi,
> since the syntax specifies that all parameters must be of type token=token,
> so a parser should, if it sees only  a token, assume its a new  auth-scheme

That's what I said, yes.

> since  there is no = after it, and can hence
> take it as a new www-auth header (taking care of LWSs around)

Because a parser cannot split the header first and then parse each one
individually. This is the only instance in HTTP where a parser needs to
"look ahead" or "back up". Generally, since Fortran, language-writers
have tried to avoid this, for a good reason.

This makes writing a generic parser much more difficult than it should
be, for no gain in functionality.

> 
> (btw, the sipgrammar html file for www-auth incorrectly states it as
> auth-scheme 1#challenge -- it should only be 1#challenge as auth-scheme is
> contained in it)
> 
> why do you say that this is difficult and should be discouraged ? Infact I
> think things like nested comments inbetween params are more difficult and
> still allowed ?

Separate issue and easily handled in a few lines of code.

> 
> regds
> Arjun
> 
> --

-- 
Henning Schulzrinne   http://www.cs.columbia.edu/~hgs



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 16:01:46 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id QAA12755
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 16:01:45 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id C2D5152C4; Wed,  8 Dec 1999 15:59:17 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4104352DD; Wed,  8 Dec 1999 15:59:17 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 75A7652C4
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 15:59:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec  8 15:57:08 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Wed Dec  8 15:55:40 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id DAA04285;
	Thu, 9 Dec 1999 03:06:37 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA SMTP v4.6 (462.2 9-3-1997))  id 65256841.0072D8B9 ; Thu, 9 Dec 1999 02:24:25 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Cc: archow@hss.hns.com, sip@lists.research.bell-labs.com
Message-ID: <65256841.007076D0.00@sampark.hss.hns.com>
Date: Thu, 9 Dec 1999 02:24:24 +0530
Subject: Re: Syntax for WWW-Authenticate
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



hgs> Because a parser cannot split the header first and then parse each one
hgs>  individually. This is the only instance in HTTP where a parser needs
to
hgs>  "look ahead" or "back up". Generally, since Fortran, language-writers
hgs>  have tried to avoid this, for a good reason.
hgs>  This makes writing a generic parser much more difficult than it
should
hgs>  be, for no gain in functionality.

Hi,
I dont really know if you state this with hand written parsers in mind ,
rule based generated parsers in mind or both.
The fact seems to be, that quite a few different set of problems come up
depending on which approach you use.
In some specific cases the greedy-search approach for lex coupled with its
support for only 1 lookahead makes life a little trickier
and in many other cases, parsing messages becomes very easy. So your
problems differ depending on your parser approach.
If you are using a rule based parser which neither backtracks nor allows
you a lookahead > 1  then you have to tweak some rules which is an
elementary issue for handwritten code - and in other cases, rule based
grammars allow you a whole lot more of flexibility for other messages.


Anyway suppose we consider  (in sipurl)

sip: aaaaaaaa   :     1234@yyyyyyy:1234

Im assuming the above is valid since ":" is a sep. in user:passwd and LWS
should be allowed b/w separators.

So when you reach token aaaaaaa how do you know its a user or a host
without looking ahead for @ ?
(since user:passwd is optional)


However, if current parsers dont allow the above and assume no LWS b/w
colons in user:passwd then thats another thing.
But since some of your bakeoff tests have generic comments like "LWS b/w
all separators" then above is valid ?

So what I mean is that, you might have to lookahead  ( or tweak rules) in
many other cases too. Which is why I did not think www-auth
was any different in difficulty.

Regds
Arjun

--
Arjun Roychowdhury @ Hughes Software Systems






From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 21:48:34 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id VAA08655
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 21:48:33 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7214352DC; Wed,  8 Dec 1999 21:45:57 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E83E652DD; Wed,  8 Dec 1999 21:45:56 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 41F5852E5
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 09:55:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec  8 09:55:01 EST 1999
Received: from fogerty.ericsson.fi ([194.89.206.21]) by dusty; Wed Dec  8 09:53:33 EST 1999
Received: from greymse1.lmf.ericsson.se ([131.160.1.6])
	by fogerty.ericsson.fi (8.9.3+Sun/8.9.3) with ESMTP id QAA28074
	for <sip@lists.research.bell-labs.com>; Wed, 8 Dec 1999 16:55:35 +0200 (EET)
Received: from ericsson.fi (E005004B52C79.lmf.ericsson.se [131.160.71.140])
	by greymse1.lmf.ericsson.se (8.8.6 (PHNE_17135)/8.8.6) with ESMTP id QAA11870
	for <sip@lists.research.bell-labs.com>; Wed, 8 Dec 1999 16:54:57 +0200 (EET)
Message-ID: <384E7160.9F29E28E@ericsson.fi>
Date: Wed, 08 Dec 1999 16:55:28 +0200
From: Manuel Sanchez Cabas <lmfmsc@ericsson.fi>
Reply-To: lmfmsc@ericsson.fi
Organization: Ericsson
X-Mailer: Mozilla 4.51 [en] (WinNT; I)
X-Accept-Language: en
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: CANCEL question
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

I would appreciate a lot if someone could solve this questio about
CANCEL processing in a proxy.

A proxy receives an INVITE request from the UAC for a new call and
forwards it. Immediately after, the proxy receives a CANCEL request from
the UAC for this call. What should the proxy do??:

1) Return a 200 OK for the CANCEL to the UAC. Issue a new CANCEL request
downstream initializing the Via header to the proxy.

If the proxy receives a 200 OK for the INVITE after it has sent the
CANCEL downstream, what should it do? the new draft suggests to ACK as
if no CANCEL had been sent, but in this situation, the caller assumes
call is cancelled while the callee thinks that a call has been
established. Should the callee respond to the CANCEL as well even though
it had sent a 200 final response for that transaction?

2)Send the CANCEL request downstream and wait for a response either for
the INVITE or the CANCEL.

Thanks a lot.

Manuel.





From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec  8 22:12:06 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id WAA21627
	for <sip-archive@odin.ietf.org>; Wed, 8 Dec 1999 22:12:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 5C31552AB; Wed,  8 Dec 1999 22:09:45 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id CC80C52E0; Wed,  8 Dec 1999 22:09:44 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from nova.dnrc.bell-labs.com (nova [135.180.131.5])
	by lists.research.bell-labs.com (Postfix) with ESMTP id C301352AB
	for <sip@lists.research.bell-labs.com>; Wed,  8 Dec 1999 22:09:20 -0500 (EST)
Received: from dnrc.bell-labs.com (igorspc.dnrc.bell-labs.com [135.180.130.146])
	by nova.dnrc.bell-labs.com (8.9.3/8.9.3) with ESMTP id WAA28316;
	Wed, 8 Dec 1999 22:09:18 -0500 (EST)
Message-ID: <384F1DDD.4519E4EB@dnrc.bell-labs.com>
Date: Wed, 08 Dec 1999 22:11:25 -0500
From: Igor Slepchin <igors@dnrc.bell-labs.com>
Organization: Bell Labs
X-Mailer: Mozilla 4.61 [en] (WinNT; U)
X-Accept-Language: en,ru
MIME-Version: 1.0
To: lmfmsc@ericsson.fi
Cc: sip@lists.research.bell-labs.com
Subject: Re: CANCEL question
References: <384E7160.9F29E28E@ericsson.fi>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Manuel Sanchez Cabas wrote:
> A proxy receives an INVITE request from the UAC for a new call and
> forwards it. Immediately after, the proxy receives a CANCEL request from
> the UAC for this call. What should the proxy do??:
> 
> 1) Return a 200 OK for the CANCEL to the UAC. Issue a new CANCEL request
> downstream initializing the Via header to the proxy.

This is the correct behavior.
 
> If the proxy receives a 200 OK for the INVITE after it has sent the
> CANCEL downstream, what should it do? 

It should forward 200OK to the next hop specified in the Via header.

> the new draft suggests to ACK as
> if no CANCEL had been sent, but in this situation, the caller assumes
> call is cancelled while the callee thinks that a call has been
> established. 

ACKs to 200 responses are end to end so a proxy would never ACK a 200OK,
it would just forward the 200OK upstream. The draft says that UACs and
proxies should be prepared to receive a final response even after
receiving the response to CANCEL, thus resolving the ambiguous situation
you describe.

> Should the callee respond to the CANCEL as well even though
> it had sent a 200 final response for that transaction?

Yes, otherwise the upstream proxy would keep retransmitting the CANCEL.
 
---
Igor Slepchin



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  9 01:07:52 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA21499
	for <sip-archive@odin.ietf.org>; Thu, 9 Dec 1999 01:07:52 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id BF6B952DD; Thu,  9 Dec 1999 01:03:39 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 1018652E2; Thu,  9 Dec 1999 01:03:38 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id F267152DD
	for <sip@lists.research.bell-labs.com>; Thu,  9 Dec 1999 01:03:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec  9 01:02:34 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec  9 01:01:05 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhsuq21810;
	Thu, 9 Dec 1999 06:00:12 GMT
Received: from dynamicsoft.com (1Cust98.tnt1.freehold.nj.da.uu.net [63.17.113.98])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id BAA12359;
	Thu, 9 Dec 1999 01:02:27 -0500 (EST)
Message-ID: <384F4720.358162F3@dynamicsoft.com>
Date: Thu, 09 Dec 1999 01:07:28 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: "Mark D. Foster" <mark.foster@npac.com>
Cc: "'John Mainwaring'" <crm312a@nortelnetworks.com>,
        iptel@lists.research.bell-labs.com,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com
Subject: Re: TRIP
References: <000901bf41b8$e9e21900$0864a8c0@loudoun.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Mark Foster wrote:
> That at least some forms of Iptel must comply with the non-reliance requirement in at least some countries suggests that the
> SIP, TRIP, enum, etc., must be flexible enough to allow implementations that will satisfy these requirements, and still be
> interoperable with those that don't.
>  
> In the US and Canada, the key to this was the N-1 trigger placement policy.  This was simply a guideline on which networks
> should be prepared to dip calls placed to which areas in order to not force calls to be re-routed at the donor network
> (termination routing).  Key to having flexibility on where triggers are placed, resulting in NPDB queries, is having a form of
> post-query signaling that makes the query results available to all downstream networks.

I'm not really sure that the N-1 concept works that well in an IP
environment:

1. If you look at DNS as a similar service to LNP on the IP side, the
originating host does a name to address translation right away. This
happens even if the name thats being translated is "far away". This
avoids triangle routing, as has been discussed.

2. The interconnection of SIP servers and providers within the IP world
is not that rigid. I'm not sure how a SIP proxy would indeed determine
that it is the N-1th server in the chain.

In any case, determination of where the NPDB query is done is something
I don't think is within the scope of iptel to determine. All we need to
figure out is what kind of numbers are distributed in TRIP. Near as I
can tell, since LRNs still refer to the prefix of numbers served by a
switch, doing what we were doing all along works just fine. 

>  
> The key data elements in ANSI ISUP are: the LNP-query-done indicator (bit in the FCI); placing a routing number returned
> from the NPDB in the CdPN (LRN or whatever), and moving the original dialed number to a GAP.  Subsequent call routing is
> done on the routing number, while not loosing the dialed portable subscriber number.  Given the need for SIP to interoperate
> with ANSI ISUP, there should be some consideration of implementing these semantics.
>  
> If SIP captured these fields, so as to provide a post-dip form of downstream signaling, and TRIP were designed to build route
> tables based on administratively assigned number ranges (which, by definition would make calls to routing numbers [LRN]
> routable) , and enum did not require DNS queries to be answered by donor networks, then the existing regulatory
> requirements for LNP could be met.

First off, SIP has two fields that identify the destination party. The
To field represents the original number that the caller called, and the
request URI represents the address translated at each hop. Thus, the To
field carries the original dialed number, and the request URI would
carrying the routing number. Now, do we need to somehow indicate that
the LNP dip has been done? I'm still unsure about that. I believe
Henning had suggested that the use of a sip URL (as opposed to a tel
URL) in the request URI would effectively be an indicator of such. That
aside, I think there is a possible confusion if one were to assume an
LRN looked like a normal SIP URL:

INVITE sip:1212344 SIP/2.0
To: sip:14081234567

The problem is related to past discussions on the SIP mailing list
regarding overlap dialing. A terminating gateway would look at
sip:1212344, and know how to route it, but might not know whether this
was a dialed number with more digits coming, or an LRN. Does it matter?
Not being an ISUP expert, I'm not sure. If it does matter, something
like user=lrn within the SIP URL would fix that.

But anyway, thats also not a problem for iptel, although I've cc'd the
sip list on this message.

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec  9 13:51:20 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA00918
	for <sip-archive@odin.ietf.org>; Thu, 9 Dec 1999 13:51:19 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id A10E952B6; Thu,  9 Dec 1999 13:47:35 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 049FD52D6; Thu,  9 Dec 1999 13:47:34 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id CE70A52B6
	for <sip@lists.research.bell-labs.com>; Thu,  9 Dec 1999 13:47:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec  9 13:47:04 EST 1999
Received: from sigma.cisco.com ([171.69.63.142]) by dusty; Thu Dec  9 13:45:34 EST 1999
Received: from cisco.com (dhcp-71-147-166.cisco.com [171.71.147.166])
	by sigma.cisco.com (8.8.8-Cisco List Logging/8.8.8) with ESMTP id KAA13392;
	Thu, 9 Dec 1999 10:46:32 -0800 (PST)
Message-ID: <384FF91C.DC9E7EE7@cisco.com>
Date: Thu, 09 Dec 1999 10:46:52 -0800
From: "Hussein F. Salama" <hsalama@cisco.com>
Reply-To: hsalama@cisco.com
Organization: Cisco Systems
X-Mailer: Mozilla 4.5 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: "Mark D. Foster" <mark.foster@npac.com>,
        "'John Mainwaring'" <crm312a@nortelnetworks.com>,
        iptel@lists.research.bell-labs.com,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com
Subject: Re: TRIP
References: <000901bf41b8$e9e21900$0864a8c0@loudoun.com> <384F4720.358162F3@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Jonathan Rosenberg wrote:
> 
> Mark Foster wrote:
> > That at least some forms of Iptel must comply with the non-reliance requirement in at least some countries suggests that the
> > SIP, TRIP, enum, etc., must be flexible enough to allow implementations that will satisfy these requirements, and still be
> > interoperable with those that don't.
> >
> > In the US and Canada, the key to this was the N-1 trigger placement policy.  This was simply a guideline on which networks
> > should be prepared to dip calls placed to which areas in order to not force calls to be re-routed at the donor network
> > (termination routing).  Key to having flexibility on where triggers are placed, resulting in NPDB queries, is having a form of
> > post-query signaling that makes the query results available to all downstream networks.
> 
> I'm not really sure that the N-1 concept works that well in an IP
> environment:
> 
> 1. If you look at DNS as a similar service to LNP on the IP side, the
> originating host does a name to address translation right away. This
> happens even if the name thats being translated is "far away". This
> avoids triangle routing, as has been discussed.
> 
> 2. The interconnection of SIP servers and providers within the IP world
> is not that rigid. I'm not sure how a SIP proxy would indeed determine
> that it is the N-1th server in the chain.
> 
> In any case, determination of where the NPDB query is done is something
> I don't think is within the scope of iptel to determine. All we need to
> figure out is what kind of numbers are distributed in TRIP. Near as I
> can tell, since LRNs still refer to the prefix of numbers served by a
> switch, doing what we were doing all along works just fine.
> 

Yes what we're doing is OK, because the LRN is part of an office's
NPA-NXX prefix. But we may have to add a new field to the
ReachableRoutes attribute to mark a prefix as portable. A prefix is
marked as portable if at lease one number has been ported out of this
prefix. 

Hussein


-- 
Hussein F. Salama
Cisco Systems
Mail Stop SJC6/3, 170 W. Tasman Drive, San Jose, CA 95134
Voice: +1 (408) 527-7147, Fax: +1 (408) 527-1714



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 10 02:47:58 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id CAA05630
	for <sip-archive@odin.ietf.org>; Fri, 10 Dec 1999 02:47:56 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 067D952C4; Fri, 10 Dec 1999 02:45:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 7611C52DF; Fri, 10 Dec 1999 02:45:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 3ABC352C4
	for <sip@lists.research.bell-labs.com>; Fri, 10 Dec 1999 02:45:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 10 02:44:01 EST 1999
Received: from gorilla.mchh.siemens.de ([194.138.158.18]) by dusty; Fri Dec 10 02:42:31 EST 1999
Received: from blues.mchh.siemens.de (mail3.mchh.siemens.de [194.138.158.227] (may be forged))
	by gorilla.mchh.siemens.de (8.9.3/8.9.3) with ESMTP id IAA05829
	for <sip@lists.research.bell-labs.com>; Fri, 10 Dec 1999 08:43:08 +0100 (MET)
Received: from mchh246e.demchh201e.icn.siemens.de ([218.1.68.146])
	by blues.mchh.siemens.de (8.9.1/8.9.1) with ESMTP id IAA20516
	for <sip@lists.research.bell-labs.com>; Fri, 10 Dec 1999 08:41:47 +0100 (MET)
Received: by MCHH246E with Internet Mail Service (5.5.2448.0)
	id <YS12W22J>; Fri, 10 Dec 1999 08:45:09 +0100
Message-ID: <679076A067F2D211A8F70090274481B80C181A@lnn201e.lan.siemens.fr>
From: Taji Rachid <Rachid.Taji@srit.siemens.fr>
To: sip@lists.research.bell-labs.com
Subject: question about sip grammar 
Date: Fri, 10 Dec 1999 08:45:01 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

must I put a "\r\n" (CRLF) after sip part of sip message even if there is no
message body.

Thanks.

Rachid.





From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 10 05:39:58 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id FAA29130
	for <sip-archive@odin.ietf.org>; Fri, 10 Dec 1999 05:39:57 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3785452DE; Fri, 10 Dec 1999 05:37:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 7BC9652E0; Fri, 10 Dec 1999 05:37:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id E0B4152DE
	for <sip@lists.research.bell-labs.com>; Fri, 10 Dec 1999 05:37:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 10 05:35:39 EST 1999
Received: from orange.pcs.ellemtel.net ([194.237.226.84]) by dusty; Fri Dec 10 05:34:09 EST 1999
Received: from vox.pcs.ellemtel.net ([194.237.226.75]) by orange.pcs.ellemtel.net with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2448.0)
	id XN1ZHV2B; Fri, 10 Dec 1999 11:36:28 +0100
Date: Fri, 10 Dec 1999 11:35:35 +0100
From: Rabbe Fogelholm <Rabbe.Fogelholm@ellemtel.se>
Reply-To: Rabbe Fogelholm <rabbe@zopps.com>
To: sip@lists.research.bell-labs.com
Cc: schulzrinne@cs.columbia.edu,
        =?ISO-8859-1?Q?Peter_Peld=E1n?= <Peter.Peldan@wireless.se>,
        Robert Brlenic <Robert.Brlenic@ellemtel.se>,
        Christian Jansson <Christian.Jansson@ellemtel.se>,
        Johan Liseborn <Johan.Liseborn@ellemtel.se>,
        Jens Lundstrom <jens.lundstrom@ellemtel.se>,
        Erik Nissen <Erik.Nissen@ericsson.com>,
        Lars-Erik Eriksson <Lars-Erik.Eriksson@ellemtel.se>,
        =?ISO-8859-1?Q?Hans_N=E4ssla?= <Hans.Nassla@ellemtel.se>,
        Richard Bruvik <Richard.Bruvik@uab.ericsson.se>,
        =?ISO-8859-1?Q?Niklas_H=F6glund?= <uabnihg@uab.ericsson.se>,
        Loita Jahnson <Loita.Jahnson@uab.ericsson.se>,
        =?ISO-8859-1?Q?Bo_S=F6derberg?= <Bo.Soderberg@uab.ericsson.se>,
        Rickard Nilsson <rickard.nilsson@uab.ericsson.se>,
        =?ISO-8859-1?Q?Leif_Bj=F6rklund?= <Leif.Bjorklund@lmf.ericsson.se>
Subject: Ellemtel SIP server closing down
Message-ID: <4227897806.944825735@vox.pcs.ellemtel.net>
Originator-Info: login-id=eubrafo; server=mail.pcs.ellemtel.net
X-Mailer: Mulberry (Win32) [1.4.5, s/n U-300918]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Hi all,

the Ellemtel public redirect server at sip.pcs.ellemtel.net:5060 (and
the VoIP autoresponder at sip:Robot@pcs.ellemtel.net) will be closed
down today. Thanks to all who tried it out and in some cases provided
valuable feedback. Thanks also to Henning Schulzrinne for the pointer
(at <http://www.cs.columbia.edu/~hgs/sip/servers.html>, needs updating
now).

We hope to put up a similar service hosted by Ericsson
(<www.ericsson.com>) later on.

Rabbe Fogelholm
Ericsson Network Core Products
http://hem.fyristorg.com/rabbe.fogelholm




From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 10 09:00:03 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA04499
	for <sip-archive@odin.ietf.org>; Fri, 10 Dec 1999 09:00:03 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4A67752E0; Fri, 10 Dec 1999 08:57:24 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id B51E152E2; Fri, 10 Dec 1999 08:57:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 1A9A252E0
	for <sip@lists.research.bell-labs.com>; Fri, 10 Dec 1999 08:57:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 10 08:56:13 EST 1999
Received: from omzrelay03.mcit.com ([199.249.19.245]) by dusty; Fri Dec 10 08:54:43 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-29 #38418)
 id <0FMJ00F012PMJI@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Fri, 10 Dec 1999 13:56:11 +0000 (GMT)
Received: from omzrelay.mcit.com ([166.37.204.49])
 by firewall.mcit.com (PMDF V5.2-29 #38418)
 with ESMTP id <0FMJ00EG82PMI7@firewall.mcit.com>; Fri,
 10 Dec 1999 13:56:10 +0000 (GMT)
Received: from omzexch006.mcit.com (OMZEXCH006.mcit.com [166.37.194.37])
 by omzrelay.mcit.com (8.8.7/) with ESMTP	id NAA22902; Fri,
 10 Dec 1999 13:56:09 +0000 (GMT)
Received: by omzexch006 with Internet Mail Service (5.5.2571.0)
 id <YGNP0XCA>; Fri, 10 Dec 1999 13:56:09 +0000
Content-return: allowed
Date: Fri, 10 Dec 1999 13:56:07 +0000
From: "Vakil, Mohammad (c)" <Mohammad.Vakil@wcom.com>
Subject: RE: question about sip grammar
To: sip@lists.research.bell-labs.com,
        Taji Rachid <Rachid.Taji@srit.siemens.fr>
Message-id: <6F106FFAB7D1D211A25C0000F80924D202936AAA@omzexch010.mcit.com>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2571.0)
Content-type: MULTIPART/ALTERNATIVE;
 BOUNDARY="Boundary_(ID_MRuCAmYYRN/J4ZfZtA8Glw)"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

--Boundary_(ID_MRuCAmYYRN/J4ZfZtA8Glw)
Content-type: text/plain; charset="iso-8859-1"

Yes, and I think it goes back to RFC822. It's Header requirement, that's how
you know that it's end of headers. It is MUST. An empty line (CRLF with
nothing preceding) terminates SIP headers (sip message) even if there's no
body.

Mohammad Vakil


	----------
	From:  Taji Rachid [SMTP:Rachid.Taji@srit.siemens.fr]
	Sent:  Friday, December 10, 1999 1:45 AM
	To:  sip@lists.research.bell-labs.com
	Subject:  question about sip grammar

	must I put a "\r\n" (CRLF) after sip part of sip message even if
there is no
	message body.

	Thanks.

	Rachid.

	

--Boundary_(ID_MRuCAmYYRN/J4ZfZtA8Glw)
Content-type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2569.0">
<TITLE>RE: question about sip grammar</TITLE>
</HEAD>
<BODY>

<P><FONT SIZE=3D2 FACE=3D"Arial">Yes, and I think it goes back to =
RFC822. It's Header requirement, that's how you know that it's end of =
headers. It is MUST. An empty line (CRLF with nothing preceding) =
terminates SIP headers (sip message) even if there's no =
body.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Mohammad Vakil</FONT>
</P>
<BR>
<UL>
<P><A NAME=3D"_MailData"><FONT SIZE=3D2 =
FACE=3D"Arial">----------</FONT></A>
<BR><B><FONT SIZE=3D2 FACE=3D"Arial">From:&nbsp; Taji Rachid =
[SMTP:Rachid.Taji@srit.siemens.fr]</FONT></B>
<BR><FONT SIZE=3D2 FACE=3D"Arial">Sent:&nbsp; Friday, December 10, 1999 =
1:45 AM</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Arial">To:&nbsp; =
sip@lists.research.bell-labs.com</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Arial">Subject:&nbsp; question about sip =
grammar</FONT><B></B><B></B>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">must I put a &quot;\r\n&quot; =
(CRLF) after sip part of sip message even if there is no</FONT>
<BR><FONT SIZE=3D2 FACE=3D"Courier New">message body.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">Thanks.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">Rachid.</FONT>
</P>

<P>
</P>
</UL>
</BODY>
</HTML>

--Boundary_(ID_MRuCAmYYRN/J4ZfZtA8Glw)--



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 10 09:45:54 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA23881
	for <sip-archive@odin.ietf.org>; Fri, 10 Dec 1999 09:45:53 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id E0D6352E2; Fri, 10 Dec 1999 09:43:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4F62852E3; Fri, 10 Dec 1999 09:43:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id D6E9452E2
	for <sip@lists.research.bell-labs.com>; Fri, 10 Dec 1999 09:43:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 10 09:41:37 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 10 09:40:07 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhszq16094;
	Fri, 10 Dec 1999 14:39:15 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id JAA14779;
	Fri, 10 Dec 1999 09:41:28 -0500 (EST)
Message-ID: <3851124C.D78C30D@dynamicsoft.com>
Date: Fri, 10 Dec 1999 09:46:36 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: "Vakil, Mohammad (c)" <Mohammad.Vakil@wcom.com>
Cc: sip@lists.research.bell-labs.com,
        Taji Rachid <Rachid.Taji@srit.siemens.fr>
Subject: Re: question about sip grammar
References: <6F106FFAB7D1D211A25C0000F80924D202936AAA@omzexch010.mcit.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Yes, thats right. There MUST be an empty line even without a body. From
the BNF in section 4:

> The Request message format is shown below:
> 
> 
> 
>         Request  =  Request-Line       ;  Section 4.1
>                     *( general-header
>                     | request-header
>                     | entity-header )
>                     CRLF
>                     [ message-body ]   ;  Section 8

Note that CRLF is not mandatory, and is present even if there is no
message body.

-Jonathan R.

> "Vakil, Mohammad (c)" wrote:
> 
> Yes, and I think it goes back to RFC822. It's Header requirement,
> that's how you know that it's end of headers. It is MUST. An empty
> line (CRLF with nothing preceding) terminates SIP headers (sip
> message) even if there's no body.
> 
> Mohammad Vakil
> 
>      ----------
>      From:  Taji Rachid [SMTP:Rachid.Taji@srit.siemens.fr]
>      Sent:  Friday, December 10, 1999 1:45 AM
>      To:  sip@lists.research.bell-labs.com
>      Subject:  question about sip grammar
> 
>      must I put a "\r\n" (CRLF) after sip part of sip message even if
>      there is no
>      message body.
> 
>      Thanks.
> 
>      Rachid.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 10 10:01:50 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA24437
	for <sip-archive@odin.ietf.org>; Fri, 10 Dec 1999 10:01:49 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id F013052DF; Fri, 10 Dec 1999 09:59:24 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6900452E4; Fri, 10 Dec 1999 09:59:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id D07FF52DF
	for <sip@lists.research.bell-labs.com>; Fri, 10 Dec 1999 09:59:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 10 09:58:54 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 10 09:57:24 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhszr00132;
	Fri, 10 Dec 1999 14:56:33 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id JAA14808;
	Fri, 10 Dec 1999 09:58:46 -0500 (EST)
Message-ID: <3851165A.A9FA8CB@dynamicsoft.com>
Date: Fri, 10 Dec 1999 10:03:54 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: "Vakil, Mohammad (c)" <Mohammad.Vakil@wcom.com>,
        sip@lists.research.bell-labs.com,
        Taji Rachid <Rachid.Taji@srit.siemens.fr>
Subject: Re: question about sip grammar
References: <6F106FFAB7D1D211A25C0000F80924D202936AAA@omzexch010.mcit.com> <3851124C.D78C30D@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Oops! Thanks to Henning for noting that my email is inconsistent:

Jonathan Rosenberg wrote:
> 
> Yes, thats right. There MUST be an empty line even without a body. From
> the BNF in section 4:
> 
> > The Request message format is shown below:
> >
> >
> >
> >         Request  =  Request-Line       ;  Section 4.1
> >                     *( general-header
> >                     | request-header
> >                     | entity-header )
> >                     CRLF
> >                     [ message-body ]   ;  Section 8
> 
> Note that CRLF is not mandatory, and is present even if there is no
                    ^^^
                    strike this word  
                   
> message body.
> 
> -Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 10 11:11:04 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA26116
	for <sip-archive@odin.ietf.org>; Fri, 10 Dec 1999 11:11:03 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 39F5052E3; Fri, 10 Dec 1999 11:06:14 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 94FBD52E5; Fri, 10 Dec 1999 11:06:13 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 8607652D5
	for <sip@lists.research.bell-labs.com>; Thu,  9 Dec 1999 17:17:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec  9 17:16:24 EST 1999
Received: from smtprtp.ntcom.nortel.net ([137.118.22.15]) by dusty; Thu Dec  9 17:14:52 EST 1999
Received: from zrtpd00y.us.nortel.com (actually 47.140.224.109) 
          by smtprtp.ntcom.nortel.net; Thu, 9 Dec 1999 17:02:29 -0500
Received: by zrtpd00y.us.nortel.com with Internet Mail Service (5.5.2448.0) 
          id <YCVJ9GMJ>; Thu, 9 Dec 1999 17:02:29 -0500
Message-ID: <89866A7EC9C0D1119C950000F8BCC2820157C018@zrtpd00n.us.nortel.com>
From: "John Mainwaring" <crm312a@nortelnetworks.com>
To: "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>,
        "Mark D. Foster" <mark.foster@npac.com>
Cc: iptel@lists.research.bell-labs.com, "'James Yu'" <james.yu@neustar.com>,
        sip@lists.research.bell-labs.com
Subject: RE: TRIP
Date: Thu, 9 Dec 1999 17:02:09 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: multipart/alternative;
              boundary="----_=_NextPart_001_01BF4291.155B5E06"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01BF4291.155B5E06
Content-Type: text/plain;
	charset="windows-1252"



|-----Original Message-----
|From: Jonathan Rosenberg [mailto:jdrosen@dynamicsoft.com]
|
|Mark Foster wrote:
|> In the US and Canada, the key to this was the N-1 trigger 
|placement policy.  This was simply a guideline on which networks
|> should be prepared to dip calls placed to which areas in 
|order to not force calls to be re-routed at the donor network
|> (termination routing).  Key to having flexibility on where 
|triggers are placed, resulting in NPDB queries, is having a form of
|> post-query signaling that makes the query results available 
|to all downstream networks.
|
|I'm not really sure that the N-1 concept works that well in an IP
|environment:

I thinks you're right, and what follows is that a concept that does work
will have to be found.

|1. If you look at DNS as a similar service to LNP on the IP side, the
|originating host does a name to address translation right away. This
|happens even if the name thats being translated is "far away". This
|avoids triangle routing, as has been discussed.
|
|2. The interconnection of SIP servers and providers within the IP world
|is not that rigid. I'm not sure how a SIP proxy would indeed determine
|that it is the N-1th server in the chain.

It isn't really the n-1 server that has to do the NP query, it's the n-1
network, typically an IEC for calls originating ouside a zone of
portability.  The IEC can do the query anywhere in their network that makes
sense.

A server doesn't know it is the n-1th server in any arbitrary chain.  At
most, it knows that it is aware of the portability status of some numbers
and not others.  You have to make sure that you don't try to route directly
to numbers whose portability status you do not know; you should route
through a transit server that does know, or query a database that will give
you the portability status.

|In any case, determination of where the NPDB query is done is something
|I don't think is within the scope of iptel to determine. All we need to
|figure out is what kind of numbers are distributed in TRIP. Near as I
|can tell, since LRNs still refer to the prefix of numbers served by a
|switch, doing what we were doing all along works just fine. 

I agree.  If you have done an NP query, you should use the LRN to query the
TRIP and the result should give you the right proxy.  The LRN is the
surrogate Directory Number for routing purposes.

However, the question of where the NP query can/should be done certainly
affects the overall architecture that TRIP has to fit into.  I think the
discussion below points in a workable direction.
 
|> The key data elements in ANSI ISUP are: the LNP-query-done 
|indicator (bit in the FCI); placing a routing number returned
|> from the NPDB in the CdPN (LRN or whatever), and moving the 
|original dialed number to a GAP.  Subsequent call routing is
|> done on the routing number, while not loosing the dialed 
|portable subscriber number.  Given the need for SIP to interoperate
|> with ANSI ISUP, there should be some consideration of 
|implementing these semantics.
|>  
|> If SIP captured these fields, so as to provide a post-dip 
|form of downstream signaling, and TRIP were designed to build route
|> tables based on administratively assigned number ranges 
|(which, by definition would make calls to routing numbers [LRN]
|> routable) , and enum did not require DNS queries to be 
|answered by donor networks, then the existing regulatory
|> requirements for LNP could be met.
|
|First off, SIP has two fields that identify the destination party. The
|To field represents the original number that the caller called, and the
|request URI represents the address translated at each hop. Thus, the To
|field carries the original dialed number, and the request URI would
|carrying the routing number. Now, do we need to somehow indicate that
|the LNP dip has been done? I'm still unsure about that. I believe
|Henning had suggested that the use of a sip URL (as opposed to a tel
|URL) in the request URI would effectively be an indicator of such. That
|aside, I think there is a possible confusion if one were to assume an
|LRN looked like a normal SIP URL:
|
|INVITE sip:1212344 SIP/2.0
|To: sip:14081234567
|
|The problem is related to past discussions on the SIP mailing list
|regarding overlap dialing. A terminating gateway would look at
|sip:1212344, and know how to route it, but might not know whether this
|was a dialed number with more digits coming, or an LRN. Does it matter?
|Not being an ISUP expert, I'm not sure. If it does matter, something
|like user=lrn within the SIP URL would fix that.

user=lrn is almost right.  If you have queried a portable number and found
that it is not ported, then the DN has the same status as an LRN would have
if the number were ported (i.e. it should be treated as authoritative for
routing).  user=np-queried might be closer to the mark.

It's also necessary to define what the TRIP should do differently depending
on whether the np-queried indication is present.  I must admit I came into
this discussion mainly because I have worked on LNP.  I assume the objective
is not to route unqueried calls to the donor proxy.  I have noted that
originator query may not be practical for nationwide calling and that donor
proxy is too late unless you're prepared to consider RTP.  One answer might
be for the TRIP to provide a response on unqueried numbers that routes to an
intermediate server that does know how to do NP queries for the destination
DN.  No doubt there are other possibilities.  I'm curious to know which
forum would regard this problem as being in scope.

|But anyway, thats also not a problem for iptel, although I've cc'd the
|sip list on this message.
|
|-Jonathan R.
|
|-- 
|Jonathan D. Rosenberg                       200 Executive Drive
|Chief Scientist                             Suite 120 
|dynamicsoft                                 West Orange, NJ 07052
|jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
|http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
|http://www.dynamicsoft.com
|

------_=_NextPart_001_01BF4291.155B5E06
Content-Type: text/html;
	charset="windows-1252"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dwindows-1252">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
5.5.2448.0">
<TITLE>RE: TRIP</TITLE>
</HEAD>
<BODY>
<BR>
<BR>

<P><FONT SIZE=3D2>|-----Original Message-----</FONT>
<BR><FONT SIZE=3D2>|From: Jonathan Rosenberg [<A =
HREF=3D"mailto:jdrosen@dynamicsoft.com">mailto:jdrosen@dynamicsoft.com</=
A>]</FONT>
<BR><FONT SIZE=3D2>|</FONT>
<BR><FONT SIZE=3D2>|Mark Foster wrote:</FONT>
<BR><FONT SIZE=3D2>|&gt; In the US and Canada, the key to this was the =
N-1 trigger </FONT>
<BR><FONT SIZE=3D2>|placement policy.&nbsp; This was simply a guideline =
on which networks</FONT>
<BR><FONT SIZE=3D2>|&gt; should be prepared to dip calls placed to =
which areas in </FONT>
<BR><FONT SIZE=3D2>|order to not force calls to be re-routed at the =
donor network</FONT>
<BR><FONT SIZE=3D2>|&gt; (termination routing).&nbsp; Key to having =
flexibility on where </FONT>
<BR><FONT SIZE=3D2>|triggers are placed, resulting in NPDB queries, is =
having a form of</FONT>
<BR><FONT SIZE=3D2>|&gt; post-query signaling that makes the query =
results available </FONT>
<BR><FONT SIZE=3D2>|to all downstream networks.</FONT>
<BR><FONT SIZE=3D2>|</FONT>
<BR><FONT SIZE=3D2>|I'm not really sure that the N-1 concept works that =
well in an IP</FONT>
<BR><FONT SIZE=3D2>|environment:</FONT>
</P>

<P><FONT SIZE=3D2>I thinks you're right, and what follows is that a =
concept that does work will have to be found.</FONT>
</P>

<P><FONT SIZE=3D2>|1. If you look at DNS as a similar service to LNP on =
the IP side, the</FONT>
<BR><FONT SIZE=3D2>|originating host does a name to address translation =
right away. This</FONT>
<BR><FONT SIZE=3D2>|happens even if the name thats being translated is =
&quot;far away&quot;. This</FONT>
<BR><FONT SIZE=3D2>|avoids triangle routing, as has been =
discussed.</FONT>
<BR><FONT SIZE=3D2>|</FONT>
<BR><FONT SIZE=3D2>|2. The interconnection of SIP servers and providers =
within the IP world</FONT>
<BR><FONT SIZE=3D2>|is not that rigid. I'm not sure how a SIP proxy =
would indeed determine</FONT>
<BR><FONT SIZE=3D2>|that it is the N-1th server in the chain.</FONT>
</P>

<P><FONT SIZE=3D2>It isn't really the n-1 server that has to do the NP =
query, it's the n-1 network, typically an IEC for calls originating =
ouside a zone of portability.&nbsp; The IEC can do the query anywhere =
in their network that makes sense.</FONT></P>

<P><FONT SIZE=3D2>A server doesn't know it is the n-1th server in any =
arbitrary chain.&nbsp; At most, it knows that it is aware of the =
portability status of some numbers and not others.&nbsp; You have to =
make sure that you don't try to route directly to numbers whose =
portability status you do not know; you should route through a transit =
server that does know, or query a database that will give you the =
portability status.</FONT></P>

<P><FONT SIZE=3D2>|In any case, determination of where the NPDB query =
is done is something</FONT>
<BR><FONT SIZE=3D2>|I don't think is within the scope of iptel to =
determine. All we need to</FONT>
<BR><FONT SIZE=3D2>|figure out is what kind of numbers are distributed =
in TRIP. Near as I</FONT>
<BR><FONT SIZE=3D2>|can tell, since LRNs still refer to the prefix of =
numbers served by a</FONT>
<BR><FONT SIZE=3D2>|switch, doing what we were doing all along works =
just fine. </FONT>
</P>

<P><FONT SIZE=3D2>I agree.&nbsp; If you have done an NP query, you =
should use the LRN to query the TRIP and the result should give you the =
right proxy.&nbsp; The LRN is the surrogate Directory Number for =
routing purposes.</FONT></P>

<P><FONT SIZE=3D2>However, the question of where the NP query =
can/should be done certainly affects the overall architecture that TRIP =
has to fit into.&nbsp; I think the discussion below points in a =
workable direction.</FONT></P>

<P><FONT SIZE=3D2>&nbsp;</FONT>
<BR><FONT SIZE=3D2>|&gt; The key data elements in ANSI ISUP are: the =
LNP-query-done </FONT>
<BR><FONT SIZE=3D2>|indicator (bit in the FCI); placing a routing =
number returned</FONT>
<BR><FONT SIZE=3D2>|&gt; from the NPDB in the CdPN (LRN or whatever), =
and moving the </FONT>
<BR><FONT SIZE=3D2>|original dialed number to a GAP.&nbsp; Subsequent =
call routing is</FONT>
<BR><FONT SIZE=3D2>|&gt; done on the routing number, while not loosing =
the dialed </FONT>
<BR><FONT SIZE=3D2>|portable subscriber number.&nbsp; Given the need =
for SIP to interoperate</FONT>
<BR><FONT SIZE=3D2>|&gt; with ANSI ISUP, there should be some =
consideration of </FONT>
<BR><FONT SIZE=3D2>|implementing these semantics.</FONT>
<BR><FONT SIZE=3D2>|&gt;&nbsp; </FONT>
<BR><FONT SIZE=3D2>|&gt; If SIP captured these fields, so as to provide =
a post-dip </FONT>
<BR><FONT SIZE=3D2>|form of downstream signaling, and TRIP were =
designed to build route</FONT>
<BR><FONT SIZE=3D2>|&gt; tables based on administratively assigned =
number ranges </FONT>
<BR><FONT SIZE=3D2>|(which, by definition would make calls to routing =
numbers [LRN]</FONT>
<BR><FONT SIZE=3D2>|&gt; routable) , and enum did not require DNS =
queries to be </FONT>
<BR><FONT SIZE=3D2>|answered by donor networks, then the existing =
regulatory</FONT>
<BR><FONT SIZE=3D2>|&gt; requirements for LNP could be met.</FONT>
<BR><FONT SIZE=3D2>|</FONT>
<BR><FONT SIZE=3D2>|First off, SIP has two fields that identify the =
destination party. The</FONT>
<BR><FONT SIZE=3D2>|To field represents the original number that the =
caller called, and the</FONT>
<BR><FONT SIZE=3D2>|request URI represents the address translated at =
each hop. Thus, the To</FONT>
<BR><FONT SIZE=3D2>|field carries the original dialed number, and the =
request URI would</FONT>
<BR><FONT SIZE=3D2>|carrying the routing number. Now, do we need to =
somehow indicate that</FONT>
<BR><FONT SIZE=3D2>|the LNP dip has been done? I'm still unsure about =
that. I believe</FONT>
<BR><FONT SIZE=3D2>|Henning had suggested that the use of a sip URL (as =
opposed to a tel</FONT>
<BR><FONT SIZE=3D2>|URL) in the request URI would effectively be an =
indicator of such. That</FONT>
<BR><FONT SIZE=3D2>|aside, I think there is a possible confusion if one =
were to assume an</FONT>
<BR><FONT SIZE=3D2>|LRN looked like a normal SIP URL:</FONT>
<BR><FONT SIZE=3D2>|</FONT>
<BR><FONT SIZE=3D2>|INVITE sip:1212344 SIP/2.0</FONT>
<BR><FONT SIZE=3D2>|To: sip:14081234567</FONT>
<BR><FONT SIZE=3D2>|</FONT>
<BR><FONT SIZE=3D2>|The problem is related to past discussions on the =
SIP mailing list</FONT>
<BR><FONT SIZE=3D2>|regarding overlap dialing. A terminating gateway =
would look at</FONT>
<BR><FONT SIZE=3D2>|sip:1212344, and know how to route it, but might =
not know whether this</FONT>
<BR><FONT SIZE=3D2>|was a dialed number with more digits coming, or an =
LRN. Does it matter?</FONT>
<BR><FONT SIZE=3D2>|Not being an ISUP expert, I'm not sure. If it does =
matter, something</FONT>
<BR><FONT SIZE=3D2>|like user=3Dlrn within the SIP URL would fix =
that.</FONT>
</P>

<P><FONT SIZE=3D2>user=3Dlrn is almost right.&nbsp; If you have queried =
a portable number and found that it is not ported, then the DN has the =
same status as an LRN would have if the number were ported (i.e. it =
should be treated as authoritative for routing).&nbsp; =
user=3Dnp-queried might be closer to the mark.</FONT></P>

<P><FONT SIZE=3D2>It's also necessary to define what the TRIP should do =
differently depending on whether the np-queried indication is =
present.&nbsp; I must admit I came into this discussion mainly because =
I have worked on LNP.&nbsp; I assume the objective is not to route =
unqueried calls to the donor proxy.&nbsp; I have noted that originator =
query may not be practical for nationwide calling and that donor proxy =
is too late unless you're prepared to consider RTP.&nbsp; One answer =
might be for the TRIP to provide a response on unqueried numbers that =
routes to an intermediate server that does know how to do NP queries =
for the destination DN.&nbsp; No doubt there are other =
possibilities.&nbsp; I'm curious to know which forum would regard this =
problem as being in scope.</FONT></P>

<P><FONT SIZE=3D2>|But anyway, thats also not a problem for iptel, =
although I've cc'd the</FONT>
<BR><FONT SIZE=3D2>|sip list on this message.</FONT>
<BR><FONT SIZE=3D2>|</FONT>
<BR><FONT SIZE=3D2>|-Jonathan R.</FONT>
<BR><FONT SIZE=3D2>|</FONT>
<BR><FONT SIZE=3D2>|-- </FONT>
<BR><FONT SIZE=3D2>|Jonathan D. =
Rosenberg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
200 Executive Drive</FONT>
<BR><FONT SIZE=3D2>|Chief =
Scientist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Suite 120 </FONT>
<BR><FONT =
SIZE=3D2>|dynamicsoft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
West Orange, NJ 07052</FONT>
<BR><FONT =
SIZE=3D2>|jdrosen@dynamicsoft.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp; FAX:&nbsp;&nbsp; (732) 741-4778</FONT>
<BR><FONT SIZE=3D2>|<A HREF=3D"http://www.cs.columbia.edu/~jdrosen" =
TARGET=3D"_blank">http://www.cs.columbia.edu/~jdrosen</A>&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PHONE: (732) 741-7244</FONT>
<BR><FONT SIZE=3D2>|<A HREF=3D"http://www.dynamicsoft.com" =
TARGET=3D"_blank">http://www.dynamicsoft.com</A></FONT>
<BR><FONT SIZE=3D2>|</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01BF4291.155B5E06--



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 10 11:20:36 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA26388
	for <sip-archive@odin.ietf.org>; Fri, 10 Dec 1999 11:20:36 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id B752252E6; Fri, 10 Dec 1999 11:06:56 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3163552EC; Fri, 10 Dec 1999 11:06:56 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 1EE5152DE
	for <sip@lists.research.bell-labs.com>; Thu,  9 Dec 1999 18:13:07 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec  9 18:12:32 EST 1999
Received: from idalee.loudoun.com ([208.232.169.21]) by dusty; Thu Dec  9 18:11:01 EST 1999
Received: from kailasa (sterling2-66.cybercable.com)
 by idalee.loudoun.com (Sun Internet Mail Server sims.3.5.1998.11.13.11.10)
 with SMTP id <0FMH00959XRLIA@idalee.loudoun.com>; Thu,
 9 Dec 1999 18:11:50 -0500 (EST)
Date: Thu, 09 Dec 1999 17:36:40 -0500
From: "Mark D. Foster" <mfoster@mdfassoc.com>
Subject: RE: TRIP
In-reply-to: <384F4720.358162F3@dynamicsoft.com>
To: "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>
Cc: "'John Mainwaring'" <crm312a@nortelnetworks.com>,
        iptel@lists.research.bell-labs.com,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com
Message-id: <000b01bf429a$e8c73770$0864a8c0@loudoun.com>
MIME-version: 1.0
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7bit
Importance: Normal
X-MSMail-Priority: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2314.1300
X-Priority: 3 (Normal)
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Jonathan Rosenberg wrote:
>
> I'm not really sure that the N-1 concept works that well in an IP
> environment:
>

Totally agree.  N-1 is relevant as an example of the need for flexibility on
where NPDB dips are done.  By varying trigger (dip) placement, one can
implement a wide range of call routing scenarios.  Again, key to trigger
flexibility is a positive query-done indicator so any downstream network
element will behave accordingly.

> 1. If you look at DNS as a similar service to LNP on the IP side, the
> originating host does a name to address translation right away. This
> happens even if the name thats being translated is "far away". This
> avoids triangle routing, as has been discussed.
>

Source routing is the most efficient, but at the expense of having a global
DB mapping service available to originating networks.

N-1 was used in the US to allow local exchange providers to only worry about
hosting that local area's NPDB, because if the call is long-distance it's
expected to be dipped by the IXC.  Frankly, this is all that N-1 was all
about, was relieving the RBOCs of the need to host the entire US NPDB, given
that for regulatory reasons their wireline networks are still LATA-specific.

> 2. The interconnection of SIP servers and providers within
> the IP world
> is not that rigid. I'm not sure how a SIP proxy would indeed determine
> that it is the N-1th server in the chain.
>

Even in the PSTN, a network has no way of knowing they are N-1 prior to
doing a dip.  However, as a heuristic, RBOC switches only load LNP triggers
to dip calls to number prefixes in the same LATA.  And, IXC switches are
expected to dip any non-dipped calls, hence the importance of a positive
query-done indicator.

There could be applications in the IP arena, for example a purely local ITSP
could opt to only dip calls in the NPDB via enum for the local area they
serve, and rely on a downstream transport network to dip everything else.

> In any case, determination of where the NPDB query is done is
> something
> I don't think is within the scope of iptel to determine. All
> we need to
> figure out is what kind of numbers are distributed in TRIP. Near as I
> can tell, since LRNs still refer to the prefix of numbers served by a
> switch, doing what we were doing all along works just fine.
>

Agree.  I think both TRIP's and SIP's role should be to provide the needed
flexibility to allow NPDB queries to occur wherever in the call path
business and regulatory decisions dictate.

>
> First off, SIP has two fields that identify the destination party. The
> To field represents the original number that the caller
> called, and the
> request URI represents the address translated at each hop.
> Thus, the To
> field carries the original dialed number, and the request URI would
> carrying the routing number. Now, do we need to somehow indicate that
> the LNP dip has been done? I'm still unsure about that. I believe
> Henning had suggested that the use of a sip URL (as opposed to a tel
> URL) in the request URI would effectively be an indicator of
> such. That
> aside, I think there is a possible confusion if one were to assume an
> LRN looked like a normal SIP URL:
>
> INVITE sip:1212344 SIP/2.0
> To: sip:14081234567
>
> The problem is related to past discussions on the SIP mailing list
> regarding overlap dialing. A terminating gateway would look at
> sip:1212344, and know how to route it, but might not know whether this
> was a dialed number with more digits coming, or an LRN. Does
> it matter?
> Not being an ISUP expert, I'm not sure. If it does matter, something
> like user=lrn within the SIP URL would fix that.
>

I think it does matter, if for no other reason than to ensure complete
interoperation with ISUP, which could theoretically occur anywhere in the
call path.  For example, if a dip is done but the number is not ported, then
the query-done indicator is still set to suppress downstream triggers even
though the CdPN is left alone.   As long as there's a way to recover each of
the three LNP fields in SIP (query-done, dialed number, and routing number),
gateways should be able to do their thing (e.g. interoperate with ISUP,
TRIP, or NPDB).

> But anyway, thats also not a problem for iptel, although I've cc'd the
> sip list on this message.
>

Yup.

-------------------------------------------------------------
Mark D. Foster                  | EMAIL: mark.foster@neustar.com
CTO                             | NeuStar, Inc.
TEL: +1 202 533 2800/2702       | FAX: +1 202 533 2975
1120 Vermont Ave NW, Suite 550  | Washington, DC 20005




From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 11 03:12:00 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id DAA23287
	for <sip-archive@odin.ietf.org>; Sat, 11 Dec 1999 03:11:59 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 2F99A52E4; Sat, 11 Dec 1999 03:09:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 9F57752E5; Sat, 11 Dec 1999 03:09:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 63DA852E4
	for <sip@lists.research.bell-labs.com>; Sat, 11 Dec 1999 03:09:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Sat Dec 11 03:07:16 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Sat Dec 11 03:05:46 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtci15905
	for <sip@lists.research.bell-labs.com>; Sat, 11 Dec 1999 08:05:03 GMT
Received: from dynamicsoft.com (1Cust159.tnt1.freehold.nj.da.uu.net [63.17.113.159])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id DAA17661
	for <sip@lists.research.bell-labs.com>; Sat, 11 Dec 1999 03:07:12 -0500 (EST)
Message-ID: <38520768.468FAEE9@dynamicsoft.com>
Date: Sat, 11 Dec 1999 03:12:24 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: clarification: parameters and brackets
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Folks,

An issue that keeps arising (and came up during the bakeoff), is whether
parameters in the From, To, and Contact header are URI parameters or
header parameters. To clarify, the rule is simple:

1. If there are angle brackets, the parameters inside the angle brackets
are URI parameters. Parameters outside the angle brackets are header
parameters.

2. If there are no angle brackets, all the parameters are HEADER
parameters.


For example:

From: J. Rosenberg <sip:jdrosen@dynamicsoft.com;foo=yes>;bar=no

  foo=yes is a URI parameter
  bar=no  is a From parameter

Contact: sip:jdrosen@dynamicsoft.com;param=value

  param=value is a Contact parameter.


So, the rules for generating these things are also simple:

1. If the URI has parameters, you must put the URI, and its parameters,
inside angle brackets. Header parameters go outside the angle brackets.

2. If there are no URI parameters, and there is no display name, you
don't need the angle brackets. Any parameters are header parameters.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 11 11:01:49 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA27232
	for <sip-archive@odin.ietf.org>; Sat, 11 Dec 1999 11:01:49 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 5157852E5; Sat, 11 Dec 1999 10:59:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id BFB5852E8; Sat, 11 Dec 1999 10:59:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 1B82E52E5
	for <sip@lists.research.bell-labs.com>; Sat, 11 Dec 1999 10:59:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sat Dec 11 10:57:36 EST 1999
Received: from cs.columbia.edu ([128.59.16.20]) by dusty; Sat Dec 11 10:56:06 EST 1999
Received: from cs.columbia.edu (bart.cs.columbia.edu [128.59.19.191])
	by cs.columbia.edu (8.9.1/8.9.1) with ESMTP id KAA28316;
	Sat, 11 Dec 1999 10:57:33 -0500 (EST)
Message-ID: <3852746C.C8E0A4FF@cs.columbia.edu>
Date: Sat, 11 Dec 1999 10:57:32 -0500
From: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Organization: Columbia University, Dept. of Computer Science
X-Mailer: Mozilla 4.7 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: clarification: parameters and brackets
References: <38520768.468FAEE9@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Added in Section 6.6:

\begin{changebar}
The \header{Contact}, \header{From} and \header{To} header fields
contains a URL.  If the URL contains a comma, question mark or
semicolon,
the URL {\MUST} be enclosed in angle brackets ($<$ and $>$).  Any URL
parameters are contained within these brackets.  If the URL is not
enclosed in angle brackets, any semicolon-delimited parameters are
header-parameters, not URL parameters.
\end{changebar}

-- 
Henning Schulzrinne   http://www.cs.columbia.edu/~hgs



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 11 19:39:53 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id TAA00341
	for <sip-archive@odin.ietf.org>; Sat, 11 Dec 1999 19:39:52 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D91C052E8; Sat, 11 Dec 1999 19:37:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 5498D52EA; Sat, 11 Dec 1999 19:37:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id D145F52E8
	for <sip@lists.research.bell-labs.com>; Sat, 11 Dec 1999 19:37:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sat Dec 11 19:36:20 EST 1999
Received: from www.obsoft.com ([209.128.67.121]) by dusty; Sat Dec 11 19:34:50 EST 1999
Received: from obsoft.com (sardana@localhost [127.0.0.1]) by www.obsoft.com (8.6.12/8.6.9) with ESMTP id SAA00280; Sat, 11 Dec 1999 18:31:36 -0600
Message-ID: <3852ECE6.C5B8AD63@obsoft.com>
Date: Sat, 11 Dec 1999 18:31:34 -0600
From: Bobby Sardana <sardana@obsoft.com>
Organization: ObjectSoftware, Inc.
X-Mailer: Mozilla 4.04 [en] (X11; I; Linux 2.0.33 i586)
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Cc: Henning Schulzrinne <schulzrinne@cs.columbia.edu>,
        Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Subject: Protocol grammar & future direction!
References: <38520768.468FAEE9@dynamicsoft.com> <3852746C.C8E0A4FF@cs.columbia.edu>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Greetings:

Recently, there has been much debate over the SIP grammar and its
variance with what people are implementing. With respect to the SIP
grammar I would like to find out the following:

a. If the SIP protocol (viz., the grammar) can be converted to an
XML DTD then it would become "trivial" for it to parse and without any
variance (fixed DTD).
b. The "map" for headers to "tags" should be straight forward.
c. I am not sure about the "size" of the SIP XML message, but I am
guessing that its impact would be minimal, as to what is being acheived.

It seems that every "new" protocol being developed comes with its own
grammar and its variance. This leads to "proprietary" implementations
because "variance" with grammar is mostly an
implementation/interpretation issue rather than a "concrete" definition.
However, this can be eliminated by picking up a "standard" way of
"defining" essentially (key/value) pairs.

So what I am proposing is that SIP grammar and its implementors would
benefit if the SIP messages can be defined in an XML format since
parsing becomes easy and without any variance. It is understandable that
the SIP designers went with RFC based "text messaging format" but I was
wondering if they considered the XML option. If they did, I would like
to know their findings.

Thanks.

Bobby Sardana.
sardana@obsoft.com








From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 00:06:01 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA16564
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 00:06:01 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 70ED852BB; Mon, 13 Dec 1999 00:03:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E07F852EB; Mon, 13 Dec 1999 00:03:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 20FA452BB
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 00:03:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 00:01:43 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Mon Dec 13 00:00:11 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtjf13770;
	Mon, 13 Dec 1999 04:59:37 GMT
Received: from dynamicsoft.com (1Cust127.tnt2.freehold.nj.da.uu.net [63.17.114.127])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id AAA18055;
	Mon, 13 Dec 1999 00:01:39 -0500 (EST)
Message-ID: <38547EF6.DCE80CDD@dynamicsoft.com>
Date: Mon, 13 Dec 1999 00:07:02 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Bobby Sardana <sardana@obsoft.com>
Cc: sip@lists.research.bell-labs.com,
        Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Subject: Re: Protocol grammar & future direction!
References: <38520768.468FAEE9@dynamicsoft.com> <3852746C.C8E0A4FF@cs.columbia.edu> <3852ECE6.C5B8AD63@obsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Well, its just plain waaaaaaaaaay to late for something like this. A
complete BNF (which SIP has), has no variance. We've found that peoples
implementations have variance, but thats what bakeoffs are for.

-Jonathan R.

Bobby Sardana wrote:
> 
> Greetings:
> 
> Recently, there has been much debate over the SIP grammar and its
> variance with what people are implementing. With respect to the SIP
> grammar I would like to find out the following:
> 
> a. If the SIP protocol (viz., the grammar) can be converted to an
> XML DTD then it would become "trivial" for it to parse and without any
> variance (fixed DTD).
> b. The "map" for headers to "tags" should be straight forward.
> c. I am not sure about the "size" of the SIP XML message, but I am
> guessing that its impact would be minimal, as to what is being acheived.
> 
> It seems that every "new" protocol being developed comes with its own
> grammar and its variance. This leads to "proprietary" implementations
> because "variance" with grammar is mostly an
> implementation/interpretation issue rather than a "concrete" definition.
> However, this can be eliminated by picking up a "standard" way of
> "defining" essentially (key/value) pairs.
> 
> So what I am proposing is that SIP grammar and its implementors would
> benefit if the SIP messages can be defined in an XML format since
> parsing becomes easy and without any variance. It is understandable that
> the SIP designers went with RFC based "text messaging format" but I was
> wondering if they considered the XML option. If they did, I would like
> to know their findings.
> 
> Thanks.
> 
> Bobby Sardana.
> sardana@obsoft.com

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 11:31:57 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA10898
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 11:31:57 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D7AAE52EA; Mon, 13 Dec 1999 11:29:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4852952ED; Mon, 13 Dec 1999 11:29:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 554E652EA
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 11:29:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 11:27:22 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Mon Dec 13 11:25:50 EST 1999
Received: by dnspri.npac.com; id AA111052432; Mon, 13 Dec 1999 10:27:12 -0600
Received: from chi02.npac.com(208.143.39.132) by dnspri.npac.com via smap (3.2)
	id xma011087; Mon, 13 Dec 99 10:26:51 -0600
Received: by chi02.npac.com with Internet Mail Service (5.5.2232.9)
	id <YF8J1WHX>; Mon, 13 Dec 1999 10:22:47 -0600
Message-Id: <ED88182BFF78D211A4D800A0C9E9435C3BE930@dc02.npac.com>
From: James Yu <james.yu@neustar.com>
To: "'sip@lists.research.bell-labs.com'" <sip@lists.research.bell-labs.com>
Cc: "'enum@ietf.org'" <enum@ietf.org>
Subject: Nation-Specific ISUP implementations, Overlap Signaling  & Number
	 Portability Database Queries
Date: Mon, 13 Dec 1999 10:20:23 -0600
Mime-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2232.9)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

The following discussions focus on SCN-IP-SCN calls.  

There are nation-specific variatoins in ISUP implementations.  I don't know
whether this issue has been discussed (I'm new to IETF).  When we have only
a few GWs, it is fine that those GWs support many ISUP implementations.  But
when many GWs are deployed, it is not likely that every GW will support many
ISUP implementations.  Some may be used only for domestic use.  So it is
likely that an international call may need to be routed to an
"international" GW (or more than one) that interworks between two
nation-specific ISUP implementations.  To fully use the IP network, then the
"international" GW will further route the call to a "domestic" GW
(destination GW) that terminates the call into the SCN.  The call can
certainly be routed to the destination SCN but the call charge may be
higher.

This would seem to be inefficient that the user traffic must be routed
through additional GW(s).  ISUP interworking probably can be done via a pure
signaling conversion/mapping so that the user traffic can be routed directly
to the destination GW.

If we need to perform number portability queries, then a good place would be
the destination "international" GW because it is close to the destination
country and supports the destination country's Number Portability Database
(NPDB) interface.  In that case, simple ISUP interworking mentioned above
won't be sufficient.  A NPDB query also needs to be launched. The response
to the NPDB query will decide the destination GW that should terminate the
call.  

Due to number portability, the called party's serving SCN switch changes
when the called user switches to a new service provider.  Whenever that
happens, the NPDB will reflect the current new serving switch or network
information (via Location Routing Number in the North America or Routing
Prefix in the Europe), and the "destination" GW that can reach the serving
switch or network may change.  So a NPDB query is required to determine the
correct GW to terminate the call.

At ENUM, we have been discussing where to perform the NPDB queries.  The
originating GW needs to support all nation-specific NPDB interfaces if it is
to query those NPDBs.  This would be expensive.  Also there is an issue
about the encapsulated ISUP message in the SIP if originating GW's
nationa-specific ISUP message is encapsulated (may be everyone should use
ITU-T ISUP that is used between international switches for communicating
among the entities in the IP domain).  The destination GW can support
specific NPDB interface; however, it may be the wrong GW because it cannot
reach the serving switch in the SCN that serves the called party. 

Overlap signaling would make the issue more complicate.  If the call routing
decision is to route to the "international" GW, it is fine because number
portability is confined within a national domain.  That "international" GW
will then wait for additional address information and performs the NPDB
query, if required.  But if the call is to be routed directly to the
destination GW, and if the originating GW is the one to perform the NPDB,
then it has to collect all the address information before it can launch the
query.  But the issue is that the originating GW may not know it has
collected all the address digits.  

It seems that the best entity that knows that it has collected all the
digits and can perform the NPDB query would be the destination
"international" GW.
 
I have linked several issues (nation-specific ISUP implementations, number
portability, and user traffic routing efficiency) together that need to be
addressed as a whole.  There may be other issues.  It is hoped that one or
more solutions can be identified and finalized.



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 12:03:51 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA11772
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 12:03:51 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id DC19C52EB; Mon, 13 Dec 1999 12:01:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 522AB52EE; Mon, 13 Dec 1999 12:01:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 42BAC52EB
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 12:01:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Mon Dec 13 12:00:13 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Mon Dec 13 11:58:39 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id XAA02731
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 23:11:43 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256846.005D39C0 ; Mon, 13 Dec 1999 22:28:16 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: sip@lists.research.bell-labs.com
Message-ID: <65256846.005D3878.00@sampark.hss.hns.com>
Date: Mon, 13 Dec 1999 22:28:12 +0530
Subject: Zone adjustment definition in SDP
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



hi,
sorry for the SDP related question in SIP but here goes anyway:
SDP seems to have a field
z=
for zone (in lots of para texts in 2327)

However the SDP grammar (Appendix A)
does not seem to define any z=

rather, it says that a zone adj. can occur after t= field
but it doesnt start with z=
however, in the same t= grammar, they say that r= can occur which follow
the <x>=<contents> fornat of each sdp header

 time-fields =         1*( "t=" start-time space stop-time
                         *(CRLF repeat-fields) CRLF)
                         [zone-adjustments CRLF]

zone-adjustments =    time space ["-"] typed-time
                         *(space time space ["-"] typed-time)

So where does z= come in ?
Or is it that there is a z= missing in the grammar above ?

Regds
Arjun
--
Arjun Roychowdhury @ Hughes Software Systems





From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 14:41:59 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA17319
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 14:41:59 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id CEB4E52EE; Mon, 13 Dec 1999 14:39:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3F60352EF; Mon, 13 Dec 1999 14:39:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id CFABC52EE
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 14:39:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 14:37:51 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Mon Dec 13 14:36:17 EST 1999
Received: from mr3.exu.ericsson.se (mr3a.ericsson.com [198.215.127.159])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id NAA10983;
	Mon, 13 Dec 1999 13:37:27 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr3.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id NAA27058;
	Mon, 13 Dec 1999 13:37:27 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id NAA04309; Mon, 13 Dec 1999 13:37:26 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id NAA01439;
	Mon, 13 Dec 1999 13:37:25 -0600 (CST)
Message-Id: <199912131937.NAA01439@b04a24.exu.ericsson.se>
Subject: Re: Comments on draft-camarillo-mmusic-sip-isup-bcp-00.txt
To: pete@tech-know-ware.com (Pete Cordell)
Date: Mon, 13 Dec 1999 13:37:24 -0600 (CST)
Cc: schulzrinne@cs.columbia.edu, Gonzalo.Camarillo@lmf.ericsson.se,
        jdrosen@dynamicsoft.com, Adam.Roach@ericsson.com,
        bartw@nortelnetworks.com, Gonzalo.Camarillo@ericsson.com,
        sip@lists.research.bell-labs.com
In-Reply-To: <00b101bf34e9$900f2840$0200000a@tkw> from "Pete Cordell" at Nov 22, 99 12:59:32 pm
From: "Adam B. Roach" <Adam.Roach@ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>Thinking about it, my feeling is that as Jonathan originally described his
>scheme it is a bit over proactive about sending new dialled digit
>information.  Perhaps it should only send a new INVITE once it has received
>a response to a previous INVITE.  If it receives additional dialled digits
>in this time, then it just accumulates them.

The far end gateway isn't guaranteed to have enough information to
send back an INVITE response. The PSTN has no analogue to the
"Address Incomplete" message; you keep sending SAMs until the
other end says "stop."

If you get an "Address Incomplete" from the ISUP network, it's
too late -- the call has already fallen down in setup. And the
timer involved is *way* too long for a reasonable PDD anyway.

--
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 14:45:44 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA17422
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 14:45:43 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4FDFA52EF; Mon, 13 Dec 1999 14:43:24 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6E50052F0; Mon, 13 Dec 1999 14:43:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 07EF952EF
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 14:43:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 14:41:26 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Mon Dec 13 14:39:53 EST 1999
Received: from mr3.exu.ericsson.se (mr3a.ericsson.com [198.215.127.159])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id NAA12829;
	Mon, 13 Dec 1999 13:41:14 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr3.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id NAA28441;
	Mon, 13 Dec 1999 13:41:14 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id NAA04472; Mon, 13 Dec 1999 13:41:13 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id NAA01469;
	Mon, 13 Dec 1999 13:41:12 -0600 (CST)
Message-Id: <199912131941.NAA01469@b04a24.exu.ericsson.se>
Subject: Re: Comments on draft-camarillo-mmusic-sip-isup-bcp-00.txt
To: jdrosen@dynamicsoft.com (Jonathan Rosenberg)
Date: Mon, 13 Dec 1999 13:41:12 -0600 (CST)
Cc: pete@tech-know-ware.com, Gonzalo.Camarillo@lmf.ericsson.se,
        Adam.Roach@ericsson.com, bartw@nortelnetworks.com,
        Gonzalo.Camarillo@ericsson.com, sip@lists.research.bell-labs.com
In-Reply-To: <383952BF.531DDC07@dynamicsoft.com> from "Jonathan Rosenberg" at Nov 22, 99 09:27:11 am
From: "Adam B. Roach" <Adam.Roach@ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>3. wait for some longer timeout to get all the digits, effectively
>converting overlap to en-block at the ingress gateway
>4. wait for a # key

By the way, to make it crystal: I'm not proposing that 4 be used in
lieu of 3. I suggested it as an optimization. In short, I beleive that,
if anyone does 3, they should *add* 4 (THE USE OF WHICH WOULD BE PURELY
OPTIONAL FOR END USERS) to keep users from being annoyed.

--
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 15:01:44 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA17897
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 15:01:44 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 80E2E52ED; Mon, 13 Dec 1999 14:59:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id D82FA52F1; Mon, 13 Dec 1999 14:59:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 6EFD052ED
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 14:59:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Mon Dec 13 14:57:22 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Mon Dec 13 14:55:49 EST 1999
Received: from mr4.exu.ericsson.se (mr4a.ericsson.com [198.215.127.160])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id NAA20775;
	Mon, 13 Dec 1999 13:56:55 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr4.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id NAA10992;
	Mon, 13 Dec 1999 13:56:55 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id NAA05336; Mon, 13 Dec 1999 13:56:53 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id NAA01649;
	Mon, 13 Dec 1999 13:56:52 -0600 (CST)
Message-Id: <199912131956.NAA01649@b04a24.exu.ericsson.se>
Subject: Re: 183, BCP & forking
To: schroeder@tri.sbc.com (Schroeder, Tim)
Date: Mon, 13 Dec 1999 13:56:52 -0600 (CST)
Cc: jdrosen@dynamicsoft.com, Gonzalo.Camarillo@lmf.ericsson.se,
        sip@lists.research.bell-labs.com
In-Reply-To: <6C5FB3C08FCBD1118EE600805FEA9CC2025A69C0@trimail.tri.sbc.com> from "Schroeder, Tim" at Nov 22, 99 05:09:21 pm
From: "Adam B. Roach" <Adam.Roach@Ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>From: "Schroeder, Tim" <schroeder@tri.sbc.com>
>Isn't this effectively a call defect?  Someone answered a ringing phone
>(causing the 200 OK to be sent) and the caller immediately hangs up on them?
>I don't think I like that.  Especially when they get dropped in the hope
>that someone might answer the phone that isn't even ringing yet?  (Do I have
>that right?)

No; this is the situation where, for example, I call your find-me
service, and you happen to answer two devices at approximately
the same time (close enough that the CANCEL triggered by one hasn't
had time to reach the other before you answer). Assuming there are no
devices in the call capable of mixing the audio, I *have* to terminate
one of the calls.

That's the situation that was being described.

--
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 15:10:42 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA18151
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 15:10:42 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9A9EA52F2; Mon, 13 Dec 1999 15:07:35 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 0188F52F3; Mon, 13 Dec 1999 15:07:34 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id F05A352F2
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 15:07:07 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 15:05:37 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Mon Dec 13 15:04:03 EST 1999
Received: from mr3.exu.ericsson.se (mr3a.ericsson.com [198.215.127.159])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id OAA24901;
	Mon, 13 Dec 1999 14:05:25 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr3.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id OAA07409;
	Mon, 13 Dec 1999 14:05:24 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id OAA05814; Mon, 13 Dec 1999 14:05:23 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id OAA01687;
	Mon, 13 Dec 1999 14:05:22 -0600 (CST)
Message-Id: <199912132005.OAA01687@b04a24.exu.ericsson.se>
Subject: Re: Comments on draft-camarillo-mmusic-sip-isup-bcp-00.txt
To: schroeder@tri.sbc.com (Schroeder, Tim)
Date: Mon, 13 Dec 1999 14:05:22 -0600 (CST)
Cc: Gonzalo.Camarillo@lmf.ericsson.se, sip@lists.research.bell-labs.com
In-Reply-To: <6C5FB3C08FCBD1118EE600805FEA9CC2025A69C3@trimail.tri.sbc.com> from "Schroeder, Tim" at Nov 22, 99 06:20:11 pm
From: "Adam B. Roach" <Adam.Roach@Ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Tim Schroeder writes:
>Gonzalo Camarillo writes:
>> A mobile always sends 'en bloc' signalling, but a call that uses overlap
>> signalling will be able to reach a mobile... therefore, mobile provides
>> backward compatibility in that sense.
>
>> In SIP I suggest to use the same approach. We send 'en bloc' signalling,
>> but we are able to receive overlap.
>
>This sounds like the right approach to me.

It's interesting to note that people from countries that use
en-bloc signalling in the PSTN (US, Finland) seem to think this
is a viable option. Most writing in from countries which do not
(much of Europe) find this completely unacceptable.

Perhaps those of us used to dealing with en-bloc signalling are not 
being too terrbily sympathetic to users from the other camp...

--
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 15:13:14 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA18258
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 15:13:13 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id B75F952F1; Mon, 13 Dec 1999 15:07:38 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 1131D52F4; Mon, 13 Dec 1999 15:07:37 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id EC88652F1
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 15:07:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Mon Dec 13 15:06:18 EST 1999
Received: from smtprtp1.ntcom.nortel.net ([137.118.22.14]) by dusty; Mon Dec 13 15:04:44 EST 1999
Received: from zsc4c002.corpwest.baynetworks.com (actually h0295.s86b1.BayNetworks.COM) 
          by smtprtp1.ntcom.nortel.net; Mon, 13 Dec 1999 15:04:31 -0500
Received: from zbl6c008.corpeast.baynetworks.com ([132.245.205.58]) 
          by zsc4c002.corpwest.baynetworks.com 
          with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2448.0) 
          id Y5QASCWT; Mon, 13 Dec 1999 12:03:32 -0800
Received: from nortelnetworks.com (msquire-1.corpeast.baynetworks.com [132.245.252.65]) 
          by zbl6c008.corpeast.baynetworks.com 
          with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2448.0) 
          id WMJAHQ9J; Mon, 13 Dec 1999 15:03:24 -0500
Message-ID: <38555078.7FE67754@nortelnetworks.com>
Date: Mon, 13 Dec 1999 15:00:56 -0500
From: "Matt Squire" <msquire@nortelnetworks.com>
Organization: Nortel Networks
X-Mailer: Mozilla 4.7 [en] (Win95; U)
X-Accept-Language: en
MIME-Version: 1.0
To: James Yu <james.yu@neustar.com>
Cc: "'sip@lists.research.bell-labs.com'" <sip@lists.research.bell-labs.com>,
        "'enum@ietf.org'" <enum@ietf.org>
Subject: Re: [Enum] Nation-Specific ISUP implementations, Overlap Signaling & 
         Number Portability Database Queries
References: <ED88182BFF78D211A4D800A0C9E9435C3BE930@dc02.npac.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


You certainly seem to pack alot of things into this note.  An attempt to
summarize:
(a) ISUP interworking between gateways
(b) Call routing decisions based on ISUP capabilities
(c) Timing/location of portability query
(d) Complexity of originating switch performing NPDB queries due to
national variants
(e) Overlap signalling and its complexities to call signalling,
particularly international

Here's a 2-bit opinion on some of these things...

(a) ISUP interworking was discusesed for a bit in IPTEL, and it looked
like the consensus was that gateways must be ready to fall back to some
common denominator ISUP capability set if they don't support any common
ISUP variation.

(b) Right now, the call routing portion of the solution (TRIP) is not
considering ISUP variations when making call routing decisions.  It was
discussed, but the consensus appeared to be that falling to a common
international capability set was an acceptable solution.  So it looks
like ISUP variations won't impact the route the call takes to a
destination gateway.

(c) By just reading the notes, it looks like there might be consensus to
perform the portability query before initiating the call and accessing
things like call routing.

(d) I would hope that enum does not require the querier to know all of
the possible national variants to NPDB queries.  Enum should define a
common query mechanism that is independent of national variants.  The
system should be a superset of the national variants and be able to
coordinate the information across nation's boundries.  Without this, the
whole thing seems like very unhelpful.  Enum queries really have to be
international.  

(e) About a month ago there was alot of discussion on overlap signalling
in SIP.  If you haven't read the discussion, you might want to review
it.  There were several proposals on how to handle it.  I don't recall
how well the interaction between overlap signalling and LNP was
discussed, but I recall it being mentioned a few times.  I'm sure others
can provide further elaboration of those discussions.    

 

James Yu wrote:
> 
> The following discussions focus on SCN-IP-SCN calls.
> 
> There are nation-specific variatoins in ISUP implementations.  I don't know
> whether this issue has been discussed (I'm new to IETF).  When we have only
> a few GWs, it is fine that those GWs support many ISUP implementations.  But
> when many GWs are deployed, it is not likely that every GW will support many
> ISUP implementations.  Some may be used only for domestic use.  So it is
> likely that an international call may need to be routed to an
> "international" GW (or more than one) that interworks between two
> nation-specific ISUP implementations.  To fully use the IP network, then the
> "international" GW will further route the call to a "domestic" GW
> (destination GW) that terminates the call into the SCN.  The call can
> certainly be routed to the destination SCN but the call charge may be
> higher.
> 
> This would seem to be inefficient that the user traffic must be routed
> through additional GW(s).  ISUP interworking probably can be done via a pure
> signaling conversion/mapping so that the user traffic can be routed directly
> to the destination GW.
> 
> If we need to perform number portability queries, then a good place would be
> the destination "international" GW because it is close to the destination
> country and supports the destination country's Number Portability Database
> (NPDB) interface.  In that case, simple ISUP interworking mentioned above
> won't be sufficient.  A NPDB query also needs to be launched. The response
> to the NPDB query will decide the destination GW that should terminate the
> call.
> 
> Due to number portability, the called party's serving SCN switch changes
> when the called user switches to a new service provider.  Whenever that
> happens, the NPDB will reflect the current new serving switch or network
> information (via Location Routing Number in the North America or Routing
> Prefix in the Europe), and the "destination" GW that can reach the serving
> switch or network may change.  So a NPDB query is required to determine the
> correct GW to terminate the call.
> 
> At ENUM, we have been discussing where to perform the NPDB queries.  The
> originating GW needs to support all nation-specific NPDB interfaces if it is
> to query those NPDBs.  This would be expensive.  Also there is an issue
> about the encapsulated ISUP message in the SIP if originating GW's
> nationa-specific ISUP message is encapsulated (may be everyone should use
> ITU-T ISUP that is used between international switches for communicating
> among the entities in the IP domain).  The destination GW can support
> specific NPDB interface; however, it may be the wrong GW because it cannot
> reach the serving switch in the SCN that serves the called party.
> 
> Overlap signaling would make the issue more complicate.  If the call routing
> decision is to route to the "international" GW, it is fine because number
> portability is confined within a national domain.  That "international" GW
> will then wait for additional address information and performs the NPDB
> query, if required.  But if the call is to be routed directly to the
> destination GW, and if the originating GW is the one to perform the NPDB,
> then it has to collect all the address information before it can launch the
> query.  But the issue is that the originating GW may not know it has
> collected all the address digits.
> 
> It seems that the best entity that knows that it has collected all the
> digits and can perform the NPDB query would be the destination
> "international" GW.
> 
> I have linked several issues (nation-specific ISUP implementations, number
> portability, and user traffic routing efficiency) together that need to be
> addressed as a whole.  There may be other issues.  It is hoped that one or
> more solutions can be identified and finalized.
> 
> _______________________________________________
> enum mailing list
> enum@ietf.org
> http://www.ietf.org/mailman/listinfo/enum



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 15:29:02 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA18456
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 15:29:01 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D361052F4; Mon, 13 Dec 1999 15:25:34 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 47F2252F8; Mon, 13 Dec 1999 15:25:34 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 3C59652F4
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 15:25:09 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 15:23:38 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Mon Dec 13 15:22:06 EST 1999
Received: by dnspri.npac.com; id AA204746616; Mon, 13 Dec 1999 14:23:36 -0600
Received: from chi02.npac.com(208.143.39.132) by dnspri.npac.com via smap (3.2)
	id xma020462; Mon, 13 Dec 99 14:23:33 -0600
Received: by chi02.npac.com with Internet Mail Service (5.5.2232.9)
	id <YF8J1W01>; Mon, 13 Dec 1999 14:19:29 -0600
Message-Id: <ED88182BFF78D211A4D800A0C9E9435C3BE934@dc02.npac.com>
From: James Yu <james.yu@neustar.com>
To: "'Matt Squire'" <msquire@nortelnetworks.com>
Cc: "'sip@lists.research.bell-labs.com'" <sip@lists.research.bell-labs.com>,
        "'enum@ietf.org'" <enum@ietf.org>,
        "'iptel@lists.research.bell-labs.com'" <iptel@lists.research.bell-labs.com>
Subject: RE: [Enum] Nation-Specific ISUP implementations, Overlap Signalin
	g &  Number Portability Database Queries
Date: Mon, 13 Dec 1999 14:17:05 -0600
Mime-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2232.9)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Matt,

It is a good summary of the key points.  You mentioned iptel that I forgot
to cc to.  So I'm adding it to the cc list.

My point is that the WGs should address their respective agendas while
keeping those issues in mind so that the solution(s) developed by each
individual WG can all work together.

James

-----Original Message-----
From: Matt Squire [mailto:msquire@nortelnetworks.com]
Sent: Monday, December 13, 1999 3:01 PM
To: James Yu
Cc: 'sip@lists.research.bell-labs.com'; 'enum@ietf.org'
Subject: Re: [Enum] Nation-Specific ISUP implementations, Overlap
Signaling & Number Portability Database Queries



You certainly seem to pack alot of things into this note.  An attempt to
summarize:
(a) ISUP interworking between gateways
(b) Call routing decisions based on ISUP capabilities
(c) Timing/location of portability query
(d) Complexity of originating switch performing NPDB queries due to
national variants
(e) Overlap signalling and its complexities to call signalling,
particularly international

Here's a 2-bit opinion on some of these things...

(a) ISUP interworking was discusesed for a bit in IPTEL, and it looked
like the consensus was that gateways must be ready to fall back to some
common denominator ISUP capability set if they don't support any common
ISUP variation.

(b) Right now, the call routing portion of the solution (TRIP) is not
considering ISUP variations when making call routing decisions.  It was
discussed, but the consensus appeared to be that falling to a common
international capability set was an acceptable solution.  So it looks
like ISUP variations won't impact the route the call takes to a
destination gateway.

(c) By just reading the notes, it looks like there might be consensus to
perform the portability query before initiating the call and accessing
things like call routing.

(d) I would hope that enum does not require the querier to know all of
the possible national variants to NPDB queries.  Enum should define a
common query mechanism that is independent of national variants.  The
system should be a superset of the national variants and be able to
coordinate the information across nation's boundries.  Without this, the
whole thing seems like very unhelpful.  Enum queries really have to be
international.  

(e) About a month ago there was alot of discussion on overlap signalling
in SIP.  If you haven't read the discussion, you might want to review
it.  There were several proposals on how to handle it.  I don't recall
how well the interaction between overlap signalling and LNP was
discussed, but I recall it being mentioned a few times.  I'm sure others
can provide further elaboration of those discussions.    

 

James Yu wrote:
> 
> The following discussions focus on SCN-IP-SCN calls.
> 
> There are nation-specific variatoins in ISUP implementations.  I don't
know
> whether this issue has been discussed (I'm new to IETF).  When we have
only
> a few GWs, it is fine that those GWs support many ISUP implementations.
But
> when many GWs are deployed, it is not likely that every GW will support
many
> ISUP implementations.  Some may be used only for domestic use.  So it is
> likely that an international call may need to be routed to an
> "international" GW (or more than one) that interworks between two
> nation-specific ISUP implementations.  To fully use the IP network, then
the
> "international" GW will further route the call to a "domestic" GW
> (destination GW) that terminates the call into the SCN.  The call can
> certainly be routed to the destination SCN but the call charge may be
> higher.
> 
> This would seem to be inefficient that the user traffic must be routed
> through additional GW(s).  ISUP interworking probably can be done via a
pure
> signaling conversion/mapping so that the user traffic can be routed
directly
> to the destination GW.
> 
> If we need to perform number portability queries, then a good place would
be
> the destination "international" GW because it is close to the destination
> country and supports the destination country's Number Portability Database
> (NPDB) interface.  In that case, simple ISUP interworking mentioned above
> won't be sufficient.  A NPDB query also needs to be launched. The response
> to the NPDB query will decide the destination GW that should terminate the
> call.
> 
> Due to number portability, the called party's serving SCN switch changes
> when the called user switches to a new service provider.  Whenever that
> happens, the NPDB will reflect the current new serving switch or network
> information (via Location Routing Number in the North America or Routing
> Prefix in the Europe), and the "destination" GW that can reach the serving
> switch or network may change.  So a NPDB query is required to determine
the
> correct GW to terminate the call.
> 
> At ENUM, we have been discussing where to perform the NPDB queries.  The
> originating GW needs to support all nation-specific NPDB interfaces if it
is
> to query those NPDBs.  This would be expensive.  Also there is an issue
> about the encapsulated ISUP message in the SIP if originating GW's
> nationa-specific ISUP message is encapsulated (may be everyone should use
> ITU-T ISUP that is used between international switches for communicating
> among the entities in the IP domain).  The destination GW can support
> specific NPDB interface; however, it may be the wrong GW because it cannot
> reach the serving switch in the SCN that serves the called party.
> 
> Overlap signaling would make the issue more complicate.  If the call
routing
> decision is to route to the "international" GW, it is fine because number
> portability is confined within a national domain.  That "international" GW
> will then wait for additional address information and performs the NPDB
> query, if required.  But if the call is to be routed directly to the
> destination GW, and if the originating GW is the one to perform the NPDB,
> then it has to collect all the address information before it can launch
the
> query.  But the issue is that the originating GW may not know it has
> collected all the address digits.
> 
> It seems that the best entity that knows that it has collected all the
> digits and can perform the NPDB query would be the destination
> "international" GW.
> 
> I have linked several issues (nation-specific ISUP implementations, number
> portability, and user traffic routing efficiency) together that need to be
> addressed as a whole.  There may be other issues.  It is hoped that one or
> more solutions can be identified and finalized.
> 
> _______________________________________________
> enum mailing list
> enum@ietf.org
> http://www.ietf.org/mailman/listinfo/enum



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 16:09:48 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id QAA19192
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 16:09:48 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id C193D52F0; Mon, 13 Dec 1999 16:07:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3A6B252F7; Mon, 13 Dec 1999 16:07:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id BA66352F0
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 16:07:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 16:05:35 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Mon Dec 13 16:04:02 EST 1999
Received: from mr3.exu.ericsson.se (mr3a.ericsson.com [198.215.127.159])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id PAA23960;
	Mon, 13 Dec 1999 15:05:14 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr3.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id PAA28465;
	Mon, 13 Dec 1999 15:05:14 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id PAA11592; Mon, 13 Dec 1999 15:05:12 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id PAA02280;
	Mon, 13 Dec 1999 15:05:11 -0600 (CST)
Message-Id: <199912132105.PAA02280@b04a24.exu.ericsson.se>
Subject: Re: one-way media with 183 Session Progress
To: msquire@nortelnetworks.com (Matt Squire)
Date: Mon, 13 Dec 1999 15:05:11 -0600 (CST)
Cc: jdrosen@dynamicsoft.com, schroeder@tri.sbc.com,
        sip@lists.research.bell-labs.com
In-Reply-To: <3.0.32.19991126120845.00b372a0@zbl6c008.corpeast.baynetworks.com> from "Matt Squire" at Nov 26, 99 12:08:48 pm
From: "Adam B. Roach" <Adam.Roach@Ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>I would think that messages sourced by providers such as 'this number is no
>longer in service' would require QoS.  Will companies really accept that
>these messages, which are really part of their customer interface, reach
>the customer as garbled junk?  
>    "Hi, you've reached XYZ.COM.  We are !#$%^& to *#^% *#(because of #@%*!"
>Can't imagine that going too well with corporate bigwigs.  

I beleive you may overestimate the importance of QoS for this
application. During the SIP bakeoff last week, I made a phone 
call across the public internet with *absolutely* no QoS guarantees. 
I broke out to the PSTN over 1,500 miles away, and called back to 
one of my co-workers.

We were at least two minutes into the conversation before
I revealed to the other party that I was calling him through
many, many routers on the public internet. He would not
have otherwise known that I wasn't calling him from a phone
directly connected to the same PBX.

This was at 5:30 in the afternoon -- one of the busiest periods
for the public internet.

--
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 17:02:02 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA19780
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 17:02:02 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4D40152F5; Mon, 13 Dec 1999 16:59:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id B4C2352F8; Mon, 13 Dec 1999 16:59:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 4B79D52F5
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 16:59:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 16:58:36 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Mon Dec 13 16:57:02 EST 1999
Received: from mr4.exu.ericsson.se (mr4a.ericsson.com [198.215.127.160])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id PAA20561;
	Mon, 13 Dec 1999 15:58:23 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr4.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id PAA03413;
	Mon, 13 Dec 1999 15:58:23 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id PAA15537; Mon, 13 Dec 1999 15:58:21 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id PAA03055;
	Mon, 13 Dec 1999 15:58:20 -0600 (CST)
Message-Id: <199912132158.PAA03055@b04a24.exu.ericsson.se>
Subject: Re: User signaling -- was  DTMF signaling between media gateways -ouch!
To: henry.sinnreich@wcom.com (Henry Sinnreich)
Date: Mon, 13 Dec 1999 15:58:20 -0600 (CST)
Cc: scott.petrack@metatel.com, dean.willis@wcom.com,
        sip@lists.research.bell-labs.com
In-Reply-To: <NBBBIIJFOKPMFOOILMBKAEEMEPAA.henry.sinnreich@wcom.com> from "Henry Sinnreich" at Dec 7, 99 03:11:49 pm
From: "Adam B. Roach" <Adam.Roach@Ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>From: Henry Sinnreich <henry.sinnreich@wcom.com>

>We have no control over H.xxx in the IETF, so need to look here what works
>best in the Internet conferencing architecture.
>SIP INFO seems to the job. What specifically does it not do? (If we keep the
>required SIP servers in the signaling path)

It does not allow trivial synchronized re-insertion of DTMF at the 
far end of a PSTN-SIP-PSTN connection using an voice compression codec
(e.g. GSM 6.10 or G.723) in the middle.

That is the key argument for RTP based DTMF encoding.

--
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 13 21:07:54 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id VAA22355
	for <sip-archive@odin.ietf.org>; Mon, 13 Dec 1999 21:07:53 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 97C2F52F8; Mon, 13 Dec 1999 21:05:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 2050E52F9; Mon, 13 Dec 1999 21:05:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 3505B52F8
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 21:05:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 21:03:22 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Mon Dec 13 21:01:48 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id IAA01551
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 08:14:58 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256847.000B2118 ; Tue, 14 Dec 1999 07:31:33 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: sip@lists.research.bell-labs.com
Message-ID: <65256847.000B1F38.00@sampark.hss.hns.com>
Date: Tue, 14 Dec 1999 07:31:28 +0530
Subject: Text / binary - a doubt
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



Hi,
Some time ago, there was a mail in this list about there not being enough
proof about which is better text or binary encoded protocols.

Could anyone point me to any resourse on the web - where I can find
technical reports - be it theoretical or practical about any stage of
findings describing each one's good/bad points ? I dont  ask this to start
yet another debate - I am just looking for  a reference, if any

Just today, we were comparing our H.323 and SIP protcol apps in terms of a
variety of parameters and the results were interesting.
So I was just hoping someone could point me to resources thru which I could
make a more qualified comparison.

(I hope this is the right list, or should it be confctrl ?)

Regds
Arjun

--
Arjun Roychowdhury @ Hughes Software Systems






Jonathan Rosenberg <jdrosen@dynamicsoft.com> on 12/13/99 10:37:02 AM

To:   Bobby Sardana <sardana@obsoft.com>
cc:   sip@lists.research.bell-labs.com, Henning Schulzrinne
      <schulzrinne@cs.columbia.edu>

Subject:  Re: Protocol grammar & future direction!




Well, its just plain waaaaaaaaaay to late for something like this. A
complete BNF (which SIP has), has no variance. We've found that peoples
implementations have variance, but thats what bakeoffs are for.

-Jonathan R.

Bobby Sardana wrote:
>
> Greetings:
>
> Recently, there has been much debate over the SIP grammar and its
> variance with what people are implementing. With respect to the SIP
> grammar I would like to find out the following:
>
> a. If the SIP protocol (viz., the grammar) can be converted to an
> XML DTD then it would become "trivial" for it to parse and without any
> variance (fixed DTD).
> b. The "map" for headers to "tags" should be straight forward.
> c. I am not sure about the "size" of the SIP XML message, but I am
> guessing that its impact would be minimal, as to what is being acheived.
>
> It seems that every "new" protocol being developed comes with its own
> grammar and its variance. This leads to "proprietary" implementations
> because "variance" with grammar is mostly an
> implementation/interpretation issue rather than a "concrete" definition.
> However, this can be eliminated by picking up a "standard" way of
> "defining" essentially (key/value) pairs.
>
> So what I am proposing is that SIP grammar and its implementors would
> benefit if the SIP messages can be defined in an XML format since
> parsing becomes easy and without any variance. It is understandable that
> the SIP designers went with RFC based "text messaging format" but I was
> wondering if they considered the XML option. If they did, I would like
> to know their findings.
>
> Thanks.
>
> Bobby Sardana.
> sardana@obsoft.com

--
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com








From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 03:22:06 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id DAA09671
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 03:22:06 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9118552DD; Tue, 14 Dec 1999 03:19:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 0015052E1; Tue, 14 Dec 1999 03:19:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id F01F652DD
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 03:19:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Tue Dec 14 03:17:23 EST 1999
Received: from fogerty.ericsson.fi ([194.89.206.21]) by dusty; Tue Dec 14 03:15:51 EST 1999
Received: from umail.lmf.ericsson.se ([131.160.11.2])
	by fogerty.ericsson.fi (8.9.3+Sun/8.9.3) with ESMTP id KAA25991;
	Tue, 14 Dec 1999 10:17:59 +0200 (EET)
Received: from lmf.ericsson.se (rcur181ip115.ericsson.se [147.214.181.115])
	by umail.lmf.ericsson.se (8.8.8+Sun/8.8.8) with ESMTP id KAA28784;
	Tue, 14 Dec 1999 10:17:12 +0200 (EET)
Message-ID: <3855FD07.D14022@lmf.ericsson.se>
Date: Tue, 14 Dec 1999 10:17:11 +0200
From: Gonzalo Camarillo <Gonzalo.Camarillo@lmf.ericsson.se>
Organization: Oy L M Ericsson Ab
X-Mailer: Mozilla 4.51 [en] (WinNT; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Adam.Roach@Ericsson.com
Cc: schroeder@tri.sbc.com, sip@lists.research.bell-labs.com
Subject: Re: Comments on draft-camarillo-mmusic-sip-isup-bcp-00.txt
References: <199912132005.OAA01687@b04a24.exu.ericsson.se>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Hi Adam,

> It's interesting to note that people from countries that use
> en-bloc signalling in the PSTN (US, Finland) seem to think this
> is a viable option.

First of all: do I look finnish??? :o)

I am just saying that it would be good that en-bloc signalling was used
when developing new technologies (from now on). But I also believe that
it is necessary to provide backwards compatibility with old systems
(such as the PSTN in a lot of European countries).

I am not being religious in any sense.

Regards,

Gonzalo
-- 
Gonzalo Camarillo         Phone :  +358  9 299 33 71
Oy L M Ericsson Ab        Mobile:  +358 40 702 35 35
Telecom R&D               Fax   :  +358  9 299 31 18
FIN-02420 Jorvas          Email :  Gonzalo.Camarillo@ericsson.com
Finland



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 10:34:00 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA20677
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 10:33:59 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 802A952AB; Tue, 14 Dec 1999 10:31:17 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id EAA9B52DC; Tue, 14 Dec 1999 10:31:16 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id B832552AB
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 10:31:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Tue Dec 14 10:30:15 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Tue Dec 14 10:28:42 EST 1999
Received: from mr4.exu.ericsson.se (mr4a.ericsson.com [198.215.127.160])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id JAA06567;
	Tue, 14 Dec 1999 09:30:08 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr4.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id JAA18905;
	Tue, 14 Dec 1999 09:30:08 -0600 (CST)
Received: from b04a45.exu.ericsson.se (b04a45 [138.85.60.145]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id JAA12043; Tue, 14 Dec 1999 09:30:08 -0600 (CST)
From: Sean Olson <eussean@exu.ericsson.se>
Received: (from eussean@localhost)
	by b04a45.exu.ericsson.se (8.9.1/8.9.1) id JAA03709;
	Tue, 14 Dec 1999 09:30:07 -0600 (CST)
Date: Tue, 14 Dec 1999 09:30:07 -0600 (CST)
Message-Id: <199912141530.JAA03709@b04a45.exu.ericsson.se>
To: henry.sinnreich@wcom.com, Adam.Roach@Ericsson.com
Subject: Re: User signaling -- was  DTMF signaling between media gateways -ouch!
Cc: scott.petrack@metatel.com, dean.willis@wcom.com,
        sip@lists.research.bell-labs.com
X-Sun-Charset: US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk


> >We have no control over H.xxx in the IETF, so need to look here what works
> >best in the Internet conferencing architecture.
> >SIP INFO seems to the job. What specifically does it not do? (If we keep the
> >required SIP servers in the signaling path)
> 
> It does not allow trivial synchronized re-insertion of DTMF at the 
> far end of a PSTN-SIP-PSTN connection using an voice compression codec
> (e.g. GSM 6.10 or G.723) in the middle.
> 
> That is the key argument for RTP based DTMF encoding.
> 
> --
> Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
> adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA
> 

Actually, it does. It all depends on the encoding you choose for the 
DTMF in the INFO payload. Although it is taboo, you could even carry the
AVT tones RTP packet in the payload. There, I said it, let the flame wars 
begin (keep in mind that this has already been hashed over many many times)

I believe the key argument for RTP based DTMF
encoding is that it is something everyone is doing anyways, so why not
re-use it. I think the more important question is why not allow both?
I've heard excellent arguments from both sides. One thing to keep in mind
is that the INFO method is not specifically designed for DTMF transit. There
are many other applications for it. To get hung up on this issue detracts
from more meaningful discussions on what INFO can provide.

-----------------------------------------------------------------
Sean Olson            E-mail: sean.olson@ericsson.com
Ericsson Inc.         Voice: (972) 583-5472 
                      FAX: (972) 669-0154



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 10:43:06 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA21334
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 10:43:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 2858252F3; Tue, 14 Dec 1999 10:39:34 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 8A65552F7; Tue, 14 Dec 1999 10:39:33 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 84E4B52F3
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 10:39:09 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 14 10:37:48 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec 14 10:36:16 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtoo04399;
	Tue, 14 Dec 1999 15:35:45 GMT
Received: from dynamicsoft.com (1Cust250.tnt1.freehold.nj.da.uu.net [63.17.113.250])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id KAA08456;
	Tue, 14 Dec 1999 10:37:42 -0500 (EST)
Message-ID: <3856658E.4F344080@dynamicsoft.com>
Date: Tue, 14 Dec 1999 10:43:10 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: hsalama@cisco.com
Cc: "Mark D. Foster" <mark.foster@npac.com>,
        "'John Mainwaring'" <crm312a@nortelnetworks.com>,
        iptel@lists.research.bell-labs.com,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com
Subject: Re: TRIP
References: <000901bf41b8$e9e21900$0864a8c0@loudoun.com> <384F4720.358162F3@dynamicsoft.com> <384FF91C.DC9E7EE7@cisco.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



"Hussein F. Salama" wrote:
> 
> > In any case, determination of where the NPDB query is done is something
> > I don't think is within the scope of iptel to determine. All we need to
> > figure out is what kind of numbers are distributed in TRIP. Near as I
> > can tell, since LRNs still refer to the prefix of numbers served by a
> > switch, doing what we were doing all along works just fine.
> >
> 
> Yes what we're doing is OK, because the LRN is part of an office's
> NPA-NXX prefix. But we may have to add a new field to the
> ReachableRoutes attribute to mark a prefix as portable. A prefix is
> marked as portable if at lease one number has been ported out of this
> prefix.

Hmm, why is that? Are you basically saying that if a prefix is marked as
portable, an LS must do an LNP query before routing to numbers in that
prefix? Then, if marked as not portable, there is no need for queries?
If so, its an interesting idea. It solves the problem of N-1, which,
from what I understand, was done in part because only carriers near the
destination would need to install triggers to perform queries on
numbers. However, if information on what prefixes are ported is
distributed in TRIP, this information is effectively dynamically
distributed. This means its equally easy for the query to be done at the
first LS as the last.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 11:03:23 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA22039
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 11:03:22 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 0518C52E1; Tue, 14 Dec 1999 10:59:36 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 66AAB52FA; Tue, 14 Dec 1999 10:59:35 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 7FD5E52E1
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 10:59:07 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 14 10:58:52 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec 14 10:57:19 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtop03829;
	Tue, 14 Dec 1999 15:56:49 GMT
Received: from dynamicsoft.com (1Cust250.tnt1.freehold.nj.da.uu.net [63.17.113.250])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id KAA08636;
	Tue, 14 Dec 1999 10:58:42 -0500 (EST)
Message-ID: <38566A7A.5D69155B@dynamicsoft.com>
Date: Tue, 14 Dec 1999 11:04:10 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: Dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: John Mainwaring <crm312a@nortelnetworks.com>
Cc: "Mark D. Foster" <mark.foster@npac.com>,
        iptel@lists.research.bell-labs.com,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com
Subject: Re: TRIP
References: <89866A7EC9C0D1119C950000F8BCC2820157C018@zrtpd00n.us.nortel.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



> John Mainwaring wrote:
> 
> |The problem is related to past discussions on the SIP mailing list
> |regarding overlap dialing. A terminating gateway would look at
> |sip:1212344, and know how to route it, but might not know whether
> this
> |was a dialed number with more digits coming, or an LRN. Does it
> matter?
> |Not being an ISUP expert, I'm not sure. If it does matter, something
> |like user=lrn within the SIP URL would fix that.
> 
> user=lrn is almost right.  If you have queried a portable number and
> found that it is not ported, then the DN has the same status as an LRN
> would have if the number were ported (i.e. it should be treated as
> authoritative for routing).  user=np-queried might be closer to the
> mark.

I wonder if we can't think about this problem in more general terms.

In the SIP model, each proxy owns some piece of the namespace
(engineering.dynamicsoft.com, for example), and is therefore responsible
for the definition of the user space (jdrosen@) within that domain.
Thats why each proxy can, an usually will, perform some kind of URI
translation independent from other proxies. Our underlying assumption
was that usernames only have meaning within their domain. For example,
with sip:jdrosen@dynamicsoft.com, only a dynamicsoft.com proxy knows how
to handle jdrosen. There might be jdrosen's in other domains that aren't
me. However, in the case of telephone numbers, the proxy that owns the
domain does not necessarily own the user space. sip:5551212@gateway.com,
for example, uses a user name that is not "owned" by gateway.com, in the
sense that this name has valid semantics outside of gateway.com. Other
domains, like wcom.com, would know how to handle this number as well.
Its possible that we might even see things besides phone numbers as user
names that are valid across multiple domains. An example is (heaven
forbid), social security numbers (in the US, at least):

sip:123-45-6789@wcom.com;user=ssn

Now, I might imagine that some kind of mobility services might be
supplied for these names, so they might need to be translated also.

I'll call these type of user names "cross domain user names".

With cross domain user names, this is where we run into issues like "has
the number been queried yet". However, I think we might see other
translation mechanisms besides LNP. Soooo, might it not be useful to
define URI parameters that indicate what global translation services
have been applied to a cross domain user name?

As an example:

sip:15551212@cisco.com;user=phone;trans="lnp,gdbs"

where lnp and gdbs are some kind of global translation services that
apply to names of the type phone.

For cross domain user names, we will always need a URI parameter to
indicate the global namespace from which these names are drawn. In the
case of phone numbers, thats user=phone. Our original intent with the
user=phone parameter was to specify only the type of BNF used for the
user part of the URI. But, the more general operation of specifying both
the format and the namespace seems useful.


> 
> It's also necessary to define what the TRIP should do differently
> depending on whether the np-queried indication is present.  I must
> admit I came into this discussion mainly because I have worked on
> LNP.  I assume the objective is not to route unqueried calls to the
> donor proxy. 

Hmm. This is something thats also different from the PSTN. The cost of
routing to the donor proxy in SIP is much less, since proxies can be
stateless. Thus, if a proxy receives a call for some number that is
ported, it stateless proxies the call towards the next destination. The
result is that there is no triangle routing for media (there generally
isn't), nor for subsequent signaling. There is only marginal cost for
the donor provider. There are obviously polticial and business issues;
one may not want to trust or rely upon the donor proxy at all, as is the
case of LNP in the US. But, the general SIP model is that we assume
proxies do route calls; no security measures can prevent a proxy from
dropping messages. Why, in the case of LNP, do we now need to assume
these proxies won't route calls?




 I have noted that originator query may not be practical
> for nationwide calling and that donor proxy is too late unless you're
> prepared to consider RTP. 

The assumption of the impractability of originator queries has
everything to do with the existing structure of LNP. Its mainly because,
AFAIK, the systems are different all over the world. However, if we use
the IP model, with a DNS solution, its no harder to query for a number
on the other side of the planet as it would be for a number next door.

Also, pardon my ignorance, but what is RTP? Many of us on this list know
RTP as the Real Time Transport Protocol (rfc1889) but I don't think
thats what you mean.


 One answer might be for the TRIP to provide
> a response on unqueried numbers that routes to an intermediate server
> that does know how to do NP queries for the destination DN.

TRIP is not a query protocol. Its a routing protocol. This would be a
SIP function, and is already possible. "408 Not Found".

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 11:53:09 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA23873
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 11:53:06 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7813E52DC; Tue, 14 Dec 1999 11:49:38 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id CA99052FE; Tue, 14 Dec 1999 11:49:37 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 30AC352DC
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 11:49:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Tue Dec 14 11:48:12 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Tue Dec 14 11:46:39 EST 1999
Received: by dnspri.npac.com; id AA270710088; Tue, 14 Dec 1999 10:48:08 -0600
Received: from chi02.npac.com(208.143.39.132) by dnspri.npac.com via smap (3.2)
	id xma027059; Tue, 14 Dec 99 10:48:02 -0600
Received: by chi02.npac.com with Internet Mail Service (5.5.2232.9)
	id <YF8J1YG3>; Tue, 14 Dec 1999 10:43:58 -0600
Message-Id: <ED88182BFF78D211A4D800A0C9E9435C3BE93B@dc02.npac.com>
From: James Yu <james.yu@neustar.com>
To: "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>, hsalama@cisco.com
Cc: iptel@lists.research.bell-labs.com, sip@lists.research.bell-labs.com
Subject: RE: TRIP
Date: Tue, 14 Dec 1999 10:41:41 -0600
Mime-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2232.9)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

As indicated by Mark Foster and me that N-1 really does not mean that N-1
network is the best place to perform N-1.  It is simply something like "if
nobody else has performed the NPDB query, you, the second to the last
network, should perform the NPDB query."  This will prevent the call from
being routed to a donor network/switch if the number has been ported out of
the donor switch.  In the U.S., N-1 network implies the long distance
carrier for a long distance call.  For a local call that may involves two
LECs, the originating LEC would be the N-1 network.

One reason is that the "long distance" carrier handles a long distance call
(charges the caller) in the U.S.  If the originating network is to perform
the NPDB query, the long distance carrier has to pay the originating network
for performing the query (through the business agreement).  Another reason
is that in the U.S. NPDB administration is divided into seven regions which
are aligned with the Regional Bell Operating Company (RBOC) regions (e.g.,
NYNEX, Bell Atlantic, US West, etc.).  A NPDB in one region only contains
the directory numbers in that region.  There can be many NPDBs in one
region.  A carrier may decide to deploy its own NPDB or may decide to use
another company's NPDB (paying for NPDB dips).  The originating network in
one region typically only access the NPDB in the same region.  To access a
NPDB in another region requires business agreement between the originating
network and the NPDB and there may be higher SS7 message transport cost.

I agree with the proposal of adding an indication whether a number range has
been ported or not because it would reduce the traffic into the NPDB or an
equivalent entity.  But not all the LSs are required to use the information
to perform the NPDB/DNS query.  The indicator would be useful for an entity
that is to perform the query (e.g., the first LS can route the call to
another LS where query is performed).  As discussed before, the NPDB dip
indicator may need to be carried in the SIP if ISUP is not encapsulated.
That indicator plus this proposed indicator will tell a LS that is to
perform the NPDB-like query whether it should perform such a query.

Since several GWs will be able to terminate SCN-termianted calls, it may be
useful to include antoher indicator that indicates the number of SCN switch
hops between the terminating GW and the serving SCN switch of the called
number if we don't plan to rely on the provisioning process to provide the
information.  The information would allow an LS to determine the GW that
provides the most efficient route to the SCN serving switch of the called
number.  This does not rule out the case where business agreement determines
the the selected GW.  If we want to provide more information, we may need to
indicate the number of non-SS7 signaling routes in addition to the number of
hops.   The intention of the indicator(s) is to provide some indication
about the post dialing delay contributed by the terminating route.  Those
indicators are not needed if contribution to the post dialing delay by the
terminating route is not a concern (e.g., most routes have similar post
dialing delay).

We may also want to consider the pricing information for a route/number
ranges if we don't plan to rely on business agreement to determine the GW.
The pricing info. is about the charge to be paid to the terminating GW for
accepting a call and routing it to the SCN terminating switch.  We may need
two types of pricing info. depending on whether NPDB query has been
performed or not.  Please ignore this if this issue has been debated before
and closed.

James

-----Original Message-----
From: Jonathan Rosenberg [mailto:jdrosen@dynamicsoft.com]
Sent: Tuesday, December 14, 1999 10:43 AM
To: hsalama@cisco.com
Cc: Mark D. Foster; 'John Mainwaring';
iptel@lists.research.bell-labs.com; 'James Yu';
sip@lists.research.bell-labs.com
Subject: Re: TRIP




"Hussein F. Salama" wrote:
> 
> > In any case, determination of where the NPDB query is done is something
> > I don't think is within the scope of iptel to determine. All we need to
> > figure out is what kind of numbers are distributed in TRIP. Near as I
> > can tell, since LRNs still refer to the prefix of numbers served by a
> > switch, doing what we were doing all along works just fine.
> >
> 
> Yes what we're doing is OK, because the LRN is part of an office's
> NPA-NXX prefix. But we may have to add a new field to the
> ReachableRoutes attribute to mark a prefix as portable. A prefix is
> marked as portable if at lease one number has been ported out of this
> prefix.

Hmm, why is that? Are you basically saying that if a prefix is marked as
portable, an LS must do an LNP query before routing to numbers in that
prefix? Then, if marked as not portable, there is no need for queries?
If so, its an interesting idea. It solves the problem of N-1, which,
from what I understand, was done in part because only carriers near the
destination would need to install triggers to perform queries on
numbers. However, if information on what prefixes are ported is
distributed in TRIP, this information is effectively dynamically
distributed. This means its equally easy for the query to be done at the
first LS as the last.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 12:11:06 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA24487
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 12:11:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 8CF3152FD; Tue, 14 Dec 1999 12:07:32 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E25105300; Tue, 14 Dec 1999 12:07:31 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 91A8552FD
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 12:07:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 14 12:05:11 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Tue Dec 14 12:03:38 EST 1999
Received: by dnspri.npac.com; id AA288961108; Tue, 14 Dec 1999 11:05:08 -0600
Received: from chi02.npac.com(208.143.39.132) by dnspri.npac.com via smap (3.2)
	id xma028874; Tue, 14 Dec 99 11:04:54 -0600
Received: by chi02.npac.com with Internet Mail Service (5.5.2232.9)
	id <YF8J1YHQ>; Tue, 14 Dec 1999 11:00:50 -0600
Message-Id: <ED88182BFF78D211A4D800A0C9E9435C3BE93C@dc02.npac.com>
From: James Yu <james.yu@neustar.com>
To: "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>,
        John Mainwaring <crm312a@nortelnetworks.com>
Cc: Mark Foster <mark.foster@neustar.com>, iptel@lists.research.bell-labs.com,
        sip@lists.research.bell-labs.com
Subject: RE: TRIP
Date: Tue, 14 Dec 1999 10:58:31 -0600
Mime-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2232.9)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

For overlap signaling, a GW or LS that receives a call with partial address
information may not know that the address info. is complete.  If it launches
a query (DNS or NPDB), the entity that has the "number portability" info.
won't be able to find the info. because the address info. is incomplete.  It
seems that either this LS or GW may wait a little while to see whether there
are subsequent address info. before launching the query, or it can launch a
query (DNS or NPDB-like), receives an error (hope that it is specific such
as incomplete address instead of something ambiguous), and then wait for
additional address info. before timing out.

James
-----Original Message-----
From: Jonathan Rosenberg [mailto:jdrosen@dynamicsoft.com]
Sent: Tuesday, December 14, 1999 11:04 AM
To: John Mainwaring
Cc: Mark D. Foster; iptel@lists.research.bell-labs.com; 'James Yu';
sip@lists.research.bell-labs.com
Subject: Re: TRIP




> John Mainwaring wrote:
> 
> |The problem is related to past discussions on the SIP mailing list
> |regarding overlap dialing. A terminating gateway would look at
> |sip:1212344, and know how to route it, but might not know whether
> this
> |was a dialed number with more digits coming, or an LRN. Does it
> matter?
> |Not being an ISUP expert, I'm not sure. If it does matter, something
> |like user=lrn within the SIP URL would fix that.
> 
> user=lrn is almost right.  If you have queried a portable number and
> found that it is not ported, then the DN has the same status as an LRN
> would have if the number were ported (i.e. it should be treated as
> authoritative for routing).  user=np-queried might be closer to the
> mark.

I wonder if we can't think about this problem in more general terms.

In the SIP model, each proxy owns some piece of the namespace
(engineering.dynamicsoft.com, for example), and is therefore responsible
for the definition of the user space (jdrosen@) within that domain.
Thats why each proxy can, an usually will, perform some kind of URI
translation independent from other proxies. Our underlying assumption
was that usernames only have meaning within their domain. For example,
with sip:jdrosen@dynamicsoft.com, only a dynamicsoft.com proxy knows how
to handle jdrosen. There might be jdrosen's in other domains that aren't
me. However, in the case of telephone numbers, the proxy that owns the
domain does not necessarily own the user space. sip:5551212@gateway.com,
for example, uses a user name that is not "owned" by gateway.com, in the
sense that this name has valid semantics outside of gateway.com. Other
domains, like wcom.com, would know how to handle this number as well.
Its possible that we might even see things besides phone numbers as user
names that are valid across multiple domains. An example is (heaven
forbid), social security numbers (in the US, at least):

sip:123-45-6789@wcom.com;user=ssn

Now, I might imagine that some kind of mobility services might be
supplied for these names, so they might need to be translated also.

I'll call these type of user names "cross domain user names".

With cross domain user names, this is where we run into issues like "has
the number been queried yet". However, I think we might see other
translation mechanisms besides LNP. Soooo, might it not be useful to
define URI parameters that indicate what global translation services
have been applied to a cross domain user name?

As an example:

sip:15551212@cisco.com;user=phone;trans="lnp,gdbs"

where lnp and gdbs are some kind of global translation services that
apply to names of the type phone.

For cross domain user names, we will always need a URI parameter to
indicate the global namespace from which these names are drawn. In the
case of phone numbers, thats user=phone. Our original intent with the
user=phone parameter was to specify only the type of BNF used for the
user part of the URI. But, the more general operation of specifying both
the format and the namespace seems useful.


> 
> It's also necessary to define what the TRIP should do differently
> depending on whether the np-queried indication is present.  I must
> admit I came into this discussion mainly because I have worked on
> LNP.  I assume the objective is not to route unqueried calls to the
> donor proxy. 

Hmm. This is something thats also different from the PSTN. The cost of
routing to the donor proxy in SIP is much less, since proxies can be
stateless. Thus, if a proxy receives a call for some number that is
ported, it stateless proxies the call towards the next destination. The
result is that there is no triangle routing for media (there generally
isn't), nor for subsequent signaling. There is only marginal cost for
the donor provider. There are obviously polticial and business issues;
one may not want to trust or rely upon the donor proxy at all, as is the
case of LNP in the US. But, the general SIP model is that we assume
proxies do route calls; no security measures can prevent a proxy from
dropping messages. Why, in the case of LNP, do we now need to assume
these proxies won't route calls?




 I have noted that originator query may not be practical
> for nationwide calling and that donor proxy is too late unless you're
> prepared to consider RTP. 

The assumption of the impractability of originator queries has
everything to do with the existing structure of LNP. Its mainly because,
AFAIK, the systems are different all over the world. However, if we use
the IP model, with a DNS solution, its no harder to query for a number
on the other side of the planet as it would be for a number next door.

Also, pardon my ignorance, but what is RTP? Many of us on this list know
RTP as the Real Time Transport Protocol (rfc1889) but I don't think
thats what you mean.


 One answer might be for the TRIP to provide
> a response on unqueried numbers that routes to an intermediate server
> that does know how to do NP queries for the destination DN.

TRIP is not a query protocol. Its a routing protocol. This would be a
SIP function, and is already possible. "408 Not Found".

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 15:01:11 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA28399
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 15:01:02 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id CC34852C4; Tue, 14 Dec 1999 14:56:43 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 2F41F52D5; Tue, 14 Dec 1999 14:56:43 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 187B752EE
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 12:11:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 13 12:09:39 EST 1999
Received: from slb-smtpout-01.boeing.com ([12.13.237.21]) by dusty; Mon Dec 13 12:08:06 EST 1999
Received: from slb-av-01.boeing.com ([129.172.13.4])
	by slb-smtpout-01.boeing.com (8.9.2/8.8.5-M2) with ESMTP id JAA25880
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 09:09:29 -0800 (PST)
Received: from slb-hub-01.boeing.com (localhost [127.0.0.1])
	by slb-av-01.boeing.com (8.9.2/8.9.2-MAV1) with ESMTP id JAA29386
	for <sip@lists.research.bell-labs.com>; Mon, 13 Dec 1999 09:09:29 -0800 (PST)
Received: from [199.191.48.134] by slb-hub-01.boeing.com for sip@lists.research.bell-labs.com; Mon, 13 Dec 1999 09:08:50 -0800
Received: by engr04.arl.bna.boeing.com (UCX V4.1-12A, OpenVMS V7.1 Alpha);
	Mon, 13 Dec 1999 12:07:55 -0500
Reply-To: <albert.e.manfredi@boeing.com>
From: "Albert Manfredi" <albert.e.manfredi@boeing.com>
To: "James Yu" <james.yu@neustar.com>, <sip@lists.research.bell-labs.com>
Cc: <enum@ietf.org>
Subject: RE: [Enum] Nation-Specific ISUP implementations, Overlap Signaling  & NumberPortability Database Queries
Date: Mon, 13 Dec 1999 12:08:42 -0500
Message-Id: <NDBBIBKKCLEFDFDGHCNMAECLCBAA.albert.e.manfredi@boeing.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.3155.0
In-Reply-To: <ED88182BFF78D211A4D800A0C9E9435C3BE930@dc02.npac.com>
Importance: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

I don't think I understand all the issues you're raising. But, on
the number portability database (NPDB) question, why not just map
each portable number only to an E.164 number in the NPDB? The DNS
could do that job quite well, I think.

For simple telephony devices, when a user dials a portable number,
the central office starts by querying the DNS or other similar
database. The reply is E.164, and the central office knows whether
this number is local, long distance, or international with respect
to itself. It knows this because it is programmed to know its own
country code and area code. So it knows how to translate that E.164
number into something it can dial. And it dials accordingly,
changing nothing from current practice.

Smart terminals can query the NPDB (DNS) directly and translate the
E.164 number returned into something in the local dialing plan. Or
use the IP address, if available.

The simplest way to accommodate mobile terminals is to have them
operate through a home server, as if they are always at that home
location. This seems wasteful when one is roaming.

Alternatively, the mobile station, when accessing the the NPDB via
its roaming access base station, can have that base station
translate the E.164 number returned by the NPDB into the local
dialing plan.

But I don't think that most of these issues are enum wg issues. I
could be wrong. Also, I don't understand all the acronyms you use,
but maybe that's just me.

Bert
albert.e.manfredi@boeing.com


> -----Original Message-----
> From: enum-admin@ietf.org [mailto:enum-admin@ietf.org]On
> Behalf Of James
> Yu
> Sent: Monday, December 13, 1999 11:20 AM
> To: 'sip@lists.research.bell-labs.com'
> Cc: 'enum@ietf.org'
> Subject: [Enum] Nation-Specific ISUP implementations,
> Overlap Signaling
> & NumberPortability Database Queries
>
>
> The following discussions focus on SCN-IP-SCN calls.
>
> There are nation-specific variatoins in ISUP
> implementations.  I don't know
> whether this issue has been discussed (I'm new to IETF).
> When we have only
> a few GWs, it is fine that those GWs support many ISUP
> implementations.  But
> when many GWs are deployed, it is not likely that every
> GW will support many
> ISUP implementations.  Some may be used only for domestic
> use.  So it is
> likely that an international call may need to be routed to an
> "international" GW (or more than one) that interworks between two
> nation-specific ISUP implementations.  To fully use the
> IP network, then the
> "international" GW will further route the call to a "domestic" GW
> (destination GW) that terminates the call into the SCN.
> The call can
> certainly be routed to the destination SCN but the call
> charge may be
> higher.
>
> This would seem to be inefficient that the user traffic
> must be routed
> through additional GW(s).  ISUP interworking probably can
> be done via a pure
> signaling conversion/mapping so that the user traffic can
> be routed directly
> to the destination GW.
>
> If we need to perform number portability queries, then a
> good place would be
> the destination "international" GW because it is close to
> the destination
> country and supports the destination country's Number
> Portability Database
> (NPDB) interface.  In that case, simple ISUP interworking
> mentioned above
> won't be sufficient.  A NPDB query also needs to be
> launched. The response
> to the NPDB query will decide the destination GW that
> should terminate the
> call.
>
> Due to number portability, the called party's serving SCN
> switch changes
> when the called user switches to a new service provider.
> Whenever that
> happens, the NPDB will reflect the current new serving
> switch or network
> information (via Location Routing Number in the North
> America or Routing
> Prefix in the Europe), and the "destination" GW that can
> reach the serving
> switch or network may change.  So a NPDB query is
> required to determine the
> correct GW to terminate the call.
>
> At ENUM, we have been discussing where to perform the
> NPDB queries.  The
> originating GW needs to support all nation-specific NPDB
> interfaces if it is
> to query those NPDBs.  This would be expensive.  Also
> there is an issue
> about the encapsulated ISUP message in the SIP if originating GW's
> nationa-specific ISUP message is encapsulated (may be
> everyone should use
> ITU-T ISUP that is used between international switches
> for communicating
> among the entities in the IP domain).  The destination GW
> can support
> specific NPDB interface; however, it may be the wrong GW
> because it cannot
> reach the serving switch in the SCN that serves the called party.
>
> Overlap signaling would make the issue more complicate.
> If the call routing
> decision is to route to the "international" GW, it is
> fine because number
> portability is confined within a national domain.  That
> "international" GW
> will then wait for additional address information and
> performs the NPDB
> query, if required.  But if the call is to be routed
> directly to the
> destination GW, and if the originating GW is the one to
> perform the NPDB,
> then it has to collect all the address information before
> it can launch the
> query.  But the issue is that the originating GW may not
> know it has
> collected all the address digits.
>
> It seems that the best entity that knows that it has
> collected all the
> digits and can perform the NPDB query would be the destination
> "international" GW.
>
> I have linked several issues (nation-specific ISUP
> implementations, number
> portability, and user traffic routing efficiency)
> together that need to be
> addressed as a whole.  There may be other issues.  It is
> hoped that one or
> more solutions can be identified and finalized.
>
> _______________________________________________
> enum mailing list
> enum@ietf.org
> http://www.ietf.org/mailman/listinfo/enum
>




From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 15:07:01 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA28577
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 15:07:00 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 6E53952D5; Tue, 14 Dec 1999 15:03:43 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id BDBFA52D6; Tue, 14 Dec 1999 15:03:42 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 058DB52D5
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 15:03:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 14 15:01:48 EST 1999
Received: from PMESMTP02.wcom.com ([199.249.20.2]) by dusty; Tue Dec 14 15:00:15 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #41713)
 id <0FMQ00A01Y6DMQ@firewall.mcit.com>; Tue, 14 Dec 1999 19:59:01 +0000 (GMT)
Received: from ndcrelay.mcit.com ([166.37.172.49])
 by firewall.mcit.com (PMDF V5.2-32 #41713)
 with ESMTP id <0FMQ006DGY6D7B@firewall.mcit.com>; Tue,
 14 Dec 1999 19:59:01 +0000 (GMT)
Received: from omzmta03.mcit.com (omzmta03.mcit.com [166.37.194.121])
 by ndcrelay.mcit.com (8.8.7/) with ESMTP	id TAA24430; Tue,
 14 Dec 1999 19:57:22 +0000 (GMT)
Received: from dwillispc ([166.35.150.209])
 by omzmta03.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991214195900.ZWPL28533@dwillispc>; Tue,
 14 Dec 1999 19:59:00 +0000
Date: Tue, 14 Dec 1999 13:55:48 -0600
From: Dean Willis <dean.willis@wcom.com>
Subject: URL Generalization for Portability (was TRIP)
In-reply-to: <38566A7A.5D69155B@dynamicsoft.com>
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>,
        John Mainwaring <crm312a@nortelnetworks.com>
Cc: "Mark D. Foster" <mark.foster@npac.com>,
        iptel@lists.research.bell-labs.com,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com
Message-id: <001e01bf466d$373d3140$d19623a6@mcit.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Jonathan Rosenburg wrote:
> I wonder if we can't think about this problem in more general terms.

yes, please!


> In the SIP model, each proxy owns some piece of the namespace
> (engineering.dynamicsoft.com, for example), and is therefore responsible
> for the definition of the user space (jdrosen@) within that domain.
> Thats why each proxy can, an usually will, perform some kind of URI
> translation independent from other proxies. Our underlying assumption
> was that usernames only have meaning within their domain. For example,
> with sip:jdrosen@dynamicsoft.com, only a dynamicsoft.com proxy knows how
> to handle jdrosen. There might be jdrosen's in other domains that aren't
> me. However, in the case of telephone numbers, the proxy that owns the
> domain does not necessarily own the user space. sip:5551212@gateway.com,
> for example, uses a user name that is not "owned" by gateway.com, in the
> sense that this name has valid semantics outside of gateway.com. Other
> domains, like wcom.com, would know how to handle this number as well.
> Its possible that we might even see things besides phone numbers as user
> names that are valid across multiple domains. An example is (heaven
> forbid), social security numbers (in the US, at least):

The underlying problem here is differentiating between a phone-number and a
service-name-which-looks-like-a-number. Yes, the user=phone gives a hint on
nature od address, the "+" encodding gives a hint on the scope of address,
but it is still muddy.

There was some discussion of this problem wrt DCS during the November
interim meeting. It was suggested that a cross-domain destination which is a
phone number could be better represented by a tel: URL than by confusing the
scope of the user part of a sip: URL. This simplilifies life greatly.

Something like

	INVITE premiumservice@gateway.carrier.com
	To: tel:5551212;trans=lnp?gdbs

could be used to indicate to gateway.carrier.com that premium gateway
service is requested towards the PSTN location identified by telephone
number 5551212, that LNP and GDBS translation have been applied, and that
the phone number is of local scope for the gateway. Incidentally, I think I
just noticed a minor anomaly in the tel-url grammar -- don't see how to
encode more than one future-extension field . . .

--
Dean




From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 15:43:17 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA29748
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 15:43:17 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id C0C7752EC; Tue, 14 Dec 1999 15:39:37 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 1E65852FF; Tue, 14 Dec 1999 15:39:37 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 05A9652EC
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 15:39:08 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 14 15:38:44 EST 1999
Received: from smtprtp1.ntcom.nortel.net ([137.118.22.14]) by dusty; Tue Dec 14 15:37:10 EST 1999
Received: from zrtpd00y.us.nortel.com (actually 47.140.224.109) 
          by smtprtp1.ntcom.nortel.net; Tue, 14 Dec 1999 15:38:20 -0500
Received: by zrtpd00y.us.nortel.com with Internet Mail Service (5.5.2448.0) 
          id <Y5PMKX9D>; Tue, 14 Dec 1999 15:38:25 -0500
Message-ID: <89866A7EC9C0D1119C950000F8BCC2820157C02B@zrtpd00n.us.nortel.com>
From: "John Mainwaring" <crm312a@nortelnetworks.com>
To: "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>
Cc: "Mark D. Foster" <mark.foster@npac.com>,
        iptel@lists.research.bell-labs.com,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com
Subject: RE: TRIP
Date: Tue, 14 Dec 1999 15:38:03 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: multipart/alternative;
              boundary="----_=_NextPart_001_01BF4673.2B7063F4"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_001_01BF4673.2B7063F4
Content-Type: text/plain;
	charset="windows-1252"



|-----Original Message-----
|From: Jonathan Rosenberg [mailto:jdrosen@dynamicsoft.com]
|
|> John Mainwaring wrote:
|> 
|> |The problem is related to past discussions on the SIP mailing list
|> |regarding overlap dialing. A terminating gateway would look at
|> |sip:1212344, and know how to route it, but might not know whether
|> this
|> |was a dialed number with more digits coming, or an LRN. Does it
|> matter?
|> |Not being an ISUP expert, I'm not sure. If it does matter, something
|> |like user=lrn within the SIP URL would fix that.
|> 
|> user=lrn is almost right.  If you have queried a portable number and
|> found that it is not ported, then the DN has the same status 
|as an LRN
|> would have if the number were ported (i.e. it should be treated as
|> authoritative for routing).  user=np-queried might be closer to the
|> mark.
|
|I wonder if we can't think about this problem in more general terms.
|
|In the SIP model, each proxy owns some piece of the namespace
|(engineering.dynamicsoft.com, for example), and is therefore 
|responsible
|for the definition of the user space (jdrosen@) within that domain.
|Thats why each proxy can, an usually will, perform some kind of URI
|translation independent from other proxies. Our underlying assumption
|was that usernames only have meaning within their domain. For example,
|with sip:jdrosen@dynamicsoft.com, only a dynamicsoft.com proxy 
|knows how
|to handle jdrosen. There might be jdrosen's in other domains 
|that aren't
|me. However, in the case of telephone numbers, the proxy that owns the
|domain does not necessarily own the user space. 
|sip:5551212@gateway.com,
|for example, uses a user name that is not "owned" by 
|gateway.com, in the
|sense that this name has valid semantics outside of gateway.com. Other
|domains, like wcom.com, would know how to handle this number as well.
|Its possible that we might even see things besides phone 
|numbers as user
|names that are valid across multiple domains. An example is (heaven
|forbid), social security numbers (in the US, at least):
|
|sip:123-45-6789@wcom.com;user=ssn
|
|Now, I might imagine that some kind of mobility services might be
|supplied for these names, so they might need to be translated also.
|
|I'll call these type of user names "cross domain user names".
|
|With cross domain user names, this is where we run into issues 
|like "has
|the number been queried yet". However, I think we might see other
|translation mechanisms besides LNP. Soooo, might it not be useful to
|define URI parameters that indicate what global translation services
|have been applied to a cross domain user name?
|
|As an example:
|
|sip:15551212@cisco.com;user=phone;trans="lnp,gdbs"
|
|where lnp and gdbs are some kind of global translation services that
|apply to names of the type phone.
|
|For cross domain user names, we will always need a URI parameter to
|indicate the global namespace from which these names are drawn. In the
|case of phone numbers, thats user=phone. Our original intent with the
|user=phone parameter was to specify only the type of BNF used for the
|user part of the URI. But, the more general operation of 
|specifying both
|the format and the namespace seems useful.

I think the problem is a bit different.  919-555-1212 uniquely identifies a
user within the North American Numbering Plan.  It's just that with LNP it
can no longer locate the user.  If someone wants to use
919-555-1212@vanity.org as an email address and someone else uses
919-555-1212@workplace.com, that's fine, but has nothing to do with
telephone numbers.  I think I want to be able to place a call when all I
know is 919-555-1212.

Without LNP, it would have been fairly easy to  discover that 919-555
implied bellsouth, so the number could have been given as
919-555-1212@bellsouth.com.  Now it is possible that some numbers from
919-555 might be ported to othertel.com.  Othertel might the native owner of
919-444-xxxx numbers and might choose to host 919-555-1313 on their 919-444
exchange.  In that case, the LRN for 919-555-1313 would be 919-444.  Once I
have done an LNP query, I might want to use something like
919-555-1212@919-555.bellsouth.com for a number that has not been ported and
919-555-1313@919-444.othertel.com for a number that has been ported to
othertel.

I can't shorten the 10 digit number in the user name, because of things like
NPA overlays and switches that host multiple office codes.  I need the full
address to select the right user as well as the LRN to route to the right
place. 

If a SIP user wants to call someone who uses a PSTN phone, the system needs
to deal with certain inconvenient aspects of the PSTN. A notation like
919-555-1212@919-555 or 919-555-1313@919-444 might be useful to indicate
that an LNP query has been done, and that authoritative routing information
is now available.  Appending text-based names such as
919-555-1212@919-555@onetel.com or 919-555-1313@919-444@anothertel.com might
even allow subsequent routing to take place without further concessions to
PSTN quirkiness.

Of course this system could also be expanded to mobility services; routing
for 919-555-1313 could be set to 212-666-1414@212-666.bigappletel.com in the
daytime and 919-555-1313@919-444.othertel.com in the evening if you went in
for that kind of commuting.

|> It's also necessary to define what the TRIP should do differently
|> depending on whether the np-queried indication is present.  I must
|> admit I came into this discussion mainly because I have worked on
|> LNP.  I assume the objective is not to route unqueried calls to the
|> donor proxy. 
|
|Hmm. This is something thats also different from the PSTN. The cost of
|routing to the donor proxy in SIP is much less, since proxies can be
|stateless. Thus, if a proxy receives a call for some number that is
|ported, it stateless proxies the call towards the next destination. The
|result is that there is no triangle routing for media (there generally
|isn't), nor for subsequent signaling. There is only marginal cost for
|the donor provider. There are obviously polticial and business issues;
|one may not want to trust or rely upon the donor proxy at all, 
|as is the
|case of LNP in the US. But, the general SIP model is that we assume
|proxies do route calls; no security measures can prevent a proxy from
|dropping messages. Why, in the case of LNP, do we now need to assume
|these proxies won't route calls?
|
|
|
|
| I have noted that originator query may not be practical
|> for nationwide calling and that donor proxy is too late unless you're
|> prepared to consider RTP. 
|
|The assumption of the impractability of originator queries has
|everything to do with the existing structure of LNP. Its 
|mainly because,
|AFAIK, the systems are different all over the world. However, if we use
|the IP model, with a DNS solution, its no harder to query for a number
|on the other side of the planet as it would be for a number next door.

No, it's not quite as simple as that.  The system is designed around the
strengths and weaknesses of the PSTN.  The the architecture of the pstn
makes it easy to route calls on partial information, but switches in the
pstn perform better if they do as few database queries as possible.
Switches work fine if they have no idea of the portability status of most
numbers; they are only set up to query nearby numbers.  A switch doesn't
need authoritative data that a number is not portable.  It just needs to be
set up to query that (local) subset of portable numbers which it would
misroute if it didn't query them.

The LNP databases are distributed because of the geographic restrictions on
Bell Operating Companies.  Each RBOC only has to worry about its own data,
and only has to route queries within its own SS7 signalling network.

There are actually two levels of database, the SCPs that actually handle
queries and the NPAC (?) which processes administrative change requests and
downloads the SCPs.  There could be several SCPs owned by different
operating companies that contain the same data; each operating company would
route queries to its own SCP.  The NPAC service is provided by NeuStar,
formerly Lockheed Martin, and Mark Foster of Neustar has given us some
excellent information on LNP within this thread.

It seems unlikely that IP telephony would use the existing SCPs for queries,
or that it would be based on SS7 TCAP messaging.  I don't have a clear idea
of what databases there would be for IP telephony, but they would certainly
have to arrange to download data from the NPAC.  There are costs associated
with the databases and with keeping the LNP information up to date.

If you want to do source routing, it will certainly take a non-trivial
effort to make North American or even world wide LNP information accessible.
There would be a case for aggregating it with whatever centralized routing
servers there are, or for arranging for the destination's proxy to return
information about ported numbers instead of simply refusing the invitation.

|Also, pardon my ignorance, but what is RTP? Many of us on this 
|list know
|RTP as the Real Time Transport Protocol (rfc1889) but I don't think
|thats what you mean.

In that context, RTP = Release To Pivot; switch A routes a call to switch B
which may provide some service and then releases the call back to A (the
pivot switch) with instructions to reroute the call to destination C.
Sorry, I thought I had expanded it earlier.

Is there any TLA in our businsess that only has one expansion?  What does
TLA mean apart from Three Letter Acronym?

| One answer might be for the TRIP to provide
|> a response on unqueried numbers that routes to an intermediate server
|> that does know how to do NP queries for the destination DN.
|
|TRIP is not a query protocol. Its a routing protocol. This would be a
|SIP function, and is already possible. "408 Not Found".

But why was it not found?  In the telephony e.164 numbering domain prior to
LNP, "not found" meant "does not exist".  LNP required switches to add
"might be somewhere else" logic.  It would be desirable for a routing agent
to say something more informative than "not found", if  it had any
additional information.

------_=_NextPart_001_01BF4673.2B7063F4
Content-Type: text/html;
	charset="windows-1252"

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="Generator" CONTENT="MS Exchange Server version 5.5.2448.0">
<TITLE>RE: TRIP</TITLE>
</HEAD>
<BODY>
<BR>
<BR>

<P><FONT SIZE=2>|-----Original Message-----</FONT>
<BR><FONT SIZE=2>|From: Jonathan Rosenberg [<A HREF="mailto:jdrosen@dynamicsoft.com">mailto:jdrosen@dynamicsoft.com</A>]</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|&gt; John Mainwaring wrote:</FONT>
<BR><FONT SIZE=2>|&gt; </FONT>
<BR><FONT SIZE=2>|&gt; |The problem is related to past discussions on the SIP mailing list</FONT>
<BR><FONT SIZE=2>|&gt; |regarding overlap dialing. A terminating gateway would look at</FONT>
<BR><FONT SIZE=2>|&gt; |sip:1212344, and know how to route it, but might not know whether</FONT>
<BR><FONT SIZE=2>|&gt; this</FONT>
<BR><FONT SIZE=2>|&gt; |was a dialed number with more digits coming, or an LRN. Does it</FONT>
<BR><FONT SIZE=2>|&gt; matter?</FONT>
<BR><FONT SIZE=2>|&gt; |Not being an ISUP expert, I'm not sure. If it does matter, something</FONT>
<BR><FONT SIZE=2>|&gt; |like user=lrn within the SIP URL would fix that.</FONT>
<BR><FONT SIZE=2>|&gt; </FONT>
<BR><FONT SIZE=2>|&gt; user=lrn is almost right.&nbsp; If you have queried a portable number and</FONT>
<BR><FONT SIZE=2>|&gt; found that it is not ported, then the DN has the same status </FONT>
<BR><FONT SIZE=2>|as an LRN</FONT>
<BR><FONT SIZE=2>|&gt; would have if the number were ported (i.e. it should be treated as</FONT>
<BR><FONT SIZE=2>|&gt; authoritative for routing).&nbsp; user=np-queried might be closer to the</FONT>
<BR><FONT SIZE=2>|&gt; mark.</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|I wonder if we can't think about this problem in more general terms.</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|In the SIP model, each proxy owns some piece of the namespace</FONT>
<BR><FONT SIZE=2>|(engineering.dynamicsoft.com, for example), and is therefore </FONT>
<BR><FONT SIZE=2>|responsible</FONT>
<BR><FONT SIZE=2>|for the definition of the user space (jdrosen@) within that domain.</FONT>
<BR><FONT SIZE=2>|Thats why each proxy can, an usually will, perform some kind of URI</FONT>
<BR><FONT SIZE=2>|translation independent from other proxies. Our underlying assumption</FONT>
<BR><FONT SIZE=2>|was that usernames only have meaning within their domain. For example,</FONT>
<BR><FONT SIZE=2>|with sip:jdrosen@dynamicsoft.com, only a dynamicsoft.com proxy </FONT>
<BR><FONT SIZE=2>|knows how</FONT>
<BR><FONT SIZE=2>|to handle jdrosen. There might be jdrosen's in other domains </FONT>
<BR><FONT SIZE=2>|that aren't</FONT>
<BR><FONT SIZE=2>|me. However, in the case of telephone numbers, the proxy that owns the</FONT>
<BR><FONT SIZE=2>|domain does not necessarily own the user space. </FONT>
<BR><FONT SIZE=2>|sip:5551212@gateway.com,</FONT>
<BR><FONT SIZE=2>|for example, uses a user name that is not &quot;owned&quot; by </FONT>
<BR><FONT SIZE=2>|gateway.com, in the</FONT>
<BR><FONT SIZE=2>|sense that this name has valid semantics outside of gateway.com. Other</FONT>
<BR><FONT SIZE=2>|domains, like wcom.com, would know how to handle this number as well.</FONT>
<BR><FONT SIZE=2>|Its possible that we might even see things besides phone </FONT>
<BR><FONT SIZE=2>|numbers as user</FONT>
<BR><FONT SIZE=2>|names that are valid across multiple domains. An example is (heaven</FONT>
<BR><FONT SIZE=2>|forbid), social security numbers (in the US, at least):</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|sip:123-45-6789@wcom.com;user=ssn</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|Now, I might imagine that some kind of mobility services might be</FONT>
<BR><FONT SIZE=2>|supplied for these names, so they might need to be translated also.</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|I'll call these type of user names &quot;cross domain user names&quot;.</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|With cross domain user names, this is where we run into issues </FONT>
<BR><FONT SIZE=2>|like &quot;has</FONT>
<BR><FONT SIZE=2>|the number been queried yet&quot;. However, I think we might see other</FONT>
<BR><FONT SIZE=2>|translation mechanisms besides LNP. Soooo, might it not be useful to</FONT>
<BR><FONT SIZE=2>|define URI parameters that indicate what global translation services</FONT>
<BR><FONT SIZE=2>|have been applied to a cross domain user name?</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|As an example:</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|sip:15551212@cisco.com;user=phone;trans=&quot;lnp,gdbs&quot;</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|where lnp and gdbs are some kind of global translation services that</FONT>
<BR><FONT SIZE=2>|apply to names of the type phone.</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|For cross domain user names, we will always need a URI parameter to</FONT>
<BR><FONT SIZE=2>|indicate the global namespace from which these names are drawn. In the</FONT>
<BR><FONT SIZE=2>|case of phone numbers, thats user=phone. Our original intent with the</FONT>
<BR><FONT SIZE=2>|user=phone parameter was to specify only the type of BNF used for the</FONT>
<BR><FONT SIZE=2>|user part of the URI. But, the more general operation of </FONT>
<BR><FONT SIZE=2>|specifying both</FONT>
<BR><FONT SIZE=2>|the format and the namespace seems useful.</FONT>
</P>

<P><FONT SIZE=2>I think the problem is a bit different.&nbsp; 919-555-1212 uniquely identifies a user within the North American Numbering Plan.&nbsp; It's just that with LNP it can no longer locate the user.&nbsp; If someone wants to use 919-555-1212@vanity.org as an email address and someone else uses 919-555-1212@workplace.com, that's fine, but has nothing to do with telephone numbers.&nbsp; I think I want to be able to place a call when all I know is 919-555-1212.</FONT></P>

<P><FONT SIZE=2>Without LNP, it would have been fairly easy to&nbsp; discover that 919-555 implied bellsouth, so the number could have been given as 919-555-1212@bellsouth.com.&nbsp; Now it is possible that some numbers from 919-555 might be ported to othertel.com.&nbsp; Othertel might the native owner of 919-444-xxxx numbers and might choose to host 919-555-1313 on their 919-444 exchange.&nbsp; In that case, the LRN for 919-555-1313 would be 919-444.&nbsp; Once I have done an LNP query, I might want to use something like 919-555-1212@919-555.bellsouth.com for a number that has not been ported and&nbsp; 919-555-1313@919-444.othertel.com for a number that has been ported to othertel.</FONT></P>

<P><FONT SIZE=2>I can't shorten the 10 digit number in the user name, because of things like NPA overlays and switches that host multiple office codes.&nbsp; I need the full address to select the right user as well as the LRN to route to the right place. </FONT></P>

<P><FONT SIZE=2>If a SIP user wants to call someone who uses a PSTN phone, the system needs to deal with certain inconvenient aspects of the PSTN. A notation like 919-555-1212@919-555 or 919-555-1313@919-444 might be useful to indicate that an LNP query has been done, and that authoritative routing information is now available.&nbsp; Appending text-based names such as 919-555-1212@919-555@onetel.com or 919-555-1313@919-444@anothertel.com might even allow subsequent routing to take place without further concessions to PSTN quirkiness.</FONT></P>

<P><FONT SIZE=2>Of course this system could also be expanded to mobility services; routing for 919-555-1313 could be set to 212-666-1414@212-666.bigappletel.com in the daytime and 919-555-1313@919-444.othertel.com in the evening if you went in for that kind of commuting.</FONT></P>

<P><FONT SIZE=2>|&gt; It's also necessary to define what the TRIP should do differently</FONT>
<BR><FONT SIZE=2>|&gt; depending on whether the np-queried indication is present.&nbsp; I must</FONT>
<BR><FONT SIZE=2>|&gt; admit I came into this discussion mainly because I have worked on</FONT>
<BR><FONT SIZE=2>|&gt; LNP.&nbsp; I assume the objective is not to route unqueried calls to the</FONT>
<BR><FONT SIZE=2>|&gt; donor proxy. </FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|Hmm. This is something thats also different from the PSTN. The cost of</FONT>
<BR><FONT SIZE=2>|routing to the donor proxy in SIP is much less, since proxies can be</FONT>
<BR><FONT SIZE=2>|stateless. Thus, if a proxy receives a call for some number that is</FONT>
<BR><FONT SIZE=2>|ported, it stateless proxies the call towards the next destination. The</FONT>
<BR><FONT SIZE=2>|result is that there is no triangle routing for media (there generally</FONT>
<BR><FONT SIZE=2>|isn't), nor for subsequent signaling. There is only marginal cost for</FONT>
<BR><FONT SIZE=2>|the donor provider. There are obviously polticial and business issues;</FONT>
<BR><FONT SIZE=2>|one may not want to trust or rely upon the donor proxy at all, </FONT>
<BR><FONT SIZE=2>|as is the</FONT>
<BR><FONT SIZE=2>|case of LNP in the US. But, the general SIP model is that we assume</FONT>
<BR><FONT SIZE=2>|proxies do route calls; no security measures can prevent a proxy from</FONT>
<BR><FONT SIZE=2>|dropping messages. Why, in the case of LNP, do we now need to assume</FONT>
<BR><FONT SIZE=2>|these proxies won't route calls?</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>| I have noted that originator query may not be practical</FONT>
<BR><FONT SIZE=2>|&gt; for nationwide calling and that donor proxy is too late unless you're</FONT>
<BR><FONT SIZE=2>|&gt; prepared to consider RTP. </FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|The assumption of the impractability of originator queries has</FONT>
<BR><FONT SIZE=2>|everything to do with the existing structure of LNP. Its </FONT>
<BR><FONT SIZE=2>|mainly because,</FONT>
<BR><FONT SIZE=2>|AFAIK, the systems are different all over the world. However, if we use</FONT>
<BR><FONT SIZE=2>|the IP model, with a DNS solution, its no harder to query for a number</FONT>
<BR><FONT SIZE=2>|on the other side of the planet as it would be for a number next door.</FONT>
</P>

<P><FONT SIZE=2>No, it's not quite as simple as that.&nbsp; The system is designed around the strengths and weaknesses of the PSTN.&nbsp; The the architecture of the pstn makes it easy to route calls on partial information, but switches in the pstn perform better if they do as few database queries as possible.&nbsp; Switches work fine if they have no idea of the portability status of most numbers; they are only set up to query nearby numbers.&nbsp; A switch doesn't need authoritative data that a number is not portable.&nbsp; It just needs to be set up to query that (local) subset of portable numbers which it would misroute if it didn't query them.</FONT></P>

<P><FONT SIZE=2>The LNP databases are distributed because of the geographic restrictions on Bell Operating Companies.&nbsp; Each RBOC only has to worry about its own data, and only has to route queries within its own SS7 signalling network.</FONT></P>

<P><FONT SIZE=2>There are actually two levels of database, the SCPs that actually handle queries and the NPAC (?) which processes administrative change requests and downloads the SCPs.&nbsp; There could be several SCPs owned by different operating companies that contain the same data; each operating company would route queries to its own SCP.&nbsp; The NPAC service is provided by NeuStar, formerly Lockheed Martin, and Mark Foster of Neustar has given us some excellent information on LNP within this thread.</FONT></P>

<P><FONT SIZE=2>It seems unlikely that IP telephony would use the existing SCPs for queries, or that it would be based on SS7 TCAP messaging.&nbsp; I don't have a clear idea of what databases there would be for IP telephony, but they would certainly have to arrange to download data from the NPAC.&nbsp; There are costs associated with the databases and with keeping the LNP information up to date.</FONT></P>

<P><FONT SIZE=2>If you want to do source routing, it will certainly take a non-trivial effort to make North American or even world wide LNP information accessible.&nbsp; There would be a case for aggregating it with whatever centralized routing servers there are, or for arranging for the destination's proxy to return information about ported numbers instead of simply refusing the invitation.</FONT></P>

<P><FONT SIZE=2>|Also, pardon my ignorance, but what is RTP? Many of us on this </FONT>
<BR><FONT SIZE=2>|list know</FONT>
<BR><FONT SIZE=2>|RTP as the Real Time Transport Protocol (rfc1889) but I don't think</FONT>
<BR><FONT SIZE=2>|thats what you mean.</FONT>
</P>

<P><FONT SIZE=2>In that context, RTP = Release To Pivot; switch A routes a call to switch B which may provide some service and then releases the call back to A (the pivot switch) with instructions to reroute the call to destination C.&nbsp; Sorry, I thought I had expanded it earlier.</FONT></P>

<P><FONT SIZE=2>Is there any TLA in our businsess that only has one expansion?&nbsp; What does TLA mean apart from Three Letter Acronym?</FONT>
</P>

<P><FONT SIZE=2>| One answer might be for the TRIP to provide</FONT>
<BR><FONT SIZE=2>|&gt; a response on unqueried numbers that routes to an intermediate server</FONT>
<BR><FONT SIZE=2>|&gt; that does know how to do NP queries for the destination DN.</FONT>
<BR><FONT SIZE=2>|</FONT>
<BR><FONT SIZE=2>|TRIP is not a query protocol. Its a routing protocol. This would be a</FONT>
<BR><FONT SIZE=2>|SIP function, and is already possible. &quot;408 Not Found&quot;.</FONT>
</P>

<P><FONT SIZE=2>But why was it not found?&nbsp; In the telephony e.164 numbering domain prior to LNP, &quot;not found&quot; meant &quot;does not exist&quot;.&nbsp; LNP required switches to add &quot;might be somewhere else&quot; logic.&nbsp; It would be desirable for a routing agent to say something more informative than &quot;not found&quot;, if&nbsp; it had any additional information.</FONT></P>

</BODY>
</HTML>
------_=_NextPart_001_01BF4673.2B7063F4--



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 14 17:28:16 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA03462
	for <sip-archive@odin.ietf.org>; Tue, 14 Dec 1999 17:28:15 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 1191A52DB; Tue, 14 Dec 1999 17:25:35 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 5E11752FF; Tue, 14 Dec 1999 17:25:34 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A884752DB
	for <sip@lists.research.bell-labs.com>; Tue, 14 Dec 1999 17:25:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 14 17:24:16 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Tue Dec 14 17:22:42 EST 1999
Received: from mr3.exu.ericsson.se (mr3a.ericsson.com [198.215.127.159])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id QAA07408;
	Tue, 14 Dec 1999 16:24:08 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr3.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id QAA00939;
	Tue, 14 Dec 1999 16:24:08 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id QAA16074; Tue, 14 Dec 1999 16:24:07 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id QAA06833;
	Tue, 14 Dec 1999 16:24:06 -0600 (CST)
Message-Id: <199912142224.QAA06833@b04a24.exu.ericsson.se>
Subject: Re: URL Generalization for Portability (was TRIP)
To: dean.willis@wcom.com (Dean Willis)
Date: Tue, 14 Dec 1999 16:24:06 -0600 (CST)
Cc: jdrosen@dynamicsoft.com, crm312a@nortelnetworks.com, mark.foster@npac.com,
        iptel@lists.research.bell-labs.com, james.yu@neustar.com,
        sip@lists.research.bell-labs.com
In-Reply-To: <001e01bf466d$373d3140$d19623a6@mcit.com> from "Dean Willis" at Dec 14, 99 01:55:48 pm
From: "Adam B. Roach" <Adam.Roach@Ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>There was some discussion of this problem wrt DCS during the November
>interim meeting. It was suggested that a cross-domain destination which is a
>phone number could be better represented by a tel: URL than by confusing the
>scope of the user part of a sip: URL. This simplilifies life greatly.
>
>Something like
>
>	INVITE premiumservice@gateway.carrier.com
>	To: tel:5551212;trans=lnp?gdbs
>
>could be used to indicate to gateway.carrier.com that premium gateway
>service is requested towards the PSTN location identified by telephone
>number 5551212, that LNP and GDBS translation have been applied, and that
>the phone number is of local scope for the gateway.

Since the To: field isn't allowed to change during the transaction,
aren't you going to run into problems if some service along the way
determines that the called number needs to change (as the result of
LNP, 800/900 lookup, etc)?

For example; let's say that one of the services that I have out in the
network is a "reachable from anywhere" speed dialing list. It maps,
for example, "4" as a telephone number to "2145551212". So I launch
an invite to my local proxy:

  INVITE sip:4@proxy.spleen.com SIP/2.0
  To: tel:4

It goes through my service node:

  INVITE sip:4@usersvc-34987.spleen.com SIP/2.0
  To: tel:4

And he wants to send it on to your gateway for premium service, after
translating the 4 into "2145551212."

It's my interpretation that, under the model you're proposing,
I'd need to send along

  INVITE sip:premiumservice@gateway.carrier.com SIP/2.0
  To: tel:2145551212

But that would break the transaction, since the To: field has changed.

I understand the distinction between destination and service
activation that you're trying to make, but your example seems
unworkable. What am I missing?

-- 
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 01:05:11 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA14618
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 01:05:11 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 8177F52FC; Wed, 15 Dec 1999 01:01:34 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E6A5E5300; Wed, 15 Dec 1999 01:01:33 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 4EA9D52FC
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 01:01:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec 15 00:59:49 EST 1999
Received: from beta.mcit.com ([199.249.19.244]) by dusty; Wed Dec 15 00:58:16 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #38417)
 id <0FMR00E01PZMLP@firewall.mcit.com>; Wed, 15 Dec 1999 05:59:46 +0000 (GMT)
Received: from omzrelay.mcit.com ([166.37.204.49])
 by firewall.mcit.com (PMDF V5.2-32 #38417)
 with ESMTP id <0FMR00EDYPZMOE@firewall.mcit.com>; Wed,
 15 Dec 1999 05:59:46 +0000 (GMT)
Received: from omta3.mcit.com (omta3.mcit.com [166.37.204.5])
 by omzrelay.mcit.com (8.8.7/) with ESMTP	id FAA09508; Wed,
 15 Dec 1999 05:59:48 +0000 (GMT)
Received: from dwillispc ([166.44.162.174])
 by omta3.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991215055954.WOAM27548@dwillispc>; Wed,
 15 Dec 1999 05:59:54 +0000
Date: Tue, 14 Dec 1999 23:56:32 -0600
From: Dean Willis <dean.willis@wcom.com>
Subject: RE: URL Generalization for Portability (was TRIP)
In-reply-to: <199912142224.QAA06833@b04a24.exu.ericsson.se>
To: "Adam B. Roach" <Adam.Roach@Ericsson.com>
Cc: iptel@lists.research.bell-labs.com, sip@lists.research.bell-labs.com
Message-id: <001b01bf46c1$23940980$d19623a6@directlink.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Adam wrote:
> Dean blurted
> >Something like
> >
> >	INVITE premiumservice@gateway.carrier.com
> >	To: tel:5551212;trans=lnp?gdbs
> >
> >could be used to indicate to gateway.carrier.com that premium gateway
> >service is requested towards the PSTN location identified by telephone
> >number 5551212, that LNP and GDBS translation have been applied, and that
> >the phone number is of local scope for the gateway.
>
> Since the To: field isn't allowed to change during the transaction,
> aren't you going to run into problems if some service along the way
> determines that the called number needs to change (as the result of
> LNP, 800/900 lookup, etc)?

Right you are. That should teach me not to come up with examples while
squatting on one of those interminable telco conference calls.

But I still think using a tel: url gives a cleaner semantic than
sip:number@gateway;user=phone.

I was talking with some guys today about scope and context, and I'm inclined
to think we need the nature of address and numbering plan indicator fields
out of some ISUP variants. Scope appears to be global, local, or private,
with some need to represent local and private within some context like area
code or private numbering plan.

So, for example

tel:+19727294162 is a global number with unspecified context,
tel:9727294162 is a local number
tel:7724162;phone-context=mcivnet34 is a private number with context in the
MCI private numbering plan #34
tel:4512345687724162;phone-context=mciswtrunk is a private number, in
numbering plan 45, relative to switch 123 and trunk group 45678
. . . and whatever other sick private variants one might come up with


--
Dean




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 05:26:10 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id FAA28662
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 05:26:10 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 01D165300; Wed, 15 Dec 1999 05:23:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 76E605301; Wed, 15 Dec 1999 05:23:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 07AC75300
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 05:23:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 15 05:21:46 EST 1999
Received: from odisei.com ([195.78.3.169]) by dusty; Wed Dec 15 05:20:15 EST 1999
Received: from toshjhr.odisei.com (192.168.0.104) by odisei.com with SMTP
 (Eudora Internet Mail Server 2.2.2); Wed, 15 Dec 1999 11:34:57 +0100
Message-Id: <3.0.5.32.19991215105121.0140e580@mail.odisei.com>
X-Sender: Jean-Hugues@mail.odisei.com
X-Mailer: QUALCOMM Windows Eudora Light Version 3.0.5 (32)
Date: Wed, 15 Dec 1999 10:51:21 +0100
To: sip@lists.research.bell-labs.com
From: Jean-Hugues ROBERT <jhr@odisei.com>
Subject: Re: User signaling -- was  DTMF signaling between media
  gateways -ouch!
In-Reply-To: <199912141530.JAA03709@b04a45.exu.ericsson.se>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Hi all,

Some cross polenization here:

H.323 people are developping a new annex, annex F,
called SET (Simple Endpoint Type).

It is designed to run in low cost IP phones.

------------
DTMF & other user input (soft-keys, feature keys,
function keys, keypad...) are put in the Signaling Channel.

DTMF can optionnaly use RTP DTMF payload.
-----------

I guess that this design meet 2 requirements:
	- Accurate transmission of DTMF at media level, as
	required to interoperate with existing circuit 
	switched IVRs.
	- Separation of concern between media plane and
	control plane to enable decomposed IVR architectures.

SET is also UDP based and GateKeeper friendly. You
may consider SET/GK as a competitor to MGCP's MGW/MGC
architecture or SIP's UA/Proxy architecture.

Jean-Hugues Robert

--------------------------------------------------------------------
jhr@8x8.com        - We Serve Providers -          "Think globally.
www.8x8.com      - iPBX Hosting solutions -            Act locally."



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 07:36:01 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id HAA00426
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 07:36:00 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 907C75302; Wed, 15 Dec 1999 07:33:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 29A545301; Wed, 15 Dec 1999 07:33:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id D81955301
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 07:33:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 15 07:31:22 EST 1999
Received: from omzrelay03.mcit.com ([199.249.19.245]) by dusty; Wed Dec 15 07:29:47 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-29 #38418)
 id <0FMS00801848X5@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Wed, 15 Dec 1999 12:31:20 +0000 (GMT)
Received: from ndcrelay.mcit.com ([166.37.172.49])
 by firewall.mcit.com (PMDF V5.2-29 #38418)
 with ESMTP id <0FMS0081Q848EG@firewall.mcit.com>; Wed,
 15 Dec 1999 12:31:20 +0000 (GMT)
Received: from omzmta02.mcit.com (omzmta02.mcit.com [166.37.194.120])
 by ndcrelay.mcit.com (8.8.7/) with ESMTP	id MAA11737; Wed,
 15 Dec 1999 12:29:42 +0000 (GMT)
Received: from C25766B ([166.44.156.80])
 by omzmta02.mcit.com (InterMail v03.02.05 118 120)
 with SMTP id <19991215123108.HBVN27835@[166.44.156.80]>; Wed,
 15 Dec 1999 12:31:08 +0000
Date: Wed, 15 Dec 1999 06:31:06 -0600
From: Henry Sinnreich <henry.sinnreich@wcom.com>
Subject: RE: User signaling -- was  DTMF signaling between media gateways -ouch!
In-reply-to: <3.0.5.32.19991215105121.0140e580@mail.odisei.com>
To: Jean-Hugues ROBERT <jhr@odisei.com>, sip@lists.research.bell-labs.com
Message-id: <NDBBLDFEGLJBHBGBKCFOCEBHCGAA.henry.sinnreich@wcom.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>H.323 people are developping a new annex, annex F,
>called SET (Simple Endpoint Type).

This may be a good reality check to see the size of H.323 and SIP clients if
compared for similar capabilities!

Henry

Henry Sinnreich
MCI WorldCom
400 International Parkway
Richardson, Texas 75081
USA

-----Original Message-----
From: owner-sip@lists.research.bell-labs.com
[mailto:owner-sip@lists.research.bell-labs.com]On Behalf Of Jean-Hugues
ROBERT
Sent: Wednesday, December 15, 1999 3:51 AM
To: sip@lists.research.bell-labs.com
Subject: Re: User signaling -- was DTMF signaling between media gateways
-ouch!


Hi all,

Some cross polenization here:

H.323 people are developping a new annex, annex F,
called SET (Simple Endpoint Type).

It is designed to run in low cost IP phones.

------------
DTMF & other user input (soft-keys, feature keys,
function keys, keypad...) are put in the Signaling Channel.

DTMF can optionnaly use RTP DTMF payload.
-----------

I guess that this design meet 2 requirements:
	- Accurate transmission of DTMF at media level, as
	required to interoperate with existing circuit
	switched IVRs.
	- Separation of concern between media plane and
	control plane to enable decomposed IVR architectures.

SET is also UDP based and GateKeeper friendly. You
may consider SET/GK as a competitor to MGCP's MGW/MGC
architecture or SIP's UA/Proxy architecture.

Jean-Hugues Robert

--------------------------------------------------------------------
jhr@8x8.com        - We Serve Providers -          "Think globally.
www.8x8.com      - iPBX Hosting solutions -            Act locally."




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 09:56:03 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA03908
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 09:56:02 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9F54652D6; Wed, 15 Dec 1999 09:53:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 0C1705301; Wed, 15 Dec 1999 09:53:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 0012752D6
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 09:53:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec 15 09:52:54 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Wed Dec 15 09:51:18 EST 1999
Received: by dnspri.npac.com; id AA264629561; Wed, 15 Dec 1999 08:52:41 -0600
Received: from chi02.npac.com(208.143.39.132) by dnspri.npac.com via smap (3.2)
	id xma026443; Wed, 15 Dec 99 08:52:35 -0600
Received: by chi02.npac.com with Internet Mail Service (5.5.2232.9)
	id <YF8J1Z7V>; Wed, 15 Dec 1999 08:48:31 -0600
Message-Id: <ED88182BFF78D211A4D800A0C9E9435C3BE948@dc02.npac.com>
From: James Yu <james.yu@neustar.com>
To: "'albert.e.manfredi@boeing.com'" <albert.e.manfredi@boeing.com>
Cc: enum@ietf.org, sip@lists.research.bell-labs.com
Subject: RE: [Enum] Nation-Specific ISUP implementations, Overlap Signalin
	g  & NumberPortability Database Queries
Date: Wed, 15 Dec 1999 08:46:13 -0600
Mime-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2232.9)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Bert,

Please see inserts marked by ****.

James

-----Original Message-----
From: Albert Manfredi [mailto:albert.e.manfredi@boeing.com]
Sent: Monday, December 13, 1999 12:09 PM
To: James Yu; sip@lists.research.bell-labs.com
Cc: enum@ietf.org
Subject: RE: [Enum] Nation-Specific ISUP implementations, Overlap
Signaling & NumberPortability Database Queries


I don't think I understand all the issues you're raising. But, on
the number portability database (NPDB) question, why not just map
each portable number only to an E.164 number in the NPDB? The DNS
could do that job quite well, I think.


**** It is not clear what "why not just map each portable number only to an
E.164 number in the NPDB?" means.  Please clarify. ****

For simple telephony devices, when a user dials a portable number,
the central office starts by querying the DNS or other similar
database. The reply is E.164, and the central office knows whether
this number is local, long distance, or international with respect
to itself. It knows this because it is programmed to know its own
country code and area code. So it knows how to translate that E.164
number into something it can dial. And it dials accordingly,
changing nothing from current practice.

**** I assume that the "E.164" in the reply means the routing prefix or the
LRN (with country code). ****


Smart terminals can query the NPDB (DNS) directly and translate the
E.164 number returned into something in the local dialing plan. Or
use the IP address, if available.


**** It is not clear why "local dialing plan" is involved in this example if
the smart device is already connected with the internet.   If the smart
terminal uses the internet to get the routing prefix or LRN but accesses the
SCN for call initiation, there is no way this "smart terminal" can provide
both the dialed number and the routing prefix/LRN to the SCN. ****

The simplest way to accommodate mobile terminals is to have them
operate through a home server, as if they are always at that home
location. This seems wasteful when one is roaming.

Alternatively, the mobile station, when accessing the the NPDB via
its roaming access base station, can have that base station
translate the E.164 number returned by the NPDB into the local
dialing plan.


**** It won't be a "base station" performing that function.  Either a mobile
(services) switching center (MSC) or some interworking function will perform
that function. But it is not clear why a mobile station will need to access
the NPDB directly unless it is the "smart terminal" you mentioned earlier
and is using Internet to reach the called party.  ****

But I don't think that most of these issues are enum wg issues. I
could be wrong. Also, I don't understand all the acronyms you use,
but maybe that's just me.

**** Please list those acronyms.  I can provide the info.  They might have
been provided in earlier messages. ****


Bert
albert.e.manfredi@boeing.com


> -----Original Message-----
> From: enum-admin@ietf.org [mailto:enum-admin@ietf.org]On
> Behalf Of James
> Yu
> Sent: Monday, December 13, 1999 11:20 AM
> To: 'sip@lists.research.bell-labs.com'
> Cc: 'enum@ietf.org'
> Subject: [Enum] Nation-Specific ISUP implementations,
> Overlap Signaling
> & NumberPortability Database Queries
>
>
> The following discussions focus on SCN-IP-SCN calls.
>
> There are nation-specific variatoins in ISUP
> implementations.  I don't know
> whether this issue has been discussed (I'm new to IETF).
> When we have only
> a few GWs, it is fine that those GWs support many ISUP
> implementations.  But
> when many GWs are deployed, it is not likely that every
> GW will support many
> ISUP implementations.  Some may be used only for domestic
> use.  So it is
> likely that an international call may need to be routed to an
> "international" GW (or more than one) that interworks between two
> nation-specific ISUP implementations.  To fully use the
> IP network, then the
> "international" GW will further route the call to a "domestic" GW
> (destination GW) that terminates the call into the SCN.
> The call can
> certainly be routed to the destination SCN but the call
> charge may be
> higher.
>
> This would seem to be inefficient that the user traffic
> must be routed
> through additional GW(s).  ISUP interworking probably can
> be done via a pure
> signaling conversion/mapping so that the user traffic can
> be routed directly
> to the destination GW.
>
> If we need to perform number portability queries, then a
> good place would be
> the destination "international" GW because it is close to
> the destination
> country and supports the destination country's Number
> Portability Database
> (NPDB) interface.  In that case, simple ISUP interworking
> mentioned above
> won't be sufficient.  A NPDB query also needs to be
> launched. The response
> to the NPDB query will decide the destination GW that
> should terminate the
> call.
>
> Due to number portability, the called party's serving SCN
> switch changes
> when the called user switches to a new service provider.
> Whenever that
> happens, the NPDB will reflect the current new serving
> switch or network
> information (via Location Routing Number in the North
> America or Routing
> Prefix in the Europe), and the "destination" GW that can
> reach the serving
> switch or network may change.  So a NPDB query is
> required to determine the
> correct GW to terminate the call.
>
> At ENUM, we have been discussing where to perform the
> NPDB queries.  The
> originating GW needs to support all nation-specific NPDB
> interfaces if it is
> to query those NPDBs.  This would be expensive.  Also
> there is an issue
> about the encapsulated ISUP message in the SIP if originating GW's
> nationa-specific ISUP message is encapsulated (may be
> everyone should use
> ITU-T ISUP that is used between international switches
> for communicating
> among the entities in the IP domain).  The destination GW
> can support
> specific NPDB interface; however, it may be the wrong GW
> because it cannot
> reach the serving switch in the SCN that serves the called party.
>
> Overlap signaling would make the issue more complicate.
> If the call routing
> decision is to route to the "international" GW, it is
> fine because number
> portability is confined within a national domain.  That
> "international" GW
> will then wait for additional address information and
> performs the NPDB
> query, if required.  But if the call is to be routed
> directly to the
> destination GW, and if the originating GW is the one to
> perform the NPDB,
> then it has to collect all the address information before
> it can launch the
> query.  But the issue is that the originating GW may not
> know it has
> collected all the address digits.
>
> It seems that the best entity that knows that it has
> collected all the
> digits and can perform the NPDB query would be the destination
> "international" GW.
>
> I have linked several issues (nation-specific ISUP
> implementations, number
> portability, and user traffic routing efficiency)
> together that need to be
> addressed as a whole.  There may be other issues.  It is
> hoped that one or
> more solutions can be identified and finalized.
>
> _______________________________________________
> enum mailing list
> enum@ietf.org
> http://www.ietf.org/mailman/listinfo/enum
>




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 10:34:04 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA04644
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 10:34:03 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7BF4452E2; Wed, 15 Dec 1999 10:31:34 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E0F9E5301; Wed, 15 Dec 1999 10:31:33 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9661B52E2
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 10:31:07 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 15 10:29:33 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Wed Dec 15 10:27:57 EST 1999
Received: from mr4.exu.ericsson.se (mr4a.ericsson.com [198.215.127.160])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id JAA12687;
	Wed, 15 Dec 1999 09:29:16 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr4.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id JAA08699;
	Wed, 15 Dec 1999 09:29:15 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id JAA24472; Wed, 15 Dec 1999 09:29:15 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id JAA08677;
	Wed, 15 Dec 1999 09:29:14 -0600 (CST)
Message-Id: <199912151529.JAA08677@b04a24.exu.ericsson.se>
Subject: Re: URL Generalization for Portability (was TRIP)
To: dean.willis@wcom.com (Dean Willis)
Date: Wed, 15 Dec 1999 09:29:14 -0600 (CST)
Cc: Adam.Roach@ericsson.com, iptel@lists.research.bell-labs.com,
        sip@lists.research.bell-labs.com
In-Reply-To: <001b01bf46c1$23940980$d19623a6@directlink.net> from "Dean Willis" at Dec 14, 99 11:56:32 pm
From: "Adam B. Roach" <Adam.Roach@ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Dean Willis writes:

>I was talking with some guys today about scope and context, and I'm inclined
>to think we need the nature of address and numbering plan indicator fields
>out of some ISUP variants. Scope appears to be global, local, or private,
>with some need to represent local and private within some context like area
>code or private numbering plan.
>
>So, for example
>
>tel:+19727294162 is a global number with unspecified context,
>tel:9727294162 is a local number
>tel:7724162;phone-context=mcivnet34 is a private number with context in the
>MCI private numbering plan #34
>tel:4512345687724162;phone-context=mciswtrunk is a private number, in
>numbering plan 45, relative to switch 123 and trunk group 45678
>. . . and whatever other sick private variants one might come up with

If we proceed with the idea of scoping numbers "like ISUP," could we 
align it with ISUP a little more closely? It would make interoperation
*much* easier.

ISUP defines four scopes; the list of them follows, along with
suggestions for representing them.

1) Subscriber number (significant within an area/city code)
   tel:5555555;phone-context=local

2) Unknown (usually a private numbering plan)
   tel:7724162;phone-context=mcivnet34
   or
   tel:4512345687724162;phone-context=mciswtrunk
   or
   tel:34251;phone-context=unknown
   or
   tel:23456;phone-context=private
   or
   ...

3) National number (sigificant within a country)
   tel:2145555555;phone-context=national

4) International number (globally significant)
   tel:12145555555;phone-context=global
   or
   tel:+12145555555


--
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 14:45:48 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA11531
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 14:45:48 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id AC60952E3; Wed, 15 Dec 1999 14:43:24 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 27ED152E6; Wed, 15 Dec 1999 14:43:24 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id A4B3952E3
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 14:43:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec 15 14:41:23 EST 1999
Received: from stl-smtpout-01.boeing.com ([12.13.247.21]) by dusty; Wed Dec 15 14:39:48 EST 1999
Received: from blv-av-01.boeing.com ([192.54.3.60])
	by stl-smtpout-01.boeing.com (8.9.2/8.8.5-M2) with ESMTP id NAA15254
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 13:39:48 -0600 (CST)
Received: from blv-hub-01.boeing.com (localhost [127.0.0.1])
	by blv-av-01.boeing.com (8.9.2/8.9.2-MAV1) with ESMTP id LAA21487
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 11:36:03 -0800 (PST)
Received: from [199.191.48.146] by blv-hub-01.boeing.com for sip@lists.research.bell-labs.com; Wed, 15 Dec 1999 11:35:50 -0800
Received: by engr03.arl.bna.boeing.com (UCX V4.1-12A, OpenVMS V7.1 Alpha);
	Wed, 15 Dec 1999 14:34:43 -0500
Reply-To: <albert.e.manfredi@boeing.com>
From: "Albert Manfredi" <albert.e.manfredi@boeing.com>
To: "James Yu" <james.yu@neustar.com>
Cc: <enum@ietf.org>, <sip@lists.research.bell-labs.com>
Subject: RE: [Enum] Nation-Specific ISUP implementations, Overlap Signaling  & NumberPortability Database Queries
Date: Wed, 15 Dec 1999 14:35:36 -0500
Message-Id: <NDBBIBKKCLEFDFDGHCNMEEDOCBAA.albert.e.manfredi@boeing.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-reply-to: <ED88182BFF78D211A4D800A0C9E9435C3BE948@dc02.npac.com>
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.3155.0
Importance: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

James Yu [mailto:james.yu@neustar.com] wrote:

>
> Bert,
>
> Please see inserts marked by ****.
>
> James
>
> **** It is not clear what "why not just map each portable
> number only to an
> E.164 number in the NPDB?" means.  Please clarify. ****

I was suggesting here that the number portability database (NPDB)
would be a database which maps

portable number <---> E.164 "home" number,

in its simplest incarnation, and that therefore putting this
function within the existing DNS, as in

portable no.(as Internet name) <--> IP addr <--> E.164 (in AESA)

ought to work. A portable number is just a globally unique arbitrary
ID, after all, much like the Internet name is.

> **** I assume that the "E.164" in the reply means the
> routing prefix or the
> LRN (with country code). ****

It means the standard E.164 format, with country code etc., but not
in any one national dialing plan. In the US, for instance, you would
have to add "011" in front of it to dial out.

> Smart terminals can query the NPDB (DNS) directly and
> translate the
> E.164 number returned into something in the local dialing plan. Or
> use the IP address, if available.
>
> **** It is not clear why "local dialing plan" is involved
> in this example if
> the smart device is already connected with the internet. ****

Because it is possible that the destination side is not
IP-connected. In the general case, the smart terminal might have to
initiate a telephone call, and the local dialing plan would be
needed. Or are you assuming the use of MEGACO or something like
that?

> **** If the smart
> terminal uses the internet to get the routing prefix or
> LRN but accesses the
> SCN for call initiation, there is no way this "smart
> terminal" can provide
> both the dialed number and the routing prefix/LRN to the SCN. ****

Not sure what this means.

> The simplest way to accommodate mobile terminals is to have them
> operate through a home server, as if they are always at that home
> location. This seems wasteful when one is roaming.
>
> Alternatively, the mobile station, when accessing the the NPDB via
> its roaming access base station, can have that base station
> translate the E.164 number returned by the NPDB into the local
> dialing plan.
>
>
> **** It won't be a "base station" performing that
> function.  Either a mobile
> (services) switching center (MSC) or some interworking
> function will perform
> that function. ****

Good point.

> **** But it is not clear why a mobile station
> will need to access
> the NPDB directly unless it is the "smart terminal" you
> mentioned earlier
> and is using Internet to reach the called party.  ****

Good point again, but again, the smart user might need to call a
dumb telephone. Take the case where I fly from Wash DC to Paris with
my roaming host, and want to dial a portable number of my French
buddy, who happens to be located in Paris. I want the number
returned from the NPDB to be translated into the local Paris
numbering plan. (Perhaps this is not a problem if we assume MEGACO.)
I would not want to make that local Paris call via Wash DC.

In any event, if a roaming mobile station needs to dial a non-IP
called party with portable number, that destination portable number
will need to be translated into the roaming station's _current_
national numbering plan. That was the only point I was trying to
make. Someone has to translate the E.164 number returned by the NPDB
into something that can be dialed locally. (This is not an enum
issue, though.)

> **** Please list those acronyms.  I can provide the info.
>  They might have
> been provided in earlier messages. ****

SCN, LRN, and GW. I think GW means gateway. The others are obviously
telephone number formats.

Bert
albert.e.manfredi@boeing.com




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 15:03:43 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA25127
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 15:03:43 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 1C3DD52E0; Wed, 15 Dec 1999 15:01:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 914E152E9; Wed, 15 Dec 1999 15:01:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 707FF52E0
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 15:01:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec 15 14:59:31 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Wed Dec 15 14:57:55 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id CAA06372;
	Thu, 16 Dec 1999 02:11:19 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256848.006D9ECC ; Thu, 16 Dec 1999 01:27:20 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Marc Petit-Huguenin <petithug@8x8.com>
Cc: IETF SIP <sip@lists.research.bell-labs.com>
Message-ID: <65256848.006D9D53.00@sampark.hss.hns.com>
Date: Thu, 16 Dec 1999 01:27:15 +0530
Subject: Re: Question about Call comparaison
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



Well, since the RFC states that since 5060 is the default port, the second
message implicitly states that.
so yes, I would treat it as the same.
imho, if the app. sees a null port,it should implictly take it as 5060 and
then do the call leg identification as stated in the notes and
clarifications.
Is there any problem if this is the approach ?
Regds
Arjun
--
Arjun Roychowdhury @ Hughes Software Systems





Marc Petit-Huguenin <petithug@8x8.com> on 12/16/99 01:01:56 AM

To:   IETF SIP <sip@lists.research.bell-labs.com>
cc:

Subject:  Question about Call comparaison




Hi all,

Is the two following requests belongs to the same call or not (please
notes the difference in the port)

 INVITE sip:petithug@8x8.com SIP/2.0
 From: Isabelle <sip:isa@8x8.com:5060>
 To: Marc <sip:petithug@8x8.com>
 Call-Id: 0123456789@tarantula.8x8.com
 CSeq: 1 INVITE
 Via: SIP/2.0/UDP tarantula.8x8.com
 Content-Length: 0

[some other message...]

 INVITE sip:petithug@8x8.com SIP/2.0
 From: Isabelle <sip:isa@8x8.com>
 To: Marc <sip:petithug@8x8.com>
 Call-Id: 0123456789@tarantula.8x8.com
 CSeq: 2 INVITE
 Via: SIP/2.0/UDP tarantula.8x8.com
 Content-Length: 0

At least two implementations at the last bake-off does not like this.

Thank you for your help.

--
Marc Petit-Huguenin
Home: mailto:petithug@cyberservices.com
Work: mailto:petithug@8x8.com
"Everything I love is either immoral, illegal or makes you fat"








From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 15:07:14 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA25176
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 15:07:14 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 5C7BF52E9; Wed, 15 Dec 1999 15:03:31 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 8347D5301; Wed, 15 Dec 1999 15:03:30 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 8C6DD52E9
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 15:03:08 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 15 15:02:01 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Wed Dec 15 15:00:26 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id CAA06475
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 02:14:16 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256848.006DE39D ; Thu, 16 Dec 1999 01:30:16 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: sip@lists.research.bell-labs.com
Message-ID: <65256848.006DE292.00@sampark.hss.hns.com>
Date: Thu, 16 Dec 1999 01:30:13 +0530
Subject: Third Bakeoff test results
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



Hi,
when could we expect updates on Henning's site for the 3rd bakeoff ?
Were there any new tests conducted which will be posted like those of the
2nd bakeoff ?

Also, one further question - since  SIP+ has been superceded by INFO and
other extensions,
is a message with protocol other than SIP / <xxx> valid anymore ?

Thanx
Regds
Arjun





From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 15:39:45 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA29284
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 14:37:59 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 629F352B6; Wed, 15 Dec 1999 14:35:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id C75C352DF; Wed, 15 Dec 1999 14:35:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 6A2FB52B6
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 14:35:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec 15 14:34:02 EST 1999
Received: from odisei.com ([195.78.3.169]) by dusty; Wed Dec 15 14:32:27 EST 1999
Received: from 8x8.com (192.168.2.20) by odisei.com with ESMTP (Eudora Internet
 Mail Server 2.2.2); Wed, 15 Dec 1999 20:47:12 +0100
Message-ID: <3857ECAC.3BEC7D1A@8x8.com>
Date: Wed, 15 Dec 1999 19:31:56 +0000
From: Marc Petit-Huguenin <petithug@8x8.com>
Organization: 8x8 - Network Software Division
X-Mailer: Mozilla 4.7 [en] (X11; U; Linux 2.2.13 i686)
X-Accept-Language: fr-FR, fr, en
MIME-Version: 1.0
To: IETF SIP <sip@lists.research.bell-labs.com>
Subject: Question about Call comparaison
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Hi all,

Is the two following requests belongs to the same call or not (please
notes the difference in the port)

 INVITE sip:petithug@8x8.com SIP/2.0
 From: Isabelle <sip:isa@8x8.com:5060>
 To: Marc <sip:petithug@8x8.com>
 Call-Id: 0123456789@tarantula.8x8.com
 CSeq: 1 INVITE
 Via: SIP/2.0/UDP tarantula.8x8.com
 Content-Length: 0

[some other message...]

 INVITE sip:petithug@8x8.com SIP/2.0
 From: Isabelle <sip:isa@8x8.com>
 To: Marc <sip:petithug@8x8.com>
 Call-Id: 0123456789@tarantula.8x8.com
 CSeq: 2 INVITE
 Via: SIP/2.0/UDP tarantula.8x8.com
 Content-Length: 0

At least two implementations at the last bake-off does not like this.

Thank you for your help.

-- 
Marc Petit-Huguenin
Home: mailto:petithug@cyberservices.com
Work: mailto:petithug@8x8.com
"Everything I love is either immoral, illegal or makes you fat"



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 17:49:47 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA19025
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 17:49:46 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 30E9A5301; Wed, 15 Dec 1999 17:47:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 931805303; Wed, 15 Dec 1999 17:47:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 4D0C45301
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 17:47:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 15 17:46:23 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Wed Dec 15 17:44:47 EST 1999
Received: by dnspri.npac.com; id AA113747975; Wed, 15 Dec 1999 16:46:15 -0600
Received: from chi02.npac.com(208.143.39.132) by dnspri.npac.com via smap (3.2)
	id xma011362; Wed, 15 Dec 99 16:46:02 -0600
Received: by chi02.npac.com with Internet Mail Service (5.5.2448.0)
	id <Y94V57HJ>; Wed, 15 Dec 1999 16:41:58 -0600
Message-Id: <ED88182BFF78D211A4D800A0C9E9435C3BE951@dc02.npac.com>
From: James Yu <james.yu@neustar.com>
To: "'albert.e.manfredi@boeing.com'" <albert.e.manfredi@boeing.com>
Cc: enum@ietf.org, sip@lists.research.bell-labs.com
Subject: RE: [Enum] Nation-Specific ISUP implementations, Overlap Signalin
	g  & Number Portability Database Queries
Date: Wed, 15 Dec 1999 16:39:40 -0600
Mime-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Bert,

I misunderstood the term "portable no." in your previous message.  I thought
it was an E.164 number that can be dialed.  But you mentioned "as Internet
name" so it is something like 4.3.2.1.3.3.5.2.0.2.1.e164.int or
12025331234@e164.int.  But you mentioned after NPDB query, so the E.164
number would be a routing prefix or LRN (with country code).  The routing
prefix or LRN can assist in call routing to the serving network or switch,
but it is the dialed number that can be used by the serving switch to
terminate the call.

Please inserts below for other comments/inputs.

James

> -----Original Message-----
> From: Albert Manfredi [mailto:albert.e.manfredi@boeing.com]
> Sent: Wednesday, December 15, 1999 2:36 PM
> To: James Yu
> Cc: enum@ietf.org; sip@lists.research.bell-labs.com
> Subject: RE: [Enum] Nation-Specific ISUP implementations, Overlap
> Signaling & NumberPortability Database Queries
> 
> 
> James Yu [mailto:james.yu@neustar.com] wrote:
> 
> >
> > Bert,
> >
> > Please see inserts marked by ****.
> >
> > James
> >
> > **** It is not clear what "why not just map each portable
> > number only to an
> > E.164 number in the NPDB?" means.  Please clarify. ****
> 
> I was suggesting here that the number portability database (NPDB)
> would be a database which maps
> 
> portable number <---> E.164 "home" number,
> 
> in its simplest incarnation, and that therefore putting this
> function within the existing DNS, as in
> 
> portable no.(as Internet name) <--> IP addr <--> E.164 (in AESA)
> 
> ought to work. A portable number is just a globally unique arbitrary
> ID, after all, much like the Internet name is.
> 
> > **** I assume that the "E.164" in the reply means the
> > routing prefix or the
> > LRN (with country code). ****
> 
> It means the standard E.164 format, with country code etc., but not
> in any one national dialing plan. In the US, for instance, you would
> have to add "011" in front of it to dial out.
> 
> > Smart terminals can query the NPDB (DNS) directly and
> > translate the
> > E.164 number returned into something in the local dialing plan. Or
> > use the IP address, if available.
> >
> > **** It is not clear why "local dialing plan" is involved
> > in this example if
> > the smart device is already connected with the internet. ****
> 
> Because it is possible that the destination side is not
> IP-connected. In the general case, the smart terminal might have to
> initiate a telephone call, and the local dialing plan would be
> needed. Or are you assuming the use of MEGACO or something like
> that?

If NPDB query is done, then the E.164 number would be a routing number.  The
smart terminal won't be able to use that number to dial out via the SCN.
The SCN will treat that number as the dialed number and a NPDB query will be
performed if it is a ported number.  If the smart terminal is to dial out
from Internet (e.g., via a SIP server), then "dialing plan" won't be
involved.

> 
> > **** If the smart
> > terminal uses the internet to get the routing prefix or
> > LRN but accesses the
> > SCN for call initiation, there is no way this "smart
> > terminal" can provide
> > both the dialed number and the routing prefix/LRN to the SCN. ****
> 
> Not sure what this means.

See the comment above.

> 
> > The simplest way to accommodate mobile terminals is to have them
> > operate through a home server, as if they are always at that home
> > location. This seems wasteful when one is roaming.
> >
> > Alternatively, the mobile station, when accessing the the NPDB via
> > its roaming access base station, can have that base station
> > translate the E.164 number returned by the NPDB into the local
> > dialing plan.
> >
> >
> > **** It won't be a "base station" performing that
> > function.  Either a mobile
> > (services) switching center (MSC) or some interworking
> > function will perform
> > that function. ****
> 
> Good point.
> 
> > **** But it is not clear why a mobile station
> > will need to access
> > the NPDB directly unless it is the "smart terminal" you
> > mentioned earlier
> > and is using Internet to reach the called party.  ****
> 
> Good point again, but again, the smart user might need to call a
> dumb telephone. Take the case where I fly from Wash DC to Paris with
> my roaming host, and want to dial a portable number of my French
> buddy, who happens to be located in Paris. I want the number
> returned from the NPDB to be translated into the local Paris
> numbering plan. (Perhaps this is not a problem if we assume MEGACO.)
> I would not want to make that local Paris call via Wash DC.
> 
> In any event, if a roaming mobile station needs to dial a non-IP
> called party with portable number, that destination portable number
> will need to be translated into the roaming station's _current_
> national numbering plan. That was the only point I was trying to
> make. Someone has to translate the E.164 number returned by the NPDB
> into something that can be dialed locally. (This is not an enum
> issue, though.)

I don't quite get your point.  The "translation" you mentioned is a feature
called "optimal routing" in GSM (European cellular standards).  Technically,
it can be done.  The requirement is for the originating switch (or
intermediate switch) to query the dialed mobile station's "home location
register (HLR)" which gets a routing number (called Mobile Station Roaming
Number in GSM or Temporary Local Directory Number in U.S. ANSI (American
National Standards Institute)-41 standard) from the "visitor location
register (VLR)/Mobile Switching Cetner(MSC)(MSC)" of the the cellular system
that currently serves the roaming mobile station.  If this originating or
intermediate switch is a wireline switch, it means that it needs to check
for every outgoing call to see whether it is "mobile"-terminated (not a
small task in many cases) and to support Mobile Application Part (MAP) that
is specific to the dialed mobile station's "home" system (e.g., GSM or
ANSI-41).  The MAP interface to be supported is the one between the Gateway
MSC and the HLR that requests for routing information. The other problem is
charging.  What if you are calling a mobile station that is not in Paris but
in Africa.  If the call charge from Paris to Africa is much higher than the
call from Paris to U.S., the caller would not be happy if he thinks it is a
Paris to U.S. call (e.g., $0.20/min) but ends up paying a much higher rate
($.60/min).   Those are the main reasons why the optimal routing method for
mobile-terminated calls has not been supported.

Also, you used "portable number" for the mobile directory number.  The
mobile directory numbers are E.164 numbers, and they reveal some physical
location information such as a particular country, a cellular network (e.g.,
with nation-wide coverage), or a cellular switch/system in a specific
geographic area (e.g., my mobile directory number is +1-202-256-1200 which
is in D.C.).

> 
> > **** Please list those acronyms.  I can provide the info.
> >  They might have
> > been provided in earlier messages. ****
> 
> SCN, LRN, and GW. I think GW means gateway. The others are obviously
> telephone number formats.

SCN - Switched Circuit Network
LRN - Location Routing Number.  Every local exchange (with access line
termiations to the users) in the North America that is required to support
number portability is assinged a LRN (format is NPA+NXX+0000). It is used by
the SCN to route a call in the number portability environment.  You can
access NeuStar's web site (http://www.neustar.com) for the official
definition of LRN and some other number portability or North American
Numbering Plan related information.
GW - Gateway

> Bert
> albert.e.manfredi@boeing.com
> 



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 17:57:41 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA19197
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 17:57:40 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4BC6E52E6; Wed, 15 Dec 1999 17:55:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A8C705305; Wed, 15 Dec 1999 17:55:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 7BAA452E6
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 17:55:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec 15 17:53:44 EST 1999
Received: from cs.columbia.edu ([128.59.16.20]) by dusty; Wed Dec 15 17:52:09 EST 1999
Received: from cs.columbia.edu (bart.cs.columbia.edu [128.59.19.191])
	by cs.columbia.edu (8.9.1/8.9.1) with ESMTP id RAA13653;
	Wed, 15 Dec 1999 17:53:07 -0500 (EST)
Message-ID: <38581BD1.232C0792@cs.columbia.edu>
Date: Wed, 15 Dec 1999 17:53:05 -0500
From: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Organization: Columbia University, Dept. of Computer Science
X-Mailer: Mozilla 4.7 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: Third Bakeoff test results
References: <65256848.006DE292.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

archow@hss.hns.com wrote:
> 
> Hi,
> when could we expect updates on Henning's site for the 3rd bakeoff ?
> Were there any new tests conducted which will be posted like those of the
> 2nd bakeoff ?

I'd be glad to host "specimen" of burned cookies that gave SIP bakers
indigestion during the bake-off.

> 
> Also, one further question - since  SIP+ has been superceded by INFO and
> other extensions,
> is a message with protocol other than SIP / <xxx> valid anymore ?

The SIP indicator serves to distinguish the protocol from other
protocols (such as HTTP or RTSP) that might end up on the same port,
usually by accident. I don't anticipate that this should be modified.

> 
> Thanx
> Regds
> Arjun

-- 
Henning Schulzrinne   http://www.cs.columbia.edu/~hgs



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 21:13:15 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id VAA21512
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 21:13:15 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 667915303; Wed, 15 Dec 1999 21:09:37 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id B1E0A5308; Wed, 15 Dec 1999 21:09:36 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 85F115303
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 21:09:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Wed Dec 15 21:07:52 EST 1999
Received: from idalee.loudoun.com ([208.232.169.21]) by dusty; Wed Dec 15 21:06:17 EST 1999
Received: from kailasa (sterling2-39.cybercable.com)
 by idalee.loudoun.com (Sun Internet Mail Server sims.3.5.1998.11.13.11.10)
 with SMTP id <0FMT003OT9VX2W@idalee.loudoun.com>; Wed,
 15 Dec 1999 21:07:13 -0500 (EST)
Date: Wed, 15 Dec 1999 15:39:45 -0500
From: "Mark D. Foster" <mfoster@mdfassoc.com>
Subject: RE: TRIP
In-reply-to: <38566A7A.5D69155B@dynamicsoft.com>
To: "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>,
        "'John Mainwaring'" <crm312a@nortelnetworks.com>
Cc: iptel@lists.research.bell-labs.com, "'James Yu'" <james.yu@neustar.com>,
        sip@lists.research.bell-labs.com
Message-id: <001201bf476a$6c72edc0$0864a8c0@loudoun.com>
MIME-version: 1.0
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7bit
Importance: Normal
X-MSMail-Priority: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2314.1300
X-Priority: 3 (Normal)
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Jonathan Rosenberg wrote:


> ...snip...
> As an example:
>
> sip:15551212@cisco.com;user=phone;trans="lnp,gdbs"
>
> where lnp and gdbs are some kind of global translation services that
> apply to names of the type phone.
>

As long as the "To" field is E.164 (local to E.164 translation presumed to
have occured before egressing the originating network) and is always
preserved, I think this could work.


> ...snip...
> Hmm. This is something thats also different from the PSTN. The cost of
> routing to the donor proxy in SIP is much less, since proxies can be
> stateless. Thus, if a proxy receives a call for some number that is
> ported, it stateless proxies the call towards the next
> destination. The
> result is that there is no triangle routing for media (there generally
> isn't), nor for subsequent signaling. There is only marginal cost for
> the donor provider. There are obviously polticial and business issues;
> one may not want to trust or rely upon the donor proxy at
> all, as is the
> case of LNP in the US. But, the general SIP model is that we assume
> proxies do route calls; no security measures can prevent a proxy from
> dropping messages. Why, in the case of LNP, do we now need to assume
> these proxies won't route calls?
>

I don't think there's a need to change this assumption.  Actually, ensuring
the donor's proxy will re-route is critical, as they are considered the
default route for ported numbers.  Again, for regulatory and business
reasons we shouldn't force networks to ping the donor's proxy, lest it snack
of the deprecated (at least in the US & Canada) QoR/RTP approach.

>
>  I have noted that originator query may not be practical
> > for nationwide calling and that donor proxy is too late
> unless you're
> > prepared to consider RTP.
>
> The assumption of the impractability of originator queries has
> everything to do with the existing structure of LNP. Its
> mainly because,
> AFAIK, the systems are different all over the world. However,
> if we use
> the IP model, with a DNS solution, its no harder to query for a number
> on the other side of the planet as it would be for a number next door.
>
> Also, pardon my ignorance, but what is RTP? Many of us on
> this list know
> RTP as the Real Time Transport Protocol (rfc1889) but I don't think
> thats what you mean.
>

I think RTP was meant to refer to "release to pivot", one of the LNP call
routing scenarios that requires the donor remain in the signaling loop, and
therefore disqualified by the FCC.


-------------------------------------------------------------
Mark D. Foster                  | EMAIL: mark.foster@neustar.com
CTO                             | NeuStar, Inc.
TEL: +1 202 533 2800/2702       | FAX: +1 202 533 2975
1120 Vermont Ave NW, Suite 550  | Washington, DC 20005




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 22:27:38 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id WAA23293
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 22:27:38 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 5D5AB5308; Wed, 15 Dec 1999 22:25:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id C50445309; Wed, 15 Dec 1999 22:25:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 09CB75308
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 22:25:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 15 22:23:23 EST 1999
Received: from beta.mcit.com ([199.249.19.244]) by dusty; Wed Dec 15 22:21:48 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #38417)
 id <0FMT00M01DEWRK@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Thu, 16 Dec 1999 03:23:21 +0000 (GMT)
Received: from omzrelay.mcit.com ([166.37.204.49])
 by firewall.mcit.com (PMDF V5.2-32 #38417)
 with ESMTP id <0FMT00K5JDEW4N@firewall.mcit.com>; Thu,
 16 Dec 1999 03:23:20 +0000 (GMT)
Received: from omta1.mcit.com (omta1.mcit.com [166.37.204.2])
 by omzrelay.mcit.com (8.8.7/) with ESMTP	id DAA12791; Thu,
 16 Dec 1999 03:23:23 +0000 (GMT)
Received: from dwillispc ([166.44.162.174])
 by omta1.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991216032243.XYDV824@dwillispc>; Wed,
 15 Dec 1999 21:22:43 -0600
Date: Wed, 15 Dec 1999 21:20:04 -0600
From: Dean Willis <dean.willis@wcom.com>
Subject: RE: URL Generalization for Portability (was TRIP)
In-reply-to: <199912151529.JAA08677@b04a24.exu.ericsson.se>
To: "Adam B. Roach" <Adam.Roach@ericsson.com>
Cc: IETF SIP <sip@lists.research.bell-labs.com>
Message-id: <000501bf4774$71f62b40$55fa403f@directlink.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Adam wrote:
> Dean Willis writes:
>
> >I was talking with some guys today about scope and context, and
> I'm inclined
> >to think we need the nature of address and numbering plan
> indicator fields
> >out of some ISUP variants. Scope appears to be global, local, or private,
> >with some need to represent local and private within some
> context like area
> >code or private numbering plan.
 . . .
> If we proceed with the idea of scoping numbers "like ISUP," could we
> align it with ISUP a little more closely? It would make interoperation
> *much* easier.
>
> ISUP defines four scopes; the list of them follows, along with
> suggestions for representing them.
>
> 1) Subscriber number (significant within an area/city code)
>    tel:5555555;phone-context=local
>
> 2) Unknown (usually a private numbering plan)
>    tel:7724162;phone-context=mcivnet34
>    or
>    tel:4512345687724162;phone-context=mciswtrunk
>    or
>    tel:34251;phone-context=unknown
>    or
>    tel:23456;phone-context=private
>    or
>    ...
>
> 3) National number (sigificant within a country)
>    tel:2145555555;phone-context=national
>
> 4) International number (globally significant)
>    tel:12145555555;phone-context=global
>    or
>    tel:+12145555555

Adam, this initially sounds good to me, at least for accounting for "nature
of address". How would you account for "numbering plan indicator?"

--
dean




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 15 22:45:39 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id WAA24435
	for <sip-archive@odin.ietf.org>; Wed, 15 Dec 1999 22:45:38 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 8BFB0530A; Wed, 15 Dec 1999 22:43:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id DAF9E530C; Wed, 15 Dec 1999 22:43:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id C0B3C530A
	for <sip@lists.research.bell-labs.com>; Wed, 15 Dec 1999 22:43:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 15 22:42:14 EST 1999
Received: from cs.columbia.edu ([128.59.16.20]) by dusty; Wed Dec 15 22:40:39 EST 1999
Received: from cs.columbia.edu (bart.cs.columbia.edu [128.59.19.191])
	by cs.columbia.edu (8.9.1/8.9.1) with ESMTP id WAA01902;
	Wed, 15 Dec 1999 22:34:46 -0500 (EST)
Message-ID: <38585DD4.EDF31D88@cs.columbia.edu>
Date: Wed, 15 Dec 1999 22:34:44 -0500
From: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Organization: Columbia University, Dept. of Computer Science
X-Mailer: Mozilla 4.7 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Dean Willis <dean.willis@wcom.com>
Cc: Jonathan Rosenberg <jdrosen@dynamicsoft.com>,
        John Mainwaring <crm312a@nortelnetworks.com>,
        "Mark D. Foster" <mark.foster@npac.com>,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com
Subject: Re: URL Generalization for Portability (was TRIP)
References: <001e01bf466d$373d3140$d19623a6@mcit.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Dean Willis wrote:
> 

> > Its possible that we might even see things besides phone numbers as user
> > names that are valid across multiple domains. An example is (heaven
> > forbid), social security numbers (in the US, at least):

In a few years, Microsoft will assign every human being a GUID :-)

> 
> The underlying problem here is differentiating between a phone-number and a
> service-name-which-looks-like-a-number. Yes, the user=phone gives a hint on
> nature od address, the "+" encodding gives a hint on the scope of address,
> but it is still muddy.

A phone number in a SIP URL is indeed of local significance, within the
scope of the proxy or gateway. Thus,

INVITE 4012@gw.acme.com SIP/2.0
To: tel:+12015554012

might be used when dialing a number that turns out to be a "tie line" or
voice VPN.

> 
> There was some discussion of this problem wrt DCS during the November
> interim meeting. It was suggested that a cross-domain destination which is a
> phone number could be better represented by a tel: URL than by confusing the
> scope of the user part of a sip: URL. This simplilifies life greatly.
> 
> Something like
> 
>         INVITE premiumservice@gateway.carrier.com
>         To: tel:5551212;trans=lnp?gdbs
> 
> could be used to indicate to gateway.carrier.com that premium gateway
> service is requested towards the PSTN location identified by telephone
> number 5551212, that LNP and GDBS translation have been applied, and that
> the phone number is of local scope for the gateway. Incidentally, I think I
> just noticed a minor anomaly in the tel-url grammar -- don't see how to
> encode more than one future-extension field . . .

Is somebody talking to the author of the tel: URL Internet Draft to make
sure this discussion doesn't get lost?

> 
> --
> Dean

-- 
Henning Schulzrinne   http://www.cs.columbia.edu/~hgs



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 01:12:05 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA26729
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 01:12:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id AB9CE52DF; Thu, 16 Dec 1999 01:09:18 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 2003A530D; Thu, 16 Dec 1999 01:09:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id B0D2D52DF
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 01:09:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec 16 01:08:59 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec 16 01:07:24 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtum25805;
	Thu, 16 Dec 1999 06:07:03 GMT
Received: from dynamicsoft.com (1Cust60.tnt2.freehold.nj.da.uu.net [63.17.114.60])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id BAA14206;
	Thu, 16 Dec 1999 01:08:55 -0500 (EST)
Message-ID: <38588347.9C3F1347@dynamicsoft.com>
Date: Thu, 16 Dec 1999 01:14:31 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Yes, I agree that these are the same. When matching the To and From
field for call legs, I would say that:

1. the display name is not included in the matching
2. the matching includes tags
3. the matching be based on the user, password, host and port components
of the URI, in addition to any parameters. The matching is semantic
based, so that if a default component is omitted, it still matches.
4. string comparisons are case insensitive
5. an IP address that is the result of a DNS lookup on a hostname does
NOT match that hostname. 

Matching based on URI parameters is debatable. But, we need at least the
user param, and rather than special case things, I'd like to make the
rule simple and consistent. So, lets include all parameters.

I think this is in line with rfc2396, which says:

> 6. URI Normalization and Equivalence
> 
>    In many cases, different URI strings may actually identify the
>    identical resource. For example, the host names used in URL are
>    actually case insensitive, and the URL <http://www.XEROX.com> is
>    equivalent to <http://www.xerox.com>. In general, the rules for
>    equivalence and definition of a normal form, if any, are scheme
>    dependent. When a scheme uses elements of the common syntax, it will
>    also use the common syntax equivalence rules, namely that the scheme
>    and hostname are case insensitive and a URL with an explicit ":port",
>    where the port is the default for the scheme, is equivalent to one
>    where the port is elided.

Note the last sentence on port.



So, the following pairs of To fields are "identical" as far as call leg
determination is concerned:

To: "J. User" <sip:juser@dynamicsoft.com:5060>
To: Joe <sip:JUSER@DyNamICSOFT.com;transport=udp>


-Jonathan R.

archow@hss.hns.com wrote:
> 
> Well, since the RFC states that since 5060 is the default port, the second
> message implicitly states that.
> so yes, I would treat it as the same.
> imho, if the app. sees a null port,it should implictly take it as 5060 and
> then do the call leg identification as stated in the notes and
> clarifications.
> Is there any problem if this is the approach ?
> Regds
> Arjun
> --
> Arjun Roychowdhury @ Hughes Software Systems
> 
> Marc Petit-Huguenin <petithug@8x8.com> on 12/16/99 01:01:56 AM
> 
> To:   IETF SIP <sip@lists.research.bell-labs.com>
> cc:
> 
> Subject:  Question about Call comparaison
> 
> Hi all,
> 
> Is the two following requests belongs to the same call or not (please
> notes the difference in the port)
> 
>  INVITE sip:petithug@8x8.com SIP/2.0
>  From: Isabelle <sip:isa@8x8.com:5060>
>  To: Marc <sip:petithug@8x8.com>
>  Call-Id: 0123456789@tarantula.8x8.com
>  CSeq: 1 INVITE
>  Via: SIP/2.0/UDP tarantula.8x8.com
>  Content-Length: 0
> 
> [some other message...]
> 
>  INVITE sip:petithug@8x8.com SIP/2.0
>  From: Isabelle <sip:isa@8x8.com>
>  To: Marc <sip:petithug@8x8.com>
>  Call-Id: 0123456789@tarantula.8x8.com
>  CSeq: 2 INVITE
>  Via: SIP/2.0/UDP tarantula.8x8.com
>  Content-Length: 0
> 
> At least two implementations at the last bake-off does not like this.
> 
> Thank you for your help.
> 
> --
> Marc Petit-Huguenin
> Home: mailto:petithug@cyberservices.com
> Work: mailto:petithug@8x8.com
> "Everything I love is either immoral, illegal or makes you fat"

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 01:33:43 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA28428
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 01:33:43 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id B0ED1530D; Thu, 16 Dec 1999 01:31:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 1BEE2530E; Thu, 16 Dec 1999 01:31:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id E5D92530D
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 01:31:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec 16 01:29:47 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec 16 01:28:12 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtun29527;
	Thu, 16 Dec 1999 06:27:51 GMT
Received: from dynamicsoft.com (1Cust60.tnt2.freehold.nj.da.uu.net [63.17.114.60])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id BAA14231;
	Thu, 16 Dec 1999 01:29:43 -0500 (EST)
Message-ID: <38588828.7DD42103@dynamicsoft.com>
Date: Thu, 16 Dec 1999 01:35:20 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: Third Bakeoff test results
References: <65256848.006DE292.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



archow@hss.hns.com wrote:
> 
> Hi,
> when could we expect updates on Henning's site for the 3rd bakeoff ?
> Were there any new tests conducted which will be posted like those of the
> 2nd bakeoff ?

The bakeoff was quite a success. We decided to raise the bar a bit, and
on the third day, executed the following complex scenario:





UA1 ------> P1 ------> P2 --------> UA2
            |           |
            |           |---------> UA3
            |
            |----------P3---------> UA4

UA1 sends an INVITE to P1. P1 asks for proxy authorization, returning a
407. UA1 resubmits the request, and it is authenticated by P1. P1 forks,
sending the request to P2 via TCP, and P3 via UDP. P2 forks again, to
UA2 and UA3. Only P2 record routes. All three phones ring at UA2,3,4.
UA2 answers with a 200 OK. P2 cancels to UA3, and forwards the 200 OK to
P1 over TCP. P1 cancels to P3, which cancels to UA4. P1 also forwards
the 200 OK to UA1. UA1 sends an ACK to UA2 through P2, since P1 didn't
record route. UA1 and UA2 talk, then UA2 hangs up by sending a BYE
through P2.

All seven entities were provided by seven different providers. We
pre-screened providers to make sure they met the requirements for the
entity they were executing. We ran several rounds of this scenario, and
got it working in nearly every round. In the third round, the setup
itself executed on the first attempt.

People found this test tremendously useful. It popped out some bugs that
they hadn't considered. It also showed a real world scenario, and
furthermore, such a scenario among many different vendors equipment.
There was agreement to do many more of these kind of tests at the next
bakeoff. 

-Jonathan R.


-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 04:17:55 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id EAA09012
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 04:17:55 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 2C0835309; Thu, 16 Dec 1999 04:15:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 9BBEF530C; Thu, 16 Dec 1999 04:15:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 782A55309
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 04:15:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 04:14:41 EST 1999
Received: from beamer.mchh.siemens.de ([194.138.158.163]) by dusty; Thu Dec 16 04:13:06 EST 1999
Received: from moody.mchh.siemens.de (mail2.mchh.siemens.de [194.138.158.226])
	by beamer.mchh.siemens.de (8.9.3/8.9.3) with ESMTP id KAA14498
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 10:14:04 +0100 (MET)
Received: from mchh246e.demchh201e.icn.siemens.de ([218.1.68.146])
	by moody.mchh.siemens.de (8.9.1/8.9.1) with ESMTP id KAA13803
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 10:14:49 +0100 (MET)
Received: by MCHH246E with Internet Mail Service (5.5.2448.0)
	id <Y9YXFPC2>; Thu, 16 Dec 1999 10:15:56 +0100
Message-ID: <679076A067F2D211A8F70090274481B80C1825@lnn201e.lan.siemens.fr>
From: Taji Rachid <Rachid.Taji@srit.siemens.fr>
To: "'sip@lists.research.bell-labs.com'" <sip@lists.research.bell-labs.com>
Subject: times in SDP part
Date: Thu, 16 Dec 1999 10:14:33 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Hi all,

I have a question about SDP time fields "t=<start time>  <stop time>".

The time field in SDP indicates  the start and stop times for a conference
session. 
The two subfields start time and stop time are the decimal representation of
Network Time Protocol (NTP) time values in seconds.

My question is how to get this decimal representation of NTP values in
seconds from a GMT representation.

For example, in the case of this GMT date:

thu, 16 Dec 1999  16:00:00 GMT 

What is  the decimal representation of NTP values in seconds ?



the following text is From RFC 2327, SDP Session Description Protocol:
>>>>>>>  
 Times, Repeat Times and Time Zones

   t=<start time>  <stop time>

   o "t=" fields specify the start and stop times for a conference
     session.  Multiple "t=" fields may be used if a session is active
     at multiple irregularly spaced times; each additional "t=" field
     specifies an additional period of time for which the session will
     be active.  If the session is active at regular times, an "r="
     field (see below) should be used in addition to and following a
     "t=" field - in which case the "t=" field specifies the start and
     stop times of the repeat sequence.

   o The first and second sub-fields give the start and stop times for
     the conference respectively.  These values are the decimal
     representation of Network Time Protocol (NTP) time values in
     seconds [1].  To convert these values to UNIX time, subtract
     decimal 2208988800.
>>>>>end RFC


Thanks

Rachid



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 09:52:09 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA26049
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 09:52:09 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4C30C530C; Thu, 16 Dec 1999 09:49:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A62B8530F; Thu, 16 Dec 1999 09:49:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id F2B9D530C
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 09:49:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 09:48:02 EST 1999
Received: from cs.columbia.edu ([128.59.16.20]) by dusty; Thu Dec 16 09:46:27 EST 1999
Received: from cs.columbia.edu (bart.cs.columbia.edu [128.59.19.191])
	by cs.columbia.edu (8.9.1/8.9.1) with ESMTP id JAA09969;
	Thu, 16 Dec 1999 09:47:52 -0500 (EST)
Message-ID: <3858FB96.EDD557C3@cs.columbia.edu>
Date: Thu, 16 Dec 1999 09:47:50 -0500
From: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Organization: Columbia University, Dept. of Computer Science
X-Mailer: Mozilla 4.7 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: archow@hss.hns.com, Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Jonathan Rosenberg wrote:
> 
> Yes, I agree that these are the same. When matching the To and From
> field for call legs, I would say that:
> 
> 1. the display name is not included in the matching

> 2. the matching includes tags
> 3. the matching be based on the user, password, host and port components
> of the URI, in addition to any parameters. The matching is semantic
> based, so that if a default component is omitted, it still matches.
> 4. string comparisons are case insensitive
> 5. an IP address that is the result of a DNS lookup on a hostname does
> NOT match that hostname.
> 
> Matching based on URI parameters is debatable. But, we need at least the
> user param, and rather than special case things, I'd like to make the
> rule simple and consistent. So, lets include all parameters.
> 

This also agrees with RFC 2616 (http), which says:

3.2.3 URI Comparison

   When comparing two URIs to decide if they match or not, a client
   SHOULD use a case-sensitive octet-by-octet comparison of the entire
   URIs, with these exceptions:

      - A port that is empty or not given is equivalent to the default
        port for that URI-reference;

        - Comparisons of host names MUST be case-insensitive;

        - Comparisons of scheme names MUST be case-insensitive;

        - An empty abs_path is equivalent to an abs_path of "/".

   Characters other than those in the "reserved" and "unsafe" sets (see
   RFC 2396 [42]) are equivalent to their ""%" HEX HEX" encoding.

   For example, the following three URIs are equivalent:

      http://abc.com:80/~smith/home.html
      http://ABC.com/%7Esmith/home.html
      http://ABC.com:/%7esmith/home.html

The rules have been added to the FAQ and revised spec. (The "ignore
display name" was already there.)

-- 
Henning Schulzrinne   http://www.cs.columbia.edu/~hgs



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 10:01:42 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA26187
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 10:01:42 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 06FB6530F; Thu, 16 Dec 1999 09:59:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6BDE15310; Thu, 16 Dec 1999 09:59:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 603B5530F
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 09:59:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec 16 09:58:51 EST 1999
Received: from bounty.cisco.com ([161.44.2.72]) by dusty; Thu Dec 16 09:57:16 EST 1999
Received: from cisco.com (bounty.cisco.com [161.44.2.72])
	by bounty.cisco.com (8.8.8/2.5.1/Cisco List Logging/8.8.8) with ESMTP id JAA16830
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 09:58:48 -0500 (EST)
Message-ID: <3858FE28.CFFB0630@cisco.com>
Date: Thu, 16 Dec 1999 09:58:48 -0500
From: Shail Bhatnagar <shbhatna@cisco.com>
Organization: CISCO
X-Mailer: Mozilla 4.51C-CISCOENG [en] (X11; U; SunOS 5.6 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: Multiple header instances...
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Is a SIP server/client supposed to handle messages like this :

Via:...
Via:...
Record-Route:...
Via:...

I mean - multiple instances of a same header and non-contiguous .


-- 
Best regards,
Shail



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 10:06:00 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA26291
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 10:06:00 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3A9265310; Thu, 16 Dec 1999 10:03:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id B84635311; Thu, 16 Dec 1999 10:03:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id B4B0F5310
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 10:03:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec 16 10:02:24 EST 1999
Received: from cs.columbia.edu ([128.59.16.20]) by dusty; Thu Dec 16 10:00:50 EST 1999
Received: from cs.columbia.edu (bart.cs.columbia.edu [128.59.19.191])
	by cs.columbia.edu (8.9.1/8.9.1) with ESMTP id KAA10777;
	Thu, 16 Dec 1999 10:01:57 -0500 (EST)
Message-ID: <3858FEE3.C2AC0477@cs.columbia.edu>
Date: Thu, 16 Dec 1999 10:01:55 -0500
From: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Organization: Columbia University, Dept. of Computer Science
X-Mailer: Mozilla 4.7 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Shail Bhatnagar <shbhatna@cisco.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: Multiple header instances...
References: <3858FE28.CFFB0630@cisco.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Shail Bhatnagar wrote:
> 
> Is a SIP server/client supposed to handle messages like this :
> 
> Via:...
> Via:...
> Record-Route:...
> Via:...
> 
> I mean - multiple instances of a same header and non-contiguous .

Yes.



-- 
Henning Schulzrinne   http://www.cs.columbia.edu/~hgs



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 10:11:27 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA26364
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 10:11:27 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 1C3225311; Thu, 16 Dec 1999 10:07:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6F6D85312; Thu, 16 Dec 1999 10:07:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 13E6D5311
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 10:07:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 10:06:18 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Thu Dec 16 10:04:43 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id VAA18991;
	Thu, 16 Dec 1999 21:18:08 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256849.0052C3E6 ; Thu, 16 Dec 1999 20:34:01 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Shail Bhatnagar <shbhatna@cisco.com>
Cc: sip@lists.research.bell-labs.com
Message-ID: <65256849.0052C368.00@sampark.hss.hns.com>
Date: Thu, 16 Dec 1999 20:33:59 +0530
Subject: Re: Multiple header instances...
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



yes, indeed.
This is very legal - and _should_ be implemented.
I think the RFC somewhere states that the ordering is not fixed and should
not be assumed so.
Also, this is a part of the 'torture tests' list in 2nd bakeoff.

Regds
Arjun
--
Arjun Roychowdhury @ Hughes Software Systems






Shail Bhatnagar <shbhatna@cisco.com> on 12/16/99 08:28:48 PM

To:   sip@lists.research.bell-labs.com
cc:

Subject:  Multiple header instances...




Is a SIP server/client supposed to handle messages like this :

Via:...
Via:...
Record-Route:...
Via:...

I mean - multiple instances of a same header and non-contiguous .


--
Best regards,
Shail








From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 11:11:18 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA27520
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 11:11:16 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 50D075312; Thu, 16 Dec 1999 10:35:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id C32805313; Thu, 16 Dec 1999 10:35:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 288A15312
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 10:35:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 10:34:27 EST 1999
Received: from bounty.cisco.com ([161.44.2.72]) by dusty; Thu Dec 16 10:32:52 EST 1999
Received: from cisco.com (bounty.cisco.com [161.44.2.72])
	by bounty.cisco.com (8.8.8/2.5.1/Cisco List Logging/8.8.8) with ESMTP id KAA19789;
	Thu, 16 Dec 1999 10:34:22 -0500 (EST)
Message-ID: <3859067E.C6288456@cisco.com>
Date: Thu, 16 Dec 1999 10:34:22 -0500
From: Shail Bhatnagar <shbhatna@cisco.com>
Organization: CISCO
X-Mailer: Mozilla 4.51C-CISCOENG [en] (X11; U; SunOS 5.6 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: Multiple header instances...
References: <65256849.0052C368.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Arjun, Ordering of hop by hop fields matters - I was not sure if they
could be non-contiguous. 
Shail

archow@hss.hns.com wrote:
> 
> yes, indeed.
> This is very legal - and _should_ be implemented.
> I think the RFC somewhere states that the ordering is not fixed and should
> not be assumed so.
> Also, this is a part of the 'torture tests' list in 2nd bakeoff.
> 
> Regds
> Arjun
> --



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 11:39:35 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA28108
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 11:39:35 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 960E1530E; Thu, 16 Dec 1999 11:35:48 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 0CA565314; Thu, 16 Dec 1999 11:35:47 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 2EF29530E
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 11:35:07 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 11:34:58 EST 1999
Received: from gwu.ericy.com ([208.196.3.162]) by dusty; Thu Dec 16 11:33:23 EST 1999
Received: from mr4.exu.ericsson.se (mr4u.ericy.com [208.238.116.99])
	by gwu.ericy.com (8.9.3/8.9.3) with ESMTP id KAA21908;
	Thu, 16 Dec 1999 10:34:55 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr4.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id KAA28102;
	Thu, 16 Dec 1999 10:34:51 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id KAA26541; Thu, 16 Dec 1999 10:34:51 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id KAA11010;
	Thu, 16 Dec 1999 10:34:50 -0600 (CST)
Message-Id: <199912161634.KAA11010@b04a24.exu.ericsson.se>
Subject: Re: URL Generalization for Portability (was TRIP)
To: dean.willis@wcom.com (Dean Willis)
Date: Thu, 16 Dec 1999 10:34:50 -0600 (CST)
Cc: Adam.Roach@ericsson.com, sip@lists.research.bell-labs.com
In-Reply-To: <000501bf4774$71f62b40$55fa403f@directlink.net> from "Dean Willis" at Dec 15, 99 09:20:04 pm
From: "Adam B. Roach" <Adam.Roach@ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>Adam, this initially sounds good to me, at least for accounting for "nature
>of address". How would you account for "numbering plan indicator?"

Very similar, I would assume. I have to admit I know very little about
X.121 or F.69 numbering plans, or even if there would be sufficient
demand for them. I beleive we'd need to fix the tel: url syntax to
allow multiple extensions to make this work; then, we could use
something like:

1) E.164
   tel:12145555555;phone-context=global
   or
   tel:12145555555;phone-context=global;numbering-plan=isdn

2) X.121
   tel:234987598;phone-context=global;numbering-plan=data

3) F.69
   tel:98724591;phone-context=global;numbering-plan=telex

Do you really think this is necessary, though?

-- 
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 11:50:26 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA28273
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 11:50:25 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4E1325315; Thu, 16 Dec 1999 11:46:06 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E03D95314; Thu, 16 Dec 1999 11:46:04 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A3D2D5315
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 11:45:12 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 11:44:49 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Thu Dec 16 11:43:14 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id WAA24880;
	Thu, 16 Dec 1999 22:56:47 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256849.005BCC9D ; Thu, 16 Dec 1999 22:12:41 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Shail Bhatnagar <shbhatna@cisco.com>
Cc: archow@hss.hns.com, sip@lists.research.bell-labs.com
Message-ID: <65256849.005BCC79.00@sampark.hss.hns.com>
Date: Thu, 16 Dec 1999 22:12:40 +0530
Subject: Re: Multiple header instances...
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



Shail,
when I say headers can be interspersed, I dont mean that the relative
ordering within a header type is allowed to be changed.

For example, if you have
Via:xxxx
Via:yyyy
Via:zzzz

Then
Via:xxxxx
From:werewrwerw
Via:yyyyy
Contact:hfhgfh
Via:zzzzz

is fine as the ordering of Via's _with_ respect to each havent changed. So
hop sensitive fields, aslong as they retain relative ordering, should be
fine.

Regds
Arjun
--
Arjun Roychowdhury @ Hughes Software Systems






Shail Bhatnagar <shbhatna@cisco.com> on 12/16/99 09:04:22 PM

To:   archow
cc:   sip@lists.research.bell-labs.com

Subject:  Re: Multiple header instances...




Arjun, Ordering of hop by hop fields matters - I was not sure if they
could be non-contiguous.
Shail

archow@hss.hns.com wrote:
>
> yes, indeed.
> This is very legal - and _should_ be implemented.
> I think the RFC somewhere states that the ordering is not fixed and
should
> not be assumed so.
> Also, this is a part of the 'torture tests' list in 2nd bakeoff.
>
> Regds
> Arjun
> --








From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 15:09:57 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA08887
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 15:09:57 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3B4D15305; Thu, 16 Dec 1999 15:07:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A591F5313; Thu, 16 Dec 1999 15:07:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 111A75305
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 15:07:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 15:05:44 EST 1999
Received: from gwu.ericy.com ([208.196.3.162]) by dusty; Thu Dec 16 15:04:10 EST 1999
Received: from mr3.exu.ericsson.se (mr3u.ericy.com [208.238.116.100])
	by gwu.ericy.com (8.9.3/8.9.3) with ESMTP id OAA28494;
	Thu, 16 Dec 1999 14:05:42 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr3.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id OAA27612;
	Thu, 16 Dec 1999 14:05:41 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id OAA06958; Thu, 16 Dec 1999 14:05:40 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id OAA11294;
	Thu, 16 Dec 1999 14:05:39 -0600 (CST)
Message-Id: <199912162005.OAA11294@b04a24.exu.ericsson.se>
Subject: Re: times in SDP part
To: Rachid.Taji@srit.siemens.fr (Taji Rachid)
Date: Thu, 16 Dec 1999 14:05:39 -0600 (CST)
Cc: sip@lists.research.bell-labs.com
In-Reply-To: <679076A067F2D211A8F70090274481B80C1825@lnn201e.lan.siemens.fr> from "Taji Rachid" at Dec 16, 99 10:14:33 am
From: "Adam B. Roach" <Adam.Roach@Ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>I have a question about SDP time fields "t=<start time>  <stop time>".
>
>The time field in SDP indicates  the start and stop times for a conference
>session. 
>The two subfields start time and stop time are the decimal representation of
>Network Time Protocol (NTP) time values in seconds.
>
>My question is how to get this decimal representation of NTP values in
>seconds from a GMT representation.
>
>For example, in the case of this GMT date:
>
>thu, 16 Dec 1999  16:00:00 GMT 
>
>What is  the decimal representation of NTP values in seconds ?

December 16, 1999 at 16:00:00 GMT is 945381600 seconds past
midnight, Jan 1 1970 GMT.  Per the description below, you add 2208988800
to this number, yeilding an NTP of 3154370400.

If your system is POSIX (and even NT has a POSIX library now),
you can use the the system call mktime to calculate the number
of seconds since midnight, Jan 1, GMT.

>   o The first and second sub-fields give the start and stop times for
>     the conference respectively.  These values are the decimal
>     representation of Network Time Protocol (NTP) time values in
>     seconds [1].  To convert these values to UNIX time, subtract
>     decimal 2208988800.

-- 
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 15:59:45 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA09906
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 15:59:44 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id BDE3852E5; Thu, 16 Dec 1999 15:57:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 22A005314; Thu, 16 Dec 1999 15:57:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 937FC52E5
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 15:57:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 15:56:00 EST 1999
Received: from witbier.cisco.com ([171.71.152.57]) by dusty; Thu Dec 16 15:54:26 EST 1999
Received: from mramalho-nt1 (ssh.cisco.com [171.69.10.34])
	by witbier.cisco.com (8.8.8-Cisco List Logging/8.8.8) with SMTP id MAA21982;
	Thu, 16 Dec 1999 12:54:26 -0800 (PST)
Message-Id: <4.1.19991216112549.00a4cb50@localhost>
X-Sender: mramalho@localhost
X-Mailer: QUALCOMM Windows Eudora Pro Version 4.1 
Date: Thu, 16 Dec 1999 15:54:32 -0500
To: Henning Schulzrinne <schulzrinne@cs.columbia.edu>,
        Dean Willis <dean.willis@wcom.com>
From: "Michael A. Ramalho" <mramalho@cisco.com>
Subject: Re: URL Generalization for Portability (was TRIP)
Cc: Jonathan Rosenberg <jdrosen@dynamicsoft.com>,
        John Mainwaring <crm312a@nortelnetworks.com>,
        "Mark D. Foster" <mark.foster@npac.com>,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com,
        enum@ietf.org
In-Reply-To: <38585DD4.EDF31D88@cs.columbia.edu>
References: <001e01bf466d$373d3140$d19623a6@mcit.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

All,

Re: Tel URL grammar stuff like ...
>>         INVITE premiumservice@gateway.carrier.com
>>         To: tel:5551212;trans=lnp?gdbs

I've been waiting for some discussion about the accuracy
of the time period in which the translation has been performed
to come up.

Virtually all of these telephony-centric LNP-type issues revolve
about databases which get updated on the order of once a day.

If LNP dips cost the service provider money (and external LNP
queries do) .... the service provider has a strong economic
incentive to cache the resolved numbers for use in subsequent
calls. [There is also a performance benefit for using cached data].

Shouldn't we provide a mechanism to at least give us a hint
that we are using potentially stale information (some mechanism
to deal with the soft-state issues from a variety of governmental
and/or service provider administered portability data bases).

Perhaps a tag that says when the "originally cached dip" was
performed to give a hint to a subsequent proxy how stale the
information may be. Any subsequent proxy could do what it
wished (i.e, do another database dip, if desired).

An evil service provider could forward an Invite with quite old
information instead of doing the remote dip itself .... but in the
case of frequently updated databases .... subsequent proxies
may have more accurate access to the current translation
(perhaps in it's cache, because it is more likely to service
more calls to this particular user).

This will surely kick off a discussion of how DNS solves this
issue vs. the GSTN ... but for the LNP issue ... we should
recognize the economic incentive for cashing information from
LNP databases that are updated relatively infrequently
AND that requirements for these updates are likely to change
in the future AND that it is highly likely that each database
administrator may have different policies regarding the frequency
and timing of database updates.

Does anyone know if such GSTN mobility/portability databases
are mandated (by ITU-T edict or defacto standard) to have a
globally understood update period (e.g., something like +x hours
from midnight GMT for a particular originating country code)?

Darn these legacy issues ... could we get the ITU-T to mandate
LNP/Mobility updates for ALL service providers to be accessed
through a DNS-like mechanism? I would doubt it, as it ruins the
present model of charging other service providers for such information.
The present charging model will die soon anyway ... perhaps we can
help accelerate the change?

Lastly, does anyone know if TIPHON has useful thoughts on
this issue?

I apologize in advance for the subsequent discussion thread,

Michael Ramalho


At 10:34 PM 12/15/99 -0500, Henning Schulzrinne wrote:
>Dean Willis wrote:
>> 
>
>> > Its possible that we might even see things besides phone numbers as user
>> > names that are valid across multiple domains. An example is (heaven
>> > forbid), social security numbers (in the US, at least):
>
>In a few years, Microsoft will assign every human being a GUID :-)
>
>> 
>> The underlying problem here is differentiating between a phone-number and a
>> service-name-which-looks-like-a-number. Yes, the user=phone gives a hint on
>> nature od address, the "+" encodding gives a hint on the scope of address,
>> but it is still muddy.
>
>A phone number in a SIP URL is indeed of local significance, within the
>scope of the proxy or gateway. Thus,
>
>INVITE 4012@gw.acme.com SIP/2.0
>To: tel:+12015554012
>
>might be used when dialing a number that turns out to be a "tie line" or
>voice VPN.
>
>> 
>> There was some discussion of this problem wrt DCS during the November
>> interim meeting. It was suggested that a cross-domain destination which is a
>> phone number could be better represented by a tel: URL than by confusing the
>> scope of the user part of a sip: URL. This simplilifies life greatly.
>> 
>> Something like
>> 
>>         INVITE premiumservice@gateway.carrier.com
>>         To: tel:5551212;trans=lnp?gdbs
>> 
>> could be used to indicate to gateway.carrier.com that premium gateway
>> service is requested towards the PSTN location identified by telephone
>> number 5551212, that LNP and GDBS translation have been applied, and that
>> the phone number is of local scope for the gateway. Incidentally, I think I
>> just noticed a minor anomaly in the tel-url grammar -- don't see how to
>> encode more than one future-extension field . . .
>
>Is somebody talking to the author of the tel: URL Internet Draft to make
>sure this discussion doesn't get lost?
>
>> 
>> --
>> Dean
>
>-- 
>Henning Schulzrinne   http://www.cs.columbia.edu/~hgs
>
>


Michael A. Ramalho, Ph.D.
Cisco Systems
1802 Rue de la Port
Wall Township, NJ 07719-3784
Office email: mramalho@cisco.com
Personal email: mar42@cornell.edu
Office: +1.732.449.5762
Cell: +1.732.809.0188
Pager: +1.800.365.4578



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 16:29:48 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id QAA10245
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 16:29:47 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 11CC652E4; Thu, 16 Dec 1999 16:27:25 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6C2BC5314; Thu, 16 Dec 1999 16:27:24 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 0F6B952E4
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 16:27:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 16:25:47 EST 1999
Received: from slb-smtpout-01.boeing.com ([12.13.237.21]) by dusty; Thu Dec 16 16:24:10 EST 1999
Received: from slb-av-01.boeing.com ([129.172.13.4])
	by slb-smtpout-01.boeing.com (8.9.2/8.8.5-M2) with ESMTP id NAA11119
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 13:25:43 -0800 (PST)
Received: from blv-hub-01.boeing.com (localhost [127.0.0.1])
	by slb-av-01.boeing.com (8.9.2/8.9.2) with ESMTP id NAA21756
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 13:25:42 -0800 (PST)
Received: from [199.191.48.146] by blv-hub-01.boeing.com for sip@lists.research.bell-labs.com; Thu, 16 Dec 1999 13:24:39 -0800
Received: by engr03.arl.bna.boeing.com (UCX V4.1-12A, OpenVMS V7.1 Alpha);
	Thu, 16 Dec 1999 16:23:28 -0500
Reply-To: <albert.e.manfredi@boeing.com>
From: "Albert Manfredi" <albert.e.manfredi@boeing.com>
To: "Michael A. Ramalho" <mramalho@cisco.com>
Cc: <sip@lists.research.bell-labs.com>, <enum@ietf.org>
Subject: RE: [Enum] Re: URL Generalization for Portability (was TRIP)
Date: Thu, 16 Dec 1999 16:24:21 -0500
Message-Id: <NDBBIBKKCLEFDFDGHCNMMEEJCBAA.albert.e.manfredi@boeing.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.3155.0
In-Reply-To: <4.1.19991216112549.00a4cb50@localhost>
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

On update time periods, my reading is that the DNS and the NPDB
(number portability database) have update periods on the order of
several hours. Maybe 8 hours or more. And that mobility databases
are updated in minute(s). Which is another indication that the DNS
could fill the role of the NPDB, if it comes to that, or certainly
that the DNS could provide that role for IP users wanting to access
portable telephone numbers.

I've seen studies that address the rapid synchronization of huge
database systems (D. Lam, Y. Cui, D. Cox, J. Widom, "A Location
Management Technique to Support Lifelong Numbering in Personal
Communications Services," Proceedings of 1997 IEEE Global
Telecommunications Conference, Volume 3, pp. 704-710, 1997), and I
suppose ultimately the DNS could migrate to that sort of structure.
But for now, the speed required for mobility updates is handled by
keeping those tables in very few servers (distributed according to
service provider).

Bert
albert.e.manfredi@boeing.com


Michael A. Ramalho wrote:

> I've been waiting for some discussion about the accuracy
> of the time period in which the translation has been performed
> to come up.
>
> Virtually all of these telephony-centric LNP-type issues revolve
> about databases which get updated on the order of once a day.
>
> If LNP dips cost the service provider money (and external LNP
> queries do) .... the service provider has a strong economic
> incentive to cache the resolved numbers for use in subsequent
> calls. [There is also a performance benefit for using
> cached data].
>
> Shouldn't we provide a mechanism to at least give us a hint
> that we are using potentially stale information (some mechanism
> to deal with the soft-state issues from a variety of governmental
> and/or service provider administered portability data bases).
>
> Perhaps a tag that says when the "originally cached dip" was
> performed to give a hint to a subsequent proxy how stale the
> information may be. Any subsequent proxy could do what it
> wished (i.e, do another database dip, if desired).
>
> An evil service provider could forward an Invite with quite old
> information instead of doing the remote dip itself .... but in the
> case of frequently updated databases .... subsequent proxies
> may have more accurate access to the current translation
> (perhaps in it's cache, because it is more likely to service
> more calls to this particular user).
>
> This will surely kick off a discussion of how DNS solves this
> issue vs. the GSTN ... but for the LNP issue ... we should
> recognize the economic incentive for cashing information from
> LNP databases that are updated relatively infrequently
> AND that requirements for these updates are likely to change
> in the future AND that it is highly likely that each database
> administrator may have different policies regarding the frequency
> and timing of database updates.
>
> Does anyone know if such GSTN mobility/portability databases
> are mandated (by ITU-T edict or defacto standard) to have a
> globally understood update period (e.g., something like +x hours
> from midnight GMT for a particular originating country code)?
>
> Darn these legacy issues ... could we get the ITU-T to mandate
> LNP/Mobility updates for ALL service providers to be accessed
> through a DNS-like mechanism? I would doubt it, as it ruins the
> present model of charging other service providers for
> such information.
> The present charging model will die soon anyway ... perhaps we can
> help accelerate the change?
>
> Lastly, does anyone know if TIPHON has useful thoughts on
> this issue?
>
> I apologize in advance for the subsequent discussion thread,
>
> Michael Ramalho
>
>
> At 10:34 PM 12/15/99 -0500, Henning Schulzrinne wrote:
> >Dean Willis wrote:
> >>
> >
> >> > Its possible that we might even see things besides
> phone numbers as user
> >> > names that are valid across multiple domains. An
> example is (heaven
> >> > forbid), social security numbers (in the US, at least):
> >
> >In a few years, Microsoft will assign every human being
> a GUID :-)
> >
> >>
> >> The underlying problem here is differentiating between
> a phone-number and a
> >> service-name-which-looks-like-a-number. Yes, the
> user=phone gives a hint on
> >> nature od address, the "+" encodding gives a hint on
> the scope of address,
> >> but it is still muddy.
> >
> >A phone number in a SIP URL is indeed of local
> significance, within the
> >scope of the proxy or gateway. Thus,
> >
> >INVITE 4012@gw.acme.com SIP/2.0
> >To: tel:+12015554012
> >
> >might be used when dialing a number that turns out to be
> a "tie line" or
> >voice VPN.
> >
> >>
> >> There was some discussion of this problem wrt DCS
> during the November
> >> interim meeting. It was suggested that a cross-domain
> destination which is a
> >> phone number could be better represented by a tel: URL
> than by confusing the
> >> scope of the user part of a sip: URL. This
> simplilifies life greatly.
> >>
> >> Something like
> >>
> >>         INVITE premiumservice@gateway.carrier.com
> >>         To: tel:5551212;trans=lnp?gdbs
> >>
> >> could be used to indicate to gateway.carrier.com that
> premium gateway
> >> service is requested towards the PSTN location
> identified by telephone
> >> number 5551212, that LNP and GDBS translation have
> been applied, and that
> >> the phone number is of local scope for the gateway.
> Incidentally, I think I
> >> just noticed a minor anomaly in the tel-url grammar --
> don't see how to
> >> encode more than one future-extension field . . .
> >
> >Is somebody talking to the author of the tel: URL
> Internet Draft to make
> >sure this discussion doesn't get lost?
> >
> >>
> >> --
> >> Dean
> >
> >--
> >Henning Schulzrinne   http://www.cs.columbia.edu/~hgs
> >
> >
>
>
> Michael A. Ramalho, Ph.D.
> Cisco Systems
> 1802 Rue de la Port
> Wall Township, NJ 07719-3784
> Office email: mramalho@cisco.com
> Personal email: mar42@cornell.edu
> Office: +1.732.449.5762
> Cell: +1.732.809.0188
> Pager: +1.800.365.4578
>
> _______________________________________________
> enum mailing list
> enum@ietf.org
> http://www.ietf.org/mailman/listinfo/enum
>




From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 16 19:27:56 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id TAA12614
	for <sip-archive@odin.ietf.org>; Thu, 16 Dec 1999 19:27:56 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id B71C15314; Thu, 16 Dec 1999 19:25:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 380EB5317; Thu, 16 Dec 1999 19:25:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id D87B95314
	for <sip@lists.research.bell-labs.com>; Thu, 16 Dec 1999 19:25:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 16 19:23:26 EST 1999
Received: from mw.3com.com ([149.112.20.3]) by dusty; Thu Dec 16 19:21:52 EST 1999
Received: from mwgate02.mw.3com.com by mw.3com.com (8.8.5/3.1.090690-3Com Corporation)
	id SAA01676; Thu, 16 Dec 1999 18:23:12 -0600 (CST)
Received: by mwgate02.mw.3com.com(Lotus SMTP MTA v4.6.4  (830.2 3-23-1999))  id 8625684A.000315D0 ; Thu, 16 Dec 1999 18:33:41 -0600
X-Lotus-FromDomain: 3COM@3COM-MWGATE
From: "Rick Dean" <Rick_Dean@mw.3com.com>
To: sip@lists.research.bell-labs.com
Message-ID: <8625684A.000314B3.00@mwgate02.mw.3com.com>
Date: Thu, 16 Dec 1999 18:30:49 -0600
Subject: proxy-based dialing plan problem
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk




I hear debate on whether to put a dialing plan inside my
SIP phone.  If the phone has a dialing plan, the phone would
internationalize numeric entries, making them look like
<sip:+18472621415;user=phone> or preferably <tel:+18472621415>.
I don't like this.

The alternative is a proxy-based dialing plan.  The phone
has a default-dialing domain (DDD), which is appended
to numeric entries.

For example, my DDD could be 1847.x.com, which would allow
me to dial 2621415 generating <sip:2621415@1847.x.com>, which
ultimately means the example above.  Similarly, 8472621415
and +18472621415 would also work though my smart
proxy.  BTW, for those of  you who have not played with
my phone, it has an end-of-dialing (Ok) key.

Now my problem is to ensure that all services work with the
proxy-based dialing plan.  I appears to work for me but this
one tough example, a transfer with PSTN gateway authorization.

In the following example phone1 again has a DDD of 1847.x.com,
and is in a call with phone2.  Phone1 attempts a blind transfer to
5551234, (which phone1 means tel:+18475551234, but only the
proxy knows it).  The call does not have a route, so the
BYE passes end to end without a proxy.

phone1      1847.x.com                      phone2
  |             |                              |
  | BYE         |                              |
  | Also:<sip:5551234@1847.x.com>              |
  |------------------------------------------->|
  |    200 OK                                  |
  |<-------------------------------------------|
  |             |                              |

The problem now is that x.com bills for gateway service and
does not have an agreement with phone2, but isn't sure.
I have two possible solutions, which expect unobvious behavior.

One solution is to include an Also in the 401 Unauthorized,
so phone2 uses his own PSTN gateway.  This is new behavior.

  |             | INVITE sip:5551234@1847.x.com|
  |             |<-----------------------------|
  |             | 401 Unathorized              |
  |             | Also:<tel:+18472621415>      |
  |             |----------------------------->|INVITE tel:
  |             |                              |---------->
  |             |                              |

Another solution is to suggest SIP phones try again at least
once when all credentials have failed.  This way the proxy has
a chance to redirect.

  |             | INVITE sip:5551234@1847.x.com|
  |             |<-----------------------------|
  |             | 401 Unathorized              |
  |             |----------------------------->|
  |             | INVITE sip:5551234@1847.x.com|
  |             | Authorization: blah          |
  |             |<-----------------------------|
  |             | 401 Unathorized              |
  |             |----------------------------->|
  |             | INVITE sip:5551234@1847.x.com|
  |             |<-----------------------------|
  |             | 302 moved                    |
  |             | Contact:<tel:+18472621415>   |
  |             |----------------------------->|

People have suggested that the dialing-plan capable proxy
insert a record-route.  He doesn't have to keep state and
the BYE could hit a different box in the farm, but all boxes
would know how to internationalize the Also.  This fails for
many reasons, one of which is PGP signed/encrypted responses.

Feedback?

--
Rick
rick_dean@mw.3com.com





From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 00:57:59 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA18195
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 00:57:59 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 650DE5316; Fri, 17 Dec 1999 00:55:24 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id CC8685317; Fri, 17 Dec 1999 00:55:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id B7ABF5316
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 00:55:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 00:55:01 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 17 00:53:27 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtyd20698;
	Fri, 17 Dec 1999 05:53:06 GMT
Received: from dynamicsoft.com (1Cust196.tnt1.freehold.nj.da.uu.net [63.17.113.196])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id AAA17281;
	Fri, 17 Dec 1999 00:54:48 -0500 (EST)
Message-ID: <3859D17D.64A211F@dynamicsoft.com>
Date: Fri, 17 Dec 1999 01:00:29 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Cc: archow@hss.hns.com, Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com> <3858FB96.EDD557C3@cs.columbia.edu>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Henning Schulzrinne wrote:
> 
> Jonathan Rosenberg wrote:
> >
> > Yes, I agree that these are the same. When matching the To and From
> > field for call legs, I would say that:
> >
> > 1. the display name is not included in the matching
> 
> > 2. the matching includes tags
> > 3. the matching be based on the user, password, host and port components
> > of the URI, in addition to any parameters. The matching is semantic
> > based, so that if a default component is omitted, it still matches.
> > 4. string comparisons are case insensitive
> > 5. an IP address that is the result of a DNS lookup on a hostname does
> > NOT match that hostname.
> >
> > Matching based on URI parameters is debatable. But, we need at least the
> > user param, and rather than special case things, I'd like to make the
> > rule simple and consistent. So, lets include all parameters.
> >
> 
> This also agrees with RFC 2616 (http), which says:
> 
> 3.2.3 URI Comparison
> 
>    When comparing two URIs to decide if they match or not, a client
>    SHOULD use a case-sensitive octet-by-octet comparison of the entire
>    URIs, with these exceptions:
> 
>       - A port that is empty or not given is equivalent to the default
>         port for that URI-reference;
> 
>         - Comparisons of host names MUST be case-insensitive;
> 
>         - Comparisons of scheme names MUST be case-insensitive;

Hmm, so this means that comparisons on the user and password are case
SENSITIVE, and that comparisons on parameters are also case SENSITIVE.
Its a bit yucky with these special cases, but I guess we should be
consistent with http and rfc2396. In that case, I think we should
explicitly say that the username, password, and parameters comparisons
are case sensitive.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 01:08:36 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA18562
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 01:08:35 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id F168E5317; Fri, 17 Dec 1999 01:05:33 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 5A7FD5318; Fri, 17 Dec 1999 01:05:32 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id E20B45317
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 01:05:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 01:05:02 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 17 01:03:27 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtye12955;
	Fri, 17 Dec 1999 06:03:07 GMT
Received: from dynamicsoft.com (1Cust196.tnt1.freehold.nj.da.uu.net [63.17.113.196])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id BAA17285;
	Fri, 17 Dec 1999 01:04:43 -0500 (EST)
Message-ID: <3859D3D0.E0B5ECB9@dynamicsoft.com>
Date: Fri, 17 Dec 1999 01:10:24 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Dean Willis <dean.willis@wcom.com>
Cc: "Adam B. Roach" <Adam.Roach@ericsson.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: URL Generalization for Portability (was TRIP)
References: <000501bf4774$71f62b40$55fa403f@directlink.net>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Dean Willis wrote:
> 
> > ISUP defines four scopes; the list of them follows, along with
> > suggestions for representing them.
> >
> > 1) Subscriber number (significant within an area/city code)
> >    tel:5555555;phone-context=local
> >
> > 2) Unknown (usually a private numbering plan)
> >    tel:7724162;phone-context=mcivnet34
> >    or
> >    tel:4512345687724162;phone-context=mciswtrunk
> >    or
> >    tel:34251;phone-context=unknown
> >    or
> >    tel:23456;phone-context=private
> >    or
> >    ...
> >
> > 3) National number (sigificant within a country)
> >    tel:2145555555;phone-context=national
> >
> > 4) International number (globally significant)
> >    tel:12145555555;phone-context=global
> >    or
> >    tel:+12145555555
> 
> Adam, this initially sounds good to me, at least for accounting for "nature
> of address". How would you account for "numbering plan indicator?"


One thing at a time. We have several issues here, and I think they are
orthogonal:

1. When does one use a tel URL, and when does one use a SIP URL with a
user=phone?

2. How does one convey the numbering plan a number goes by? Does one
need to indicate this in the URL?

3. How does one indicate the context the number is valid in? Does one
need to indicate this in the URL?

4. How does one indicate what translations have been applied to the
number?


I want to focus on (1) first. My thinking in my previous post was that
one uses a tel URL when one doesn't care what gateway provider handles
the number, and the SIP URL when there is a gateway provider being used.
I think Dean's and Hennings idea is that one uses a tel URL when a
number has a scope that is beyond a single domain. Use a SIP URL when
the number has scope only within a domain, and that domain in a domain
name or host name.

This definition blends somewhat with the notion of contexts. So, if a
phone context were for wcom.com, one could use:

tel:5551212;phone-context=wcom.com

or

sip:5551212@wcom.com;user=phone

in this case, its not at all clear to me which one is better than
another. 

Regarding (2) and (3), its not clear to me at all how a proxy would
behave differently based upon knowing the context and/or numbering plan.
If the proxy has longest prefix match routing tables, isn't that
sufficient to correctly route numbers without knowing specific numbering
plans? I really don't want to have to program my proxy with all these
different numbering plans.

So, before we start running away with all this stuff, we need to answer:
what problems are they solving?

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 01:17:37 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA19294
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 01:17:36 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D10A45318; Fri, 17 Dec 1999 01:15:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3CD945319; Fri, 17 Dec 1999 01:15:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A2DC95318
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 01:15:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 01:14:34 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Fri Dec 17 01:12:58 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id MAA15253;
	Fri, 17 Dec 1999 12:18:08 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 6525684A.00214047 ; Fri, 17 Dec 1999 11:33:11 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: Henning Schulzrinne <schulzrinne@cs.columbia.edu>, archow@hss.hns.com,
        Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Message-ID: <6525684A.00213F7A.00@sampark.hss.hns.com>
Date: Fri, 17 Dec 1999 11:33:08 +0530
Subject: Re: Question about Call comparaison
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk








Jonathan Rosenberg <jdrosen@dynamicsoft.com> on 12/17/99 11:30:29 AM

To:   Henning Schulzrinne <schulzrinne@cs.columbia.edu>
cc:   archow, Marc Petit-Huguenin <petithug@8x8.com>, IETF SIP
      <sip@lists.research.bell-labs.com>

Subject:  Re: Question about Call comparaison

Actually, Id say even messier than that is the equivalence of %HEX %HEX to
the character conterparts.
Which means no more sweet strcasecmp or strcmp (for passwd) anymore -
people will have to pass the uri through a
conversion routine before comparison.
Agreed that its being compliant to the respective http rfcs, but is it
really worth it ?
Regds
Arjun
--
Arjun Roychowdhury @ Hughes Software Systems







Hmm, so this means that comparisons on the user and password are case
SENSITIVE, and that comparisons on parameters are also case SENSITIVE.
Its a bit yucky with these special cases, but I guess we should be
consistent with http and rfc2396. In that case, I think we should
explicitly say that the username, password, and parameters comparisons
are case sensitive.

-Jonathan R.
--
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com








From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 09:30:11 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA05667
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 09:30:09 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 348C05319; Fri, 17 Dec 1999 09:27:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 9EBF1531A; Fri, 17 Dec 1999 09:27:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 5E0D35319
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 09:27:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 17 09:25:57 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 17 09:24:23 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtzl11820;
	Fri, 17 Dec 1999 14:24:06 GMT
Received: from dynamicsoft.com (1Cust253.tnt2.freehold.nj.da.uu.net [63.17.114.253])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id JAA17371;
	Fri, 17 Dec 1999 09:25:53 -0500 (EST)
Message-ID: <385A494B.D080E78@dynamicsoft.com>
Date: Fri, 17 Dec 1999 09:31:39 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Rick Dean <Rick_Dean@mw.3com.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: proxy-based dialing plan problem
References: <8625684A.000314B3.00@mwgate02.mw.3com.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Rick Dean wrote:
> 
> I hear debate on whether to put a dialing plan inside my
> SIP phone.  If the phone has a dialing plan, the phone would
> internationalize numeric entries, making them look like
> <sip:+18472621415;user=phone> or preferably <tel:+18472621415>.
> I don't like this.

I believe there are clearly pros and cons. The function can just as
easily live within a UA or a proxy. In the end, service providers that
deploy these things will make the decision about where they want it
done. My sneaking suspicion is that this is best done in a UA, however,
so that we consistently pass around numbers in messages which have
meaning globally. Its a similar argument for domain names. Would your UA
send an INVITE to its local proxy in the form:

INVITE sip:joe@host SIP/2.0

from within domain foo.com, and then expect the proxy to fill in the
foo.com within the request URI? 

> 
> The alternative is a proxy-based dialing plan.  The phone
> has a default-dialing domain (DDD), which is appended
> to numeric entries.
> 
> For example, my DDD could be 1847.x.com, which would allow
> me to dial 2621415 generating <sip:2621415@1847.x.com>, which
> ultimately means the example above.  Similarly, 8472621415
> and +18472621415 would also work though my smart
> proxy.  BTW, for those of  you who have not played with
> my phone, it has an end-of-dialing (Ok) key.

I don't like this at all. Domain names are not meant to convey dial
plans. Rather, the UA should send:

INVITE tel:2621415 SIP/2.0

and then the proxy uses its local configuration to determine that this
number is a local number, and in fully qualified form is
tel:+18472621415. It may then invoke enum and or TRIP services, and
forward an INVITE to the next hop proxy, perhaps of the form:

INVITE tel:+18472621415 SIP/2.0

or

INVITE sip:+18472621415@nexthop.com

I am beginning to lean towards the tel form.

What is debatable is whether the tel URL from the UA to the proxy
contains some kind of dialing plan indicator as a URL parameter, or
whether the dialing plan is known by configuration.


> In the following example phone1 again has a DDD of 1847.x.com,
> and is in a call with phone2.  Phone1 attempts a blind transfer to
> 5551234, (which phone1 means tel:+18475551234, but only the
> proxy knows it).  The call does not have a route, so the
> BYE passes end to end without a proxy.
> 
> phone1      1847.x.com                      phone2
>   |             |                              |
>   | BYE         |                              |
>   | Also:<sip:5551234@1847.x.com>              |
>   |------------------------------------------->|
>   |    200 OK                                  |
>   |<-------------------------------------------|
>   |             |                              |
> 

Your problem is that you should not transfer to the SIP URL. What you
really want is to transfer to a tel URL. Furthermore, in the case of
these transfers (and redirects as well), I think it is essential that
the tel URL be a complete E.164 number. With normal SIP URLs, if a UA
was in domain foo.com, it would never do a transfer like:

BYE
Also: sip:joe@host

when it really meant:

BYE
Also: sip:joe@host.foo.com

You'll get yourself in all kinds of horrible troubles by passing around
URLs that don't have complete domain names in them. Same for phone
numbers. You are only safe in using incomplete numbers in INVITE
messages passed to *local* proxies. If your UA is already configured to
know to send calls to 1847.x.com, why can't it rather be configured to
know that it should BYE/Also to tel:18475551234?


-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 10:19:50 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA06349
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 10:19:49 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id CC77B5313; Fri, 17 Dec 1999 10:17:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4A995531B; Fri, 17 Dec 1999 10:17:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id D67795313
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 10:17:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 10:16:43 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Fri Dec 17 10:15:04 EST 1999
Received: from mr3.exu.ericsson.se (mr3a.ericsson.com [198.215.127.159])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id JAA01747;
	Fri, 17 Dec 1999 09:16:32 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr3.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id JAA00873;
	Fri, 17 Dec 1999 09:16:32 -0600 (CST)
Received: from b04a45.exu.ericsson.se (b04a45 [138.85.60.145]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id JAA19219; Fri, 17 Dec 1999 09:16:31 -0600 (CST)
From: Sean Olson <eussean@exu.ericsson.se>
Received: (from eussean@localhost)
	by b04a45.exu.ericsson.se (8.9.1/8.9.1) id JAA10077;
	Fri, 17 Dec 1999 09:16:30 -0600 (CST)
Date: Fri, 17 Dec 1999 09:16:30 -0600 (CST)
Message-Id: <199912171516.JAA10077@b04a45.exu.ericsson.se>
To: jdrosen@dynamicsoft.com, archow@hss.hns.com
Subject: Re: Question about Call comparaison
Cc: sip@lists.research.bell-labs.com
X-Sun-Charset: US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

> 
> Jonathan Rosenberg <jdrosen@dynamicsoft.com> on 12/17/99 11:30:29 AM
> 
> To:   Henning Schulzrinne <schulzrinne@cs.columbia.edu>
> cc:   archow, Marc Petit-Huguenin <petithug@8x8.com>, IETF SIP
>       <sip@lists.research.bell-labs.com>
> 
> Subject:  Re: Question about Call comparaison
> 
> Actually, Id say even messier than that is the equivalence of %HEX %HEX to
> the character conterparts.
> Which means no more sweet strcasecmp or strcmp (for passwd) anymore -
> people will have to pass the uri through a
> conversion routine before comparison.
> Agreed that its being compliant to the respective http rfcs, but is it
> really worth it ?
> Regds
> Arjun
> --
> Arjun Roychowdhury @ Hughes Software Systems
> 

It's essential to be able to handle escaped characters transparently.
I don't expect to see the password portion of a URL to be used that often, 
but eventually I would expect you might see a lot of "static" SIP URLs
embedded in web pages, e-mail, etc. and to support this you will need to
support the headers and method parameters of the SIP URL (which will very
often need to contain %HEX %HEX sequences)

sean
-----------------------------------------------------------------
Sean Olson            E-mail: sean.olson@ericsson.com
Ericsson Inc.         Voice: (972) 583-5472 
                      FAX: (972) 669-0154





From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 10:25:42 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA06486
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 10:25:41 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 972F9531B; Fri, 17 Dec 1999 10:23:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 12BA0531D; Fri, 17 Dec 1999 10:23:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id A7C7C531B
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 10:23:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 17 10:21:13 EST 1999
Received: from smtp02.teb1.iconnet.net ([209.3.218.43]) by dusty; Fri Dec 17 10:19:38 EST 1999
Received: from cs.columbia.edu (client-151-198-123-45.bellatlantic.net [151.198.123.45])
	by smtp02.teb1.iconnet.net (8.9.1/8.9.1) with ESMTP id KAA26800;
	Fri, 17 Dec 1999 10:20:45 -0500 (EST)
Message-ID: <3859E94B.89BB466D@cs.columbia.edu>
Date: Fri, 17 Dec 1999 02:42:03 -0500
From: Henning Schulzrinne <hgs@cs.columbia.edu>
X-Mailer: Mozilla 4.61 [en] (Win98; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: Henning Schulzrinne <schulzrinne@cs.columbia.edu>, archow@hss.hns.com,
        Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com> <3858FB96.EDD557C3@cs.columbia.edu> <3859D17D.64A211F@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

> >
> >         - Comparisons of host names MUST be case-insensitive;
> >
> >         - Comparisons of scheme names MUST be case-insensitive;
> 
> Hmm, so this means that comparisons on the user and password are case
> SENSITIVE, and that comparisons on parameters are also case SENSITIVE.
> Its a bit yucky with these special cases, but I guess we should be
> consistent with http and rfc2396. In that case, I think we should
> explicitly say that the username, password, and parameters comparisons
> are case sensitive.

This is somewhat tricky, since two related URL formats collide here:

1) The current version of the SIP spec says case-insensitive (CI), so
there's something to be said for keeping it that way.

2) mailto URLs and email addresses are compared CI, if I remember
correctly (somebody should check RFC 822).

3) Unix user ids are CS, but I suppose that it is rare that there will
be two users whose names differ only in capitalization. Are NT user ids
CS or CI?

Thus, I'd prefer CI overall as this increases the chance of
interoperability. (I.e., since it is very unlikely that there will be
two truly distinct URLs that only differ in capitalization, CI
comparison is more likely to work correctly.)

Clearly, http doesn't have a choice, since path names clearly are often
CS.

Henning





From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 12:27:05 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA08967
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 12:27:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4348D531D; Fri, 17 Dec 1999 11:45:25 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 821E8531A; Fri, 17 Dec 1999 11:45:24 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 783AB531D
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 11:45:08 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 11:44:35 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 17 11:43:01 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhtzu27423;
	Fri, 17 Dec 1999 16:42:43 GMT
Received: from dynamicsoft.com (1Cust253.tnt2.freehold.nj.da.uu.net [63.17.114.253])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id LAA17551;
	Fri, 17 Dec 1999 11:44:30 -0500 (EST)
Message-ID: <385A69C8.297F4696@dynamicsoft.com>
Date: Fri, 17 Dec 1999 11:50:16 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Henning Schulzrinne <hgs@cs.columbia.edu>
Cc: Henning Schulzrinne <schulzrinne@cs.columbia.edu>, archow@hss.hns.com,
        Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com> <3858FB96.EDD557C3@cs.columbia.edu> <3859D17D.64A211F@dynamicsoft.com> <3859E94B.89BB466D@cs.columbia.edu>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Henning Schulzrinne wrote:
> 
> Thus, I'd prefer CI overall as this increases the chance of
> interoperability. (I.e., since it is very unlikely that there will be
> two truly distinct URLs that only differ in capitalization, CI
> comparison is more likely to work correctly.)

This is my preference as well, then.

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 14:37:55 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA10579
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 14:37:54 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D6E43531C; Fri, 17 Dec 1999 14:35:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 5D2FA531E; Fri, 17 Dec 1999 14:35:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id A3D3D531C
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 14:35:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 17 14:33:10 EST 1999
Received: from newman.gte.com ([132.197.8.26]) by dusty; Fri Dec 17 14:31:35 EST 1999
Received: from sigmail.gte.com (sigmail.gte.com [132.197.120.75])
	by newman.gte.com (8.9.1/8.9.1) with ESMTP id OAA14341
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 14:33:07 -0500 (EST)
Received: by sigmail.gte.com with Internet Mail Service (5.5.2232.9)
	id <YBZCKD64>; Fri, 17 Dec 1999 14:29:08 -0500
Message-ID: <17D1343B1AC5D11197110060081C78C52FCB76@sigmail.gte.com>
From: "Gardell, Steve" <sgardell@gte.com>
To: sip@lists.research.bell-labs.com
Subject: RE: proxy-based dialing plan problem
Date: Fri, 17 Dec 1999 14:29:07 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2232.9)
Content-Type: text/plain;
	charset="windows-1252"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@dynamicsoft.com]
> Sent: Friday, December 17, 1999 9:32 AM
> To: Rick Dean
> Cc: sip@lists.research.bell-labs.com
> Subject: Re: proxy-based dialing plan problem
> 
> 
> 
> 
> Rick Dean wrote:
> > 
> > I hear debate on whether to put a dialing plan inside my
> > SIP phone.  If the phone has a dialing plan, the phone would
> > internationalize numeric entries, making them look like
> > <sip:+18472621415;user=phone> or preferably <tel:+18472621415>.
> > I don't like this.
> 
> I believe there are clearly pros and cons. The function can just as
> easily live within a UA or a proxy. In the end, service providers that
> deploy these things will make the decision about where they want it
> done. My sneaking suspicion is that this is best done in a 
> UA, however,
> so that we consistently pass around numbers in messages which have
> meaning globally. Its a similar argument for domain names. 
> Would your UA
> send an INVITE to its local proxy in the form:
> 

What is the nature of a SIP phone that is not a UA? Pointers
to specific documents that describe this would be great!

> INVITE sip:joe@host SIP/2.0
> 
> from within domain foo.com, and then expect the proxy to fill in the
> foo.com within the request URI? 
> 
> > 
> > The alternative is a proxy-based dialing plan.  The phone
> > has a default-dialing domain (DDD), which is appended
> > to numeric entries.
> > 
> > For example, my DDD could be 1847.x.com, which would allow
> > me to dial 2621415 generating <sip:2621415@1847.x.com>, which
> > ultimately means the example above.  Similarly, 8472621415
> > and +18472621415 would also work though my smart
> > proxy.  BTW, for those of  you who have not played with
> > my phone, it has an end-of-dialing (Ok) key.
> 
> I don't like this at all. Domain names are not meant to convey dial
> plans. Rather, the UA should send:
> 
> INVITE tel:2621415 SIP/2.0
> 
> and then the proxy uses its local configuration to determine that this
> number is a local number, and in fully qualified form is
> tel:+18472621415. It may then invoke enum and or TRIP services, and
> forward an INVITE to the next hop proxy, perhaps of the form:
> 
> INVITE tel:+18472621415 SIP/2.0
> 
> or
> 
> INVITE sip:+18472621415@nexthop.com
> 
> I am beginning to lean towards the tel form.
> 
> What is debatable is whether the tel URL from the UA to the proxy
> contains some kind of dialing plan indicator as a URL parameter, or
> whether the dialing plan is known by configuration.
> 
> 
> > In the following example phone1 again has a DDD of 1847.x.com,
> > and is in a call with phone2.  Phone1 attempts a blind transfer to
> > 5551234, (which phone1 means tel:+18475551234, but only the
> > proxy knows it).  The call does not have a route, so the
> > BYE passes end to end without a proxy.
> > 
> > phone1      1847.x.com                      phone2
> >   |             |                              |
> >   | BYE         |                              |
> >   | Also:<sip:5551234@1847.x.com>              |
> >   |------------------------------------------->|
> >   |    200 OK                                  |
> >   |<-------------------------------------------|
> >   |             |                              |
> > 
> 
> Your problem is that you should not transfer to the SIP URL. What you
> really want is to transfer to a tel URL. Furthermore, in the case of
> these transfers (and redirects as well), I think it is essential that
> the tel URL be a complete E.164 number. With normal SIP URLs, if a UA
> was in domain foo.com, it would never do a transfer like:
> 
> BYE
> Also: sip:joe@host
> 
> when it really meant:
> 
> BYE
> Also: sip:joe@host.foo.com
> 
> You'll get yourself in all kinds of horrible troubles by 
> passing around
> URLs that don't have complete domain names in them. Same for phone
> numbers. You are only safe in using incomplete numbers in INVITE
> messages passed to *local* proxies. If your UA is already 
> configured to
> know to send calls to 1847.x.com, why can't it rather be configured to
> know that it should BYE/Also to tel:18475551234?
> 
> 
> -Jonathan R.
> 
> -- 
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120 
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com
> 



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 15:13:56 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA11275
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 15:13:56 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7B7AA531A; Fri, 17 Dec 1999 15:11:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id DAE6D531F; Fri, 17 Dec 1999 15:11:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id E785C531A
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 15:11:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 15:10:42 EST 1999
Received: from atlrel1.hp.com ([156.153.255.210]) by dusty; Fri Dec 17 15:09:05 EST 1999
Received: from otter.hpl.hp.com (otter.hpl.hp.com [15.144.59.2])
	by atlrel1.hp.com (Postfix) with ESMTP
	id 4FE5112357; Fri, 17 Dec 1999 15:09:26 -0500 (EST)
Received: from hplb.hpl.hp.com (kristensen-a-4.hpl.hp.com [15.144.26.238])
	by otter.hpl.hp.com (8.9.3/HP-Labs Bristol Internal Mail Hub) with ESMTP id UAA12628;
	Fri, 17 Dec 1999 20:09:24 GMT
Message-ID: <385A98E1.C5617AEC@hplb.hpl.hp.com>
Date: Fri, 17 Dec 1999 20:11:13 +0000
From: Anders Kristensen <ak@hplb.hpl.hp.com>
Organization: HP Labs
X-Mailer: Mozilla 4.7 [en] (WinNT; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Henning Schulzrinne <hgs@cs.columbia.edu>
Cc: Jonathan Rosenberg <jdrosen@dynamicsoft.com>,
        Henning Schulzrinne <schulzrinne@cs.columbia.edu>, archow@hss.hns.com,
        Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com> <3858FB96.EDD557C3@cs.columbia.edu> <3859D17D.64A211F@dynamicsoft.com> <3859E94B.89BB466D@cs.columbia.edu>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Henning Schulzrinne wrote:
> 
> > >
> > >         - Comparisons of host names MUST be case-insensitive;
> > >
> > >         - Comparisons of scheme names MUST be case-insensitive;
> >
> > Hmm, so this means that comparisons on the user and password are case
> > SENSITIVE, and that comparisons on parameters are also case SENSITIVE.
> > Its a bit yucky with these special cases, but I guess we should be
> > consistent with http and rfc2396. In that case, I think we should
> > explicitly say that the username, password, and parameters comparisons
> > are case sensitive.
> 
> This is somewhat tricky, since two related URL formats collide here:
> 
> 1) The current version of the SIP spec says case-insensitive (CI), so
> there's something to be said for keeping it that way.
> 
> 2) mailto URLs and email addresses are compared CI, if I remember
> correctly (somebody should check RFC 822).

Apart from the special user "postmaster" user id's in email adresses are
case sensitive.

> 
> 3) Unix user ids are CS, but I suppose that it is rare that there will
> be two users whose names differ only in capitalization. Are NT user ids
> CS or CI?
> 
> Thus, I'd prefer CI overall as this increases the chance of
> interoperability. (I.e., since it is very unlikely that there will be
> two truly distinct URLs that only differ in capitalization, CI
> comparison is more likely to work correctly.)
> 
> Clearly, http doesn't have a choice, since path names clearly are often
> CS.

One could argue conversely that allowing more variations just decreases
the chances of interoperability.

HTTP has a good reason for saying that scheme and host names are case
insensitive, which is that cacheing would be adversely effected if
proxies weren't allowed to treat http://abc.com:80/ and http://ABC.com/
as identifying the same resource, as in fact they would be the same
resource since DNS is case insensitive.  Obviously this reason does not
apply to SIP.

-- 
Anders Kristensen <ak@hplb.hpl.hp.com>,
http://www-uk.hpl.hp.com/people/ak/
Hewlett-Packard Labs, Bristol, UK



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 15:16:52 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA11350
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 15:16:52 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 215ED531F; Fri, 17 Dec 1999 15:13:38 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 16FD45320; Fri, 17 Dec 1999 15:13:36 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 93D59531F
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 15:13:09 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 17 15:11:21 EST 1999
Received: from atlrel1.hp.com ([156.153.255.210]) by dusty; Fri Dec 17 15:09:47 EST 1999
Received: from otter.hpl.hp.com (otter.hpl.hp.com [15.144.59.2])
	by atlrel1.hp.com (Postfix) with ESMTP
	id 664FF6E1B; Fri, 17 Dec 1999 15:11:17 -0500 (EST)
Received: from hplb.hpl.hp.com (kristensen-a-4.hpl.hp.com [15.144.26.238])
	by otter.hpl.hp.com (8.9.3/HP-Labs Bristol Internal Mail Hub) with ESMTP id UAA12663;
	Fri, 17 Dec 1999 20:11:15 GMT
Message-ID: <385A9950.E4293BAA@hplb.hpl.hp.com>
Date: Fri, 17 Dec 1999 20:13:04 +0000
From: Anders Kristensen <ak@hplb.hpl.hp.com>
Organization: HP Labs
X-Mailer: Mozilla 4.7 [en] (WinNT; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: archow@hss.hns.com, Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Jonathan Rosenberg wrote:
> 
> Yes, I agree that these are the same. When matching the To and From
> field for call legs, I would say that:
> 
> 1. the display name is not included in the matching
> 2. the matching includes tags
> 3. the matching be based on the user, password, host and port components
> of the URI, in addition to any parameters. The matching is semantic
> based, so that if a default component is omitted, it still matches.
> 4. string comparisons are case insensitive
> 5. an IP address that is the result of a DNS lookup on a hostname does
> NOT match that hostname.
> 
> Matching based on URI parameters is debatable. But, we need at least the
> user param, and rather than special case things, I'd like to make the
> rule simple and consistent. So, lets include all parameters.

This is something of a pain in the neck and possibly a good deal of
overhead. Also, the spec actually says that To and From URIs cannot
contain maddr, ttl, and transport parameters (table 2, p. 24), although
it doesn't mention 'other-params'.

-- 
Anders Kristensen <ak@hplb.hpl.hp.com>,
http://www-uk.hpl.hp.com/people/ak/
Hewlett-Packard Labs, Bristol, UK



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 16:01:54 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id QAA12430
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 16:01:54 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 77BC8531E; Fri, 17 Dec 1999 15:59:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E75495322; Fri, 17 Dec 1999 15:59:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 5D979531E
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 15:59:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 17 15:58:26 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Fri Dec 17 15:56:51 EST 1999
Received: from mr3.exu.ericsson.se (mr3a.ericsson.com [198.215.127.159])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id OAA08927;
	Fri, 17 Dec 1999 14:58:10 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr3.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id OAA18672;
	Fri, 17 Dec 1999 14:58:10 -0600 (CST)
Received: from b04a24.exu.ericsson.se (b04a24 [138.85.60.124]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id OAA07522; Fri, 17 Dec 1999 14:58:09 -0600 (CST)
Received: (from exuadam@localhost)
	by b04a24.exu.ericsson.se (8.9.1/8.9.1) id OAA14140;
	Fri, 17 Dec 1999 14:58:09 -0600 (CST)
Message-Id: <199912172058.OAA14140@b04a24.exu.ericsson.se>
Subject: Re: URL Generalization for Portability (was TRIP)
To: jdrosen@dynamicsoft.com (Jonathan Rosenberg)
Date: Fri, 17 Dec 1999 14:58:09 -0600 (CST)
Cc: dean.willis@wcom.com, Adam.Roach@ericsson.com,
        sip@lists.research.bell-labs.com
In-Reply-To: <3859D3D0.E0B5ECB9@dynamicsoft.com> from "Jonathan Rosenberg" at Dec 17, 99 01:10:24 am
From: "Adam B. Roach" <Adam.Roach@ericsson.com>
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

>One thing at a time. We have several issues here, and I think they are
>orthogonal:
>
>1. When does one use a tel URL, and when does one use a SIP URL with a
>user=phone?
>
>2. How does one convey the numbering plan a number goes by? Does one
>need to indicate this in the URL?
>
>3. How does one indicate the context the number is valid in? Does one
>need to indicate this in the URL?
>
>4. How does one indicate what translations have been applied to the
>number?
>
>
>I want to focus on (1) first. My thinking in my previous post was that
>one uses a tel URL when one doesn't care what gateway provider handles
>the number, and the SIP URL when there is a gateway provider being used.
>I think Dean's and Hennings idea is that one uses a tel URL when a
>number has a scope that is beyond a single domain. Use a SIP URL when
>the number has scope only within a domain, and that domain in a domain
>name or host name.
>
>This definition blends somewhat with the notion of contexts. So, if a
>phone context were for wcom.com, one could use:
>
>tel:5551212;phone-context=wcom.com
>
>or
>
>sip:5551212@wcom.com;user=phone
>
>in this case, its not at all clear to me which one is better than
>another. 

I'd say the tel: version, since the *context* won't always be
unique to a domain. For example, the number tel:5551212;phone-context=local
would be useful to all of the service providers in my area code --
not just wcom.com.

>Regarding (2) and (3), its not clear to me at all how a proxy would
>behave differently based upon knowing the context and/or numbering plan.
>If the proxy has longest prefix match routing tables, isn't that
>sufficient to correctly route numbers without knowing specific numbering
>plans?

Not by a long shot. For example, you could provision your network
so that you generally set up your number analysis for national routing;
e.g. most of your numbers would come in in the form
"tel:9725830000;phone-context=national". However, if one
of your proxies is receiveing an international call, it would
get a URI like "tel:+19725830000". Since your number analysis
is based on the national variation of this, you'll need to strip
off the "+1" before analysing the number.

In general, the contexts will be prefix based, so you'll be able
to do some simple string manipulation instead of maintaining
parallel number analysis trees.

The same argument holds in the reverse direction (e.g. if you do your
routing based on international numbers, you'll need to add a "+1"
to any incoming URI tagged national context).

-- 
Adam Roach, Ericsson Inc. |  Ph: +1 972 583 7594 | 1010 E. Arapaho, MS L-04
adam.roach@ericsson.com   | Fax: +1 972 669 0154 | Richardson, TX 75081 USA



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 16:55:55 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id QAA13655
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 16:55:54 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3CF415321; Fri, 17 Dec 1999 16:53:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A9EA15323; Fri, 17 Dec 1999 16:53:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id CA99D5321
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 16:53:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 16:51:07 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 17 16:49:33 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhuap19025;
	Fri, 17 Dec 1999 21:49:17 GMT
Received: from dynamicsoft.com (1Cust60.tnt3.freehold.nj.da.uu.net [63.25.172.60])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id QAA18022;
	Fri, 17 Dec 1999 16:51:04 -0500 (EST)
Message-ID: <385AB19F.7A8430E6@dynamicsoft.com>
Date: Fri, 17 Dec 1999 16:56:47 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: rick@fdd.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: proxy-based dialing plan problem
References: <199912172006.OAA10736@fdd.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



rick@fdd.com wrote:
> 

> > What is debatable is whether the tel URL from the UA to the proxy
> > contains some kind of dialing plan indicator as a URL parameter, or
> > whether the dialing plan is known by configuration.
> 
> I don't like URL parameters.  I don't want to show one to a
> novice user, nor expect him enter one.  Please make them go away.

Who said anything about showing them to users? Make whatever UI you
like. We are talking about how the software in the phone formats the SIP
messages.


> > If your UA is already configured to
> > know to send calls to 1847.x.com, why can't it rather be configured to
> > know that it should BYE/Also to tel:18475551234?
> 
> My point is to keep the numbering plan which knows
> how to globalize numbers, out of the UA.  I want users to
> be able to perform 7-digit, 10-digit, 11-digit, centrex, etc dialing
> just like my cell phone.

My point here was that you're initial approach already had numbering
plan information in the UA. Your UA is configured to know to take the
dialed number, and add the 1847 as part of the domain. Isn't this
knowledge of a numbering plan? I was arguing that since you already know
this, add this 1847 in front of the digit string rather than at the end.

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 17:12:02 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA14025
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 17:12:02 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id BC52B5323; Fri, 17 Dec 1999 17:09:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3524E5325; Fri, 17 Dec 1999 17:09:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id CD7B25323
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 17:09:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 17:07:30 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 17 17:05:56 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhuaq03584;
	Fri, 17 Dec 1999 22:05:39 GMT
Received: from dynamicsoft.com (1Cust60.tnt3.freehold.nj.da.uu.net [63.25.172.60])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id RAA18044;
	Fri, 17 Dec 1999 17:07:25 -0500 (EST)
Message-ID: <385AB575.60B1CFCD@dynamicsoft.com>
Date: Fri, 17 Dec 1999 17:13:09 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: "Adam B. Roach" <Adam.Roach@ericsson.com>
Cc: dean.willis@wcom.com, sip@lists.research.bell-labs.com
Subject: Re: URL Generalization for Portability (was TRIP)
References: <199912172058.OAA14140@b04a24.exu.ericsson.se>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



"Adam B. Roach" wrote:
> 

> >Regarding (2) and (3), its not clear to me at all how a proxy would
> >behave differently based upon knowing the context and/or numbering plan.
> >If the proxy has longest prefix match routing tables, isn't that
> >sufficient to correctly route numbers without knowing specific numbering
> >plans?
> 
> Not by a long shot. For example, you could provision your network
> so that you generally set up your number analysis for national routing;
> e.g. most of your numbers would come in in the form
> "tel:9725830000;phone-context=national". However, if one
> of your proxies is receiveing an international call, it would
> get a URI like "tel:+19725830000". Since your number analysis
> is based on the national variation of this, you'll need to strip
> off the "+1" before analysing the number.

I see. I had forgotten the case of a proxy receiving requests from
multiple different dial/number plans.

I'm honestly queasy about this. One of things IP did right was to make
its addresses and domain names always well defined independent of where
you are located. With IP addresses, we never send just the last byte,
assuming that the router fills in the rest. In SIP, we did the same. We
pass around URLs, which are interpretable independent of the context.

I understand that people like to stick with the traditional models, but
I see a slippery slope here of problems that will arise with the
possibility of locally defined numbers placed in all these different
fields. Rick has pointed out a very serious one with BYE/Also. I note
that redirect responses have a similar problem when record-routing is
not used. Furthermore, forcing record routes for everything, and having
proxies rewrite Contact, To, Also and From headers will break end to end
authentication, which is very bad. 

I fully agree that users should not need to know about dial and number
plans. I also agree that users should be able to dial extensions and
local numbers as they do today in a PBX. I'd like to understand the
costs involved in having internationalization of numbers done within the
UA. Obtaining a dial plan automatically through a REGISTER response
would still allow an administrator to control it, and to modify it
(registrations get refreshed, so you can send updated versions in the
responses of refreshes). So, my questions are: how complex can a dial
plan be? How many entries in a dial plan table are there usually? How
much processing power does it take to compare a number against a dial
plan and internationalize it?

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Fri Dec 17 21:05:53 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id VAA16977
	for <sip-archive@odin.ietf.org>; Fri, 17 Dec 1999 21:05:53 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 5B7465325; Fri, 17 Dec 1999 21:03:24 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id B3A295326; Fri, 17 Dec 1999 21:03:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 8D5215325
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 21:03:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 21:02:35 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 17 21:01:00 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhubg13084;
	Sat, 18 Dec 1999 02:00:43 GMT
Received: from dynamicsoft.com (1Cust60.tnt3.freehold.nj.da.uu.net [63.25.172.60])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id VAA18378;
	Fri, 17 Dec 1999 21:02:28 -0500 (EST)
Message-ID: <385AEC8A.AD332C12@dynamicsoft.com>
Date: Fri, 17 Dec 1999 21:08:10 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: "Michael A. Ramalho" <mramalho@cisco.com>
Cc: Henning Schulzrinne <schulzrinne@cs.columbia.edu>,
        Dean Willis <dean.willis@wcom.com>,
        John Mainwaring <crm312a@nortelnetworks.com>,
        "Mark D. Foster" <mark.foster@npac.com>,
        "'James Yu'" <james.yu@neustar.com>, sip@lists.research.bell-labs.com,
        enum@ietf.org
Subject: Re: URL Generalization for Portability (was TRIP)
References: <001e01bf466d$373d3140$d19623a6@mcit.com> <4.1.19991216112549.00a4cb50@localhost>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



"Michael A. Ramalho" wrote:
> 
> Virtually all of these telephony-centric LNP-type issues revolve
> about databases which get updated on the order of once a day.
> 
> If LNP dips cost the service provider money (and external LNP
> queries do) .... the service provider has a strong economic
> incentive to cache the resolved numbers for use in subsequent
> calls. [There is also a performance benefit for using cached data].
> 
> Shouldn't we provide a mechanism to at least give us a hint
> that we are using potentially stale information (some mechanism
> to deal with the soft-state issues from a variety of governmental
> and/or service provider administered portability data bases).
> 
> Perhaps a tag that says when the "originally cached dip" was
> performed to give a hint to a subsequent proxy how stale the
> information may be. Any subsequent proxy could do what it
> wished (i.e, do another database dip, if desired).

This merely seems to be passing the buck. If there are issues with data
staleness,
ought we not solve them at the database (i.e., DNS) level, rather than
within SIP?

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 18 00:24:59 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA20861
	for <sip-archive@odin.ietf.org>; Sat, 18 Dec 1999 00:24:59 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 710915326; Sat, 18 Dec 1999 00:18:17 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 745B5532A; Sat, 18 Dec 1999 00:18:16 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 11623531A
	for <sip@lists.research.bell-labs.com>; Fri, 17 Dec 1999 15:09:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 17 15:07:18 EST 1999
Received: from fdd.com ([38.196.86.6]) by dusty; Fri Dec 17 15:05:43 EST 1999
Received: (from rick@localhost)
	by fdd.com (8.9.3/8.9.3) id OAA10736;
	Fri, 17 Dec 1999 14:06:42 -0600
From: rick@fdd.com
Message-Id: <199912172006.OAA10736@fdd.com>
Subject: Re: proxy-based dialing plan problem
To: sip@lists.research.bell-labs.com
Date: Fri, 17 Dec 1999 14:06:41 -0600 (CST)
Cc: jdrosen@dynamicsoft.com
In-Reply-To:  <385A494B.D080E78@dynamicsoft.com>
X-Mailer: ELM [version 2.5 PL1]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


From: jdrosen@dynamicsoft.com
> 
> I believe there are clearly pros and cons. The function can just as
> easily live within a UA or a proxy. In the end, service providers that
> deploy these things will make the decision about where they want it
> done. My sneaking suspicion is that this is best done in a UA, however,
> so that we consistently pass around numbers in messages which have
> meaning globally. Its a similar argument for domain names. Would your UA
> send an INVITE to its local proxy in the form:
> 
> INVITE sip:joe@host SIP/2.0
> 
> from within domain foo.com, and then expect the proxy to fill in the
> foo.com within the request URI? 

My point is to not send around local dial-plan numbers 
without a FQDN context.  

> 
> > 
> > The alternative is a proxy-based dialing plan.  The phone
> > has a default-dialing domain (DDD), which is appended
> > to numeric entries.
> > 
> > For example, my DDD could be 1847.x.com, which would allow
> > me to dial 2621415 generating <sip:2621415@1847.x.com>, which
> > ultimately means the example above.  Similarly, 8472621415
> > and +18472621415 would also work though my smart
> > proxy.  BTW, for those of  you who have not played with
> > my phone, it has an end-of-dialing (Ok) key.
> 
> I don't like this at all. Domain names are not meant to convey dial
> plans. Rather, the UA should send:
> 
> INVITE tel:2621415 SIP/2.0
> 

Yeah, great. I agree send the actual digits dialed to the local 
proxy, but it doesn't help me if I (as the UA) still have to internationalize
the "also" anyway.  Omiting the context of
the numbering plan is less clear.  Do you have a better choice
to convey dial plan than a domain name?

> and then the proxy uses its local configuration to determine that this
> number is a local number, and in fully qualified form is
> tel:+18472621415. It may then invoke enum and or TRIP services, and
> forward an INVITE to the next hop proxy, perhaps of the form:
> 
> INVITE tel:+18472621415 SIP/2.0
> 
> or
> 
> INVITE sip:+18472621415@nexthop.com
> 
> I am beginning to lean towards the tel form.
> 
> What is debatable is whether the tel URL from the UA to the proxy
> contains some kind of dialing plan indicator as a URL parameter, or
> whether the dialing plan is known by configuration.

I don't like URL parameters.  I don't want to show one to a
novice user, nor expect him enter one.  Please make them go away.

I want non-globalized numbers to look like SIP URI's.   Additional
syntax complexity is undesireable.  

> <stuff deleted>
> 
> If your UA is already configured to
> know to send calls to 1847.x.com, why can't it rather be configured to
> know that it should BYE/Also to tel:18475551234?

My point is to keep the numbering plan which knows
how to globalize numbers, out of the UA.  I want users to
be able to perform 7-digit, 10-digit, 11-digit, centrex, etc dialing 
just like my cell phone.

BTW, this is unusual for me to favor a smart netowrk.  The server
guys should take advantage of me while they can.  :-)

--
Rick 
rick_dean@mw.3com.com




From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 18 01:25:50 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA22720
	for <sip-archive@odin.ietf.org>; Sat, 18 Dec 1999 01:25:50 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id CA16D52D5; Sat, 18 Dec 1999 01:23:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 3D8AF52D6; Sat, 18 Dec 1999 01:23:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 431B552D5
	for <sip@lists.research.bell-labs.com>; Sat, 18 Dec 1999 01:23:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sat Dec 18 01:22:25 EST 1999
Received: from smtp02.teb1.iconnet.net ([209.3.218.43]) by dusty; Sat Dec 18 01:20:50 EST 1999
Received: from cs.columbia.edu (client-151-198-123-11.bellatlantic.net [151.198.123.11])
	by smtp02.teb1.iconnet.net (8.9.1/8.9.1) with ESMTP id BAA15639;
	Sat, 18 Dec 1999 01:18:48 -0500 (EST)
Message-ID: <385AC9AF.F69B3F84@cs.columbia.edu>
Date: Fri, 17 Dec 1999 18:39:27 -0500
From: Henning Schulzrinne <hgs@cs.columbia.edu>
X-Mailer: Mozilla 4.61 [en] (Win98; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Anders Kristensen <ak@hplb.hpl.hp.com>
Cc: Jonathan Rosenberg <jdrosen@dynamicsoft.com>, archow@hss.hns.com,
        Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com> <3858FB96.EDD557C3@cs.columbia.edu> <3859D17D.64A211F@dynamicsoft.com> <3859E94B.89BB466D@cs.columbia.edu> <385A98E1.C5617AEC@hplb.hpl.hp.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

> > 2) mailto URLs and email addresses are compared CI, if I remember
> > correctly (somebody should check RFC 822).
> 
> Apart from the special user "postmaster" user id's in email adresses are
> case sensitive.
> 
> One could argue conversely that allowing more variations just decreases
> the chances of interoperability.
> 
> HTTP has a good reason for saying that scheme and host names are case
> insensitive, which is that cacheing would be adversely effected if
> proxies weren't allowed to treat http://abc.com:80/ and http://ABC.com/
> as identifying the same resource, as in fact they would be the same
> resource since DNS is case insensitive.  Obviously this reason does not
> apply to SIP.

Given that email id's are CS (with the irrelevant exception of
Postmaster), it probably would be wise not to deviate. However, since
RFC 822 also specifies

I like the idea of a canonical URL, in that we could strongly recommend
all lower-case representations for hostnames. Unfortuntely, the mailto
URL RFC (2368) is silent on this whole topic.

Also, I'm less concerned about call matching as about REGISTER and
whether a proxy detects a call as being its "responsibility", all of
which rely on URL matching.

Thus, summary:

- parameter names are CI

- rest is CS

- host names will have to be CI, even though that's a pain. Given the
precedence of RFC 822 and HTTP, it would be difficult to deviate here.
(This primarily matters for REGISTER matching, since people do have all
kinds of variations, particularly for CamelCase.)

- user names have to be CS, given RFC 822. It would be bad if an
installation had two user id's distinguished via case and then couldn't
assign these ids as SIP ids. (I suppose that having John and john for
John Sr. and John Jr. would not be a smart move to begin with...)

Besides having to pay more attention when building the URL comparer, a
pure strcmp or strcasecmp on two URLs can never work, so one has to
compare component-by-component. In that case, comparing sometimes via
strcmp and sometimes via strcasecmp is not likely to bloat the code,
just add a nuisance to programming.





From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 18 01:29:00 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA22947
	for <sip-archive@odin.ietf.org>; Sat, 18 Dec 1999 01:29:00 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id ACBBC52D6; Sat, 18 Dec 1999 01:25:46 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6FA7B52DB; Sat, 18 Dec 1999 01:25:45 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 5ACFA52D6
	for <sip@lists.research.bell-labs.com>; Sat, 18 Dec 1999 01:25:08 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Sat Dec 18 01:23:24 EST 1999
Received: from smtp02.teb1.iconnet.net ([209.3.218.43]) by dusty; Sat Dec 18 01:21:50 EST 1999
Received: from cs.columbia.edu (client-151-198-123-11.bellatlantic.net [151.198.123.11])
	by smtp02.teb1.iconnet.net (8.9.1/8.9.1) with ESMTP id BAA15714;
	Sat, 18 Dec 1999 01:19:51 -0500 (EST)
Message-ID: <385AC9AF.F69B3F84@cs.columbia.edu>
Date: Fri, 17 Dec 1999 18:39:27 -0500
From: Henning Schulzrinne <hgs@cs.columbia.edu>
X-Mailer: Mozilla 4.61 [en] (Win98; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Anders Kristensen <ak@hplb.hpl.hp.com>
Cc: Jonathan Rosenberg <jdrosen@dynamicsoft.com>, archow@hss.hns.com,
        Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com> <3858FB96.EDD557C3@cs.columbia.edu> <3859D17D.64A211F@dynamicsoft.com> <3859E94B.89BB466D@cs.columbia.edu> <385A98E1.C5617AEC@hplb.hpl.hp.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

> > 2) mailto URLs and email addresses are compared CI, if I remember
> > correctly (somebody should check RFC 822).
> 
> Apart from the special user "postmaster" user id's in email adresses are
> case sensitive.
> 
> One could argue conversely that allowing more variations just decreases
> the chances of interoperability.
> 
> HTTP has a good reason for saying that scheme and host names are case
> insensitive, which is that cacheing would be adversely effected if
> proxies weren't allowed to treat http://abc.com:80/ and http://ABC.com/
> as identifying the same resource, as in fact they would be the same
> resource since DNS is case insensitive.  Obviously this reason does not
> apply to SIP.

Given that email id's are CS (with the irrelevant exception of
Postmaster), it probably would be wise not to deviate. However, since
RFC 822 also specifies

I like the idea of a canonical URL, in that we could strongly recommend
all lower-case representations for hostnames. Unfortuntely, the mailto
URL RFC (2368) is silent on this whole topic.

Also, I'm less concerned about call matching as about REGISTER and
whether a proxy detects a call as being its "responsibility", all of
which rely on URL matching.

Thus, summary:

- parameter names are CI

- rest is CS

- host names will have to be CI, even though that's a pain. Given the
precedence of RFC 822 and HTTP, it would be difficult to deviate here.
(This primarily matters for REGISTER matching, since people do have all
kinds of variations, particularly for CamelCase.)

- user names have to be CS, given RFC 822. It would be bad if an
installation had two user id's distinguished via case and then couldn't
assign these ids as SIP ids. (I suppose that having John and john for
John Sr. and John Jr. would not be a smart move to begin with...)

Besides having to pay more attention when building the URL comparer, a
pure strcmp or strcasecmp on two URLs can never work, so one has to
compare component-by-component. In that case, comparing sometimes via
strcmp and sometimes via strcasecmp is not likely to bloat the code,
just add a nuisance to programming.





From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 18 01:31:27 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA23220
	for <sip-archive@odin.ietf.org>; Sat, 18 Dec 1999 01:31:27 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3070F52DB; Sat, 18 Dec 1999 01:27:27 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 8FEE052DC; Sat, 18 Dec 1999 01:27:26 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 6A3C552DB
	for <sip@lists.research.bell-labs.com>; Sat, 18 Dec 1999 01:27:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sat Dec 18 01:25:20 EST 1999
Received: from smtp02.teb1.iconnet.net ([209.3.218.43]) by dusty; Sat Dec 18 01:23:46 EST 1999
Received: from cs.columbia.edu (client-151-198-123-11.bellatlantic.net [151.198.123.11])
	by smtp02.teb1.iconnet.net (8.9.1/8.9.1) with ESMTP id BAA15977;
	Sat, 18 Dec 1999 01:25:11 -0500 (EST)
Message-ID: <385AC9AF.F69B3F84@cs.columbia.edu>
Date: Fri, 17 Dec 1999 18:39:27 -0500
From: Henning Schulzrinne <hgs@cs.columbia.edu>
X-Mailer: Mozilla 4.61 [en] (Win98; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Anders Kristensen <ak@hplb.hpl.hp.com>
Cc: Jonathan Rosenberg <jdrosen@dynamicsoft.com>, archow@hss.hns.com,
        Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com> <3858FB96.EDD557C3@cs.columbia.edu> <3859D17D.64A211F@dynamicsoft.com> <3859E94B.89BB466D@cs.columbia.edu> <385A98E1.C5617AEC@hplb.hpl.hp.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

> > 2) mailto URLs and email addresses are compared CI, if I remember
> > correctly (somebody should check RFC 822).
> 
> Apart from the special user "postmaster" user id's in email adresses are
> case sensitive.
> 
> One could argue conversely that allowing more variations just decreases
> the chances of interoperability.
> 
> HTTP has a good reason for saying that scheme and host names are case
> insensitive, which is that cacheing would be adversely effected if
> proxies weren't allowed to treat http://abc.com:80/ and http://ABC.com/
> as identifying the same resource, as in fact they would be the same
> resource since DNS is case insensitive.  Obviously this reason does not
> apply to SIP.

Given that email id's are CS (with the irrelevant exception of
Postmaster), it probably would be wise not to deviate. However, since
RFC 822 also specifies

I like the idea of a canonical URL, in that we could strongly recommend
all lower-case representations for hostnames. Unfortuntely, the mailto
URL RFC (2368) is silent on this whole topic.

Also, I'm less concerned about call matching as about REGISTER and
whether a proxy detects a call as being its "responsibility", all of
which rely on URL matching.

Thus, summary:

- parameter names are CI

- rest is CS

- host names will have to be CI, even though that's a pain. Given the
precedence of RFC 822 and HTTP, it would be difficult to deviate here.
(This primarily matters for REGISTER matching, since people do have all
kinds of variations, particularly for CamelCase.)

- user names have to be CS, given RFC 822. It would be bad if an
installation had two user id's distinguished via case and then cX-Mozilla-Status: 0009ids as SIP ids. (I suppose that having John and john for
John Sr. and John Jr. would not be a smart move to begin with...)

Besides having to pay more attention when building the URL comparer, a
pure strcmp or strcasecmp on two URLs can never work, so one has to
compare component-by-component. In that case, comparing sometimes via
strcmp and sometimes via strcasecmp is not likely to bloat the code,
just add a nuisance to programming.





From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 18 13:36:00 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA08553
	for <sip-archive@odin.ietf.org>; Sat, 18 Dec 1999 13:36:00 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 0785E52AB; Sat, 18 Dec 1999 13:29:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 7AF7352BB; Sat, 18 Dec 1999 13:29:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9D63D52AB
	for <sip@lists.research.bell-labs.com>; Sat, 18 Dec 1999 13:29:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sat Dec 18 13:27:08 EST 1999
Received: from fdd.com ([38.196.86.6]) by dusty; Sat Dec 18 13:25:30 EST 1999
Received: (from rick@localhost)
	by fdd.com (8.9.3/8.9.3) id MAA11746;
	Sat, 18 Dec 1999 12:27:00 -0600
From: rick@fdd.com
Message-Id: <199912181827.MAA11746@fdd.com>
Subject: Re: proxy-based dialing plan problem
To: jdrosen@dynamicsoft.com (Jonathan Rosenberg)
Date: Sat, 18 Dec 1999 12:27:00 -0600 (CST)
Cc: sip@lists.research.bell-labs.com
In-Reply-To: <385AB19F.7A8430E6@dynamicsoft.com> from "Jonathan Rosenberg" at Dec 17, 1999 04:56:47 PM
X-Mailer: ELM [version 2.5 PL1]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


> From jdrosen@dynamicsoft.com  Fri Dec 17 15:51:08 1999
> 
> Who said anything about showing them to users? Make whatever UI you
> like. We are talking about how the software in the phone formats the SIP
> messages.
> 

Are you suggesting everyone derive their own user representation?  
IMHO, "friendly" URL's of MSIE suck.
If we are not designing a protocol to be human readable, then
why not use ASN.  :-)   Whatever we specify will
be shown to users and will be printed in advertisements.
What do I enter in my palm?

I am running out of memory inside my phone.   I have a
two line display of 16 characters each.  People don't read
documentation.  They insist they already know how to work a
phone, or the phone is broken.  Let us please keep this 
simple without additional URL parameters.

> 
> My point here was that you're initial approach already had numbering
> plan information in the UA. Your UA is configured to know to take the
> dialed number, and add the 1847 as part of the domain. Isn't this
> knowledge of a numbering plan? I was arguing that since you already know
> this, add this 1847 in front of the digit string rather than at the end.
> 

Sorry, it was a bad example.  In Germany it is not possible to 
globalize a number simply by its length.  Similarly, I fear the Y2K problem
when we add another digit to the North American numbering plan.

I fear constructing (yet another) syntax for representing the
dialing plan.  Appending @1847.x.com, when @ is missing, is
my kind of algorithm.  

To extend your DNS analogies, putting a PSTN numbering plan inside
a SIP phone is akin to forsaking DNS for host files.

Sorry, but I am in a bit of a hurry to get this solved.  

--
Rick
Rick_Dean@mw.3com.com





From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 18 15:23:46 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA09772
	for <sip-archive@odin.ietf.org>; Sat, 18 Dec 1999 15:23:45 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4FA6752BB; Sat, 18 Dec 1999 15:21:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id B227652C4; Sat, 18 Dec 1999 15:21:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 9F81352BB
	for <sip@lists.research.bell-labs.com>; Sat, 18 Dec 1999 15:21:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sat Dec 18 15:20:33 EST 1999
Received: from PMESMTP01.wcom.com ([199.249.20.1]) by dusty; Sat Dec 18 15:18:55 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #41714)
 id <0FMY00201DU6XS@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Sat, 18 Dec 1999 20:20:30 +0000 (GMT)
Received: from ndcrelay.mcit.com ([166.37.172.49])
 by firewall.mcit.com (PMDF V5.2-32 #41714)
 with ESMTP id <0FMY0003PDU613@firewall.mcit.com>; Sat,
 18 Dec 1999 20:20:30 +0000 (GMT)
Received: from omta3.mcit.com (omta3.mcit.com [166.37.204.5])
 by ndcrelay.mcit.com (8.8.7/) with ESMTP	id UAA06760; Sat,
 18 Dec 1999 20:18:52 +0000 (GMT)
Received: from dwillispc ([166.44.162.174])
 by omta3.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991218202036.JCKF16210@dwillispc>; Sat,
 18 Dec 1999 20:20:36 +0000
Date: Sat, 18 Dec 1999 14:20:22 -0600
From: Dean Willis <dean.willis@wcom.com>
Subject: RE: URL Generalization for Portability (was TRIP)
In-reply-to: <3859D3D0.E0B5ECB9@dynamicsoft.com>
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: "Adam B. Roach" <Adam.Roach@ericsson.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Message-id: <000301bf4995$4fadacc0$55fa403f@directlink.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Jonathan asked:
> Regarding (2) and (3), its not clear to me at all how a proxy would
> behave differently based upon knowing the context and/or numbering plan.
> If the proxy has longest prefix match routing tables, isn't that
> sufficient to correctly route numbers without knowing specific numbering
> plans? I really don't want to have to program my proxy with all these
> different numbering plans.
>
> So, before we start running away with all this stuff, we need to answer:
> what problems are they solving?

That depends on what you mean by a numbering plan. A lot of carrier business
is around supporting private numbering plans, which we call "VNETs". Some
people call them VPNs or VPDNs, which results in no end of confusion. In any
case, it is producing no end of confusion on how to manage this inside a
gateway's configuration without requiring dialing-plan knowledge in the
gateway.

A given local (or private, using ISUP NOA semantics) number like 7724162 is
unresolvable by a proxy without more information -- namely, which numbering
(VNET) plan is being referred to.

Note that I think the NOA from ISUP is insufficient -- "unknown" is not the
same as "private", because there can be many different "private" contexts.

If a UA has a fixed context, a routing proxy could simply look the UA up in
a table in order to find the default VNET for the UA. We could add a
gateway-specific VNET code which indicates the default VNET of the gateway.
We could add an originating trunk-specific field to allow for multiple
trunks, each of which is potentially associated with a different VNET.

There are some questions about when the UA should supply the context
variable. Our first though has been that the UA (actually, a gateway) should
ALWAYS append the unkown phone-context, and we'd figure out whether the call
really was global, local, or private through number analysis in the proxy.
So, if a proxy knows a particular gateway is US-based, has a 7-digit private
numbering plan, and receives leading 9s for public calls and leading 8s for
private calls, then number analysis could determine that:
	<tel:99727724162;phone-context=unknown;vnet=00000026>
		Is a call to "+19727724162",
		Rewritten as <tel:+19727724162> or
		  <tel:19727724162;phone-context=global>
	<tel:97724162;phone-context=unknown;vnet=00000026>
		Is a call to local public number 772-4162 in the default area code.
		Rewritten as <tel:9727724162> or
	        <tel:9727724162;phone-context=local>
	<tel:87724162;phone-context=unknown;vnet=00000026>
		Is a call to number 7724162 in the private numbering plan "00000026".
		Rewritten as <tel:7724162;phone-context=private;vnet=00000026>
		Where the presence of a "private" context indicates that vnet translation
has occurred.

This works just dandy as long as a gateway is associated with a single VNET,
or as long as individual PSTN ports on the gateway (associated with trunks
into that gateway) are associated with a single VNET. Of course, it isn't
all that semantically clear, as the input digits are considered "private"
context until treated by the proxy.

But when a trunk into a gateway becomes "shared" and has multiple associated
VNETs, things get weird. This of course would be the case for very large
"central office" gateway complexes. This was solved in the switch world by
adding some extra stuff into a proprietary ISUP. I'd rather not have to
promulgate propietary SUP into SIP gateways, as it adds a certain element of
expense and complexity.

The question is -- how does a gateway which accepts multiple VNETs into the
same port figure out which VNET applies, or how does it include enough
information to allow

One proposal has been to overload the phone number by prepending (at the
originating switch) a 2 digit class code (usually 45) and another 8 digits
of VNET info to the dialed digits.  This of course assumes a
non-shared-trunk into the originating switch, which is apparently
reasonable. This extra data bebops along in the called-number field of ISUP
until it hits the gateway, whereon it is copied into the request-URI and
sent to a proxy which routes the call. One inverts the approach if needed
for an egress gateway.

So, in the case of GSTN into a shared gateway, the cases might look like:
	Call to +19727724162
	  ISUP digits 9727724162, noa=public, npi=e.164 produces request
	  <tel:9727294162;phone-context=public>
	  which can be routed without rewrite
	Call to 7724162 in vnet 26
	  ISUP digits 45000000267724162, noa=private, npi=e.164
	  <tel:7724162;phone-context=private,vnet=00000026>
	  which might be rewritten by the proxy to
	  <tel:7724162;phone-context=private;vnet=00000026>

The resulting approach then would be:

On GSTN->IP, a switch-facing shared ISUP gateway constructs the request URI
by:
1) Start with the string "tel:"
2) If the NOA is private then:
     copy from the 11th digit through the last digit into the request-URI
   else
     Append all destination digits into the request URI.
3) Append the string ";phone-context"
4) Append a string of "public" or "private" to the request based on the NOA
indicator.
5) If the NOA is "private", append the string ";vnet=" followed by 3rd thru
10th digits

On IP->GSTN, a switch-facing shared ISUP gateway constructs the dialed
number by
1) If the phone context is "private" and there is a vnet field,
   append the configured class code, like "45" to dialed-num
   copy all digits from the vnet=parameter to dialed-num
2) copy all digits between "tel: and (EOL or ";") into the dialed number
field
2) is there is no phone-context, set the NOA to public
3) if there is a phone-context, set the NOA accordingly

On GSTN->IP, a non-shared-trunk non-isup gateway constructs the request URI
by:
1) Start with the string "tel:"
2) Append the dialed digits
3) Append "user=phone;phone-context=unknown;trunk="
5) Append the configured gateway, trunk or port name or number string.

On IP->GSTN, a non-shared-trunk non-isup gateway constructs the dialed
number by:
1) Copy the digits from request-URI after "tel:" up until the first ";", if
any
2) if the is a "trunk=" parameter and the gateway supports named trunks,
       outpulse on the matching trunk
   else
	 outpulse on any tunk

You know, this is starting to get tedious. The phone network really makes my
head hurt.

--
Dean




From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec 19 22:22:00 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id WAA13347
	for <sip-archive@odin.ietf.org>; Sun, 19 Dec 1999 22:22:00 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id B523352AB; Sun, 19 Dec 1999 22:19:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 270A852BB; Sun, 19 Dec 1999 22:19:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 43E1552AB
	for <sip@lists.research.bell-labs.com>; Sun, 19 Dec 1999 22:19:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sun Dec 19 22:17:33 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Sun Dec 19 22:15:56 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhuiv29154;
	Mon, 20 Dec 1999 03:15:47 GMT
Received: from dynamicsoft.com (1Cust144.tnt2.freehold.nj.da.uu.net [63.17.114.144])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id WAA18888;
	Sun, 19 Dec 1999 22:17:26 -0500 (EST)
Message-ID: <385DA12D.DFF1006D@dynamicsoft.com>
Date: Sun, 19 Dec 1999 22:23:25 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: rick@fdd.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: proxy-based dialing plan problem
References: <199912181827.MAA11746@fdd.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



rick@fdd.com wrote:
> 
> >From jdrosen@dynamicsoft.com  Fri Dec 17 15:51:08 1999
> >
> > Who said anything about showing them to users? Make whatever UI you
> > like. We are talking about how the software in the phone formats the SIP
> > messages.
> >
> 
> Are you suggesting everyone derive their own user representation?
> IMHO, "friendly" URL's of MSIE suck.
> If we are not designing a protocol to be human readable, then
> why not use ASN.  :-)   Whatever we specify will
> be shown to users and will be printed in advertisements.
> What do I enter in my palm?
> 
> I am running out of memory inside my phone.   I have a
> two line display of 16 characters each.  People don't read
> documentation.  They insist they already know how to work a
> phone, or the phone is broken.  Let us please keep this
> simple without additional URL parameters.

SIP already has URL parameters. Would you suggest we move them into the
domain name to be more "friendly" as well? If you think phone context is
ugly, then split it out of the URL and present it in some other way to
the user if this is needed.

However, the phone context parameter, or something like that, is likely
to be something that is only inserted by a UA before a call is made, and
not present in URLs in billboards. HTTP has URL parameters, as does
mailto, but usually they are not needed when printed in ads. Any URLs in
billboards or advertisements really better be globally significant
telephone numbers, in which case:

tel:+1-516-555-1212

couldn't get much more human friendly.



> 
> >
> > My point here was that you're initial approach already had numbering
> > plan information in the UA. Your UA is configured to know to take the
> > dialed number, and add the 1847 as part of the domain. Isn't this
> > knowledge of a numbering plan? I was arguing that since you already know
> > this, add this 1847 in front of the digit string rather than at the end.
> >
> 
> Sorry, it was a bad example.  In Germany it is not possible to
> globalize a number simply by its length.  Similarly, I fear the Y2K problem
> when we add another digit to the North American numbering plan.

I'm not following you here. What has length got to do with it? 


> To extend your DNS analogies, putting a PSTN numbering plan inside
> a SIP phone is akin to forsaking DNS for host files.

In fact, this already exists in DNS, but it has nothing to do with host
files. If I do something like:

telnet myhost

at my machine, it automatically appends my domain (dynamicsoft.com)
which has been pre-configured in my machine, and then looks for
myhost.dynamicsoft.com in DNS. This is exactly what we are talking
about. 

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec 19 22:35:40 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id WAA14351
	for <sip-archive@odin.ietf.org>; Sun, 19 Dec 1999 22:35:40 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3ADB652BB; Sun, 19 Dec 1999 22:33:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A819652C4; Sun, 19 Dec 1999 22:33:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id DE31552BB
	for <sip@lists.research.bell-labs.com>; Sun, 19 Dec 1999 22:33:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sun Dec 19 22:32:03 EST 1999
Received: from smtp-out2.bellatlantic.net ([199.45.39.157]) by dusty; Sun Dec 19 22:30:26 EST 1999
Received: from cs.columbia.edu (adsl-151-198-20-48.bellatlantic.net [151.198.20.48])
	by smtp-out2.bellatlantic.net (8.9.1/8.9.1) with ESMTP id WAA19176;
	Sun, 19 Dec 1999 22:37:47 -0500 (EST)
Message-ID: <385DA33B.13F6A9E0@cs.columbia.edu>
Date: Sun, 19 Dec 1999 22:32:11 -0500
From: Henning Schulzrinne <hgs@cs.columbia.edu>
X-Mailer: Mozilla 4.7 [en]C-CCK-MCD BA45DSL  (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: rick@fdd.com, sip@lists.research.bell-labs.com
Subject: Re: proxy-based dialing plan problem
References: <199912181827.MAA11746@fdd.com> <385DA12D.DFF1006D@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


> In fact, this already exists in DNS, but it has nothing to do with host

Actually, to be picky, it's not a protocol feature, but rather a
resolver feature. In the context of this discussion, this distinction
may need to be kept in mind, since we are talking about adding things to
SIP rather than just a UI.

> files. If I do something like:
> 
> telnet myhost
> 
> at my machine, it automatically appends my domain (dynamicsoft.com)
> which has been pre-configured in my machine, and then looks for
> myhost.dynamicsoft.com in DNS. This is exactly what we are talking
> about.
> 
This is also an example why this type of abbreviation needs to be done
very carefully. These "local" URLs mess up cookies, for example (since
the browser doesn't know that www.local.com is the same as www.) In the
SIP context, allowing ambiguity is likely to make call-matching
difficult, as well as various UI and script functions such as call logs,
histories and call processing scripts.

If we are not careful, we are heading towards the same NAT problems of
local name spaces that are causing no end of grief a few layers below.

UIs filling in the high-order parts of an address is much preferable, in
my book, since then the whole application sees the same, complete
address.

Henning



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 02:02:48 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id CAA22684
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 02:02:48 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id F407152C4; Mon, 20 Dec 1999 01:56:17 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 544B652D6; Mon, 20 Dec 1999 01:56:16 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id E406852D5
	for <sip@lists.research.bell-labs.com>; Sat, 18 Dec 1999 00:51:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sat Dec 18 00:50:06 EST 1999
Received: from hotmail.com ([216.32.180.194]) by dusty; Sat Dec 18 00:48:32 EST 1999
Received: (qmail 77149 invoked by uid 0); 18 Dec 1999 05:50:04 -0000
Message-ID: <19991218055004.77148.qmail@hotmail.com>
Received: from 24.113.248.38 by www.hotmail.com with HTTP;	Fri, 17 Dec 1999 21:50:04 PST
X-Originating-IP: [24.113.248.38]
From: "Kam Lee" <kamleesys@hotmail.com>
To: sip@lists.research.bell-labs.com
Subject: nesting of switch statements
Date: Fri, 17 Dec 1999 21:50:04 PST
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Does CPL allow the nesting of multiple switch (string or time) constructs?

thanks
______________________________________________________
Get Your Private, Free Email at http://www.hotmail.com




From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 02:20:55 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id CAA26617
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 02:20:54 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3C3EE52DF; Mon, 20 Dec 1999 01:58:06 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 41FA152D6; Mon, 20 Dec 1999 01:58:01 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 565E452B6
	for <sip@lists.research.bell-labs.com>; Sun, 19 Dec 1999 09:55:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sun Dec 19 09:53:35 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Sun Dec 19 09:51:57 EST 1999
Received: from mr4.exu.ericsson.se (mr4a.ericsson.com [198.215.127.160])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id IAA19690;
	Sun, 19 Dec 1999 08:53:24 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr4.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id IAA11810;
	Sun, 19 Dec 1999 08:53:23 -0600 (CST)
Received: from qpop.exu.ericsson.se (qpop [138.85.1.15]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id IAA09490; Sun, 19 Dec 1999 08:53:19 -0600 (CST)
Received: from ericsson.com (rmt150 [138.85.147.150])
	by qpop.exu.ericsson.se (8.9.1/8.9.1) with ESMTP id IAA06342;
	Sun, 19 Dec 1999 08:52:11 -0600 (CST)
Message-ID: <385CF141.C88A05B7@ericsson.com>
Date: Sun, 19 Dec 1999 15:52:50 +0100
From: Ulf Andersson <ulf.andersson@ericsson.com>
Organization: Ericsson Inc
X-Mailer: Mozilla 4.04 [en] (Win95; I)
MIME-Version: 1.0
To: "tony@netspeak.com" <tony@netspeak.com>,
        "noreilly@netspeak.com" <noreilly@netspeak.com>,
        "artru@8x8.com" <artru@8x8.com>, "marc@8x8.com" <marc@8x8.com>,
        "isabelle@8x8.com" <isabelle@8x8.com>, "jfc@8x8.com" <jfc@8x8.com>,
        "scottsc@8x8.com" <scottsc@8x8.com>,
        "dpetrie@pingtel.com" <dpetrie@pingtel.com>,
        "patel@pingtel.com" <patel@pingtel.com>,
        "terry@catapult.com" <terry@catapult.com>,
        "richard@catapult.com" <richard@catapult.com>,
        "ronald@catapult.com" <ronald@catapult.com>,
        "imene@catapult.com" <imene@catapult.com>,
        "Ashok_Ganesan@Mitel.COM" <Ashok_Ganesan@Mitel.COM>,
        "Jerry_yin@mitel.com" <Jerry_yin@Mitel.COM>,
        "hgs@cs.columbia.edu" <hgs@cs.columbia.edu>,
        "lennox@cs.columbia.edu" <lennox@cs.columbia.edu>,
        "xiaotaow@cs.columbia.edu" <xiaotaow@cs.columbia.edu>,
        "orton@nortelnetworks.com" <orton@nortelnetworks.com>,
        "ingle@nortelnetworks.com" <ingle@nortelnetworks.com>,
        "billj@nortelnetworks.com" <billj@nortelnetworks.com>,
        "oste@nortelnetworks.com" <oste@nortelnetworks.com>,
        "williaml@nortelnetworks.com" <williaml@nortelnetworks.com>,
        "mohammad.vakil@wcom.com" <mohammad.vakil@wcom.com>,
        "robert.sparks@wcom.com" <robert.sparks@wcom.com>,
        "saravanan.balasubramanian@wcom.com" <saravanan.balasubramanian@wcom.com>,
        "steven.r.donovan@wcom.com" <steven.r.donovan@wcom.com>,
        "sachin.danait@wcom.com" <sachin.danait@wcom.com>,
        "buzz.mcdermott@wcom.com" <buzz.mcdermott@wcom.com>,
        "john.k.gallant@wcom.com" <john.k.gallant@wcom.com>,
        "paul.schultz@wcom.com" <paul.schultz@wcom.com>,
        "douglas_carson@agilent.com" <douglas_carson@agilent.com>,
        "joyce@broadsoft.com" <joyce@broadsoft.com>,
        "dave@broadsoft.com" <dave@broadsoft.com>,
        "jamie@broadsoft.com" <jamie@broadsoft.com>,
        "alex@broadsoft.com" <alex@broadsoft.com>,
        "rkrishna@vtel.com" <rkrishna@vtel.com>,
        "vmath@vtel.com" <vmath@vtel.com>,
        "wkwok@telogy.com" <wkwok@telogy.com>,
        "mwinslow@radcomusa.com" <mwinslow@radcomusa.com>,
        "dnevo@radcomusa.com" <dnevo@radcomusa.com>,
        "eb@indigo-software.com" <eb@indigo-software.com>,
        "nzi@indigo-software.com" <nzi@indigo-software.com>,
        "cz@indigo-software.com" <cz@indigo-software.com>,
        "cteoh@nuera.com" <cteoh@nuera.com>, "mluu@nuera.com" <mluu@nuera.com>,
        "memami@nuera.com" <memami@nuera.com>,
        "jryner@nuera.com" <jryner@nuera.com>,
        "adam.roach@ericsson.com" <adam.roach@ericsson.com>,
        "sean.olson@ericsson.com" <sean.olson@ericsson.com>,
        "mark.peck@ericsson.com" <mark.peck@ericsson.com>,
        "cjessen@nortelnetworks.com" <cjessen@nortelnetworks.com>,
        "psollee@nortelnetworks.com" <psollee@nortelnetworks.com>,
        "kelvin.porter@wcom.com" <kelvin.porter@wcom.com>,
        "mark.x.johnson@wcom.com" <mark.x.johnson@wcom.com>,
        "ajay.deo@wcom.com" <ajay.deo@wcom.com>,
        "tina.guo@wcom.com" <tina.guo@wcom.com>,
        "vpatel@dynamicsoft.com" <vpatel@dynamicsoft.com>,
        Jonathan Rosenberg <jdrosen@dynamicsoft.com>,
        "trang@dynamicsoft.com" <trang@dynamicsoft.com>,
        "manojb@cisco.com" <manojb@cisco.com>,
        "sudiptom@cisco.com" <sudiptom@cisco.com>,
        "clindner@cisco.com" <clindner@cisco.com>,
        "rhicks@delta-info.com" <rhicks@delta-info.com>,
        "prandall@delta-info.com" <prandall@delta-info.com>,
        "nurban@delta-info.com" <nurban@delta-info.com>,
        "jon2@andrew.cmu.edu" <jon2@andrew.cmu.edu>,
        "mrappard@andrew.cmu.edu" <mrappard@andrew.cmu.edu>,
        "ak@hplb.hpl.hp.com" <ak@hplb.hpl.hp.com>,
        "jose@tct.hut.fi" <jose@tct.hut.fi>,
        "queca@tct.hut.fi" <queca@tct.hut.fi>,
        "Jerry_Mahler@mw.3com.com" <Jerry_Mahler@mw.3com.com>,
        "Rick_Dean@mw.3com.com" <Rick_Dean@mw.3com.com>,
        "jii@oz.com" <jii@oz.com>, "oli@oz.com" <oli@oz.com>,
        "etremblay@mediatrix.com" <etremblay@mediatrix.com>,
        "jfwaddell@mediatrix.com" <jfwaddell@mediatrix.com>,
        "hans@erix.ericsson.se" <hans@erix.ericsson.se>,
        "mml@erix.ericsson.se" <mml@erix.ericsson.se>,
        "calle@erix.ericsson.se" <calle@erix.ericsson.se>,
        "Ravandhu_hariram@3com.com" <Ravandhu_hariram@3com.com>,
        "anoop_tripathi@3com.com" <anoop_tripathi@3com.com>,
        "clark@facetcorp.com" <clark@facetcorp.com>,
        "larry@facetcorp.com" <larry@facetcorp.com>,
        "johnm@facetcorp.com" <johnm@facetcorp.com>,
        "jim@facetcorp.com" <jim@facetcorp.com>,
        "brad@facetcorp.com" <brad@facetcorp.com>,
        "alex@ipcell.com" <alex@ipcell.com>,
        "sankar@ipcell.com" <sankar@ipcell.com>,
        "ldang@vovida.com" <ldang@vovida.com>,
        "cjennings@vovida.com" <cjennings@vovida.com>,
        "skumar@vovida.com" <skumar@vovida.com>,
        sip@lists.research.bell-labs.com, ensc-tia@sfu.ca,
        sip-implementors@cs.columbia.edu, confctrl@isi.edu,
        iptel@lists.research.bell-labs.com, eriietf@kk.ericsson.se
Cc: barbara.boyle@ericsson.com
Subject: Bakeoff Press Release
Content-Type: text/plain; charset=iso-8859-1
X-MIME-Autoconverted: from 8bit to quoted-printable by gwa.ericsson.com id IAA19690
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by ietf.org id CAA26617

Hi!

Attached is a copy of the 3rd SIP Bakeoff press release that went out earlier this week.
Please refer all questions regarding the press release to Barbara Boyle at 972-583-5481.
Thank you!

Regards,
Ulf


-- Attached Press Release --

ERICSSON

FOR IMMEDIATE RELEASE

LEADING EQUIPMENT VENDORS, SERVICE PROVIDERS AND RESEARCH
ORGANIZATIONS UNITE TO ADVANCE INTERNET TELEPHONY STANDARD

Third SIP Bake-Off brings 26 organizations together to test for interoperability using
Session Initiation Protocol (SIP)

Richardson, Texas  December 14, 1999  Engineering groups representing leading vendors,
service providers and research organizations met last week to test the interoperability of
their
Internet telephony products.

The technology "bake-off" was the industrys third event organized to test the
interoperability of
software and hardware devices using the Session Initiation Protocol (SIP), which is used
to initiate,
manage and terminate interactive sessions, including voice, across a wide area network.
SIP became
an official standard of the Internet Engineering Task Force (IETF) in March 1999 and has
gained
significant support among telco equipment vendors, carriers, CLECs, cable operators and
web
based voice chat providers.

The Third SIP Bake-Off, sponsored by Ericsson, was the largest event to date to test for
industry
interoperability using SIP, with 31 teams from 26 companies and research organizations
taking part.
Participants tested interoperability of basic call setup and of more advanced features,
including
security, location and mobility features, call routing services and call center
applications. Participants
paired up in rounds, and in each round attempted to execute a suite of tests to determine
the level of
interoperability.

The highlight of the event was a complex call scenario, involving four clients and three
servers, each
from a different vendor. In this scenario, a caller initiating a call was immediately
challenged to
authenticate himself to a server. After successfully authenticating, the call was routed
through three
servers, causing three separate phones to ring at once. After one of the ringing phones
was picked up,
the proxies exchanged messages causing the other phones to stop ringing. At that point,
the two
parties were connected and were able to talk to each other and then disconnect.

Any problems that arose during the tests were discussed among the teams to determine
whether they
were caused by troubles with implementation or by an ambiguity in the specification. All
ambiguities
were recorded so they could be clarified in the next version of the SIP specification.

These kinds of interoperability tests are a key component of the IETF standards process.
Requests for
Comments (RFCs), or official standards from the IETF, progress through three phases of
maturity as
the protocols are rolled out and deployed. SIP is currently at the first phase, proposed
standard RFC,
and interoperability of every feature must be demonstrated in order to advance to the next
stage, draft
standard RFC.

Ericsson is the first vendor to sponsor a SIP Bake-Off. Previous SIP Bake-Off events have
been
sponsored by Pulver.com in August and Columbia University in April 1999.


Organizations participating in the Third SIP Bake-Off included: 3Com Corporation
(NASD:COMS),
8x8 (NASD:EGHT), Agilent, BroadSoft, Catapult Communications, Cisco Systems (NASD:CSCO),
Columbia University, Delta, dynamicsoft, E*Club (Carnegie Mellon University),
Ericsson Inc. (NASD:ERICY), Helsinki University of Technology, Hewlett-Packard Labs,
Indigo,
IPCell Technologies, MCI WorldCom (NASD:WCOM), Mediatrix, Mitel Corp (NYSE:MLT).,
Nortel Networks (NYSE:NT), Nuera Communications, OZ.COM, Pingtel Corp.,
Radcom Equipment, Inc., RaveTel, Telogy Networks, and Vovida Networks, Inc.

"When 26 vendors, service providers and research organizations come together to test their
equipment
for interoperability, it really attests to the industry's commitment to meeting the needs
of customers,"
said Mats Nilsson, corporate director of technical standards strategy at Ericsson.
"Ericsson is proud to
be the first vendor sponsor of an event that provides a truly open, unbiased network to
test for
interoperability and that furthers the development of SIP as one of the key components in
the
new telecoms world."

"This third round of SIP testing gives all leading IP telephony vendors a great
opportunity to test more
advanced features. We welcome participating in the SIP Bake-Offs in order to ensure
product
interoperability -- from intelligent phones to media gateways and back-end servers -- and
to be a part
of introducing SIP as an effective protocol for implementing voice over IP," said Andrew
Bezaitis,
director, business development and marketing, Internet Communications Group, 3Com
Corporation.
"As the IP Telephony market continues its rapid maturation, SIP-based solutions stand to
provide
significant value in enabling enhanced services.

"Participation in industry interoperability events such as the SIP bakeoff allows us to
validate the
operation of tools such as call trace and protocol analysis for the carrier networks of
the future.
Agilent network monitoring solutions help operators reduce costs, increase quality of
service and
deliver industry leading services over any network." said Tom White, senior vice president
and
general manger for Agilent Technologies' Communications Solutions Group.

"Having been designed with interoperability in mind, SIP is key to ensuring that enhanced
services run
smoothly across packet networks," said Scott Hoffpauir, vice president of engineering at
BroadSoft.
"BroadSoft is dedicated to providing service delivery and creation platforms that create a
basis for
new value propositions.  The SIP Bakeoff is an ideal forum for ensuring interoperability
among
vendors who are forming the basis of the next generation network."

"The camaraderie between participants was outstanding at the Third SIP Bake-Off. This
interoperability event enabled us to learn the testing needs of our customers first-hand
and put our
multiple testing capabilities to the test by interacting with numerous vendors
simultaneously," said
Richard Mott, Catapult Communications regional manager.

"Interoperability events have proven to be effective, and the SIP Bake-Off was no
exception," said
Neil Urban, development manager at Delta Information Systems.  "This latest SIP Bakeoff
provided
an excellent opportunity to interact with a wide array of multi-vendor products, ensuring
the reliability
and robustness of our protocol analysis equipment."

"This bakeoff demonstrated that multi-vendor interoperability for real-world call
scenarios is now a
reality," said Jonathan Rosenberg, chief scientist at dynamicsoft and co-author of the SIP
specification.
"This further validates that SIP is ready for deployment."

"It was a great experience to test our implementation with others from different companies
and see
that, after all....it works!!" said Inmaculada Espigares from Helsinki University of
Technology. "We
had never seen so many people so happy after hearing a telephone RING!"

We see SIP as the key for opening the long-awaited Internet telephony era. Its natural
integration
with web and email services makes it the ideal lever to make good on the promises of
Internet
telephony. Adopting this technology will enable ISPs and operators to offer resolute new
services
to their customers, said Emmanuel Bertrand, CEO of Indigo Software.

"Mitel is fully supportive of all activities directed towards standardization in the IP
telephony market.
Interoperability is of course key to this, and the SIP bakeoffs are proving to be
excellent testing
ground for the technology as the market develops," said Trefor Davis, IP telephony product
line
manager at Mitel.

"This event went a long way to resolving outstanding issues in implementing the IETF RFC
2543
and in establishing interoperability among multiple vendors' SIP implementations. It
hastened the
day when SIP will be a pervasive protocol in voice over IP network deployments," said
Neville O'Reilly, vice president, Business Development, NetSpeak.

"SIP is a great standard to interoperate between existing telephony service and new IP
based
services" says Kjartan Pierre Emilsson, CTO of OZ.COM.  "By using SIP in the iPulseTM
product that we co-develop with Ericsson, we effectively provide a true convergence
platform,
on which third parties can easily add new communication services."

"The tremendous momentum behind SIP is clearly evident from both the attendance and
enthusiasm at this bake-off, " said Jay Batson, CEO of Pingtel. "SIP's inherent
functionality,
scalability and opportunities for endless innovation using an intelligent endpoint are
making SIP
the preferred protocol for both enterprise and service provider VoIP networks."

RADCOM is committed to providing innovative, effective solutions to interoperability and
other convergence problems," said Anthony S. Wiley, president of RADCOM Equipment Inc.
"We are therefore pleased to have had the opportunity to prove our decodes and provide
performance analyses on the SIP-based, Internet telephony devices represented at this
exciting
event."

"Standards-based IP communication is the future of converged networks," said Ben Jenkins,
CEO
of RaveTel.  "By participating in this kind of forum, we are ensuring that our products
will work
seamlessly with those of other vendors."

"Telogy Networks welcomes participation in interoperability events such as this Third SIP
Bake-off,
which we view as a tool for accelerating the rapid deployment of new standards," said Ed
Morgan,
executive director, Research and Development for Telogy Networks, A Texas Instruments
Company.
"Telogy plans to offer SIP as a protocol option for VoIP applications such as gateways, IP
phones,
cable modems, and other new products."

"We gladly participate in industry interoperability testing such as this so companies
using our stacks
don't have to replicate the test effort," said Luan Dang, senior vice president, CTO and
co-founder
of Vovida Networks.  "Vovida continues its support of the SIP, MGCP and H.323 protocols in
our
products and is committed to supporting events such as these that further interoperability
and open
source adoption of VoIP standards."

More information about the Third SIP Bake-Off can be found at http://www.sipbakeoff.org.
More information about SIP can be found at http://www.cs.columbia.edu/~hgs/sip.

For additional information, contact the press relations department of any of the
participating
organizations:


Ericsson is the leading provider in the new telecoms world, with communications solutions
that combine
telecom and datacom technologies with freedom of mobility for the user. With more than
100,000
employees in140 countries, Ericsson simplifies communications for its customers -network
operators,
service providers, enterprises and consumers  the world over.

With over 300 million customer connections worldwide, 3Com Corporation connects more
people
and organizations to information and each other in more innovative, simple and reliable
ways than any
other networking company. 3Com delivers e-Networking solutions through information access
products and network systems to enterprises, small businesses, consumers, carriers and
network
service providers. For further information, visit 3Com's World Wide Web site at
www.3com.com
or the press site at www.3com.com/pressbox.

Agilent Technologies, Inc. is a diversified technology company, resulting from
Hewlett-Packard
Company's plan to strategically re-align itself into two fully independent companies. With
42,000
employees serving customers in more than 120 countries, Agilent Technologies, as a
subsidiary of
HP, is a global leader in designing and manufacturing test, measurement and monitoring
instruments,
systems and solutions, and semiconductor and optical components. The company serves
markets
that include communications,  electronics, life sciences and healthcare. The businesses
comprising
Agilent had net revenues of more than $8.3 billion in fiscal year 1999. Information about
Agilent
Technologies can be found on the Web at http://www.agilent.com.

BroadSoft is the leading provider of service delivery systems and service creation tools
for
next-generation communications networks.  The company's flagship product, BroadWorks,
allows
service providers to offer innovative new communications services such as IP Centrex and
other
enhanced services, on an open, hardware-independent platform.  Founded in 1998, BroadSoft
is
located outside of Washington, DC and is a privately held, venture backed company.
(www.broadsoft.com)

Catapult Communications delivers comprehensive telecom test systems that enable testing of
both
established networks and emerging technologies such as Voice over IP and 3rd Generation
Cellular.
Offering multi-protocol, multi-user capabilities in a single solution, Catapult helps
manufacturers of
Gateways, Gatekeepers, MCUs and SIP terminal equipment ensure interoperability in today's
converging markets.

Delta's Network Systems group, specializing in the development of conferencing and VoIP
multi-protocol  test equipment, has provided audio, video and data protocol analyzers
since 1992.
Delta is committed to providing cost effective protocol analyzers for new standards as
they develop.
We also recognize that no standard product can meet the needs of all users, so we work
with our
customers to provide customized solutions. Delta also manufactures application specific
audio and
video compression products and systems. Visit us at www.delta-info.com/products/vt320.

dynamicsoft Inc. delivers connection management and end-to-end server solutions to service

providers and communications equipment manufacturers, enabling the scalable, interoperable
and
immediate deployment of applications and services for converged voice/data networks. Visit

dynamicsoft at  www.dynamicsoft.com.  dynamicsoft is funded byComVentures (www.comven.com)

and VantagePoint Venture Partners (www.vpvp.com), two world class venture capital firms
investing
in technologies.

Telecommunications Technology Department at Helsinki University is interested in the
technology,
engineering, information and enterprise aspects of the functional areas of communications
services and
switching such as signaling in telecommunications networks, routing in circuit and packet
switched
networks including Internet routing protocols, interworking of networks and services, and
telecommunications product development. Recent research has been concentrated on IP
switching
and Voice over IP. For further information http://keskus.hut.fi/engl.shtml or contact with
Jose
Costa Requena at http://keskus.hut.fi/tutkimus/ipana/pers/jose.shtml.

Indigo Software, headquartered in Brussels, Belgium, is leading the way in
Internet-speaking
telephony solutions. Designing and providing cutting-edge solutions for ISPs and operators
worldwide,
Indigo Software is the European innovator in Java-based software for the worldwide
Internet telephony
market. Supported by major industry players, Indigo software is a young, forward-looking,
venture-backed company.

Mitel (NYSE: MLT; TSE: MLT) is a growing global provider of converging voice and data
systems
and applications, and specialty semiconductors for the communications industry.  The
company has
revenues of more than CDN $1.3 billion and employs approximately 6,000 people worldwide.

A pioneer in Voice over IP (VoIP) communications, NetSpeak Corporation (NASDAQ: NSPK)
is a leading developer and marketer of advanced telephony solutions for IP networks.
NetSpeak
solutions are powered by products that have been strategically designed to meet the
rapidly evolving
business needs of its customers.  Through a protocol-independent software architecture,
NetSpeak
products deliver efficient management of network resources and enable cost-effective
introduction
of new VoIP applications.

OZ.COMTM is a pioneer in the advancement and development of scalable, interactive
real-time
communications products and solutions. The companys mission is to bring
"people above networksTM" and develop technology that integrates the Internet, traditional
wireline
and wireless communications services. With corporate headquarters in Boston and European
offices
in Reykjavik, Iceland, and Stockholm, Sweden, OZ.COM has over 80 employees and can be
found on the World Wide Web at http://www.oz.com/.

Pingtel is fostering a voice services and applications renaissance with the world's first
intelligent
voice-over-IP telephone for service providers and enterprises. As the delivery platform
for
next-generation IP PBX systems and virtual IP PBX services, it not only makes today's
voice
features much easier to use, but enables a whole new collection of valuable, personalized
voice
services and applications. A venture-backed start-up, Pingtel is located near Boston, in
Woburn,
MA, and can also be found at www.pingtel.com.

RADCOM specializes in innovative, packet telephony solutions for providers of integrated
voice,
data & Internet products and services.   Its line of integrated WAN/FastLAN analyzers,
which
supports over 350 voice, data and cellular protocols, provide an ideal solution for
testing VoATM,
VoFR as well as VoIP. RADCOM's test solution suites are used in the development and
manufacturing of network equipment; the installation of networks; and the ongoing
maintenance of
operational networks to facilitate real-time identification, diagnosis, isolation and
resolution of
network problems. RADCOM's sales network includes over 50 distributors in 35 countries
worldwide
and over 14 manufacturer's representatives across North America. (www.radcom-inc.com)

RaveTel is one of the first providers of presence-aware communications applications for
converged
networks.  The company is a newly-formed spin-off from the E*Club project at
Carnegie-Mellon
University in Pittsburgh, PA. For more information, visit RaveTel at
http://sip.ini.cmu.edu.

Telogy Networks, a Texas Instruments Company, is the leading provider of embedded
communications
software to global equipment manufacturers. Telogy's Golden GatewayR software enables its
customers
to develop connected products that send real-time voice, fax and data over packet networks
(such as
Internet/Intranet, Frame Relay, and ATM). As one of the few embedded software companies
with both
microprocessor and DSP expertise, Telogy Networks offers its customers truly comprehensive
product
solutions. Telogy's products are in use by virtually every communications equipment
manufacturer,
including Cisco Systems, 3COM, Nortel Networks, Motorola and many others throughout the
world.
Company news and product information are available at http://www.telogy.com.

Vovida Networks, a founding member of the International Softswitch Consortium, is a
Linux-based
communications infrastructure company and the global pioneer of open source telephony.
Vovida is a
global provider of communications software products that scale from silicon to systems and
enable
advanced telephony features, applications and services on packet-switched networks.  In
addition,
Linux-based, open source implementations of MGCP, RTP, H.323 Annex F and SIP are freely
available on our web site: www.vovida.com.

     ###

For more information, please contact:
Barbara Boyle
Marketing Communications Manager
972-583-5481







From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 02:24:48 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id CAA26924
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 02:24:47 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 6AA7D52DB; Mon, 20 Dec 1999 01:59:44 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 9E53252DE; Mon, 20 Dec 1999 01:59:02 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A0A9C52D5
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 01:15:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 20 01:14:34 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Mon Dec 20 01:12:57 EST 1999
Received: by dnspri.npac.com; id AA125510469; Mon, 20 Dec 1999 00:14:29 -0600
Received: from unknown(208.143.39.196) by dnspri.npac.com via smap (3.2)
	id xma012546; Mon, 20 Dec 99 00:14:01 -0600
From: "Mark D. Foster" <mark.foster@neustar.com>
To: "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>,
        "'Michael A. Ramalho'" <mramalho@cisco.com>
Cc: "'Henning Schulzrinne'" <schulzrinne@cs.columbia.edu>,
        "'Dean Willis'" <dean.willis@wcom.com>,
        "'John Mainwaring'" <crm312a@nortelnetworks.com>,
        "'James Yu'" <james.yu@neustar.com>,
        <sip@lists.research.bell-labs.com>, <enum@ietf.org>
Subject: RE: [Enum] Re: URL Generalization for Portability (was TRIP)
Date: Mon, 20 Dec 1999 01:11:49 -0500
Message-Id: <002001bf4ab1$7d28dcc0$c4278fd0@loudoun.com>
Mime-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-Msmail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-Mimeole: Produced By Microsoft MimeOLE V5.00.2314.1300
In-Reply-To: <385AEC8A.AD332C12@dynamicsoft.com>
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Jonathan Rosenberg wrote:
> "Michael A. Ramalho" wrote:
> >
> > Virtually all of these telephony-centric LNP-type issues revolve
> > about databases which get updated on the order of once a day.
> >

This may be true in some countries today, but not in those with IN-based
LNP.  In the US and Canada, updates to the LNP database are broadcast in
real-time to service provider systems, with contractually mandated broadcast
and transaction response times (e.g. 3 seconds max) for example.  Part of
the reason for this type of quick turnaround is that stale LNP data can
cause looping of SS7 messages, and therefore de-stablize carrier's signaling
backbones, to say nothing of customer's not having any inbound telephony
service until database updates are propagated and calls properly routed.
Neither of these factors will change with iptel.  For example, the LNP
database will be needed to route SS7 TCAP messages using telephone
number-based GTTs, regardless of whether the lower layers are MTP or
M3UA+RTSP+IP.

> > If LNP dips cost the service provider money (and external LNP
> > queries do) .... the service provider has a strong economic
> > incentive to cache the resolved numbers for use in subsequent
> > calls. [There is also a performance benefit for using cached data].
> >

Caching is not an effective answer, because unlike domain name lookups, the
lookup frequency of geographic numbers by value is uniformly flat and
uncorrelated, and the TTLs must be set to relatively short intervals to keep
looping probabilities managably low.

Consequently, telcos today either host a copy of the entire database
associated with their service area (by subscribing to the NPAC database
update feeds), or buy query transactions from someone else who does.

> > Shouldn't we provide a mechanism to at least give us a hint
> > that we are using potentially stale information (some mechanism
> > to deal with the soft-state issues from a variety of governmental
> > and/or service provider administered portability data bases).
> >
> > Perhaps a tag that says when the "originally cached dip" was
> > performed to give a hint to a subsequent proxy how stale the
> > information may be. Any subsequent proxy could do what it
> > wished (i.e, do another database dip, if desired).
>
> This merely seems to be passing the buck. If there are issues
> with data
> staleness,
> ought we not solve them at the database (i.e., DNS) level, rather than
> within SIP?
>

I agree with Jonathan here.  Fortunately, there is no staleness problem with
the databases today, nor do we have to introduce one where it doesn't exist.
Avoiding stale data is also consistent with the FCC requirement of not
relying on the donor network for call-related (in this case, database query)
processing.  Service providers must be free to choose who will host the
database their resolvers will consult.

R, Mark
-------------------------------------------------------------
Mark D. Foster                  | EMAIL: mark.foster@neustar.com
CTO                             | NeuStar, Inc.
TEL: +1 202 533 2800/2702       | FAX: +1 202 533 2975
1120 Vermont Ave NW, Suite 550  | Washington, DC 20005





From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 11:49:57 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA07395
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 11:49:57 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 525DD52D6; Mon, 20 Dec 1999 11:47:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id BFEDC52DE; Mon, 20 Dec 1999 11:47:18 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 777A452D6
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 11:47:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 20 11:46:13 EST 1999
Received: from fdd.com ([38.196.86.6]) by dusty; Mon Dec 20 11:44:36 EST 1999
Received: (from rick@localhost)
	by fdd.com (8.9.3/8.9.3) id KAA13787;
	Mon, 20 Dec 1999 10:45:05 -0600
From: rick@fdd.com
Message-Id: <199912201645.KAA13787@fdd.com>
Subject: Re: proxy-based dialing plan problem
To: hgs@cs.columbia.edu (Henning Schulzrinne)
Date: Mon, 20 Dec 1999 10:45:05 -0600 (CST)
Cc: jdrosen@dynamicsoft.com, sip@lists.research.bell-labs.com
In-Reply-To: <385DA33B.13F6A9E0@cs.columbia.edu> from "Henning Schulzrinne" at Dec 19, 1999 10:32:11 PM
X-Mailer: ELM [version 2.5 PL1]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Johnathan & Henning,

Thankyou for your insights.   

Have we agreed on a solution to 
the numbering plan problem?  That is,
how should a UA globalize a phone number when
the user does not enter it that way?  

To recap, my proposal would allow the UA not to know
about the PSTN numbering plan, but choose
to send it as a SIP URI to a default proxy/gateway. 
This makes building the UA 
much easier, and IMHO the protocol more intuitive.  
I contend this system will work
as long as that gateway can redirect to a globalized
PSTN number in 401 unathorized, while still accepting
credentials.  I think this is best performed with
an "also" in the 401 unauthorized, but from looking
back though HTTP, maybe a "Location:" would do.

For example dialing in Chicago though my PSTN gateway
service provider of x.com might produce invites like
  INVITE 2621415@1847.x.com SIP/2.0
When I forward people who use y.com to this number they
might receive 
  BYE sip:president@whitehouse.gov SIP/2.0
  Also: <2621415@1847.x.com>
from me and 401 Unauthorized which might look like
  401 Unauthorized
  Also: <tel:+18472621415>
from the PSTN gateway which they could act accordingly with.

How do we go from here?  I am willing to write
this up as an Internet Draft if you think that
is best.  Maybe with a longer explaination
of how the system works people would implement
it more consistently, or make a more informed
decision not to.

If you are still opposed to this architecture, I 
am willing to build it such that 1847.x.com always redirects
everyone to the globalized PSTN number.  The UA
would receive additional logic which sends numbers beginning
with a "+" to a different gateway, which my solultion
requires anyway.  This requires no
standards changes, but adds an additional transaction
to the normative case.  Hmmm.  

My compliments on building a protocol which is general
enough to handle this unplanned case even without 
changes.

--
Rick







From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 12:59:50 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA09986
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 12:59:47 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4044552DE; Mon, 20 Dec 1999 12:57:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id B034F52E1; Mon, 20 Dec 1999 12:57:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 8449B52DE
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 12:57:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 20 12:56:39 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Mon Dec 20 12:55:02 EST 1999
Received: by dnspri.npac.com; id AA239362597; Mon, 20 Dec 1999 11:56:37 -0600
Received: from chi02.npac.com(208.143.39.132) by dnspri.npac.com via smap (3.2)
	id xma023898; Mon, 20 Dec 99 11:56:21 -0600
Received: by chi02.npac.com with Internet Mail Service (5.5.2448.0)
	id <ZCR3W3X6>; Mon, 20 Dec 1999 11:52:15 -0600
Message-Id: <ED88182BFF78D211A4D800A0C9E9435C3BE97E@dc02.npac.com>
From: James Yu <james.yu@neustar.com>
To: "'rick@fdd.com'" <rick@fdd.com>, hgs@cs.columbia.edu,
        jdrosen@dynamicsoft.com
Cc: sip@lists.research.bell-labs.com
Subject: RE: proxy-based dialing plan problem
Date: Mon, 20 Dec 1999 11:49:52 -0600
Mime-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

I would appreciate if one of you could briefly describe how the user at the
UA makes a call to an E.164 number.  I assume that the user must invoke a
software, provide the called E.164 number, and hit "enter" or click
something to initiate the call.  Is that software generic (can be used to
access any proxy server), or is it tailed for a particular proxy server?
For the latter case, can the proxy-specific software be designed so that the
proxy server understands and can process the information entered/provided by
the user? 

James
> -----Original Message-----
> From: rick@fdd.com [mailto:rick@fdd.com]
> Sent: Monday, December 20, 1999 11:45 AM
> To: hgs@cs.columbia.edu
> Cc: jdrosen@dynamicsoft.com; sip@lists.research.bell-labs.com
> Subject: Re: proxy-based dialing plan problem
> 
> 
> 
> Johnathan & Henning,
> 
> Thankyou for your insights.   
> 
> Have we agreed on a solution to 
> the numbering plan problem?  That is,
> how should a UA globalize a phone number when
> the user does not enter it that way?  
> 
> To recap, my proposal would allow the UA not to know
> about the PSTN numbering plan, but choose
> to send it as a SIP URI to a default proxy/gateway. 
> This makes building the UA 
> much easier, and IMHO the protocol more intuitive.  
> I contend this system will work
> as long as that gateway can redirect to a globalized
> PSTN number in 401 unathorized, while still accepting
> credentials.  I think this is best performed with
> an "also" in the 401 unauthorized, but from looking
> back though HTTP, maybe a "Location:" would do.
> 
> For example dialing in Chicago though my PSTN gateway
> service provider of x.com might produce invites like
>   INVITE 2621415@1847.x.com SIP/2.0
> When I forward people who use y.com to this number they
> might receive 
>   BYE sip:president@whitehouse.gov SIP/2.0
>   Also: <2621415@1847.x.com>
> from me and 401 Unauthorized which might look like
>   401 Unauthorized
>   Also: <tel:+18472621415>
> from the PSTN gateway which they could act accordingly with.
> 
> How do we go from here?  I am willing to write
> this up as an Internet Draft if you think that
> is best.  Maybe with a longer explaination
> of how the system works people would implement
> it more consistently, or make a more informed
> decision not to.
> 
> If you are still opposed to this architecture, I 
> am willing to build it such that 1847.x.com always redirects
> everyone to the globalized PSTN number.  The UA
> would receive additional logic which sends numbers beginning
> with a "+" to a different gateway, which my solultion
> requires anyway.  This requires no
> standards changes, but adds an additional transaction
> to the normative case.  Hmmm.  
> 
> My compliments on building a protocol which is general
> enough to handle this unplanned case even without 
> changes.
> 
> --
> Rick
> 
> 
> 
> 
> 



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 13:21:43 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA10859
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 13:21:42 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3F16A52E1; Mon, 20 Dec 1999 13:19:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A692E52E2; Mon, 20 Dec 1999 13:19:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 26D5552E1
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 13:19:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 20 13:18:00 EST 1999
Received: from tlv.radvision.com ([192.116.213.132]) by dusty; Mon Dec 20 13:16:22 EST 1999
Received: by firewall.tlv.radvision.com id <115202>; Mon, 20 Dec 1999 19:13:22 +0200
Message-Id: <99Dec20.191322ist.115202@firewall.tlv.radvision.com>
From: Itamar Gilad <ItamarG@tlv.radvision.com>
To: "'SIP List'" <sip@lists.research.bell-labs.com>
Subject: status of: draft-ietf-mmusic-sip-cc-01.txt
Date: Mon, 20 Dec 1999 20:14:28 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain; charset="windows-1252"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Can anyone tell me what's happening with this document: 
draft-ietf-mmusic-sip-cc-01.txt - SIP Call Control Services.  

It seems it's about to expire this month.

Thanks
  
    Itamar



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 14:01:56 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA12008
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 14:01:56 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 2316052D5; Mon, 20 Dec 1999 13:59:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 901CE52E3; Mon, 20 Dec 1999 13:59:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id AB66A52D5
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 13:59:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 20 13:58:57 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Mon Dec 20 13:57:19 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhulf13903;
	Mon, 20 Dec 1999 18:58:53 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id NAA03987;
	Mon, 20 Dec 1999 13:58:52 -0500 (EST)
Message-ID: <385E7DD6.940EE85B@dynamicsoft.com>
Date: Mon, 20 Dec 1999 14:04:54 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Itamar Gilad <ItamarG@tlv.radvision.com>
Cc: "'SIP List'" <sip@lists.research.bell-labs.com>
Subject: Re: status of: draft-ietf-mmusic-sip-cc-01.txt
References: <99Dec20.191322ist.115202@firewall.tlv.radvision.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Its a work item of the SIP working group, scheduled to go to RFC in the
June timeframe. There will be another revision hopefully soon...

-Jonathan R.

Itamar Gilad wrote:
> 
> Can anyone tell me what's happening with this document:
> draft-ietf-mmusic-sip-cc-01.txt - SIP Call Control Services.
> 
> It seems it's about to expire this month.
> 
> Thanks
> 
>     Itamar

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 14:09:51 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA12278
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 14:09:50 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4752852E3; Mon, 20 Dec 1999 14:07:25 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A4BEE52E4; Mon, 20 Dec 1999 14:07:24 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 65B0752E3
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 14:07:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 20 14:06:17 EST 1999
Received: from stl-smtpout-01.boeing.com ([12.13.247.21]) by dusty; Mon Dec 20 14:04:40 EST 1999
Received: from stl-av-01.boeing.com ([192.76.190.6])
	by stl-smtpout-01.boeing.com (8.9.2/8.8.5-M2) with ESMTP id NAA11715
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 13:06:15 -0600 (CST)
Received: from stl-hub-01.boeing.com (localhost [127.0.0.1])
	by stl-av-01.boeing.com (8.9.2/8.9.2) with ESMTP id NAA09025
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 13:06:21 -0600 (CST)
Received: from [199.191.48.146] by stl-hub-01.boeing.com for sip@lists.research.bell-labs.com; Mon, 20 Dec 1999 13:06:05 -0600
Received: by engr03.arl.bna.boeing.com (UCX V4.1-12A, OpenVMS V7.1 Alpha);
	Mon, 20 Dec 1999 14:04:48 -0500
Reply-To: <albert.e.manfredi@boeing.com>
From: "Albert Manfredi" <albert.e.manfredi@boeing.com>
To: "Mark D. Foster" <mark.foster@neustar.com>
Cc: <sip@lists.research.bell-labs.com>, <enum@ietf.org>
Subject: RE: [Enum] Re: URL Generalization for Portability (was TRIP)
Date: Mon, 20 Dec 1999 14:05:40 -0500
Message-Id: <NDBBIBKKCLEFDFDGHCNMGEFGCBAA.albert.e.manfredi@boeing.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-Mimeole: Produced By Microsoft MimeOLE V4.72.3155.0
In-Reply-To: <002001bf4ab1$7d28dcc0$c4278fd0@loudoun.com>
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Mark D. Foster wrote:
> > "Michael A. Ramalho" wrote:
> > >
> > > Virtually all of these telephony-centric LNP-type
> issues revolve
> > > about databases which get updated on the order of once a day.
>
> This may be true in some countries today, but not in
> those with IN-based
> LNP.  In the US and Canada, updates to the LNP database
> are broadcast in
> real-time to service provider systems, with contractually
> mandated broadcast
> and transaction response times (e.g. 3 seconds max) for
> example.  Part of
> the reason for this type of quick turnaround is that
> stale LNP data can
> cause looping of SS7 messages, and therefore de-stablize
> carrier's signaling
> backbones, to say nothing of customer's not having any
> inbound telephony
> service until database updates are propagated and calls
> properly routed.
> Neither of these factors will change with iptel.  For
> example, the LNP
> database will be needed to route SS7 TCAP messages using telephone
> number-based GTTs, regardless of whether the lower layers
> are MTP or
> M3UA+RTSP+IP.

Maybe then this LNP database is comparable to IP routing tables
distributed throughout routers. At least, functionally, since it is
required for routing of telephone calls. (By the way, I didn't know
that the LNP database entries are broadcast. Interesting. This
compares with the propagation of info in schemes like OSPF or RIP,
which is asynchronous, and only between neighbors.)

> Caching is not an effective answer, because unlike domain
> name lookups, the
> lookup frequency of geographic numbers by value is
> uniformly flat and
> uncorrelated, and the TTLs must be set to relatively
> short intervals to keep
> looping probabilities managably low.

Just as long-term caching of routing tables is not effective in the
Internet. I don't think this is comparable to the DNS, though,
because the DNS does not have information that is used in routing.
The DNS does not need to respond, for example, to any temporary
breaks in the infrastructure. The DNS is more like a telephone
_directory_.

> Fortunately, there is no
> staleness problem with
> the databases today, nor do we have to introduce one
> where it doesn't exist.
> Avoiding stale data is also consistent with the FCC
> requirement of not
> relying on the donor network for call-related (in this
> case, database query)
> processing.  Service providers must be free to choose who
> will host the
> database their resolvers will consult.

The staleness issue is not an issue in what I thought we were
discussing, unless I missed something.

The DNS used in the role of number portability database or in the
role of IP-to-E.164 number translation database is not used in a
time-critical role at all, as far as I can see. For real-time
routing roles, such as tracking of _mobile_ stations or the
maintaining of routing tables, I think everyone agrees that the DNS
is not the correct solution.

Bert
albert.e.manfredi@boeing.com




From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 19:00:41 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id TAA19268
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 19:00:40 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id CC9E052AB; Mon, 20 Dec 1999 18:57:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 43E3C52BB; Mon, 20 Dec 1999 18:57:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 21FC952AB
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 18:57:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 20 18:55:04 EST 1999
Received: from l3mail02.level3.com ([209.119.32.20]) by dusty; Mon Dec 20 18:53:28 EST 1999
Received: by level3.com with Internet Mail Service (5.5.2448.0)
	id <ZAY7CQ3M>; Mon, 20 Dec 1999 16:53:29 -0700
Message-ID: <6DD3824BDF75D211930E0008C71EC92003CACF46@l3lsvlmail02.l3.com>
From: Jon.Peterson@Level3.com
To: sip@lists.research.bell-labs.com
Subject: SIP 3rd-party call creation?
Date: Mon, 20 Dec 1999 16:46:48 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Has any consideration been given to uninvolved third parties originating
sessions between two SIP endpoints?

If I might provide a clarifying example without endorsing the described
implementation - given two users A and B, each of whom has a SIP phone, and
an automated entity C (the third party): C somehow decides that a session
should be initiated between A and B, and thus sends an INVITE to A which,
due to special properties and/or headers, does not result in a session
between A and C, but rather prompts A to send a new INVITE to B after some
sort of approval on A's part. Subsequently C might or might not maintain a
relationship with A throughout the session establishment, and so forth.

I haven't been able to find any existing work that addresses this sort of
situation; has something been written on this that I've missed? The SIP Call
Control Services document covers some nearby territory (the Requested-By and
Also headers could be relevant), but I don't think, from my reading of the
document, that it endorses third-party call setup unless the third party is
a participant in the session.

If this hasn't been explored to date, what is the prevailing opinion on
third-party session initiation? Is it something to which SIP can and should
be applied? Are the accounting and security issues too damaging?

Jon Peterson
Level(3) Communications



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 20 19:23:40 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id TAA19514
	for <sip-archive@odin.ietf.org>; Mon, 20 Dec 1999 19:23:40 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id DDBF652BB; Mon, 20 Dec 1999 19:21:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 5C51652DB; Mon, 20 Dec 1999 19:21:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id ACB1B52BB
	for <sip@lists.research.bell-labs.com>; Mon, 20 Dec 1999 19:21:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 20 19:19:59 EST 1999
Received: from bastion4.mail.sprint.com ([208.4.28.132]) by dusty; Mon Dec 20 19:18:23 EST 1999
Received: from sii01.mail.sprint.com by bastion4.mail.sprint.com with ESMTP for sip@lists.research.bell-labs.com; Mon, 20 Dec 1999 18:19:47 -0600
Received: from [144.223.128.84] by sii01.mail.sprint.com with ESMTP; Mon, 20 Dec 1999 18:19:42 -0600
Received: from saopmp01.corp.sprint.com (saopmp01m [10.162.0.24])
	by kcopmh01.corp.sprint.com (8.8.6 (PHNE_17135)/8.8.6) with ESMTP id SAA02734;
	Mon, 20 Dec 1999 18:19:41 -0600 (CST)
From: michael dwyer <michael.dwyer@mail.sprint.com>
Received: from localhost (root@localhost)
	by saopmp01.corp.sprint.com (8.8.6 (PHNE_17190)/8.8.6) with ESMTP id QAA07959;
	Mon, 20 Dec 1999 16:19:40 -0800 (PST)
X-OpenMail-Hops: 1
Date: Mon, 20 Dec 1999 16:19:40 -0800
Message-Id: <H0000f4302e799d5.0945735578.saopmp01@MHS>
Subject: RE: SIP 3rd-party call creation?
To: Jon.Peterson@Level3.com, sip@lists.research.bell-labs.com
MIME-Version: 1.0
Content-Type: multipart/mixed;
  boundary="openmail-part-0faf2dad-00000001"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

--openmail-part-0faf2dad-00000001
Content-Type: text/plain; charset=ISO-8859-1
Content-Disposition: inline; filename="BDY.RTF"
Content-Transfer-Encoding: 7bit

Jon
this is a valid issue and I am sure that people are looking
at it. Particularly from a service node point of view, where the
service node may initiate the session between different participants
but may not take part in the session directly.

Security I feel is definitely an issue here.

Mike


-----Original Message-----
From: Jon.Peterson [mailto:Jon.Peterson@level3.com]
Sent: Monday, December 20, 1999 3:47 PM
To: sip
Cc: Jon.Peterson
Subject: SIP 3rd-party call creation?


Has any consideration been given to uninvolved third parties originating
sessions between two SIP endpoints?

If I might provide a clarifying example without endorsing the described
implementation - given two users A and B, each of whom has a SIP phone,
and
an automated entity C (the third party): C somehow decides that a
session
should be initiated between A and B, and thus sends an INVITE to A
which,
due to special properties and/or headers, does not result in a session
between A and C, but rather prompts A to send a new INVITE to B after
some
sort of approval on A's part. Subsequently C might or might not maintain
a
relationship with A throughout the session establishment, and so forth.

I haven't been able to find any existing work that addresses this sort
of
situation; has something been written on this that I've missed? The SIP
Call
Control Services document covers some nearby territory (the Requested-By
and
Also headers could be relevant), but I don't think, from my reading of
the
document, that it endorses third-party call setup unless the third party
is
a participant in the session.

If this hasn't been explored to date, what is the prevailing opinion on
third-party session initiation? Is it something to which SIP can and
should
be applied? Are the accounting and security issues too damaging?

Jon Peterson
Level(3) Communications



--openmail-part-0faf2dad-00000001--




From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 21 00:13:39 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA24530
	for <sip-archive@odin.ietf.org>; Tue, 21 Dec 1999 00:13:39 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id BBEE452B6; Tue, 21 Dec 1999 00:09:49 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6CDA652DB; Tue, 21 Dec 1999 00:09:48 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 48E6F52DE
	for <sip@lists.research.bell-labs.com>; Tue, 21 Dec 1999 00:09:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 21 00:07:34 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec 21 00:05:57 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhumu10313;
	Tue, 21 Dec 1999 05:07:29 GMT
Received: from dynamicsoft.com (1Cust9.tnt3.freehold.nj.da.uu.net [63.25.172.9])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id AAA04554;
	Tue, 21 Dec 1999 00:07:27 -0500 (EST)
Message-ID: <385F0C7C.B1B06C1@dynamicsoft.com>
Date: Tue, 21 Dec 1999 00:13:32 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Jon.Peterson@Level3.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: SIP 3rd-party call creation?
References: <6DD3824BDF75D211930E0008C71EC92003CACF46@l3lsvlmail02.l3.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

This has come up a few times.

Although the current instantiation of the call control spec doesn't
cover this, it was something that we had considered supporting. The way
one could envision doing it is that C sends an OPTIONS to A, with an
Also header in the OPTIONS indicating B. This causes A, presuming its
acceptable, to send an INVITE to B. Since OPTIONS is effectively a no-op
as far as call state is concerned, the result is that a call is
established between A and B but not between A and C. As with the Also
mechanism in general, the UA should generally authenticate the sender of
the request and ask the user whether they'd like to proceed. 

This isn't in there now because the focus isn't really on third party
control as much. Besides, there is a long slippery slope for third party
control, and the Also mechanism gets you so far, but its not really an
ideal control protocol.


There have been proposals for completely separate, megaco-ish control
protocols where the signaling function still lives in the controlled
device. For example:

http://search.ietf.org/internet-drafts/draft-kanai-spcp-00.txt

I have heard there may be another protocol proposal on a similar topic
coming shortly.

I'm guessing you are interested in some kind of operator services
features? I'd very much be interested to hear if you had some other
application in mind.

-Jonathan R.

Jon.Peterson@Level3.com wrote:
> 
> Has any consideration been given to uninvolved third parties originating
> sessions between two SIP endpoints?
> 
> If I might provide a clarifying example without endorsing the described
> implementation - given two users A and B, each of whom has a SIP phone, and
> an automated entity C (the third party): C somehow decides that a session
> should be initiated between A and B, and thus sends an INVITE to A which,
> due to special properties and/or headers, does not result in a session
> between A and C, but rather prompts A to send a new INVITE to B after some
> sort of approval on A's part. Subsequently C might or might not maintain a
> relationship with A throughout the session establishment, and so forth.
> 
> I haven't been able to find any existing work that addresses this sort of
> situation; has something been written on this that I've missed? The SIP Call
> Control Services document covers some nearby territory (the Requested-By and
> Also headers could be relevant), but I don't think, from my reading of the
> document, that it endorses third-party call setup unless the third party is
> a participant in the session.
> 
> If this hasn't been explored to date, what is the prevailing opinion on
> third-party session initiation? Is it something to which SIP can and should
> be applied? Are the accounting and security issues too damaging?
> 
> Jon Peterson
> Level(3) Communications

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 21 00:35:03 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA24829
	for <sip-archive@odin.ietf.org>; Tue, 21 Dec 1999 00:35:02 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 76A7752D6; Tue, 21 Dec 1999 00:30:08 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6D5B052DB; Tue, 21 Dec 1999 00:30:06 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 72A4E52D6
	for <sip@lists.research.bell-labs.com>; Tue, 21 Dec 1999 00:29:08 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 21 00:28:14 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec 21 00:26:38 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhumv23857;
	Tue, 21 Dec 1999 05:28:13 GMT
Received: from dynamicsoft.com (1Cust9.tnt3.freehold.nj.da.uu.net [63.25.172.9])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id AAA04563;
	Tue, 21 Dec 1999 00:28:10 -0500 (EST)
Message-ID: <385F1158.65E0F0E7@dynamicsoft.com>
Date: Tue, 21 Dec 1999 00:34:16 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: rick@fdd.com
Cc: Henning Schulzrinne <hgs@cs.columbia.edu>,
        sip@lists.research.bell-labs.com
Subject: Re: proxy-based dialing plan problem
References: <199912201645.KAA13787@fdd.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



rick@fdd.com wrote:
> 
> To recap, my proposal would allow the UA not to know
> about the PSTN numbering plan, but choose
> to send it as a SIP URI to a default proxy/gateway.
> This makes building the UA
> much easier, and IMHO the protocol more intuitive.
> I contend this system will work
> as long as that gateway can redirect to a globalized
> PSTN number in 401 unathorized, while still accepting
> credentials.  I think this is best performed with
> an "also" in the 401 unauthorized, but from looking
> back though HTTP, maybe a "Location:" would do.

I still have problems with this. They are:

1. the domain name is not the right place to be putting phone contexts
and dialing prefixes
2. you rely on deploying lots of servers at these addresses
corresponding to dial plans; 1847 is just one example. You'll need one
for each area code for each domain.
3. it involves an extra jump to this 1847.x.com server with which the
transferred party has no relationship. This extra jump can be avoided by
Also:ing to the tel URL right away.

Your UA apparently is configured to append 1847.x.com in the domain part
of every number dialed. All I'm saying is, instead of appending it to
the right, append it to the left of the dialed number, and make that a
tel URL. This solves all these problems, and is absolutely no more
complex than what you are doing now.

I'm still looking for an answer on why its so bad to have the UA
globalize, as is done today with hosts filling in their domains when a
user types 'telnet somehost'. How many entries in the dial plan are we
talking about? How much compute complexity? Having these managed in a
central place, but distributed to UA's, still allows the provider to
control them, but ensures only globally significant numbers are passed
around. I'll note that this model of downloading dial plans into the UA
is more or less what megaco does also. Much headaches in the PSTN occur
since non-globally defined numbers are passed around all over the place.
IP has avoided this headache so far. I'd like to keep with this model.

> How do we go from here?  I am willing to write
> this up as an Internet Draft if you think that
> is best.  Maybe with a longer explaination
> of how the system works people would implement
> it more consistently, or make a more informed
> decision not to.

You are always welcome to write up an I-D on any subject you like.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 21 01:39:50 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id BAA27470
	for <sip-archive@odin.ietf.org>; Tue, 21 Dec 1999 01:39:50 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 854E952D5; Tue, 21 Dec 1999 01:37:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E4B8352DF; Tue, 21 Dec 1999 01:37:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 83F6452D5
	for <sip@lists.research.bell-labs.com>; Tue, 21 Dec 1999 01:37:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 21 01:36:57 EST 1999
Received: from beta.mcit.com ([199.249.19.244]) by dusty; Tue Dec 21 01:35:20 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #38417)
 id <0FN200701VPJ81@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Tue, 21 Dec 1999 06:36:55 +0000 (GMT)
Received: from omzrelay.mcit.com ([166.37.204.49])
 by firewall.mcit.com (PMDF V5.2-32 #38417)
 with ESMTP id <0FN2006GFVPI45@firewall.mcit.com>; Tue,
 21 Dec 1999 06:36:55 +0000 (GMT)
Received: from omta4.mcit.com (omta4.mcit.com [166.37.204.6])
 by omzrelay.mcit.com (8.8.7/) with ESMTP	id GAA01510; Tue,
 21 Dec 1999 06:36:53 +0000 (GMT)
Received: from dwillispc ([166.44.162.174])
 by omta4.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991221063837.IKYJ24369@dwillispc>; Tue,
 21 Dec 1999 06:38:37 +0000
Date: Tue, 21 Dec 1999 00:36:38 -0600
From: Dean Willis <dean.willis@wcom.com>
Subject: RE: proxy-based dialing plan problem
In-reply-to: <385F1158.65E0F0E7@dynamicsoft.com>
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>, rick@fdd.com
Cc: sip@lists.research.bell-labs.com
Message-id: <000301bf4b7d$bc2faee0$d19623a6@directlink.net>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Jonathan asked:
> I'm still looking for an answer on why its so bad to have the UA
> globalize, as is done today with hosts filling in their domains when a
> user types 'telnet somehost'. How many entries in the dial plan are we
> talking about? How much compute complexity? Having these managed in a
> central place, but distributed to UA's, still allows the provider to
> control them, but ensures only globally significant numbers are passed
> around. I'll note that this model of downloading dial plans into the UA
> is more or less what megaco does also. Much headaches in the PSTN occur
> since non-globally defined numbers are passed around all over the place.
> IP has avoided this headache so far. I'd like to keep with this model.

Well, I have about 35,000 different private dialing plans, some of which
have upwards of 100,000 numbers, MOST OF WHICH DO NOT MAP TO GLOBALLY
SIGNIFICANT NUMBERS. Many are variable length, or have synonyms of different
lengths such as four-digit dialing to a number that could also be reached by
8+7digits. Some of the dialing plans actually vary by time-of-day or
who-is-placing-the-call or in other bizarre and nondisclosable ways.

I'd personally much rather have a client that knows it knows nothing about
the dialing plans, and have it just forward the dialed digits to a proxy.

We expect to be able to configure a phone with a "default proxy" the same
way one configures a PC mail client with a "default SMTP host". The behavior
of the phone should be to send all the dialed digits to the proxy, either in
	sip:digits@proxy;user=phone
		or
	tel:digits
formats, or to send dialed names in
	sip:name@host
format

If somebody wants to build a phone that can use multiple "default" proxies
under user control, that's fine. Note that Qualcomm and Microsoft have built
mail clients that allow multiple accounts to be configured, with the result
that mail sent from one account may go to a different SMTP smarterhost than
mail originating from a different account within the same client. One might
call this a "multiuser" or "multiprofile" phone. One might even build a
phone to download its "account" information, or get it from NIS tables, or
whatever. But it had better be configurable to send INVITES to my proxy, or
it's not making calls on my network.

How about we define a limited set of contexts,
{"unknown","public","private","global","local"} such that a phone that knows
it doesn't know anything about the dialing plan can indicate a
"phone-context=unknown" and a phone that "knows" it has a global number can
indicate that as well? We can combine this with a translation identfier
("trans="token), and a "numbering plan" identifier ("plan="token), and I
believe we have all the semantics necessary to describe a dialed number and
any information knwon about it rather completely as it is processed through
every transformation I can think of.

So, a dumb phone receiving digits 1234567 could send:
INVITE <tel:1234567;phone-context=unknown>
To: <tel:1234567;phone-context=unknown>
 or the equivalent
INVITE <sip:1234567@service;phone-context=unknown>
To: <sip:1234567@service;phone-context=unknown>

which "proxy" might rewrite as
INVITE <tel:+19871234567;phone-context=global;trans=lnp>
or
INVITE <tel:1234567;phone-context=private;plan=mci-23;trans=isn45>
or
INVITE <sip:dean@hishouse.net>


Homework:
---------------------

Question: If a phone-context is not specfied, what value do we assume it
has?

Proposals:

1) "unknown".

2) "global" or "unknown" based on the presence/absence of a leading "+".


Homework:
---------------------

Question: phone-context can clearly apply only to tel: URLs and SIP URLs
with user=phone. SIP URLS with a "name" are given context by the hostport
field. Can we simplify this further?

Proposals:

1) Deprecate the SIP: url with user=phone. It is confusing to have context
information in the phone-context and in the hostport component of the
grammar. Use a tel:URL for all destinations "expected to be" phones, ie.
consisting of dialed digits with no "@".

or

2) Deprecate the phone-context syntax and the tel:URL. Always indicate
dialed numbers in sip: URLs, with the context expressed on the RHS of the @,
as in "sip:digits@context", where "context" is a token (or compound string)
understood by UAS and proxy. The "context" expressed here is not expected to
be a name present in DNS or a valid IP address (it might be one by accident,
but we would not expect it to be and it would not be treated as a name or
address). I believe this is what Rick is proposing.

or

3) Deprecate tel: amd phone-context as in #2, but concatenate the context
with the dialed dgits on the LHS of the @ and present the hostport of the
default proxy or service on the rhs, as in
"sip:1234567.context@proxy.phone.com". I believe Jonathan suggested this.

or

4) No, this can not be simplified further along these lines. The "tel:" URL
expresses an direct phone number, whereas the "sip:" url with "user=phone"
expresses a phone number which is indirected to a particular service or
provider, and both are believed to be necessary.




From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 21 12:05:59 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA07533
	for <sip-archive@odin.ietf.org>; Tue, 21 Dec 1999 12:05:59 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 2399F52BB; Tue, 21 Dec 1999 12:03:33 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 89DF352B6; Tue, 21 Dec 1999 12:03:32 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 2EDC952BB
	for <sip@lists.research.bell-labs.com>; Tue, 21 Dec 1999 12:03:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 21 12:01:52 EST 1999
Received: from mail.pingtel.com ([216.91.1.131]) by dusty; Tue Dec 21 12:00:12 EST 1999
Received: from pingtel.com ([10.1.1.189])
	by mail.pingtel.com (8.9.3/8.9.3) with ESMTP id MAA06704;
	Tue, 21 Dec 1999 12:11:18 -0500
Message-ID: <385FB2D1.2FDC8289@pingtel.com>
Date: Tue, 21 Dec 1999 12:03:13 -0500
From: "Daniel G. Petrie" <dpetrie@pingtel.com>
Organization: Pingtel Corp. http://www.pingtel.com
X-Mailer: Mozilla 4.61 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Dean Willis <dean.willis@wcom.com>
Cc: Jonathan Rosenberg <jdrosen@dynamicsoft.com>, rick@fdd.com,
        sip@lists.research.bell-labs.com
Subject: Re: proxy-based dialing plan problem
References: <000301bf4b7d$bc2faee0$d19623a6@directlink.net>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Comments below:

Dean Willis wrote:

> Jonathan asked:
> > I'm still looking for an answer on why its so bad to have the UA
> > globalize, as is done today with hosts filling in their domains when a
> > user types 'telnet somehost'. How many entries in the dial plan are we
> > talking about? How much compute complexity? Having these managed in a
> > central place, but distributed to UA's, still allows the provider to
> > control them, but ensures only globally significant numbers are passed
> > around. I'll note that this model of downloading dial plans into the UA
> > is more or less what megaco does also. Much headaches in the PSTN occur
> > since non-globally defined numbers are passed around all over the place.
> > IP has avoided this headache so far. I'd like to keep with this model.
>
> Well, I have about 35,000 different private dialing plans, some of which
> have upwards of 100,000 numbers, MOST OF WHICH DO NOT MAP TO GLOBALLY
> SIGNIFICANT NUMBERS. Many are variable length, or have synonyms of different
> lengths such as four-digit dialing to a number that could also be reached by
> 8+7digits. Some of the dialing plans actually vary by time-of-day or
> who-is-placing-the-call or in other bizarre and nondisclosable ways.
>

I would argue that for these cases one should use a SIP url as opposed to the
tel url.
Using the sip url, these then become globally significant as they are in the
context of
the SIP server after the @.  This may not indicate the final destination, but it
provides
context in which it it is unique and resolvable.

>
> I'd personally much rather have a client that knows it knows nothing about
> the dialing plans, and have it just forward the dialed digits to a proxy.
>
> We expect to be able to configure a phone with a "default proxy" the same
> way one configures a PC mail client with a "default SMTP host". The behavior
> of the phone should be to send all the dialed digits to the proxy, either in
>         sip:digits@proxy;user=phone
>                 or
>         tel:digits
> formats, or to send dialed names in
>         sip:name@host
> format
>
> If somebody wants to build a phone that can use multiple "default" proxies
> under user control, that's fine. Note that Qualcomm and Microsoft have built
> mail clients that allow multiple accounts to be configured, with the result
> that mail sent from one account may go to a different SMTP smarterhost than
> mail originating from a different account within the same client. One might
> call this a "multiuser" or "multiprofile" phone. One might even build a
> phone to download its "account" information, or get it from NIS tables, or
> whatever. But it had better be configurable to send INVITES to my proxy, or
> it's not making calls on my network.
>

I think that there is a need for two levels of "dial plan" configuration.  I
would vote
that this information is provided to the phone via Registration response as
opposed
to proprietary configuration in the phone.

1) The default simple dialing plan or digit collection method using a timer,
fixed length
and/or "send" button to determine end of digits.  The phone constructs a sip url
by
appending a @<sip-server>... onto the digits.  The tel url should not be used as

the digits are not globalized.  When the phone does a tranfer (blind or other
wise)
it constructs a sip rul for the Also in the same way.  The default SIP server
(i.e. "@<sip-server>") must be willing to resolve the Also url for the
transfered
party, minimally redirecting.

2) A more advanced dialing plan is also needed, with pattern matching and
assocated
SIP server through which to route the INVITE.  The idea here is to
internationalize
the collected digit string through pattern matching and provide a recommended
SIP server to
send the INVITE.  For example digits matching pattern: "555...." should be
inserted
into the url: "tel:+1617[yourDigitsHere]" and send to the server
myCarrier.com:5060.
So dialing "5551234" constructs: "tel:+16175551234" and the INVITE is sent to
myCarrier.com:5060.  There is no reason to restrict this approach to tel url's,
however
it is probably the more likely scenario.  The patterns should also support the
ability
to indicate how the end of digits is determined (i.e.  timer, fixed length
and/or "send" button).

In both of these methods you end up with a url which is globally unique.  The
tel url
has the issue of needing context as Adam and Dean pointed out.  This can be
handled
by the url string which the matched digit pattern is inserted into. (i.e.
"tel:1214[yourDigitsInsertedHere];phone-context=global;numbering-plan=isdn"

>
> How about we define a limited set of contexts,
> {"unknown","public","private","global","local"} such that a phone that knows
> it doesn't know anything about the dialing plan can indicate a
> "phone-context=unknown" and a phone that "knows" it has a global number can
> indicate that as well? We can combine this with a translation identfier
> ("trans="token), and a "numbering plan" identifier ("plan="token), and I
> believe we have all the semantics necessary to describe a dialed number and
> any information knwon about it rather completely as it is processed through
> every transformation I can think of.
>
> So, a dumb phone receiving digits 1234567 could send:
> INVITE <tel:1234567;phone-context=unknown>
> To: <tel:1234567;phone-context=unknown>
>  or the equivalent
> INVITE <sip:1234567@service;phone-context=unknown>
> To: <sip:1234567@service;phone-context=unknown>
>
> which "proxy" might rewrite as
> INVITE <tel:+19871234567;phone-context=global;trans=lnp>
> or
> INVITE <tel:1234567;phone-context=private;plan=mci-23;trans=isn45>
> or
> INVITE <sip:dean@hishouse.net>
>
> Homework:
> ---------------------
>
> Question: If a phone-context is not specfied, what value do we assume it
> has?
>
> Proposals:
>
> 1) "unknown".
>
> 2) "global" or "unknown" based on the presence/absence of a leading "+".
>
> Homework:
> ---------------------
>
> Question: phone-context can clearly apply only to tel: URLs and SIP URLs
> with user=phone. SIP URLS with a "name" are given context by the hostport
> field. Can we simplify this further?
>
> Proposals:
>
> 1) Deprecate the SIP: url with user=phone. It is confusing to have context
> information in the phone-context and in the hostport component of the
> grammar. Use a tel:URL for all destinations "expected to be" phones, ie.
> consisting of dialed digits with no "@".
>
> or
>
> 2) Deprecate the phone-context syntax and the tel:URL. Always indicate
> dialed numbers in sip: URLs, with the context expressed on the RHS of the @,
> as in "sip:digits@context", where "context" is a token (or compound string)
> understood by UAS and proxy. The "context" expressed here is not expected to
> be a name present in DNS or a valid IP address (it might be one by accident,
> but we would not expect it to be and it would not be treated as a name or
> address). I believe this is what Rick is proposing.
>
> or
>
> 3) Deprecate tel: amd phone-context as in #2, but concatenate the context
> with the dialed dgits on the LHS of the @ and present the hostport of the
> default proxy or service on the rhs, as in
> "sip:1234567.context@proxy.phone.com". I believe Jonathan suggested this.
>
> or
>
> 4) No, this can not be simplified further along these lines. The "tel:" URL
> expresses an direct phone number, whereas the "sip:" url with "user=phone"
> expresses a phone number which is indirected to a particular service or
> provider, and both are believed to be necessary.




From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 21 19:46:26 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id TAA16094
	for <sip-archive@odin.ietf.org>; Tue, 21 Dec 1999 19:46:25 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7DA8552AB; Tue, 21 Dec 1999 19:41:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E566552BB; Tue, 21 Dec 1999 19:41:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 03B5852AB
	for <sip@lists.research.bell-labs.com>; Tue, 21 Dec 1999 19:41:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 21 19:40:08 EST 1999
Received: from l3mail02.level3.com ([209.119.32.20]) by dusty; Tue Dec 21 19:38:28 EST 1999
Received: by level3.com with Internet Mail Service (5.5.2448.0)
	id <ZAY71GZ6>; Tue, 21 Dec 1999 17:38:31 -0700
Message-ID: <6DD3824BDF75D211930E0008C71EC92003CACF4B@l3lsvlmail02.l3.com>
From: Jon.Peterson@Level3.com
To: sip@lists.research.bell-labs.com
Subject: RE: SIP 3rd-party call creation
Date: Tue, 21 Dec 1999 17:31:49 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk


jdrosen@dynamicsoft.com noted:
> This has come up a few times.
> 
> Although the current instantiation of the call control spec doesn't
> cover this, it was something that we had considered supporting. The way
> one could envision doing it is that C sends an OPTIONS to A, with an
> Also header in the OPTIONS indicating B. This causes A, presuming its
> acceptable, to send an INVITE to B. Since OPTIONS is effectively a no-op
> as far as call state is concerned, the result is that a call is
> established between A and B but not between A and C. As with the Also
> mechanism in general, the UA should generally authenticate the sender of
> the request and ask the user whether they'd like to proceed. 
> 
> This isn't in there now because the focus isn't really on third party
> control as much. Besides, there is a long slippery slope for third party
> control, and the Also mechanism gets you so far, but its not really an
> ideal control protocol.
> 

I know what you mean about a slippery slope. I suppose I am thinking about
third-party session initiation (3PSI?) as a special case that can be
separated from 3PCC, insofar as 3PCC entails device management, event
supervision and so forth. But certainly even the technique alluded to above
(using the Also header) begets questions about C's continuing relationship
with A and B - if C is essentially cc'd on methods passing between B and A,
and if C were then to introduce variations into the signaling, we're back at
3PCC. Next thing you know C will be collecting DTMF digits sent via INFOs
between B and A... ugh... 

But perhaps 3PSI can be segregated from 3PCC - session initiation -is-
distinct from call control, third party or first party. I could equally well
imagine C in the above scenario -not- being involved in subsequent
signaling. I'm not sure how snugly 3PSI could be integrated into the
existing SIP paradigm, but I do think the issue is worth exploring to the
extent that it should be deemed engineerable, without damaging SIP, or no. 

> 
> There have been proposals for completely separate, megaco-ish control
> protocols where the signaling function still lives in the controlled
> device. For example:
> 
> http://search.ietf.org/internet-drafts/draft-kanai-spcp-00.txt
> 
> I have heard there may be another protocol proposal on a similar topic
> coming shortly.

This goes back to the question of focus. Is it the consensus of the group
that some other protocol or system should be responsible for 3PSI, or should
it be done with SIP?

IMHO, the core issue is whether or not 3PSI would violate the end-to-end
model. Consider by way of analogy that the PSTN has no end-to-end model to
violate - operators control switches that control handsets, and they can
arbitrarily construct calls between two users like connecting the dots on a
switchboard. With SIP, however, you can't just inject a call into the
'system', constructing two call legs which will join somewhere in the middle
- there isn't really any such middle, or 'system', between IP endpoints.

Is it really a -session- (something that an INVITE should be sent for) that
C is initiating when it instructs B to send an INVITE to A? Or is B acting
as a provisional proxy? What sort of session description, if any, would be
associated with C's INVITE to B? Maybe answers to these sorts of questions
would provide hints as to the compatibility of SIP and 3PSI.

> 
> I'm guessing you are interested in some kind of operator services
> features? I'd very much be interested to hear if you had some other
> application in mind.
> 

That depends on how broad your understanding of the term 'operator services'
is.

For example, I am considering cases in which A's user has informed C
out-of-band (that is, without using SIP) of the desired session. C has the
intelligence to know the session requires that B connect to A. This might
take a while to explain, but...

Consider, to make the example concrete, a multiplayer game which has a pair
of client-side applications. One is the actual game 'client', which
comprises a UA and some game-media processing system; the other is a
server-discovery application that determines the appropriate server for this
client - given network conditions, desired transactions/rules, or what have
you. 

There is actually an application similar to this for first-person shooters
(Quake, Unreal, etc) called 'GameSpy', which downloads massive lists of
servers and calculates the client-host's ping time to each and then launches
a chosen session. 

In our example, the server-discovery application is C, the client is A, and
B is a server (some sort of conferencing system for clients); we'll say that
Joe is the user who controls both C and A. Now, Joe interacts with C (by
launching the application and clicking the 'find best server' button) in
order to discover the proper server. C performs its analysis and learns that
B is the proper server for A. 

Now, if it were the GameSpy application, C would then launch A, notifying A
as it is invoked of the proper server B. But we'll place an arbitrary
restriction on this game architecture and say that C cannot launch A
because, for example:

- C is actually a network-remote application that Joe is accessing (so
rather than launching C, Joe would log into it, or whatnot)
- B is a limited and contested resource that doesn't want to be flooded by
hopeful campers, so it collects INVITEs from Cs, queues them, and deals with
them as resources become available (rather than constantly receiving INVITEs
from As)
- B's network has a policy that prevents it from receiving unsolicited port
5060 traffic from A, but it can send arbitrarily to A (and presumably B is
reachable by C)
- Billing strictures associated with the session require that B initiate

So instead, C asks B to begin a session with A - perhaps with a SIP INVITE,
OPTIONS and Also headers, or however we might want 3PSI to work. At this
point, C's responsibilities could very well end - if B and A are unable to
connect, Joe will have to go through C again.

In this case, Joe is interacting with C out-of-band, looking for a session
to associate with A (this assumes that Joe has given C enough information
that C can tell B how to reach A), C discovers B and requests that B start a
session with A. Whew.

I suppose the question is: does the example I describe violate the SIP
paradigm, or otherwise lead to undesirable consequences?

Jon Peterson
Level(3) Communications

> -Jonathan R.
> 
> 
> -- 
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120 
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 22 07:44:05 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id HAA07237
	for <sip-archive@odin.ietf.org>; Wed, 22 Dec 1999 07:44:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D500652AB; Wed, 22 Dec 1999 07:41:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4563D52BB; Wed, 22 Dec 1999 07:41:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id E75B352AB
	for <sip@lists.research.bell-labs.com>; Wed, 22 Dec 1999 07:41:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 22 07:39:49 EST 1999
Received: from leonardo.polito.it ([130.192.3.21]) by dusty; Wed Dec 22 07:38:09 EST 1999
Received: from cclinf49.polito.it by leonardo.polito.it with SMTP
	id AA14715; Wed, 22 Dec 1999 13:37:04 +0100
Message-Id: <3860C62D.EB5D1E98@pop.polito.it>
Date: Wed, 22 Dec 1999 13:38:05 +0100
From: Laurent-Walter Goix <goix@ercole.polito.it>
Reply-To: goix@athena.polito.it
Organization: Politecnico di Torino / INSA de Lyon
X-Mailer: Mozilla 4.61 [en] (WinNT; U)
X-Accept-Language: fr,en
Mime-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: SIP 3rd-party call ending
References: <6DD3824BDF75D211930E0008C71EC92003CACF46@l3lsvlmail02.l3.com> <385F0C7C.B1B06C1@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Hi

I'm currently working on a project which ables to initiate voice communications on
computer using a SIP proxy and communicate then through a PSTN network with
classical phone terminals (using a Dialogic board interface). I currently have
doubts on how ending the SIP session in case of a phone hang-up. When the Dialogic
board detect the hang-up, could the SIP proxy generate a BYE (or other...) message
to close the session (on first INVITE, the session is set to the maximum time) ?
Similar situation appears using asymetrical VoIP/PSTN scenario on VoIP endpoint's
crash to end the SIP session.

Generally, as a third-party could initiate a session, could it end it also, or at
least generate an ending procedure between the two SIP endpoints (on computer) ?

Laurent-Walter Goix

CSELT : walter@grizzly.cselt.it
Politecnico di Torino : goix@athena.polito.it
INSA de Lyon : goix@telecom.insa-lyon.fr





From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 22 09:06:16 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA10741
	for <sip-archive@odin.ietf.org>; Wed, 22 Dec 1999 09:06:16 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id EF39452D6; Wed, 22 Dec 1999 09:03:28 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 62CB352D5; Wed, 22 Dec 1999 09:03:27 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 1664C52D6
	for <sip@lists.research.bell-labs.com>; Wed, 22 Dec 1999 09:03:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 22 09:01:46 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Wed Dec 22 09:00:07 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhurw08314;
	Wed, 22 Dec 1999 14:01:37 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id JAA08936;
	Wed, 22 Dec 1999 09:01:36 -0500 (EST)
Message-ID: <3860DB33.8778B789@dynamicsoft.com>
Date: Wed, 22 Dec 1999 09:07:47 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: goix@athena.polito.it
Cc: sip@lists.research.bell-labs.com
Subject: Re: SIP 3rd-party call ending
References: <6DD3824BDF75D211930E0008C71EC92003CACF46@l3lsvlmail02.l3.com> <385F0C7C.B1B06C1@dynamicsoft.com> <3860C62D.EB5D1E98@pop.polito.it>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Laurent-Walter Goix wrote:
> 
> Hi
> 
> I'm currently working on a project which ables to initiate voice communications on
> computer using a SIP proxy and communicate then through a PSTN network with
> classical phone terminals (using a Dialogic board interface). I currently have
> doubts on how ending the SIP session in case of a phone hang-up. When the Dialogic
> board detect the hang-up, could the SIP proxy generate a BYE (or other...) message
> to close the session (on first INVITE, the session is set to the maximum time) ?
> Similar situation appears using asymetrical VoIP/PSTN scenario on VoIP endpoint's
> crash to end the SIP session.

I assume we are talking about the following scenario:


PC  ------------- PROXY -------------- GATEWAY

Where the PC initiates a call by sending an INVITE to the proxy, which
forwards it to the gateway. To answer, the gateway sends a 200 OK back
to the proxy, which forwards it to the PC. The PC then sends an ACK.
Now, if the gateway discovers that the user on the PSTN side has hung
up, it sends a BYE, and sends it to the PC, possibly through the proxy,
if the proxy inserted Record Route in the INVITE. This terminates the
session with the PC.

Should the PC crash, this can be detected at the gateway either using
absence of RTCP (presuming the PC is using RTCP), or through the session
timer extension:

http://www.ietf.org/internet-drafts/draft-ietf-sip-session-timer-00.txt


> 
> Generally, as a third-party could initiate a session, could it end it also, or at
> least generate an ending procedure between the two SIP endpoints (on computer) ?

As we are discussing on another thread, the SIP call control mechanisms
right now don't quite support third party call initiation. In the
scenario you describe, though, there is no need for third party call
initiation or termination.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 23 04:16:10 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id EAA19336
	for <sip-archive@odin.ietf.org>; Thu, 23 Dec 1999 04:16:09 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7E8FF52B6; Thu, 23 Dec 1999 04:13:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id EA41552BB; Thu, 23 Dec 1999 04:13:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id E202D52B6
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 04:13:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 04:12:58 EST 1999
Received: from penguin.wise.edt.ericsson.se ([194.237.142.110]) by dusty; Thu Dec 23 04:11:18 EST 1999
Received: from SMTP (ESEALNT409.al.sw.ericsson.se [153.88.251.32])
	by penguin.wise.edt.ericsson.se (8.9.3/8.9.3/WIREfire-1.5) with SMTP id KAA24448
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 10:12:55 +0100 (MET)
Received: from esealnt172.ericsson.se ([130.100.184.165]) by 153.88.251.32
  (Norton AntiVirus for Internet Email Gateways 1.0) ;
  Thu, 23 Dec 1999 09:12:54 0000 (GMT)
Received: by esealnt172 with Internet Mail Service (5.5.2448.0)
	id <Z2Y0L3Z0>; Thu, 23 Dec 1999 10:12:53 +0100
Message-ID: <D898F49E6B34D311A89C00204840355EB7BD7B@eseldnt102.ericsson.se>
From: "Alvir Alisic (ECS)" <Alvir.Alisic@ecs.ericsson.se>
To: sip@lists.research.bell-labs.com
Subject: JPEG in INVITE
Date: Thu, 23 Dec 1999 10:12:47 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Hey!!!

I want to send JPEG pictures in my INVITE messages, but I don't know how I can do that. Is there anyone who can help me???

Marry Christmas and Happy New Year

Kind Regards
Alvir

Alvir Alisic
M. Sc Candidate - Datacom Software
Ericsson Mobile Communications AB
Lund, Sweden
mailto:alvir.alisic@ecs.ericsson.se  
phone:+46 (0)46 19 38 39





From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 23 05:37:46 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id FAA19756
	for <sip-archive@odin.ietf.org>; Thu, 23 Dec 1999 05:37:45 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 6B8DB52AB; Thu, 23 Dec 1999 05:35:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id D357852D5; Thu, 23 Dec 1999 05:35:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id EDC1752AB
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 05:35:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 05:34:14 EST 1999
Received: from beamer.mchh.siemens.de ([194.138.158.163]) by dusty; Thu Dec 23 05:32:30 EST 1999
Received: from moody.mchh.siemens.de (mail2.mchh.siemens.de [194.138.158.226])
	by beamer.mchh.siemens.de (8.9.3/8.9.3) with ESMTP id LAA23072;
	Thu, 23 Dec 1999 11:33:19 +0100 (MET)
Received: from mchh247e.demchh201e.icn.siemens.de ([218.1.68.147])
	by moody.mchh.siemens.de (8.9.1/8.9.1) with ESMTP id LAA24490;
	Thu, 23 Dec 1999 11:34:03 +0100 (MET)
Received: by MCHH247E with Internet Mail Service (5.5.2448.0)
	id <Y9Y3C8YK>; Thu, 23 Dec 1999 11:35:18 +0100
Message-ID: <679076A067F2D211A8F70090274481B80C183D@lnn201e.lan.siemens.fr>
From: Taji Rachid <Rachid.Taji@srit.siemens.fr>
To: "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: RE: JPEG in INVITE
Date: Thu, 23 Dec 1999 11:35:09 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Hi alvir,

I think you can do that in SDP part like this:

c= "IN"  "rfc2543"  IpAdressOfReceiver   
m= "image" portOfThisIPAdress "UDP" " JPEG"
a= "fmtp:JPEG"  "uri:"http://mycampany/xxx.jpeg 



portOfThisIPAdress :  is the port to wich the image will be sent  
uri   : is the uri of the image
IN    :stands for internet.
You can get more information in RFC 2327 SDP protocole

Merry christmass an Happy new Year



> -----Original Message-----
> From:	Alvir Alisic (ECS) [SMTP:Alvir.Alisic@ecs.ericsson.se]
> Sent:	Donnerstag, 23. Dezember 1999 10:13
> To:	sip@lists.research.bell-labs.com
> Subject:	JPEG in INVITE
> 
> Hey!!!
> 
> I want to send JPEG pictures in my INVITE messages, but I don't know how I
> can do that. Is there anyone who can help me???
> 
> Marry Christmas and Happy New Year
> 
> Kind Regards
> Alvir
> 
> Alvir Alisic
> M. Sc Candidate - Datacom Software
> Ericsson Mobile Communications AB
> Lund, Sweden
> mailto:alvir.alisic@ecs.ericsson.se  
> phone:+46 (0)46 19 38 39
> 
> 



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 23 08:58:05 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id IAA24227
	for <sip-archive@odin.ietf.org>; Thu, 23 Dec 1999 08:58:05 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id CFB5152BB; Thu, 23 Dec 1999 08:55:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 461F852D5; Thu, 23 Dec 1999 08:55:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id CF7E852BB
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 08:55:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 08:54:05 EST 1999
Received: from scott.metatel.office ([24.128.100.134]) by dusty; Thu Dec 23 08:52:26 EST 1999
Received: from localhost (scott.petrack@localhost)
	by scott.metatel.office (8.9.3/8.9.3) with ESMTP id DAA03975;
	Thu, 23 Dec 1999 03:55:55 -0500
X-Authentication-Warning: scott.metatel.office: scott.petrack owned process doing -bs
Date: Thu, 23 Dec 1999 03:55:55 -0500 (EST)
From: Scott Petrack <scott.petrack@metatel.com>
X-Sender: scott.petrack@scott.metatel.office
To: "Alvir Alisic (ECS)" <Alvir.Alisic@ecs.ericsson.se>
Cc: sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
In-Reply-To: <D898F49E6B34D311A89C00204840355EB7BD7B@eseldnt102.ericsson.se>
Message-ID: <Pine.LNX.4.10.9912230345520.3778-100000@scott.metatel.office>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

If your intent is to put it in the INVITE itself as a kind of "caller id
gif", then I say just put it in a separate MIME part as image/jpeg. 
The INVITE itself uses multipart mime. The first part should be
application/sdp and then the subsequent parts could be image/jpeg,
audio/wav, text/plain,whatever. The receiver(s) of the INVITE would show
the image, play the wav, display the text, whatever.

I have had discussions in the past where people have hosed me for this,
saying that more explicit signalling is needed, but I claim it's pretty
clear that if I get some attached media in the payload of an INVITE, the
intent is that this media should be played-out/displayed at the receiver
of the INVITE. Of course, this is not standard SIP, but that shouldn't
upset older implementations -- they will just throw the extra payloads on
the floor. If the older implementations are too stupid to deal with any
MIME type other than application/sdp, all they have to do is return an
error with 415 Unsupported Media Type (the reason phrase here really
should be changed to "Unsupported Content-Type" or "Unsupported message
body format"), along with Accept: application/sdp, and then the sender can
try again. If you think that this adds extra round trips into the
signaling, I would say that an implementation can have a pretty good a
priori guess as to the chances of success in sending such a multipart MIME
INVITE.

I have always thought that the ability to send a thumbnail sketch as
caller ID is a very cool feature that SIP can do very naturally.

Scott

On Thu, 23 Dec 1999, Alvir Alisic (ECS) wrote:

> Hey!!!
> 
> I want to send JPEG pictures in my INVITE messages, but I don't know how I can do that. Is there anyone who can help me???
> 
> Marry Christmas and Happy New Year
> 
> Kind Regards
> Alvir
> 
> Alvir Alisic
> M. Sc Candidate - Datacom Software
> Ericsson Mobile Communications AB
> Lund, Sweden
> mailto:alvir.alisic@ecs.ericsson.se  
> phone:+46 (0)46 19 38 39
> 
> 
> 
> 




From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 23 09:43:44 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA25554
	for <sip-archive@odin.ietf.org>; Thu, 23 Dec 1999 09:43:43 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9B8C352D5; Thu, 23 Dec 1999 09:41:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 0EE9B52D6; Thu, 23 Dec 1999 09:41:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id D201552D5
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 09:41:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 09:39:14 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec 23 09:37:35 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhuvq28470;
	Thu, 23 Dec 1999 14:39:12 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id JAA10691;
	Thu, 23 Dec 1999 09:39:11 -0500 (EST)
Message-ID: <38623589.C7182F89@dynamicsoft.com>
Date: Thu, 23 Dec 1999 09:45:29 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Taji Rachid <Rachid.Taji@srit.siemens.fr>
Cc: "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <679076A067F2D211A8F70090274481B80C183D@lnn201e.lan.siemens.fr>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

There are two basic ways to do this, both of which have now been
mentioned on the list. The first is to treat the image as part of the
signaling, and include it somehow in the INVITE. This would be
accomplished, as Scott has suggested, using MIME multipart, with one
type possibly being image/jpeg. We have discussed using the MIME
Content-Disposition header to allow the UAS to know the purpose of the
MIME content. To date, we have seen MIME bodies needed for several
reasons:

1. for session descriptions
2. for display
3. for tunnelled signaling (ISUP)
4. for billing/accounting (OSP tokens)

The reason I mention this is that I think rather than including the
image in SIP itself, its a bit better to include the type text/uri-list,
which is just a list of URIs. Then, one of the URIs is an http URL that
points to the JPEG image. When one does this, the Content-Disposition
header becomes important. This is because the URI might point to any one
of the 4 content disposition types above, and to know how to handle it,
the UAS needs to know which before its even fetched. We will also need,
I think, an additional parameter which indicates whether the body is
optional or mandatory. Scott has suggested that for multipart, any
unknown bodies are discarded. I'd rather be explicit about that.

The second approach is to have the image be a media stream. This would
be done by including an additional m line in the SDP. The formatting
suggested by Taji is not quite right though. It would look like:


m=image 49170 RTP/AVP 55
a=rtpmap:55 jpeg
c=IN IP4 10.1.1.1


So, whats the difference? Which is the "right" way? In this case, I
believe inclusion in SIP is the right way. There are several reasons for
this:

1. The purpose of the image is to assist the user in deciding whether to
accept or reject the call. We have headers like Subject in display name
which serve a similar function; these are part of the signaling
function.

2. Security can be better when this is placed in signaling. When a UAC
includes a jpeg image or URL, its outgoing proxy can verify these as
being correct (based on a preconfigured list of allowed content and
URLS, perhaps), and then resign the request. This provides a form of
enhanced caller ID service, as the identity of the caller is verified by
a service provider now, whose key a called party is more likely to have.

3. We save the complexity and overhead of establishing a media channel
just for a single image.


The line between what to do in SIP, and what to do in a media stream, is
hard to draw. If the content is not interactive (like a static image
that already exists), it affects how the user is likely to handle the
call, and it can be obtained through redirection, SIP might be the
better choice.

-Jonathan R.

Taji Rachid wrote:
> 
> Hi alvir,
> 
> I think you can do that in SDP part like this:
> 
> c= "IN"  "rfc2543"  IpAdressOfReceiver
> m= "image" portOfThisIPAdress "UDP" " JPEG"
> a= "fmtp:JPEG"  "uri:"http://mycampany/xxx.jpeg
> 
> portOfThisIPAdress :  is the port to wich the image will be sent
> uri   : is the uri of the image
> IN    :stands for internet.
> You can get more information in RFC 2327 SDP protocole
> 
> Merry christmass an Happy new Year
> 
> > -----Original Message-----
> > From: Alvir Alisic (ECS) [SMTP:Alvir.Alisic@ecs.ericsson.se]
> > Sent: Donnerstag, 23. Dezember 1999 10:13
> > To:   sip@lists.research.bell-labs.com
> > Subject:      JPEG in INVITE
> >
> > Hey!!!
> >
> > I want to send JPEG pictures in my INVITE messages, but I don't know how I
> > can do that. Is there anyone who can help me???
> >
> > Marry Christmas and Happy New Year
> >
> > Kind Regards
> > Alvir
> >
> > Alvir Alisic
> > M. Sc Candidate - Datacom Software
> > Ericsson Mobile Communications AB
> > Lund, Sweden
> > mailto:alvir.alisic@ecs.ericsson.se
> > phone:+46 (0)46 19 38 39
> >
> >

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 23 10:03:51 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA26182
	for <sip-archive@odin.ietf.org>; Thu, 23 Dec 1999 10:03:50 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id B0D4C52B6; Thu, 23 Dec 1999 10:01:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 29F2A52DB; Thu, 23 Dec 1999 10:01:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 21BBD52B6
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 10:01:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 10:00:24 EST 1999
Received: from cs.columbia.edu ([128.59.16.20]) by dusty; Thu Dec 23 09:58:45 EST 1999
Received: from cs.columbia.edu (bart.cs.columbia.edu [128.59.19.191])
	by cs.columbia.edu (8.9.1/8.9.1) with ESMTP id KAA05499;
	Thu, 23 Dec 1999 10:00:18 -0500 (EST)
Message-ID: <386238FF.A82B4FAC@cs.columbia.edu>
Date: Thu, 23 Dec 1999 10:00:15 -0500
From: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Organization: Columbia University, Dept. of Computer Science
X-Mailer: Mozilla 4.7 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <679076A067F2D211A8F70090274481B80C183D@lnn201e.lan.siemens.fr> <38623589.C7182F89@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Another alternative is to define a new header, e.g.,

Face: http://sln.fi.edu/franklin/inventor/images/belllg.jpg

There's a trade-off in that this mechanism is more in line with its
function (and much simpler than parsing through body parts and URI
lists), but a receiver would have to recognize the header name rather
than just a generic "display this and don't ask what it's for" approach
of an attachment. I suspect for common functionality such as this,
headers will turn out to be a better approach since they can be more
explicit about function.
-- 
Henning Schulzrinne   http://www.cs.columbia.edu/~hgs



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 23 10:17:42 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA26519
	for <sip-archive@odin.ietf.org>; Thu, 23 Dec 1999 10:17:42 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D65DF52DB; Thu, 23 Dec 1999 10:15:19 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 5A8BC52DF; Thu, 23 Dec 1999 10:15:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id D411F52DB
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 10:15:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 10:13:50 EST 1999
Received: from mailserv2.iuinc.com ([206.245.164.55]) by dusty; Thu Dec 23 10:12:10 EST 1999
Received: (qmail 10625 invoked from network); 23 Dec 1999 15:13:48 -0000
Received: from unknown (HELO raymond) (216.181.56.35)
  by mailserv2.iuinc.com with SMTP; 23 Dec 1999 15:13:48 -0000
From: "Doug Sauder" <doug@broadsoft.com>
To: <sip@lists.research.bell-labs.com>
Subject: RE: JPEG in INVITE
Date: Thu, 23 Dec 1999 10:16:32 -0500
Message-ID: <NDBBIAKOPKHFGPLCODIGAEBPCDAA.doug@broadsoft.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <386238FF.A82B4FAC@cs.columbia.edu>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2314.1300
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by ietf.org id KAA26519

Just brainstorming here a little...   The "cid:" URL protocol allows the referenced object to be one of the MIME body parts.  Thus, an HTTP connection would not have to be opened to get the image.

--
Doug Sauder
Broadsoft, Inc.

> Another alternative is to define a new header, e.g.,
> 
> Face: http://sln.fi.edu/franklin/inventor/images/belllg.jpg
> 
> There's a trade-off in that this mechanism is more in line with its
> function (and much simpler than parsing through body parts and URI
> lists), but a receiver would have to recognize the header name rather
> than just a generic "display this and don't ask what it's for" approach
> of an attachment. I suspect for common functionality such as this,
> headers will turn out to be a better approach since they can be more
> explicit about function.
> -- 
> Henning Schulzrinne   http://www.cs.columbia.edu/~hgs
> 
> 




From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 23 10:59:58 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA27200
	for <sip-archive@odin.ietf.org>; Thu, 23 Dec 1999 10:59:58 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 854DD52D6; Thu, 23 Dec 1999 10:57:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id EF8BD52E0; Thu, 23 Dec 1999 10:57:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id AB8BE52D6
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 10:57:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 10:55:39 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec 23 10:54:00 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhuvv24609;
	Thu, 23 Dec 1999 15:55:37 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id KAA11088;
	Thu, 23 Dec 1999 10:55:36 -0500 (EST)
Message-ID: <38624771.502B7746@dynamicsoft.com>
Date: Thu, 23 Dec 1999 11:01:53 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Henning Schulzrinne <schulzrinne@cs.columbia.edu>
Cc: Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <679076A067F2D211A8F70090274481B80C183D@lnn201e.lan.siemens.fr> <38623589.C7182F89@dynamicsoft.com> <386238FF.A82B4FAC@cs.columbia.edu>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

I kind of like using a multipart type, since this allows the case of
directly included and indirectly included (via a URL) to be the same. It
also means we can include things for a broader purpose than just
"faces".

-Jonathan R.

Henning Schulzrinne wrote:
> 
> Another alternative is to define a new header, e.g.,
> 
> Face: http://sln.fi.edu/franklin/inventor/images/belllg.jpg
> 
> There's a trade-off in that this mechanism is more in line with its
> function (and much simpler than parsing through body parts and URI
> lists), but a receiver would have to recognize the header name rather
> than just a generic "display this and don't ask what it's for" approach
> of an attachment. I suspect for common functionality such as this,
> headers will turn out to be a better approach since they can be more
> explicit about function.
> --
> Henning Schulzrinne   http://www.cs.columbia.edu/~hgs

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 23 11:04:06 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA27341
	for <sip-archive@odin.ietf.org>; Thu, 23 Dec 1999 11:04:06 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id C9A9252E0; Thu, 23 Dec 1999 11:01:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 5A32B52E1; Thu, 23 Dec 1999 11:01:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A169052E0
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 11:01:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 10:59:27 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec 23 10:57:48 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhuvv01852;
	Thu, 23 Dec 1999 15:59:25 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id KAA11093;
	Thu, 23 Dec 1999 10:59:24 -0500 (EST)
Message-ID: <38624855.A1E52E7@dynamicsoft.com>
Date: Thu, 23 Dec 1999 11:05:41 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Doug Sauder <doug@broadsoft.com>
Cc: sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <NDBBIAKOPKHFGPLCODIGAEBPCDAA.doug@broadsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Well, my point was that you want to do that in many cases. SIP is not a
transfer protocol; running ontop of UDP means large bodies will be
problematic. Plus, you don't want to be shipping all these bodies around
if the far side doesn't need them. By putting a URL, the UAS can get the
image if its capable of displaying it, otherwise, not much is lost.

-Jonathan R.

Doug Sauder wrote:
> 
> Just brainstorming here a little...   The "cid:" URL protocol allows the referenced object to be one of the MIME body parts.  Thus, an HTTP connection would not have to be opened to get the image.
> 
> --
> Doug Sauder
> Broadsoft, Inc.
> 
> > Another alternative is to define a new header, e.g.,
> >
> > Face: http://sln.fi.edu/franklin/inventor/images/belllg.jpg
> >
> > There's a trade-off in that this mechanism is more in line with its
> > function (and much simpler than parsing through body parts and URI
> > lists), but a receiver would have to recognize the header name rather
> > than just a generic "display this and don't ask what it's for" approach
> > of an attachment. I suspect for common functionality such as this,
> > headers will turn out to be a better approach since they can be more
> > explicit about function.
> > --
> > Henning Schulzrinne   http://www.cs.columbia.edu/~hgs
> >
> >

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 23 11:39:49 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA28182
	for <sip-archive@odin.ietf.org>; Thu, 23 Dec 1999 11:39:49 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 370BA52B6; Thu, 23 Dec 1999 11:37:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 9C3B452D5; Thu, 23 Dec 1999 11:37:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 1714E52B6
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 11:37:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 11:35:45 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Thu Dec 23 11:34:00 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id WAA16002;
	Thu, 23 Dec 1999 22:46:24 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256850.005AB25B ; Thu, 23 Dec 1999 22:00:38 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Message-ID: <65256850.005AB219.00@sampark.hss.hns.com>
Date: Thu, 23 Dec 1999 20:40:17 +0530
Subject: Re: JPEG in INVITE
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



Hi,
 I have one question:
This is not protocol related. but  I guess its more implementation related,
and is relevant for UDP only:
As it is, when a SIP message is received, the reciever does not know the
size of the received message and hence I guess must allocate some fixed
space for it before doing the n/w read as allocating 64k for a message may
not always be desirable.


However, a typical _single_ sip message takes approx < 500 bytes. However,
if we allow JPEGS/(bitmaps - oops)  inside, the size of the message body
can widely fluctuate.

Then the only way for a person who really does not want to allocate 64k is
to read from the n/w till he gets a content-length, figure out
the size and then read the rest of the body. this is kludgy at best.

So basic point is: as it is, the receiver does not know the size of the
message he is receiving  - but normal sip messages, he should be
safe in most cases with a moderate size (~3000 bytes ?) - but that is not
so when images are embedded.

So worst case what will happen is that many apps might read till a set
number of bytes, therefore chopping the body, and would
probably discard the message ?

In that respect, isnt it better to use the uri-list type as a pointer to
the http image ?

In this way, we dont stuff a lot of image data directly in the message and
an app can decide if it really wants to pick up the image, instead of it
being forced to him (ofcourse, the delay of doing yet another http get is
there for the image)

Just wondering, does the question of 'how much of an allocated  SIP message
size am I safe with' really  bother anyone, or is it that
64k is too less to worry so much about ? ( I for one have come across
embedded sys. vendors who want voip protocols on h/w cards. who scream at
every extra couple of bytes added....)

Regds
Arjun

--
Arjun Roychowdhury @ Hughes Software Systems







Jonathan Rosenberg <jdrosen@dynamicsoft.com> on 12/23/99 08:15:29 PM

To:   Taji Rachid <Rachid.Taji@srit.siemens.fr>
cc:   "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
      sip@lists.research.bell-labs.com

Subject:  Re: JPEG in INVITE




There are two basic ways to do this, both of which have now been
mentioned on the list. The first is to treat the image as part of the
signaling, and include it somehow in the INVITE. This would be
accomplished, as Scott has suggested, using MIME multipart, with one
type possibly being image/jpeg. We have discussed using the MIME
Content-Disposition header to allow the UAS to know the purpose of the
MIME content. To date, we have seen MIME bodies needed for several
reasons:

1. for session descriptions
2. for display
3. for tunnelled signaling (ISUP)
4. for billing/accounting (OSP tokens)

The reason I mention this is that I think rather than including the
image in SIP itself, its a bit better to include the type text/uri-list,
which is just a list of URIs. Then, one of the URIs is an http URL that
points to the JPEG image. When one does this, the Content-Disposition
header becomes important. This is because the URI might point to any one
of the 4 content disposition types above, and to know how to handle it,
the UAS needs to know which before its even fetched. We will also need,
I think, an additional parameter which indicates whether the body is
optional or mandatory. Scott has suggested that for multipart, any
unknown bodies are discarded. I'd rather be explicit about that.

The second approach is to have the image be a media stream. This would
be done by including an additional m line in the SDP. The formatting
suggested by Taji is not quite right though. It would look like:


m=image 49170 RTP/AVP 55
a=rtpmap:55 jpeg
c=IN IP4 10.1.1.1


So, whats the difference? Which is the "right" way? In this case, I
believe inclusion in SIP is the right way. There are several reasons for
this:

1. The purpose of the image is to assist the user in deciding whether to
accept or reject the call. We have headers like Subject in display name
which serve a similar function; these are part of the signaling
function.

2. Security can be better when this is placed in signaling. When a UAC
includes a jpeg image or URL, its outgoing proxy can verify these as
being correct (based on a preconfigured list of allowed content and
URLS, perhaps), and then resign the request. This provides a form of
enhanced caller ID service, as the identity of the caller is verified by
a service provider now, whose key a called party is more likely to have.

3. We save the complexity and overhead of establishing a media channel
just for a single image.


The line between what to do in SIP, and what to do in a media stream, is
hard to draw. If the content is not interactive (like a static image
that already exists), it affects how the user is likely to handle the
call, and it can be obtained through redirection, SIP might be the
better choice.

-Jonathan R.

Taji Rachid wrote:
>
> Hi alvir,
>
> I think you can do that in SDP part like this:
>
> c= "IN"  "rfc2543"  IpAdressOfReceiver
> m= "image" portOfThisIPAdress "UDP" " JPEG"
> a= "fmtp:JPEG"  "uri:"http://mycampany/xxx.jpeg
>
> portOfThisIPAdress :  is the port to wich the image will be sent
> uri   : is the uri of the image
> IN    :stands for internet.
> You can get more information in RFC 2327 SDP protocole
>
> Merry christmass an Happy new Year
>
> > -----Original Message-----
> > From: Alvir Alisic (ECS) [SMTP:Alvir.Alisic@ecs.ericsson.se]
> > Sent: Donnerstag, 23. Dezember 1999 10:13
> > To:   sip@lists.research.bell-labs.com
> > Subject:      JPEG in INVITE
> >
> > Hey!!!
> >
> > I want to send JPEG pictures in my INVITE messages, but I don't know
how I
> > can do that. Is there anyone who can help me???
> >
> > Marry Christmas and Happy New Year
> >
> > Kind Regards
> > Alvir
> >
> > Alvir Alisic
> > M. Sc Candidate - Datacom Software
> > Ericsson Mobile Communications AB
> > Lund, Sweden
> > mailto:alvir.alisic@ecs.ericsson.se
> > phone:+46 (0)46 19 38 39
> >
> >

--
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com








From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 12:30:39 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA29160
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 12:30:38 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9886B52D5; Sat, 25 Dec 1999 12:26:02 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4871752E1; Thu, 23 Dec 1999 11:11:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id CAA9852E3
	for <sip@lists.research.bell-labs.com>; Thu, 23 Dec 1999 11:11:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 11:10:47 EST 1999
Received: from odisei.com ([195.78.3.169]) by dusty; Thu Dec 23 11:09:08 EST 1999
Received: from toshjhr.odisei.com (192.168.0.104) by odisei.com with SMTP
 (Eudora Internet Mail Server 2.2.2); Thu, 23 Dec 1999 17:24:16 +0100
Message-Id: <3.0.5.32.19991223165058.01467100@mail.odisei.com>
X-Sender: Jean-Hugues@mail.odisei.com
X-Mailer: QUALCOMM Windows Eudora Light Version 3.0.5 (32)
Date: Thu, 23 Dec 1999 16:50:58 +0100
To: Jon.Peterson@Level3.com, sip@lists.research.bell-labs.com
From: Jean-Hugues ROBERT <jhr@odisei.com>
Subject: Re: SIP 3rd-party call creation?
In-Reply-To: <6DD3824BDF75D211930E0008C71EC92003CACF46@l3lsvlmail02.l3.c
 om>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Hi Jon,

At 04:46 PM 12/20/99 -0700, Jon.Peterson@Level3.com wrote:
>Has any consideration been given to uninvolved third parties originating
>sessions between two SIP endpoints?

Third party control seems to be out of the scope of SIP currently.
Or I missed it.

I also raised the issue sometimes ago because third party control
is needed to implement CTI (We implement a Hosted VoIP PBX with a JTAPI
CTI interface).

Regarding your specific example, I think that a solution today is for
C to send an INVITE to A, wait until A answers and then immediatly
send a BYE/Also to transfer the call to B.

A limitation of this solution is that C leaves the call and cannot
monitor/control
it any more.

Another alternative, more brutal, is for C to send INVITE to both
ends and to switch all the forthcoming SIP signaling. In that situation
both A and B talk to C (on the control plane), but the RTP media can go
directly from A to B (on the media/user plane).

There must be other solutions, specially if C acts as a proxy server.

Jean-Hugues Robert
Engineering Manager.


At 04:46 PM 12/20/99 -0700, Jon.Peterson@Level3.com wrote:
>Has any consideration been given to uninvolved third parties originating
>sessions between two SIP endpoints?
>
>If I might provide a clarifying example without endorsing the described
>implementation - given two users A and B, each of whom has a SIP phone, and
>an automated entity C (the third party): C somehow decides that a session
>should be initiated between A and B, and thus sends an INVITE to A which,
>due to special properties and/or headers, does not result in a session
>between A and C, but rather prompts A to send a new INVITE to B after some
>sort of approval on A's part. Subsequently C might or might not maintain a
>relationship with A throughout the session establishment, and so forth.
>
>I haven't been able to find any existing work that addresses this sort of
>situation; has something been written on this that I've missed? The SIP Call
>Control Services document covers some nearby territory (the Requested-By and
>Also headers could be relevant), but I don't think, from my reading of the
>document, that it endorses third-party call setup unless the third party is
>a participant in the session.
>
>If this hasn't been explored to date, what is the prevailing opinion on
>third-party session initiation? Is it something to which SIP can and should
>be applied? Are the accounting and security issues too damaging?
>
>Jon Peterson
>Level(3) Communications
>
>
--------------------------------------------------------------------
jhr@8x8.com        - We Serve Providers -          "Think globally.
www.8x8.com      - iPBX Hosting solutions -            Act locally."



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 12:42:14 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA29380
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 12:42:13 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id F060552DF; Sat, 25 Dec 1999 12:30:07 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id C91805326; Sat, 25 Dec 1999 12:30:01 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id B7A3B52DF
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 12:27:07 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 24 00:53:02 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Fri Dec 24 00:51:19 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id MAA07520;
	Fri, 24 Dec 1999 12:03:07 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256851.00203EB1 ; Fri, 24 Dec 1999 11:22:12 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: archow@hss.hns.com, Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Message-ID: <65256851.00203DC5.00@sampark.hss.hns.com>
Date: Fri, 24 Dec 1999 11:22:08 +0530
Subject: General Compression { Was Re: JPEG in INVITE}
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk




Hi,
one more question.
Is there a possible way in which an entire SIP Message can be compressed in
a standard way ?
something like say,
COMPRESSED SIP/2.0 ;algo=gzip
<compressed msg>

Where  the compressed  message is the entire sip message (not only the body
- which can be done by application/gzip)
The receiver can then extract the compressed message, gunzip it, and get
back the actual SIP message and then push it
to decode ?

But on the other hand, I guess this takes away the advantage of a text
based protocol but also provides the user a new
method which can be used to send compact messages _if_ he so wants.

Regds
Arjun
--
Arjun Roychowdhury @ Hughes Software Systems








Jonathan Rosenberg <jdrosen@dynamicsoft.com> on 12/24/99 04:09:26 AM

To:   archow
cc:   Taji Rachid <Rachid.Taji@srit.siemens.fr>, "'Alvir Alisic (ECS)'"
      <Alvir.Alisic@ecs.ericsson.se>, sip@lists.research.bell-labs.com

Subject:  Re: JPEG in INVITE






archow@hss.hns.com wrote:
>
> Hi,
>  I have one question:
> This is not protocol related. but  I guess its more implementation
related,
> and is relevant for UDP only:
> As it is, when a SIP message is received, the reciever does not know the
> size of the received message and hence I guess must allocate some fixed
> space for it before doing the n/w read as allocating 64k for a message
may
> not always be desirable.
>
> However, a typical _single_ sip message takes approx < 500 bytes.
However,
> if we allow JPEGS/(bitmaps - oops)  inside, the size of the message body
> can widely fluctuate.
>
> Then the only way for a person who really does not want to allocate 64k
is
> to read from the n/w till he gets a content-length, figure out
> the size and then read the rest of the body. this is kludgy at best.

SIP has a response code that is "message body too large". If you wish to
impose restrictions in your implementation, you can just read enough
bytes to get the header. This will tell you the size of the body. If
thats too much for your tastes, reject the message.

I agree that since SIP is not meant as a transfer protocol, including
lots of data in UDP can be bad for small implementations. There is
another issue, which is UDP message fragmentation at the IP layer.
Fragmentation causes an amplication effect in the loss probabilities, so
that a small loss probability can result in significant packet loss
(this is only true for independent packet losses; its not as bad for
highly correlated packet loss). Using lots of data in UDP will cause the
messages to be fragmented.

-Jonathan R.

--
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com







From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 12:50:34 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA29475
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 12:50:33 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4A3425319; Sat, 25 Dec 1999 12:32:07 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4570E532E; Sat, 25 Dec 1999 12:31:37 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 79E58530A
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 12:28:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 24 15:45:49 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 24 15:44:11 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhvah24628;
	Fri, 24 Dec 1999 20:45:48 GMT
Received: from dynamicsoft.com (1Cust1.tnt1.freehold.nj.da.uu.net [63.17.113.1])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id PAA11648;
	Fri, 24 Dec 1999 15:45:45 -0500 (EST)
Message-ID: <3863DCF5.67B59172@dynamicsoft.com>
Date: Fri, 24 Dec 1999 15:52:05 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Dean Willis <dean.willis@wcom.com>
Cc: rick@fdd.com, sip@lists.research.bell-labs.com
Subject: Re: proxy-based dialing plan problem
References: <000301bf4b7d$bc2faee0$d19623a6@directlink.net>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Dean Willis wrote:
> 
> Well, I have about 35,000 different private dialing plans, some of which
> have upwards of 100,000 numbers, MOST OF WHICH DO NOT MAP TO GLOBALLY
> SIGNIFICANT NUMBERS. Many are variable length, or have synonyms of different
> lengths such as four-digit dialing to a number that could also be reached by
> 8+7digits. Some of the dialing plans actually vary by time-of-day or
> who-is-placing-the-call or in other bizarre and nondisclosable ways.

In these cases, I believe the tel URL is not the right form, and rather,
you should use a SIP URL. The left hand side is *whatever you want*,
since the name only has meaning within the context of the domain to the
right, which is wcom.com. So, if some gateway receives a call for 333
and this is some private numbering plan, identified as plan 34, its
perfectly reasonable to construct a URL which is:

sip:tel_333_vnet_34@wcom.com

or

sip:333-34@wcom.com

or whatever you like. The construction of the name to the left DOES NOT
HAVE TO BE STANDARDIZED. It has meaning only within wcom.com. The only
server that needs to understand its semantic is wcom.com.


> How about we define a limited set of contexts,
> {"unknown","public","private","global","local"} such that a phone that knows
> it doesn't know anything about the dialing plan can indicate a
> "phone-context=unknown" and a phone that "knows" it has a global number can
> indicate that as well? We can combine this with a translation identfier
> ("trans="token), and a "numbering plan" identifier ("plan="token), and I
> believe we have all the semantics necessary to describe a dialed number and
> any information knwon about it rather completely as it is processed through
> every transformation I can think of.

I think we can avoid any extensions to the url forms by allowing each
vendor to include the information it needs in the user portion of the
SIP URL. This way, each SP can generate the information it needs. This
does require cooperation between the gateway and the proxy, in the sense
that the gateway must generate the user names in the form the proxy is
expecting to understand. We could then write a separate document, if
people like, standardizing formatting of the user portion to convey this
kind of information. Multiple specs could even be defined for this, and
which one is needed would basically be part of the RFP put out by an
service provider that wants to deploy a service.

In the case of globally significant numbers, I believe the tel URL form
is better, and that the tel URL form should be globalized.

> Homework:
> ---------------------
> 
> Question: If a phone-context is not specfied, what value do we assume it
> has?
> 
> Proposals:
> 
> 1) "unknown".
> 
> 2) "global" or "unknown" based on the presence/absence of a leading "+".

I'm suggesting the context be part of the user portion of the SIP URL.



> 3) Deprecate tel: amd phone-context as in #2, but concatenate the context
> with the dialed dgits on the LHS of the @ and present the hostport of the
> default proxy or service on the rhs, as in
> "sip:1234567.context@proxy.phone.com". I believe Jonathan suggested this.

Almost. Keep tel URL, but use them only with globally significant
numbers. 

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 12:57:17 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA29600
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 12:57:16 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 5E41152C4; Sat, 25 Dec 1999 12:37:48 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 7B2DF52E5; Sat, 25 Dec 1999 12:34:35 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id C71A75314
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 12:28:12 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 24 01:08:10 EST 1999
Received: from www.obsoft.com ([209.128.67.121]) by dusty; Fri Dec 24 01:06:30 EST 1999
Received: from obsoft.com (sardana@localhost [127.0.0.1]) by www.obsoft.com (8.6.12/8.6.9) with ESMTP id AAA24921; Fri, 24 Dec 1999 00:01:17 -0600
Message-ID: <38630C2C.7D3D1526@obsoft.com>
Date: Fri, 24 Dec 1999 00:01:16 -0600
From: Bobby Sardana <sardana@obsoft.com>
Organization: ObjectSoftware, Inc.
X-Mailer: Mozilla 4.04 [en] (X11; I; Linux 2.0.33 i586)
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <65256850.005AB219.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Greetings:

archow@hss.hns.com wrote:

> Hi,
>  I have one question:
> This is not protocol related. but  I guess its more implementation related,
> and is relevant for UDP only:
> As it is, when a SIP message is received, the reciever does not know the
> size of the received message and hence I guess must allocate some fixed
> space for it before doing the n/w read as allocating 64k for a message may
> not always be desirable.

Just curious. I would like to know why you would allocate a buffer of 64K. You
can perform dynamic allocations or use collections and the size of the message
becomes immaterial.

>
>
> However, a typical _single_ sip message takes approx < 500 bytes. However,
> if we allow JPEGS/(bitmaps - oops)  inside, the size of the message body
> can widely fluctuate.
>
> Then the only way for a person who really does not want to allocate 64k is
> to read from the n/w till he gets a content-length, figure out
> the size and then read the rest of the body. this is kludgy at best.

I would like to know why this is kludgy? To me, it's the only technique that
makes sense. Unless you know the length, the hint of which is provied by the
Content-Length header,  there is no other way to approximate the length of the
body. If I am missing something here, let me know.

Merry Chrismas and Happy Millenium to all!

Bobby Sardana.
sardana@obsoft.com

>
>
> So basic point is: as it is, the receiver does not know the size of the
> message he is receiving  - but normal sip messages, he should be
> safe in most cases with a moderate size (~3000 bytes ?) - but that is not
> so when images are embedded.
>
> So worst case what will happen is that many apps might read till a set
> number of bytes, therefore chopping the body, and would
> probably discard the message ?
>
> In that respect, isnt it better to use the uri-list type as a pointer to
> the http image ?
>
> In this way, we dont stuff a lot of image data directly in the message and
> an app can decide if it really wants to pick up the image, instead of it
> being forced to him (ofcourse, the delay of doing yet another http get is
> there for the image)
>
> Just wondering, does the question of 'how much of an allocated  SIP message
> size am I safe with' really  bother anyone, or is it that
> 64k is too less to worry so much about ? ( I for one have come across
> embedded sys. vendors who want voip protocols on h/w cards. who scream at
> every extra couple of bytes added....)
>
> Regds
> Arjun
>
> --
> Arjun Roychowdhury @ Hughes Software Systems
>






From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 13:00:11 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA29679
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 13:00:11 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 624DC52DC; Sat, 25 Dec 1999 12:37:49 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 0BA5652E4; Sat, 25 Dec 1999 12:34:55 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id C5E6E5311
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 12:28:09 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 24 16:01:50 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 24 16:00:11 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhvai02091;
	Fri, 24 Dec 1999 21:01:48 GMT
Received: from dynamicsoft.com (1Cust1.tnt1.freehold.nj.da.uu.net [63.17.113.1])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id QAA11656;
	Fri, 24 Dec 1999 16:01:46 -0500 (EST)
Message-ID: <3863E0B6.631CFFCE@dynamicsoft.com>
Date: Fri, 24 Dec 1999 16:08:06 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Henning Schulzrinne <hgs@cs.columbia.edu>
Cc: Anders Kristensen <ak@hplb.hpl.hp.com>, archow@hss.hns.com,
        Marc Petit-Huguenin <petithug@8x8.com>,
        IETF SIP <sip@lists.research.bell-labs.com>
Subject: Re: Question about Call comparaison
References: <65256848.006D9D53.00@sampark.hss.hns.com> <38588347.9C3F1347@dynamicsoft.com> <3858FB96.EDD557C3@cs.columbia.edu> <3859D17D.64A211F@dynamicsoft.com> <3859E94B.89BB466D@cs.columbia.edu> <385A98E1.C5617AEC@hplb.hpl.hp.com> <385AC9AF.F69B3F84@cs.columbia.edu>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Henning Schulzrinne wrote:
> 
> Thus, summary:
> 
> - parameter names are CI
> 
> - rest is CS
> 
> - host names will have to be CI, even though that's a pain. Given the
> precedence of RFC 822 and HTTP, it would be difficult to deviate here.
> (This primarily matters for REGISTER matching, since people do have all
> kinds of variations, particularly for CamelCase.)
> 
> - user names have to be CS, given RFC 822. It would be bad if an
> installation had two user id's distinguished via case and then couldn't
> assign these ids as SIP ids. (I suppose that having John and john for
> John Sr. and John Jr. would not be a smart move to begin with...)
> 
> Besides having to pay more attention when building the URL comparer, a
> pure strcmp or strcasecmp on two URLs can never work, so one has to
> compare component-by-component. In that case, comparing sometimes via
> strcmp and sometimes via strcasecmp is not likely to bloat the code,
> just add a nuisance to programming.

And also that default values of parameters match non-inclusion (i.e.,
port 5060 the same as if no port were present).

Is there consensus on this approach? Please speak up if you have a
problem with this. Whatever we do, we should have a section in the
revised spec on URL comparisons that is absolutely clear on these
things.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 13:02:52 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA29804
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 13:02:52 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 27F1752BB; Sat, 25 Dec 1999 12:38:42 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 75E8352D6; Sat, 25 Dec 1999 12:36:00 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 368855310
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 12:28:14 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 17:33:13 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Thu Dec 23 17:31:34 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhuww13306;
	Thu, 23 Dec 1999 22:33:11 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id RAA11446;
	Thu, 23 Dec 1999 17:33:11 -0500 (EST)
Message-ID: <3862A49E.FCC3CC29@dynamicsoft.com>
Date: Thu, 23 Dec 1999 17:39:26 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <65256850.005AB219.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



archow@hss.hns.com wrote:
> 
> Hi,
>  I have one question:
> This is not protocol related. but  I guess its more implementation related,
> and is relevant for UDP only:
> As it is, when a SIP message is received, the reciever does not know the
> size of the received message and hence I guess must allocate some fixed
> space for it before doing the n/w read as allocating 64k for a message may
> not always be desirable.
> 
> However, a typical _single_ sip message takes approx < 500 bytes. However,
> if we allow JPEGS/(bitmaps - oops)  inside, the size of the message body
> can widely fluctuate.
> 
> Then the only way for a person who really does not want to allocate 64k is
> to read from the n/w till he gets a content-length, figure out
> the size and then read the rest of the body. this is kludgy at best.

SIP has a response code that is "message body too large". If you wish to
impose restrictions in your implementation, you can just read enough
bytes to get the header. This will tell you the size of the body. If
thats too much for your tastes, reject the message.

I agree that since SIP is not meant as a transfer protocol, including
lots of data in UDP can be bad for small implementations. There is
another issue, which is UDP message fragmentation at the IP layer.
Fragmentation causes an amplication effect in the loss probabilities, so
that a small loss probability can result in significant packet loss
(this is only true for independent packet losses; its not as bad for
highly correlated packet loss). Using lots of data in UDP will cause the
messages to be fragmented.

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 13:05:39 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA29823
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 13:05:39 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4EB5052DB; Sat, 25 Dec 1999 12:38:42 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E77DF52E0; Sat, 25 Dec 1999 12:36:09 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 591195315
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 12:28:15 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Fri Dec 24 13:53:18 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 24 13:51:39 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhuzz05722;
	Fri, 24 Dec 1999 18:53:16 GMT
Received: from dynamicsoft.com (1Cust1.tnt1.freehold.nj.da.uu.net [63.17.113.1])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id NAA11589;
	Fri, 24 Dec 1999 13:53:13 -0500 (EST)
Message-ID: <3863C297.8C507262@dynamicsoft.com>
Date: Fri, 24 Dec 1999 13:59:35 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: "Daniel G. Petrie" <dpetrie@pingtel.com>
Cc: Henning Schulzrinne <schulzrinne@cs.columbia.edu>,
        Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <679076A067F2D211A8F70090274481B80C183D@lnn201e.lan.siemens.fr> <38623589.C7182F89@dynamicsoft.com> <386238FF.A82B4FAC@cs.columbia.edu> <38624771.502B7746@dynamicsoft.com> <38629207.B1A823E4@pingtel.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

My concern with doing this is that there is no way we could hope to
categorize the reasons for obtaining an image. You yourself list some
five different purposes. I don't object to a text phrase or something
which can be displayed to the user, but anything with protocol semantics
is likely to make things more restrictive than we want to.

-Jonathan R.

"Daniel G. Petrie" wrote:
> 
> I do not really have any issue with sending the image as a url list or
> file in the body.  However if this is the way we decide, it is very
> important that context is provided for the image.  The image as
> a field provides this (i.e. faces).  The content-disposition or what
> ever the content labeling mechanism used, needs to give the UA
> a hint as to what the image represents.
> 
> Is it a picture of the caller, group phone of those on the conference,
> the conference host, a view out the window, an animated gif
> indicating please hold until a call representative is avialable. A
> context free image makes it difficult for the UA to do the right
> thing.
> 
> For example the UA may already have or know how to
> get an image for a caller.  If it knows that the image in the
> message is of the caller (i.e. face), it would OVERRIDE the
> default image retrieval.  If the image in the invite is not a face
> it might display BOTH the default caller image and the image
> (reference or contained) in the message.
> Cheers,
> Dan
> 
> Jonathan Rosenberg wrote:
> 
> > I kind of like using a multipart type, since this allows the case of
> > directly included and indirectly included (via a URL) to be the same. It
> > also means we can include things for a broader purpose than just
> > "faces".
> >
> > -Jonathan R.
> >
> > Henning Schulzrinne wrote:
> > >
> > > Another alternative is to define a new header, e.g.,
> > >
> > > Face: http://sln.fi.edu/franklin/inventor/images/belllg.jpg
> > >
> > > There's a trade-off in that this mechanism is more in line with its
> > > function (and much simpler than parsing through body parts and URI
> > > lists), but a receiver would have to recognize the header name rather
> > > than just a generic "display this and don't ask what it's for" approach
> > > of an attachment. I suspect for common functionality such as this,
> > > headers will turn out to be a better approach since they can be more
> > > explicit about function.
> > > --
> > > Henning Schulzrinne   http://www.cs.columbia.edu/~hgs
> >
> > --
> > Jonathan D. Rosenberg                       200 Executive Drive
> > Chief Scientist                             Suite 120
> > dynamicsoft                                 West Orange, NJ 07052
> > jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> > http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> > http://www.dynamicsoft.com

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 13:08:38 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA29855
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 13:08:38 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id B8D355301; Sat, 25 Dec 1999 12:59:30 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 119F45300; Sat, 25 Dec 1999 12:59:29 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id E26875301
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 12:59:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 24 01:53:45 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Fri Dec 24 01:52:04 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id NAA09617;
	Fri, 24 Dec 1999 13:05:38 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256851.0025F66E ; Fri, 24 Dec 1999 12:24:39 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Bobby Sardana <sardana@obsoft.com>
Cc: archow@hss.hns.com, sip@lists.research.bell-labs.com
Message-ID: <65256851.0025F627.00@sampark.hss.hns.com>
Date: Fri, 24 Dec 1999 12:24:37 +0530
Subject: Re: JPEG in INVITE
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



Hi,
my answers are inline marked with Arjun>






Just curious. I would like to know why you would allocate a buffer of 64K.
You
can perform dynamic allocations or use collections and the size of the
message
becomes immaterial.

Arjun> Well, if say its a TCP message, I guess I could do incremental
reads,
Arjun> However. if its a UDP message of size X, I cant readn bytes first
with
Arjun> the first recvfrom and expect the next X-n bytes to be passed in the
next
Arjun> recvfrom - the extra data is lost (There is something called
SOCK_SEQPACKET
Arjun> which is not standard). So I dont know how you can solve this
problem with dynamic
Arjun> allocation  - you either read the full packet at one go, or lose the
rest of the data.
Arjun> You can chop off to the correct size, after you do the UDP read, not
before.

> Then the only way for a person who really does not want to allocate 64k
is
> to read from the n/w till he gets a content-length, figure out
> the size and then read the rest of the body. this is kludgy at best.

I would like to know why this is kludgy? To me, it's the only technique
that
makes sense. Unless you know the length, the hint of which is provied by
the
Content-Length header,  there is no other way to approximate the length of
the
body. If I am missing something here, let me know.

Arjun> Well its like this. If content length was something like a TPKT
header
Arjun> which is bound to occur at the start, its a neat way. But now we are
Arjun> saying that this header can occur anywhere in the header space, you
cannot
Arjun> assume its position at a location. So that means, read some chunk of
data (you
Arjun> might even land up reading one 3-4 headers and half another header,
depending on
Arjun> size of headers), now figure out where in the read buffer is
content-length, then
Arjun> read till end of the headers (there can be more headers after
CLength) etc. Of course
Arjun> there are cases when you can possibly read half a contentlength
header (as you are guessing
Arjun> on input header size) and have to  correlate.
Arjun> So basically,if space is a constraint for you,you are left with no
easy way to figure
Arjun> out message length besides groping where in the header space is the
elusive Content length.
Arjun> which, imho, is quite kludgy.


Merry Chrismas and Happy Millenium to all!

Arjun> And the same to you, and the rest of the folks here too !

 --
 Arjun Roychowdhury @ Hughes Software Systems











From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 13:11:11 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA29875
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 13:11:11 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id B41285303; Sat, 25 Dec 1999 13:03:35 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A3F71530C; Sat, 25 Dec 1999 13:03:34 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id EF22D5303
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 13:03:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Thu Dec 23 16:18:32 EST 1999
Received: from mail.pingtel.com ([216.91.1.131]) by dusty; Thu Dec 23 16:16:53 EST 1999
Received: from pingtel.com ([10.1.1.189])
	by mail.pingtel.com (8.9.3/8.9.3) with ESMTP id QAA17832;
	Thu, 23 Dec 1999 16:27:42 -0500
Message-ID: <38629207.B1A823E4@pingtel.com>
Date: Thu, 23 Dec 1999 16:20:07 -0500
From: "Daniel G. Petrie" <dpetrie@pingtel.com>
Organization: Pingtel Corp. http://www.pingtel.com
X-Mailer: Mozilla 4.61 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: Henning Schulzrinne <schulzrinne@cs.columbia.edu>,
        Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <679076A067F2D211A8F70090274481B80C183D@lnn201e.lan.siemens.fr> <38623589.C7182F89@dynamicsoft.com> <386238FF.A82B4FAC@cs.columbia.edu> <38624771.502B7746@dynamicsoft.com>
Content-Type: multipart/mixed;
 boundary="------------527957AE9652FAE7D087543C"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

This is a multi-part message in MIME format.
--------------527957AE9652FAE7D087543C
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I do not really have any issue with sending the image as a url list or
file in the body.  However if this is the way we decide, it is very
important that context is provided for the image.  The image as
a field provides this (i.e. faces).  The content-disposition or what
ever the content labeling mechanism used, needs to give the UA
a hint as to what the image represents.

Is it a picture of the caller, group phone of those on the conference,
the conference host, a view out the window, an animated gif
indicating please hold until a call representative is avialable. A
context free image makes it difficult for the UA to do the right
thing.

For example the UA may already have or know how to
get an image for a caller.  If it knows that the image in the
message is of the caller (i.e. face), it would OVERRIDE the
default image retrieval.  If the image in the invite is not a face
it might display BOTH the default caller image and the image
(reference or contained) in the message.
Cheers,
Dan

Jonathan Rosenberg wrote:

> I kind of like using a multipart type, since this allows the case of
> directly included and indirectly included (via a URL) to be the same. It
> also means we can include things for a broader purpose than just
> "faces".
>
> -Jonathan R.
>
> Henning Schulzrinne wrote:
> >
> > Another alternative is to define a new header, e.g.,
> >
> > Face: http://sln.fi.edu/franklin/inventor/images/belllg.jpg
> >
> > There's a trade-off in that this mechanism is more in line with its
> > function (and much simpler than parsing through body parts and URI
> > lists), but a receiver would have to recognize the header name rather
> > than just a generic "display this and don't ask what it's for" approach
> > of an attachment. I suspect for common functionality such as this,
> > headers will turn out to be a better approach since they can be more
> > explicit about function.
> > --
> > Henning Schulzrinne   http://www.cs.columbia.edu/~hgs
>
> --
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com

--------------527957AE9652FAE7D087543C
Content-Type: text/x-vcard; charset=us-ascii;
 name="dpetrie.vcf"
Content-Description: Card for Daniel G. Petrie
Content-Disposition: attachment;
 filename="dpetrie.vcf"
Content-Transfer-Encoding: 7bit

begin:vcard 
n:Petrie;Daniel
tel;fax:+1 781 938 9650
tel;work:+1 781 938 5306
x-mozilla-html:FALSE
url:www.pingtel.com
org:Pingtel Corp.
version:2.1
email;internet:dpetrie@pingtel.com
title:Software Systems Architect
adr;quoted-printable:;;Suite 2200=0D=0A400 Cummings Park;Woburn;MA;01801;USA
x-mozilla-cpt:;-11472
fn:Daniel Petrie
end:vcard

--------------527957AE9652FAE7D087543C--




From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 13:14:19 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA29907
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 13:14:18 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 6DC1F52E3; Sat, 25 Dec 1999 13:07:55 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 81BE5530C; Sat, 25 Dec 1999 13:07:54 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 87C1652E3
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 13:07:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 24 15:20:28 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 24 15:18:48 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhvaf26212;
	Fri, 24 Dec 1999 20:20:25 GMT
Received: from dynamicsoft.com (1Cust1.tnt1.freehold.nj.da.uu.net [63.17.113.1])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id PAA11644;
	Fri, 24 Dec 1999 15:20:22 -0500 (EST)
Message-ID: <3863D703.77B311CB@dynamicsoft.com>
Date: Fri, 24 Dec 1999 15:26:43 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Jon.Peterson@Level3.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: SIP 3rd-party call creation
References: <6DD3824BDF75D211930E0008C71EC92003CACF4B@l3lsvlmail02.l3.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Jon.Peterson@Level3.com wrote:
> 
> But perhaps 3PSI can be segregated from 3PCC - session initiation -is-
> distinct from call control, third party or first party. I could equally well
> imagine C in the above scenario -not- being involved in subsequent
> signaling. I'm not sure how snugly 3PSI could be integrated into the
> existing SIP paradigm, but I do think the issue is worth exploring to the
> extent that it should be deemed engineerable, without damaging SIP, or no.

If you don't require C needing to be involved in the call from the point
of 3rd party initiation forward, then I think this is something that
generally fits within the SIP model, as its about initiation of
sessions, not about device control or event reporting or other things.
Using OPTIONS with Also certainly does this, although its a bit of a
hack.

> IMHO, the core issue is whether or not 3PSI would violate the end-to-end
> model. Consider by way of analogy that the PSTN has no end-to-end model to
> violate - operators control switches that control handsets, and they can
> arbitrarily construct calls between two users like connecting the dots on a
> switchboard. With SIP, however, you can't just inject a call into the
> 'system', constructing two call legs which will join somewhere in the middle
> - there isn't really any such middle, or 'system', between IP endpoints.

True, you can't just create a call. But, I think it is well within the
scope of the model for one host to ask another to make a call. Of
course, the host which has been asked to make the call should know that
it has been asked, have the right to refuse, and be able to verify the
identity of the entity that has requested the call to be made. 

> 
> Is it really a -session- (something that an INVITE should be sent for) that
> C is initiating when it instructs B to send an INVITE to A? Or is B acting
> as a provisional proxy? 

No, it is not an INVITE, and B is not a proxy. Its a UA. The mechanism
from C to B is just a request protocol that asks it to take some action.

What sort of session description, if any, would be
> associated with C's INVITE to B? Maybe answers to these sorts of questions
> would provide hints as to the compatibility of SIP and 3PSI.

None. There is no session between B and C in this case. B would decide
on the session that will take place between it and A.


> Now, if it were the GameSpy application, C would then launch A, notifying A
> as it is invoked of the proper server B. But we'll place an arbitrary
> restriction on this game architecture and say that C cannot launch A
> because, for example:
> 
> - C is actually a network-remote application that Joe is accessing (so
> rather than launching C, Joe would log into it, or whatnot)
> - B is a limited and contested resource that doesn't want to be flooded by
> hopeful campers, so it collects INVITEs from Cs, queues them, and deals with
> them as resources become available (rather than constantly receiving INVITEs
> from As)
> - B's network has a policy that prevents it from receiving unsolicited port
> 5060 traffic from A, but it can send arbitrarily to A (and presumably B is
> reachable by C)
> - Billing strictures associated with the session require that B initiate
> 
> So instead, C asks B to begin a session with A - perhaps with a SIP INVITE,
> OPTIONS and Also headers, or however we might want 3PSI to work. At this
> point, C's responsibilities could very well end - if B and A are unable to
> connect, Joe will have to go through C again.
> 
> In this case, Joe is interacting with C out-of-band, looking for a session
> to associate with A (this assumes that Joe has given C enough information
> that C can tell B how to reach A), C discovers B and requests that B start a
> session with A. Whew.
> 
> I suppose the question is: does the example I describe violate the SIP
> paradigm, or otherwise lead to undesirable consequences?

In this example, why doesn't C just send the INVITE, but in the SDP,
list B as the session endpoint? 

This is yet another example of a decomposition architecture. What you
want to do is take a network service, in this case the gaming server,
and decompose it into a control component (what you call C) and a
session component (B). This decomposition could be done in the megaco
fashion, with C handling control and signaling, and with B just handing
the gaming session, RTP, and stuff like that. What you are suggesting is
a different decomposition, with C performing control, but signaling
still residing in B. I'd like to understand the needs which dictate this
kind of decomposition rather than the megaco type of decomposition,
especially for this application.

It seems to me, IMHO, a very different service where some user C asks
some other user B to make a call to another user A. The trust
relationships are quite different (C and B are not run by the same
administrative authority), and the nature of control is much different
(its not reasonable to expect C to ask B to hang up the call, and for B
to do so if it doesn't want to). This kind of "control", which is more
like a "request" is within the purview of SIP, I think.

-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 13:16:56 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA29925
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 13:16:56 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9E868530F; Sat, 25 Dec 1999 13:08:05 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id A38575311; Sat, 25 Dec 1999 13:08:04 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 1E821530F
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 13:07:08 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 24 16:27:02 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 24 16:25:22 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhvaj08919;
	Fri, 24 Dec 1999 21:26:59 GMT
Received: from dynamicsoft.com (1Cust1.tnt1.freehold.nj.da.uu.net [63.17.113.1])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id QAA11661;
	Fri, 24 Dec 1999 16:26:57 -0500 (EST)
Message-ID: <3863E69D.3BC6922@dynamicsoft.com>
Date: Fri, 24 Dec 1999 16:33:17 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: James Yu <james.yu@neustar.com>
Cc: John Mainwaring <crm312a@nortelnetworks.com>,
        Mark Foster <mark.foster@neustar.com>,
        iptel@lists.research.bell-labs.com, sip@lists.research.bell-labs.com
Subject: Re: TRIP
References: <ED88182BFF78D211A4D800A0C9E9435C3BE93C@dc02.npac.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



James Yu wrote:
> 
> For overlap signaling, a GW or LS that receives a call with partial address
> information may not know that the address info. is complete.  If it launches
> a query (DNS or NPDB), the entity that has the "number portability" info.
> won't be able to find the info. because the address info. is incomplete.  It
> seems that either this LS or GW may wait a little while to see whether there
> are subsequent address info. before launching the query, or it can launch a
> query (DNS or NPDB-like), receives an error (hope that it is specific such
> as incomplete address instead of something ambiguous), and then wait for
> additional address info. before timing out.

I think Dean had sent out some pseudo-code some time back on how trip
and enum and overlap interact, and this was more or less what the code
suggested. I believe he thought it was a bad thing, and so do I.

Overlap dialing seems fundamentally in conflict with LNP or enum queries
at the local outbound proxy.

To do LNP, the local outbound proxy needs to have the entire string of
digits before it can perform the query. But, overlap seems to imply that
it won't ever know the entire string of digits, as it doesn't have
knowledge of those numbering plans. It just forwards the request to some
other proxy or gateway that does.

Sooo, it would seem that a proxy should only use enum or LNP for numbers
it knows to be complete. This means that for overlap dialing, the LNP
query will happen close to the destination (possibly even in the PSTN),
not unlike the N-1 case we've been discussing. However, for en-bloc, it
can happen anywhere. This does seem to imply that a proxy needs to know
whether the number in the request URI of an incoming request is en-bloc
or overlap. It could make this determination if it knew the structure of
the numbering plans, but thats unlikely. Might we need a parameter
somewhere (ugh)? I really hate to crowd SIP with things to support old
legacy technologies like overlap, so if we can avoid this, I'd be very
happy.



-Jonathan R.
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 13:20:32 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id NAA29949
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 13:20:32 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 0902052D6; Sat, 25 Dec 1999 13:17:59 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6F05652AB; Sat, 25 Dec 1999 13:17:58 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 5C6DC52E8
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 13:17:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Fri Dec 24 10:21:06 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Fri Dec 24 10:19:27 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhuzl26368;
	Fri, 24 Dec 1999 15:21:04 GMT
Received: from dynamicsoft.com (1Cust1.tnt1.freehold.nj.da.uu.net [63.17.113.1])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id KAA11552;
	Fri, 24 Dec 1999 10:21:01 -0500 (EST)
Message-ID: <386390DB.11CB477@dynamicsoft.com>
Date: Fri, 24 Dec 1999 10:27:23 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: General Compression { Was Re: JPEG in INVITE}
References: <65256851.00203DC5.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

I would advise against compression of this form at the SIP layer. The
headers must be readable by proxies.

You can compress the body itself. SIP supports the Content-Encoding
headers which allow you to apply transformations to the body, like gzip.
Accept-Encoding allows these encodings to be negotiated between UAC and
UAS.

Another approach is to compress the entire SIP message at the IP layer,
on a hop by hop basis. Check out rfc2393 which specifies a payload
compression mechanism for IP.

-Jonathan R.

archow@hss.hns.com wrote:
> 
> Hi,
> one more question.
> Is there a possible way in which an entire SIP Message can be compressed in
> a standard way ?
> something like say,
> COMPRESSED SIP/2.0 ;algo=gzip
> <compressed msg>
> 
> Where  the compressed  message is the entire sip message (not only the body
> - which can be done by application/gzip)
> The receiver can then extract the compressed message, gunzip it, and get
> back the actual SIP message and then push it
> to decode ?
> 
> But on the other hand, I guess this takes away the advantage of a text
> based protocol but also provides the user a new
> method which can be used to send compact messages _if_ he so wants.
> 
> Regds
> Arjun
> --
> Arjun Roychowdhury @ Hughes Software Systems
> 
> Jonathan Rosenberg <jdrosen@dynamicsoft.com> on 12/24/99 04:09:26 AM
> 
> To:   archow
> cc:   Taji Rachid <Rachid.Taji@srit.siemens.fr>, "'Alvir Alisic (ECS)'"
>       <Alvir.Alisic@ecs.ericsson.se>, sip@lists.research.bell-labs.com
> 
> Subject:  Re: JPEG in INVITE
> 
> archow@hss.hns.com wrote:
> >
> > Hi,
> >  I have one question:
> > This is not protocol related. but  I guess its more implementation
> related,
> > and is relevant for UDP only:
> > As it is, when a SIP message is received, the reciever does not know the
> > size of the received message and hence I guess must allocate some fixed
> > space for it before doing the n/w read as allocating 64k for a message
> may
> > not always be desirable.
> >
> > However, a typical _single_ sip message takes approx < 500 bytes.
> However,
> > if we allow JPEGS/(bitmaps - oops)  inside, the size of the message body
> > can widely fluctuate.
> >
> > Then the only way for a person who really does not want to allocate 64k
> is
> > to read from the n/w till he gets a content-length, figure out
> > the size and then read the rest of the body. this is kludgy at best.
> 
> SIP has a response code that is "message body too large". If you wish to
> impose restrictions in your implementation, you can just read enough
> bytes to get the header. This will tell you the size of the body. If
> thats too much for your tastes, reject the message.
> 
> I agree that since SIP is not meant as a transfer protocol, including
> lots of data in UDP can be bad for small implementations. There is
> another issue, which is UDP message fragmentation at the IP layer.
> Fragmentation causes an amplication effect in the loss probabilities, so
> that a small loss probability can result in significant packet loss
> (this is only true for independent packet losses; its not as bad for
> highly correlated packet loss). Using lots of data in UDP will cause the
> messages to be fragmented.
> 
> -Jonathan R.
> 
> --
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sat Dec 25 19:37:57 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id TAA02014
	for <sip-archive@odin.ietf.org>; Sat, 25 Dec 1999 19:37:56 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 1D7D952AB; Sat, 25 Dec 1999 19:35:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 8BADD52DD; Sat, 25 Dec 1999 19:35:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id EC13652AB
	for <sip@lists.research.bell-labs.com>; Sat, 25 Dec 1999 19:35:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sat Dec 25 19:33:32 EST 1999
Received: from www.obsoft.com ([209.128.67.121]) by dusty; Sat Dec 25 19:31:49 EST 1999
Received: from obsoft.com (sardana@localhost [127.0.0.1]) by www.obsoft.com (8.6.12/8.6.9) with ESMTP id SAA00753; Sat, 25 Dec 1999 18:27:08 -0600
Message-ID: <386560DB.D1F07782@obsoft.com>
Date: Sat, 25 Dec 1999 18:27:07 -0600
From: Bobby Sardana <sardana@obsoft.com>
Organization: ObjectSoftware, Inc.
X-Mailer: Mozilla 4.04 [en] (X11; I; Linux 2.0.33 i586)
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <65256851.0025F627.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Greetings:

For UDP, the algorithm I have in mind is as follows:

a. Allocate  sizes that are MTU based.
b. Perform "recvfrom" based on MTU sizes only. MTU, normally, for internet
backbone is 1500.
c. If sequencing is performed, then perform other reads.

Obviously, sequencing would require co-ordination between server and the
client. So essentially, the client and the server know what is the sequence
and how many packets (in multiples of MTU) to read and transport.

Bobby Sardana.
sardana@obsoft.com

archow@hss.hns.com wrote:

> Hi,
> my answers are inline marked with Arjun>
>
> Just curious. I would like to know why you would allocate a buffer of 64K.
> You
> can perform dynamic allocations or use collections and the size of the
> message
> becomes immaterial.
>
> Arjun> Well, if say its a TCP message, I guess I could do incremental
> reads,
> Arjun> However. if its a UDP message of size X, I cant readn bytes first
> with
> Arjun> the first recvfrom and expect the next X-n bytes to be passed in the
> next
> Arjun> recvfrom - the extra data is lost (There is something called
> SOCK_SEQPACKET
> Arjun> which is not standard). So I dont know how you can solve this
> problem with dynamic
> Arjun> allocation  - you either read the full packet at one go, or lose the
> rest of the data.
> Arjun> You can chop off to the correct size, after you do the UDP read, not
> before.
>
> > Then the only way for a person who really does not want to allocate 64k
> is
> > to read from the n/w till he gets a content-length, figure out
> > the size and then read the rest of the body. this is kludgy at best.
>
> I would like to know why this is kludgy? To me, it's the only technique
> that
> makes sense. Unless you know the length, the hint of which is provied by
> the
> Content-Length header,  there is no other way to approximate the length of
> the
> body. If I am missing something here, let me know.
>
> Arjun> Well its like this. If content length was something like a TPKT
> header
> Arjun> which is bound to occur at the start, its a neat way. But now we are
> Arjun> saying that this header can occur anywhere in the header space, you
> cannot
> Arjun> assume its position at a location. So that means, read some chunk of
> data (you
> Arjun> might even land up reading one 3-4 headers and half another header,
> depending on
> Arjun> size of headers), now figure out where in the read buffer is
> content-length, then
> Arjun> read till end of the headers (there can be more headers after
> CLength) etc. Of course
> Arjun> there are cases when you can possibly read half a contentlength
> header (as you are guessing
> Arjun> on input header size) and have to  correlate.
> Arjun> So basically,if space is a constraint for you,you are left with no
> easy way to figure
> Arjun> out message length besides groping where in the header space is the
> elusive Content length.
> Arjun> which, imho, is quite kludgy.
>
> Merry Chrismas and Happy Millenium to all!
>
> Arjun> And the same to you, and the rest of the folks here too !
>
>  --
>  Arjun Roychowdhury @ Hughes Software Systems






From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec 26 00:41:56 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA05449
	for <sip-archive@odin.ietf.org>; Sun, 26 Dec 1999 00:41:56 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 0305B52B6; Sun, 26 Dec 1999 00:39:18 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 661FF52E0; Sun, 26 Dec 1999 00:39:17 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id AD45152B6
	for <sip@lists.research.bell-labs.com>; Sun, 26 Dec 1999 00:39:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sun Dec 26 00:38:48 EST 1999
Received: from scott.metatel.office ([151.203.17.31]) by dusty; Sun Dec 26 00:37:06 EST 1999
Received: from localhost (scott.petrack@localhost)
	by scott.metatel.office (8.9.3/8.9.3) with ESMTP id TAA02823;
	Sat, 25 Dec 1999 19:40:30 -0500
X-Authentication-Warning: scott.metatel.office: scott.petrack owned process doing -bs
Date: Sat, 25 Dec 1999 19:40:29 -0500 (EST)
From: Scott Petrack <scott.petrack@metatel.com>
X-Sender: scott.petrack@scott.metatel.office
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: Henning Schulzrinne <schulzrinne@cs.columbia.edu>,
        Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
In-Reply-To: <38624771.502B7746@dynamicsoft.com>
Message-ID: <Pine.LNX.4.10.9912251930590.2481-100000@scott.metatel.office>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



1. One important reason not to use an indirection (i.e. including only the
URL of the image and not the image) is call set-up time. An indirection
requires at least one extra round trip time to get the image. Of course,
this is a standard trade-off, and in any case,
including a huge bitmap is not good for call set-up time either. But
sending along a relevant thumbnail is much less harmful to call set-up 
time than requiring the extra round-trips.

2. Perhaps this is what was meant by using the Content-Disposition header,
but I would suggest that there is lots of room in the tags of Content-Type
and Content-Disposition to signal a rich set of contexts and uses for the
image. Even just something like:

Content-Disposition: attachment; filename="caller id.tif"

would already be helpful. In any case, I doubt that we are ready to
standardize a set of such names yet.

On Thu, 23 Dec 1999, Jonathan Rosenberg wrote:

> I kind of like using a multipart type, since this allows the case of
> directly included and indirectly included (via a URL) to be the same. It
> also means we can include things for a broader purpose than just
> "faces".
> 
> -Jonathan R.
> 
> Henning Schulzrinne wrote:
> > 
> > Another alternative is to define a new header, e.g.,
> > 
> > Face: http://sln.fi.edu/franklin/inventor/images/belllg.jpg
> > 
> > There's a trade-off in that this mechanism is more in line with its
> > function (and much simpler than parsing through body parts and URI
> > lists), but a receiver would have to recognize the header name rather
> > than just a generic "display this and don't ask what it's for" approach
> > of an attachment. I suspect for common functionality such as this,
> > headers will turn out to be a better approach since they can be more
> > explicit about function.
> > --
> > Henning Schulzrinne   http://www.cs.columbia.edu/~hgs
> 
> -- 
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120 
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com
> 
> 




From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec 26 11:00:55 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA08353
	for <sip-archive@odin.ietf.org>; Sun, 26 Dec 1999 11:00:55 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 8AF7252DD; Sun, 26 Dec 1999 10:57:04 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id E611352E0; Sun, 26 Dec 1999 10:57:03 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 4B19D52DE
	for <sip@lists.research.bell-labs.com>; Sun, 26 Dec 1999 06:01:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Sun Dec 26 06:00:34 EST 1999
Received: from mailout05.sul.t-online.de ([194.25.134.82]) by dusty; Sun Dec 26 05:58:52 EST 1999
Received: from fwd00.sul.t-online.de 
	by mailout05.sul.t-online.de with smtp 
	id 122BOy-0001bS-03; Sun, 26 Dec 1999 11:59:52 +0100
Received: from cs.columbia.edu (0223226329-0001@[62.158.243.255]) by fwd00.sul.t-online.de
	with esmtp id 122BOx-0P5qiWC; Sun, 26 Dec 1999 11:59:51 +0100
Message-ID: <3865F51A.5E92F800@cs.columbia.edu>
Date: Sun, 26 Dec 1999 11:59:39 +0100
From: Schulz-Rinne@t-online.de (Henning Schulzrinne)
Organization: Columbia University
X-Mailer: Mozilla 4.03 [de] (Win95; I)
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: archow@hss.hns.com, Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: General Compression { Was Re: JPEG in INVITE}
References: <65256851.00203DC5.00@sampark.hss.hns.com> <386390DB.11CB477@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Sender: 0223226329-0001@t-dialin.net
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

To amplify: compression at the application layer may simply interfere
with compression in a lower layer for those links where it matters.
Thus, there may be no net gain at all, besides interfering with proxies,
transparent proxies and the like. (As far as I know, most PPP
implementations compress when possible, with methods tuned for text.
Obviously, this argument doesn't hold for lossy compression candidates
like audio or video.)

Also, application-layer compression for small UDP packets is probably
only modestly effective overall, due to the packet header overhead.



From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec 26 11:03:37 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA08419
	for <sip-archive@odin.ietf.org>; Sun, 26 Dec 1999 11:03:37 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id BEE6552E1; Sun, 26 Dec 1999 10:57:39 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 0F51E52E5; Sun, 26 Dec 1999 10:57:38 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 50BB852DE
	for <sip@lists.research.bell-labs.com>; Sun, 26 Dec 1999 06:09:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sun Dec 26 06:08:04 EST 1999
Received: from mailout00.sul.t-online.de ([194.25.134.16]) by dusty; Sun Dec 26 06:06:22 EST 1999
Received: from fwd00.sul.t-online.de 
	by mailout00.sul.t-online.de with smtp 
	id 122BWE-00056s-02; Sun, 26 Dec 1999 12:07:22 +0100
Received: from cs.columbia.edu (0223226329-0001@[62.158.243.255]) by fwd00.sul.t-online.de
	with esmtp id 122BWD-0bbZgWC; Sun, 26 Dec 1999 12:07:21 +0100
Message-ID: <3865F6DD.B17812D6@cs.columbia.edu>
Date: Sun, 26 Dec 1999 12:07:09 +0100
From: Schulz-Rinne@t-online.de (Henning Schulzrinne)
Organization: Columbia University
X-Mailer: Mozilla 4.03 [de] (Win95; I)
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: "Daniel G. Petrie" <dpetrie@pingtel.com>,
        Henning Schulzrinne <schulzrinne@cs.columbia.edu>,
        Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <679076A067F2D211A8F70090274481B80C183D@lnn201e.lan.siemens.fr> <38623589.C7182F89@dynamicsoft.com> <386238FF.A82B4FAC@cs.columbia.edu> <38624771.502B7746@dynamicsoft.com> <38629207.B1A823E4@pingtel.com> <3863C297.8C507262@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Sender: 0223226329-0001@t-dialin.net
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

There are clearly some common cases, such as visual caller id. In those
cases, I think that the URI-in-body method adds anything but ambiguity.
The callee application may already have a database of pictures. Unless
the purpose of the image is clearly indicated, it may end up rendering
both in two windows. If we go down that route, we may as well get rid of
headers altogether and just wrap all but To, From and Call-ID in body
parts. If we standardize functional declarations ("this body part shows
the caller's likeness"), we might as well standardize a header. As was
pointed out, if we really want to carry the JPEG along (say, the caller
doesn't have an externally accessible web page), then the cid: method
seems like a reasonable approach.

Thus, in general, headers seem to be appropriate where clear functional
labeling is useful and data volume is modest (and where the content is
for the whole session), while body parts can serve more as a "just
render this and let the human figure out what it means" methods.



From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec 26 11:06:28 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id LAA08442
	for <sip-archive@odin.ietf.org>; Sun, 26 Dec 1999 11:06:27 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 025F052E0; Sun, 26 Dec 1999 10:58:16 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id F2BBC52E4; Sun, 26 Dec 1999 10:57:51 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id B3FFC52DE
	for <sip@lists.research.bell-labs.com>; Sun, 26 Dec 1999 06:17:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sun Dec 26 06:16:40 EST 1999
Received: from mailout05.sul.t-online.de ([194.25.134.82]) by dusty; Sun Dec 26 06:14:59 EST 1999
Received: from fwd01.sul.t-online.de 
	by mailout05.sul.t-online.de with smtp 
	id 122Bf6-0004wO-01; Sun, 26 Dec 1999 12:16:32 +0100
Received: from cs.columbia.edu (0223226329-0001@[62.158.243.255]) by fwd01.sul.t-online.de
	with esmtp id 122Bew-24LiKWC; Sun, 26 Dec 1999 12:16:22 +0100
Message-ID: <3865F8FB.7A7DE31E@cs.columbia.edu>
Date: Sun, 26 Dec 1999 12:16:11 +0100
From: Schulz-Rinne@t-online.de (Henning Schulzrinne)
Organization: Columbia University
X-Mailer: Mozilla 4.03 [de] (Win95; I)
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: Dean Willis <dean.willis@wcom.com>, rick@fdd.com,
        sip@lists.research.bell-labs.com
Subject: Re: proxy-based dialing plan problem
References: <000301bf4b7d$bc2faee0$d19623a6@directlink.net> <3863DCF5.67B59172@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Sender: 0223226329-0001@t-dialin.net
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

In the spirit of (semi)intelligent end system, having a configuration
option for an end system (possibly conveyed via DHCP or some REGISTER
response) as a "rewrite rule" such as 

/([1-8][0-9]+)/&-34@wcom.com/
/9([0-9]+)/tel:&/

may allow building generic software that can be configured for local
needs.

This is similar to what sendmail does. It's not quite an MGCP dialing
plan, since some digits are not passed to the proxy. I'm assuming here
that VPNs are regular expressions. This seems likely, given the necessar
prefix properties.



From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec 26 12:09:44 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA08743
	for <sip-archive@odin.ietf.org>; Sun, 26 Dec 1999 12:09:43 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 0884452DE; Sun, 26 Dec 1999 12:07:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 6868252E6; Sun, 26 Dec 1999 12:07:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id CD67F52DE
	for <sip@lists.research.bell-labs.com>; Sun, 26 Dec 1999 12:07:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sun Dec 26 12:07:01 EST 1999
Received: from scott.metatel.office ([24.128.100.134]) by dusty; Sun Dec 26 12:05:20 EST 1999
Received: from localhost (scott.petrack@localhost)
	by scott.metatel.office (8.9.3/8.9.3) with ESMTP id HAA01149;
	Sun, 26 Dec 1999 07:08:50 -0500
X-Authentication-Warning: scott.metatel.office: scott.petrack owned process doing -bs
Date: Sun, 26 Dec 1999 07:08:49 -0500 (EST)
From: Scott Petrack <scott.petrack@metatel.com>
X-Sender: scott.petrack@scott.metatel.office
To: Henning Schulzrinne <Schulz-Rinne@t-online.de>
Cc: Jonathan Rosenberg <jdrosen@dynamicsoft.com>,
        "Daniel G. Petrie" <dpetrie@pingtel.com>,
        Henning Schulzrinne <schulzrinne@cs.columbia.edu>,
        Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
In-Reply-To: <3865F6DD.B17812D6@cs.columbia.edu>
Message-ID: <Pine.LNX.4.10.9912260703590.1082-100000@scott.metatel.office>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Henning makes a good point. All I ask is that it be *possible* to include
the actual content within the message, for those cases where it makes
sense. In PINT, we wrestled with this problem, and allowed using the
standard MIME content-id to enable having something in the INVITE refer to
an included body-part. Thus, nothing new needs to be added. I'll bet one
could even use the multipart/alternative stuff to enable *both* pointing
to the data via a URL and including it within the message, to signal that
these are two different ways to get the same information.

Even when both sides have access to the same database of pictures (say
within a company-wide directory), it is still a lot faster to set up the
call by including the picture within the INVITE. Sometimes it makes sense
to do this, sometimes not. Since MIME signalling is already rich enough to
allow both, let's not dis-allow one by design.

Scott
 

On Sun, 26 Dec 1999, Henning Schulzrinne wrote:

> There are clearly some common cases, such as visual caller id. In those
> cases, I think that the URI-in-body method adds anything but ambiguity.
> The callee application may already have a database of pictures. Unless
> the purpose of the image is clearly indicated, it may end up rendering
> both in two windows. If we go down that route, we may as well get rid of
> headers altogether and just wrap all but To, From and Call-ID in body
> parts. If we standardize functional declarations ("this body part shows
> the caller's likeness"), we might as well standardize a header. As was
> pointed out, if we really want to carry the JPEG along (say, the caller
> doesn't have an externally accessible web page), then the cid: method
> seems like a reasonable approach.
> 
> Thus, in general, headers seem to be appropriate where clear functional
> labeling is useful and data volume is modest (and where the content is
> for the whole session), while body parts can serve more as a "just
> render this and let the human figure out what it means" methods.
> 
> 




From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec 26 20:53:52 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id UAA11028
	for <sip-archive@odin.ietf.org>; Sun, 26 Dec 1999 20:53:52 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D28C952E5; Sun, 26 Dec 1999 20:51:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4123C52E8; Sun, 26 Dec 1999 20:51:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id A2BDA52E5
	for <sip@lists.research.bell-labs.com>; Sun, 26 Dec 1999 20:51:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Sun Dec 26 20:50:17 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Sun Dec 26 20:48:35 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhvil08869;
	Mon, 27 Dec 1999 01:50:15 GMT
Received: from dynamicsoft.com (1Cust82.tnt1.freehold.nj.da.uu.net [63.17.113.82])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id UAA12641;
	Sun, 26 Dec 1999 20:50:12 -0500 (EST)
Message-ID: <3866C754.7A94606D@dynamicsoft.com>
Date: Sun, 26 Dec 1999 20:56:36 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Scott Petrack <scott.petrack@metatel.com>
Cc: Henning Schulzrinne <Schulz-Rinne@t-online.de>,
        "Daniel G. Petrie" <dpetrie@pingtel.com>,
        Henning Schulzrinne <schulzrinne@cs.columbia.edu>,
        Taji Rachid <Rachid.Taji@srit.siemens.fr>,
        "'Alvir Alisic (ECS)'" <Alvir.Alisic@ecs.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <Pine.LNX.4.10.9912260703590.1082-100000@scott.metatel.office>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Scott Petrack wrote:
> 
> Henning makes a good point. All I ask is that it be *possible* to include
> the actual content within the message, for those cases where it makes
> sense. In PINT, we wrestled with this problem, and allowed using the
> standard MIME content-id to enable having something in the INVITE refer to
> an included body-part. Thus, nothing new needs to be added. I'll bet one
> could even use the multipart/alternative stuff to enable *both* pointing
> to the data via a URL and including it within the message, to signal that
> these are two different ways to get the same information.

I wasn't arguing that it shouldn't be possible, but that I would put a
statement like "using URIs instead of the content itself is
RECOMMENDED". 

The issue is, if the content is referenced by indirection, is it better
to be in the body or in a header. Henning is arguing in favor of a
header. I agree with him that this is simpler. Both he and Dan are also
arguing that we need a way to identify the purpose of the content.
Providing such data also argues for it being a header. My concern,
though, is that there are so many uses for displaying of content, we
have no hope of enumerating them all. I suppose we could enumerate a few
and leave others to future standardization. Also, using a URI list in
the body is something thats doable now (since we support MIME already),
whereas a new header is yet-another-extension that I'd rather avoid. The
notion of a generic "body contains content to display", with the body
either in-line or referenced via a URI list, is appealing to me because
of its generality. Yes, we could have both, but then this seems to make
things even more complicated for a designer that now has to choose
whether to use the header or the indirect content in the body.

Am I the only one who prefers the indirect references in the body
approach?

-Jonathan R.

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Sun Dec 26 22:01:45 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id WAA12273
	for <sip-archive@odin.ietf.org>; Sun, 26 Dec 1999 22:01:45 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id D05FC52E6; Sun, 26 Dec 1999 21:59:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 43FF552E9; Sun, 26 Dec 1999 21:59:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 56ED152E6
	for <sip@lists.research.bell-labs.com>; Sun, 26 Dec 1999 21:59:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Sun Dec 26 21:57:49 EST 1999
Received: from gwu.ericy.com ([208.196.3.162]) by dusty; Sun Dec 26 21:56:07 EST 1999
Received: from mr4.exu.ericsson.se (mr4u.ericy.com [208.238.116.99])
	by gwu.ericy.com (8.9.3/8.9.3) with ESMTP id UAA28300;
	Sun, 26 Dec 1999 20:57:46 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr4.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id UAA13381;
	Sun, 26 Dec 1999 20:57:46 -0600 (CST)
Received: from b04a45.exu.ericsson.se (b04a45 [138.85.60.145]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id UAA00471; Sun, 26 Dec 1999 20:57:45 -0600 (CST)
From: Sean Olson <eussean@exu.ericsson.se>
Received: (from eussean@localhost)
	by b04a45.exu.ericsson.se (8.9.1/8.9.1) id UAA14367;
	Sun, 26 Dec 1999 20:57:45 -0600 (CST)
Message-Id: <199912270257.UAA14367@b04a45.exu.ericsson.se>
Subject: Re: JPEG in INVITE
To: scott.petrack@metatel.com (Scott Petrack)
Date: Sun, 26 Dec 1999 20:57:44 -0600 (CST)
Cc: jdrosen@dynamicsoft.com, schulzrinne@cs.columbia.edu,
        Rachid.Taji@srit.siemens.fr, Alvir.Alisic@ecs.ericsson.se,
        sip@lists.research.bell-labs.com
In-Reply-To: <Pine.LNX.4.10.9912251930590.2481-100000@scott.metatel.office> from "Scott Petrack" at Dec 25, 99 07:40:29 pm
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

> 1. One important reason not to use an indirection (i.e. including only the
> URL of the image and not the image) is call set-up time. An indirection
> requires at least one extra round trip time to get the image. Of course,
> this is a standard trade-off, and in any case,
> including a huge bitmap is not good for call set-up time either. But
> sending along a relevant thumbnail is much less harmful to call set-up 
> time than requiring the extra round-trips.

I would hope that you would do this in parallel with the call setup. I
can't think of a reason not to proceed with the call while fetching the
image in parallel.

-- 
-----------------------------------------------------------------
Sean Olson            E-mail: sean.olson@ericsson.com
Ericsson Inc.         Voice: (972) 583-5472 
                      FAX: (972) 669-0154 



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 09:32:13 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id JAA01755
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 09:32:12 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 4E9DB52D6; Mon, 27 Dec 1999 09:29:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id AE8E152E3; Mon, 27 Dec 1999 09:29:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 18DA852D6
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 09:29:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 27 09:27:37 EST 1999
Received: from scott.metatel.office ([24.128.100.134]) by dusty; Mon Dec 27 09:25:56 EST 1999
Received: from localhost (scott.petrack@localhost)
	by scott.metatel.office (8.9.3/8.9.3) with ESMTP id EAA01102;
	Mon, 27 Dec 1999 04:29:24 -0500
X-Authentication-Warning: scott.metatel.office: scott.petrack owned process doing -bs
Date: Mon, 27 Dec 1999 04:29:22 -0500 (EST)
From: Scott Petrack <scott.petrack@metatel.com>
X-Sender: scott.petrack@scott.metatel.office
To: Sean Olson <eussean@exu.ericsson.se>
Cc: jdrosen@dynamicsoft.com, schulzrinne@cs.columbia.edu,
        Rachid.Taji@srit.siemens.fr, Alvir.Alisic@ecs.ericsson.se,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
In-Reply-To: <199912270257.UAA14367@b04a45.exu.ericsson.se>
Message-ID: <Pine.LNX.4.10.9912270419310.910-100000@scott.metatel.office>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

The callee needs to see the pic before s/he accepts the call.
Why is "caller ID" a useful feature? Because it gives the callee a way
to screen the call. It would be silly to give me a caller ID string in
parallel with accepting the call. 

In the future, let's imagine a little camera in a public phone
booth, so that the caller can call collect and the callee gets a thumbnail
sketch of the caller, to decide if s/he wants to accept the call. This
will reduce the pain of setting up a collect call immensely. (And there
are variants which are useful even if you don't believe that there will be
public phone booths in the future....)

To me, this is an example of a truly useful service which SIP enables. 
So yes, I need to see the picture in order to know if I want to take the
call.

Scott

On Sun, 26 Dec 1999, Sean Olson wrote:

> > 1. One important reason not to use an indirection (i.e. including only the
> > URL of the image and not the image) is call set-up time. An indirection
> > requires at least one extra round trip time to get the image. Of course,
> > this is a standard trade-off, and in any case,
> > including a huge bitmap is not good for call set-up time either. But
> > sending along a relevant thumbnail is much less harmful to call set-up 
> > time than requiring the extra round-trips.
> 
> I would hope that you would do this in parallel with the call setup. I
> can't think of a reason not to proceed with the call while fetching the
> image in parallel.
> 
> -- 
> -----------------------------------------------------------------
> Sean Olson            E-mail: sean.olson@ericsson.com
> Ericsson Inc.         Voice: (972) 583-5472 
>                       FAX: (972) 669-0154 
> 
> 




From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 10:18:30 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA02679
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 10:18:30 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 7EAEF52DB; Mon, 27 Dec 1999 10:15:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id F387D52D5; Mon, 27 Dec 1999 10:15:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 3897252D5
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 10:15:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 27 10:13:29 EST 1999
Received: from scott.metatel.office ([24.128.100.134]) by dusty; Mon Dec 27 10:11:48 EST 1999
Received: from localhost (scott.petrack@localhost)
	by scott.metatel.office (8.9.3/8.9.3) with ESMTP id FAA01123;
	Mon, 27 Dec 1999 05:12:46 -0500
X-Authentication-Warning: scott.metatel.office: scott.petrack owned process doing -bs
Date: Mon, 27 Dec 1999 05:12:46 -0500 (EST)
From: Scott Petrack <scott.petrack@metatel.com>
X-Sender: scott.petrack@scott.metatel.office
To: Henning Schulzrinne <Schulz-Rinne@t-online.de>
Cc: Sean Olson <eussean@exu.ericsson.se>, jdrosen@dynamicsoft.com,
        schulzrinne@cs.columbia.edu, Rachid.Taji@srit.siemens.fr,
        Alvir.Alisic@ecs.ericsson.se, sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
In-Reply-To: <386720B6.AC858306@cs.columbia.edu>
Message-ID: <Pine.LNX.4.10.9912270430450.910-100000@scott.metatel.office>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk


My point was that even if we decide we need to signal the purpose
explicitly within a header, I believe that we don't have to add any new
extension at all. This is because MIME headers like Content-Type and 
Content-Disposition already allow semicolon-separated tags. Looking
through my own mail, I see lines like:

Content-Type: application/octet-stream; name="Board Presentation.ppt";

Could someone out there tell us where the complete list of such tags is to
be found? I'll bet that there are enough out there that we don't need to
invent anything new at all. And even if there are not, I would sooner
define a new tag to be used in Content-Type, Content-Disposition, etc. 
headers, than invent an entirely new header extension. 

This seems to me to give the best of both worlds: you use a new body part
to contain the information (be it content or a pointer to the content),
and you use tags in the headers that deal with that content to describe
various attributes and features of them.

This also keeps features orthogonal, which I think is very important:
since one CAN put a body of Content-Type: application/URI, and this can be
made to work for our purpose, we shouldn't invent a different way to do
the same thing. Especially if we can use tags in the existing headers to
signal the stuff we need. Implementations that don't understand these tags
already have to throw them on the floor, so it adds no backward
compatibility problems.

Are there any experts who can tell us what tags are available?

Scott




On Mon, 27 Dec 1999, Henning Schulzrinne wrote:

> In general, even though it does add "yet another extension",
> explicitness of purpose is good, since it allows the receiver to deal
> with things appropriately. In the photo case, this may mean updating an
> internal picture database.
> 
> This is a generic problem. Clearly, we could put things like priority or
> subject or other call information in a web page, but it would be
> unstructured information.
> 
> Another issue is that the display mechanism only works with a single
> attachment, unless you want to have windows pop up all over the screen.
> If we want to provide additional call-identifying information beyond a
> single item, we clearly need better labeling and "first class" protocol
> status rather than just a collection of attachments.
> 
> Having a generic display capability for web pages (which includes JPEG
> pictures as a special case) is a good thing, too. So I don't see this as
> an either-or issue.
> 
> I don't think the delay is much of an issue for this application since
> the callee should be able to accept the call even before the picture
> rendition is complete (e.g., if she recognizes the caller by name). Even
> at the typical modem download speed of around 3 kB, a typical picture
> would take about 3 seconds to download, probably faster than most of us
> either run to the phone or even turn to the phone device. If the callee
> is a fashion magazine or the Miss Universe contest office, it might
> design its phones to only ring once the image has been received...
> 
> Henning
> 




From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 10:51:43 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA03222
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 10:51:42 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9C3E552BB; Mon, 27 Dec 1999 10:49:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 07C5B52DC; Mon, 27 Dec 1999 10:49:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A769E52BB
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 10:49:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 27 10:47:27 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Mon Dec 27 10:45:45 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhvkp16426;
	Mon, 27 Dec 1999 15:47:13 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id KAA00889;
	Mon, 27 Dec 1999 10:47:08 -0500 (EST)
Message-ID: <38678B8B.E22DA30B@dynamicsoft.com>
Date: Mon, 27 Dec 1999 10:53:47 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Scott Petrack <scott.petrack@metatel.com>
Cc: Henning Schulzrinne <Schulz-Rinne@t-online.de>,
        Sean Olson <eussean@exu.ericsson.se>, schulzrinne@cs.columbia.edu,
        Rachid.Taji@srit.siemens.fr, Alvir.Alisic@ecs.ericsson.se,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <Pine.LNX.4.10.9912270430450.910-100000@scott.metatel.office>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

There are two issues we have been discussing:

1. What is the right way to access content indirectly? A new header in
SIP, or a body with application/URI-list?

2. How do you convey the reason for the content?

These are really separate problems, although the solution for (2)
depends a lot on the solution for (1).

Your suggestion below is to use tags in Content-Type. That solves the
second problem given the solution to the first is to use a body with
application/URI-list.

Others have suggested that indirect content be accessed directly with a
SIP header, such as:

INVITE sip:scott.petrack@metatel.com SIP/2.0
Display: http://www.dynamicsoft.com;purpose=web,
http://www.dynamicsoft.com/pictures/jdrosen;purpose=face

In this case, (2) is solved with some new paramters to this new header.

-Jonathan R.

Scott Petrack wrote:
> 
> My point was that even if we decide we need to signal the purpose
> explicitly within a header, I believe that we don't have to add any new
> extension at all. This is because MIME headers like Content-Type and
> Content-Disposition already allow semicolon-separated tags. Looking
> through my own mail, I see lines like:
> 
> Content-Type: application/octet-stream; name="Board Presentation.ppt";
> 
> Could someone out there tell us where the complete list of such tags is to
> be found? I'll bet that there are enough out there that we don't need to
> invent anything new at all. And even if there are not, I would sooner
> define a new tag to be used in Content-Type, Content-Disposition, etc.
> headers, than invent an entirely new header extension.
> 
> This seems to me to give the best of both worlds: you use a new body part
> to contain the information (be it content or a pointer to the content),
> and you use tags in the headers that deal with that content to describe
> various attributes and features of them.
> 
> This also keeps features orthogonal, which I think is very important:
> since one CAN put a body of Content-Type: application/URI, and this can be
> made to work for our purpose, we shouldn't invent a different way to do
> the same thing. Especially if we can use tags in the existing headers to
> signal the stuff we need. Implementations that don't understand these tags
> already have to throw them on the floor, so it adds no backward
> compatibility problems.
> 
> Are there any experts who can tell us what tags are available?
> 
> Scott
> 
> On Mon, 27 Dec 1999, Henning Schulzrinne wrote:
> 
> > In general, even though it does add "yet another extension",
> > explicitness of purpose is good, since it allows the receiver to deal
> > with things appropriately. In the photo case, this may mean updating an
> > internal picture database.
> >
> > This is a generic problem. Clearly, we could put things like priority or
> > subject or other call information in a web page, but it would be
> > unstructured information.
> >
> > Another issue is that the display mechanism only works with a single
> > attachment, unless you want to have windows pop up all over the screen.
> > If we want to provide additional call-identifying information beyond a
> > single item, we clearly need better labeling and "first class" protocol
> > status rather than just a collection of attachments.
> >
> > Having a generic display capability for web pages (which includes JPEG
> > pictures as a special case) is a good thing, too. So I don't see this as
> > an either-or issue.
> >
> > I don't think the delay is much of an issue for this application since
> > the callee should be able to accept the call even before the picture
> > rendition is complete (e.g., if she recognizes the caller by name). Even
> > at the typical modem download speed of around 3 kB, a typical picture
> > would take about 3 seconds to download, probably faster than most of us
> > either run to the phone or even turn to the phone device. If the callee
> > is a fashion magazine or the Miss Universe contest office, it might
> > design its phones to only ring once the image has been received...
> >
> > Henning
> >

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 12:21:57 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA05851
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 12:21:57 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 698E352D5; Mon, 27 Dec 1999 12:19:24 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id D783B52DF; Mon, 27 Dec 1999 12:19:23 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id B6CCE52D5
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 12:19:06 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 27 12:17:06 EST 1999
Received: from PMESMTP01.wcom.com ([199.249.20.1]) by dusty; Mon Dec 27 12:15:24 EST 1999
Received: from CONVERSION-DAEMON by firewall.mcit.com (PMDF V5.2-32 #41714)
 id <0FNE00H01TCE6H@firewall.mcit.com> for sip@lists.research.bell-labs.com;
 Mon, 27 Dec 1999 17:17:02 +0000 (GMT)
Received: from ndcrelay.mcit.com ([166.37.172.49])
 by firewall.mcit.com (PMDF V5.2-32 #41714)
 with ESMTP id <0FNE00EA8TCEGW@firewall.mcit.com>; Mon,
 27 Dec 1999 17:17:02 +0000 (GMT)
Received: from omta1.mcit.com (omta1.mcit.com [166.37.204.2])
 by ndcrelay.mcit.com (8.8.7/) with ESMTP	id RAA15107; Mon,
 27 Dec 1999 17:15:19 +0000 (GMT)
Received: from dwillispc ([166.35.225.242])
 by omta1.mcit.com (InterMail v03.02.05 118 121 101)
 with SMTP id <19991227171620.IIIB11611@dwillispc>; Mon,
 27 Dec 1999 11:16:20 -0600
Date: Mon, 27 Dec 1999 11:16:36 -0600
From: Dean Willis <dean.willis@wcom.com>
Subject: RE: JPEG in INVITE
In-reply-to: <Pine.LNX.4.10.9912251930590.2481-100000@scott.metatel.office>
To: Scott Petrack <scott.petrack@metatel.com>
Cc: sip@lists.research.bell-labs.com
Message-id: <001701bf508e$211585e0$f2e123a6@mcit.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Scott wrote:
> 1. One important reason not to use an indirection (i.e. including only the
> URL of the image and not the image) is call set-up time. An indirection
> requires at least one extra round trip time to get the image. Of course,
> this is a standard trade-off, and in any case,
> including a huge bitmap is not good for call set-up time either. But
> sending along a relevant thumbnail is much less harmful to call set-up
> time than requiring the extra round-trips.

Another reason not to indirect is the security/firewall/web-posting
interworking complexity.

User A is behind the firewall of company B. User C is behind the firewall of
company D.

The firewalls of C and D must pass or proxy SIP for A and B to make a SIP
call.

A wants to call B and include a caller-id image, from a phone "UAC(A)" that
includes a caller-ID camera.

With in-SIP images:

A activates the UAC, dials B, producing image I.
UAC(A) INVITES UAS(B) with image
UAS(B) receives I and displays it.

With out in-SIP, case 1, UAs have HTTP clients and servers.

A activates the UAC, dials B, producing image I.
UAC(A) posts I to internal HTTP server
UAC(A) INVITES UAS(B)with URL(I)
UAS(B) receives INVITE with URL(I)
UAS(B) opens HTTP connection to UAC(A), gets and displays I.

Do you really think the corporate security people at company C are going to
allow HTTP GET operations from arbitrary DHCP addesses at D to come in thru
their firewall to arbitrary IP DHCP addresses at C? Not likely.

So, we have a new scenario.

We introduce WS(C), the web server at company C.

A activates the UAC, dials B, producing image I.
UAC(A) posts I to WS(C). (authentication? URL construction?)
UAC(A) INVITES UAS(B)with URL(I)
UAS(B) receives INVITE with URL(I)
UAS(B) opens HTTP connection to WS(C), gets and displays I.
Question: How does WS(C) know to let UAS(B) get I? It would seem UAC(A)
would need to provide B's identity information in the posting process.

So, to relieve the cost of sending a small image in an invitation, we have
added:
1) An external web server.
2) HTTP posting software in the UAC.
3) HTTP getting softeare in UAS.
4) A business and security relationship between the UAC and the web server.
5) An unspecified content management problem around the UAC and the web
server.
6) An unspecified authentication/authorization problem relating to the UAS
and the web server.
7) And, as Scott points out, a rather huge hit to call setup time. I count:
	Two TCP connection establishments
	Two HTTP authentications
	One HHTP POST
	One HTTP GET
	Two TCP teardowns
which adds up to a COUPLE OF DOZEN RTTs.

That strikes me as a rather painful alternative to a SIP INVITE with
multipart payload including a JPEG and transmitted over TCP, optionally
secured with SIP auth and encryption.

--
Dean




From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 12:59:45 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id MAA06483
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 12:59:45 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 26BA452DC; Mon, 27 Dec 1999 12:57:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 8E48152E3; Mon, 27 Dec 1999 12:57:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 1C3E852DC
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 12:57:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Mon Dec 27 12:55:49 EST 1999
Received: from gwa.ericsson.com ([198.215.127.2]) by dusty; Mon Dec 27 12:54:07 EST 1999
Received: from mr4.exu.ericsson.se (mr4a.ericsson.com [198.215.127.160])
	by gwa.ericsson.com (8.9.3/8.9.3) with ESMTP id LAA00073;
	Mon, 27 Dec 1999 11:55:43 -0600 (CST)
Received: from newman.exu.ericsson.se (newman.exu.ericsson.se [138.85.10.50])
	by mr4.exu.ericsson.se (8.9.3/8.9.3) with ESMTP id LAA09226;
	Mon, 27 Dec 1999 11:55:43 -0600 (CST)
Received: from b04a45.exu.ericsson.se (b04a45 [138.85.60.145]) by newman.exu.ericsson.se (8.7.5/8.7.3) with ESMTP id LAA28405; Mon, 27 Dec 1999 11:55:42 -0600 (CST)
From: Sean Olson <eussean@exu.ericsson.se>
Received: (from eussean@localhost)
	by b04a45.exu.ericsson.se (8.9.1/8.9.1) id LAA15175;
	Mon, 27 Dec 1999 11:55:41 -0600 (CST)
Message-Id: <199912271755.LAA15175@b04a45.exu.ericsson.se>
Subject: Re: JPEG in INVITE
To: scott.petrack@metatel.com (Scott Petrack)
Date: Mon, 27 Dec 1999 11:55:40 -0600 (CST)
Cc: eussean@exu.ericsson.se, jdrosen@dynamicsoft.com,
        schulzrinne@cs.columbia.edu, Rachid.Taji@srit.siemens.fr,
        Alvir.Alisic@ecs.ericsson.se, sip@lists.research.bell-labs.com
In-Reply-To: <Pine.LNX.4.10.9912270419310.910-100000@scott.metatel.office> from "Scott Petrack" at Dec 27, 99 04:29:22 am
X-Mailer: ELM [version 2.4 PL24]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

> 
> The callee needs to see the pic before s/he accepts the call.
> Why is "caller ID" a useful feature? Because it gives the callee a way
> to screen the call. It would be silly to give me a caller ID string in
> parallel with accepting the call. 

You are assuming of course that you can trust the UAC on the other end to
give you their own thumbnail and not that of someone else. If you want
to authenticate a call, there are better ways, PGP being one that comes
to mind.

> 
> In the future, let's imagine a little camera in a public phone
> booth, so that the caller can call collect and the callee gets a thumbnail
> sketch of the caller, to decide if s/he wants to accept the call. This
> will reduce the pain of setting up a collect call immensely. (And there
> are variants which are useful even if you don't believe that there will be
> public phone booths in the future....)
> 
> To me, this is an example of a truly useful service which SIP enables. 
> So yes, I need to see the picture in order to know if I want to take the
> call.
> 

I can definitely appreciate the utility of such an application, but I can
never see it as a form of caller id for the purpose of screening calls.
Again, I think something like PGP is better suited for these purposes.

> Scott
> 
> On Sun, 26 Dec 1999, Sean Olson wrote:
> 
> > > 1. One important reason not to use an indirection (i.e. including only the
> > > URL of the image and not the image) is call set-up time. An indirection
> > > requires at least one extra round trip time to get the image. Of course,
> > > this is a standard trade-off, and in any case,
> > > including a huge bitmap is not good for call set-up time either. But
> > > sending along a relevant thumbnail is much less harmful to call set-up 
> > > time than requiring the extra round-trips.
> > 
> > I would hope that you would do this in parallel with the call setup. I
> > can't think of a reason not to proceed with the call while fetching the
> > image in parallel.
> > 
> > -- 
> > -----------------------------------------------------------------
> > Sean Olson            E-mail: sean.olson@ericsson.com
> > Ericsson Inc.         Voice: (972) 583-5472 
> >                       FAX: (972) 669-0154 
> > 
> > 

-- 
-----------------------------------------------------------------
Sean Olson            E-mail: sean.olson@ericsson.com
Ericsson Inc.         Voice: (972) 583-5472 
                      FAX: (972) 669-0154 



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 14:21:47 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA07449
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 14:21:45 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id C8FDE52DF; Mon, 27 Dec 1999 14:19:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 343BF52E4; Mon, 27 Dec 1999 14:19:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 8044752DF
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 14:19:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 27 14:18:19 EST 1999
Received: from scott.metatel.office ([24.128.100.134]) by dusty; Mon Dec 27 14:16:37 EST 1999
Received: from localhost (scott.petrack@localhost)
	by scott.metatel.office (8.9.3/8.9.3) with ESMTP id JAA01421;
	Mon, 27 Dec 1999 09:19:23 -0500
X-Authentication-Warning: scott.metatel.office: scott.petrack owned process doing -bs
Date: Mon, 27 Dec 1999 09:19:22 -0500 (EST)
From: Scott Petrack <scott.petrack@metatel.com>
X-Sender: scott.petrack@scott.metatel.office
To: Sean Olson <eussean@exu.ericsson.se>
Cc: jdrosen@dynamicsoft.com, schulzrinne@cs.columbia.edu,
        Rachid.Taji@srit.siemens.fr, Alvir.Alisic@ecs.ericsson.se,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
In-Reply-To: <199912271755.LAA15175@b04a45.exu.ericsson.se>
Message-ID: <Pine.LNX.4.10.9912270911150.910-100000@scott.metatel.office>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



On Mon, 27 Dec 1999, Sean Olson wrote:

> > 
> You are assuming of course that you can trust the UAC on the other end to
> give you their own thumbnail and not that of someone else. If you want
> to authenticate a call, there are better ways, PGP being one that comes
> to mind.

I would get whatever assurances the surrounding SIP security would give.
Perhaps the INVITE from a public phone would be secured with the public
phone company's key, and if I believe this key, then I would believe that
the picture is indeed sent by a camera in that phone. 

I was not suggesting that the people who operate the missiles controlled
by the "red button" would just believe the call because it came with a
thumbnail sketch of the President.

> I can definitely appreciate the utility of such an application, but I can
> never see it as a form of caller id for the purpose of screening calls.
> Again, I think something like PGP is better suited for these purposes.

PGP would be used by the SIP system elements to help make sure that the
pictures are what they purport to be. 

We are debating how the information is put into the SIP message (will it
be in a header, or in the body, and what are the details?). However we
decide, the usual SIP security will help us. 

Scott 




From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 14:29:41 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA07494
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 14:29:41 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 76C4C52E4; Mon, 27 Dec 1999 14:27:22 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id D58CC52E8; Mon, 27 Dec 1999 14:27:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 7160152E4
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 14:27:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 27 14:25:48 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Mon Dec 27 14:24:07 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhvld28603;
	Mon, 27 Dec 1999 19:25:46 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id OAA01493;
	Mon, 27 Dec 1999 14:25:44 -0500 (EST)
Message-ID: <3867BEC6.52B1A1AD@dynamicsoft.com>
Date: Mon, 27 Dec 1999 14:32:22 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Sean Olson <eussean@exu.ericsson.se>
Cc: Scott Petrack <scott.petrack@metatel.com>, schulzrinne@cs.columbia.edu,
        Rachid.Taji@srit.siemens.fr, Alvir.Alisic@ecs.ericsson.se,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <199912271755.LAA15175@b04a45.exu.ericsson.se>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit



Sean Olson wrote:
> 
> >
> > The callee needs to see the pic before s/he accepts the call.
> > Why is "caller ID" a useful feature? Because it gives the callee a way
> > to screen the call. It would be silly to give me a caller ID string in
> > parallel with accepting the call.
> 
> You are assuming of course that you can trust the UAC on the other end to
> give you their own thumbnail and not that of someone else. If you want
> to authenticate a call, there are better ways, PGP being one that comes
> to mind.

It is possible to have the signature cover the thumbnail too. This would
allow you to be sure that the person who is calling inserted the
picture. But, that doesn't guarantee that the picture is actually of
that person.

However, this can be done. Lets say the UAC inserts a jpeg thumbnail
into the INVITE. The user has provided some 9 or 10 different thumbnails
that the user would like to use in different contexts. The service
provider has (somehow) verified that these are really pictures of the
person. Offline, there are numerous ways this can be done. For example,
the service provider could check public records from the Dept. of Motor
Vehicles and verify that the picture is of that person. Now, when the
user makes a call, they insert one of these pictures. The user uses an
outgoing proxy server. This server checks the included image, checks it
against the list of allowed pictures, and if its OK, resigns the
request, with the signature covering the picture. It also adds some kind
of flag to indicate that the caller identity has been verified. When a
UAS receives this, it can be certain that the picture is of the actual
caller, so long as the UAS trusts the service provider of the caller.

There are some definite problems with this, but interestingly its more
or less conceptually how the PSTN guarantees caller ID service (sans the
crypto, of course). The service provider verifies the identity of the
caller's terminal based on the physical wires the call comes in on, and
inserts the name of the caller. This name is assumed known from offline
administrative procedures.

I'm not suggesting we do this, but its a thought.

-Jonathan R.


-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 15:53:43 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id PAA08114
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 15:53:43 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 385CC52B6; Mon, 27 Dec 1999 15:51:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 8D36252C4; Mon, 27 Dec 1999 15:51:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 8D2B152B6
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 15:51:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Mon Dec 27 15:49:24 EST 1999
Received: from scott.metatel.office ([24.128.100.134]) by dusty; Mon Dec 27 15:47:42 EST 1999
Received: from localhost (scott.petrack@localhost)
	by scott.metatel.office (8.9.3/8.9.3) with ESMTP id KAA01472;
	Mon, 27 Dec 1999 10:51:03 -0500
X-Authentication-Warning: scott.metatel.office: scott.petrack owned process doing -bs
Date: Mon, 27 Dec 1999 10:51:03 -0500 (EST)
From: Scott Petrack <scott.petrack@metatel.com>
X-Sender: scott.petrack@scott.metatel.office
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: Henning Schulzrinne <Schulz-Rinne@t-online.de>,
        Sean Olson <eussean@exu.ericsson.se>, schulzrinne@cs.columbia.edu,
        Rachid.Taji@srit.siemens.fr, Alvir.Alisic@ecs.ericsson.se,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE -- the "inline" disposition type
In-Reply-To: <38678B8B.E22DA30B@dynamicsoft.com>
Message-ID: <Pine.LNX.4.10.9912270919310.910-100000@scott.metatel.office>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk


You have said it very well, Jonathan. I am merely arguing that we can
satisfy Henning's requirements (the ones which led him to suggest using
headers) without inventing a new special purpose header, and that this is
the better approach. It gives him his headers and you your body ;-). 

Goaded on by ScottB, I found and read RFC 1806. It defines the allowed
types in "Content-Disposition:" header. The one we want is "inline":

"2.1  The Inline Disposition Type

   A bodypart should be marked `inline' if it is intended to be
   displayed automatically upon display of the message. Inline bodyparts
   should be presented in the order in which they occur, subject to the
   normal semantics of multipart messages."

In fact, here is the first example in the RFC:

"3.  Examples

   Here is a an example of a body part containing a JPEG image that is
   intended to be viewed by the user immediately:

         Content-Type: image/jpeg
         Content-Disposition: inline
         Content-Description: just a small picture of me

         <jpeg data>"

This is just what we need. URI-list fans would send:

	 Content-Type: application/URI
         Content-Disposition: inline
         Content-Description: just a small picture of me

         <URI>


So I guess that the header which means "display this data along with the
display of the INVITE"  already exists. Given this, what is the reason NOT
to use it, along with the URI-list in the body? I mean, I believe that the
above signalling is perfectly standard SIP, so why have a different way to
do the same thing?

Scott

(By the way, Sean, the second example in section 3 of RFC 1806 suggests an
authentication method for INVITEs which is superior even to PGP ;-)).

Scott

On Mon, 27 Dec 1999, Jonathan Rosenberg wrote:

> There are two issues we have been discussing:
> 
> 1. What is the right way to access content indirectly? A new header in
> SIP, or a body with application/URI-list?
> 
> 2. How do you convey the reason for the content?
> 
> These are really separate problems, although the solution for (2)
> depends a lot on the solution for (1).
> 
> Your suggestion below is to use tags in Content-Type. That solves the
> second problem given the solution to the first is to use a body with
> application/URI-list.
> 
> Others have suggested that indirect content be accessed directly with a
> SIP header, such as:
> 
> INVITE sip:scott.petrack@metatel.com SIP/2.0
> Display: http://www.dynamicsoft.com;purpose=web,
> http://www.dynamicsoft.com/pictures/jdrosen;purpose=face
> 
> In this case, (2) is solved with some new paramters to this new header.
> 
> -Jonathan R.
> 
> Scott Petrack wrote:
> > 
> > My point was that even if we decide we need to signal the purpose
> > explicitly within a header, I believe that we don't have to add any new
> > extension at all. This is because MIME headers like Content-Type and
> > Content-Disposition already allow semicolon-separated tags. Looking
> > through my own mail, I see lines like:
> > 
> > Content-Type: application/octet-stream; name="Board Presentation.ppt";
> > 
> > Could someone out there tell us where the complete list of such tags is to
> > be found? I'll bet that there are enough out there that we don't need to
> > invent anything new at all. And even if there are not, I would sooner
> > define a new tag to be used in Content-Type, Content-Disposition, etc.
> > headers, than invent an entirely new header extension.
> > 
> > This seems to me to give the best of both worlds: you use a new body part
> > to contain the information (be it content or a pointer to the content),
> > and you use tags in the headers that deal with that content to describe
> > various attributes and features of them.
> > 
> > This also keeps features orthogonal, which I think is very important:
> > since one CAN put a body of Content-Type: application/URI, and this can be
> > made to work for our purpose, we shouldn't invent a different way to do
> > the same thing. Especially if we can use tags in the existing headers to
> > signal the stuff we need. Implementations that don't understand these tags
> > already have to throw them on the floor, so it adds no backward
> > compatibility problems.
> > 
> > Are there any experts who can tell us what tags are available?
> > 
> > Scott
> > 
> > On Mon, 27 Dec 1999, Henning Schulzrinne wrote:
> > 
> > > In general, even though it does add "yet another extension",
> > > explicitness of purpose is good, since it allows the receiver to deal
> > > with things appropriately. In the photo case, this may mean updating an
> > > internal picture database.
> > >
> > > This is a generic problem. Clearly, we could put things like priority or
> > > subject or other call information in a web page, but it would be
> > > unstructured information.
> > >
> > > Another issue is that the display mechanism only works with a single
> > > attachment, unless you want to have windows pop up all over the screen.
> > > If we want to provide additional call-identifying information beyond a
> > > single item, we clearly need better labeling and "first class" protocol
> > > status rather than just a collection of attachments.
> > >
> > > Having a generic display capability for web pages (which includes JPEG
> > > pictures as a special case) is a good thing, too. So I don't see this as
> > > an either-or issue.
> > >
> > > I don't think the delay is much of an issue for this application since
> > > the callee should be able to accept the call even before the picture
> > > rendition is complete (e.g., if she recognizes the caller by name). Even
> > > at the typical modem download speed of around 3 kB, a typical picture
> > > would take about 3 seconds to download, probably faster than most of us
> > > either run to the phone or even turn to the phone device. If the callee
> > > is a fashion magazine or the Miss Universe contest office, it might
> > > design its phones to only ring once the image has been received...
> > >
> > > Henning
> > >
> 
> -- 
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120 
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com
> 




From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 17:44:07 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA08671
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 17:44:07 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id E2BBA52AB; Mon, 27 Dec 1999 17:41:24 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 5AD0C52DD; Mon, 27 Dec 1999 17:41:24 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 1462052AB
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 17:41:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 27 17:39:09 EST 1999
Received: from mailout00.sul.t-online.de ([194.25.134.16]) by dusty; Mon Dec 27 17:37:28 EST 1999
Received: from fwd07.sul.t-online.de 
	by mailout00.sul.t-online.de with smtp 
	id 122in5-0007Iz-03; Mon, 27 Dec 1999 23:38:59 +0100
Received: from cs.columbia.edu (0223226329-0001@[193.159.66.142]) by fwd07.sul.t-online.de
	with esmtp id 122imx-0gyqxcC; Mon, 27 Dec 1999 23:38:51 +0100
Message-ID: <3867EA41.E55C4E0C@cs.columbia.edu>
Date: Mon, 27 Dec 1999 23:37:53 +0100
From: Schulz-Rinne@t-online.de (Henning Schulzrinne)
Reply-To: hgs@cs.columbia.edu
Organization: Columbia University
X-Mailer: Mozilla 4.7 [de] (Win95; I)
X-Accept-Language: de
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Cc: Scott Petrack <scott.petrack@metatel.com>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <Pine.LNX.4.10.9912270430450.910-100000@scott.metatel.office> <38678B8B.E22DA30B@dynamicsoft.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Sender: 0223226329-0001@t-dialin.net
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

There's always the well-established challenge-response crypto method:

401 Authentication required
Challenge: "Close your left eye"

INVITE (retransmitted)
Response: uses camera, has at most a few seconds to get better-looking
coworker in front of camera



From owner-sip-outgoing@lists.research.bell-labs.com  Mon Dec 27 21:10:40 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id VAA10288
	for <sip-archive@odin.ietf.org>; Mon, 27 Dec 1999 21:10:40 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 1321252C4; Mon, 27 Dec 1999 21:07:28 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 7882B52D5; Mon, 27 Dec 1999 21:07:27 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id C2C6F52E8
	for <sip@lists.research.bell-labs.com>; Mon, 27 Dec 1999 03:21:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Mon Dec 27 03:19:47 EST 1999
Received: from mailout01.sul.t-online.de ([194.25.134.80]) by dusty; Mon Dec 27 03:18:06 EST 1999
Received: from fwd03.sul.t-online.de 
	by mailout01.sul.t-online.de with smtp 
	id 122VN1-0000GM-01; Mon, 27 Dec 1999 09:19:11 +0100
Received: from cs.columbia.edu (0223226329-0001@[62.158.254.95]) by fwd03.sul.t-online.de
	with esmtp id 122VMq-0wYJfsC; Mon, 27 Dec 1999 09:19:00 +0100
Message-ID: <386720B6.AC858306@cs.columbia.edu>
Date: Mon, 27 Dec 1999 09:17:58 +0100
From: Schulz-Rinne@t-online.de (Henning Schulzrinne)
Organization: Columbia University
X-Mailer: Mozilla 4.7 [de] (Win95; I)
X-Accept-Language: de
MIME-Version: 1.0
To: Sean Olson <eussean@exu.ericsson.se>
Cc: Scott Petrack <scott.petrack@metatel.com>, jdrosen@dynamicsoft.com,
        schulzrinne@cs.columbia.edu, Rachid.Taji@srit.siemens.fr,
        Alvir.Alisic@ecs.ericsson.se, sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <199912270257.UAA14367@b04a45.exu.ericsson.se>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Sender: 0223226329-0001@t-dialin.net
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

In general, even though it does add "yet another extension",
explicitness of purpose is good, since it allows the receiver to deal
with things appropriately. In the photo case, this may mean updating an
internal picture database.

This is a generic problem. Clearly, we could put things like priority or
subject or other call information in a web page, but it would be
unstructured information.

Another issue is that the display mechanism only works with a single
attachment, unless you want to have windows pop up all over the screen.
If we want to provide additional call-identifying information beyond a
single item, we clearly need better labeling and "first class" protocol
status rather than just a collection of attachments.

Having a generic display capability for web pages (which includes JPEG
pictures as a special case) is a good thing, too. So I don't see this as
an either-or issue.

I don't think the delay is much of an issue for this application since
the callee should be able to accept the call even before the picture
rendition is complete (e.g., if she recognizes the caller by name). Even
at the typical modem download speed of around 3 kB, a typical picture
would take about 3 seconds to download, probably faster than most of us
either run to the phone or even turn to the phone device. If the callee
is a fashion magazine or the Miss Universe contest office, it might
design its phones to only ring once the image has been received...

Henning



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 28 00:11:01 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA13331
	for <sip-archive@odin.ietf.org>; Tue, 28 Dec 1999 00:11:01 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 6E7B452B6; Tue, 28 Dec 1999 00:07:38 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id B6A4552BB; Tue, 28 Dec 1999 00:07:37 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id B832852B6
	for <sip@lists.research.bell-labs.com>; Tue, 28 Dec 1999 00:07:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 28 00:06:56 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec 28 00:05:15 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhvmq28841;
	Tue, 28 Dec 1999 05:06:54 GMT
Received: from dynamicsoft.com (1Cust176.tnt2.freehold.nj.da.uu.net [63.17.114.176])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id AAA02973;
	Tue, 28 Dec 1999 00:06:52 -0500 (EST)
Message-ID: <386846FD.1F1BACA1@dynamicsoft.com>
Date: Tue, 28 Dec 1999 00:13:33 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Dean Willis <dean.willis@wcom.com>
Cc: Scott Petrack <scott.petrack@metatel.com>,
        sip@lists.research.bell-labs.com
Subject: Re: JPEG in INVITE
References: <001701bf508e$211585e0$f2e123a6@mcit.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

Presumably the picture is already on a publically accessible web server,
and thus there is no need for an explicit POST at the time of call
setup. 

Scott Petrack writes:
> ou have said it very well, Jonathan. I am merely arguing that we can
> satisfy Henning's requirements (the ones which led him to suggest using
> headers) without inventing a new special purpose header, and that this is
> the better approach. It gives him his headers and you your body ;-). 
> 
> Goaded on by ScottB, I found and read RFC 1806. It defines the allowed
> types in "Content-Disposition:" header. The one we want is "inline":

Actually, at the last meeting, we discussed using Content-Disposition,
and inline was one of the parameters that seemed to work for us. I agree
that the body mechanism is more general; I think some people on the list
want (1) more information on *why* this information is being displayed,
and (2) an easier way to get at it than looking in bodies. 

I can understand (1), and we can solve this through additional
parameters in Content-Disposition that can be defined. I'm still not
convinced that making indirect references headers is so much faster and
easier its worth an extension plus eliminating a more general solution.

-Jonathan R.

Dean Willis wrote:
> 
> Scott wrote:
> > 1. One important reason not to use an indirection (i.e. including only the
> > URL of the image and not the image) is call set-up time. An indirection
> > requires at least one extra round trip time to get the image. Of course,
> > this is a standard trade-off, and in any case,
> > including a huge bitmap is not good for call set-up time either. But
> > sending along a relevant thumbnail is much less harmful to call set-up
> > time than requiring the extra round-trips.
> 
> Another reason not to indirect is the security/firewall/web-posting
> interworking complexity.
> 
> User A is behind the firewall of company B. User C is behind the firewall of
> company D.
> 
> The firewalls of C and D must pass or proxy SIP for A and B to make a SIP
> call.
> 
> A wants to call B and include a caller-id image, from a phone "UAC(A)" that
> includes a caller-ID camera.
> 
> With in-SIP images:
> 
> A activates the UAC, dials B, producing image I.
> UAC(A) INVITES UAS(B) with image
> UAS(B) receives I and displays it.
> 
> With out in-SIP, case 1, UAs have HTTP clients and servers.
> 
> A activates the UAC, dials B, producing image I.
> UAC(A) posts I to internal HTTP server
> UAC(A) INVITES UAS(B)with URL(I)
> UAS(B) receives INVITE with URL(I)
> UAS(B) opens HTTP connection to UAC(A), gets and displays I.
> 
> Do you really think the corporate security people at company C are going to
> allow HTTP GET operations from arbitrary DHCP addesses at D to come in thru
> their firewall to arbitrary IP DHCP addresses at C? Not likely.
> 
> So, we have a new scenario.
> 
> We introduce WS(C), the web server at company C.
> 
> A activates the UAC, dials B, producing image I.
> UAC(A) posts I to WS(C). (authentication? URL construction?)
> UAC(A) INVITES UAS(B)with URL(I)
> UAS(B) receives INVITE with URL(I)
> UAS(B) opens HTTP connection to WS(C), gets and displays I.
> Question: How does WS(C) know to let UAS(B) get I? It would seem UAC(A)
> would need to provide B's identity information in the posting process.
> 
> So, to relieve the cost of sending a small image in an invitation, we have
> added:
> 1) An external web server.
> 2) HTTP posting software in the UAC.
> 3) HTTP getting softeare in UAS.
> 4) A business and security relationship between the UAC and the web server.
> 5) An unspecified content management problem around the UAC and the web
> server.
> 6) An unspecified authentication/authorization problem relating to the UAS
> and the web server.
> 7) And, as Scott points out, a rather huge hit to call setup time. I count:
>         Two TCP connection establishments
>         Two HTTP authentications
>         One HHTP POST
>         One HTTP GET
>         Two TCP teardowns
> which adds up to a COUPLE OF DOZEN RTTs.
> 
> That strikes me as a rather painful alternative to a SIP INVITE with
> multipart payload including a JPEG and transmitted over TCP, optionally
> secured with SIP auth and encryption.
> 
> --
> Dean

-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 28 10:11:23 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id KAA00949
	for <sip-archive@odin.ietf.org>; Tue, 28 Dec 1999 10:11:22 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 3762D52B6; Tue, 28 Dec 1999 10:07:34 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 9B2AC52C4; Tue, 28 Dec 1999 10:07:33 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id A30C052B6
	for <sip@lists.research.bell-labs.com>; Tue, 28 Dec 1999 10:07:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 28 10:06:00 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Tue Dec 28 10:04:15 EST 1999
Received: by dnspri.npac.com; id JAA26576; Tue, 28 Dec 1999 09:05:52 -0600 (CST)
Received: from nodnsquery(208.143.39.132) by dnspri.npac.com via smap (V5.0)
	id xma026525; Tue, 28 Dec 99 09:04:51 -0600
Received: by chi02.npac.com with Internet Mail Service (5.5.2448.0)
	id <ZCR3WW9H>; Tue, 28 Dec 1999 09:00:42 -0600
Message-ID: <ED88182BFF78D211A4D800A0C9E9435C3BE9A6@dc02.npac.com>
From: James Yu <james.yu@neustar.com>
To: "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>
Cc: John Mainwaring <crm312a@nortelnetworks.com>,
        Mark Foster <mark.foster@neustar.com>,
        iptel@lists.research.bell-labs.com, sip@lists.research.bell-labs.com
Subject: RE: TRIP
Date: Tue, 28 Dec 1999 08:58:09 -0600
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Overlap dialing probably happens often for international calls where the
switch in the originating country don't know much about the numbering plan
of the destination country.  The criteria to begin processing the received
digits at the originating switch may be based on the minimum number of
digits and the expiration of the inter-digit interval as have been indicated
by several people.   For a voice call to a destination Switched Circuit
Network (SCN) that involves IP,  the call can be originated from an IP phone
(e.g., SIP client, H.323 terminal) or from an SCN phone.  The IP phones may
be designed to allow en-bloc signaling.  But overlap signaling probably
cannot be avoided for the SCN-IP-SCN case.  The originating switch may not
know whether subsequent digits will be dialed.  So even if a mechanism to
carry the "overlap vs. en-bloc" signaling exists, the originating switch may
need to set it to "overlap signaling" in case it is not sure whether all
digits have been collected (e.g.., international calls).

It seems that certain proxy servers may need to be designated as the check
point when overlap signaling may be involved based on the From and To
information and others.  Hope that we can get some ideas/solutions at the
1/25-27 ITU IP & Telecoms Interworking Workshop.

James

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@dynamicsoft.com]
> Sent: Friday, December 24, 1999 4:33 PM
> To: James Yu
> Cc: John Mainwaring; Mark Foster; iptel@lists.research.bell-labs.com;
> sip@lists.research.bell-labs.com
> Subject: Re: TRIP
> 
> 
> 
> 
> James Yu wrote:
> > 
> > For overlap signaling, a GW or LS that receives a call with 
> partial address
> > information may not know that the address info. is 
> complete.  If it launches
> > a query (DNS or NPDB), the entity that has the "number 
> portability" info.
> > won't be able to find the info. because the address info. 
> is incomplete.  It
> > seems that either this LS or GW may wait a little while to 
> see whether there
> > are subsequent address info. before launching the query, or 
> it can launch a
> > query (DNS or NPDB-like), receives an error (hope that it 
> is specific such
> > as incomplete address instead of something ambiguous), and 
> then wait for
> > additional address info. before timing out.
> 
> I think Dean had sent out some pseudo-code some time back on how trip
> and enum and overlap interact, and this was more or less what the code
> suggested. I believe he thought it was a bad thing, and so do I.
> 
> Overlap dialing seems fundamentally in conflict with LNP or 
> enum queries
> at the local outbound proxy.
> 
> To do LNP, the local outbound proxy needs to have the entire string of
> digits before it can perform the query. But, overlap seems to 
> imply that
> it won't ever know the entire string of digits, as it doesn't have
> knowledge of those numbering plans. It just forwards the 
> request to some
> other proxy or gateway that does.
> 
> Sooo, it would seem that a proxy should only use enum or LNP 
> for numbers
> it knows to be complete. This means that for overlap dialing, the LNP
> query will happen close to the destination (possibly even in 
> the PSTN),
> not unlike the N-1 case we've been discussing. However, for 
> en-bloc, it
> can happen anywhere. This does seem to imply that a proxy 
> needs to know
> whether the number in the request URI of an incoming request 
> is en-bloc
> or overlap. It could make this determination if it knew the 
> structure of
> the numbering plans, but thats unlikely. Might we need a parameter
> somewhere (ugh)? I really hate to crowd SIP with things to support old
> legacy technologies like overlap, so if we can avoid this, I'd be very
> happy.
> 
> 
> 
> -Jonathan R.
> -- 
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120 
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com
> 



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 28 17:37:03 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA06298
	for <sip-archive@odin.ietf.org>; Tue, 28 Dec 1999 17:37:02 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 934A052BB; Tue, 28 Dec 1999 17:33:36 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id CF9FA52DB; Tue, 28 Dec 1999 17:33:35 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 4D8CD52BB
	for <sip@lists.research.bell-labs.com>; Tue, 28 Dec 1999 17:33:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Tue Dec 28 17:31:21 EST 1999
Received: from dnspri.npac.com ([208.143.33.66]) by dusty; Tue Dec 28 17:29:36 EST 1999
Received: by dnspri.npac.com; id QAA17943; Tue, 28 Dec 1999 16:31:18 -0600 (CST)
Received: from nodnsquery(208.143.39.132) by dnspri.npac.com via smap (V5.0)
	id xma017932; Tue, 28 Dec 99 16:31:11 -0600
Received: by chi02.npac.com with Internet Mail Service (5.5.2448.0)
	id <ZCR3WX8N>; Tue, 28 Dec 1999 16:27:03 -0600
Message-ID: <ED88182BFF78D211A4D800A0C9E9435C3BE9AB@dc02.npac.com>
From: James Yu <james.yu@neustar.com>
To: "'Vance Shipley'" <vances@motivity.ca>
Cc: John Mainwaring <crm312a@nortelnetworks.com>,
        Mark Foster <mark.foster@neustar.com>,
        "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>,
        iptel@lists.research.bell-labs.com, sip@lists.research.bell-labs.com
Subject: RE: TRIP
Date: Tue, 28 Dec 1999 16:24:34 -0600
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Vance,

Thanks for the explanation.  

The key questions now are whether overlap signaling (e.g., Feature Group-D
over Multi-Frequency facility) is still used somewhere and if used where the
digit collection/enbloc signaling is performed in the existing SCN.  

If overlap signaling is still used (someone please confirm this and indicate
where it is still used) and a call is to be routed from the originating SCN
to the Internet, I guess that the originating GW (SCN-Internet)probably has
to perform the digit collection/enbloc signaling function so that overlap
signaling does not propagate further into the Internet and/or the
destination GW/SCN.  Otherwise, some entities in the Internet must perform
that function.

James

> -----Original Message-----
> From: Vance Shipley [mailto:vances@motivity.ca]
> Sent: Tuesday, December 28, 1999 3:59 PM
> To: James Yu; 'Jonathan Rosenberg'
> Cc: John Mainwaring; Mark Foster; iptel@lists.research.bell-labs.com;
> sip@lists.research.bell-labs.com
> Subject: RE: TRIP
> 
> 
> 
> James Yu writes:
> }
> }  Overlap dialing probably happens often for international 
> calls where the
> }  switch in the originating country don't know much about 
> the numbering plan
> }  of the destination country.  The criteria to begin 
> processing the received
> 
> Actually no.  The ITU recommendation Q.767 "Application of 
> the ISDN user part
> of CCITT Signalling System No. 7 for international ISDN 
> interconnections" is
> used today on the International Plane between countries 
> public telephone
> networks.
> This recommendation defines how ISUP signaling is to be 
> applied toward the
> application of international gateway interconnections to 
> other countries
> gateways.
> 
> Q.767 does not allow for overlap signaling.  If the local 
> serving office switch
> for the originating subscriber uses overlap signaling to 
> speed up call routing
> then an intermediate switch, or the gateway switch itself, 
> will gather up all
> the digits and send the call forward enbloc.
> 
> Overlap signaling is not used in ANSI ISUP at all.  Overlap 
> signaling was used
> in the days of in band signaling to speed up the delays 
> caused by the relatively
> long duration of the tones used.  One area where it was 
> almost always used was
> in fact international calls.  In the case of FGD signaling in 
> North America when
> an international call was presented the country code was sent 
> first using
> <KP>CC<ST> so that the switch could begin route selection and 
> grab an outgoing
> route while the rest of the digits where pulsed in.  This 
> becomes unnecessary
> when ISUP signaling is used.
> 
> In my mind overlap signaling should never be generated but 
> may have to be
> supported
> when received.  The receiving switch must buffer the received 
> digits until it
> decides
> that all have been received and then forward the call enbloc. 
>  There are two
> methods
> the switch may use to recognize when all digits have been 
> received.  The best is
> when
> the switch has an accurate view of the dialing plan(s).  It 
> would know that
> country
> code XX, city code YYY requires exactly 7 digits in the 
> subscriber number and
> when it
> received all 12 digits it would forward the call enbloc.  If 
> it never received
> enough
> digits it would eventually time out and release the call with 
> a cause code
> indicating
> "address incomplete".  The second method simply applies an 
> inter digit timer and
> maximum
> number of digits.  Digits are buffered until either the 
> maximum expected are
> received,
> the inter digit delay timer expires or an end-of-dial digit 
> is recognized (e.g.
> <ST>
> or '#').  These methods are generally both used where some 
> dial plans are
> recognized
> (e.g. North American Plan) and the rest use the time out.
> 
> 	-Vance
> 
> 
> 



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 28 17:57:01 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id RAA06439
	for <sip-archive@odin.ietf.org>; Tue, 28 Dec 1999 17:57:00 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 5467252AB; Tue, 28 Dec 1999 17:53:38 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 93F3452DD; Tue, 28 Dec 1999 17:53:37 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id F066252AB
	for <sip@lists.research.bell-labs.com>; Tue, 28 Dec 1999 17:53:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 28 17:52:59 EST 1999
Received: from wodc7mr3.ffx.ops.us.uu.net ([192.48.96.19]) by dusty; Tue Dec 28 17:51:13 EST 1999
Received: from dynamic.dynamicsoft.com by wodc7mr3.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.2])
	id QQhvpj25947;
	Tue, 28 Dec 1999 22:52:49 GMT
Received: from dynamicsoft.com (eagle.dynamicsoft.com [63.72.186.56])
	by dynamic.dynamicsoft.com (8.9.3/8.9.3) with ESMTP id RAA04372;
	Tue, 28 Dec 1999 17:52:47 -0500 (EST)
Message-ID: <386940D2.B5C36E05@dynamicsoft.com>
Date: Tue, 28 Dec 1999 17:59:30 -0500
From: Jonathan Rosenberg <jdrosen@dynamicsoft.com>
Organization: dynamicsoft
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: James Yu <james.yu@neustar.com>
Cc: "'Vance Shipley'" <vances@motivity.ca>,
        John Mainwaring <crm312a@nortelnetworks.com>,
        Mark Foster <mark.foster@neustar.com>,
        iptel@lists.research.bell-labs.com, sip@lists.research.bell-labs.com
Subject: Re: TRIP
References: <ED88182BFF78D211A4D800A0C9E9435C3BE9AB@dc02.npac.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

We've discussed this on the list. Several folks pointed out that
European systems support overlap, and it was decided that it was not
reasonable to mandate the originating gateway to do digit collection to
convert this to en-bloc, although it could be optionally done.

-Jonathan R.

James Yu wrote:
> 
> Vance,
> 
> Thanks for the explanation.
> 
> The key questions now are whether overlap signaling (e.g., Feature Group-D
> over Multi-Frequency facility) is still used somewhere and if used where the
> digit collection/enbloc signaling is performed in the existing SCN.
> 
> If overlap signaling is still used (someone please confirm this and indicate
> where it is still used) and a call is to be routed from the originating SCN
> to the Internet, I guess that the originating GW (SCN-Internet)probably has
> to perform the digit collection/enbloc signaling function so that overlap
> signaling does not propagate further into the Internet and/or the
> destination GW/SCN.  Otherwise, some entities in the Internet must perform
> that function.
> 
> James
> 
-- 
Jonathan D. Rosenberg                       200 Executive Drive
Chief Scientist                             Suite 120 
dynamicsoft                                 West Orange, NJ 07052
jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Tue Dec 28 18:27:52 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id SAA06584
	for <sip-archive@odin.ietf.org>; Tue, 28 Dec 1999 18:27:51 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id C63D552DD; Tue, 28 Dec 1999 18:25:23 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4F45F52BB; Tue, 28 Dec 1999 18:25:22 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 069BD52DD
	for <sip@lists.research.bell-labs.com>; Tue, 28 Dec 1999 18:25:05 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 28 18:24:00 EST 1999
Received: from l3mail02.level3.com ([209.119.32.20]) by dusty; Tue Dec 28 18:22:14 EST 1999
Received: by level3.com with Internet Mail Service (5.5.2448.0)
	id <ZAY7JR34>; Tue, 28 Dec 1999 16:22:17 -0700
Message-ID: <6DD3824BDF75D211930E0008C71EC92003CACF58@l3lsvlmail02.l3.com>
From: Jon.Peterson@Level3.com
To: sip@lists.research.bell-labs.com
Subject: RE: SIP 3rd-party call creation
Date: Tue, 28 Dec 1999 16:15:25 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk



> -----Original Message-----
> From:	Jonathan Rosenberg [SMTP:jdrosen@dynamicsoft.com]
> Sent:	Friday, December 24, 1999 1:27 PM
> To:	Jon.Peterson@Level3.com
> Cc:	sip@lists.research.bell-labs.com
> Subject:	Re: SIP 3rd-party call creation
> 
> If you don't require C needing to be involved in the call from the point
> of 3rd party initiation forward, then I think this is something that
> generally fits within the SIP model, as its about initiation of
> sessions, not about device control or event reporting or other things.
> Using OPTIONS with Also certainly does this, although its a bit of a
> hack.
> 
	[Peterson, Jon]  

	Are there any SIP implementations today that would support this
OPTIONS/Also technique? I know this probably isn't a priority for
implementors, but I'd be interested to hear if anyone had actually tried it.

> In this example, why doesn't C just send the INVITE, but in the SDP,
> list B as the session endpoint? 
> 
> This is yet another example of a decomposition architecture. What you
> want to do is take a network service, in this case the gaming server,
> and decompose it into a control component (what you call C) and a
> session component (B). This decomposition could be done in the megaco
> fashion, with C handling control and signaling, and with B just handing
> the gaming session, RTP, and stuff like that. What you are suggesting is
> a different decomposition, with C performing control, but signaling
> still residing in B. I'd like to understand the needs which dictate this
> kind of decomposition rather than the megaco type of decomposition,
> especially for this application.
> 
	[Peterson, Jon]  

	I was justifiably worried that my example would be difficult to
understand. I tried to paint C as a truly 'third party' application that was
neither a component of A or B. I should clarify that under certain
circumstances, it -would- be legitimate for A to signal directly to B (like,
in our hypothetical game, when A and B are running on the same LAN,
perhaps), rather than having Joe (A's user) employ C to discover B and then
have B initiate a session with A (to give a brutal summation of my previous
mail). Similarly, I could imagine a game in which client-to-client
connections as well as client-to-server connections were feasible, and here
A could connect to its adjacent peers X, Y, and Z as it pleased - but when
it needed a server, it would go to C. 

	So, if this is not a mere semantic distinction, the suggested
architecture was not one in which a UA was decomposed, but rather one in
which a redundant accessory could be used for initiation in order to resolve
some application or network specific constraints. I could imagine a few
other examples that might benefit from this architecture, such as
telephone-style functions in the same spirit as PINT (without the PSTN
part), or maybe IRC clients' DCC rewritten with SIP (if anyone remembers
that). 

	To return to my previous analogy, Quake clients (A) and servers (B)
are completely enabled and functional without GameSpy (C). GameSpy is just a
tool that allows the user of a Quake client to find servers with low
ping-times and judge the number of users they house, what sort of game is
taking place there, and so forth. The user selects the game that he would
like to join, and GameSpy starts the Quake client and executes a script
which contacts the desired server (so this is a scenerio in which C would
send the OPTIONS/Also to A). Of course, the user could also just start Quake
and enter the address manually, as he did before GameSpy was released. (It
is worth noting, though, that the newly-released Quake III client has a
GameSpy-type server selection interface built into it - so id Software has
elected to recompose these elements).

	Ultimately, I'm not terribly biased about whether C sends the
proposed OPTIONS/Also to A or B - but I do recognize that certain game
architectures or network structures could favor a particular side initiating
the connection, and I think that would be an implementation-specific detail
of C and the overall network. When C and A are on the same machine,
certainly there's no reason why A shouldn't initiate the session. In my
example, C sent the OPTIONS/Also to B because restrictions prevented A from
initiating the connection. I briefly listed a few possible restrictions
along these lines: authentication, firewall policy, billing strictures,
server-side queuing with callbacks, and so forth.

	That much said, your point about C sending the INVITE (to A, I
presume) with an SDP pointing to B is well taken. My own limited familiarity
with SDP might show through here, but I would have thought that B would be
in the best position to describe a session it is initiating (if our game ran
over RTP, for example, and hence needed a pair of unidirectional sockets,
one of which B would advertise in its SDP - or some other host-specific
session data).

	Jon Peterson
	Level(3) Communications

> -Jonathan R.
> -- 
> Jonathan D. Rosenberg                       200 Executive Drive
> Chief Scientist                             Suite 120 
> dynamicsoft                                 West Orange, NJ 07052
> jdrosen@dynamicsoft.com                     FAX:   (732) 741-4778
> http://www.cs.columbia.edu/~jdrosen         PHONE: (732) 741-7244
> http://www.dynamicsoft.com



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 29 04:36:14 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id EAA24440
	for <sip-archive@odin.ietf.org>; Wed, 29 Dec 1999 04:36:14 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 586F752B6; Wed, 29 Dec 1999 04:33:35 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id CBC7752DB; Wed, 29 Dec 1999 04:33:34 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id CABF652B6
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 04:33:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 29 04:31:54 EST 1999
Received: from fogerty.lmf.ericsson.se ([194.89.206.21]) by dusty; Wed Dec 29 04:30:09 EST 1999
Received: from fogerty.lmf.ericsson.se (fogerty.lmf.ericsson.se [131.160.11.6])
	by fogerty.lmf.ericsson.se (8.9.3+Sun/8.9.3) with ESMTP id LAA14480
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 11:31:51 +0200 (EET)
Received: from greymse1.lmf.ericsson.se ([131.160.1.6])
	by fogerty.lmf.ericsson.se (8.9.3+Sun/8.9.3) with ESMTP id LAA14476
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 11:31:50 +0200 (EET)
Received: from lmf.ericsson.se (E005004B52C74.lmf.ericsson.se [131.160.73.3])
	by greymse1.lmf.ericsson.se (8.8.6 (PHNE_17135)/8.8.6) with ESMTP id LAA28215
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 11:31:48 +0200 (EET)
Message-ID: <3869D500.F52E62D8@lmf.ericsson.se>
Date: Wed, 29 Dec 1999 11:31:44 +0200
From: Christer Holmberg <christer.holmberg@lmf.ericsson.se>
X-Mailer: Mozilla 4.51 [en] (WinNT; I)
X-Accept-Language: en
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: SIP parser tool
References: <3858FE28.CFFB0630@cisco.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


Hi,

I'm doing a little research on parser tools for SIP. Tools like lex and
yacc don't seem to be very suitable, and implementations I've seen use
pure C (C++, Java, whatever...) code for the parsing. Do you have any
experience of this?

Regards,

Christer 





----------------------------------------
Christer Holmberg
Advanced Signalling Reserach Laboratory
Ericsson Finland
----------------------------------------



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 29 05:33:46 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id FAA24695
	for <sip-archive@odin.ietf.org>; Wed, 29 Dec 1999 05:33:45 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id A7F4A52BB; Wed, 29 Dec 1999 05:31:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 10F8B52DD; Wed, 29 Dec 1999 05:31:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id E71E952BB
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 05:31:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 29 05:29:20 EST 1999
Received: from beamer.mchh.siemens.de ([194.138.158.163]) by dusty; Wed Dec 29 05:27:35 EST 1999
Received: from blues.mchh.siemens.de (mail3.mchh.siemens.de [194.138.158.227] (may be forged))
	by beamer.mchh.siemens.de (8.9.3/8.9.3) with ESMTP id LAA07396;
	Wed, 29 Dec 1999 11:28:39 +0100 (MET)
Received: from mchh202e.demchh201e.icn.siemens.de ([218.1.68.105])
	by blues.mchh.siemens.de (8.9.1/8.9.1) with ESMTP id LAA02719;
	Wed, 29 Dec 1999 11:26:57 +0100 (MET)
Received: by MCHH202E with Internet Mail Service (5.5.2448.0)
	id <Y9ZAL96J>; Wed, 29 Dec 1999 11:30:44 +0100
Message-ID: <679076A067F2D211A8F70090274481B808C56F@lnn201e.lan.siemens.fr>
From: Hemon Philippe <Philippe.Hemon@SRIT.siemens.fr>
To: "'Christer Holmberg'" <christer.holmberg@lmf.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: RE: SIP parser tool
Date: Wed, 29 Dec 1999 11:30:16 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-Type: text/plain;
	charset="iso-8859-1"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by ietf.org id FAA24695

Hi,

There are two ways for developping a parser :

The first is to use a tool ( like Lex and Yacc ) that with a BNF grammar
generates the totality of the code. It's a quite easy and very fast method
to obtain the parser. But the main problems of this are : 
	1- the generated code  is generally unreadable
	2- it's very difficult to optimize (the tool generated code is not
very high-performance) or to modify it
	3- you are dependant of a tool
By coding directly in pure C, C++, JAVA... it's more difficult and longer to
obtain the same parser. The advantages are :
            1- you can easily change your code for optimizing
	2- high-performance

For JAVA, there are very interessant classes (java.lang.String and
java.util.StringTokenizer) for developping parsers. 
I know also a free parser generator tool (like Lex and Yacc); you can see it
at http://www.metamata.com/

Regards

Philippe Hmon
Siemens France


> -----Original Message-----
> From:	Christer Holmberg 
> Sent:	Mittwoch, 29. Dezember 1999 10:32
> To:	sip@lists.research.bell-labs.com
> Subject:	SIP parser tool
> 
> 
> Hi,
> 
> I'm doing a little research on parser tools for SIP. Tools like lex and
> yacc don't seem to be very suitable, and implementations I've seen use
> pure C (C++, Java, whatever...) code for the parsing. Do you have any
> experience of this?
> 
> Regards,
> 
> Christer 
> 
> 
> 
> 
> 
> ----------------------------------------
> Christer Holmberg
> Advanced Signalling Reserach Laboratory
> Ericsson Finland
> ----------------------------------------



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 29 07:35:56 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id HAA26053
	for <sip-archive@odin.ietf.org>; Wed, 29 Dec 1999 07:35:55 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 584D552DD; Wed, 29 Dec 1999 07:33:20 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id C317A52DE; Wed, 29 Dec 1999 07:33:19 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id DA84D52DD
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 07:33:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 29 07:32:14 EST 1999
Received: from tapti.hss.hns.com ([139.85.242.19]) by dusty; Wed Dec 29 07:28:49 EST 1999
Received: from sampark.hss.hns.com (sampark.hss.hns.com [139.85.229.22])
	by tapti.hss.hns.com (8.8.8/8.8.8) with SMTP id RAA24872;
	Wed, 29 Dec 1999 17:12:48 +0530 (IST)
Received: by sampark.hss.hns.com(Lotus SMTP MTA Internal build v4.6.2  (651.2 6-10-1998))  id 65256856.00409CC5 ; Wed, 29 Dec 1999 17:15:44 +0530
X-Lotus-FromDomain: HSSBLR
From: archow@hss.hns.com
To: Hemon Philippe <Philippe.Hemon@SRIT.siemens.fr>
Cc: "'Christer Holmberg'" <christer.holmberg@lmf.ericsson.se>,
        sip@lists.research.bell-labs.com
Message-ID: <65256856.004097D3.00@sampark.hss.hns.com>
Date: Wed, 29 Dec 1999 17:15:14 +0530
Subject: RE: SIP parser tool
Mime-Version: 1.0
Content-type: multipart/mixed; 
	Boundary="0__=BhKEwo4Sg84b46sErOFFGh0Q0WVgC8jg4IxpicG2GpBal3KAMQ4y3G3U"
Content-Disposition: inline
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

--0__=BhKEwo4Sg84b46sErOFFGh0Q0WVgC8jg4IxpicG2GpBal3KAMQ4y3G3U
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline



Whoops, I must say have a _very_ different opinion about this.
We did  both, and our benchmarks were very differnt that what you sight in
terms of

1. Optimisation
2. Flexibility
3. Parsing capabilities.

I guess 1 is where you sight hand written highly over rule based  - where
my opinion differs=
Anyway, this this is nothing to do with SIP protocol as such, maybe this
list is not appropriate for a more elaborate discussion ?
The issue of speed and optimisation for large grammars like SIP, imho, is
to an extent myth based - next generation scanners and
rule generators (not the olde versions of lex and yacc) are highly
optimised.
There are various ways to optimise rule generated grammars - once done, Im
quite sure the results would be surprising for all those who try.

So Chirster, you need to evaluate well between the above 3 points before
you dive in ! Sure there are come compromnises somewhere, but you need to
know which is more important !

Anyway to answer your question: if used properly (inmo again), rule based
grammars may save you a lot of headaches more thatn what
you may assume now.

Best Regds
Arjun
--
Arjun Roychowdhury @ Hughes Software Systems








Hemon Philippe <Philippe.Hemon@SRIT.siemens.fr> on 12/29/99 04:00:16 PM

To:   "'Christer Holmberg'" <christer.holmberg@lmf.ericsson.se>,
      sip@lists.research.bell-labs.com
cc:

Subject:  RE: SIP parser tool




Hi,

There are two ways for developping a parser :

The first is to use a tool ( like Lex and Yacc ) that with a BNF grammar
generates the totality of the code. It's a quite easy and very fast method
to obtain the parser. But the main problems of this are :
     1- the generated code  is generally unreadable
     2- it's very difficult to optimize (the tool generated code is not
very high-performance) or to modify it
     3- you are dependant of a tool
By coding directly in pure C, C++, JAVA... it's more difficult and longer
to
obtain the same parser. The advantages are :
            1- you can easily change your code for optimizing
     2- high-performance

For JAVA, there are very interessant classes (java.lang.String and
java.util.StringTokenizer) for developping parsers.
I know also a free parser generator tool (like Lex and Yacc); you can see
it
at http://www.metamata.com/

Regards

Philippe H
--0__=BhKEwo4Sg84b46sErOFFGh0Q0WVgC8jg4IxpicG2GpBal3KAMQ4y3G3U
Content-type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable


=E9mon
Siemens France


> -----Original Message-----
> From:   Christer Holmberg
> Sent:   Mittwoch, 29. Dezember 1999 10:32
> To:     sip@lists.research.bell-labs.com
> Subject:     SIP parser tool
>
>
> Hi,
>
> I'm doing a little research on parser tools for SIP. Tools like lex a=
nd
> yacc don't seem to be very suitable, and implementations I've seen us=
e
> pure C (C++, Java, whatever...) code for the parsing. Do you have any=

> experience of this?
>
> Regards,
>
> Christer
>
>
>
>
>
> ----------------------------------------
> Christer Holmberg
> Advanced Signalling Reserach Laboratory
> Ericsson Finland
> ----------------------------------------



=

--0__=BhKEwo4Sg84b46sErOFFGh0Q0WVgC8jg4IxpicG2GpBal3KAMQ4y3G3U--




From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 29 14:20:11 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id OAA02342
	for <sip-archive@odin.ietf.org>; Wed, 29 Dec 1999 14:20:10 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id E105A52DB; Wed, 29 Dec 1999 14:17:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 4FFE052DF; Wed, 29 Dec 1999 14:17:21 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id ECC0C52DB
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 14:17:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 29 14:16:06 EST 1999
Received: from newman.gte.com ([132.197.8.26]) by dusty; Wed Dec 29 14:14:22 EST 1999
Received: from sigmail.gte.com (sigmail.gte.com [132.197.120.75])
	by newman.gte.com (8.9.1/8.9.1) with ESMTP id OAA20781;
	Wed, 29 Dec 1999 14:15:25 -0500 (EST)
Received: by sigmail.gte.com with Internet Mail Service (5.5.2232.9)
	id <YBZCKF0P>; Wed, 29 Dec 1999 14:11:12 -0500
Message-ID: <17D1343B1AC5D11197110060081C78C52FCBB9@sigmail.gte.com>
From: "Gardell, Steve" <sgardell@gte.com>
To: "'archow@hss.hns.com'" <archow@hss.hns.com>,
        Hemon Philippe <Philippe.Hemon@SRIT.siemens.fr>
Cc: "'Christer Holmberg'" <christer.holmberg@lmf.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: RE: SIP parser tool
Date: Wed, 29 Dec 1999 14:11:11 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2232.9)
Content-Type: text/plain;
	charset="windows-1252"
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk

Does anyone know of a published SIP grammar for JavaCC ?

> -----Original Message-----
> From: archow@hss.hns.com [mailto:archow@hss.hns.com]
> Sent: Wednesday, December 29, 1999 6:45 AM
> To: Hemon Philippe
> Cc: 'Christer Holmberg'; sip@lists.research.bell-labs.com
> Subject: RE: SIP parser tool
> 
> 
> 
> 
> Whoops, I must say have a _very_ different opinion about this.
> We did  both, and our benchmarks were very differnt that what 
> you sight in
> terms of
> 
> 1. Optimisation
> 2. Flexibility
> 3. Parsing capabilities.
> 
> I guess 1 is where you sight hand written highly over rule 
> based  - where
> my opinion differs=
> Anyway, this this is nothing to do with SIP protocol as such, 
> maybe this
> list is not appropriate for a more elaborate discussion ?
> The issue of speed and optimisation for large grammars like 
> SIP, imho, is
> to an extent myth based - next generation scanners and
> rule generators (not the olde versions of lex and yacc) are highly
> optimised.
> There are various ways to optimise rule generated grammars - 
> once done, Im
> quite sure the results would be surprising for all those who try.
> 
> So Chirster, you need to evaluate well between the above 3 
> points before
> you dive in ! Sure there are come compromnises somewhere, but 
> you need to
> know which is more important !
> 
> Anyway to answer your question: if used properly (inmo 
> again), rule based
> grammars may save you a lot of headaches more thatn what
> you may assume now.
> 
> Best Regds
> Arjun
> --
> Arjun Roychowdhury @ Hughes Software Systems
> 
> 
> 
> 
> 
> 
> 
> 
> Hemon Philippe <Philippe.Hemon@SRIT.siemens.fr> on 12/29/99 
> 04:00:16 PM
> 
> To:   "'Christer Holmberg'" <christer.holmberg@lmf.ericsson.se>,
>       sip@lists.research.bell-labs.com
> cc:
> 
> Subject:  RE: SIP parser tool
> 
> 
> 
> 
> Hi,
> 
> There are two ways for developping a parser :
> 
> The first is to use a tool ( like Lex and Yacc ) that with a 
> BNF grammar
> generates the totality of the code. It's a quite easy and 
> very fast method
> to obtain the parser. But the main problems of this are :
>      1- the generated code  is generally unreadable
>      2- it's very difficult to optimize (the tool generated 
> code is not
> very high-performance) or to modify it
>      3- you are dependant of a tool
> By coding directly in pure C, C++, JAVA... it's more 
> difficult and longer
> to
> obtain the same parser. The advantages are :
>             1- you can easily change your code for optimizing
>      2- high-performance
> 
> For JAVA, there are very interessant classes (java.lang.String and
> java.util.StringTokenizer) for developping parsers.
> I know also a free parser generator tool (like Lex and Yacc); 
> you can see
> it
> at http://www.metamata.com/
> 
> Regards
> 
> Philippe H
> 



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 29 22:15:54 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id WAA07375
	for <sip-archive@odin.ietf.org>; Wed, 29 Dec 1999 22:15:54 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 1A31052B6; Wed, 29 Dec 1999 22:13:21 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 8298E52DD; Wed, 29 Dec 1999 22:13:20 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id 7469152B6
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 22:13:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 29 22:12:56 EST 1999
Received: from krdl.org.sg ([192.122.139.27]) by dusty; Wed Dec 29 22:11:12 EST 1999
Received: from mailhost.krdl.org.sg (mailbox.krdl.org.sg [192.122.134.30])
	by krdl.org.sg (8.9.3/8.9.3) with ESMTP id LAA23328;
	Thu, 30 Dec 1999 11:12:55 +0800 (SGT)
Received: from krdl.org.sg ([192.168.133.224])
	by mailhost.krdl.org.sg (8.9.3/8.9.3) with ESMTP id LAA06104;
	Thu, 30 Dec 1999 11:12:49 +0800 (SGT)
Message-ID: <386ACE75.EBD3CC89@krdl.org.sg>
Date: Thu, 30 Dec 1999 11:16:05 +0800
From: Casey <caseyong@krdl.org.sg>
X-Mailer: Mozilla 4.04 [en] (Win95; I)
MIME-Version: 1.0
To: archow@hss.hns.com
Cc: Hemon Philippe <Philippe.Hemon@SRIT.siemens.fr>,
        "'Christer Holmberg'" <christer.holmberg@lmf.ericsson.se>,
        sip@lists.research.bell-labs.com
Subject: Re: SIP parser tool
References: <65256856.004097D3.00@sampark.hss.hns.com>
Content-Type: text/plain; charset=iso-8859-1
X-MIME-Autoconverted: from 8bit to quoted-printable by krdl.org.sg id LAA23328
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by ietf.org id WAA07375

Hi Arjun,

Thanks for the advice on parser. Would U clearify the tool you mentioned
is  "imho" or "inmo" ? Where could we get it ? 

Casey

> The issue of speed and optimisation for large grammars like SIP, imho, is
> to an extent myth based - next generation scanners and
> rule generators (not the olde versions of lex and yacc) are highly
> optimised.
> There are various ways to optimise rule generated grammars - once done, Im
> quite sure the results would be surprising for all those who try.
> 
> So Chirster, you need to evaluate well between the above 3 points before
> you dive in ! Sure there are come compromnises somewhere, but you need to
> know which is more important !
> 
> Anyway to answer your question: if used properly (inmo again), rule based
> grammars may save you a lot of headaches more thatn what
> you may assume now.
> 
> Best Regds
> Arjun
> --
> Arjun Roychowdhury @ Hughes Software Systems
> 
> Hemon Philippe <Philippe.Hemon@SRIT.siemens.fr> on 12/29/99 04:00:16 PM
> 
> To:   "'Christer Holmberg'" <christer.holmberg@lmf.ericsson.se>,
>       sip@lists.research.bell-labs.com
> cc:
> 
> Subject:  RE: SIP parser tool
> 
> Hi,
> 
> There are two ways for developping a parser :
> 
> The first is to use a tool ( like Lex and Yacc ) that with a BNF grammar
> generates the totality of the code. It's a quite easy and very fast method
> to obtain the parser. But the main problems of this are :
>      1- the generated code  is generally unreadable
>      2- it's very difficult to optimize (the tool generated code is not
> very high-performance) or to modify it
>      3- you are dependant of a tool
> By coding directly in pure C, C++, JAVA... it's more difficult and longer
> to
> obtain the same parser. The advantages are :
>             1- you can easily change your code for optimizing
>      2- high-performance
> 
> For JAVA, there are very interessant classes (java.lang.String and
> java.util.StringTokenizer) for developping parsers.
> I know also a free parser generator tool (like Lex and Yacc); you can see
> it
> at http://www.metamata.com/
> 
> Regards
> 
> Philippe H
> 
>   ------------------------------------------------------------------------
> 
> mon
> Siemens France
> 
> > -----Original Message-----
> > From:   Christer Holmberg
> > Sent:   Mittwoch, 29. Dezember 1999 10:32
> > To:     sip@lists.research.bell-labs.com
> > Subject:     SIP parser tool
> >
> >
> > Hi,
> >
> > I'm doing a little research on parser tools for SIP. Tools like lex and
> > yacc don't seem to be very suitable, and implementations I've seen use
> > pure C (C++, Java, whatever...) code for the parsing. Do you have any
> > experience of this?
> >
> > Regards,
> >
> > Christer
> >
> >
> >
> >
> >
> > ----------------------------------------
> > Christer Holmberg
> > Advanced Signalling Reserach Laboratory
> > Ericsson Finland
> > ----------------------------------------



From owner-sip-outgoing@lists.research.bell-labs.com  Wed Dec 29 23:58:00 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id XAA09174
	for <sip-archive@odin.ietf.org>; Wed, 29 Dec 1999 23:58:00 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 9BD7952DE; Wed, 29 Dec 1999 23:54:53 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id 10D7452DF; Wed, 29 Dec 1999 23:54:52 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id ED28E52BB
	for <sip@lists.research.bell-labs.com>; Tue, 28 Dec 1999 16:05:04 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Tue Dec 28 16:03:10 EST 1999
Received: from vambo.motivity.ca ([192.197.189.1]) by dusty; Tue Dec 28 16:01:25 EST 1999
Received: from desk (desk.motivity.ca [192.197.189.10])
	by vambo.motivity.ca (8.9.3/8.9.3) with SMTP id VAA14353;
	Tue, 28 Dec 1999 21:02:45 GMT
From: "Vance Shipley" <vances@motivity.ca>
To: "James Yu" <james.yu@neustar.com>,
        "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>
Cc: "John Mainwaring" <crm312a@nortelnetworks.com>,
        "Mark Foster" <mark.foster@neustar.com>,
        <iptel@lists.research.bell-labs.com>,
        <sip@lists.research.bell-labs.com>
Subject: RE: TRIP
Date: Tue, 28 Dec 1999 15:58:44 -0500
Message-ID: <NBBBIOHCCJPPDNIBBIKCEEHBCCAA.vances@motivity.ca>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <ED88182BFF78D211A4D800A0C9E9435C3BE9A6@dc02.npac.com>
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2314.1300
Importance: Normal
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit


James Yu writes:
}
}  Overlap dialing probably happens often for international calls where the
}  switch in the originating country don't know much about the numbering plan
}  of the destination country.  The criteria to begin processing the received

Actually no.  The ITU recommendation Q.767 "Application of the ISDN user part
of CCITT Signalling System No. 7 for international ISDN interconnections" is
used today on the International Plane between countries public telephone
networks.
This recommendation defines how ISUP signaling is to be applied toward the
application of international gateway interconnections to other countries
gateways.

Q.767 does not allow for overlap signaling.  If the local serving office switch
for the originating subscriber uses overlap signaling to speed up call routing
then an intermediate switch, or the gateway switch itself, will gather up all
the digits and send the call forward enbloc.

Overlap signaling is not used in ANSI ISUP at all.  Overlap signaling was used
in the days of in band signaling to speed up the delays caused by the relatively
long duration of the tones used.  One area where it was almost always used was
in fact international calls.  In the case of FGD signaling in North America when
an international call was presented the country code was sent first using
<KP>CC<ST> so that the switch could begin route selection and grab an outgoing
route while the rest of the digits where pulsed in.  This becomes unnecessary
when ISUP signaling is used.

In my mind overlap signaling should never be generated but may have to be
supported
when received.  The receiving switch must buffer the received digits until it
decides
that all have been received and then forward the call enbloc.  There are two
methods
the switch may use to recognize when all digits have been received.  The best is
when
the switch has an accurate view of the dialing plan(s).  It would know that
country
code XX, city code YYY requires exactly 7 digits in the subscriber number and
when it
received all 12 digits it would forward the call enbloc.  If it never received
enough
digits it would eventually time out and release the call with a cause code
indicating
"address incomplete".  The second method simply applies an inter digit timer and
maximum
number of digits.  Digits are buffered until either the maximum expected are
received,
the inter digit delay timer expires or an end-of-dial digit is recognized (e.g.
<ST>
or '#').  These methods are generally both used where some dial plans are
recognized
(e.g. North American Plan) and the rest use the time out.

	-Vance






From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 30 00:00:34 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id AAA09207
	for <sip-archive@odin.ietf.org>; Thu, 30 Dec 1999 00:00:33 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 5359952DD; Wed, 29 Dec 1999 23:55:36 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id D1CFC52E1; Wed, 29 Dec 1999 23:55:32 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from scummy.research.bell-labs.com (research.bell-labs.com [135.104.2.10])
	by lists.research.bell-labs.com (Postfix) with SMTP id BC3D052DF
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 10:27:07 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by scummy; Wed Dec 29 10:25:54 EST 1999
Received: from wodc7mr4.ffx.ops.us.uu.net ([192.48.96.29]) by dusty; Wed Dec 29 10:24:11 EST 1999
Received: from dynamicsoft.com by wodc7mr4.ffx.ops.us.uu.net with ESMTP 
	(peer crosschecked as: [63.72.186.58])
	id QQhvrx09424
	for <sip@lists.research.bell-labs.com>; Wed, 29 Dec 1999 15:25:52 GMT
Message-ID: <386A2844.B6068A3A@dynamicsoft.com>
Date: Wed, 29 Dec 1999 10:27:01 -0500
From: Remon Lapid <rlapid@dynamicsoft.com>
X-Mailer: Mozilla 4.61 [en]C-CCK-MCD {Sony}  (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: sip@lists.research.bell-labs.com
Subject: Re: suitability of lex and yacc for parsing SIP messages
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7bit

I think that lex and yacc are particularly good tools for parsing SIP
messages. The key to success is to recognize that RFC 2543, although it
appears to have the foundations of a yacc grammar, is not a suitable as
input to yacc. You will have to manually separate out those parts of the

grammar that are best expressed in lex, leveraging the strengths of both

lex and yacc where appropriate.

The main reason I like this approach is because future modifications to
the RFC might require substantial changes to the C++ implementation,
whereas this happens pretty much automatically when you use yacc/lex.
Also, verification that the parser works correctly is substantially
easier with a yacc grammar. You can almost do it by eye that way.

That's my personal opinion.

Good luck!

Remon

Remon Lapid
dynamicsoft
rlapid@dynamicsoft.com





From owner-sip-outgoing@lists.research.bell-labs.com  Thu Dec 30 06:37:15 1999
Received: from lists.research.bell-labs.com (paperless.dnrc.bell-labs.com [135.180.161.172])
	by ietf.org (8.9.1a/8.9.1a) with ESMTP id GAA23053
	for <sip-archive@odin.ietf.org>; Thu, 30 Dec 1999 06:37:14 -0500 (EST)
Received: by lists.research.bell-labs.com (Postfix)
	id 712B452BB; Thu, 30 Dec 1999 06:33:38 -0500 (EST)
Delivered-To: sip-outgoing-local@paperless.dnrc.bell-labs.com
Received: by lists.research.bell-labs.com (Postfix, from userid 20006)
	id BBD6452DF; Thu, 30 Dec 1999 06:33:37 -0500 (EST)
Delivered-To: sip-local@paperless.dnrc.bell-labs.com
Received: from grubby.research.bell-labs.com (grubby.research.bell-labs.com [135.104.2.9])
	by lists.research.bell-labs.com (Postfix) with SMTP id 7E35E52BB
	for <sip@lists.research.bell-labs.com>; Thu, 30 Dec 1999 06:33:03 -0500 (EST)
Received: from dusty.research.bell-labs.com ([135.104.2.7]) by grubby; Thu Dec 30 06:32:21 EST 1999
Received: from relay.mail.pipex.net ([158.43.128.38]) by dusty; Thu Dec 30 06:30:35 EST 1999
Received: (qmail 15748 invoked from network); 30 Dec 1999 11:32:06 -0000
Received: from gatekeeper.sgcs.co.uk (HELO bevx03.gpt.co.uk) (194.129.217.113)
  by iprelay.mail.pipex.net with SMTP; 30 Dec 1999 11:32:06 -0000
Received: from CONVERSION-DAEMON by siemenscomms.co.uk (PMDF V5.1-12 #D3115)
 id <01JK40EG6ZFK8WY2UV@siemenscomms.co.uk>; Thu, 30 Dec 1999 11:29:48 GMT
Received: from beex01.sgcs.co.uk (beex01.gpt.co.uk)
 by siemenscomms.co.uk (PMDF V5.1-12 #D3115)
 with ESMTP id <01JK40EESM5S8WY2JN@siemenscomms.co.uk>; Thu,
 30 Dec 1999 11:29:40 +0000 (GMT)
Received: by beex01.sgcs.co.uk with Internet Mail Service (5.5.2448.0)
 id <Y94H2ZKH>; Thu, 30 Dec 1999 11:31:12 +0000
Content-return: allowed
Date: Thu, 30 Dec 1999 11:31:11 +0000
From: "Drage, Keith" <Keith.Drage@siemenscomms.co.uk>
Subject: RE: TRIP
To: "'Vance Shipley'" <vances@motivity.ca>, James Yu <james.yu@neustar.com>,
        "'Jonathan Rosenberg'" <jdrosen@dynamicsoft.com>
Cc: John Mainwaring <crm312a@nortelnetworks.com>,
        Mark Foster <mark.foster@neustar.com>,
        iptel@lists.research.bell-labs.com, sip@lists.research.bell-labs.com
Message-id: <5AC7D3F55147D311AA1700A0C99583ED2C3607@beex03.sgcs.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2448.0)
Content-type: text/plain
Content-transfer-encoding: 7BIT
Comments: ***********************************************
Comments: *    Our domain is now siemenscomms.co.uk     *
Comments: * Please update your address book accordingly *
Comments: ***********************************************
Sender: owner-sip@lists.research.bell-labs.com
Precedence: bulk
Content-Transfer-Encoding: 7BIT

I don't know which part of Q.767 you are looking at, but my understanding
says that the mode of operation used across the international interface is
subject to bilateral agreement, and therefore neither method of address
sending is preferred. See statements throughout the document of the form:

"Note - The use of en-bloc or overlap signalling is based on bi-lateral
agreements"

I would also note that while Q.767 is still extensively used, particularly
for international operation, I would expect network providers to be
specifying base Q.761 through Q.764 nowadays for international operation,
noting that these documents do specify the behaviour of international
gateway exchanges. Current ETSI specifications (ISUP version 3) for
international operation are based on the 1997 version of the ITU-T
Recommendations, and will shortly move to the recently approved 1999
versions. Again these documents do not mandate either en-bloc or overlap
sending.

I have no direct understanding of the amount of use overlap dialling gets
across the international interface. I know operators try to collect as many
digits as possible before presenting the call to the international network
in the first place, if only because as soon as you send the Initial Address
Message (IAM), you have a circuit allocated that could potentially be used
elsewhere in generating revenue. This is done using timeouts as well as
knowledge of the numbering plan. This however does not necessarily mean that
they eliminate overlap dialling across the international interface, even if
they prefer not to use it.

The main justification for keeping overlap dialling has always been for
those countries with open numbering plans (primarily Germany and Austria).
Here, private networks using DDI are allowed to specify their own length of
the DDI number (within the constraints of the maximum number of digits
specified by E.164), and therefore even the receiving public network does
not necessarily know the length of any number unless it is an end subscriber
on their own system. I see no signs of these two countries wanting to remove
this capability, and therefore it will remain fundamentally part of E.164
(in that is unlikely that there will be a rule fixing the length of
subscriber numbers within a particular NDC). This probably also partly
explains the different views of these two countries on the best way to
handle number portability within their networks.

In my opinion, extensive use of timeouts is particularly unfriendly to the
calling user. To be effective, the timeouts have to be short, and occur just
when the user is referring back to his list for the remaining digits of the
long number he is dialling. The only real solution to avoiding overlap
dialling is where all terminals on the calling network are forced to predial
their numbers before hitting the send key. So far only the mobile networks
seem to have managed this.

Note that this is not a defence of overlap, merely a statement that it is a
fact of life in telecommunication signalling.

Keith Drage

> ---------------------------------------------------------------
> Keith Drage (keith.drage@siemenscomms.co.uk)
> Siemens Communications Limited,
> Technology Drive, Beeston, Nottingham NG9 1LA, UK
> Tel: +44 115 943 4991   Fax: +44 115 943 4992
> ---------------------------------------------------------------
> Internet communications are not secure and therefore Siemens
> Communications Limited does not accept legal responsibility for the
> contents of this message. Any views or opinions presented are solely
> those of the author and do not necessarily represent those of Siemens
> Communications Limited unless otherwise specifically stated.
> 


-----Original Message-----
From: Vance Shipley [mailto:vances@motivity.ca]
Sent: Tuesday, December 28, 1999 8:59 PM
To: James Yu; 'Jonathan Rosenberg'
Cc: John Mainwaring; Mark Foster; iptel@lists.research.bell-labs.com;
sip@lists.research.bell-labs.com
Subject: RE: TRIP



James Yu writes:
}
}  Overlap dialing probably happens often for international calls where the
}  switch in the originating country don't know much about the numbering
plan
}  of the destination country.  The criteria to begin processing the
received

Actually no.  The ITU recommendation Q.767 "Application of the ISDN user
part
of CCITT Signalling System No. 7 for international ISDN interconnections" is
used today on the International Plane between countries public telephone
networks.
This recommendation defines how ISUP signaling is to be applied toward the
application of international gateway interconnections to other countries
gateways.

Q.767 does not allow for overlap signaling.  If the local serving office
switch
for the originating subscriber uses overlap signaling to speed up call
routing
then an intermediate switch, or the gateway switch itself, will gather up
all
the digits and send the call forward enbloc.

Overlap signaling is not used in ANSI ISUP at all.  Overlap signaling was
used
in the days of in band signaling to speed up the delays caused by the
relatively
long duration of the tones used.  One area where it was almost always used
was
in fact international calls.  In the case of FGD signaling in North America
when
an international call was presented the country code was sent first using
<KP>CC<ST> so that the switch could begin route selection and grab an
outgoing
route while the rest of the digits where pulsed in.  This becomes
unnecessary
when ISUP signaling is used.

In my mind overlap signaling should never be generated but may have to be
supported
when received.  The receiving switch must buffer the received digits until
it
decides
that all have been received and then forward the call enbloc.  There are two
methods
the switch may use to recognize when all digits have been received.  The
best is
when
the switch has an accurate view of the dialing plan(s).  It would know that
country
code XX, city code YYY requires exactly 7 digits in the subscriber number
and
when it
received all 12 digits it would forward the call enbloc.  If it never
received
enough
digits it would eventually time out and release the call with a cause code
indicating
"address incomplete".  The second method simply applies an inter digit timer
and
maximum
number of digits.  Digits are buffered until either the maximum expected are
received,
the inter digit delay timer expires or an end-of-dial digit is recognized
(e.g.
<ST>
or '#').  These methods are generally both used where some dial plans are
recognized
(e.g. North American Plan) and the rest use the time out.

	-Vance




---------
This message came from the IETF IPTEL Working Group Mailing List.



