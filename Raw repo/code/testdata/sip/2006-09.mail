From sip-bounces@ietf.org Fri Sep 01 00:44:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJ0pP-0006PG-SF; Fri, 01 Sep 2006 00:40:27 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJ0pO-0006P8-Ch
	for sip@ietf.org; Fri, 01 Sep 2006 00:40:26 -0400
Received: from stsc1260-eth-s1-s1p1-vip.va.neustar.com ([156.154.16.129]
	helo=chiedprmail1.ietf.org)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GIyq8-0001eh-Gf
	for sip@ietf.org; Thu, 31 Aug 2006 22:33:04 -0400
Received: from sccrmhc14.comcast.net ([204.127.200.84])
	by chiedprmail1.ietf.org with esmtp (Exim 4.43) id 1GIyds-0003KS-Bl
	for sip@ietf.org; Thu, 31 Aug 2006 22:20:24 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (sccrmhc14) with ESMTP
	id <2006090102201901400kmp9ke>; Fri, 1 Sep 2006 02:20:19 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k812KJWI014981
	for <sip@ietf.org>; Thu, 31 Aug 2006 22:20:19 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k812KJNq014977;
	Thu, 31 Aug 2006 22:20:19 -0400
Date: Thu, 31 Aug 2006 22:20:19 -0400
Message-Id: <200609010220.k812KJNq014977@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <44EC537E.3000905@lucent.com> (vkg@lucent.com)
Subject: Re: [Sip] GRUU-10: "gruu" as both a header and URI parameter
References: <2B87277A-D19C-43D2-987B-C8DEA01456D2@estacado.net>	<44EA25CD.20709@cisco.com>
	<200608222213.k7MMDSBI010073@dragon.ariadne.com>
	<44EC537E.3000905@lucent.com>
X-Spam-Score: -2.6 (--)
X-Scan-Signature: 39bd8f8cbb76cae18b7e23f7cf6b2b9f
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: "Vijay K. Gurbani" <vkg@lucent.com>

   Dale.Worley@comcast.net wrote:
   > It would help a lot if we had a standardized terminology, but RFC 3261
   > didn't establish one.  At my company, we've used these terms:
   > 
   > 	Contact:  <foo@example.com;bar=1?Baz=2>;quux=3
   > 
   > "bar" is a "URI parameter"
   > "Baz" is a "header parameter"
   > "quuz" is a "field parameter"

   RFC 3261 does try to use the same terminology, except that
   the use of "header" is overloaded.  For instance, what you
   refer to as a "field parameter" above is actually termed
   as a "header parameter" in RFC 3261 in a very consistent
   manner.  In fact, Section 20.10 attempts to make a distinction
   between a URI parameter and a header parameter.

You're right, and I'd not spotted that.  Though a quick search showed
a couple of uses of "header parameter" where they must have meant
"header field":  page 122, line 21; and page 157, end of section
19.1.5.

   Unfortunately, rfc3261 also calls the construct "?Baz=2" as a
   header.  That is what I think is problematic, since "Contact"
   is a header as well.

RFC 3261 is consistent in calling those things "header fields".  I
don't understand why, as they're called "headers" in HTTP and SMTP,
which is where the concept is taken from.  Anybody have the background
on that?

It's unfortunate that 3261 didn't include a glossary of such syntactic
terms.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 01 01:43:47 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJ1lm-0007Tt-4J; Fri, 01 Sep 2006 01:40:46 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJ1lj-0007TP-Ef
	for sip@ietf.org; Fri, 01 Sep 2006 01:40:43 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GJ1lg-00031V-0E
	for sip@ietf.org; Fri, 01 Sep 2006 01:40:43 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k815eJOu017403
	for <sip@ietf.org>; Fri, 1 Sep 2006 00:40:19 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 1 Sep 2006 00:40:35 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 1 Sep 2006 07:40:33 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
Date: Fri, 1 Sep 2006 07:40:33 +0200
Message-ID: <5D1A7985295922448D5550C94DE2918034E95C@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
Thread-Index: Aca4t6jzb0cIdg3jQp2xn/3iF5Fd1gRcnWrAANcpi/A=
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: "IETF SIP List" <sip@ietf.org>
X-OriginalArrivalTime: 01 Sep 2006 05:40:33.0877 (UTC)
	FILETIME=[24D4B050:01C6CD89]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 8fbbaa16f9fd29df280814cb95ae2290
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

The rescheduled date for this conference call in Monday 11th September.
Details as on original call and are as follows:

> 	8:00 am Pacific Time
> 	10:00 am Central US Time
> 	11:00 am Eastern US Time
> 	4:00 pm UK
> 	5:00 pm Central European Summer Time
>=20
> Bridge details as follows:
>=20
> Access Phone Number:  8007718734
> International Access Phone Number:  +1 6477233953 7-Digit Access Code:

> 5776249
>=20

All people who have reviewed the document are welcome.

Note that I am still waiting on comments from some reviewers. If you
have comments, please submit them as soon as possible.

Regards

Keith

> -----Original Message-----
> From: Drage, Keith (Keith)=20
> Sent: 28 August 2006 01:25
> To: Drage, Keith (Keith); IETF SIP List
> Subject: RE: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
>=20
> I am having to reschedule the call on the 4th as a critical=20
> participant is no longer available. I will still be compiling=20
> the comments received over the next week or so.
>=20
> The conference call on the 4th is therefore cancelled.
>=20
> Please keep an eye open for the rescheduled dates.
>=20
> Regards
>=20
> Keith
>=20
> > -----Original Message-----
> > From: Drage, Keith (Keith) [mailto:drage@lucent.com]
> > Sent: 05 August 2006 21:31
> > To: IETF SIP List
> > Subject: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
> >=20
> > Working Group Last Call
> > -----------------------
> >=20
> > Jonathan has just published
> > http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-10.txt
> >  which should take into account all the major comments that=20
> have been=20
> > so far received on this document.
> >=20
> > Having initiated WGLC on this document on 13th January 2004, and=20
> > revised that WGLC on 5th July 2004 and 26th October 2005 we would=20
> > really like to reach a final conclusion of this WGLC.
> >=20
> > Therefore please review the document and submit your WGLC comments=20
> > within two weeks, ie. By the 21st August 2006.
> >=20
> > Process
> > -------
> >=20
> > In addition to an open invitation for review by all members of the=20
> > working group, we will be soliciting full review by a number of=20
> > experts who we believe will provide a good and complete=20
> understanding=20
> > of the issues and problems, if any, with the document. If=20
> you consider=20
> > you should be part of this list this please contact the WG chairs.
> >=20
> > The WG chairs will compile all submitted comments into a=20
> single review=20
> > document which will be discussed on the conference call=20
> below. Please=20
> > therefore submit your comments (to the SIP WG list and the=20
> WG chairs)=20
> > with information under the following headings for each comment:
> >=20
> > -	location in document
> > -	nature of comment (editorial, minor technical, critical error,
> > absolute show stopper - use your judgement on this)
> > -	comment
> > -	proposed fix
> >=20
> > We intend to have a conference call for reviewers to=20
> conclude on the=20
> > quality of the document on Monday 4th September at:
> >=20
> > 	8:00 am Pacific Time
> > 	10:00 am Central US Time
> > 	11:00 am Eastern US Time
> > 	4:00 pm UK
> > 	5:00 pm Central European Summer Time
> >=20
> > Bridge details as follows:
> >=20
> > Access Phone Number:  8007718734
> > International Access Phone Number:  +1 6477233953 7-Digit=20
> Access Code: =20
> > 5776249
> >=20
> > While this call is open to all WG members, we would expect=20
> only people=20
> > who have reviewed the document on this conference call. For=20
> details of=20
> > the process please see previous communication. Note that the above=20
> > does include those reviewers who reviewed the document and had no=20
> > comments - if you are in this class, please report it.
> >=20
> > Regards
> >=20
> > Keith
> >=20
> > Keith Drage
> > drage@lucent.com
> > tel: +44 1793 776249
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > sipping@ietf.org for new developments on the application of sip
> >=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 01 03:38:53 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJ3Yw-0004jq-9M; Fri, 01 Sep 2006 03:35:38 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJ3Yv-0004jd-3l
	for sip@ietf.org; Fri, 01 Sep 2006 03:35:37 -0400
Received: from p-mail2.rd.francetelecom.com ([195.101.245.16])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GJ3Yt-0000zq-OX
	for sip@ietf.org; Fri, 01 Sep 2006 03:35:37 -0400
Received: from ftrdmel10.rd.francetelecom.fr ([10.193.117.156]) by
	ftrdsmtp2.rd.francetelecom.fr with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Sep 2006 09:35:25 +0200
Received: from L-AT7568 ([10.193.5.59]) by ftrdmel10.rd.francetelecom.fr with
	Microsoft SMTPSVC(6.0.3790.1830); Fri, 1 Sep 2006 09:35:25 +0200
Date: Fri, 01 Sep 2006 09:35:57 +0200
From: "Xavier Marjou" <xavier.marjou@orange-ft.com>
To: pkyzivat@cisco.com
Subject: RE: [Sip] GRUU and Mid-Dialog Requests
Message-ID: <jbm.20060901093557.fcaf9715@L-AT7568>
X-Mailer: JBMail 3.2
X-OriginalArrivalTime: 01 Sep 2006 07:35:25.0797 (UTC)
	FILETIME=[30BC3950:01C6CD99]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 4adaf050708fb13be3316a9eee889caa
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

> Well, that is a separate discussion. For the moment we can discuss 
> what you are proposing with the understanding that it assumes the To 
> URI can be changed in the response.

I agree


> You don't show it, but I am assuming that (5) and (6) have
> To: Callee <sip:callee@example.com
> and that it is changed by the callee for message 7. Is that right?

Yes


> And then Caller is expected to consider the To URI in the response to be
> both the "connected party" and device-specific URI for future requests?

Yes


> In that case, the caller will need some rules for how to use that To-URI.
> What if it wants to present the identity to its user, or save it in a 
> call log for future callback? Does it strip off the opaque parameter?

Indeed, this behavior would need to be described. I don't see any issue to 
save it in a call-log (same case as a URI with a ;user=phone parameter).
I agree there would be an issue with the presentation of the identity if we 
want to also display the instance of the called party to the caller (the 
opaque parameter is, of course, not suited to be displayed in a GUI). 
Nevertheless, this does not make part of the use-cases.


> Assuming that caller also has a gruu, wouldn't it then need to use that
> as the From-URI in (5) and (7).

Yes he probably could do so if he has also successfully registered its GRUU 
AOR.


> I think this proposal mixes up a lot of different things.

Yes: as soon as an important modification happens, different derived 
problems can arise.




_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 01 15:14:59 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJER2-0003vG-E7; Fri, 01 Sep 2006 15:12:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJER1-0003vB-9O
	for sip@ietf.org; Fri, 01 Sep 2006 15:12:11 -0400
Received: from sj-iport-3-in.cisco.com ([171.71.176.72]
	helo=sj-iport-3.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GJEQz-0003yD-V7 for sip@ietf.org; Fri, 01 Sep 2006 15:12:11 -0400
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-3.cisco.com with ESMTP; 01 Sep 2006 12:12:09 -0700
X-IronPort-AV: i="4.08,201,1154934000"; 
	d="scan'208"; a="442286456:sNHT30995508"
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-3.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k81JC9m1018018 for <sip@ietf.org>; Fri, 1 Sep 2006 12:12:09 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k81JC8Yr010787
	for <sip@ietf.org>; Fri, 1 Sep 2006 12:12:08 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Sep 2006 12:12:08 -0700
Received: from jmpolk-wxp.cisco.com ([10.21.89.71]) by
	xfe-sjc-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 1 Sep 2006 12:12:08 -0700
Message-Id: <4.3.2.7.2.20060901140836.02829500@email.cisco.com>
X-Sender: jmpolk@email.cisco.com
X-Mailer: QUALCOMM Windows Eudora Version 4.3.2
Date: Fri, 01 Sep 2006 14:12:07 -0500
To: sip@ietf.org
From: "James M. Polk" <jmpolk@cisco.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-OriginalArrivalTime: 01 Sep 2006 19:12:08.0610 (UTC)
	FILETIME=[85274820:01C6CDFA]
DKIM-Signature: a=rsa-sha1; q=dns; l=1787; t=1157137929; x=1158001929;
	c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jmpolk@cisco.com;
	z=From:=22James=20M.=20Polk=22=20<jmpolk@cisco.com>
	|Subject:SIP=20Location=20Conveyance=20-04=20submitted;
	X=v=3Dcisco.com=3B=20h=3DOcF2xmP1SsDVHlgbQx/hSVXaE9k=3D;
	b=GlANQ3KvTl6ICRAiE38ZH8ilGCMmSq658zj2F7H9LpkcAraq2haenP6sRI3bqA6uMD4nYr1h
	NlaSQCZNas8SZldRkR0HEIL7rUCKdsGczbpWf8U4qsVjhqrgXWk+kb8U;
Authentication-Results: sj-dkim-3.cisco.com; header.From=jmpolk@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9ed51c9d1356100bce94f1ae4ec616a9
Subject: [Sip] SIP Location Conveyance -04 submitted
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

SIP WG

We've just submitted the -04 version of SIP Location Conveyance, with some 
minor and some major changes to the text and structure of the doc. It can 
be found here:

http://www.ietf.org/internet-drafts/draft-ietf-sip-location-conveyance-04.txt

Here is a highlevel list of the changes that have been made from the SIP WG 
version -03 to this version -04:

    - removed the inappropriate 2119 language from the Requirements section 
(which is now an appendix in the back, but will stay in the final version 
as a point of history of the doc)

    - removed the old Section 2., which was a "Location in a header vs. in 
a body" artifact from the original versions of the document. That subject 
is no longer current.

    - Added a new Geopriv (or Privacy) Considerations section, and 
interwove critical to know Geopriv points into the Intro

    - Changed the ABNF to reflect discussion on how restrictive the 
location-by-reference schemes should be, with an added "Editor's Note" 
discussing the issues being faced on this point.

    - Changed the "Location" header and option-tag to "Geolocation" header 
and option-tag, due to it being pointed out that there is a conflicting 
HTTP header called "Location".

    - Added a new element to PIDF-LO 'routing-query-allowed', which will 
"update" RFC 4119

    - Stipulated the Reason Header can be used in the 424 Response Message. 
This is allowed in 3326, but not normally how Reason is used.

    - added SUBSCRIBE and NOTIFY as Methods for location conveyance when 
used to dereference a sip:, sips: or pres: location-by-reference URI

    - Added OPTIONS Method for a UAC to request the location of a UAS with 
a Require header geolocation option-tag.

Comments are appreciated

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 01 18:07:31 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJH8L-00028q-H1; Fri, 01 Sep 2006 18:05:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJH8J-00028c-MI; Fri, 01 Sep 2006 18:05:03 -0400
Received: from mail146.messagelabs.com ([216.82.245.131])
	by ietf-mx.ietf.org with smtp (Exim 4.43)
	id 1GJH8D-0006nd-9l; Fri, 01 Sep 2006 18:05:03 -0400
X-VirusChecked: Checked
X-Env-Sender: mdolly@att.com
X-Msg-Ref: server-13.tower-146.messagelabs.com!1157148182!2746612!15
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [134.24.146.4]
Received: (qmail 10921 invoked from network); 1 Sep 2006 22:04:56 -0000
Received: from unknown (HELO attrh3i.attrh.att.com) (134.24.146.4)
	by server-13.tower-146.messagelabs.com with SMTP;
	1 Sep 2006 22:04:56 -0000
Received: from OCCLUST04EVS1.ugd.att.com (135.38.164.13) by
	attrh3i.attrh.att.com (7.2.052)
	id 44F1C304000ED3AA; Fri, 1 Sep 2006 18:04:56 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 1 Sep 2006 17:04:55 -0500
Message-ID: <28F05913385EAC43AF019413F674A017101B6E07@OCCLUST04EVS1.ugd.att.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Proposed work items for MIG
Thread-Index: AcbOEqhoXRg/AvAoTTuhvqVw36sfDA==
From: "Dolly, Martin C, ALABS" <mdolly@att.com>
To: <session-bounces@sip-voip.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 223e3c753032a50d5dc4443c921c3fcd
Cc: SIP List <Sip@ietf.org>, sipping@ietf.org
Subject: [Sip] Proposed work items for MIG
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1991474171=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1991474171==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6CE12.A8836BE4"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6CE12.A8836BE4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello all,
=20
As was announced in Montreal, a group of us are proposing to hold a BOF
in San Diego for a new working group MIG (once again the charter can be
found at:  www.sip-voip.org/charter.html
<outbind://23/www.sip-voip.org/charter.html>  and the associated mail
list at www.sip-voip.org). =20

=20

Part of the intention of MIG (Service Migration) is to off load some of
the work from sip/sipping, and in our presentation in Montreal we did
identify a couple of drafts that could be moved to the new group.  To
help facilitate discussions, below is an expanded list of drafts that
could be handled by the new group.  This list of drafts includes other
SDO requirements, PSTN interoperability drafts and other drafts that
include such topics, such as enterprise migration, that may fit the MIG
charter:

=20

draft-sinha-sip-block

draft-andreasen-sipping-rfc3603bis

draft-anil-sipping-bla

draft-camarillo-sipping-sbc-funcs

draft-fries-sipping-identity-enterprise-scenario

draft-froment-sipping-spit-authz-policies

draft-haluska-sipping-directory-assistance

draft-hasebe-sipping-race-examples

draft-jennings-sipping-pay

draft-dolly-sipping-atis-ptsc

draft-jesske-sipping-tispan-requirements

draft-dcsgroup-sipping-arch

draft-niccolini-sipping-feedback-spit

draft-poetzl-sipping-call-completion

draft-rocky-sipping-calling-party-category

draft-schubert-sipping-saml-cpc

draft-shacham-sipping-session-mobility

draft-worley-sipping-pickup

draft-zhang-sipping-overlap

=20

If anyone has any comments or opinions on any of these items, or if
anyone feels that they may have a draft that fits the MIG charter,
please feel free to comment on the MIG list.

=20

Cheers,

=20

Martin


------_=_NextPart_001_01C6CE12.A8836BE4
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2900.2914" name=3DGENERATOR></HEAD>
<BODY>
<DIV><FONT face=3D"Courier New" size=3D2><SPAN =
class=3D119555721-01092006>Hello=20
all,</SPAN></FONT></DIV>
<DIV><FONT face=3D"Courier New" size=3D2><SPAN=20
class=3D119555721-01092006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2><SPAN class=3D119555721-01092006>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'">As was announced =
in=20
<?xml:namespace prefix =3D st1 ns =3D =
"urn:schemas-microsoft-com:office:smarttags"=20
/><st1:City w:st=3D"on">Montreal</st1:City>, a group of us are proposing =
to hold a=20
BOF in <st1:City w:st=3D"on"><st1:place w:st=3D"on">San =
Diego</st1:place></st1:City>=20
for a new working group MIG (once again the charter can be found =
at:<SPAN=20
style=3D"mso-spacerun: yes">&nbsp; </SPAN><A=20
href=3D"outbind://23/www.sip-voip.org/charter.html">www.sip-voip.org/char=
ter.html</A>=20
and the associated mail list at <A=20
href=3D"http://www.sip-voip.org">www.sip-voip.org</A>).<SPAN=20
style=3D"mso-spacerun: yes">&nbsp; </SPAN></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'"><SPAN=20
style=3D"mso-spacerun: yes"></SPAN></SPAN>&nbsp;</P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'"><SPAN=20
style=3D"mso-spacerun: yes"></SPAN>Part of the intention of =
MIG&nbsp;<SPAN=20
class=3D119555721-01092006>(Service Migration) </SPAN>is to off load =
some of the=20
work from sip/sipping<SPAN class=3D119555721-01092006>,</SPAN> and in =
our=20
presentation in <st1:City w:st=3D"on"><st1:place=20
w:st=3D"on">Montreal</st1:place></st1:City> we did identify a couple of =
drafts=20
that could be moved to the new group.<SPAN style=3D"mso-spacerun: =
yes">&nbsp;=20
</SPAN>To help facilitate discussions, below is an expanded list of =
drafts that=20
could be handled by the new group.<SPAN style=3D"mso-spacerun: =
yes">&nbsp;=20
</SPAN>This list of drafts includes other SDO requirements, PSTN=20
interoperability drafts and other drafts that include such topics, such =
as=20
enterprise migration, that may fit the MIG charter:<?xml:namespace =
prefix =3D o ns=20
=3D "urn:schemas-microsoft-com:office:office" /><o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'"><o:p>&nbsp;</o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN =
lang=3DSV=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'; mso-ansi-language: =
SV">draft-sinha-sip-block<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN =
lang=3DSV=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'; mso-ansi-language: =
SV">draft-andreasen-sipping-rfc3603bis<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-anil-sipping-bla<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-camarillo-sipping-sbc-funcs</SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-fries-sipping-identity-enterprise-scenario<o:p></o:p></SPAN><=
/P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-froment-sipping-spit-authz-policies<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-haluska-sipping-directory-assistance<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-hasebe-sipping-race-examples<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-jennings-sipping-pay<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-dolly-sipping-atis-ptsc<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-jesske-sipping-tispan-requirements</SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-dcsgroup-sipping-arch<o:p></o:p></SPAN><o:p></o:p></SPAN></P>=

<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-niccolini-sipping-feedback-spit<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-poetzl-sipping-call-completion<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-rocky-sipping-calling-party-category<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-schubert-sipping-saml-cpc<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-shacham-sipping-session-mobility<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-worley-sipping-pickup<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'">draft-zhang-sipping-overlap<o:p></o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier =
New'"><o:p>&nbsp;</o:p></SPAN></P>
<P class=3DMsoNormal=20
style=3D"MARGIN: 0in 0in 0pt; mso-layout-grid-align: none"><SPAN=20
style=3D"FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'">If anyone has any =
comments=20
or opinions on any of these items, or if anyone feels that they may have =
a draft=20
that fits the MIG charter, please feel free to comment on the MIG=20
list.<o:p></o:p></SPAN></P>
<P class=3DMsoNormal style=3D"MARGIN: 0in 0in 0pt"><o:p><FONT =
face=3D"Courier New"=20
size=3D3>&nbsp;</FONT></o:p></P>
<P class=3DMsoNormal style=3D"MARGIN: 0in 0in 0pt"><o:p><SPAN=20
class=3D119555721-01092006><FONT=20
face=3D"Courier New">Cheers,</FONT></SPAN></o:p></P>
<P class=3DMsoNormal style=3D"MARGIN: 0in 0in 0pt"><o:p><SPAN=20
class=3D119555721-01092006><FONT face=3D"Courier =
New"></FONT></SPAN></o:p>&nbsp;</P>
<P class=3DMsoNormal style=3D"MARGIN: 0in 0in 0pt"><o:p><SPAN=20
class=3D119555721-01092006><FONT=20
face=3D"Courier =
New">Martin</FONT></SPAN></o:p></P></SPAN></FONT></DIV></BODY></HTML>

------_=_NextPart_001_01C6CE12.A8836BE4--


--===============1991474171==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1991474171==--




From sip-bounces@ietf.org Fri Sep 01 20:55:07 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJJhy-0001Kf-Bk; Fri, 01 Sep 2006 20:50:02 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJJhx-0001KO-C0
	for sip@ietf.org; Fri, 01 Sep 2006 20:50:01 -0400
Received: from smtp4.versatel.nl ([62.58.50.91])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GJJhw-0003MJ-3f
	for sip@ietf.org; Fri, 01 Sep 2006 20:50:01 -0400
Received: (qmail 32192 invoked by uid 0); 2 Sep 2006 00:49:48 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp4.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 2 Sep 2006 00:49:48 -0000
Message-ID: <003701c6ce29$b3e750e0$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: <sip@ietf.org>,
	"James M. Polk" <jmpolk@cisco.com>
References: <4.3.2.7.2.20060901140836.02829500@email.cisco.com>
Subject: Re: [Sip] SIP Location Conveyance -04 submitted
Date: Sat, 2 Sep 2006 02:49:53 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7a6398bf8aaeabc7a7bb696b6b0a2aad
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

James,

>    - Added OPTIONS Method for a UAC to request the location of a UAS with 
> a Require header geolocation option-tag.

I hope you meant something like "...to check whether the UAS supports the 
geolocation extension"?
If not, the above sounds like a very bad idea.

Regards,

Jeroen 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 01 21:05:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJJud-0003fN-1U; Fri, 01 Sep 2006 21:03:07 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJJub-0003fI-Kj
	for sip@ietf.org; Fri, 01 Sep 2006 21:03:06 -0400
Received: from opus.cs.columbia.edu ([128.59.20.100])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GJJua-0004Fc-CX
	for sip@ietf.org; Fri, 01 Sep 2006 21:03:05 -0400
Received: from [192.168.0.41] (pool-138-89-38-92.mad.east.verizon.net
	[138.89.38.92]) (authenticated bits=0)
	by opus.cs.columbia.edu (8.12.10/8.12.10) with ESMTP id k82130Gl016560
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NOT)
	for <sip@ietf.org>; Fri, 1 Sep 2006 21:03:01 -0400 (EDT)
In-Reply-To: <003701c6ce29$b3e750e0$0601a8c0@BEMBUSTER>
References: <4.3.2.7.2.20060901140836.02829500@email.cisco.com>
	<003701c6ce29$b3e750e0$0601a8c0@BEMBUSTER>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2FD5FAC8-072A-4065-9E90-C0B62F7E9210@cs.columbia.edu>
Content-Transfer-Encoding: 7bit
From: Henning Schulzrinne <hgs@cs.columbia.edu>
Subject: Re: [Sip] SIP Location Conveyance -04 submitted
Date: Fri, 1 Sep 2006 21:02:52 -0400
To: IETF SIP List <sip@ietf.org>
X-Mailer: Apple Mail (2.752.2)
X-PerlMx-Spam: Gauge=XXII, Probability=22%, X-Seen-By filter1.cs.columbia.edu
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 3e15cc4fdc61d7bce84032741d11c8e5
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Since you mention it: I think the Supported header is not a great  
idea. It is unnecessary since a receiver can simply ignore the  
Geolocation header. The Require usage is unorthodox, to say the least.

To cite RFC 3261, Section 8.1.1.9:

If the UAC supports extensions to SIP that can be applied by the
    server to the response, the UAC SHOULD include a Supported header
    field in the request listing the option tags (Section 19.2) for  
those
    extensions.

However, the Geolocation header is in the *request*, not the  
response, so it is inappropriate.

Similarly, the Require header (Section 20.32 and elsewhere) is also  
inappropriately used:

  The Require header field is used by UACs to tell UASs about options
    that the UAC expects the UAS to support in order to process the
    request.  Although an optional header field, the Require MUST NOT be
    ignored if it is present.

Thus, the usage is not correct as written.

The simple solution is to add a "Location Required" 4xx response  
code. However, I find it hard to believe that you'd really want this.  
If an emergency call doesn't contain location information, are you  
going to refuse the call and let the person die (instead of routing  
to a default call center)? You might as well rename the response/ 
require option "Lawyer required".

Henning

On Sep 1, 2006, at 8:49 PM, Jeroen van Bemmel wrote:

> James,
>
>>    - Added OPTIONS Method for a UAC to request the location of a  
>> UAS with a Require header geolocation option-tag.
>
> I hope you meant something like "...to check whether the UAS  
> supports the geolocation extension"?
> If not, the above sounds like a very bad idea.
>
> Regards,
>
> Jeroen
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 02 05:45:35 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJS0N-0002zp-Or; Sat, 02 Sep 2006 05:41:35 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJS0M-0002zQ-Mx
	for sip@ietf.org; Sat, 02 Sep 2006 05:41:34 -0400
Received: from smtp4.versatel.nl ([62.58.50.91])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GJS0J-0001HJ-9y
	for sip@ietf.org; Sat, 02 Sep 2006 05:41:34 -0400
Received: (qmail 11897 invoked by uid 0); 2 Sep 2006 09:41:18 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp4.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 2 Sep 2006 09:41:18 -0000
Message-ID: <001a01c6ce73$f3121fd0$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Henning Schulzrinne" <hgs@cs.columbia.edu>, "IETF SIP List" <sip@ietf.org>
References: <4.3.2.7.2.20060901140836.02829500@email.cisco.com><003701c6ce29$b3e750e0$0601a8c0@BEMBUSTER>
	<2FD5FAC8-072A-4065-9E90-C0B62F7E9210@cs.columbia.edu>
Subject: Re: [Sip] SIP Location Conveyance -04 submitted
Date: Sat, 2 Sep 2006 11:41:21 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: ffa9dfbbe7cc58b3fa6b8ae3e57b0aa3
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Henning,

> The simple solution is to add a "Location Required" 4xx response  code. 
> However, I find it hard to believe that you'd really want this.  If an 
> emergency call doesn't contain location information, are you  going to 
> refuse the call and let the person die (instead of routing  to a default 
> call center)? You might as well rename the response/ require option 
> "Lawyer required".
>
> Henning

For the emergency case, I agree that a server requiring location to process 
the request would not be desirable. However, for other applications such as 
location based routing in general, I think this could be a valid use case.

Another thing: we might want the following addition (in section 5.2): if the 
UAS supports this extension, it SHOULD add a Supported: geolocation to its 
response. This will enable the UAC to verify that the UAS understood / 
processed its location. If it is missing, particularly in an emergency 
scenario, the UAC could warn the user that location conveyance might have 
failed.

Regards,

Jeroen 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 02 06:06:08 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJSM1-0002Yq-1b; Sat, 02 Sep 2006 06:03:57 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJSLz-0002Yk-Or
	for sip@ietf.org; Sat, 02 Sep 2006 06:03:55 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GJSLy-0002Mc-Ei
	for sip@ietf.org; Sat, 02 Sep 2006 06:03:55 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-1.cisco.com with ESMTP; 02 Sep 2006 03:03:54 -0700
X-IronPort-AV: i="4.08,202,1154934000"; 
	d="scan'208"; a="39590841:sNHT33237156"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k82A3rfj028556; Sat, 2 Sep 2006 06:03:53 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k82A3ruI012596; 
	Sat, 2 Sep 2006 06:03:53 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Sep 2006 06:03:53 -0400
Received: from jmpolk-wxp.cisco.com ([10.89.20.50]) by
	xfe-rtp-202.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 2 Sep 2006 06:03:52 -0400
Message-Id: <4.3.2.7.2.20060902045650.031d55d0@email.cisco.com>
X-Sender: jmpolk@email.cisco.com
X-Mailer: QUALCOMM Windows Eudora Version 4.3.2
Date: Sat, 02 Sep 2006 05:03:52 -0500
To: Henning Schulzrinne <hgs@cs.columbia.edu>, IETF SIP List <sip@ietf.org>
From: "James M. Polk" <jmpolk@cisco.com>
Subject: Re: [Sip] SIP Location Conveyance -04 submitted
In-Reply-To: <2FD5FAC8-072A-4065-9E90-C0B62F7E9210@cs.columbia.edu>
References: <003701c6ce29$b3e750e0$0601a8c0@BEMBUSTER>
	<4.3.2.7.2.20060901140836.02829500@email.cisco.com>
	<003701c6ce29$b3e750e0$0601a8c0@BEMBUSTER>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-OriginalArrivalTime: 02 Sep 2006 10:03:53.0029 (UTC)
	FILETIME=[1845B750:01C6CE77]
DKIM-Signature: a=rsa-sha1; q=dns; l=3377; t=1157191434; x=1158055434;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jmpolk@cisco.com;
	z=From:=22James=20M.=20Polk=22=20<jmpolk@cisco.com>
	|Subject:Re=3A=20[Sip]=20SIP=20Location=20Conveyance=20-04=20submitted
	|To:Henning=20Schulzrinne=20<hgs@cs.columbia.edu>,
	=20IETF=20SIP=20List=20<si p@ietf.org>;
	X=v=3Dcisco.com=3B=20h=3D2vv+kX1+oWsvBlpx77tkM2aL9CA=3D;
	b=c3LQEkTRxgGDmG8iQEzkRBN9VsIZSWRccKCKJyhYQrfmjnmh7eM24Q8TgHhoZmhZsSpwDRP+
	PNrlghG47wDBnWxmwkl6K6TPVuFzTqILgVDzEITM0EkWkkk4YzqApMaf;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=jmpolk@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: bdc523f9a54890b8a30dd6fd53d5d024
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

At 09:02 PM 9/1/2006 -0400, Henning Schulzrinne wrote:
>Since you mention it: I think the Supported header is not a great
>idea. It is unnecessary since a receiver can simply ignore the
>Geolocation header. The Require usage is unorthodox, to say the least.
>
>To cite RFC 3261, Section 8.1.1.9:
>
>If the UAC supports extensions to SIP that can be applied by the
>    server to the response, the UAC SHOULD include a Supported header
>    field in the request listing the option tags (Section 19.2) for
>those
>    extensions.
>
>However, the Geolocation header is in the *request*, not the
>response, so it is inappropriate.

Fair point, but in times that the UAC understands this extension, but does 
not have its location, it needs to be able to tell a location-routing proxy 
not to bother erroring the request with a 424, and just continue with 
processing the original request, either to a default destination or to 
search for the UAC's location itself (somehow, and I have ideas if wifi is 
used, or if there is any probing capability this document shouldn't mention)


>Similarly, the Require header (Section 20.32 and elsewhere) is also
>inappropriately used:

It was originally only in an INVITE message (requiring the UAS's location 
in the response).  I figured out quickly that if that use-case were 
permissable, then its use in OPTIONS was equally valid, which I know isn't 
popular.

I have to admit, this was a chancy inclusion for requesting the UAS's 
location.  It can easily be removed unless someone really wants it.  The 
text is pretty standalone, so nothing else is affected by its removal.


>  The Require header field is used by UACs to tell UASs about options
>    that the UAC expects the UAS to support in order to process the
>    request.  Although an optional header field, the Require MUST NOT be
>    ignored if it is present.
>
>Thus, the usage is not correct as written.
>
>The simple solution is to add a "Location Required" 4xx response
>code. However, I find it hard to believe that you'd really want this.
>If an emergency call doesn't contain location information, are you
>going to refuse the call and let the person die (instead of routing
>to a default call center)? You might as well rename the response/ require 
>option "Lawyer required".
>
>Henning
>
>On Sep 1, 2006, at 8:49 PM, Jeroen van Bemmel wrote:
>
>>James,
>>
>>>    - Added OPTIONS Method for a UAC to request the location of a
>>>UAS with a Require header geolocation option-tag.
>>
>>I hope you meant something like "...to check whether the UAS
>>supports the geolocation extension"?
>>If not, the above sounds like a very bad idea.
>>
>>Regards,
>>
>>Jeroen
>>
>>_______________________________________________
>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>This list is for NEW development of the core SIP Protocol
>>Use sip-implementors@cs.columbia.edu for questions on current sip
>>Use sipping@ietf.org for new developments on the application of sip
>
>
>_______________________________________________
>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>This list is for NEW development of the core SIP Protocol
>Use sip-implementors@cs.columbia.edu for questions on current sip
>Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 02 10:56:31 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJWpd-0003ei-1Y; Sat, 02 Sep 2006 10:50:49 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJWpc-0003eY-Af
	for sip@ietf.org; Sat, 02 Sep 2006 10:50:48 -0400
Received: from opus.cs.columbia.edu ([128.59.20.100])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GJWpb-0000Hh-2x
	for sip@ietf.org; Sat, 02 Sep 2006 10:50:48 -0400
Received: from [192.168.0.41] (pool-138-89-38-92.mad.east.verizon.net
	[138.89.38.92]) (authenticated bits=0)
	by opus.cs.columbia.edu (8.12.10/8.12.10) with ESMTP id k82EohGl028811
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NOT);
	Sat, 2 Sep 2006 10:50:44 -0400 (EDT)
In-Reply-To: <4.3.2.7.2.20060902045650.031d55d0@email.cisco.com>
References: <003701c6ce29$b3e750e0$0601a8c0@BEMBUSTER>
	<4.3.2.7.2.20060901140836.02829500@email.cisco.com>
	<003701c6ce29$b3e750e0$0601a8c0@BEMBUSTER>
	<4.3.2.7.2.20060902045650.031d55d0@email.cisco.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B4C7C050-EC76-4607-BAAE-16578BF4657C@cs.columbia.edu>
Content-Transfer-Encoding: 7bit
From: Henning Schulzrinne <hgs@cs.columbia.edu>
Subject: Re: [Sip] SIP Location Conveyance -04 submitted
Date: Sat, 2 Sep 2006 10:50:36 -0400
To: "James M. Polk" <jmpolk@cisco.com>
X-Mailer: Apple Mail (2.752.2)
X-PerlMx-Spam: Gauge=XXII, Probability=22%, X-Seen-By filter1.cs.columbia.edu
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7aafa0432175920a4b3e118e16c5cb64
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

> Fair point, but in times that the UAC understands this extension,  
> but does not have its location, it needs to be able to tell a  
> location-routing proxy not to bother erroring the request with a  
> 424, and just continue with processing the original request, either  
> to a default destination or to search for the UAC's location itself  
> (somehow, and I have ideas if wifi is used, or if there is any  
> probing capability this document shouldn't mention)
>

This may be more a matter of lack of clarity in the description.

Let's take the non-emergency case of ordering pizza and see what  
needs to happen:

(1) hungry customer places call to pizza.example.com, but the SIP  
client doesn't know that this destination would like to do location- 
based routing and obviously doesn't want to include location with  
every call;

(2) the destination needs to be able to tell the UAC that it should  
include location, if possible, but directly process the request if not


Thus, the Supported option tag would *only* appear in requests and  
only if the Geolocation header is not present.

I think Sections 3.5 and 5.1 are very unclear and confusing on that  
score.


The draft should say that such inclusion can't be automatic for non- 
emergency calls. (It could be pre-configured; for example, I could  
configure my address book to always include location information when  
calling AAA.)


>
>> Similarly, the Require header (Section 20.32 and elsewhere) is also
>> inappropriately used:
>
> It was originally only in an INVITE message (requiring the UAS's  
> location in the response).  I figured out quickly that if that use- 
> case were permissable, then its use in OPTIONS was equally valid,  
> which I know isn't popular.
>
> I have to admit, this was a chancy inclusion for requesting the  
> UAS's location.  It can easily be removed unless someone really  
> wants it.  The text is pretty standalone, so nothing else is  
> affected by its removal.

Unless you're proposing to update RFC 3261, removal is not exactly a  
matter of choice.

Henning

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 02 10:56:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GJWsL-00071n-B4; Sat, 02 Sep 2006 10:53:37 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GJWsK-00071i-Ky
	for sip@ietf.org; Sat, 02 Sep 2006 10:53:36 -0400
Received: from opus.cs.columbia.edu ([128.59.20.100])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GJWsJ-0000Sd-Ea
	for sip@ietf.org; Sat, 02 Sep 2006 10:53:36 -0400
Received: from [192.168.0.41] (pool-138-89-38-92.mad.east.verizon.net
	[138.89.38.92]) (authenticated bits=0)
	by opus.cs.columbia.edu (8.12.10/8.12.10) with ESMTP id k82ErVGl028964
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NOT);
	Sat, 2 Sep 2006 10:53:32 -0400 (EDT)
In-Reply-To: <001a01c6ce73$f3121fd0$0601a8c0@BEMBUSTER>
References: <4.3.2.7.2.20060901140836.02829500@email.cisco.com><003701c6ce29$b3e750e0$0601a8c0@BEMBUSTER>
	<2FD5FAC8-072A-4065-9E90-C0B62F7E9210@cs.columbia.edu>
	<001a01c6ce73$f3121fd0$0601a8c0@BEMBUSTER>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2B34B48D-06FE-49EA-80B8-812F3ECEC122@cs.columbia.edu>
Content-Transfer-Encoding: 7bit
From: Henning Schulzrinne <hgs@cs.columbia.edu>
Subject: Re: [Sip] SIP Location Conveyance -04 submitted
Date: Sat, 2 Sep 2006 10:53:24 -0400
To: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
X-Mailer: Apple Mail (2.752.2)
X-PerlMx-Spam: Gauge=XXII, Probability=22%, X-Seen-By filter2.cs.columbia.edu
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7d33c50f3756db14428398e2bdedd581
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

>
> Another thing: we might want the following addition (in section  
> 5.2): if the UAS supports this extension, it SHOULD add a  
> Supported: geolocation to its response. This will enable the UAC to  
> verify that the UAS understood / processed its location. If it is  
> missing, particularly in an emergency scenario, the UAC could warn  
> the user that location conveyance might have failed.
>

My suggestion would be to keep the number of cases low and keep this  
simple. SIP is already more than complex enough, and this seems to be  
another example of would-be-nice complexity. In this particular case,  
I'd argue that this really doesn't add much value. What does it mean  
for a UAS to "understand" the header - parse it? log it? show it to  
the recipient?

Plus, for location-based routing, I care that the proxy does  
something with it, not the UAS.




_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 04 15:21:51 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKJvk-0005MP-Gk; Mon, 04 Sep 2006 15:16:24 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKJvi-0005MH-EO
	for sip@ietf.org; Mon, 04 Sep 2006 15:16:22 -0400
Received: from ihemail2.lucent.com ([192.11.222.163])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKJve-0003Ac-3C
	for sip@ietf.org; Mon, 04 Sep 2006 15:16:22 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail2.lucent.com (8.13.6/IER-o) with ESMTP id k84JGCWN019114;
	Mon, 4 Sep 2006 14:16:13 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 4 Sep 2006 14:16:12 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 4 Sep 2006 21:16:11 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Mon, 4 Sep 2006 21:16:09 +0200
Message-ID: <5D1A7985295922448D5550C94DE291803876FC@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WGLC: draft-ietf-sip-acr-code
Thread-Index: AcbQVpQxmKblX65tTtObFaLQJUouaQ==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: "IETF SIP List" <sip@ietf.org>
X-OriginalArrivalTime: 04 Sep 2006 19:16:11.0121 (UTC)
	FILETIME=[94F0C610:01C6D056]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e5ba305d0e64821bf3d8bc5d3bb07228
Cc: 
Subject: [Sip] WGLC: draft-ietf-sip-acr-code
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

(as WG chair)

This is to announce a Working Group Last Call on:

http://www.ietf.org/internet-drafts/draft-ietf-sip-acr-code-02.txt

Rejecting Anonymous Requests in the Session Initiation Protocol (SIP)

Please review and provide comments (along with any suggestions for
resolution) on this document by:

	Monday 18th September 2006.
	---------------------------

In addition, if you have reviewed and have no comments on this version
of the document, that is useful information, so please indicate this
direct to the WG chairs.

As this is one of the simplest documents the SIP WG has dealt with in a
long while, we encourage you to take the few minutes needed to read this
one, and get comments to us by the deadline.

Regards

Keith


Keith Drage
Lucent Technologies
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 04 15:24:09 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKK1M-0000fL-4r; Mon, 04 Sep 2006 15:22:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKK1K-0000d6-U4
	for sip@ietf.org; Mon, 04 Sep 2006 15:22:10 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKK1I-0004L8-P1
	for sip@ietf.org; Mon, 04 Sep 2006 15:22:10 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k84JLpJF003596;
	Mon, 4 Sep 2006 14:21:51 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 4 Sep 2006 14:22:06 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 4 Sep 2006 21:22:04 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Mon, 4 Sep 2006 21:22:03 +0200
Message-ID: <5D1A7985295922448D5550C94DE291803876FD@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WGLC: draft-ietf-sip-connected-identity
Thread-Index: AcbQV2brJET+D2wYRIK3vYlQKHXq7g==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 04 Sep 2006 19:22:04.0387 (UTC)
	FILETIME=[6780E330:01C6D057]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: bb8f917bb6b8da28fc948aeffb74aa17
Cc: "Elwell, John" <john.elwell@siemens.com>
Subject: [Sip] WGLC: draft-ietf-sip-connected-identity
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

(as WG chair)

This is to announce a Working Group Last Call on:

http://www.ietf.org/internet-drafts/draft-ietf-sip-connected-identity-01
.txt

Connected Identity in the Session Initiation Protocol (SIP)

Please review and provide comments (along with any suggestions for
resolution) on this document by:

	Monday 18th September 2006.
	---------------------------

In addition, if you have reviewed and have no comments on this version
of the document, that is useful information, so please indicate this
direct to the WG chairs.

Please note that a known issue with this document is that the example
calculation of the signatures and the corresponding certificate has not
yet occurred. This will be completed in the next version using the same
automatic mechanisms used for RFC 4474, so comments on this are not
necessary. However comments otherwise on the contents of the examples
are entirely appropriate.


Regards

Keith

Keith Drage
Lucent Technologies
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 01:20:37 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKTIE-0004u7-O7; Tue, 05 Sep 2006 01:16:14 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKTID-0004u2-5Y
	for sip@ietf.org; Tue, 05 Sep 2006 01:16:13 -0400
Received: from mail.tdsoft.com ([212.143.64.34] helo=vocaltec.com)
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GKTIB-0008Lb-8R
	for sip@ietf.org; Tue, 05 Sep 2006 01:16:13 -0400
Received: from mailserver.vocaltec.co.il ([172.16.1.203]) by eSafe SMTP Relay
	1157001365; Tue, 05 Sep 2006 08:15:41 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1255"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] WGLC: draft-ietf-sip-acr-code
Date: Tue, 5 Sep 2006 08:16:45 +0200
Message-ID: <431F3BDE11BF2F42A22CBEFA36BD88A461D1FE@mailserver.vocaltec.local>
In-Reply-To: <5D1A7985295922448D5550C94DE291803876FC@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WGLC: draft-ietf-sip-acr-code
Thread-Index: AcbQVpQxmKblX65tTtObFaLQJUouaQAWmTXg
From: "Raphael Tryster" <raphael.tryster@vocaltec.com>
To: "Drage, Keith \(Keith\)" <drage@lucent.com>, "IETF SIP List" <sip@ietf.org>
X-ESAFE-STATUS: Mail clean
X-ESAFE-DETAILS: Clean
X-Spam-Score: 0.1 (/)
X-Scan-Signature: c0bedb65cce30976f0bf60a0a39edea4
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I believe the singular of "automata" is "automaton".  Two instances - sec=
ond paragraph of section 1 and second bullet of section 3.

In section 4, "A UAC the does not understand" should be "A UAC that does =
not understand".

In the first sentence of section 7, "an request" should be "a request".  =
In the same sentence, "the called party" is singular, while "they" is plu=
ral.

Raphael Tryster

-----Original Message-----
From: Drage, Keith (Keith) [mailto:drage@lucent.com]
Sent: Monday, September 04, 2006 9:16 PM
To: IETF SIP List
Subject: [Sip] WGLC: draft-ietf-sip-acr-code


(as WG chair)

This is to announce a Working Group Last Call on:

http://www.ietf.org/internet-drafts/draft-ietf-sip-acr-code-02.txt

Rejecting Anonymous Requests in the Session Initiation Protocol (SIP)

Please review and provide comments (along with any suggestions for
resolution) on this document by:

	Monday 18th September 2006.
	---------------------------

In addition, if you have reviewed and have no comments on this version
of the document, that is useful information, so please indicate this
direct to the WG chairs.

As this is one of the simplest documents the SIP WG has dealt with in a
long while, we encourage you to take the few minutes needed to read this
one, and get comments to us by the deadline.

Regards

Keith


Keith Drage
Lucent Technologies
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
*************************************************************************=
*********************
This e-mail contains confidential, privileged or proprietary information =
to VocalTec Communications.
If you received this messege by mistake, please inform us and then delete=
 the original and all copies.
*** eSafe scanned this email for viruses, vandals, and malicious content.=
 ***
*************************************************************************=
*********************


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 03:11:37 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKV3E-0000nn-Ju; Tue, 05 Sep 2006 03:08:52 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKV3D-0000ni-8q
	for sip@ietf.org; Tue, 05 Sep 2006 03:08:51 -0400
Received: from mailgate.siemenscomms.co.uk ([195.171.110.225]
	helo=bemg01.siemenscomms.co.uk)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKV39-0005qh-Ql
	for sip@ietf.org; Tue, 05 Sep 2006 03:08:51 -0400
Received: from CONVERSION-DAEMON.siemenscomms.co.uk by siemenscomms.co.uk
	(PMDF V6.0-24 #40642) id <0J5300901YIVAY@siemenscomms.co.uk> for
	sip@ietf.org; Tue, 05 Sep 2006 08:08:55 +0100 (BST)
Received: from ntht207e.uksgcs.siemenscomms.co.uk ([137.223.247.82])
	by siemenscomms.co.uk (PMDF V6.0-24 #40642)
	with ESMTP id <0J530084FYIVFR@siemenscomms.co.uk>; Tue,
	05 Sep 2006 08:08:55 +0100 (BST)
Received: by ntht207e.uksgcs.siemenscomms.co.uk with Internet Mail Service
	(5.5.2657.72)	id <Q5Q8B1WN>; Tue, 05 Sep 2006 08:08:38 +0100
Content-return: allowed
Date: Tue, 05 Sep 2006 08:08:37 +0100
From: "Elwell, John" <john.elwell@siemens.com>
Subject: RE: [Sip] WGLC: draft-ietf-sip-acr-code
To: "Drage, Keith (Keith)" <drage@lucent.com>, IETF SIP List <sip@ietf.org>,
	Jonathan Rosenberg <jdrosen@cisco.com>
Message-id: <50B1CBA96870A34799A506B2313F266709C88371@ntht201e.siemenscomms.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Score: 0.0 (/)
X-Scan-Signature: cd26b070c2577ac175cd3a6d878c6248
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

1. Section 1, first paragraph. Would it be beneficial to mention the
anonymity provisions of RFC 4474, i.e., a signature that says the request
originated at the domain indicated in the From header field but the specific
user is not disclosed? If so, then RFC 4474 would need to be added as an
informative reference.

2. Section 1, 2nd paragraph "that reason phrase is not useful for automata".
Add "or where the caller speaks a different language". 

3. I am not sure where it fits, but should there be mention of the HERFP
problem, i.e. 433 being masked by some other response code at a forking
proxy?

NITS:
4. Section 4, first paragraph: "if user continues" - change to "if the user
continues".

5. Section 4, second paragraph: "A UAC the does not understand" - change to
"A UAC that does not understand".

6. Section 5: "the server refused the fulfill" - change to "the server
refused to fulfill".

7. Section 7: "an request" - change to "a request".

8. Section 7, second paragraph "this has the desired effect" - change to
"anonymous call rejection has the desired effect". ("this" looks like it
refers to the fact that telemarketeers frequently withhold their identity).

John



> -----Original Message-----
> From: Drage, Keith (Keith) [mailto:drage@lucent.com] 
> Sent: 04 September 2006 20:16
> To: IETF SIP List
> Subject: [Sip] WGLC: draft-ietf-sip-acr-code
> 
> (as WG chair)
> 
> This is to announce a Working Group Last Call on:
> 
> http://www.ietf.org/internet-drafts/draft-ietf-sip-acr-code-02.txt
> 
> Rejecting Anonymous Requests in the Session Initiation Protocol (SIP)
> 
> Please review and provide comments (along with any suggestions for
> resolution) on this document by:
> 
> 	Monday 18th September 2006.
> 	---------------------------
> 
> In addition, if you have reviewed and have no comments on this version
> of the document, that is useful information, so please indicate this
> direct to the WG chairs.
> 
> As this is one of the simplest documents the SIP WG has dealt 
> with in a
> long while, we encourage you to take the few minutes needed 
> to read this
> one, and get comments to us by the deadline.
> 
> Regards
> 
> Keith
> 
> 
> Keith Drage
> Lucent Technologies
> drage@lucent.com
> tel: +44 1793 776249
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 06:05:05 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKXjv-0004KF-6m; Tue, 05 Sep 2006 06:01:07 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKXjp-0004GG-8E; Tue, 05 Sep 2006 06:01:01 -0400
Received: from co300216-ier2.net.avaya.com ([198.152.13.103])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GKXjn-0006Ai-Vj; Tue, 05 Sep 2006 06:01:01 -0400
Received: from IS0004AVEXU1.global.avaya.com (h135-64-105-51.avaya.com
	[135.64.105.51])
	by co300216-ier2.net.avaya.com (Switch-3.1.8/Switch-3.1.7) with ESMTP
	id k859s4Jp002956; Tue, 5 Sep 2006 05:54:04 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Date: Tue, 5 Sep 2006 13:00:53 +0300
Message-ID: <AAB4B3D3CF0F454F98272CBE187FDE2F0B2BD620@IS0004AVEXU1.global.avaya.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Textual Convention for URI
Thread-Index: AcbQ0iwsOF8DqMBeRQmZcZbXPLGYOA==
From: "Romascanu, Dan \(Dan\)" <dromasca@avaya.com>
To: "IETF SIP List" <sip@ietf.org>
X-Scanner: InterScan AntiVirus for Sendmail
X-Spam-Score: 0.0 (/)
X-Scan-Signature: ea4ac80f790299f943f0a53be7e1a21a
Subject: [Sip] Textual Convention for URI
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


I would appreciate advice about an appropriate SMIv2 Textual Convention
for URIs.=20

The closest TC we are aware of is the following definition copied from
the NETWORK-SERVICES-MIB (RFC 2788):

  -- Uniform Resource Locators are stored in URLStrings.

  URLString ::=3D TEXTUAL-CONVENTION
      DISPLAY-HINT "255a"
      STATUS current
      DESCRIPTION
          "A Uniform Resource Locator represented in accordance
           with RFCs 1738 and 2368, presented in the NVT ASCII
           charset defined in RFC 854."
      SYNTAX OCTET STRING (SIZE (0..255))

Is this sufficient anymore these days?=20

Note that  the size 255 is the usual constraint we traditionally put on
all SNMP octet strings since at the end they must fit into 484 byte SNMP
messages. So what we typically do is to impose SNMP constraints that do
not exist in the managed technology. :-(

Thanks,

Dan
=20


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 06:26:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKY6Y-00039c-KD; Tue, 05 Sep 2006 06:24:30 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKY6X-00039T-BZ
	for sip@ietf.org; Tue, 05 Sep 2006 06:24:29 -0400
Received: from szxga02-in.huawei.com ([61.144.161.54])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKY6U-0001Io-RV
	for sip@ietf.org; Tue, 05 Sep 2006 06:24:29 -0400
Received: from huawei.com (szxga02-in [172.24.2.6])
	by szxga02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J5400FR48DIN0@szxga02-in.huawei.com> for
	sip@ietf.org; Tue, 05 Sep 2006 18:41:42 +0800 (CST)
Received: from huawei.com ([172.24.1.3])
	by szxga02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J5400LY58DH1H@szxga02-in.huawei.com> for
	sip@ietf.org; Tue, 05 Sep 2006 18:41:42 +0800 (CST)
Received: from CMTEST6 ([10.70.149.78])
	by szxml01-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J5400KUM8JK09@szxml01-in.huawei.com> for
	sip@ietf.org; Tue, 05 Sep 2006 18:45:20 +0800 (CST)
Date: Tue, 05 Sep 2006 18:23:27 +0800
From: Tina TSOU <tena@huawei.com>
To: sip@ietf.org
Message-id: <002101c6d0d5$53edc260$4e95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-Priority: 3
X-MSMail-priority: Normal
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 7fa173a723009a6ca8ce575a65a5d813
Subject: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1255132280=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1255132280==
Content-type: multipart/alternative;
	boundary="Boundary_(ID_Qzhqz0MVnmtbxf0AQ9G6GQ)"

This is a multi-part message in MIME format.

--Boundary_(ID_Qzhqz0MVnmtbxf0AQ9G6GQ)
Content-type: text/plain; charset=gb2312
Content-transfer-encoding: 7BIT

Hi all,
I had some doubts about sip-sips-guidelines draft as following. It will be appreciated if someone would like to reply it.


1. Does SIPS always require TLS? In IMS case, if I-CSCF of different operators already have an IPSec link, is it mandatory to establish another TLS link above IPSec? 

2. For this statement,

<Quote>
OPEN ISSUE:  What error code should be returned if not?  Should it be 403 "Forbidden"?
</Quote>

If the Proxy inbetween had inserted a SIP URI in Path header, how the UA can find this if only a 403 is been received?

3. For section 6 paragraph 1 the following statement,

<Quote>
This poses a very significant problem if Record-Route is not used in that if the remote end does not support SIPS, it will not be able to send a mid-dialog request to the client.
</Quote>

I had a doubt that if the remote end doesn't support SIPS, then there must be one Proxy will RR as the RFC3261 16.6 bullet 4 (the text had been quoted in the following for reference). And the problem mentioned in the above statement will not exist.


RFC3261 16.6 bullet 4
<Quote>
Furthermore, if the request was not received over TLS, the proxy MUST insert a Record-Route header field.  In a similar fashion, a proxy that receives a request over TLS, but generates a request without a SIPS URI in the Request-URI or topmost Route header field value (after the post         processing of bullet 6), MUST insert a Record-Route header field that is not a SIPS URI.
</Quote>

4. Appendix A, Open issue 1, Perhaps using Notify to intimate is not a good idea as there may be no implicit subscription because of subscription suppression (draft-ietf-sip-refer-with-norefersub).

5. Appendix B: Is the procedure defined in main document "explicit registration"? But this phrase cannot be found in main document.


B. R.
Tina 
Messengers: 
MSN: tinatsou6@hotmail.com   Yahoo: tina_tsou    Skype: tinaTSOU    Jabber: tina@jabber.org

--Boundary_(ID_Qzhqz0MVnmtbxf0AQ9G6GQ)
Content-type: text/html; charset=gb2312
Content-transfer-encoding: 7BIT

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=Content-Type content="text/html; charset=gb2312">
<META content="MSHTML 6.00.2800.1561" name=GENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=#ffffff>
<DIV><FONT face="Courier New" size=2>Hi all,</FONT></DIV>
<DIV><FONT face="Courier New" size=2>I had some doubts about sip-sips-guidelines 
draft as following. It will be appreciated if someone would like to reply 
it.</FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV><FONT size=2>
<DIV><FONT face=Arial></FONT><BR><FONT face="Courier New">1. Does SIPS always 
require TLS? In IMS case, if I-CSCF of different operators already have an IPSec 
link, is it mandatory to establish another TLS link above IPSec? </FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV>
<DIV><FONT face="Courier New">2. For this statement,</FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV>
<DIV><FONT face="Courier New">&lt;Quote&gt;<BR>OPEN ISSUE:&nbsp; What error code 
should be returned if not?&nbsp; Should it be 403 
"Forbidden"?<BR>&lt;/Quote&gt;</FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV>
<DIV><FONT face="Courier New">If the Proxy inbetween had inserted a SIP URI in 
Path header, how the UA can find this if only a 403 is been 
received?</FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV>
<DIV><FONT face="Courier New">3. For section 6 paragraph 1 the following 
statement,</FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV>
<DIV><FONT face="Courier New">&lt;Quote&gt;<BR>This poses a very significant 
problem if Record-Route is not used in that if the remote end does not support 
SIPS, it will not be able to send a mid-dialog request to the 
client.<BR>&lt;/Quote&gt;</FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV>
<DIV><FONT face="Courier New">I had a doubt that if the remote end doesn't 
support SIPS, then there must be one Proxy will RR as the RFC3261 16.6 bullet 4 
(the text had been quoted in the following for reference). And the problem 
mentioned in the above statement will not exist.</FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV>
<DIV><BR><FONT face="Courier New">RFC3261 16.6 bullet 
4<BR>&lt;Quote&gt;<BR>Furthermore, if the request was not received over TLS, the 
proxy MUST insert a Record-Route header&nbsp;field.&nbsp; In a similar fashion, 
a proxy that receives a request over TLS, but generates a request without a SIPS 
URI in the Request-URI or topmost Route header field value (after the 
post&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; processing of bullet 6), 
MUST insert a Record-Route header field that is not a SIPS 
URI.<BR>&lt;/Quote&gt;</FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV>
<DIV><FONT face="Courier New">4. Appendix A, Open issue 1, Perhaps using Notify 
to intimate is not a good idea as there may be no implicit subscription because 
of subscription suppression (draft-ietf-sip-refer-with-norefersub).</FONT></DIV>
<DIV><FONT face="Courier New"></FONT>&nbsp;</DIV>
<DIV><FONT face="Courier New">5. Appendix B: Is the procedure defined in main 
document "explicit registration"? But this phrase cannot be found in main 
document.<BR></FONT></FONT></DIV>
<DIV><FONT size=2><BR><FONT face="Courier New">B. R.<BR>Tina <BR>Messengers: 
<BR>MSN: </FONT><A href="mailto:tinatsou6@hotmail.com"><FONT 
face="Courier New">tinatsou6@hotmail.com</FONT></A><FONT 
face="Courier New">&nbsp;&nbsp; Yahoo: tina_tsou&nbsp;&nbsp;&nbsp; Skype: 
tinaTSOU&nbsp;&nbsp;&nbsp; Jabber: </FONT><A href="mailto:tina@jabber.org"><FONT 
face="Courier New">tina@jabber.org</FONT></A></FONT></DIV></BODY></HTML>

--Boundary_(ID_Qzhqz0MVnmtbxf0AQ9G6GQ)--


--===============1255132280==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1255132280==--




From sip-bounces@ietf.org Tue Sep 05 06:26:41 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKY6R-00031X-Nk; Tue, 05 Sep 2006 06:24:23 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKY6Q-00031R-18
	for sip@ietf.org; Tue, 05 Sep 2006 06:24:22 -0400
Received: from smtp.hyd.hellosoft.com ([202.153.40.245]
	helo=hyd.hyd.hellosoft.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKY6O-0001NW-3T
	for sip@ietf.org; Tue, 05 Sep 2006 06:24:22 -0400
Received: from [192.168.2.234] (unknown [192.168.4.243])
	by hyd.hyd.hellosoft.com (Postfix) with ESMTP id AA64CF58026
	for <sip@ietf.org>; Tue,  5 Sep 2006 16:09:20 +0530 (IST)
From: amitsoni <amitsoni@hyd.hellosoft.com>
To: IETF SIP List <sip@ietf.org>
Content-Type: text/plain
Organization: hellosoft
Message-Id: <1157451887.4986.13.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.2.2 (1.2.2-4) 
Date: 05 Sep 2006 15:54:47 +0530
Content-Transfer-Encoding: 7bit
X-MailServ-MailFilter-MailScanner-Information: Please contact the ISP for more
	information
X-MailServ-MailFilter-MailScanner: Found to be clean
X-MailServ-MailFilter-MailScanner-SpamCheck: 
X-MailScanner-From: amitsoni@hyd.hellosoft.com
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 93238566e09e6e262849b4f805833007
Subject: [Sip] IPv6 Changes in SIP UA
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi All,

I need to support IPv6 in UA. What I have got from preliminarily
analysis, is that I'll have to change transport support, IP addresses in
SIP header as well as in SDP.

I just wanted to know If one UA supports IPv4/IPv6 and other one/proxy
supports only IPv4, then which address to fill in the SIP header, in
case i'm using IP addresses in header. 

-Do I need to get the information(DNS query) about other UA or is there
some other method?

-Do I need to keep some configurable parameter in case of proxy or get
the info from DNS?

Thanks In Advance,
amit



The information contained in this e-mail message and/or attachments to it may
contain confidential or privileged information. If you are not the intended recipient, any dissemination, use, review, distribution, printing or copying of the information contained in this e-mail message and/or attachments to it are strictly prohibited. If you have received this communication in error, please notify us by reply e-mail immediately and permanently delete the message and any attachments.


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 09:05:02 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKaYh-0003jU-3r; Tue, 05 Sep 2006 09:01:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKaYe-0003jJ-Ox
	for sip@ietf.org; Tue, 05 Sep 2006 09:01:40 -0400
Received: from wip-ec-wd.wipro.com ([203.91.193.32])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKaYc-0002aX-7O
	for sip@ietf.org; Tue, 05 Sep 2006 09:01:40 -0400
Received: from wip-ec-wd.wipro.com (localhost.wipro.com [127.0.0.1])
	by localhost (Postfix) with ESMTP id AD9F7206B3
	for <sip@ietf.org>; Tue,  5 Sep 2006 18:27:33 +0530 (IST)
Received: from blr-ec-bh02.wipro.com (blr-ec-bh02.wipro.com [10.201.50.92])
	by wip-ec-wd.wipro.com (Postfix) with ESMTP id 9541320637
	for <sip@ietf.org>; Tue,  5 Sep 2006 18:27:33 +0530 (IST)
Received: from blr-m2-msg.wipro.com ([10.116.50.99]) by blr-ec-bh02.wipro.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Sep 2006 18:31:34 +0530
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] IPv6 Changes in SIP UA
Date: Tue, 5 Sep 2006 18:35:14 +0530
Message-ID: <532B18E13CF9E64380EF5FDDE265E071555FA1@blr-m2-msg.wipro.com>
In-Reply-To: <1157451887.4986.13.camel@localhost.localdomain>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] IPv6 Changes in SIP UA
Thread-Index: AcbQ1bmOvkHzyBLTSTCR/Fz93/OE4AAFfEWA
From: <ravishankar.shiroor@wipro.com>
To: <amitsoni@hyd.hellosoft.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 05 Sep 2006 13:01:34.0626 (UTC)
	FILETIME=[6A519020:01C6D0EB]
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 02ec665d00de228c50c93ed6b5e4fc1a
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Amit,

Look at the draft-ietf-sipping-v6-transition-03.txt draft. It answers
many of your questions.

Regards,
Ravi.

--
=20
Ravishankar. G. Shiroor
Wipro Technologies, Bangalore.
=20
ravishankar.shiroor@wipro.com
--
=20

> -----Original Message-----
> From: amitsoni [mailto:amitsoni@hyd.hellosoft.com]=20
> Sent: Tuesday, September 05, 2006 3:55 PM
> To: IETF SIP List
> Subject: [Sip] IPv6 Changes in SIP UA
>=20
> Hi All,
>=20
> I need to support IPv6 in UA. What I have got from=20
> preliminarily analysis, is that I'll have to change transport=20
> support, IP addresses in SIP header as well as in SDP.
>=20
> I just wanted to know If one UA supports IPv4/IPv6 and other=20
> one/proxy supports only IPv4, then which address to fill in=20
> the SIP header, in case i'm using IP addresses in header.=20
>=20
> -Do I need to get the information(DNS query) about other UA=20
> or is there some other method?
>=20
> -Do I need to keep some configurable parameter in case of=20
> proxy or get the info from DNS?
>=20
> Thanks In Advance,
> amit
>=20
>=20
>=20
> The information contained in this e-mail message and/or=20
> attachments to it may contain confidential or privileged=20
> information. If you are not the intended recipient, any=20
> dissemination, use, review, distribution, printing or copying=20
> of the information contained in this e-mail message and/or=20
> attachments to it are strictly prohibited. If you have=20
> received this communication in error, please notify us by=20
> reply e-mail immediately and permanently delete the message=20
> and any attachments.
>=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 09:34:06 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKb24-0003fB-Bs; Tue, 05 Sep 2006 09:32:04 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKb23-0003f0-6B; Tue, 05 Sep 2006 09:32:03 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GKb1u-0003a2-PR; Tue, 05 Sep 2006 09:32:03 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 05 Sep 2006 09:31:55 -0400
X-IronPort-AV: i="4.08,214,1154923200"; 
	d="scan'208"; a="100664231:sNHT36037620"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k85DVsLv004250; Tue, 5 Sep 2006 09:31:54 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k85DVsuI024524; 
	Tue, 5 Sep 2006 09:31:54 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Sep 2006 09:31:54 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 5 Sep 2006 09:31:54 -0400
Message-ID: <44FD7C49.3070207@cisco.com>
Date: Tue, 05 Sep 2006 09:31:53 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: "Dolly, Martin C, ALABS" <mdolly@att.com>
Subject: Re: [Sip] Proposed work items for MIG
References: <28F05913385EAC43AF019413F674A017101B6E07@OCCLUST04EVS1.ugd.att.com>
In-Reply-To: <28F05913385EAC43AF019413F674A017101B6E07@OCCLUST04EVS1.ugd.att.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 05 Sep 2006 13:31:54.0040 (UTC)
	FILETIME=[A6C61B80:01C6D0EF]
DKIM-Signature: a=rsa-sha1; q=dns; l=2930; t=1157463114; x=1158327114;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20Proposed=20work=20items=20for=20MIG
	|To:=22Dolly,=20Martin=20C,=20ALABS=22=20<mdolly@att.com>;
	X=v=3Dcisco.com=3B=20h=3DYxGkrqaby3pLqt4mM+Fms8IKKG4=3D;
	b=jiMxr9xO2Je0V5I0Len/7Dl6HxxcIY818JpoTXXOUT6mRr2nLH1ziX7hP+DsUmel5qGradVy
	1Ltz7bTVD5J4qN59DSVSy/QU0yDB+TvPXBTLNPL8/Rmm/I/JCq5RG+Je;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 34d35111647d654d033d58d318c0d21a
Cc: SIP List <Sip@ietf.org>, sipping@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

As always, there remains the issue of "what is a service?" that may lead 
to disagreements about what is in scope for this group. I'm glad to see 
the charter calls for identifying the list of services that are in 
scope. Of the drafts proposed below for handling by the group, many do 
fit my own gut feeling of "service".

One draft that doesn't is draft-hasebe-sipping-race-examples. I think 
that one is still deeply tied to the details of the protocol itself 
rather than particular services and needs to remain with sipping.

	Paul

Dolly, Martin C, ALABS wrote:
> Hello all,
>  
> 
> As was announced in Montreal, a group of us are proposing to hold a BOF 
> in San Diego for a new working group MIG (once again the charter can be 
> found at:  www.sip-voip.org/charter.html 
> <outbind://23/www.sip-voip.org/charter.html> and the associated mail 
> list at www.sip-voip.org <http://www.sip-voip.org>). 
> 
>  
> 
> Part of the intention of MIG (Service Migration) is to off load some of 
> the work from sip/sipping, and in our presentation in Montreal we did 
> identify a couple of drafts that could be moved to the new group.  To 
> help facilitate discussions, below is an expanded list of drafts that 
> could be handled by the new group.  This list of drafts includes other 
> SDO requirements, PSTN interoperability drafts and other drafts that 
> include such topics, such as enterprise migration, that may fit the MIG 
> charter:
> 
>  
> 
> draft-sinha-sip-block
> 
> draft-andreasen-sipping-rfc3603bis
> 
> draft-anil-sipping-bla
> 
> draft-camarillo-sipping-sbc-funcs
> 
> draft-fries-sipping-identity-enterprise-scenario
> 
> draft-froment-sipping-spit-authz-policies
> 
> draft-haluska-sipping-directory-assistance
> 
> draft-hasebe-sipping-race-examples
> 
> draft-jennings-sipping-pay
> 
> draft-dolly-sipping-atis-ptsc
> 
> draft-jesske-sipping-tispan-requirements
> 
> draft-dcsgroup-sipping-arch
> 
> draft-niccolini-sipping-feedback-spit
> 
> draft-poetzl-sipping-call-completion
> 
> draft-rocky-sipping-calling-party-category
> 
> draft-schubert-sipping-saml-cpc
> 
> draft-shacham-sipping-session-mobility
> 
> draft-worley-sipping-pickup
> 
> draft-zhang-sipping-overlap
> 
>  
> 
> If anyone has any comments or opinions on any of these items, or if 
> anyone feels that they may have a draft that fits the MIG charter, 
> please feel free to comment on the MIG list.
> 
>  
> 
> Cheers,
> 
>  
> 
> Martin
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 09:52:52 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKbKE-000194-Mm; Tue, 05 Sep 2006 09:50:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKbKD-00018y-7D
	for sip@ietf.org; Tue, 05 Sep 2006 09:50:49 -0400
Received: from ihemail2.lucent.com ([192.11.222.163])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKbKB-00073H-Uq
	for sip@ietf.org; Tue, 05 Sep 2006 09:50:49 -0400
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail2.lucent.com (8.13.6/IER-o) with ESMTP id k85DogI9023304; 
	Tue, 5 Sep 2006 08:50:42 -0500 (CDT)
Received: from [135.185.244.90] (il0015vkg1.ih.lucent.com [135.185.244.90]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k85DofY29956; Tue, 5 Sep 2006 08:50:41 -0500 (CDT)
Message-ID: <44FD80B1.9050106@lucent.com>
Date: Tue, 05 Sep 2006 08:50:41 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
Organization: Bell Labs Security Technology Research Group
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: amitsoni@hyd.hellosoft.com
Subject: Re: [Sip] IPv6 Changes in SIP UA
References: <532B18E13CF9E64380EF5FDDE265E071555FA1@blr-m2-msg.wipro.com>
In-Reply-To: <532B18E13CF9E64380EF5FDDE265E071555FA1@blr-m2-msg.wipro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7d33c50f3756db14428398e2bdedd581
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

ravishankar.shiroor@wipro.com wrote:
> Hi Amit,
> 
> Look at the draft-ietf-sipping-v6-transition-03.txt draft. It answers
> many of your questions.

Right; the -04 version should be out soon -- the last set of
edits are going through the final review by the co-authors of
the draft.

You may also want to eyeball
http://www.ietf.org/internet-drafts/draft-gurbani-sipping-ipv6-sip-03.txt,
which provides you a set of IPv6-specific torture test cases.

Ciao.

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 16:57:23 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKhvz-0007uY-32; Tue, 05 Sep 2006 16:54:15 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKhvx-0007uO-4z
	for sip@ietf.org; Tue, 05 Sep 2006 16:54:13 -0400
Received: from zrtps0kp.nortel.com ([47.140.192.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKhvu-0005X9-P9
	for sip@ietf.org; Tue, 05 Sep 2006 16:54:13 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zrtps0kp.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k85Ks8c26330; Tue, 5 Sep 2006 16:54:08 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Tue, 5 Sep 2006 15:54:06 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0CD573B1@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0CD57084@zrc2hxm0.corp.nortel.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Thread-Index: AcbQ1aySn+OvZYC+Q6WUHRnbfKwJNwAQn9dwAAAWz/A=
From: "Francois Audet" <audet@nortel.com>
To: <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 225414c974e0d6437992164e91287a51
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Thanks for your input. Very valuable.

See below.=20


> ________________________________
>=20
> 	From: Tina TSOU [mailto:tena@huawei.com]=20
> 	Sent: Tuesday, September 05, 2006 3:23 AM
> 	To: sip@ietf.org
> 	Subject: [Sip] doubts about=20
> draft-audet-sip-sips-guidelines-03.txt
> =09
> =09
> 	Hi all,
> 	I had some doubts about sip-sips-guidelines draft as=20
> following. It will be appreciated if someone would like to reply it.
> 	=20
> 	=09
> 	1. Does SIPS always require TLS? In IMS case, if I-CSCF=20
> of different operators already have an IPSec link, is it=20
> mandatory to establish another TLS link above IPSec?=20

This is what is described in Section 3 of the draft, but I probably
need to discuss the last-hop exception rule in more details, especially
how it relates to Record-Route.

The answer is that SIPS always require TLS for all hops until you reach
the=20
last hop. It has been proposed by many that the "last-hop exception
rule"
be deprecated.

To answer your question in terms of when you send a request outside of
an existing dialog, you are correct that (except for the last hop),
you DO have to use TLS for reaching SIPS resources. If you are using
IPsec
as per your example, this will indeed mean TLS over an IPsec link. That
is
correct.

The last hop exception has some interesting side effects however when
used=20
inside a dialog.

If the last hop doesn't use TLS, the last Record-Route entry would be a
SIP URI instead of SIPS URI.

Therefore, within that dialog, the last hop would be allowed to send
requests where the request-URI itself is sips but where the Record-route
is SIP, and therefore that request would not be sent over TLS. In other
words,
a terminal would be able to accept over TCP/UDP a request to SIPS
addressed to
itself, and send mid-dialog requests to a remote target using a SIPS
Request-URI
but using UDP or TCP as per the Record-Route entry.

What does it mean for architectures that prefer to use IPsec instead of
TLS?

It means the following:

- You probably do not want to use SIPS URIs for those devices in the
IPsec
  network (phones, etc.).

- If Record-Route is used, those devices will be able to reuse the same
TCP or
  UDP connection for sending mid-dialog requests even if the Request-URI
is SIPS.

- However, if the device is sendind requests outside of a dialog (like
an INVITE for
  example), to a SIPS URI, it HAS to use TLS (and therefore TLS over
IPsec in your
  example).=20

- Therefore, if you do NOT want to do TLS over IPsec in this case, it
means that
  you can not reach SIPS resources. You will be able to receive requests
from
  entities using SIPS as contacts (with Record-route), but you will not
be able
  to make requests to SIPS. If a resource supports both SIP and SIPS, it
would
  still be reachable using SIP since they are routed the same way.=20
 =20

I will include much more text on this in the next revision.


> 	2. For this statement,
> 	=20
> 	<Quote>
> 	OPEN ISSUE:  What error code should be returned if not?=20
>  Should it be 403 "Forbidden"?
> 	</Quote>
> 	=20
> 	If the Proxy inbetween had inserted a SIP URI in Path=20
> header, how the UA can find this if only a 403 is been received?

I'm not sure I understand your comments, but what I do no is that I
probably need to look at the implications of the path header in more=20
details.

> 	3. For section 6 paragraph 1 the following statement,
> 	=20
> 	<Quote>
> 	This poses a very significant problem if Record-Route=20
> is not used in that if the remote end does not support SIPS,=20
> it will not be able to send a mid-dialog request to the client.
> 	</Quote>
> 	=20
> 	I had a doubt that if the remote end doesn't support=20
> SIPS, then there must be one Proxy will RR as the RFC3261=20
> 16.6 bullet 4 (the text had been quoted in the following for=20
> reference). And the problem mentioned in the above statement=20
> will not exist.

Correct. I will clarify.
=20
>=20
> 	RFC3261 16.6 bullet 4
> 	<Quote>
> 	Furthermore, if the request was not received over TLS,=20
> the proxy MUST insert a Record-Route header field.  In a=20
> similar fashion, a proxy that receives a request over TLS,=20
> but generates a request without a SIPS URI in the Request-URI=20
> or topmost Route header field value (after the post        =20
> processing of bullet 6), MUST insert a Record-Route header=20
> field that is not a SIPS URI.
> 	</Quote>
> 	=20
> 	4. Appendix A, Open issue 1, Perhaps using Notify to=20
> intimate is not a good idea as there may be no implicit=20
> subscription because of subscription suppression=20
> (draft-ietf-sip-refer-with-norefersub).

Good point. I'll add.

> 	5. Appendix B: Is the procedure defined in main=20
> document "explicit registration"? But this phrase cannot be=20
> found in main document.

The intent is to remove this whole Appendix in a next version. I haven't
heard
anybody arguing that the "explicit" registration mechanism should be
used.
If it stays like this, it will be gone in the next revision.


> =09
> 	B. R.
> 	Tina=20
> 	Messengers:=20
> 	MSN: tinatsou6@hotmail.com=20
> <mailto:tinatsou6@hotmail.com>    Yahoo: tina_tsou    Skype:=20
> tinaTSOU    Jabber: tina@jabber.org <mailto:tina@jabber.org>=20
>=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 17:29:16 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKiRh-0001Xb-A3; Tue, 05 Sep 2006 17:27:01 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKiRf-0001XW-Hd
	for sip@ietf.org; Tue, 05 Sep 2006 17:26:59 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKiRd-0001Ef-8W
	for sip@ietf.org; Tue, 05 Sep 2006 17:26:59 -0400
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 05 Sep 2006 14:26:56 -0700
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k85LQuTx025703; Tue, 5 Sep 2006 14:26:56 -0700
Received: from imail.cisco.com (sjc12-sbr-sw3-3f5.cisco.com [172.19.96.182])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k85LQuQV027984;
	Tue, 5 Sep 2006 14:26:56 -0700 (PDT)
Received: from [192.168.0.102] (sjc-vpn4-721.cisco.com [10.21.82.209])
	by imail.cisco.com (8.12.11/8.12.10) with ESMTP id k85LHYc8001411;
	Tue, 5 Sep 2006 14:17:34 -0700
Message-ID: <44FDEBAA.7050104@cisco.com>
Date: Tue, 05 Sep 2006 14:27:06 -0700
From: Michael Thomas <mat@cisco.com>
User-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O;
	rv:1.7.3) Gecko/20040913 Thunderbird/0.8 Mnenhy/0.7.2.0
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
References: <1ECE0EB50388174790F9694F77522CCF0CD573B1@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0CD573B1@zrc2hxm0.corp.nortel.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Authentication-Results: sj-dkim-2.cisco.com; header.From=mat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
DKIM-Signature: a=rsa-sha1; q=dns; l=876; t=1157491616; x=1158355616;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=mat@cisco.com; z=From:Michael=20Thomas=20<mat@cisco.com>
	|Subject:Re=3A=20[Sip]=20doubts=20about=20draft-audet-sip-sips-guidelines-03.txt;
	X=v=3Dcisco.com=3B=20h=3D61h9pSGUBL7aIq2TV47htNPdDlo=3D;
	b=1HE2Sz8aOQY4lsVmCAy+p3ogQD1mY57SffVQocKAx9EgjIcIh5afsqVKwtdS5U45KtPa+fFz
	0x9oex98gLljH8Fh8ESfTwA/LW8A17hcirUvGfio5F+HF5Flct89W+yW;
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 2409bba43e9c8d580670fda8b695204a
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Francois Audet wrote:

>This is what is described in Section 3 of the draft, but I probably
>need to discuss the last-hop exception rule in more details, especially
>how it relates to Record-Route.
>
>The answer is that SIPS always require TLS for all hops until you reach
>the 
>last hop. It has been proposed by many that the "last-hop exception
>rule"
>be deprecated.
>  
>

[litany of unnatural acts elided]

I find all of this just a wee bit absurd. Either make SIPS require TLS 
everywhere,
or make it require "adequate" (fsvo "adequate") security everywhere. Making
special cases for the "last hop" (which I will note probably has nothing 
to do
with the "last hop" for SIP, but instead the last hop from a service 
provider to
some CPE) seems like a pretty dumb idea frankly and speaks volumes of what
a mess this really is.

          Mike

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 18:52:11 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKjiY-0006Ig-2j; Tue, 05 Sep 2006 18:48:30 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKjiW-0006Ib-OK
	for sip@ietf.org; Tue, 05 Sep 2006 18:48:28 -0400
Received: from zcars04e.nortel.com ([47.129.242.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKjiV-0000Sp-Fm
	for sip@ietf.org; Tue, 05 Sep 2006 18:48:28 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04e.nortel.com (Switch-2.2.0/Switch-2.2.0) with ESMTP id
	k85MgAO14042; Tue, 5 Sep 2006 18:42:10 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Tue, 5 Sep 2006 17:48:22 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0CEB7FD8@zrc2hxm0.corp.nortel.com>
In-Reply-To: <44FDEBAA.7050104@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Thread-Index: AcbRMgYdS+nSBQmJQvigIUgCljh2CQAChAsg
From: "Francois Audet" <audet@nortel.com>
To: "Michael Thomas" <mat@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9ed51c9d1356100bce94f1ae4ec616a9
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

And I'm not going to disagree...

Many have argued for deprecating the last-hop exception altogether.

That would require a substantive change to RFC 3261. But it would indeed
make it
less absurb.=20

> -----Original Message-----
> From: Michael Thomas [mailto:mat@cisco.com]=20
> Sent: Tuesday, September 05, 2006 2:27 PM
> To: Audet, Francois (SC100:3055)
> Cc: sip@ietf.org
> Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
>=20
> Francois Audet wrote:
>=20
> >This is what is described in Section 3 of the draft, but I probably=20
> >need to discuss the last-hop exception rule in more details,=20
> especially=20
> >how it relates to Record-Route.
> >
> >The answer is that SIPS always require TLS for all hops=20
> until you reach=20
> >the last hop. It has been proposed by many that the=20
> "last-hop exception=20
> >rule"
> >be deprecated.
> > =20
> >
>=20
> [litany of unnatural acts elided]
>=20
> I find all of this just a wee bit absurd. Either make SIPS=20
> require TLS everywhere, or make it require "adequate" (fsvo=20
> "adequate") security everywhere. Making special cases for the=20
> "last hop" (which I will note probably has nothing to do with=20
> the "last hop" for SIP, but instead the last hop from a=20
> service provider to some CPE) seems like a pretty dumb idea=20
> frankly and speaks volumes of what a mess this really is.
>=20
>           Mike
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 05 23:56:11 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GKoSf-0003Ql-7Y; Tue, 05 Sep 2006 23:52:25 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GKoSd-0003Qc-KD
	for sip@ietf.org; Tue, 05 Sep 2006 23:52:23 -0400
Received: from szxga03-in.huawei.com ([61.144.161.55])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GKoSb-0005Os-3y
	for sip@ietf.org; Tue, 05 Sep 2006 23:52:23 -0400
Received: from huawei.com (szxga03-in [172.24.2.9])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J55005NZKC0JD@szxga03-in.huawei.com> for
	sip@ietf.org; Wed, 06 Sep 2006 11:57:36 +0800 (CST)
Received: from huawei.com ([172.24.1.6])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J55006N8KBZCD@szxga03-in.huawei.com> for
	sip@ietf.org; Wed, 06 Sep 2006 11:57:36 +0800 (CST)
Received: from CMTEST6 ([10.70.149.78])
	by szxml02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J550026RKNVDD@szxml02-in.huawei.com>; Wed,
	06 Sep 2006 12:04:43 +0800 (CST)
Date: Wed, 06 Sep 2006 11:46:52 +0800
From: Tina TSOU <tena@huawei.com>
Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
To: sip@ietf.org, Francois Audet <audet@nortel.com>
Message-id: <00b101c6d167$172bc920$4e95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <1ECE0EB50388174790F9694F77522CCF0CD573B1@zrc2hxm0.corp.nortel.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 4b7d60495f1a7f2e853e8cbae7e6dbfc
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Dear Francois,
Thank you very much for your reply.
See [Tina: ...] as following.

B. R.
Tina

----- Original Message ----- 
From: "Francois Audet" <audet@nortel.com>
To: <sip@ietf.org>
Cc: <tena@huawei.com>
Sent: Wednesday, September 06, 2006 4:54 AM
Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt


Thanks for your input. Very valuable.

See below. 


> ________________________________
> 
> From: Tina TSOU [mailto:tena@huawei.com] 
> Sent: Tuesday, September 05, 2006 3:23 AM
> To: sip@ietf.org
> Subject: [Sip] doubts about 
> draft-audet-sip-sips-guidelines-03.txt
> 
> 
> Hi all,
> I had some doubts about sip-sips-guidelines draft as 
> following. It will be appreciated if someone would like to reply it.
> 
> 
> 1. Does SIPS always require TLS? In IMS case, if I-CSCF 
> of different operators already have an IPSec link, is it 
> mandatory to establish another TLS link above IPSec? 

This is what is described in Section 3 of the draft, but I probably
need to discuss the last-hop exception rule in more details, especially
how it relates to Record-Route.

The answer is that SIPS always require TLS for all hops until you reach
the 
last hop. It has been proposed by many that the "last-hop exception
rule"
be deprecated.

To answer your question in terms of when you send a request outside of
an existing dialog, you are correct that (except for the last hop),
you DO have to use TLS for reaching SIPS resources. If you are using
IPsec
as per your example, this will indeed mean TLS over an IPsec link. That
is
correct.

The last hop exception has some interesting side effects however when
used 
inside a dialog.

If the last hop doesn't use TLS, the last Record-Route entry would be a
SIP URI instead of SIPS URI.

[Tina: Same as this, is it possible that a Proxy can use double RR to avoid the TLS overload for outside dialog SIPS request? Proxy can add two RR, one is SIPS to connect downstream UA or Proxy, the other is SIP to reuse the IPSec link.
 
BTW, Probably Double RR can be mentioned as an option behavior in the last hop proxy to avoid RR rewrite.]

Therefore, within that dialog, the last hop would be allowed to send
requests where the request-URI itself is sips but where the Record-route
is SIP, and therefore that request would not be sent over TLS. In other
words,
a terminal would be able to accept over TCP/UDP a request to SIPS
addressed to
itself, and send mid-dialog requests to a remote target using a SIPS
Request-URI
but using UDP or TCP as per the Record-Route entry.

What does it mean for architectures that prefer to use IPsec instead of
TLS?

It means the following:

- You probably do not want to use SIPS URIs for those devices in the
IPsec
  network (phones, etc.).

- If Record-Route is used, those devices will be able to reuse the same
TCP or
  UDP connection for sending mid-dialog requests even if the Request-URI
is SIPS.

- However, if the device is sendind requests outside of a dialog (like
an INVITE for
  example), to a SIPS URI, it HAS to use TLS (and therefore TLS over
IPsec in your
  example). 

- Therefore, if you do NOT want to do TLS over IPsec in this case, it
means that
  you can not reach SIPS resources. You will be able to receive requests
from
  entities using SIPS as contacts (with Record-route), but you will not
be able
  to make requests to SIPS. If a resource supports both SIP and SIPS, it
would
  still be reachable using SIP since they are routed the same way. 
  

I will include much more text on this in the next revision.


> 2. For this statement,
> 
> <Quote>
> OPEN ISSUE:  What error code should be returned if not? 
>  Should it be 403 "Forbidden"?
> </Quote>
> 
> If the Proxy inbetween had inserted a SIP URI in Path 
> header, how the UA can find this if only a 403 is been received?

I'm not sure I understand your comments, but what I do no is that I
probably need to look at the implications of the path header in more 
details.
[Tina: Sorry the doubt is not stated properly. The doubt is:
 
If a Proxy in-between the UA and the registrar inserts Path header, but the URI in Path is SIP other than SIPS even the Req-URI in REGISTER is SIPS, so the registrar will reject it by 403, but in this response there will be no information about the reason of this rejection is because illegal Path. So is more info required to be added?
 
One more: Should UA check the Service-Route header to verify each URI should be SIPS? If not, what UA will do?]

> 3. For section 6 paragraph 1 the following statement,
> 
> <Quote>
> This poses a very significant problem if Record-Route 
> is not used in that if the remote end does not support SIPS, 
> it will not be able to send a mid-dialog request to the client.
> </Quote>
> 
> I had a doubt that if the remote end doesn't support 
> SIPS, then there must be one Proxy will RR as the RFC3261 
> 16.6 bullet 4 (the text had been quoted in the following for 
> reference). And the problem mentioned in the above statement 
> will not exist.

Correct. I will clarify.
 
> 
> RFC3261 16.6 bullet 4
> <Quote>
> Furthermore, if the request was not received over TLS, 
> the proxy MUST insert a Record-Route header field.  In a 
> similar fashion, a proxy that receives a request over TLS, 
> but generates a request without a SIPS URI in the Request-URI 
> or topmost Route header field value (after the post         
> processing of bullet 6), MUST insert a Record-Route header 
> field that is not a SIPS URI.
> </Quote>
> 
> 4. Appendix A, Open issue 1, Perhaps using Notify to 
> intimate is not a good idea as there may be no implicit 
> subscription because of subscription suppression 
> (draft-ietf-sip-refer-with-norefersub).

Good point. I'll add.

> 5. Appendix B: Is the procedure defined in main 
> document "explicit registration"? But this phrase cannot be 
> found in main document.

The intent is to remove this whole Appendix in a next version. I haven't
heard
anybody arguing that the "explicit" registration mechanism should be
used.
If it stays like this, it will be gone in the next revision.


> 
> B. R.
> Tina 
> Messengers: 
> MSN: tinatsou6@hotmail.com 
> <mailto:tinatsou6@hotmail.com>    Yahoo: tina_tsou    Skype: 
> tinaTSOU    Jabber: tina@jabber.org <mailto:tina@jabber.org> 
> 
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 06 13:31:56 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GL1Co-0002kf-RX; Wed, 06 Sep 2006 13:28:54 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GL1Cm-0002iu-9i; Wed, 06 Sep 2006 13:28:52 -0400
Received: from zcars04e.nortel.com ([47.129.242.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GL1Ci-0000b2-Vg; Wed, 06 Sep 2006 13:28:52 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04e.nortel.com (Switch-2.2.0/Switch-2.2.0) with ESMTP id
	k86HM2U03065; Wed, 6 Sep 2006 13:22:02 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sipping] Re: [Sip] Proposed work items for MIG
Date: Wed, 6 Sep 2006 12:28:12 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0CEB8821@zrc2hxm0.corp.nortel.com>
In-Reply-To: <44FD7C49.3070207@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sipping] Re: [Sip] Proposed work items for MIG
Thread-Index: AcbQ79TQJYUgI84cSXmULDwUBciWCgA6danQ
From: "Francois Audet" <audet@nortel.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Dolly, Martin C, ALABS" <mdolly@att.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 30ac594df0e66ffa5a93eb4c48bcb014
Cc: SIP List <Sip@ietf.org>, sipping@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20

> One draft that doesn't is draft-hasebe-sipping-race-examples.=20
> I think that one is still deeply tied to the details of the=20
> protocol itself rather than particular services and needs to=20
> remain with sipping.

I have the same opinion about that one. In fact, it may even be=20
SIP-material.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 06 13:37:13 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GL1Iq-000591-Tr; Wed, 06 Sep 2006 13:35:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GL1Io-00058q-N2; Wed, 06 Sep 2006 13:35:06 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GL1Im-0001yg-Ch; Wed, 06 Sep 2006 13:35:06 -0400
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-6.cisco.com with ESMTP; 06 Sep 2006 10:35:03 -0700
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-3.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k86HZ3Re016133; Wed, 6 Sep 2006 10:35:03 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k86HZ2Yr001614;
	Wed, 6 Sep 2006 10:35:03 -0700 (PDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Sep 2006 13:35:02 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Sep 2006 13:35:02 -0400
Message-ID: <44FF06C5.2070606@cisco.com>
Date: Wed, 06 Sep 2006 13:35:01 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
Subject: Re: [Sipping] Re: [Sip] Proposed work items for MIG
References: <1ECE0EB50388174790F9694F77522CCF0CEB8821@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0CEB8821@zrc2hxm0.corp.nortel.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 06 Sep 2006 17:35:02.0073 (UTC)
	FILETIME=[C8550A90:01C6D1DA]
DKIM-Signature: a=rsa-sha1; q=dns; l=525; t=1157564103; x=1158428103;
	c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sipping]=20Re=3A=20[Sip]=20Proposed=20work=20items=20for=20MIG;
	X=v=3Dcisco.com=3B=20h=3DQTazu4jdu6IJDGCLhgZIAtweZJc=3D;
	b=TAr3rUmUs5PyaNo5Tv8hlttly4c96aFLFrjr0rnDtiKL02kyJTX3I7tt2wRkSG04YxM4M3lz
	9KWOhGKOkEinypNAJaYtRPQYxqjmD9ug4exVwcI7QT4Xr0OeX9GF89GG;
Authentication-Results: sj-dkim-3.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d6b246023072368de71562c0ab503126
Cc: SIP List <Sip@ietf.org>, "Dolly, Martin C, ALABS" <mdolly@att.com>,
	sipping@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Francois Audet wrote:
>  
> 
>> One draft that doesn't is draft-hasebe-sipping-race-examples. 
>> I think that one is still deeply tied to the details of the 
>> protocol itself rather than particular services and needs to 
>> remain with sipping.
> 
> I have the same opinion about that one. In fact, it may even be 
> SIP-material.
> 

As long as it is examples it probably belongs with sipping. When we get 
to proposing fixes (which ought to be a different draft) then that 
belongs with sip.

	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 06 13:40:04 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GL1Lk-0005pQ-3S; Wed, 06 Sep 2006 13:38:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GL1Lh-0005oh-JR; Wed, 06 Sep 2006 13:38:05 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GL1Lg-0002tc-Ah; Wed, 06 Sep 2006 13:38:05 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k86HbnY27490; Wed, 6 Sep 2006 13:37:50 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sipping] Re: [Sip] Proposed work items for MIG
Date: Wed, 6 Sep 2006 12:37:13 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0CEB8851@zrc2hxm0.corp.nortel.com>
In-Reply-To: <44FF06C5.2070606@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sipping] Re: [Sip] Proposed work items for MIG
Thread-Index: AcbR2srnJe/Euf6oR0O6xVRnd6vaYwAAEm1g
From: "Francois Audet" <audet@nortel.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: ea4ac80f790299f943f0a53be7e1a21a
Cc: SIP List <Sip@ietf.org>, "Dolly, Martin C, ALABS" <mdolly@att.com>,
	sipping@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Right.=20

> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]=20
> Sent: Wednesday, September 06, 2006 10:35 AM
> To: Audet, Francois (SC100:3055)
> Cc: Dolly, Martin C, ALABS; SIP List; sipping@ietf.org
> Subject: Re: [Sipping] Re: [Sip] Proposed work items for MIG
>=20
>=20
>=20
> Francois Audet wrote:
> > =20
> >=20
> >> One draft that doesn't is draft-hasebe-sipping-race-examples.=20
> >> I think that one is still deeply tied to the details of=20
> the protocol=20
> >> itself rather than particular services and needs to remain with=20
> >> sipping.
> >=20
> > I have the same opinion about that one. In fact, it may even be=20
> > SIP-material.
> >=20
>=20
> As long as it is examples it probably belongs with sipping.=20
> When we get to proposing fixes (which ought to be a different=20
> draft) then that belongs with sip.
>=20
> 	Paul
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 06 13:57:22 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GL1c1-0004gO-WB; Wed, 06 Sep 2006 13:54:57 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GL1c0-0004gA-Er; Wed, 06 Sep 2006 13:54:56 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GL1bz-0006Le-6m; Wed, 06 Sep 2006 13:54:56 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 06 Sep 2006 10:54:53 -0700
X-IronPort-AV: i="4.08,221,1154934000"; 
	d="scan'208"; a="40171218:sNHT31510796"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k86Hsqqp016183; Wed, 6 Sep 2006 13:54:52 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k86HsqdM018444; 
	Wed, 6 Sep 2006 13:54:52 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Sep 2006 13:54:52 -0400
Received: from jmpolk-wxp.cisco.com ([10.89.20.115]) by
	xfe-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 6 Sep 2006 13:54:51 -0400
Message-Id: <4.3.2.7.2.20060906125331.03aa2da8@email.cisco.com>
X-Sender: jmpolk@email.cisco.com
X-Mailer: QUALCOMM Windows Eudora Version 4.3.2
Date: Wed, 06 Sep 2006 12:54:50 -0500
To: Paul Kyzivat <pkyzivat@cisco.com>,
	"Dolly, Martin C, ALABS" <mdolly@att.com>
From: "James M. Polk" <jmpolk@cisco.com>
Subject: Re: [Sip] Proposed work items for MIG
In-Reply-To: <44FD7C49.3070207@cisco.com>
References: <28F05913385EAC43AF019413F674A017101B6E07@OCCLUST04EVS1.ugd.att.com>
	<28F05913385EAC43AF019413F674A017101B6E07@OCCLUST04EVS1.ugd.att.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-OriginalArrivalTime: 06 Sep 2006 17:54:51.0971 (UTC)
	FILETIME=[8D911130:01C6D1DD]
DKIM-Signature: a=rsa-sha1; q=dns; l=387; t=1157565292; x=1158429292;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jmpolk@cisco.com;
	z=From:=22James=20M.=20Polk=22=20<jmpolk@cisco.com>
	|Subject:Re=3A=20[Sip]=20Proposed=20work=20items=20for=20MIG
	|To:Paul=20Kyzivat=20<pkyzivat@cisco.com>,
	=0A=20=20=20=20=20=20=20=20=22Doll
	y,=20Martin=20C,=20ALABS=22=20<mdolly@att.com>;
	X=v=3Dcisco.com=3B=20h=3DqFSdFrj7gtySLRJHNI1KPwCnvhI=3D;
	b=GLcBifvO4MNXdjmS9xMfzth+1gy286VVbQbxLbS4WkOTi1iQV2hCCQiChj0RDyM2/SbHMFLX
	bcn4P8odRw7FldlHIfQnMDXBjY7DHIMnSTTKGJU1oYfHTTVj5S0Qx3H6;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=jmpolk@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d17f825e43c9aed4fd65b7edddddec89
Cc: SIP List <Sip@ietf.org>, sipping@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

At 09:31 AM 9/5/2006 -0400, Paul Kyzivat wrote:

>One draft that doesn't is draft-hasebe-sipping-race-examples. I think that 
>one is still deeply tied to the details of the protocol itself rather than 
>particular services and needs to remain with sipping.

indeed, I have to agree with Paul here.  draft-hasebe-sipping-race-examples 
should stay in sipping


>         Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 06 14:05:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GL1k8-0007C3-9u; Wed, 06 Sep 2006 14:03:20 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GL1k6-0007Bv-Sl
	for sip@ietf.org; Wed, 06 Sep 2006 14:03:18 -0400
Received: from zcars04e.nortel.com ([47.129.242.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GL1k5-00080i-J2
	for sip@ietf.org; Wed, 06 Sep 2006 14:03:18 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04e.nortel.com (Switch-2.2.0/Switch-2.2.0) with ESMTP id
	k86Hv0U06437; Wed, 6 Sep 2006 13:57:00 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Wed, 6 Sep 2006 13:03:12 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0CEB88FB@zrc2hxm0.corp.nortel.com>
In-Reply-To: <00b101c6d167$172bc920$4e95460a@china.huawei.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Thread-Index: AcbRZ8dJwGSkPtw0Q7eeqP2S5US+uAAcmbWg
From: "Francois Audet" <audet@nortel.com>
To: "Tina TSOU" <tena@huawei.com>, <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: f607d15ccc2bc4eaf3ade8ffa8af02a0
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

> [Tina: Same as this, is it possible that a Proxy can use=20
> double RR to avoid the TLS overload for outside dialog SIPS=20
> request? Proxy can add two RR, one is SIPS to connect=20
> downstream UA or Proxy, the other is SIP to reuse the IPSec link.
> =20
> BTW, Probably Double RR can be mentioned as an option=20
> behavior in the last hop proxy to avoid RR rewrite.]

I don't believe you need to put two Record-Route entry to achieve
what you want.

My reading of RFC 3261 sections 16.6 and 16.7 is that you
would insert a Record-Route with sip for the outgoing request,
but that for the response, you would replace it with sips.

Like this:

UA a                  Proxy                 UA b

  =3D=3D=3D=3DREQUEST/TLS=3D=3D=3D=3D=3D=3D=3D>----REQUEST/non-TLS--->
                             Record-Route=3Dsip

  <=3D=3D=3DResponse/TLS=3D=3D=3D=3D=3D=3D<----Response/non-TLS---
      Record-Route=3Dsips      Record-Route=3Dsip

Let me know if this addresses your concern, or if I misunderstood
your point.

> [Tina: Sorry the doubt is not stated properly. The doubt is:
> =20
> If a Proxy in-between the UA and the registrar inserts Path=20
> header, but the URI in Path is SIP other than SIPS even the=20
> Req-URI in REGISTER is SIPS, so the registrar will reject it=20
> by 403, but in this response there will be no information=20
> about the reason of this rejection is because illegal Path.=20
> So is more info required to be added?

I don't have an answer to this. I think this is an open issue.

> One more: Should UA check the Service-Route header to verify=20
> each URI should be SIPS? If not, what UA will do?]

Funny you should ask.... I was thinking about exactly this yesterday.

I think we have 3 choices:

1 - We state that the UA MUST verify that the Service route is all SIP.

2 - We don't, which would then throw a wrench into the end-to-end=20
    TLS idea. Effectively, it would allow for doing not only "last-hop"
    exceptions, but also "first-hop exceptions" or "hop-X exceptions".=20
    To me, this is one more reasons why the last-hop exception is such
    a slippery slope.

3- We don't, and we let the enforcement be done at the proxies
themselves.
   This may be difficult to troubleshoot when a wrong Route entry is
encountered.



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 07 00:02:41 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLB22-00057C-Ho; Wed, 06 Sep 2006 23:58:26 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLB21-000574-4t
	for sip@ietf.org; Wed, 06 Sep 2006 23:58:25 -0400
Received: from szxga03-in.huawei.com ([61.144.161.55])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLB1z-0001LC-I5
	for sip@ietf.org; Wed, 06 Sep 2006 23:58:25 -0400
Received: from huawei.com (szxga03-in [172.24.2.9])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J57001LIFHVLY@szxga03-in.huawei.com> for
	sip@ietf.org; Thu, 07 Sep 2006 12:08:19 +0800 (CST)
Received: from huawei.com ([172.24.1.3])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J57005PZFHU0R@szxga03-in.huawei.com> for
	sip@ietf.org; Thu, 07 Sep 2006 12:08:19 +0800 (CST)
Received: from CMTEST6 ([10.70.149.78])
	by szxml01-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J5700HOOG0HBM@szxml01-in.huawei.com>; Thu,
	07 Sep 2006 12:19:30 +0800 (CST)
Date: Thu, 07 Sep 2006 11:57:33 +0800
From: Tina TSOU <tena@huawei.com>
Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
To: sip@ietf.org, Francois Audet <audet@nortel.com>
Message-id: <004301c6d231$bfb10e00$4e95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <1ECE0EB50388174790F9694F77522CCF0CEB88FB@zrc2hxm0.corp.nortel.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: bdc523f9a54890b8a30dd6fd53d5d024
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

See [Tina1: ...]

B. R.
Tina
----- Original Message ----- 
From: "Francois Audet" <audet@nortel.com>
To: "Tina TSOU" <tena@huawei.com>; <sip@ietf.org>
Sent: Thursday, September 07, 2006 2:03 AM
Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt


> [Tina: Same as this, is it possible that a Proxy can use 
> double RR to avoid the TLS overload for outside dialog SIPS 
> request? Proxy can add two RR, one is SIPS to connect 
> downstream UA or Proxy, the other is SIP to reuse the IPSec link.
>  
> BTW, Probably Double RR can be mentioned as an option 
> behavior in the last hop proxy to avoid RR rewrite.]

I don't believe you need to put two Record-Route entry to achieve
what you want.

My reading of RFC 3261 sections 16.6 and 16.7 is that you
would insert a Record-Route with sip for the outgoing request,
but that for the response, you would replace it with sips.

Like this:

UA a                  Proxy                 UA b

  ====REQUEST/TLS=======>----REQUEST/non-TLS--->
                             Record-Route=sip

  <===Response/TLS======<----Response/non-TLS---
      Record-Route=sips      Record-Route=sip

Let me know if this addresses your concern, or if I misunderstood
your point.

[Tina1: Double RR is used to avoid the rewrite in response.
 
Please refer the SIP Bug Item 664
 
Double record-routing, described in:
http://www.ietf.org/mail-archive/working-groups/sip/current/msg06589.html
 
is an alternative to rewriting the record-route header in responses. it has many benefits as pointed out in the mail, and is completely backwards compatible with 3261. Bis should probably discuss this technique and offer it as an option. This would affect some existing text that mandates rewriting the record-route in the response.]

> [Tina: Sorry the doubt is not stated properly. The doubt is:
>  
> If a Proxy in-between the UA and the registrar inserts Path 
> header, but the URI in Path is SIP other than SIPS even the 
> Req-URI in REGISTER is SIPS, so the registrar will reject it 
> by 403, but in this response there will be no information 
> about the reason of this rejection is because illegal Path. 
> So is more info required to be added?

I don't have an answer to this. I think this is an open issue.

> One more: Should UA check the Service-Route header to verify 
> each URI should be SIPS? If not, what UA will do?]

Funny you should ask.... I was thinking about exactly this yesterday.

I think we have 3 choices:

1 - We state that the UA MUST verify that the Service route is all SIP.

2 - We don't, which would then throw a wrench into the end-to-end 
    TLS idea. Effectively, it would allow for doing not only "last-hop"
    exceptions, but also "first-hop exceptions" or "hop-X exceptions". 
    To me, this is one more reasons why the last-hop exception is such
    a slippery slope.

3- We don't, and we let the enforcement be done at the proxies
themselves.
   This may be difficult to troubleshoot when a wrong Route entry is
encountered.
[Tina1: Funny you also thought about it:P I think if TLS is a MUST for SIPS, option 1 should be taken.]


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 07 09:32:33 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLJwE-0004iG-6V; Thu, 07 Sep 2006 09:29:02 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLJwC-0004bt-D3
	for sip@ietf.org; Thu, 07 Sep 2006 09:29:00 -0400
Received: from szxga03-in.huawei.com ([61.144.161.55])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLJwA-0002vN-56
	for sip@ietf.org; Thu, 07 Sep 2006 09:29:00 -0400
Received: from huawei.com (szxga03-in [172.24.2.9])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J58007WN5LAIH@szxga03-in.huawei.com> for
	sip@ietf.org; Thu, 07 Sep 2006 21:31:59 +0800 (CST)
Received: from huawei.com ([172.24.1.6])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J580001E5LAXY@szxga03-in.huawei.com> for
	sip@ietf.org; Thu, 07 Sep 2006 21:31:58 +0800 (CST)
Received: from CMTEST6 ([10.70.149.78])
	by szxml02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J5800M8J5X7RH@szxml02-in.huawei.com> for
	sip@ietf.org; Thu, 07 Sep 2006 21:39:07 +0800 (CST)
Date: Thu, 07 Sep 2006 21:21:13 +0800
From: Tina TSOU <tena@huawei.com>
To: sip@ietf.org
Message-id: <00a901c6d280$7e241aa0$4e95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-Priority: 3
X-MSMail-priority: Normal
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 2857c5c041d6c02d7181d602c22822c8
Subject: [Sip] some doubts about draft-gurbani-sip-domain-certs
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1557034632=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1557034632==
Content-type: multipart/alternative;
	boundary="Boundary_(ID_iyLiok4P7HanQ6cWUR9zag)"

This is a multi-part message in MIME format.

--Boundary_(ID_iyLiok4P7HanQ6cWUR9zag)
Content-type: text/plain; charset=gb2312
Content-transfer-encoding: 7BIT

Hi All,
 
I had some doubts about draft-gurbani-sip-domain-certs as following. It will be appreciated if someone would like to reply it.

1. In section 3 

<Quote>
   One way to combat this
   is to arrange for the proxy to possess two certificates -- one
   corresponding to "sips:example.com" and the other corresponding to
   "sips:downtown.example.com" -- and have it present the right one when 
   contacted.
</Quote>

But as per my understanding, the proposal in this draft doesn't resolve 
this problem thereinbefore. As there is only one SIPURI identity in certificate,
it cannot handle the proxy which had a domain name and a site name. 
Do I miss something?

2. As my understanding of section 4, Does it mean that certificate will contain two 
identities, one identity for transport layer, one for application protocol layer?
Is it possible to have multiple application protocol identity? e.g, one is sips:example.com,
another is sips:donwtown.example.com.

How about multiple kind of application layer protocols implemented by one site? it will
have each identity for every protocols?

3. In Section 5, 

<Quote>
If the UAC performed RFC3263 resolution on the
   URI to reach the server, the SIPS identity stored in the certificate
   MUST be matched.  Otherwise, if RFC3263 resolution on the URI failed, 
   the UAC MUST match the DNS label in the certificate with the name of
   the server that it opened a TLS connection to.
</Quote>
  "the SIPS ... MUST be matched", which URI will be used to match this SIPS identity?
Is it the NextHop URI UAC used to reach the server? If it's the NextHop URI and 3263 
resolution failed, how the UAC can find the server and then get the ceritificate from 
the server?

Thanks ahead.

B. R.
Tina
Messengers: 
MSN: tinatsou6@hotmail.com   Yahoo: tina_tsou    Skype: tinaTSOU    Jabber: tina@jabber.org

--Boundary_(ID_iyLiok4P7HanQ6cWUR9zag)
Content-type: text/html; charset=gb2312
Content-transfer-encoding: 7BIT

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=Content-Type content="text/html; charset=gb2312">
<META content="MSHTML 6.00.2800.1561" name=GENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=#ffffff>
<DIV><FONT face=Arial size=2>Hi All,<BR>&nbsp;<BR>I had some doubts about 
draft-gurbani-sip-domain-certs as following. It will be appreciated if someone 
would like to reply it.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=Arial size=2>1. In section 3 </FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=Arial size=2>&lt;Quote&gt;<BR>&nbsp;&nbsp; One way to combat 
this<BR>&nbsp;&nbsp; is to arrange for the proxy to possess two certificates -- 
one<BR>&nbsp;&nbsp; corresponding to "sips:example.com" and the other 
corresponding to<BR>&nbsp;&nbsp; "sips:downtown.example.com" -- and have it 
present the right one when <BR>&nbsp;&nbsp; 
contacted.<BR>&lt;/Quote&gt;</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=Arial size=2>But as per my understanding, the proposal in this 
draft doesn't resolve <BR>this problem thereinbefore. As there is only one 
SIPURI identity in certificate,<BR>it cannot handle the proxy which had a domain 
name and a site name. <BR>Do I miss something?</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=Arial size=2>2. As my understanding of section 4, Does it mean 
that certificate will contain two <BR>identities, one identity for transport 
layer, one for application protocol layer?<BR>Is it possible to have multiple 
application protocol identity? e.g, one is sips:example.com,<BR>another is 
sips:donwtown.example.com.</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=Arial size=2>How about multiple kind of application layer 
protocols implemented by one site? it will<BR>have each identity for every 
protocols?</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=Arial size=2>3. In Section 5, </FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=Arial size=2>&lt;Quote&gt;<BR>If the UAC performed RFC3263 
resolution on the<BR>&nbsp;&nbsp; URI to reach the server, the SIPS identity 
stored in the certificate<BR>&nbsp;&nbsp; MUST be matched.&nbsp; Otherwise, if 
RFC3263 resolution on the URI failed, <BR>&nbsp;&nbsp; the UAC MUST match the 
DNS label in the certificate with the name of<BR>&nbsp;&nbsp; the server that it 
opened a TLS connection to.<BR>&lt;/Quote&gt;<BR>&nbsp; "the SIPS ... MUST be 
matched", which URI will be used to match this SIPS identity?<BR>Is it the 
NextHop URI UAC used to reach the server? If it's the NextHop URI and 3263 
<BR>resolution failed, how the UAC can find the server and then get the 
ceritificate from <BR>the server?</FONT></DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT face=Arial size=2>Thanks ahead.</FONT></DIV><FONT face=Arial size=2>
<DIV><BR>B. R.<BR>Tina</DIV>
<DIV>Messengers: <BR>MSN: <A 
href="mailto:tinatsou6@hotmail.com">tinatsou6@hotmail.com</A>&nbsp;&nbsp; Yahoo: 
tina_tsou&nbsp;&nbsp;&nbsp; Skype: tinaTSOU&nbsp;&nbsp;&nbsp; Jabber: <A 
href="mailto:tina@jabber.org">tina@jabber.org</A></FONT></DIV></BODY></HTML>

--Boundary_(ID_iyLiok4P7HanQ6cWUR9zag)--


--===============1557034632==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1557034632==--




From sip-bounces@ietf.org Thu Sep 07 14:29:03 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLOYx-0005j8-D3; Thu, 07 Sep 2006 14:25:19 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLOYw-0005j3-22
	for sip@ietf.org; Thu, 07 Sep 2006 14:25:18 -0400
Received: from zrtps0kp.nortel.com ([47.140.192.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLOYt-0000eU-N9
	for sip@ietf.org; Thu, 07 Sep 2006 14:25:18 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zrtps0kp.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k87IOtn23286; Thu, 7 Sep 2006 14:24:56 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Thu, 7 Sep 2006 13:24:54 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0CF52361@zrc2hxm0.corp.nortel.com>
In-Reply-To: <004301c6d231$bfb10e00$4e95460a@china.huawei.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Thread-Index: AcbSMc7KphZCEadiR2qTHSZ7EkCWhQAd5o+g
From: "Francois Audet" <audet@nortel.com>
To: "Tina TSOU" <tena@huawei.com>, <sip@ietf.org>,
	"Dean Willis" <dean.willis@softarmor.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: cd26b070c2577ac175cd3a6d878c6248
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Dean Willis please make sure you read this email...
There is a question for you.


> -----Original Message-----
> From: Tina TSOU [mailto:tena@huawei.com]=20
> Sent: Wednesday, September 06, 2006 8:58 PM
> To: sip@ietf.org; Audet, Francois (SC100:3055)
> Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
>=20
> See [Tina1: ...]
>=20
> B. R.
> Tina
> ----- Original Message -----
> From: "Francois Audet" <audet@nortel.com>
> To: "Tina TSOU" <tena@huawei.com>; <sip@ietf.org>
> Sent: Thursday, September 07, 2006 2:03 AM
> Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
>=20
>=20
> > [Tina: Same as this, is it possible that a Proxy can use=20
> > double RR to avoid the TLS overload for outside dialog SIPS=20
> > request? Proxy can add two RR, one is SIPS to connect=20
> > downstream UA or Proxy, the other is SIP to reuse the IPSec link.
> > =20
> > BTW, Probably Double RR can be mentioned as an option=20
> > behavior in the last hop proxy to avoid RR rewrite.]
>=20
> I don't believe you need to put two Record-Route entry to achieve
> what you want.
>=20
> My reading of RFC 3261 sections 16.6 and 16.7 is that you
> would insert a Record-Route with sip for the outgoing request,
> but that for the response, you would replace it with sips.
>=20
> Like this:
>=20
> UA a                  Proxy                 UA b
>=20
>   =3D=3D=3D=3DREQUEST/TLS=3D=3D=3D=3D=3D=3D=3D>----REQUEST/non-TLS--->
>                              Record-Route=3Dsip
>=20
>   <=3D=3D=3DResponse/TLS=3D=3D=3D=3D=3D=3D<----Response/non-TLS---
>       Record-Route=3Dsips      Record-Route=3Dsip
>=20
> Let me know if this addresses your concern, or if I misunderstood
> your point.
>=20
> [Tina1: Double RR is used to avoid the rewrite in response.
> =20
> Please refer the SIP Bug Item 664
> =20
> Double record-routing, described in:
> http://www.ietf.org/mail-archive/working-groups/sip/current/ms
> g06589.html
> =20
> is an alternative to rewriting the record-route header in=20
> responses. it has many benefits as pointed out in the mail,=20
> and is completely backwards compatible with 3261. Bis should=20
> probably discuss this technique and offer it as an option.=20
> This would affect some existing text that mandates rewriting=20
> the record-route in the response.]

Yes, I hadn't seen this email from Dean date Oct 14, 2002...
It's good that you are paying attention!

It does seem that the same would apply here. Very similar to the
IPv6-IPv4 transitions solution too as per=20
http://tools.ietf.org/html/draft-ietf-sipping-v6-transition-03.

Dean, was there any action (the "path forward") resulting from that=20
email from you? Was the double-record route idea as an alternative
to response-altering by proxy (as per RFC 3261) formalized anywhere?

I can certainly recommend the double record-route in the SIPS document,
but it seems that it applies everywhere, not just to the infamous=20
last-hop exception (e.g., IPv6 transistion and multi-homed proxies).


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 07 14:30:33 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLOcG-0006wy-Ut; Thu, 07 Sep 2006 14:28:44 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLOcE-0006vI-Ov
	for sip@ietf.org; Thu, 07 Sep 2006 14:28:42 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLOcD-00014q-Gm
	for sip@ietf.org; Thu, 07 Sep 2006 14:28:42 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k87IScG01045; Thu, 7 Sep 2006 14:28:38 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Thu, 7 Sep 2006 13:28:31 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0CF52378@zrc2hxm0.corp.nortel.com>
In-Reply-To: <004301c6d231$bfb10e00$4e95460a@china.huawei.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Thread-Index: AcbSMc7KphZCEadiR2qTHSZ7EkCWhQAeYPgQ
From: "Francois Audet" <audet@nortel.com>
To: "Tina TSOU" <tena@huawei.com>, <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 93238566e09e6e262849b4f805833007
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
> I think we have 3 choices:
>=20
> 1 - We state that the UA MUST verify that the Service route=20
> is all SIP.
>=20
> 2 - We don't, which would then throw a wrench into the end-to-end=20
>     TLS idea. Effectively, it would allow for doing not only=20
> "last-hop"
>     exceptions, but also "first-hop exceptions" or "hop-X=20
> exceptions".=20
>     To me, this is one more reasons why the last-hop exception is such
>     a slippery slope.
>=20
> 3- We don't, and we let the enforcement be done at the proxies
> themselves.
>    This may be difficult to troubleshoot when a wrong Route entry is
> encountered.
> [Tina1: Funny you also thought about it:P I think if TLS is a=20
> MUST for SIPS, option 1 should be taken.]

I think I agree.

And the proxies would obviously check it too.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 07 14:49:31 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLOtl-0005RB-UM; Thu, 07 Sep 2006 14:46:49 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLOtk-0005R2-D3
	for sip@ietf.org; Thu, 07 Sep 2006 14:46:48 -0400
Received: from nylon.softarmor.com ([66.135.38.164])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLOtj-0004Vk-2n
	for sip@ietf.org; Thu, 07 Sep 2006 14:46:48 -0400
Received: from [64.101.149.239] (roabell-w2k.cisco.com [64.101.149.239])
	(authenticated bits=0)
	by nylon.softarmor.com (8.13.1/8.13.1) with ESMTP id k87HnGSF022630
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Thu, 7 Sep 2006 12:49:17 -0500
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0CF52361@zrc2hxm0.corp.nortel.com>
References: <1ECE0EB50388174790F9694F77522CCF0CF52361@zrc2hxm0.corp.nortel.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <89F1B7ED-B9DB-4D30-8AE4-75D0B6E6DBE3@softarmor.com>
Content-Transfer-Encoding: 7bit
From: Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Thu, 7 Sep 2006 13:46:40 -0500
To: Francois Audet <audet@nortel.com>
X-Mailer: Apple Mail (2.752.2)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 5a9a1bd6c2d06a21d748b7d0070ddcb8
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


On Sep 7, 2006, at 1:24 PM, Francois Audet wrote:

> Dean Willis please make sure you read this email...
> There is a question for you.
>
>> . . .

>> [Tina1: Double RR is used to avoid the rewrite in response.
>>
>> Please refer the SIP Bug Item 664
>>
>> Double record-routing, described in:
>> http://www.ietf.org/mail-archive/working-groups/sip/current/ms
>> g06589.html
>>
>> is an alternative to rewriting the record-route header in
>> responses. it has many benefits as pointed out in the mail,
>> and is completely backwards compatible with 3261. Bis should
>> probably discuss this technique and offer it as an option.
>> This would affect some existing text that mandates rewriting
>> the record-route in the response.]
>
> Yes, I hadn't seen this email from Dean date Oct 14, 2002...
> It's good that you are paying attention!
>
> It does seem that the same would apply here. Very similar to the
> IPv6-IPv4 transitions solution too as per
> http://tools.ietf.org/html/draft-ietf-sipping-v6-transition-03.
>
> Dean, was there any action (the "path forward") resulting from that
> email from you? Was the double-record route idea as an alternative
> to response-altering by proxy (as per RFC 3261) formalized anywhere?
>


RFC 3608 contains the following:

    Instead of following the procedure in [3], proxies used with
    Service-Route that are inserting Record-Route or Path header field
    values SHOULD record not one but two route values when processing  
the
    request.  The first value recorded indicates the receiving  
interface,
    and the second indicates the sending interface.  When processing the
    response, no modification of the recorded route is required.  This
    optimization provides for fully invertible routes that can be
    effectively used in construction of service routes.


I believe Jonathan was hoping to do some further cleanup in route- 
construct.


--
Dean


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 07 15:13:25 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLPGq-0006rm-GT; Thu, 07 Sep 2006 15:10:40 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLPGl-0006pG-7l
	for sip@ietf.org; Thu, 07 Sep 2006 15:10:35 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLP6G-0006ZT-4d
	for sip@ietf.org; Thu, 07 Sep 2006 14:59:45 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k87IxGG11740; Thu, 7 Sep 2006 14:59:17 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Thu, 7 Sep 2006 13:58:55 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0CF5240F@zrc2hxm0.corp.nortel.com>
In-Reply-To: <89F1B7ED-B9DB-4D30-8AE4-75D0B6E6DBE3@softarmor.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Thread-Index: AcbSrhDVYbPUkDLWSqKzERTSmChowQAAQGQw
From: "Francois Audet" <audet@nortel.com>
To: "Dean Willis" <dean.willis@softarmor.com>,
	"Jonathan Rosenberg" <jdrosen@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 6cca30437e2d04f45110f2ff8dc1b1d5
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Thanks.

RFC 3608 limits this procedure to when service routes are used,
which shouldn't be the case. The "do double record-route instead
of response mangling as per 16.7/RFC3261" rule should apply everywhere.

The idea of fuirther cleaning-up in Jonathan's Route-Contruct draft
is appealing...


> -----Original Message-----
> From: Dean Willis [mailto:dean.willis@softarmor.com]=20
> Sent: Thursday, September 07, 2006 11:47 AM
> To: Audet, Francois (SC100:3055)
> Cc: Tina TSOU; sip@ietf.org
> Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
>=20
>=20
> On Sep 7, 2006, at 1:24 PM, Francois Audet wrote:
>=20
> > Dean Willis please make sure you read this email...
> > There is a question for you.
> >
> >> . . .
>=20
> >> [Tina1: Double RR is used to avoid the rewrite in response.
> >>
> >> Please refer the SIP Bug Item 664
> >>
> >> Double record-routing, described in:
> >> http://www.ietf.org/mail-archive/working-groups/sip/current/ms
> >> g06589.html
> >>
> >> is an alternative to rewriting the record-route header in=20
> responses.=20
> >> it has many benefits as pointed out in the mail, and is completely=20
> >> backwards compatible with 3261. Bis should probably discuss this=20
> >> technique and offer it as an option.
> >> This would affect some existing text that mandates rewriting the=20
> >> record-route in the response.]
> >
> > Yes, I hadn't seen this email from Dean date Oct 14, 2002...
> > It's good that you are paying attention!
> >
> > It does seem that the same would apply here. Very similar to the
> > IPv6-IPv4 transitions solution too as per=20
> > http://tools.ietf.org/html/draft-ietf-sipping-v6-transition-03.
> >
> > Dean, was there any action (the "path forward") resulting from that=20
> > email from you? Was the double-record route idea as an=20
> alternative to=20
> > response-altering by proxy (as per RFC 3261) formalized anywhere?
> >
>=20
>=20
> RFC 3608 contains the following:
>=20
>     Instead of following the procedure in [3], proxies used with
>     Service-Route that are inserting Record-Route or Path header field
>     values SHOULD record not one but two route values when=20
> processing the
>     request.  The first value recorded indicates the=20
> receiving interface,
>     and the second indicates the sending interface.  When=20
> processing the
>     response, no modification of the recorded route is required.  This
>     optimization provides for fully invertible routes that can be
>     effectively used in construction of service routes.
>=20
>=20
> I believe Jonathan was hoping to do some further cleanup in=20
> route- construct.
>=20
>=20
> --
> Dean
>=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 07 15:28:51 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLPVy-0004MB-MH; Thu, 07 Sep 2006 15:26:18 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLPVx-0004M4-1H
	for sip@ietf.org; Thu, 07 Sep 2006 15:26:17 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLPVu-00045T-OM
	for sip@ietf.org; Thu, 07 Sep 2006 15:26:17 -0400
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k87JPoJU022453; 
	Thu, 7 Sep 2006 14:25:50 -0500 (CDT)
Received: from [135.185.244.90] (il0015vkg1.ih.lucent.com [135.185.244.90]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k87JQ4k22700; Thu, 7 Sep 2006 14:26:04 -0500 (CDT)
Message-ID: <4500724B.7080308@lucent.com>
Date: Thu, 07 Sep 2006 14:26:03 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
Organization: Bell Labs Security Technology Research Group
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
References: <1ECE0EB50388174790F9694F77522CCF0CF5240F@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0CF5240F@zrc2hxm0.corp.nortel.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 93238566e09e6e262849b4f805833007
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Francois Audet wrote:
> Thanks.
> 
> RFC 3608 limits this procedure to when service routes are used,
> which shouldn't be the case. The "do double record-route instead
> of response mangling as per 16.7/RFC3261" rule should apply everywhere.

There is more history here:

   1) See also RFC 3486 and its use of double R-R ((Section 6);
   2) Back in the Vancouver IETF (Nov '05) there was a thread on
   sipping-v6-transition about double R-Rs
   (http://www1.ietf.org/mail-archive/web/sipping/current/msg09938.html).
   The conclusion I later arrived at, and this is reflected in
   sipping-v6-transition-03 and the upcoming -04, is to use double
   R-R.

Thanks.

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 07 17:06:58 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLR1f-0002vU-TB; Thu, 07 Sep 2006 17:03:07 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLR1e-0002po-D5
	for sip@ietf.org; Thu, 07 Sep 2006 17:03:06 -0400
Received: from nylon.softarmor.com ([66.135.38.164])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLR1b-00054z-2k
	for sip@ietf.org; Thu, 07 Sep 2006 17:03:06 -0400
Received: from [64.101.149.239] (roabell-w2k.cisco.com [64.101.149.239])
	(authenticated bits=0)
	by nylon.softarmor.com (8.13.1/8.13.1) with ESMTP id k87K5Wqr023368
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Thu, 7 Sep 2006 15:05:33 -0500
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0CF5240F@zrc2hxm0.corp.nortel.com>
References: <1ECE0EB50388174790F9694F77522CCF0CF5240F@zrc2hxm0.corp.nortel.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4DFF07EE-B8EB-40FA-AD53-DC5618632ADD@softarmor.com>
Content-Transfer-Encoding: 7bit
From: Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Thu, 7 Sep 2006 16:02:55 -0500
To: Francois Audet <audet@nortel.com>
X-Mailer: Apple Mail (2.752.2)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0bc60ec82efc80c84b8d02f4b0e4de22
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


On Sep 7, 2006, at 1:58 PM, Francois Audet wrote:

> Thanks.
>
> RFC 3608 limits this procedure to when service routes are used,
> which shouldn't be the case. The "do double record-route instead
> of response mangling as per 16.7/RFC3261" rule should apply  
> everywhere.
>

I concur, never having liked response-mangling much. However,  
updating 3261 was somewhat out-of-scope for 3608.

I believe I have seen other drafts (RFCs?)  reference DRR "as  
described in RFC 3608".

> The idea of fuirther cleaning-up in Jonathan's Route-Contruct draft
> is appealing...

Indeed. The problem is one of deciding which bits should be cleaned,  
and which should be left to age like Stilton . . .

--
Dean




_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 07 18:54:00 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLShE-0002kF-Rv; Thu, 07 Sep 2006 18:50:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLSh9-0002iZ-8O; Thu, 07 Sep 2006 18:50:03 -0400
Received: from ns0.neustar.com ([156.154.16.158])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GLSh8-0002zw-0T; Thu, 07 Sep 2006 18:50:03 -0400
Received: from stiedprstage1.ietf.org (stiedprstage1.va.neustar.com
	[10.31.47.10]) by ns0.neustar.com (Postfix) with ESMTP id ECB4432867;
	Thu,  7 Sep 2006 22:50:01 +0000 (GMT)
Received: from ietf by stiedprstage1.ietf.org with local (Exim 4.43)
	id 1GLSh7-00050D-Rd; Thu, 07 Sep 2006 18:50:01 -0400
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
To: i-d-announce@ietf.org
From: Internet-Drafts@ietf.org
Message-Id: <E1GLSh7-00050D-Rd@stiedprstage1.ietf.org>
Date: Thu, 07 Sep 2006 18:50:01 -0400
X-Spam-Score: -2.5 (--)
X-Scan-Signature: 10ba05e7e8a9aa6adb025f426bef3a30
Cc: sip@ietf.org
Subject: [Sip] I-D ACTION:draft-ietf-sip-fork-loop-fix-03.txt 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts 
directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.

	Title		: Addressing an Amplification Vulnerability in Session Initiation Protocol (SIP) Forking Proxies
	Author(s)	: R. Sparks, et al.
	Filename	: draft-ietf-sip-fork-loop-fix-03.txt
	Pages		: 13
	Date		: 2006-9-7
	
This document normatively updates RFC 3261, the Session Initiation
Protocol (SIP), to address a security vulnerability identified in SIP
proxy behavior.  This vulnerability enables an attack against SIP
networks where a small number of legitimate, even authorized, SIP
requests can stimulate massive amounts of proxy-to-proxy traffic.

This document strengthens loop-detection requirements on SIP proxies
when they fork requests (that is, forward a request to more than one
destination).  It also corrects and clarifies the description of the
loop-detection algorithm such proxies are required to implement.

A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-fork-loop-fix-03.txt

To remove yourself from the I-D Announcement list, send a message to 
i-d-announce-request@ietf.org with the word unsubscribe in the body of 
the message. 
You can also visit https://www1.ietf.org/mailman/listinfo/I-D-announce 
to change your subscription settings.

Internet-Drafts are also available by anonymous FTP. Login with the 
username "anonymous" and a password of your e-mail address. After 
logging in, type "cd internet-drafts" and then 
"get draft-ietf-sip-fork-loop-fix-03.txt".

A list of Internet-Drafts directories can be found in
http://www.ietf.org/shadow.html 
or ftp://ftp.ietf.org/ietf/1shadow-sites.txt

Internet-Drafts can also be obtained by e-mail.

Send a message to:
	mailserv@ietf.org.
In the body type:
	"FILE /internet-drafts/draft-ietf-sip-fork-loop-fix-03.txt".
	
NOTE:	The mail server at ietf.org can return the document in
	MIME-encoded form by using the "mpack" utility.  To use this
	feature, insert the command "ENCODING mime" before the "FILE"
	command.  To decode the response(s), you will need "munpack" or
	a MIME-compliant mail reader.  Different MIME-compliant mail readers
	exhibit different behavior, especially when dealing with
	"multipart" MIME messages (i.e. documents which have been split
	up into multiple messages), so check your local documentation on
	how to manipulate these messages.

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Multipart/Alternative; Boundary="OtherAccess"

--OtherAccess
Content-Type: Message/External-body; access-type="mail-server";
	server="mailserv@ietf.org"

Content-Type: text/plain
Content-ID: <2006-9-7150207.I-D@ietf.org>

ENCODING mime
FILE /internet-drafts/draft-ietf-sip-fork-loop-fix-03.txt

--OtherAccess
Content-Type: Message/External-body;
	name="draft-ietf-sip-fork-loop-fix-03.txt"; site="ftp.ietf.org";
	access-type="anon-ftp"; directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2006-9-7150207.I-D@ietf.org>


--OtherAccess--

--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--




From sip-bounces@ietf.org Thu Sep 07 21:48:46 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLVQI-0000bG-IU; Thu, 07 Sep 2006 21:44:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLVQG-0000b8-S3
	for sip@ietf.org; Thu, 07 Sep 2006 21:44:48 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLVQD-0004UJ-EO
	for sip@ietf.org; Thu, 07 Sep 2006 21:44:48 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k881iF9D023773
	for <sip@ietf.org>; Thu, 7 Sep 2006 20:44:19 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Thu, 7 Sep 2006 20:44:28 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 8 Sep 2006 03:44:27 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
Date: Fri, 8 Sep 2006 03:44:27 +0200
Message-ID: <5D1A7985295922448D5550C94DE291803D72F0@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
Thread-Index: Aca4t6jzb0cIdg3jQp2xn/3iF5Fd1gRcnWrAANcpi/ABUXCx0A==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: "IETF SIP List" <sip@ietf.org>
X-OriginalArrivalTime: 08 Sep 2006 01:44:27.0260 (UTC)
	FILETIME=[51C2BBC0:01C6D2E8]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 21bf7a2f1643ae0bf20c1e010766eb78
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

A reminder of the conference call on Monday.

The call is expected to last up to 2 hours.

I will post details of the comments summary when available. I am still
compiling it.

Regards

Keith=20

> -----Original Message-----
> From: Drage, Keith (Keith)=20
> Sent: 01 September 2006 06:26
> To: 'IETF SIP List'
> Subject: RE: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
>=20
> The rescheduled date for this conference call in Monday 11th=20
> September. Details as on original call and are as follows:
>=20
> > 	8:00 am Pacific Time
> > 	10:00 am Central US Time
> > 	11:00 am Eastern US Time
> > 	4:00 pm UK
> > 	5:00 pm Central European Summer Time
> >=20
> > Bridge details as follows:
> >=20
> > Access Phone Number:  8007718734
> > International Access Phone Number:  +1 6477233953 7-Digit=20
> Access Code: =20
> > 5776249
> >=20
>=20
> All people who have reviewed the document are welcome.
>=20
> Note that I am still waiting on comments from some reviewers.=20
> If you have comments, please submit them as soon as possible.
>=20
> Regards
>=20
> Keith
>=20
> > -----Original Message-----
> > From: Drage, Keith (Keith)
> > Sent: 28 August 2006 01:25
> > To: Drage, Keith (Keith); IETF SIP List
> > Subject: RE: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
> >=20
> > I am having to reschedule the call on the 4th as a critical=20
> > participant is no longer available. I will still be compiling the=20
> > comments received over the next week or so.
> >=20
> > The conference call on the 4th is therefore cancelled.
> >=20
> > Please keep an eye open for the rescheduled dates.
> >=20
> > Regards
> >=20
> > Keith
> >=20
> > > -----Original Message-----
> > > From: Drage, Keith (Keith) [mailto:drage@lucent.com]
> > > Sent: 05 August 2006 21:31
> > > To: IETF SIP List
> > > Subject: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
> > >=20
> > > Working Group Last Call
> > > -----------------------
> > >=20
> > > Jonathan has just published
> > > http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-10.txt
> > >  which should take into account all the major comments that
> > have been
> > > so far received on this document.
> > >=20
> > > Having initiated WGLC on this document on 13th January 2004, and=20
> > > revised that WGLC on 5th July 2004 and 26th October 2005 we would=20
> > > really like to reach a final conclusion of this WGLC.
> > >=20
> > > Therefore please review the document and submit your WGLC=20
> comments=20
> > > within two weeks, ie. By the 21st August 2006.
> > >=20
> > > Process
> > > -------
> > >=20
> > > In addition to an open invitation for review by all=20
> members of the=20
> > > working group, we will be soliciting full review by a number of=20
> > > experts who we believe will provide a good and complete
> > understanding
> > > of the issues and problems, if any, with the document. If
> > you consider
> > > you should be part of this list this please contact the WG chairs.
> > >=20
> > > The WG chairs will compile all submitted comments into a
> > single review
> > > document which will be discussed on the conference call
> > below. Please
> > > therefore submit your comments (to the SIP WG list and the
> > WG chairs)
> > > with information under the following headings for each comment:
> > >=20
> > > -	location in document
> > > -	nature of comment (editorial, minor technical, critical error,
> > > absolute show stopper - use your judgement on this)
> > > -	comment
> > > -	proposed fix
> > >=20
> > > We intend to have a conference call for reviewers to
> > conclude on the
> > > quality of the document on Monday 4th September at:
> > >=20
> > > 	8:00 am Pacific Time
> > > 	10:00 am Central US Time
> > > 	11:00 am Eastern US Time
> > > 	4:00 pm UK
> > > 	5:00 pm Central European Summer Time
> > >=20
> > > Bridge details as follows:
> > >=20
> > > Access Phone Number:  8007718734
> > > International Access Phone Number:  +1 6477233953 7-Digit
> > Access Code: =20
> > > 5776249
> > >=20
> > > While this call is open to all WG members, we would expect
> > only people
> > > who have reviewed the document on this conference call. For
> > details of
> > > the process please see previous communication. Note that=20
> the above=20
> > > does include those reviewers who reviewed the document and had no=20
> > > comments - if you are in this class, please report it.
> > >=20
> > > Regards
> > >=20
> > > Keith
> > >=20
> > > Keith Drage
> > > drage@lucent.com
> > > tel: +44 1793 776249
> > >=20
> > > _______________________________________________
> > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > This list is for NEW development of the core SIP Protocol Use=20
> > > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > > sipping@ietf.org for new developments on the application of sip
> > >=20
> >=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 07 23:52:30 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLXLj-0003SE-Mu; Thu, 07 Sep 2006 23:48:15 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLXLi-0003S9-FW
	for sip@ietf.org; Thu, 07 Sep 2006 23:48:14 -0400
Received: from szxga01-in.huawei.com ([61.144.161.53])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLXLf-0000kV-VM
	for sip@ietf.org; Thu, 07 Sep 2006 23:48:14 -0400
Received: from huawei.com (szxga01-in [172.24.2.3])
	by szxga01-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J59001009CXHQ@szxga01-in.huawei.com> for
	sip@ietf.org; Fri, 08 Sep 2006 11:50:57 +0800 (CST)
Received: from huawei.com ([172.24.1.3])
	by szxga01-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J59002I99CW5K@szxga01-in.huawei.com> for
	sip@ietf.org; Fri, 08 Sep 2006 11:50:57 +0800 (CST)
Received: from CMTEST6 ([10.70.149.78])
	by szxml01-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J59007SVA7J3P@szxml01-in.huawei.com> for
	sip@ietf.org; Fri, 08 Sep 2006 12:09:20 +0800 (CST)
Date: Fri, 08 Sep 2006 11:47:22 +0800
From: Tina TSOU <tena@huawei.com>
Subject: [Sip] points for draft-gurbani-sip-domain-certs
To: sip@ietf.org
Message-id: <008001c6d2f9$7dfcd890$4e95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-Priority: 3
X-MSMail-priority: Normal
References: <00a901c6d280$7e241aa0$4e95460a@china.huawei.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: e472ca43d56132790a46d9eefd95f0a5
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1997681435=="
Errors-To: sip-bounces@ietf.org


This is a multi-part message in MIME format.

--===============1997681435==
Content-type: multipart/alternative;
	boundary="Boundary_(ID_l16il6/P0f5wSkbsoQWNkg)"


This is a multi-part message in MIME format.

--Boundary_(ID_l16il6/P0f5wSkbsoQWNkg)
Content-type: text/plain; charset=gb2312
Content-transfer-encoding: 7BIT

Hi all,
I'm afraid this email has not been noticed as there is another thread which has similar subject title "[Sip] doubts about draft-audet-sip-sips-guidelines-03.txt"-_-|||

B. R.
Tina
  ----- Original Message ----- 
  From: Tina TSOU 
  To: sip@ietf.org 
  Sent: Thursday, September 07, 2006 9:21 PM
  Subject: [Sip] some doubts about draft-gurbani-sip-domain-certs


  Hi All,
   
  I had some doubts about draft-gurbani-sip-domain-certs as following. It will be appreciated if someone would like to reply it.

  1. In section 3 

  <Quote>
     One way to combat this
     is to arrange for the proxy to possess two certificates -- one
     corresponding to "sips:example.com" and the other corresponding to
     "sips:downtown.example.com" -- and have it present the right one when 
     contacted.
  </Quote>

  But as per my understanding, the proposal in this draft doesn't resolve 
  this problem thereinbefore. As there is only one SIPURI identity in certificate,
  it cannot handle the proxy which had a domain name and a site name. 
  Do I miss something?

  2. As my understanding of section 4, Does it mean that certificate will contain two 
  identities, one identity for transport layer, one for application protocol layer?
  Is it possible to have multiple application protocol identity? e.g, one is sips:example.com,
  another is sips:donwtown.example.com.

  How about multiple kind of application layer protocols implemented by one site? it will
  have each identity for every protocols?

  3. In Section 5, 

  <Quote>
  If the UAC performed RFC3263 resolution on the
     URI to reach the server, the SIPS identity stored in the certificate
     MUST be matched.  Otherwise, if RFC3263 resolution on the URI failed, 
     the UAC MUST match the DNS label in the certificate with the name of
     the server that it opened a TLS connection to.
  </Quote>
    "the SIPS ... MUST be matched", which URI will be used to match this SIPS identity?
  Is it the NextHop URI UAC used to reach the server? If it's the NextHop URI and 3263 
  resolution failed, how the UAC can find the server and then get the ceritificate from 
  the server?

  Thanks ahead.

  B. R.
  Tina
  Messengers: 
  MSN: tinatsou6@hotmail.com   Yahoo: tina_tsou    Skype: tinaTSOU    Jabber: tina@jabber.org


------------------------------------------------------------------------------


  _______________________________________________
  Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
  This list is for NEW development of the core SIP Protocol
  Use sip-implementors@cs.columbia.edu for questions on current sip
  Use sipping@ietf.org for new developments on the application of sip

--Boundary_(ID_l16il6/P0f5wSkbsoQWNkg)
Content-type: text/html; charset=gb2312
Content-transfer-encoding: base64

PCFET0NUWVBFIEhUTUwgUFVCTElDICItLy9XM0MvL0RURCBIVE1MIDQuMCBUcmFuc2l0aW9uYWwv
L0VOIj4NCjxIVE1MPjxIRUFEPg0KPE1FVEEgaHR0cC1lcXVpdj1Db250ZW50LVR5cGUgY29udGVu
dD0idGV4dC9odG1sOyBjaGFyc2V0PWdiMjMxMiI+DQo8TUVUQSBjb250ZW50PSJNU0hUTUwgNi4w
MC4yODAwLjE1NjEiIG5hbWU9R0VORVJBVE9SPg0KPFNUWUxFPjwvU1RZTEU+DQo8L0hFQUQ+DQo8
Qk9EWSBiZ0NvbG9yPSNmZmZmZmY+DQo8RElWPjxGT05UIGZhY2U9QXJpYWwgc2l6ZT0yPkhpIGFs
bCw8L0ZPTlQ+PC9ESVY+DQo8RElWPjxGT05UIGZhY2U9QXJpYWwgc2l6ZT0yPkknbSBhZnJhaWQg
dGhpcyBlbWFpbCBoYXMgbm90IGJlZW4gbm90aWNlZCBhcyB0aGVyZSANCmlzIGFub3RoZXIgdGhy
ZWFkJm5ic3A7d2hpY2ggaGFzIDxTUEFOIGxhbmc9RU4tVVMgDQpzdHlsZT0iRk9OVC1TSVpFOiAx
MHB0OyBMSU5FLUhFSUdIVDogMTUwJTsgRk9OVC1GQU1JTFk6IEFyaWFsOyBtc28tZmFyZWFzdC1m
b250LWZhbWlseTogy87M5TsgbXNvLWFuc2ktbGFuZ3VhZ2U6IEVOLVVTOyBtc28tZmFyZWFzdC1s
YW5ndWFnZTogWkgtQ047IG1zby1iaWRpLWxhbmd1YWdlOiBBUi1TQSI+c2ltaWxhciANCjwvU1BB
Tj5zdWJqZWN0IHRpdGxlICJbU2lwXSBkb3VidHMgYWJvdXQgDQpkcmFmdC1hdWRldC1zaXAtc2lw
cy1ndWlkZWxpbmVzLTAzLnR4dCItXy18fHw8L0ZPTlQ+PC9ESVY+DQo8RElWPjxGT05UIGZhY2U9
QXJpYWwgc2l6ZT0yPjwvRk9OVD48QlI+PEZPTlQgZmFjZT1BcmlhbCBzaXplPTI+Qi4gDQpSLjxC
Uj5UaW5hPC9GT05UPjwvRElWPg0KPEJMT0NLUVVPVEUgDQpzdHlsZT0iUEFERElORy1SSUdIVDog
MHB4OyBQQURESU5HLUxFRlQ6IDVweDsgTUFSR0lOLUxFRlQ6IDVweDsgQk9SREVSLUxFRlQ6ICMw
MDAwMDAgMnB4IHNvbGlkOyBNQVJHSU4tUklHSFQ6IDBweCI+DQogIDxESVYgc3R5bGU9IkZPTlQ6
IDlwdCDLzszlIj4tLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0tIDwvRElWPg0KICA8RElWIHN0
eWxlPSJCQUNLR1JPVU5EOiAjZTRlNGU0OyBGT05UOiA5cHQgy87M5TsgZm9udC1jb2xvcjogYmxh
Y2siPjxCPkZyb206PC9CPiANCiAgPEEgdGl0bGU9dGVuYUBodWF3ZWkuY29tIGhyZWY9Im1haWx0
bzp0ZW5hQGh1YXdlaS5jb20iPlRpbmEgVFNPVTwvQT4gPC9ESVY+DQogIDxESVYgc3R5bGU9IkZP
TlQ6IDlwdCDLzszlIj48Qj5Ubzo8L0I+IDxBIHRpdGxlPXNpcEBpZXRmLm9yZyANCiAgaHJlZj0i
bWFpbHRvOnNpcEBpZXRmLm9yZyI+c2lwQGlldGYub3JnPC9BPiA8L0RJVj4NCiAgPERJViBzdHls
ZT0iRk9OVDogOXB0IMvOzOUiPjxCPlNlbnQ6PC9CPiBUaHVyc2RheSwgU2VwdGVtYmVyIDA3LCAy
MDA2IDk6MjEgDQogIFBNPC9ESVY+DQogIDxESVYgc3R5bGU9IkZPTlQ6IDlwdCDLzszlIj48Qj5T
dWJqZWN0OjwvQj4gW1NpcF0gc29tZSBkb3VidHMgYWJvdXQgDQogIGRyYWZ0LWd1cmJhbmktc2lw
LWRvbWFpbi1jZXJ0czwvRElWPg0KICA8RElWPjxCUj48L0RJVj4NCiAgPERJVj48Rk9OVCBmYWNl
PUFyaWFsIHNpemU9Mj5IaSBBbGwsPEJSPiZuYnNwOzxCUj5JIGhhZCBzb21lIGRvdWJ0cyBhYm91
dCANCiAgZHJhZnQtZ3VyYmFuaS1zaXAtZG9tYWluLWNlcnRzIGFzIGZvbGxvd2luZy4gSXQgd2ls
bCBiZSBhcHByZWNpYXRlZCBpZiBzb21lb25lIA0KICB3b3VsZCBsaWtlIHRvIHJlcGx5IGl0Ljwv
Rk9OVD48L0RJVj4NCiAgPERJVj4mbmJzcDs8L0RJVj4NCiAgPERJVj48Rk9OVCBmYWNlPUFyaWFs
IHNpemU9Mj4xLiBJbiBzZWN0aW9uIDMgPC9GT05UPjwvRElWPg0KICA8RElWPiZuYnNwOzwvRElW
Pg0KICA8RElWPjxGT05UIGZhY2U9QXJpYWwgc2l6ZT0yPiZsdDtRdW90ZSZndDs8QlI+Jm5ic3A7
Jm5ic3A7IE9uZSB3YXkgdG8gY29tYmF0IA0KICB0aGlzPEJSPiZuYnNwOyZuYnNwOyBpcyB0byBh
cnJhbmdlIGZvciB0aGUgcHJveHkgdG8gcG9zc2VzcyB0d28gY2VydGlmaWNhdGVzIA0KICAtLSBv
bmU8QlI+Jm5ic3A7Jm5ic3A7IGNvcnJlc3BvbmRpbmcgdG8gInNpcHM6ZXhhbXBsZS5jb20iIGFu
ZCB0aGUgb3RoZXIgDQogIGNvcnJlc3BvbmRpbmcgdG88QlI+Jm5ic3A7Jm5ic3A7ICJzaXBzOmRv
d250b3duLmV4YW1wbGUuY29tIiAtLSBhbmQgaGF2ZSBpdCANCiAgcHJlc2VudCB0aGUgcmlnaHQg
b25lIHdoZW4gPEJSPiZuYnNwOyZuYnNwOyANCiAgY29udGFjdGVkLjxCUj4mbHQ7L1F1b3RlJmd0
OzwvRk9OVD48L0RJVj4NCiAgPERJVj4mbmJzcDs8L0RJVj4NCiAgPERJVj48Rk9OVCBmYWNlPUFy
aWFsIHNpemU9Mj5CdXQgYXMgcGVyIG15IHVuZGVyc3RhbmRpbmcsIHRoZSBwcm9wb3NhbCBpbiB0
aGlzIA0KICBkcmFmdCBkb2Vzbid0IHJlc29sdmUgPEJSPnRoaXMgcHJvYmxlbSB0aGVyZWluYmVm
b3JlLiBBcyB0aGVyZSBpcyBvbmx5IG9uZSANCiAgU0lQVVJJIGlkZW50aXR5IGluIGNlcnRpZmlj
YXRlLDxCUj5pdCBjYW5ub3QgaGFuZGxlIHRoZSBwcm94eSB3aGljaCBoYWQgYSANCiAgZG9tYWlu
IG5hbWUgYW5kIGEgc2l0ZSBuYW1lLiA8QlI+RG8gSSBtaXNzIHNvbWV0aGluZz88L0ZPTlQ+PC9E
SVY+DQogIDxESVY+Jm5ic3A7PC9ESVY+DQogIDxESVY+PEZPTlQgZmFjZT1BcmlhbCBzaXplPTI+
Mi4gQXMgbXkgdW5kZXJzdGFuZGluZyBvZiBzZWN0aW9uIDQsIERvZXMgaXQgbWVhbiANCiAgdGhh
dCBjZXJ0aWZpY2F0ZSB3aWxsIGNvbnRhaW4gdHdvIDxCUj5pZGVudGl0aWVzLCBvbmUgaWRlbnRp
dHkgZm9yIHRyYW5zcG9ydCANCiAgbGF5ZXIsIG9uZSBmb3IgYXBwbGljYXRpb24gcHJvdG9jb2wg
bGF5ZXI/PEJSPklzIGl0IHBvc3NpYmxlIHRvIGhhdmUgbXVsdGlwbGUgDQogIGFwcGxpY2F0aW9u
IHByb3RvY29sIGlkZW50aXR5PyBlLmcsIG9uZSBpcyBzaXBzOmV4YW1wbGUuY29tLDxCUj5hbm90
aGVyIGlzIA0KICBzaXBzOmRvbnd0b3duLmV4YW1wbGUuY29tLjwvRk9OVD48L0RJVj4NCiAgPERJ
Vj4mbmJzcDs8L0RJVj4NCiAgPERJVj48Rk9OVCBmYWNlPUFyaWFsIHNpemU9Mj5Ib3cgYWJvdXQg
bXVsdGlwbGUga2luZCBvZiBhcHBsaWNhdGlvbiBsYXllciANCiAgcHJvdG9jb2xzIGltcGxlbWVu
dGVkIGJ5IG9uZSBzaXRlPyBpdCB3aWxsPEJSPmhhdmUgZWFjaCBpZGVudGl0eSBmb3IgZXZlcnkg
DQogIHByb3RvY29scz88L0ZPTlQ+PC9ESVY+DQogIDxESVY+Jm5ic3A7PC9ESVY+DQogIDxESVY+
PEZPTlQgZmFjZT1BcmlhbCBzaXplPTI+My4gSW4gU2VjdGlvbiA1LCA8L0ZPTlQ+PC9ESVY+DQog
IDxESVY+Jm5ic3A7PC9ESVY+DQogIDxESVY+PEZPTlQgZmFjZT1BcmlhbCBzaXplPTI+Jmx0O1F1
b3RlJmd0OzxCUj5JZiB0aGUgVUFDIHBlcmZvcm1lZCBSRkMzMjYzIA0KICByZXNvbHV0aW9uIG9u
IHRoZTxCUj4mbmJzcDsmbmJzcDsgVVJJIHRvIHJlYWNoIHRoZSBzZXJ2ZXIsIHRoZSBTSVBTIGlk
ZW50aXR5IA0KICBzdG9yZWQgaW4gdGhlIGNlcnRpZmljYXRlPEJSPiZuYnNwOyZuYnNwOyBNVVNU
IGJlIG1hdGNoZWQuJm5ic3A7IE90aGVyd2lzZSwgaWYgDQogIFJGQzMyNjMgcmVzb2x1dGlvbiBv
biB0aGUgVVJJIGZhaWxlZCwgPEJSPiZuYnNwOyZuYnNwOyB0aGUgVUFDIE1VU1QgbWF0Y2ggdGhl
IA0KICBETlMgbGFiZWwgaW4gdGhlIGNlcnRpZmljYXRlIHdpdGggdGhlIG5hbWUgb2Y8QlI+Jm5i
c3A7Jm5ic3A7IHRoZSBzZXJ2ZXIgdGhhdCANCiAgaXQgb3BlbmVkIGEgVExTIGNvbm5lY3Rpb24g
dG8uPEJSPiZsdDsvUXVvdGUmZ3Q7PEJSPiZuYnNwOyAidGhlIFNJUFMgLi4uIE1VU1QgDQogIGJl
IG1hdGNoZWQiLCB3aGljaCBVUkkgd2lsbCBiZSB1c2VkIHRvIG1hdGNoIHRoaXMgU0lQUyBpZGVu
dGl0eT88QlI+SXMgaXQgdGhlIA0KICBOZXh0SG9wIFVSSSBVQUMgdXNlZCB0byByZWFjaCB0aGUg
c2VydmVyPyBJZiBpdCdzIHRoZSBOZXh0SG9wIFVSSSBhbmQgMzI2MyANCiAgPEJSPnJlc29sdXRp
b24gZmFpbGVkLCBob3cgdGhlIFVBQyBjYW4gZmluZCB0aGUgc2VydmVyIGFuZCB0aGVuIGdldCB0
aGUgDQogIGNlcml0aWZpY2F0ZSBmcm9tIDxCUj50aGUgc2VydmVyPzwvRk9OVD48L0RJVj4NCiAg
PERJVj4mbmJzcDs8L0RJVj4NCiAgPERJVj48Rk9OVCBmYWNlPUFyaWFsIHNpemU9Mj5UaGFua3Mg
YWhlYWQuPC9GT05UPjwvRElWPjxGT05UIGZhY2U9QXJpYWwgDQpzaXplPTI+DQogIDxESVY+PEJS
PkIuIFIuPEJSPlRpbmE8L0RJVj4NCiAgPERJVj5NZXNzZW5nZXJzOiA8QlI+TVNOOiA8QSANCiAg
aHJlZj0ibWFpbHRvOnRpbmF0c291NkBob3RtYWlsLmNvbSI+dGluYXRzb3U2QGhvdG1haWwuY29t
PC9BPiZuYnNwOyZuYnNwOyANCiAgWWFob286IHRpbmFfdHNvdSZuYnNwOyZuYnNwOyZuYnNwOyBT
a3lwZTogdGluYVRTT1UmbmJzcDsmbmJzcDsmbmJzcDsgSmFiYmVyOiANCiAgPEEgaHJlZj0ibWFp
bHRvOnRpbmFAamFiYmVyLm9yZyI+dGluYUBqYWJiZXIub3JnPC9BPjwvRk9OVD48L0RJVj4NCiAg
PFA+DQogIDxIUj4NCg0KICA8UD48L1A+X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX188QlI+U2lwIG1haWxpbmcgDQogIGxpc3QmbmJzcDsgaHR0cHM6Ly93d3cx
LmlldGYub3JnL21haWxtYW4vbGlzdGluZm8vc2lwPEJSPlRoaXMgbGlzdCBpcyBmb3IgTkVXIA0K
ICBkZXZlbG9wbWVudCBvZiB0aGUgY29yZSBTSVAgUHJvdG9jb2w8QlI+VXNlIHNpcC1pbXBsZW1l
bnRvcnNAY3MuY29sdW1iaWEuZWR1IA0KICBmb3IgcXVlc3Rpb25zIG9uIGN1cnJlbnQgc2lwPEJS
PlVzZSBzaXBwaW5nQGlldGYub3JnIGZvciBuZXcgZGV2ZWxvcG1lbnRzIG9uIA0KICB0aGUgYXBw
bGljYXRpb24gb2Ygc2lwPC9CTE9DS1FVT1RFPjwvQk9EWT48L0hUTUw+DQo=

--Boundary_(ID_l16il6/P0f5wSkbsoQWNkg)--


--===============1997681435==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1997681435==--




From sip-bounces@ietf.org Fri Sep 08 03:49:53 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLb2q-0003sq-1Q; Fri, 08 Sep 2006 03:45:00 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLb2o-0003sk-26
	for sip@ietf.org; Fri, 08 Sep 2006 03:44:58 -0400
Received: from szxga03-in.huawei.com ([61.144.161.55])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLb2m-0003N3-9G
	for sip@ietf.org; Fri, 08 Sep 2006 03:44:58 -0400
Received: from huawei.com (szxga03-in [172.24.2.9])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J590077FKEYPA@szxga03-in.huawei.com> for
	sip@ietf.org; Fri, 08 Sep 2006 15:49:46 +0800 (CST)
Received: from huawei.com ([172.24.1.3])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J59008R1KEYJK@szxga03-in.huawei.com> for
	sip@ietf.org; Fri, 08 Sep 2006 15:49:46 +0800 (CST)
Received: from CMTEST6 ([10.70.149.78])
	by szxml01-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J59007TFKXK3P@szxml01-in.huawei.com>; Fri,
	08 Sep 2006 16:00:57 +0800 (CST)
Date: Fri, 08 Sep 2006 15:38:59 +0800
From: Tina TSOU <tena@huawei.com>
Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
To: Dean Willis <dean.willis@softarmor.com>, Francois Audet <audet@nortel.com>
Message-id: <00df01c6d319$d8cf5f70$4e95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <1ECE0EB50388174790F9694F77522CCF0CF5240F@zrc2hxm0.corp.nortel.com>
	<4DFF07EE-B8EB-40FA-AD53-DC5618632ADD@softarmor.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: a7d6aff76b15f3f56fcb94490e1052e4
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Thanks a lot. It is clearer now:)
Waiting for the aged Stilton ...

B. R.
Tina
----- Original Message ----- 
From: "Dean Willis" <dean.willis@softarmor.com>
To: "Francois Audet" <audet@nortel.com>
Cc: "Jonathan Rosenberg" <jdrosen@cisco.com>; "Tina TSOU" <tena@huawei.com>; <sip@ietf.org>
Sent: Friday, September 08, 2006 5:02 AM
Subject: Re: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt


> 
> On Sep 7, 2006, at 1:58 PM, Francois Audet wrote:
> 
> > Thanks.
> >
> > RFC 3608 limits this procedure to when service routes are used,
> > which shouldn't be the case. The "do double record-route instead
> > of response mangling as per 16.7/RFC3261" rule should apply  
> > everywhere.
> >
> 
> I concur, never having liked response-mangling much. However,  
> updating 3261 was somewhat out-of-scope for 3608.
> 
> I believe I have seen other drafts (RFCs?)  reference DRR "as  
> described in RFC 3608".
> 
> > The idea of fuirther cleaning-up in Jonathan's Route-Contruct draft
> > is appealing...
> 
> Indeed. The problem is one of deciding which bits should be cleaned,  
> and which should be left to age like Stilton . . .
> 
> --
> Dean
> 
> 
> 
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 09:15:10 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLg83-0003Ve-2y; Fri, 08 Sep 2006 09:10:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLg81-0003VY-LZ
	for sip@ietf.org; Fri, 08 Sep 2006 09:10:41 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLg80-00040g-BE
	for sip@ietf.org; Fri, 08 Sep 2006 09:10:41 -0400
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k88D9wT9027685; 
	Fri, 8 Sep 2006 08:09:58 -0500 (CDT)
Received: from [135.185.244.90] (il0015vkg1.ih.lucent.com [135.185.244.90]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k88DAC419433; Fri, 8 Sep 2006 08:10:12 -0500 (CDT)
Message-ID: <45016BB4.1020206@lucent.com>
Date: Fri, 08 Sep 2006 08:10:12 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
Organization: Bell Labs Security Technology Research Group
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: tena@huawei.com
Subject: Re: [Sip] some doubts about draft-gurbani-sip-domain-certs
References: <00a901c6d280$7e241aa0$4e95460a@china.huawei.com>
In-Reply-To: <00a901c6d280$7e241aa0$4e95460a@china.huawei.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b5d20af10c334b36874c0264b10f59f1
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Tina TSOU wrote:
> Hi All,
> 
> I had some doubts about draft-gurbani-sip-domain-certs as following.
>  It will be appreciated if someone would like to reply it.

Tina: Thanks for a reading of the draft.  More inline.

> 1. In section 3
> 
> <Quote> One way to combat this is to arrange for the proxy to possess
>  two certificates -- one corresponding to "sips:example.com" and the
>  other corresponding to "sips:downtown.example.com" -- and have it 
> present the right one when contacted. </Quote>
> 
> But as per my understanding, the proposal in this draft doesn't 
> resolve this problem thereinbefore. As there is only one SIPURI 
> identity in certificate, it cannot handle the proxy which had a 
> domain name and a site name. Do I miss something?

Ummm...I am not sure I follow your question.  The text you
quote further explains why having two certificates is not
desirable...

> 2. As my understanding of section 4, Does it mean that certificate 
> will contain two identities, one identity for transport layer, one 
> for application protocol layer?

Yes.

> Is it possible to have multiple application protocol identity? e.g, 
> one is sips:example.com, another is sips:donwtown.example.com.

You could conceivably have multiple application level
identities bound to the certificate, e.g., mailto:user@example.com,
sips:user@example.com, pres:user@example.com and so on.  These
will be present in the certificate as a set of URIs.

However, if you note the draft has different labels on
"downtown.example.com" and "example.com"; the former is preceeded
by a "DNS" label, and the latter by a "URI" label.  So they are
two different identities.

> How about multiple kind of application layer protocols implemented by
>  one site? it will have each identity for every protocols?

Example ... I think I know what you mean, but in case my understanding
is flawed, I do not want to go off on a tangent...

> 3. In Section 5,
> 
> <Quote> If the UAC performed RFC3263 resolution on the URI to reach 
> the server, the SIPS identity stored in the certificate MUST be 
> matched.  Otherwise, if RFC3263 resolution on the URI failed, the UAC
>  MUST match the DNS label in the certificate with the name of the 
> server that it opened a TLS connection to. </Quote>

> "the SIPS ... MUST be matched", which URI will be used to match this
> SIPS identity? Is it the NextHop URI UAC used to reach the server? 

If by "NextHop URI" you mean the R-URI or the topmost Route URI, yes.

> If it's the NextHop URI and 3263 resolution failed, how the UAC can find
> the server and then get the ceritificate from the server?

Let's say you had a request destined to "sip:user@example.com".
Doing an rfc3263-resolution on example.com domain will yield
a set IP address, port, transport tuples.  If when contacted over
TLS, the server presents a certificate with the SAN label
"sips:example.com", then you can be sure that your connection
reached the right destination.

Now, let's say that as a result of a Route list, you had a request
destined to "sips:user@downtown.example.com", where downtown is a
specific host in the example.com domain.  NAPTR and SRV of
"downtown.example.com" may not yield any RRs, so you would do a
A/AAAA lookup.  If when contacted over TLS, the server presents a
certificate with the SAN label "DNS:downtown.example.com", then
you can be sure that your connection has reached the right
destination.

Note that in the last case above, it may be the same server that
was contacted during the first case.  But two different URIs were
used to reach it; however, by having the right set of identities
in the certificate, the server is accessible to either URI.

Thanks,

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 10:21:11 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLhAU-0004d0-FK; Fri, 08 Sep 2006 10:17:18 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLhAS-0004cs-T9
	for sip@ietf.org; Fri, 08 Sep 2006 10:17:16 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLhAR-000701-IR
	for sip@ietf.org; Fri, 08 Sep 2006 10:17:16 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 1708E13F8AA; Fri,  8 Sep 2006 17:16:55 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (thymine18.gprs.dnafinland.fi [62.78.126.18])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 35B4F13F8A6
	for <sip@ietf.org>; Fri,  8 Sep 2006 17:16:45 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 0AB92F0AE6; Fri,  8 Sep 2006 17:17:01 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17665.31581.722403.878890@rautu.tutpro.com>
Date: Fri, 8 Sep 2006 17:17:01 +0300
From: Juha Heinanen <jh@tutpro.com>
To: sip@ietf.org
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 6d62ab47271805379d7172ee693a45db
Subject: [Sip] loop fix
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

why can't proxy check when it receives an initial request that it
doesn't already have a pending transaction with the same call id/request
uri/from tag?

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 10:39:14 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLhTU-0003ow-VS; Fri, 08 Sep 2006 10:36:56 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLhTU-0003or-Eq
	for sip@ietf.org; Fri, 08 Sep 2006 10:36:56 -0400
Received: from smail3.alcatel.fr ([64.208.49.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLhTQ-0000US-KZ
	for sip@ietf.org; Fri, 08 Sep 2006 10:36:56 -0400
Received: from missrv1.nextenso.alcatel.fr (proxy.nextenso.alcatel.fr
	[139.54.130.250])
	by smail3.alcatel.fr (ALCANET/NETFR) with ESMTP id k88EabjW014643;
	Fri, 8 Sep 2006 16:36:37 +0200
Received: from [139.54.131.75] (nx1075.nextenso.alcatel.fr [139.54.131.75])
	by missrv1.nextenso.alcatel.fr (8.13.5/8.12.8) with ESMTP id
	k88Eaahl020256; Fri, 8 Sep 2006 16:36:36 +0200
Message-ID: <45017FF4.1080204@alcatel.fr>
Date: Fri, 08 Sep 2006 16:36:36 +0200
From: Thomas Froment <Thomas.Froment@alcatel.fr>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] loop fix
References: <17665.31581.722403.878890@rautu.tutpro.com>
In-Reply-To: <17665.31581.722403.878890@rautu.tutpro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-nextenso_alcatel_fr-MailScanner-Information: Please contact the ISP for more
	information
X-nextenso_alcatel_fr-MailScanner: Not scanned: please contact your Internet
	E-Mail Service Provider for details
X-nextenso_alcatel_fr-MailScanner-From: thomas.froment@alcatel.fr
X-Alcanet-MTA-scanned-and-authorized: yes
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 08e48e05374109708c00c6208b534009
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Juha Heinanen wrote:
> why can't proxy check when it receives an initial request that it
> doesn't already have a pending transaction with the same call id/request
> uri/from tag?
>   
Loop detection aims at distinguishing "normal" loops (called "Spirals") 
to unwanted ones (the "loops"), which may cause the request to loop 
forever if nothing else is done...

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 10:48:11 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLhcO-00005t-8N; Fri, 08 Sep 2006 10:46:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLhcM-0008UR-1O
	for sip@ietf.org; Fri, 08 Sep 2006 10:46:06 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLhcK-0001Cr-Lt
	for sip@ietf.org; Fri, 08 Sep 2006 10:46:06 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id C4B2913F8AA; Fri,  8 Sep 2006 17:46:00 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (thymine18.gprs.dnafinland.fi [62.78.126.18])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id ABEC713F8A6;
	Fri,  8 Sep 2006 17:45:48 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 49C11F0AE6; Fri,  8 Sep 2006 17:46:08 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17665.33328.177804.94980@rautu.tutpro.com>
Date: Fri, 8 Sep 2006 17:46:08 +0300
From: Juha Heinanen <jh@tutpro.com>
To: Thomas Froment <Thomas.Froment@alcatel.fr>
Subject: Re: [Sip] loop fix
In-Reply-To: <45017FF4.1080204@alcatel.fr>
References: <17665.31581.722403.878890@rautu.tutpro.com>
	<45017FF4.1080204@alcatel.fr>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7bac9cb154eb5790ae3b2913587a40de
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Thomas Froment writes:

 > Loop detection aims at distinguishing "normal" loops (called "Spirals") 
 > to unwanted ones (the "loops"), which may cause the request to loop 
 > forever if nothing else is done...

if request "spirals" normally back to the proxy, doesn't its request uri
change somehow?

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 11:11:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLhyu-0001Vr-Ea; Fri, 08 Sep 2006 11:09:24 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLhys-0001V4-IC
	for sip@ietf.org; Fri, 08 Sep 2006 11:09:22 -0400
Received: from 42.mail-out.ovh.net ([213.251.189.42])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLhyr-0004Hv-4B
	for sip@ietf.org; Fri, 08 Sep 2006 11:09:22 -0400
Received: (qmail 16300 invoked by uid 503); 8 Sep 2006 14:54:57 -0000
Received: from b6.ovh.net (HELO mail189.ha.ovh.net) (213.186.33.56)
	by 42.mail-out.ovh.net with SMTP; 8 Sep 2006 14:54:57 -0000
Received: from b0.ovh.net (HELO queue-out) (213.186.33.50)
	by b0.ovh.net with SMTP; 8 Sep 2006 14:54:59 -0000
Received: from arennes-251-1-110-184.w86-203.abo.wanadoo.fr (HELO
	?192.168.1.37?) (86.203.113.184)
	by ns0.ovh.net with SMTP; 8 Sep 2006 14:54:58 -0000
Message-ID: <4501844A.6000105@nexcom.fr>
Date: Fri, 08 Sep 2006 16:55:06 +0200
From: Thomas Leseney <thomas.leseney@nexcom.fr>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] loop fix
References: <17665.31581.722403.878890@rautu.tutpro.com>	<45017FF4.1080204@alcatel.fr>
	<17665.33328.177804.94980@rautu.tutpro.com>
In-Reply-To: <17665.33328.177804.94980@rautu.tutpro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Ovh-Remote: 86.203.113.184 (arennes-251-1-110-184.w86-203.abo.wanadoo.fr)
X-Ovh-Local: 213.186.33.20 (ns0.ovh.net)
X-Spam-Check: DONE|H 0.5/0.0/5.0/N
X-Spam-Score: 1.8 (+)
X-Scan-Signature: ea4ac80f790299f943f0a53be7e1a21a
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Not necessarily. An IMS S-CSCF may proxy a request to several AS.
Call id, from tag and RURI do not change. Internal state of the S-CSCF
ensures that the request spirals but does not loop.

Thomas


Juha Heinanen wrote:

>Thomas Froment writes:
>
> > Loop detection aims at distinguishing "normal" loops (called "Spirals") 
> > to unwanted ones (the "loops"), which may cause the request to loop 
> > forever if nothing else is done...
>
>if request "spirals" normally back to the proxy, doesn't its request uri
>change somehow?
>
>-- juha
>
>_______________________________________________
>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>This list is for NEW development of the core SIP Protocol
>Use sip-implementors@cs.columbia.edu for questions on current sip
>Use sipping@ietf.org for new developments on the application of sip
>
>
>  
>


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 11:23:48 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLi8k-0003Zb-KW; Fri, 08 Sep 2006 11:19:34 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLhrx-0006pH-FD
	for sip@ietf.org; Fri, 08 Sep 2006 11:02:14 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLhrW-00039M-9Y
	for sip@ietf.org; Fri, 08 Sep 2006 11:02:13 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 3568013F8AC; Fri,  8 Sep 2006 18:01:42 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (thymine18.gprs.dnafinland.fi [62.78.126.18])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 0882513F8AA;
	Fri,  8 Sep 2006 18:01:30 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 28F9DF0AE6; Fri,  8 Sep 2006 18:01:49 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17665.34269.828648.204415@rautu.tutpro.com>
Date: Fri, 8 Sep 2006 18:01:49 +0300
From: Juha Heinanen <jh@tutpro.com>
To: Thomas Leseney <thomas.leseney@nexcom.fr>
Subject: Re: [Sip] loop fix
In-Reply-To: <4501844A.6000105@nexcom.fr>
References: <17665.31581.722403.878890@rautu.tutpro.com>
	<45017FF4.1080204@alcatel.fr>
	<17665.33328.177804.94980@rautu.tutpro.com>
	<4501844A.6000105@nexcom.fr>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7bac9cb154eb5790ae3b2913587a40de
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Thomas Leseney writes:

 > Not necessarily. An IMS S-CSCF may proxy a request to several AS.
 > Call id, from tag and RURI do not change. Internal state of the S-CSCF
 > ensures that the request spirals but does not loop.

IMS example doesn't count to me.  give me an example in regular rfc3261
environment.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 13:53:43 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLkTD-0006Jr-PX; Fri, 08 Sep 2006 13:48:51 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLkTC-0006Jl-FN
	for sip@ietf.org; Fri, 08 Sep 2006 13:48:50 -0400
Received: from mail.infointeractive.com ([207.231.225.15]
	helo=smtp.infointeractive.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLkTB-00081F-7H
	for sip@ietf.org; Fri, 08 Sep 2006 13:48:50 -0400
Received: from eng.infointeractive.com ([10.142.0.50]:51571 "EHLO
	eng.infointeractive.com") by mail.infointeractive.com with ESMTP
	id S896171AbWIHRfA (ORCPT <rfc822;sip@ietf.org>);
	Fri, 8 Sep 2006 14:35:00 -0300
Received: from localhost (user: 'benoit', uid#6008) by eng.infointeractive.com
	id <105063-8057>; Fri, 8 Sep 2006 14:34:48 -0300
Date: Fri, 8 Sep 2006 14:34:48 -0300
From: David Benoit <benoit@infointeractive.com>
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] loop fix
Message-ID: <20060908173448.GE19029@infointeractive.com>
References: <17665.31581.722403.878890@rautu.tutpro.com>
	<45017FF4.1080204@alcatel.fr>
	<17665.33328.177804.94980@rautu.tutpro.com>
	<4501844A.6000105@nexcom.fr>
	<17665.34269.828648.204415@rautu.tutpro.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <17665.34269.828648.204415@rautu.tutpro.com>
User-Agent: Mutt/1.4.2.1i
X-Spam-Score: 0.0 (/)
X-Scan-Signature: bb8f917bb6b8da28fc948aeffb74aa17
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

This is exactly why you have to decrement the Max-Forwards header each
time a message is forwarded.  (RFC 3261 Section 8.1.1.6)

Even if a call comes into a proxy, goes out of the proxy, and comes back
in, that doesn't necessarily mean there is something wrong.  If it
continues to follow the same path, it is, but a loop within a call is
completely valid.  An infinite loop is undesirable.  Max-Forwards solves
this problem.

Detection of a loop and sending a 482 Loop Detected is a "MAY" suggestion,
not a "MUST" requirement.  It is optional.

David

On Fri, Sep 08, 2006 at 06:01:49PM +0300, Juha Heinanen wrote:
> Thomas Leseney writes:
> 
>  > Not necessarily. An IMS S-CSCF may proxy a request to several AS.
>  > Call id, from tag and RURI do not change. Internal state of the S-CSCF
>  > ensures that the request spirals but does not loop.
> 
> IMS example doesn't count to me.  give me an example in regular rfc3261
> environment.
> 
> -- juha
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

-- 
David.Benoit@InfoInteractive.com | phone: 902-832-2649  fax: 902-832-1015
 "Complex problems have simple, neat and wrong solutions" - H. L. Menken

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 14:11:25 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLkmn-0006gS-HO; Fri, 08 Sep 2006 14:09:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLkmm-0006gG-5M
	for sip@ietf.org; Fri, 08 Sep 2006 14:09:04 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLkgL-00022q-CK
	for sip@ietf.org; Fri, 08 Sep 2006 14:02:26 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id DFEA213F8C2; Fri,  8 Sep 2006 21:02:18 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (nuclease102.gprs.dnafinland.fi [62.78.108.102])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id C2B7B13F8BF;
	Fri,  8 Sep 2006 21:02:12 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 2DC99F0AE6; Fri,  8 Sep 2006 21:02:32 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17665.45112.133917.326486@rautu.tutpro.com>
Date: Fri, 8 Sep 2006 21:02:32 +0300
From: Juha Heinanen <jh@tutpro.com>
To: David Benoit <benoit@infointeractive.com>
Subject: Re: [Sip] loop fix
In-Reply-To: <20060908173448.GE19029@infointeractive.com>
References: <17665.31581.722403.878890@rautu.tutpro.com>
	<45017FF4.1080204@alcatel.fr>
	<17665.33328.177804.94980@rautu.tutpro.com>
	<4501844A.6000105@nexcom.fr>
	<17665.34269.828648.204415@rautu.tutpro.com>
	<20060908173448.GE19029@infointeractive.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7bac9cb154eb5790ae3b2913587a40de
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

David Benoit writes:

 > This is exactly why you have to decrement the Max-Forwards header each
 > time a message is forwarded.  (RFC 3261 Section 8.1.1.6)

sure, but i still haven't got an example where in rfc3261 sip
environment, an initial request would, without looping, come twice to
the proxy having the same request-uri, call id, and from tag.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 14:11:53 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLknm-0007MQ-7e; Fri, 08 Sep 2006 14:10:06 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLkmg-0006ZZ-7K
	for sip@ietf.org; Fri, 08 Sep 2006 14:08:58 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLkjP-0002Z4-2f
	for sip@ietf.org; Fri, 08 Sep 2006 14:05:36 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k88I5Gw27426; Fri, 8 Sep 2006 14:05:17 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Fri, 8 Sep 2006 13:04:59 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0CFF22E1@zrc2hxm0.corp.nortel.com>
In-Reply-To: <4DFF07EE-B8EB-40FA-AD53-DC5618632ADD@softarmor.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Thread-Index: AcbSwQZno4IZXegkTs2IUWM9m9rVCAAsCwzg
From: "Francois Audet" <audet@nortel.com>
To: "Dean Willis" <dean.willis@softarmor.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 6d62ab47271805379d7172ee693a45db
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


> I believe I have seen other drafts (RFCs?)  reference DRR "as=20
> described in RFC 3608".

That's exactly what I will do for sips-guidelines.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 15:02:44 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLlXk-0003c6-05; Fri, 08 Sep 2006 14:57:36 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLlXh-0003Xu-KW
	for sip@ietf.org; Fri, 08 Sep 2006 14:57:33 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLlXf-0003QO-0g
	for sip@ietf.org; Fri, 08 Sep 2006 14:57:33 -0400
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k88Iv22V011697; 
	Fri, 8 Sep 2006 13:57:02 -0500 (CDT)
Received: from [135.185.244.90] (il0015vkg1.ih.lucent.com [135.185.244.90]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k88IvG416995; Fri, 8 Sep 2006 13:57:16 -0500 (CDT)
Message-ID: <4501BD0C.70003@lucent.com>
Date: Fri, 08 Sep 2006 13:57:16 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
Organization: Bell Labs Security Technology Research Group
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: David Benoit <benoit@infointeractive.com>
Subject: Re: [Sip] loop fix
References: <17665.31581.722403.878890@rautu.tutpro.com>	<45017FF4.1080204@alcatel.fr>	<17665.33328.177804.94980@rautu.tutpro.com>	<4501844A.6000105@nexcom.fr>	<17665.34269.828648.204415@rautu.tutpro.com>
	<20060908173448.GE19029@infointeractive.com>
In-Reply-To: <20060908173448.GE19029@infointeractive.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 856eb5f76e7a34990d1d457d8e8e5b7f
Cc: SIP LIST <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

David Benoit wrote:
> Detection of a loop and sending a 482 Loop Detected is a "MAY" suggestion,
> not a "MUST" requirement.  It is optional.

It was made optional in rfc3261, but that is changing.

The current wisdom is that loop detection is optional only if
the cardinality of the forked set is 1.  If you are forking to
multiple destinations (i.e., >= 2), it is a MUST.  See
http://www.ietf.org/internet-drafts/draft-ietf-sip-fork-loop-fix-03.txt

Thanks.

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 15:45:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLmFl-0004ti-83; Fri, 08 Sep 2006 15:43:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLmFj-0004t8-0v
	for sip@ietf.org; Fri, 08 Sep 2006 15:43:03 -0400
Received: from smtp104.biz.mail.mud.yahoo.com ([68.142.200.252])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GLm3F-000352-SQ
	for sip@ietf.org; Fri, 08 Sep 2006 15:30:16 -0400
Received: (qmail 68593 invoked from network); 8 Sep 2006 19:29:54 -0000
Received: from unknown (HELO Kasturi) (knarayan@sipera.com@69.26.216.147 with
	login)
	by smtp104.biz.mail.mud.yahoo.com with SMTP; 8 Sep 2006 19:29:53 -0000
From: "kasturi Narayanan" <knarayan@sipera.com>
To: "'Juha Heinanen'" <jh@tutpro.com>,
	"'David Benoit'" <benoit@infointeractive.com>
Subject: RE: [Sip] loop fix
Date: Fri, 8 Sep 2006 14:29:47 -0500
Message-ID: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
In-Reply-To: <17665.45112.133917.326486@rautu.tutpro.com>
Thread-Index: AcbTcjcNdcqs8dBCT1WY2Zb+q728MwACleLA
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 97adf591118a232206bdb5a27b217034
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Again not an example, which is used often
A Proxy Routes the call to a Redirect Server which adds a route header and
sends the call back to the proxy to route it based on the Route-header. U
may as well ask why the Redirect Server did not route it directly.
May be for some valid security/policy reasons. But since it is a possibility
it needs to be supported.

Kasturi

-----Original Message-----
From: Juha Heinanen [mailto:jh@tutpro.com] 
Sent: Friday, September 08, 2006 1:03 PM
To: David Benoit
Cc: sip@ietf.org
Subject: Re: [Sip] loop fix

David Benoit writes:

 > This is exactly why you have to decrement the Max-Forwards header each
 > time a message is forwarded.  (RFC 3261 Section 8.1.1.6)

sure, but i still haven't got an example where in rfc3261 sip
environment, an initial request would, without looping, come twice to
the proxy having the same request-uri, call id, and from tag.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 16:17:29 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLmiQ-0002Nm-23; Fri, 08 Sep 2006 16:12:42 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLmiO-0002NO-Lt
	for sip@ietf.org; Fri, 08 Sep 2006 16:12:40 -0400
Received: from smtp2.wanadoo.co.uk ([193.252.22.157] helo=smtp2.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLmiJ-0007JR-BZ
	for sip@ietf.org; Fri, 08 Sep 2006 16:12:40 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3109.me.freeserve.com (SMTP Server) with ESMTP id 811446400084; 
	Fri,  8 Sep 2006 22:12:34 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3109.me.freeserve.com (SMTP Server) with SMTP id 3B2FE640008A; 
	Fri,  8 Sep 2006 22:12:34 +0200 (CEST)
X-ME-UUID: 20060908201234242.3B2FE640008A@mwinf3109.me.freeserve.com
Message-ID: <007d01c6d383$1e342c30$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Juha Heinanen" <jh@tutpro.com>,
	"Thomas Leseney" <thomas.leseney@nexcom.fr>
References: <17665.31581.722403.878890@rautu.tutpro.com><45017FF4.1080204@alcatel.fr><17665.33328.177804.94980@rautu.tutpro.com><4501844A.6000105@nexcom.fr>
	<17665.34269.828648.204415@rautu.tutpro.com>
Subject: Re: [Sip] loop fix
Date: Fri, 8 Sep 2006 21:12:28 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 1.9 (+)
X-Scan-Signature: 52e1467c2184c31006318542db5614d5
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

----- Original Message From: "Juha Heinanen" <jh@xxxxx>

> Thomas Leseney writes:
>
> > Not necessarily. An IMS S-CSCF may proxy a request to several AS.
> > Call id, from tag and RURI do not change. Internal state of the S-CSCF
> > ensures that the request spirals but does not loop.
>
> IMS example doesn't count to me.  give me an example in regular rfc3261
> environment.


Maybe contrived but how about...

Our proxy gets a request for x@y and routes the request to B.  B turns out 
to be a proxy decides that x@y is not here at the moment and forwards the 
request elsewhere.  Loads of helpful proxies end up saying x@y is not here, 
but I know where they are rather than returning 404 or something. 
Eventually the request ends up back at our proxy.  Our proxy looks at all 
the Vias and sees an attempt has been made to contact x@y via B.  As an 
alternative, this time it decides to send the request out to C in the hope 
that that will find the real x@y.  The request could conceivably go through 
our proxy a number of times doing this.  I don't see that the URI has to 
change each time it does.

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 16:28:08 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLmv5-0000p5-TU; Fri, 08 Sep 2006 16:25:47 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLmv4-0000nq-Kc
	for sip@ietf.org; Fri, 08 Sep 2006 16:25:46 -0400
Received: from defender.ccpu.com ([216.54.134.34] helo=smtp.ccpu.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLmv3-0002fK-B3
	for sip@ietf.org; Fri, 08 Sep 2006 16:25:46 -0400
Received: from smtp.ccpu.com (localhost.localdomain [127.0.0.1])
	by localhost.ccpu.com (Postfix) with ESMTP
	id AB6EE346A2A; Fri,  8 Sep 2006 13:25:39 -0700 (PDT)
Received: from sd-exchange.ccsd.ccpu.com (sd-exchange.ccpu.com [172.16.0.203])
	by smtp.ccpu.com (Postfix) with ESMTP
	id 9E668346707; Fri,  8 Sep 2006 13:25:39 -0700 (PDT)
Received: from IN-EXCHANGE.ccin.ccpu.com ([172.25.0.16]) by
	sd-exchange.ccsd.ccpu.com with Microsoft SMTPSVC(6.0.3790.1830);
	Fri, 8 Sep 2006 13:25:38 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] loop fix
Date: Sat, 9 Sep 2006 01:55:28 +0530
Message-ID: <22F058C3ED9D784E90CE473F2A9847F08BC58F@in-exchange>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] loop fix
Thread-Index: AcbTch9sWG6jr3+jTCC89EXGbor8XQAEfaGQ
From: "Atul kumar Jha" <atulkumar.jha@ccpu.com>
To: "Juha Heinanen" <jh@tutpro.com>,
	"David Benoit" <benoit@infointeractive.com>
X-OriginalArrivalTime: 08 Sep 2006 20:25:38.0258 (UTC)
	FILETIME=[F2666B20:01C6D384]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 69a74e02bbee44ab4f8eafdbcedd94a1
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi,

I have a doubt. If all the below mentioned parameters are same will it
come to NS Processing as it should be dropped by the transaction layer
as the branch ID may be the same. Supposing the VIA also the same. So I
think it may be dropped at the transaction layer in the below mentioned
case. Please suggest on the same.

Regards,
Atul


-----Original Message-----
From: Juha Heinanen [mailto:jh@tutpro.com]=20
Sent: Friday, September 08, 2006 11:33 PM
To: David Benoit
Cc: sip@ietf.org
Subject: Re: [Sip] loop fix

David Benoit writes:

 > This is exactly why you have to decrement the Max-Forwards header
each
 > time a message is forwarded.  (RFC 3261 Section 8.1.1.6)

sure, but i still haven't got an example where in rfc3261 sip
environment, an initial request would, without looping, come twice to
the proxy having the same request-uri, call id, and from tag.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 08 17:31:28 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLnsG-0008NS-T7; Fri, 08 Sep 2006 17:26:56 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLnsF-0008NK-JX
	for sip@ietf.org; Fri, 08 Sep 2006 17:26:55 -0400
Received: from smtp1.wanadoo.co.uk ([193.252.22.158] helo=smtp1.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLnsE-00052i-6Z
	for sip@ietf.org; Fri, 08 Sep 2006 17:26:55 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3004.me.freeserve.com (SMTP Server) with ESMTP id 9DC451C001CC; 
	Fri,  8 Sep 2006 23:26:53 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3004.me.freeserve.com (SMTP Server) with SMTP id 6067B1C001CB; 
	Fri,  8 Sep 2006 23:26:53 +0200 (CEST)
X-ME-UUID: 20060908212653395.6067B1C001CB@mwinf3004.me.freeserve.com
Message-ID: <001001c6d38d$7ff54df0$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "kasturi Narayanan" <knarayan@sipera.com>,
	"'Juha Heinanen'" <jh@tutpro.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
Subject: Re: [Sip] loop fix
Date: Fri, 8 Sep 2006 22:26:46 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 7aafa0432175920a4b3e118e16c5cb64
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

It's conceivable you could have an outer proxy that is hardened from a DoS 
or load balancing point of view, which always routes to a proxy behind a 
firewall that makes the actual routing decision.  The routing proxy would 
then sends the request back to the hardened proxy for onward routing using 
the Route header to convey its instructs as you suggest.

Pete.
----- Original Message ----- 
From: "kasturi Narayanan" <knarayan@sipera.com>
To: "'Juha Heinanen'" <jh@tutpro.com>; "'David Benoit'" 
<benoit@infointeractive.com>
Cc: <sip@ietf.org>
Sent: Friday, September 08, 2006 8:29 PM
Subject: RE: [Sip] loop fix


> Again not an example, which is used often
> A Proxy Routes the call to a Redirect Server which adds a route header and
> sends the call back to the proxy to route it based on the Route-header. U
> may as well ask why the Redirect Server did not route it directly.
> May be for some valid security/policy reasons. But since it is a 
> possibility
> it needs to be supported.
>
> Kasturi
>
> -----Original Message-----
> From: Juha Heinanen [mailto:jh@tutpro.com]
> Sent: Friday, September 08, 2006 1:03 PM
> To: David Benoit
> Cc: sip@ietf.org
> Subject: Re: [Sip] loop fix
>
> David Benoit writes:
>
> > This is exactly why you have to decrement the Max-Forwards header each
> > time a message is forwarded.  (RFC 3261 Section 8.1.1.6)
>
> sure, but i still haven't got an example where in rfc3261 sip
> environment, an initial request would, without looping, come twice to
> the proxy having the same request-uri, call id, and from tag.
>
> -- juha
>
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 02:43:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLwSn-0001ka-1s; Sat, 09 Sep 2006 02:37:13 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLwSk-0001kS-Nl
	for sip@ietf.org; Sat, 09 Sep 2006 02:37:10 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLwSj-0004TR-Cs
	for sip@ietf.org; Sat, 09 Sep 2006 02:37:10 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 4E0A713F869; Sat,  9 Sep 2006 09:36:55 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (primer104.gprs.dnafinland.fi [62.78.125.104])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 3E64F13F636;
	Sat,  9 Sep 2006 09:36:37 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 65E3CF0AE6; Sat,  9 Sep 2006 09:36:50 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17666.24834.231017.689505@rautu.tutpro.com>
Date: Sat, 9 Sep 2006 09:36:50 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "kasturi Narayanan" <knarayan@sipera.com>
Subject: RE: [Sip] loop fix
In-Reply-To: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
References: <17665.45112.133917.326486@rautu.tutpro.com>
	<041001c6d37d$261a2c20$4101a8c0@Kasturi>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d17f825e43c9aed4fd65b7edddddec89
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

kasturi Narayanan writes:

 > A Proxy Routes the call to a Redirect Server which adds a route header and
 > sends the call back to the proxy to route it based on the
 > Route-header.

this example doesn't count to me either.  for security reasons, my proxy
only accepts an initial request containing pre-loaded route in case that
set contains only one element for the proxy itself.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 02:49:57 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLwba-00074v-GD; Sat, 09 Sep 2006 02:46:18 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLwbZ-00072Z-Eu
	for sip@ietf.org; Sat, 09 Sep 2006 02:46:17 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLwbY-0005Hn-3R
	for sip@ietf.org; Sat, 09 Sep 2006 02:46:17 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 8349213F869; Sat,  9 Sep 2006 09:46:12 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (primer104.gprs.dnafinland.fi [62.78.125.104])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id D756A13F636;
	Sat,  9 Sep 2006 09:46:06 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 627F2F0AE6; Sat,  9 Sep 2006 09:46:25 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17666.25409.74511.211668@rautu.tutpro.com>
Date: Sat, 9 Sep 2006 09:46:25 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Pete Cordell" <pete@tech-know-ware.com>
Subject: Re: [Sip] loop fix
In-Reply-To: <007d01c6d383$1e342c30$5000a8c0@RW>
References: <17665.31581.722403.878890@rautu.tutpro.com>
	<45017FF4.1080204@alcatel.fr>
	<17665.33328.177804.94980@rautu.tutpro.com>
	<4501844A.6000105@nexcom.fr>
	<17665.34269.828648.204415@rautu.tutpro.com>
	<007d01c6d383$1e342c30$5000a8c0@RW>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 08170828343bcf1325e4a0fb4584481c
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Pete Cordell writes:

 > Our proxy gets a request for x@y and routes the request to B.  B turns out 
 > to be a proxy decides that x@y is not here at the moment and forwards the 
 > request elsewhere.  Loads of helpful proxies end up saying x@y is not here, 
 > but I know where they are rather than returning 404 or something. 
 > Eventually the request ends up back at our proxy.  Our proxy looks at all 
 > the Vias and sees an attempt has been made to contact x@y via B.  As an 
 > alternative, this time it decides to send the request out to C in the hope 
 > that that will find the real x@y.  

sorry, i don't count this either.  my proxy doesn't do routing decisions
based on via headers (which would be very time consuming).

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 03:09:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLwto-00087f-6N; Sat, 09 Sep 2006 03:05:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLwtn-00087a-DT
	for sip@ietf.org; Sat, 09 Sep 2006 03:05:07 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLwtm-0006bO-1e
	for sip@ietf.org; Sat, 09 Sep 2006 03:05:07 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 54B4213F87D; Sat,  9 Sep 2006 10:05:02 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (primer104.gprs.dnafinland.fi [62.78.125.104])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id A2B4213F869;
	Sat,  9 Sep 2006 10:04:55 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 7DBBFF0AE6; Sat,  9 Sep 2006 10:05:13 +0300 (EEST)
From: Juha Heinanen <jh@tutpro.com>
To: "Pete Cordell" <pete@tech-know-ware.com>
Subject: Re: [Sip] loop fix
In-Reply-To: <001001c6d38d$7ff54df0$5000a8c0@RW>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<001001c6d38d$7ff54df0$5000a8c0@RW>
X-Mailer: VM 7.19 under Emacs 21.4.1
Message-Id: <20060909070513.7DBBFF0AE6@rautu>
Date: Sat,  9 Sep 2006 10:05:13 +0300 (EEST)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7655788c23eb79e336f5f8ba8bce7906
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Pete Cordell writes:

 > It's conceivable you could have an outer proxy that is hardened from a DoS 
 > or load balancing point of view, which always routes to a proxy behind a 
 > firewall that makes the actual routing decision.  

since the proxy behind makes the routing decisions, it could also take
care of loop detection.  if you want to do loop detection in the outer
proxy, you could configure it to do so only for requests from outside
and then again, it would suffice to do matching of r-uri, call-id, and
from tag.

all examples so far have dealt with some special circumstances that
either don't exist in my world or can be taken care by special
configuration.  i got an impression from the loop fix internet draft,
that this complicated extra via thing is needed for everyday operation
of regular proxies in order to prevent loops due to forking.  so far,
i'm not convinced.

in summary: no one has yet been able to justify that the via detection
mechanism is really needed in normal rfc3261 environment.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 05:00:47 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLyby-0006wW-Eb; Sat, 09 Sep 2006 04:54:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLybw-0006wP-BH
	for sip@ietf.org; Sat, 09 Sep 2006 04:54:48 -0400
Received: from smtp1.wanadoo.co.uk ([193.252.22.158] helo=smtp1.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLybt-0002z7-UH
	for sip@ietf.org; Sat, 09 Sep 2006 04:54:48 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3013.me.freeserve.com (SMTP Server) with ESMTP id 762E7B400086; 
	Sat,  9 Sep 2006 10:54:45 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3013.me.freeserve.com (SMTP Server) with SMTP id 3EE73B400085; 
	Sat,  9 Sep 2006 10:54:45 +0200 (CEST)
X-ME-UUID: 20060909085445257.3EE73B400085@mwinf3013.me.freeserve.com
Message-ID: <000d01c6d3ed$99fc3370$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Juha Heinanen" <jh@tutpro.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi><001001c6d38d$7ff54df0$5000a8c0@RW>
	<20060909070513.7DBBFF0AE6@rautu>
Subject: Re: [Sip] loop fix
Date: Sat, 9 Sep 2006 09:54:44 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="Windows-1252";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: e1e48a527f609d1be2bc8d8a70eb76cb
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

----- Original Message From: "Juha Heinanen" <jh@>

> all examples so far have dealt with some special circumstances that
> either don't exist in my world or can be taken care by special
> configuration.

Although esoteric, my expectation is that as time goes on call routing etc. 
will become more complicated, and what seems off the wall today will become 
common place tomorrow.  SIP after all is supposed to allow us all to define 
our own wacky services, and doubtlessly a number of these will get chained 
together, possibly like a Unix command pipe.  Hence pushing the envelope 
here.

> i got an impression from the loop fix internet draft,
> that this complicated extra via thing is needed for everyday operation
> of regular proxies in order to prevent loops due to forking.  so far,
> i'm not convinced.
>
> in summary: no one has yet been able to justify that the via detection
> mechanism is really needed in normal rfc3261 environment.
>
> -- juha

I think the main difference between what you are doing and the loop fix 
draft is about is that you have a stateful proxy and loop fix describes a 
way of doing it statelessly.  Perhaps the draft should say that if you have 
other means of accessing the state that the loop fix draft would otherwise 
put into the via headers, then you don't need to operate as the loop fix 
draft says.  It may say that already.

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 05:30:38 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GLz8F-0004ya-SI; Sat, 09 Sep 2006 05:28:11 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GLz8D-0004yV-0s
	for sip@ietf.org; Sat, 09 Sep 2006 05:28:09 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GLz8B-00025h-Kr
	for sip@ietf.org; Sat, 09 Sep 2006 05:28:09 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 7D8A013F8A6; Sat,  9 Sep 2006 12:28:03 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (primer104.gprs.dnafinland.fi [62.78.125.104])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 5E27513F89D;
	Sat,  9 Sep 2006 12:27:57 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 4BB9BF0AE6; Sat,  9 Sep 2006 12:28:10 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17666.35113.677231.741500@rautu.tutpro.com>
Date: Sat, 9 Sep 2006 12:28:09 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Pete Cordell" <pete@tech-know-ware.com>
Subject: Re: [Sip] loop fix
In-Reply-To: <000d01c6d3ed$99fc3370$5000a8c0@RW>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<001001c6d38d$7ff54df0$5000a8c0@RW>
	<20060909070513.7DBBFF0AE6@rautu>
	<000d01c6d3ed$99fc3370$5000a8c0@RW>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9466e0365fc95844abaf7c3f15a05c7d
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Pete Cordell writes:

 > Although esoteric, my expectation is that as time goes on call routing etc. 
 > will become more complicated, and what seems off the wall today will become 
 > common place tomorrow.  SIP after all is supposed to allow us all to define 
 > our own wacky services, and doubtlessly a number of these will get chained 
 > together, possibly like a Unix command pipe.  Hence pushing the envelope 
 > here.

sure you need special means to cope with esoteric situations, but loop
fix draft doesn't state that it is needed for fixes esoteric corner
cases, but common forking cases like the example that it contains.  my
problem is that i don't understand why the via mechanism is needed to
solve the looping problem in its example.

 > I think the main difference between what you are doing and the loop fix 
 > draft is about is that you have a stateful proxy and loop fix describes a 
 > way of doing it statelessly.  Perhaps the draft should say that if you have 
 > other means of accessing the state that the loop fix draft would otherwise 
 > put into the via headers, then you don't need to operate as the loop fix 
 > draft says.  It may say that already.

forking statelessly is not a good idea for many reasons.  also, the
example in the loop fix draft deals with stateful proxies.

i must be missing something big here, since loop fix draft is authored
by well known sip people.  what is it?

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 12:11:42 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GM5Kt-0008NX-8b; Sat, 09 Sep 2006 12:05:39 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GM5Kr-0008Kv-Bu
	for sip@ietf.org; Sat, 09 Sep 2006 12:05:37 -0400
Received: from smtp1.wanadoo.co.uk ([193.252.22.158] helo=smtp1.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GM5Kp-0008DO-Vq
	for sip@ietf.org; Sat, 09 Sep 2006 12:05:37 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3008.me.freeserve.com (SMTP Server) with ESMTP id 33BFF1C0008B; 
	Sat,  9 Sep 2006 18:05:35 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3008.me.freeserve.com (SMTP Server) with SMTP id EB6D11C00083; 
	Sat,  9 Sep 2006 18:05:34 +0200 (CEST)
X-ME-UUID: 20060909160534964.EB6D11C00083@mwinf3008.me.freeserve.com
Message-ID: <03ab01c6d429$c9740790$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Juha Heinanen" <jh@tutpro.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi><001001c6d38d$7ff54df0$5000a8c0@RW><20060909070513.7DBBFF0AE6@rautu><000d01c6d3ed$99fc3370$5000a8c0@RW>
	<17666.35113.677231.741500@rautu.tutpro.com>
Subject: Re: [Sip] loop fix
Date: Sat, 9 Sep 2006 17:05:33 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: b19722fc8d3865b147c75ae2495625f2
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

----- Original Message From: "Juha Heinanen"

> i must be missing something big here, since loop fix draft is authored
> by well known sip people.  what is it?
>
> -- juha

I might have been getting over complicated!

One thing you have to do is tell the difference between an INVITE 
re-transmission (which you would want to forward) and a loop (which you 
don't want to forward).

I think only the message itself can tell you this, as looking up local state 
based on uri, from tag and so on would not be sufficient to tell if the same 
message had already been processed.

As Via records the path of the message, this is the sensible place to look 
for the messages routing history, and work out whether it has passed through 
this proxy before.  The loop-fix draft is a recommendation of how to do 
this, but does allow for other schemes.

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 12:49:39 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GM5z4-0008N4-AS; Sat, 09 Sep 2006 12:47:10 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GM5z3-0008Mz-9G
	for sip@ietf.org; Sat, 09 Sep 2006 12:47:09 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GM5z1-0007OP-Uk
	for sip@ietf.org; Sat, 09 Sep 2006 12:47:09 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id B183C13F8A8; Sat,  9 Sep 2006 19:47:01 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (primer104.gprs.dnafinland.fi [62.78.125.104])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 7B11413F8A6;
	Sat,  9 Sep 2006 19:46:41 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id DCFFCF0AE6; Sat,  9 Sep 2006 19:46:54 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17666.61438.609056.156739@rautu.tutpro.com>
Date: Sat, 9 Sep 2006 19:46:54 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Pete Cordell" <pete@tech-know-ware.com>
Subject: Re: [Sip] loop fix
In-Reply-To: <03ab01c6d429$c9740790$5000a8c0@RW>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<001001c6d38d$7ff54df0$5000a8c0@RW>
	<20060909070513.7DBBFF0AE6@rautu>
	<000d01c6d3ed$99fc3370$5000a8c0@RW>
	<17666.35113.677231.741500@rautu.tutpro.com>
	<03ab01c6d429$c9740790$5000a8c0@RW>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7bac9cb154eb5790ae3b2913587a40de
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Pete Cordell writes:

 > One thing you have to do is tell the difference between an INVITE 
 > re-transmission (which you would want to forward) and a loop (which you 
 > don't want to forward).

statefull proxy takes of re-transmissions automatically.  there is no
need to study via records.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 13:50:12 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GM6uS-0006I0-0a; Sat, 09 Sep 2006 13:46:28 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GM6uQ-0006Hv-Ag
	for sip@ietf.org; Sat, 09 Sep 2006 13:46:26 -0400
Received: from ihemail4.lucent.com ([135.245.0.39])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GM6uO-00045l-2H
	for sip@ietf.org; Sat, 09 Sep 2006 13:46:26 -0400
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail4.lucent.com (8.13.6/IER-o) with ESMTP id k89Hk4ht006207; 
	Sat, 9 Sep 2006 12:46:04 -0500 (CDT)
Received: from [135.244.1.93] (vkg.lra2.lucent.com [135.244.1.93]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k89Hk4K09176; Sat, 9 Sep 2006 12:46:04 -0500 (CDT)
Message-ID: <4502FDDB.10202@lucent.com>
Date: Sat, 09 Sep 2006 12:46:03 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] loop fix
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>	<001001c6d38d$7ff54df0$5000a8c0@RW>	<20060909070513.7DBBFF0AE6@rautu>	<000d01c6d3ed$99fc3370$5000a8c0@RW>
	<17666.35113.677231.741500@rautu.tutpro.com>
In-Reply-To: <17666.35113.677231.741500@rautu.tutpro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0bc60ec82efc80c84b8d02f4b0e4de22
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Juha Heinanen wrote:
> i must be missing something big here, since loop fix draft is authored
> by well known sip people.  what is it?

Juha: The basic problem was that people were eschewing loop
detection in favor of simply inserting a Max-Forwards.  In
rfc2543, loop detection for proxies was mandatory; this was
normatively relaxed in rfc3261.  As a result, newer
implementations were not doing loop detection at all (although
those implementors that were following SIP from pre-rfc2543
probably left the code in as they moved to rfc3261).

If the newer implementations depend on M-F to terminate loops,
they will have the amplification attack mentioned in the loop-fix
draft.  The loop-fix draft simply puts things back as they
were in rfc2543 wrt proxies and loop detection (i.e., mandating
it).  In addition, since our collective wisdom in SIP has increased
since rfc2543, there is additional text in loop-fix that
guides implementors when to do it (>=2 forked branches, which
headers to include) and when not (using outbound, for example).

Thanks.

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 14:14:10 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GM7Hv-00086X-C5; Sat, 09 Sep 2006 14:10:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GM7Ht-00086S-9b
	for sip@ietf.org; Sat, 09 Sep 2006 14:10:41 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GM7Hq-0007Qs-TE
	for sip@ietf.org; Sat, 09 Sep 2006 14:10:41 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 9FC8413F8BF; Sat,  9 Sep 2006 21:10:32 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (primer104.gprs.dnafinland.fi [62.78.125.104])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 8949A13F8AB;
	Sat,  9 Sep 2006 21:10:14 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 86D10F0AE6; Sat,  9 Sep 2006 21:10:27 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17667.915.327050.203690@rautu.tutpro.com>
Date: Sat, 9 Sep 2006 21:10:27 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Vijay K. Gurbani" <vkg@lucent.com>
Subject: Re: [Sip] loop fix
In-Reply-To: <4502FDDB.10202@lucent.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<001001c6d38d$7ff54df0$5000a8c0@RW>
	<20060909070513.7DBBFF0AE6@rautu>
	<000d01c6d3ed$99fc3370$5000a8c0@RW>
	<17666.35113.677231.741500@rautu.tutpro.com>
	<4502FDDB.10202@lucent.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: de4f315c9369b71d7dd5909b42224370
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Vijay K. Gurbani writes:

 > The loop-fix draft simply puts things back as they
 > were in rfc2543 wrt proxies and loop detection (i.e., mandating
 > it).  In addition, since our collective wisdom in SIP has increased
 > since rfc2543, there is additional text in loop-fix that
 > guides implementors when to do it (>=2 forked branches, which
 > headers to include) and when not (using outbound, for example).

that is all fine, but i'm still waiting an rfc3261 based example where
simply comparing call-id/r-uri/from tag to pending initial request
transactions doesn't solve the problem.  loop-fix draft has Alternative
solutions section that doesn't even mention this simple solution even
when it fixes the loop in the example.  instead the draft proposes a
much heavier solution.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 15:56:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GM8rN-0004LH-VD; Sat, 09 Sep 2006 15:51:25 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GM8rM-0004Kl-Pm
	for sip@ietf.org; Sat, 09 Sep 2006 15:51:24 -0400
Received: from smtp1.wanadoo.co.uk ([193.252.22.158] helo=smtp1.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GM8rL-0006qD-Cr
	for sip@ietf.org; Sat, 09 Sep 2006 15:51:24 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3006.me.freeserve.com (SMTP Server) with ESMTP id B0B3A1C00085; 
	Sat,  9 Sep 2006 21:51:22 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3006.me.freeserve.com (SMTP Server) with SMTP id 6FBF51C00084; 
	Sat,  9 Sep 2006 21:51:22 +0200 (CEST)
X-ME-UUID: 20060909195122457.6FBF51C00084@mwinf3006.me.freeserve.com
Message-ID: <000f01c6d449$54168160$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Juha Heinanen" <jh@tutpro.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi><001001c6d38d$7ff54df0$5000a8c0@RW><20060909070513.7DBBFF0AE6@rautu><000d01c6d3ed$99fc3370$5000a8c0@RW><17666.35113.677231.741500@rautu.tutpro.com><03ab01c6d429$c9740790$5000a8c0@RW>
	<17666.61438.609056.156739@rautu.tutpro.com>
Subject: Re: [Sip] loop fix
Date: Sat, 9 Sep 2006 20:51:18 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: a7d6aff76b15f3f56fcb94490e1052e4
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

----- Original Message From: "Juha Heinanen"

> Pete Cordell writes:
>
> > One thing you have to do is tell the difference between an INVITE
> > re-transmission (which you would want to forward) and a loop (which you
> > don't want to forward).
>
> statefull proxy takes of re-transmissions automatically.  there is no
> need to study via records.

I have to admit I'm coming around to your way of thinking!

Thinking aloud, if the issue is mainly forking proxies (Max-Forwards taking 
care of looping for other proxies), then we are talking about stateful 
proxies.  For a stateful proxy to forward a request in response to an 
incoming request, it must decide that it is a new transaction.  This is 
because if it is deemed to be an existing transaction, then it will 
terminate the request in the existing Server Transaction handler for the 
transaction.  It does as if it is difficult to get a message explosion from 
those set of circumstances.

I wonder if loop-fix is a legacy from RFC 2543 days when forking proxies 
only SHOULD be stateful and Max-Forwards for optional.  RFC 2543 was also 
less prescriptive about what a stateful proxy did.  Perhaps loop-fix solves 
the the problem in 2543 space, but it is not actually needed when entities 
are 3261 compliant!

So I'll agree it's a question worth asking, but not sure I'm ready to chuck 
loop-fix out yet!

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 16:36:05 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GM9Vk-0003wt-CS; Sat, 09 Sep 2006 16:33:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GM9Vj-0003wX-70
	for sip@ietf.org; Sat, 09 Sep 2006 16:33:07 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GM9Vh-0005Ma-Tu
	for sip@ietf.org; Sat, 09 Sep 2006 16:33:07 -0400
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-6.cisco.com with ESMTP; 09 Sep 2006 13:33:04 -0700
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-4.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k89KX4LN018415; Sat, 9 Sep 2006 13:33:04 -0700
Received: from [66.44.185.192] (sjc-vpn-hwcore-812.cisco.com [10.21.155.44])
	by sj-core-5.cisco.com (8.12.10/8.12.6) with ESMTP id k89KWN1r017202;
	Sat, 9 Sep 2006 13:33:04 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <013F1EE9-D9C7-4D71-A213-404BAAC59987@cisco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: SIP <sip@ietf.org>, John Elwell <john.elwell@siemens.com>
From: Cullen Jennings <fluffy@cisco.com>
Date: Sat, 9 Sep 2006 13:51:23 -0500
X-Mailer: Apple Mail (2.752.2)
DKIM-Signature: a=rsa-sha1; q=dns; l=2520; t=1157833984; x=1158697984;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:draft-ietf-sip-connected-identity-01=20comments;
	X=v=3Dcisco.com=3B=20h=3DwU90j13D/vW7N4mK7wwaZM5fKwo=3D;
	b=mjKVEvLrGwWdu0gW1Quf1H64AIsWQHvZ630Hl+RAG8hMgtUAmzZUYsGv6vWxm8rEUblWHGmv
	5HgK7ToQr+FPHPguzfrVlblp+KNEXcwQM23nVGWg1SblhD3SDm7TNmH6;
Authentication-Results: sj-dkim-4.cisco.com; header.From=fluffy@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0a7aa2e6e558383d84476dc338324fab
Cc: 
Subject: [Sip] draft-ietf-sip-connected-identity-01 comments
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


John thanks for the work on this - it is looking really good and I  
like how you have solved the issues. WIth my AD hat on, I really like  
how this draft it going and looks good. The rest of the comments are  
sent with  my individual hat on and some of them are far more nit  
picky that I would feel was appropriate for an IESG comment.

Few things ....

When an Update is sent. Are there any conditions under which it might  
be rejected. Bad identity for example. I think that might need a  
little discussion and also what the UA does when it sends an update  
with a no identity and it gets rejected.

There is a lot of background information about how we got to this  
decision, other ways that one might do this etc. If this was moved to  
an appendix, it would probably help implementers focus on the key stuff.

The security section could probably use more work around the issue of  
what you can trust here and what you can't. Might want to reference  
history as a possible solution to some of the stuff that this does  
not solve.


Nits

In the Header on first page, needs to day updates 3261

Somewhere in draft need a describe exactly what this changes in 3261

The name of the option tag "id-change" sort of bugs me. What is  
allowed to change here does not really have to do with identity as  
much as the from URI. I would prefer the name "from-change" as what  
this is saying is only that part of 2543 was not required by the UA.

I computed the Identity Strings - I have a program to do this and can  
update if the messages change. Make sure we regenerate and check  
these in in Auth 48.

  invite(2) base64 identity is xN6gCHR6KxGM 
+nyiEM13LcWgAFQD3lkni1DPkwgadxh4BB7G 
+VwY13uRv5hbCI2VSvKuZ4LYN0JNoe7v8VAzruKMyi4Bi4nUghR/ 
fFGBrpBSjztmfffLTp6SFLxo9XQSVrkm1O4c/4UrKn2ejRz+5BULu9n9kWswzKDNjlYlmmc=

  update(8) base64 identity is g8WJiVEzrbYum+z2lnS3pL 
+MIhuI439gDiMCHm01fwX5D8Ft5Ib9tewLfBT9mDOUSn6wkPSWVQfqdMF/ 
QBPkpsIIROIi2sJOYBEMXZpNrhJd8/ 
uboXMl9KRujDFQefZlmXV8dwD6XsPnMgcH8jAcaZ5aS04NyfWadIwTnGeuxko=

  update(4) base64 identity is  
AQFLSjCDRhO2eXlWmTajk99612hkJii9giDMWki5uT6qc4BrekywOUuObcwZI3qhJReZCN7y 
bMBNYFZ5yFXWdyet4j3zLNCONU9ma+rs8ZOv0+z/Q3Z5cD26HrmitU 
+OCKWPLObaxbkGQry9hQxOmwRmlUgSjkeCEjgnc1iQc3E=

  reinvite(6) base64 identity is  
KCd3YLQHj51SlCQhFMnpQjmP6wHh7JGRO8LsB4v5SGEr/Mwu7j6Gpal8ckVM2vd1zqH/ 
F4WJXYDlB525uuJm/fN3O1A2xsZ9BxRkh4N4U19TL9I2Tok3U3kGg8To/ 
6w1mEXpUQjo3OgNYqOBtawHuZI5nrOVaV3IrbQh1b2KgLo=


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 16:36:05 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GM9Vj-0003wj-J4; Sat, 09 Sep 2006 16:33:07 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GM9Vh-0003wS-JG
	for sip@ietf.org; Sat, 09 Sep 2006 16:33:05 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GM9Vg-0005Ma-9W
	for sip@ietf.org; Sat, 09 Sep 2006 16:33:05 -0400
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-6.cisco.com with ESMTP; 09 Sep 2006 13:33:02 -0700
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-4.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k89KX2oh018396; Sat, 9 Sep 2006 13:33:02 -0700
Received: from [66.44.185.192] (sjc-vpn-hwcore-812.cisco.com [10.21.155.44])
	by sj-core-5.cisco.com (8.12.10/8.12.6) with ESMTP id k89KWN1o017202;
	Sat, 9 Sep 2006 13:33:01 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <285E7350-8C4F-4A92-8E1E-3BFAC67CC8EC@cisco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: SIP <sip@ietf.org>, Jonathan Rosenberg <jdrosen@cisco.com>
From: Cullen Jennings <fluffy@cisco.com>
Date: Sat, 9 Sep 2006 13:02:15 -0500
X-Mailer: Apple Mail (2.752.2)
DKIM-Signature: a=rsa-sha1; q=dns; l=1847; t=1157833982; x=1158697982;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:draft-ietf-sip-gruu-10=20comments;
	X=v=3Dcisco.com=3B=20h=3DMNLUMkpOBjhIM+y3igC1TFMcDKs=3D;
	b=qS2rhIKv105MoISlHJef8AgyPcE5UhUhTwOHHq9k/Fyuqe4/IJX7OmZCXiWCdGnvS0QiKpnc
	+ZLk8qaFP5OcC1gpYsalfQrTcZcnyJBRn59npvhHSLoseas1L07u7WCK;
Authentication-Results: sj-dkim-4.cisco.com; header.From=fluffy@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7baded97d9887f7a0c7e8a33c2e3ea1b
Cc: 
Subject: [Sip] draft-ietf-sip-gruu-10 comments
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


One significant issue...

Would you agree to put in the security section that any UA that is  
sending a request where it has set the From header field value to  
Anonymous MUST not use a GRUU that does not have the anonymous  
property? I suspect the answer to this will be yes - I'm still trying  
to think about the implications of this and trade offs.


Few smaller things:

Section 8.1.1. para 4. I really can't figure out what this says - I  
suspect that I know what is trying to say but when I try to parse the  
paragraph, my stack overflows. Sorry for such a useless comment - I'm  
not exactly sure how to improve it.

Section 8.2.1 para 2, last sentence. I think the term "unknown" is  
not what we want here. Often the device will not be registered, (say  
it is powered off), but the device id will be "known" to the domain  
as it created the GRUU in the past, it still have provisioning  
information for this device etc. It seems like we might want  
something more like "not registered" instead of unknown

Section 8.2.2

I think I am likely confused here. I basically don't see why a simple  
classic sip trapezoid deployment would ever need to Record Route. The  
fact that the GRUU refereed to the "home" domain would cause it work  
get back here. As a side note, I find the terms "home", "edge" etc  
very undefined outside the IMS context. Anyways, I believe this  
section might be all right but I am failing to understand what needs  
to be done and why. If I was a non IMS proxy implementer, I suspect I  
would just ignore this whole section.

Section 8.2.3 - This is probably just my missing something in reading  
this but I did not see how the procession of mid dialog requests was  
different that than 8.2.1. Can we delete this section.

Cullen (with my individual hat on)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 09 17:54:13 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMAhC-0000ND-1o; Sat, 09 Sep 2006 17:49:02 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMAhB-0000MU-7C
	for sip@ietf.org; Sat, 09 Sep 2006 17:49:01 -0400
Received: from hoemail2.lucent.com ([192.11.226.163])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMAh8-0005sB-V6
	for sip@ietf.org; Sat, 09 Sep 2006 17:49:01 -0400
Received: from ihemail2.lucent.com (h192-11-222-163.lucent.com
	[192.11.222.163])
	by hoemail2.lucent.com (8.13.6/IER-i) with ESMTP id k89LmeBD001101;
	Sat, 9 Sep 2006 16:48:46 -0500 (CDT)
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail2.lucent.com (8.13.6/IER-o-r) with ESMTP id k89LmYMR009697;
	Sat, 9 Sep 2006 16:48:34 -0500 (CDT)
Received: from [135.244.1.93] (vkg.lra2.lucent.com [135.244.1.93]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k89LmTK27832; Sat, 9 Sep 2006 16:48:34 -0500 (CDT)
Message-ID: <450336AC.7010903@lucent.com>
Date: Sat, 09 Sep 2006 16:48:28 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] loop fix
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>	<001001c6d38d$7ff54df0$5000a8c0@RW>	<20060909070513.7DBBFF0AE6@rautu>	<000d01c6d3ed$99fc3370$5000a8c0@RW>	<17666.35113.677231.741500@rautu.tutpro.com>	<4502FDDB.10202@lucent.com>
	<17667.915.327050.203690@rautu.tutpro.com>
In-Reply-To: <17667.915.327050.203690@rautu.tutpro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 4adaf050708fb13be3316a9eee889caa
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Juha Heinanen wrote:
> that is all fine, but i'm still waiting an rfc3261 based example where
> simply comparing call-id/r-uri/from tag to pending initial request
> transactions doesn't solve the problem.  loop-fix draft has Alternative
> solutions section that doesn't even mention this simple solution even
> when it fixes the loop in the example.  instead the draft proposes a
> much heavier solution.

At least in my reading of loop-fix, I don't think it is precluding
you from hashing Call-ID/R-URI/From tag for the second part of the
branch parameter value.  All it is saying is that also include
the Route header field values, and any other values that are
used by the location service logic.

I re-read loop-fix again, and I think it will probably be much
clearer if included a bit more instructions on the headers
to include.  RFC3261 says:

       A common way to create this value is to compute a
       cryptographic hash of the To tag, From tag, Call-ID header
       field, the Request-URI of the request received (before
       translation), the topmost Via header, and the sequence number
       from the CSeq header field, in addition to any Proxy-Require
       and Proxy-Authorization header fields that may be present.

loop-fix could conceivably state that:

       A common way to create this value is to compute a
       cryptographic hash of the To tag (if present), From tag,
       Call-ID header field, the Request-URI of the request received
       (before translation), the sequence number from the CSeq
       header field, any Route header field values used during
       processing the request and any other values used by the
       location service logic while processing this request.

If because of simplicity your implementation disregards the last
two (Route headers and location service logic), chances are still
good that it will catch most of the loops.

Thanks.

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sun Sep 10 02:34:07 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMIny-0000PZ-Ms; Sun, 10 Sep 2006 02:28:34 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMInw-0000PU-Vx
	for sip@ietf.org; Sun, 10 Sep 2006 02:28:33 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMInv-0001uw-Kd
	for sip@ietf.org; Sun, 10 Sep 2006 02:28:32 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 391F313F635; Sun, 10 Sep 2006 09:28:06 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (nuclease35.gprs.dnafinland.fi [62.78.108.35])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id E2B7013F633;
	Sun, 10 Sep 2006 09:27:55 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 7E150F0AE6; Sun, 10 Sep 2006 09:28:10 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17667.45178.465618.431448@rautu.tutpro.com>
Date: Sun, 10 Sep 2006 09:28:10 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Vijay K. Gurbani" <vkg@lucent.com>
Subject: Re: [Sip] loop fix
In-Reply-To: <450336AC.7010903@lucent.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<001001c6d38d$7ff54df0$5000a8c0@RW>
	<20060909070513.7DBBFF0AE6@rautu>
	<000d01c6d3ed$99fc3370$5000a8c0@RW>
	<17666.35113.677231.741500@rautu.tutpro.com>
	<4502FDDB.10202@lucent.com>
	<17667.915.327050.203690@rautu.tutpro.com>
	<450336AC.7010903@lucent.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 08170828343bcf1325e4a0fb4584481c
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Vijay K. Gurbani writes:

 > At least in my reading of loop-fix, I don't think it is precluding
 > you from hashing Call-ID/R-URI/From tag for the second part of the
 > branch parameter value.  All it is saying is that also include
 > the Route header field values, and any other values that are
 > used by the location service logic.

yes, but my point is why to calculate the hash at all and include it in
via header.  why not just compare those fields, say, one at a time
starting, for example, from call-id to currently pending initial
transactions?  if call-id is not found, there is no loop and nothing
else needs to be compared.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sun Sep 10 04:46:31 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMKta-0005ID-Dr; Sun, 10 Sep 2006 04:42:30 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMKtY-0005I8-Fx
	for sip@ietf.org; Sun, 10 Sep 2006 04:42:28 -0400
Received: from xeo.two-pebbles.com ([80.249.110.211])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMKtX-0003ey-6a
	for sip@ietf.org; Sun, 10 Sep 2006 04:42:28 -0400
From: Theo Zourzouvillys <theo@crazygreek.co.uk>
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] loop fix
Date: Sun, 10 Sep 2006 09:43:41 +0100
User-Agent: KMail/1.9.4
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<450336AC.7010903@lucent.com>
	<17667.45178.465618.431448@rautu.tutpro.com>
In-Reply-To: <17667.45178.465618.431448@rautu.tutpro.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200609100943.41939.theo@crazygreek.co.uk>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0ddefe323dd869ab027dbfff7eff0465
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

On Sunday 10 September 2006 07:28, Juha Heinanen wrote:

> yes, but my point is why to calculate the hash at all and include it in
> via header. =A0why not just compare those fields, say, one at a time
> starting, for example, from call-id to currently pending initial
> transactions? =A0if call-id is not found, there is no loop and nothing
> else needs to be compared.

i can think of 3 common reasons you might want to place a hash in the Via a=
s=20
opposed to searching local transactions, which may or may not apply dependi=
ng=20
on the implementation:

(1) speed - if you have a large number of active transactions, then it's=20
almost certainly a lot faster to construct and compare a hash in X number o=
f=20
via headers than search all the transactions received on that particular=20
transport.  any multi threaded design would require at minimum a read lock =
on=20
a list of transactions - doesn't sound to efficient to me!

(2) resilience - a crashed proxy would still be able to perform loop=20
detection, even after loosing all of it's state - assuming it keeps=20
transactions in memory and not committed elsewhere before forwarding; imagi=
ne=20
some evil person managed to find some way to crash your proxy just after=20
sending the requests out and it immediately restarted.  your loop detection=
=20
would be pointless unless kept outside of the processes memory [1] if you=20
didn't keep it in the Via header, although you obviously have other problem=
s=20
too :)

(3) scalability - loop may go through different proxies when load balancing=
=2E =20
KEeping the hash in the via header allows peer proxies to detect and stop=20
looped requests quicker than it would otherwise.


Kind Regards,

 ~ Theo

1 - assuming you're using a "normal" architecture :)

=2D-=20
Theo P. Zourzouvillys
http://www.crazygreek.co.uk
theo@crazygreek.co.uk

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sun Sep 10 11:20:50 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMR0a-00034u-0m; Sun, 10 Sep 2006 11:14:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMR0Y-00034m-3U
	for sip@ietf.org; Sun, 10 Sep 2006 11:14:06 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMR0V-0002nI-L4
	for sip@ietf.org; Sun, 10 Sep 2006 11:14:06 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 8E94D13F8A6; Sun, 10 Sep 2006 18:13:40 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (nuclease35.gprs.dnafinland.fi [62.78.108.35])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 2563313F89D;
	Sun, 10 Sep 2006 18:13:21 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 2188EF0AE6; Sun, 10 Sep 2006 18:13:33 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17668.11164.638763.876307@rautu.tutpro.com>
Date: Sun, 10 Sep 2006 18:13:32 +0300
From: Juha Heinanen <jh@tutpro.com>
To: Theo Zourzouvillys <theo@crazygreek.co.uk>
Subject: Re: [Sip] loop fix
In-Reply-To: <200609100943.41939.theo@crazygreek.co.uk>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<450336AC.7010903@lucent.com>
	<17667.45178.465618.431448@rautu.tutpro.com>
	<200609100943.41939.theo@crazygreek.co.uk>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b19722fc8d3865b147c75ae2495625f2
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

theo,

thanks for your reply.  it is the first that gives some real insight to
the issue.  these kind of comments should appear in the i-d, but they
don't.

 > (1) speed - if you have a large number of active transactions, then it's 
 > almost certainly a lot faster to construct and compare a hash in X
 > number of via headers than search all the transactions received on
 > that particular transport.  

in some implementations this is true.  if it is not true in all
implementations, then the i-d should not give one SHOULD implementation
solution.

 > (2) resilience - a crashed proxy would still be able to perform loop 
 > detection, even after loosing all of it's state - assuming it keeps 
 > transactions in memory and not committed elsewhere before forwarding; 

this i don't quite understand.  even if proxy looses all state, doesn't
it rebuild that state next time it receives the looped request again and
will detect the loop during the following round?

 > (3) scalability - loop may go through different proxies when load
 > balancing. KEeping the hash in the via header allows peer proxies to
 > detect and stop looped requests quicker than it would otherwise.

this is not a valid reason, since if there are multiple proxies, they
may be from different vendors and since there is no standardized way to
calculate and add the hash into via header, one proxy cannot interpret
the via header added by another proxy.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sun Sep 10 11:23:05 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMR7O-0005qu-DK; Sun, 10 Sep 2006 11:21:10 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMR7M-0005qm-9Q
	for sip@ietf.org; Sun, 10 Sep 2006 11:21:08 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMR7K-0004qk-Sb
	for sip@ietf.org; Sun, 10 Sep 2006 11:21:08 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 1511713F8A8; Sun, 10 Sep 2006 18:21:03 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (nuclease35.gprs.dnafinland.fi [62.78.108.35])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id BACD913F8A3;
	Sun, 10 Sep 2006 18:20:51 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 36673F0AE6; Sun, 10 Sep 2006 18:21:10 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17668.11622.163152.644342@rautu.tutpro.com>
Date: Sun, 10 Sep 2006 18:21:10 +0300
From: Juha Heinanen <jh@tutpro.com>
To: Theo Zourzouvillys <theo@crazygreek.co.uk>
Subject: Re: [Sip] loop fix
In-Reply-To: <200609100943.41939.theo@crazygreek.co.uk>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<450336AC.7010903@lucent.com>
	<17667.45178.465618.431448@rautu.tutpro.com>
	<200609100943.41939.theo@crazygreek.co.uk>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 856eb5f76e7a34990d1d457d8e8e5b7f
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Theo Zourzouvillys writes:

 > (1) speed - if you have a large number of active transactions, then
 > it's almost certainly a lot faster to construct and compare a hash in
 > X number of via headers than search all the transactions received on
 > that particular transport.

theo,

i'm coming back to this one.  in the proposed hash-to-via solution,
proxy has to calculate that hash for every initial request, which is not
free.  in the the call-id/r-uri comparison implementation nothing is
inserted into via header and thus nothing needs to be calculated.

what comes to call-id loookup speed, it depends how the proxy hashes its
transactions.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sun Sep 10 15:54:11 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMVKa-0005eF-Ex; Sun, 10 Sep 2006 15:51:04 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMVKB-0004dO-SP; Sun, 10 Sep 2006 15:50:39 -0400
Received: from stsc1260-eth-s1-s1p1-vip.va.neustar.com ([156.154.16.129]
	helo=chiedprmail1.ietf.org)
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GMVKB-0000jH-Q8; Sun, 10 Sep 2006 15:50:39 -0400
Received: from ns4.neustar.com ([156.154.24.139])
	by chiedprmail1.ietf.org with esmtp (Exim 4.43)
	id 1GMVK4-0007ZD-EI; Sun, 10 Sep 2006 15:50:39 -0400
Received: from stiedprstage1.ietf.org (stiedprstage1.va.neustar.com
	[10.31.47.10]) by ns4.neustar.com (Postfix) with ESMTP id 2DB7C2ACC0;
	Sun, 10 Sep 2006 19:50:02 +0000 (GMT)
Received: from ietf by stiedprstage1.ietf.org with local (Exim 4.43)
	id 1GMVJZ-00062Z-Tn; Sun, 10 Sep 2006 15:50:01 -0400
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
To: i-d-announce@ietf.org
From: Internet-Drafts@ietf.org
Message-Id: <E1GMVJZ-00062Z-Tn@stiedprstage1.ietf.org>
Date: Sun, 10 Sep 2006 15:50:01 -0400
X-Spam-Score: -5.9 (-----)
X-Scan-Signature: b5d20af10c334b36874c0264b10f59f1
Cc: sip@ietf.org
Subject: [Sip] I-D ACTION:draft-ietf-sip-e2m-sec-03.txt 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts 
directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.

	Title		: End-to-middle Security in the Session Initiation Protocol (SIP)
	Author(s)	: K. Ono, S. Tachimoto
	Filename	: draft-ietf-sip-e2m-sec-03.txt
	Pages		: 27
	Date		: 2006-9-10
	
Some services provided by intermediaries depend on their ability to
inspect a message body in the Session Initiation Protocol (SIP).
When sensitive information is included in the message body, a SIP
User Agent (UA) needs to protect it from other intermediaries than
those that the UA agreed to disclose it to.  This document proposes a
mechanism for securing information passed between an end user and
intermediaries using S/MIME.  It also proposes mechanisms for a UA to
discover intermediaries which need to inspect an S/MIME-secured
message body, or to receive the message body with data integrity.
This specification is approved at the proposed standards level due to
the IANA registration requirements.  Is is of sufficient quality for
that level, however, the use of this mechanism in this specification
are considered experimental.

A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-e2m-sec-03.txt

To remove yourself from the I-D Announcement list, send a message to 
i-d-announce-request@ietf.org with the word unsubscribe in the body of 
the message. 
You can also visit https://www1.ietf.org/mailman/listinfo/I-D-announce 
to change your subscription settings.

Internet-Drafts are also available by anonymous FTP. Login with the 
username "anonymous" and a password of your e-mail address. After 
logging in, type "cd internet-drafts" and then 
"get draft-ietf-sip-e2m-sec-03.txt".

A list of Internet-Drafts directories can be found in
http://www.ietf.org/shadow.html 
or ftp://ftp.ietf.org/ietf/1shadow-sites.txt

Internet-Drafts can also be obtained by e-mail.

Send a message to:
	mailserv@ietf.org.
In the body type:
	"FILE /internet-drafts/draft-ietf-sip-e2m-sec-03.txt".
	
NOTE:	The mail server at ietf.org can return the document in
	MIME-encoded form by using the "mpack" utility.  To use this
	feature, insert the command "ENCODING mime" before the "FILE"
	command.  To decode the response(s), you will need "munpack" or
	a MIME-compliant mail reader.  Different MIME-compliant mail readers
	exhibit different behavior, especially when dealing with
	"multipart" MIME messages (i.e. documents which have been split
	up into multiple messages), so check your local documentation on
	how to manipulate these messages.

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Multipart/Alternative; Boundary="OtherAccess"

--OtherAccess
Content-Type: Message/External-body; access-type="mail-server";
	server="mailserv@ietf.org"

Content-Type: text/plain
Content-ID: <2006-9-10104654.I-D@ietf.org>

ENCODING mime
FILE /internet-drafts/draft-ietf-sip-e2m-sec-03.txt

--OtherAccess
Content-Type: Message/External-body; name="draft-ietf-sip-e2m-sec-03.txt";
	site="ftp.ietf.org"; access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2006-9-10104654.I-D@ietf.org>


--OtherAccess--

--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--





From sip-bounces@ietf.org Sun Sep 10 23:58:25 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMcpW-000753-IL; Sun, 10 Sep 2006 23:51:30 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMcpU-00074x-P9
	for sip@ietf.org; Sun, 10 Sep 2006 23:51:28 -0400
Received: from sccrmhc11.comcast.net ([204.127.200.81])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMcpT-0000sA-Io
	for sip@ietf.org; Sun, 10 Sep 2006 23:51:28 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (sccrmhc11) with ESMTP
	id <2006091103512701100cast9e>; Mon, 11 Sep 2006 03:51:27 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8B3pQ1f032625
	for <sip@ietf.org>; Sun, 10 Sep 2006 23:51:26 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8B3pQ3p032621;
	Sun, 10 Sep 2006 23:51:26 -0400
Date: Sun, 10 Sep 2006 23:51:26 -0400
Message-Id: <200609110351.k8B3pQ3p032621@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <17668.11164.638763.876307@rautu.tutpro.com> (jh@tutpro.com)
Subject: Re: [Sip] loop fix
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<450336AC.7010903@lucent.com>
	<17667.45178.465618.431448@rautu.tutpro.com>
	<200609100943.41939.theo@crazygreek.co.uk>
	<17668.11164.638763.876307@rautu.tutpro.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 8abaac9e10c826e8252866cbe6766464
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Juha Heinanen <jh@tutpro.com>

   in some implementations this is true.  if it is not true in all
   implementations, then the i-d should not give one SHOULD implementation
   solution.

What you asked originally is:

    why can't proxy check when it receives an initial request that it
    doesn't already have a pending transaction with the same call id/request
    uri/from tag?

The reason is that there's nothing preventing a proxy from using
various other headers for making routing decisions, and it's rather
easy to construct situations where the "obvious" solution to a routing
problem can lead to multiple transactions with the same
Call-ID/request-URI at one proxy.  Consider routing based on language
and media preferences.  Perhaps none of these are implemented right
now in situations you'd call "normal", but people are worried about
adopting a solution that would be a straitjacket.

In regard to the solution in the I-D, I did not participate in the
discussions that led up to it, but perhaps you could ask for a fuller
motivation in the I-D of the chosen solution.

But since this solution is a SHOULD, if you find it to be burdensome
to implement, you have the leeway to alter it.  But you should be
careful -- your proxy might be participating in a legitimate spiral
that is broken by some other proxy in the loop acting on some header
your proxy ignores.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 00:38:18 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMdW7-0001Xz-4A; Mon, 11 Sep 2006 00:35:31 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMdW6-0001Xu-3x
	for sip@ietf.org; Mon, 11 Sep 2006 00:35:30 -0400
Received: from xeo.two-pebbles.com ([80.249.110.211])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMdW4-0002E2-NY
	for sip@ietf.org; Mon, 11 Sep 2006 00:35:30 -0400
From: Theo Zourzouvillys <theo@crazygreek.co.uk>
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] loop fix
Date: Mon, 11 Sep 2006 05:36:44 +0100
User-Agent: KMail/1.9.4
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<200609100943.41939.theo@crazygreek.co.uk>
	<17668.11164.638763.876307@rautu.tutpro.com>
In-Reply-To: <17668.11164.638763.876307@rautu.tutpro.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200609110536.44472.theo@crazygreek.co.uk>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: f60d0f7806b0c40781eee6b9cd0b2135
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:

> =A0> (1) speed - if you have a large number of active transactions, then =
it's
> =A0> almost certainly a lot faster to construct and compare a hash in X
> =A0> number of via headers than search all the transactions received on
> =A0> that particular transport. =A0
>
> in some implementations this is true. =A0if it is not true in all
> implementations, then the i-d should not give one SHOULD implementation
> solution.

As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing it i=
n=20
other ways if your particular situation requires it - but as most 'common'=
=20
implementations will worry about the things listed here, then SHOULD is the=
=20
right force for it in my opinion, as there are (as per rfc2119) "valid=20
reasons in particular circumstances to ignore a particular item, but the fu=
ll=20
implications must be understood and carefully weighed before choosing a=20
different course."

> =A0> (2) resilience - a crashed proxy would still be able to perform loop
> =A0> detection, even after loosing all of it's state - assuming it keeps
> =A0> transactions in memory and not committed elsewhere before forwarding;
>
> this i don't quite understand. =A0even if proxy looses all state, doesn't
> it rebuild that state next time it receives the looped request again and
> will detect the loop during the following round?

Only after it looped again after crashing, and that assumes it's not alread=
y=20
crashed again since.  Given that the attack vector that the I-D is trying t=
o=20
fix, i think it is sensible for it to catch a loop between crashes of an=20
element, too.

fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a Network:

   [...]
   It is interesting to note that a few proxies rebooted during
   the scenario, and rejoined in the attack when they restarted (as long
   as they maintained registration state across reboots).  This points
   out that if this attack were launched on the Internet at large, it
   might require coordination among all the affected elements to stop
   it.

> =A0> (3) scalability - loop may go through different proxies when load
> =A0> balancing. KEeping the hash in the via header allows peer proxies to
> =A0> detect and stop looped requests quicker than it would otherwise.
>
> this is not a valid reason, since if there are multiple proxies, they
> may be from different vendors and since there is no standardized way to
> calculate and add the hash into via header, one proxy cannot interpret
> the via header added by another proxy.

indeed, with multiple vendors.  but none the less, it's a reason a proxy ma=
y=20
want to use Via hashes rather than internally (which is what you asked).

 ~ Theo

=2D-=20
Theo P. Zourzouvillys
http://www.crazygreek.co.uk
theo@crazygreek.co.uk

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 02:55:54 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMfdQ-0005gd-Ci; Mon, 11 Sep 2006 02:51:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMfdO-0005gY-By
	for sip@ietf.org; Mon, 11 Sep 2006 02:51:10 -0400
Received: from mgw-ext14.nokia.com ([131.228.20.173])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMfdM-0001mQ-T7
	for sip@ietf.org; Mon, 11 Sep 2006 02:51:10 -0400
Received: from esebh106.NOE.Nokia.com (esebh106.ntc.nokia.com [172.21.138.213])
	by mgw-ext14.nokia.com (Switch-3.1.10/Switch-3.1.7) with ESMTP id
	k8B6p6KA015934; Mon, 11 Sep 2006 09:51:06 +0300
Received: from esebh101.NOE.Nokia.com ([172.21.138.177]) by
	esebh106.NOE.Nokia.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 09:51:06 +0300
Received: from esebe103.NOE.Nokia.com ([172.21.138.219]) by
	esebh101.NOE.Nokia.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 09:51:05 +0300
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] draft-ietf-sip-gruu-10 comments
Date: Mon, 11 Sep 2006 09:51:06 +0300
Message-ID: <8B1D53AEF7B03449A6D3771B3B7F850F02B585D6@esebe103.NOE.Nokia.com>
In-Reply-To: <285E7350-8C4F-4A92-8E1E-3BFAC67CC8EC@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] draft-ietf-sip-gruu-10 comments
Thread-Index: AcbUT9FecTy9bAjsSkig88hGr0UArgBHQcPw
From: <Erkki.Koivusalo@nokia.com>
To: <sip@ietf.org>, <jdrosen@cisco.com>
X-OriginalArrivalTime: 11 Sep 2006 06:51:05.0706 (UTC)
	FILETIME=[A7540CA0:01C6D56E]
X-Spam-Score: 0.2 (/)
X-Scan-Signature: b4a0a5f5992e2a4954405484e7717d8c
Cc: fluffy@cisco.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi,

While reading through gruu-10, I had quite much the same trouble
as Cullen expressed in his email:

>Section 8.1.1. para 4. I really can't figure out what this says - I =20
>suspect that I know what is trying to say but when I try to parse the =20
>paragraph, my stack overflows. Sorry for such a useless comment - I'm =20
>not exactly sure how to improve it.

I think Cullen is right here. The paragraph is difficult to understand
as a whole, it is missing the rationale and has some quite obscure
statements like:

   Barring dynamic mechanisms to discover an outbound proxy, such a
   relationship needs to be configured into the UA.

What is that supposed to mean ?

>Section 8.2.2
>
>I think I am likely confused here. I basically don't see why a simple =20
>classic sip trapezoid deployment would ever need to Record Route. The =20
>fact that the GRUU refereed to the "home" domain would cause it work =20
>get back here. As a side note, I find the terms "home", "edge" etc =20
>very undefined outside the IMS context. Anyways, I believe this =20
>section might be all right but I am failing to understand what needs =20
>to be done and why. If I was a non IMS proxy implementer, I suspect I =20
>would just ignore this whole section.

All this was added to gruu-10, but I was unable to find the rationale
from the draft or the mailing list. I assumed that the GRUU itself would
contain a hostname referring to the domain which has created the
GRUU. Thus all the requests targetted to the GRUU would after all=20
be routed to that domain, whether or not that domain is otherwise
included to the Route (via Record-Route). But is this a false assumption
?

So what is the rationale behind the processing described in Section
8.1.1 paragraph 4 and Section 8.2.2 ?

- Would routing towards such a GRUU for some reason fail if the request
  did not visit the domain from which the GRUU was obtained ? If yes,
  why ?=20

- Or is it just an optimization to avoid the dialog to be routed at
  first to the outbound proxy which finally resolves the GRUU, just
  to find out that the request must for its final delivery be forwarded=20
  to the domain from which the GRUU was obtained ?=20

- Or something else ?

If this processing is needed, the draft has at least to provide
a rationale for it, so that the story becomes understandable.

Regards,

Erkki
____________________________________

  Erkki Koivusalo
  Nokia Mobile Software
  tel:+358 40 7571197
  mailto:erkki.koivusalo@nokia.com
____________________________________=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 02:58:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMfiP-0007hX-6L; Mon, 11 Sep 2006 02:56:21 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMfiN-0007hS-7X
	for sip@ietf.org; Mon, 11 Sep 2006 02:56:19 -0400
Received: from agnada.com ([69.36.182.244])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMfiL-0002Vg-Sb
	for sip@ietf.org; Mon, 11 Sep 2006 02:56:19 -0400
Received: from [192.168.0.101] (S010600095b9792b5.vc.shawcable.net
	[24.85.243.115]) (authenticated)
	by agnada.com (8.11.6/8.11.6) with ESMTP id k8B6u5m30833;
	Mon, 11 Sep 2006 00:56:06 -0600
Message-ID: <45050885.3080800@ntt-at.com>
Date: Sun, 10 Sep 2006 23:56:05 -0700
From: Shida Schubert <shida@ntt-at.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: "sip@ietf.org List" <sip@ietf.org>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Spam-Score: 1.1 (+)
X-Scan-Signature: 36c793b20164cfe75332aa66ddb21196
Cc: "Elwell, John" <john.elwell@siemens.com>
Subject: [Sip] Review of draft-ietf-sip-connected-identity-01
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
Reply-To: shida@ntt-at.com
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Draft:  draft-ietf-sip-connected-identity-01
Reviewer: Shida Schubert
Review Date: 10 Sep 06
Review Deadline: 18 Sep 06
Status: Initial review 

Summary: This draft is almost ready for publication, 
 but needs some clarifications and has nits that should 
 be fixed before publication.

The requested clarifications are listed:

 - Overall
   As the draft puts so much emphasis on authenticated 
  identity that can be verified, I think it would be useful  
  to clarify the need of authentication service to provide 
  connected identity that's authenticated. 

   I would go further and possibly describe the implication 
  of what it means to receive a conneceted-identity without 
  the signature(Although security consideration explains this 
  to some detail) and  have some text illustrating how even 
  when support for "id-change" is indicated, signed 
  connected-identity may not be provided due to absence of 
  authentication service in connected domain.  

   Draft should also clarify that support for "id-change" 
  indicated by UAS does not mean sip-identity will be provided 
  in reverse direction.
 
   There is a lot of text related to the discussions that 
  took place in the mailing list, I think the draft will be 
  a lot easier to read if you can move this out or delete them.

Editorial nits:
--------------------------
 > Section 3
  - 2nd paragraph, 4th sentence.
    [Remove "clearly"] & [Change "UAS" -> "callee"]
   =OLD=
    "However, this does not necessarily clearly indicate the
     Address of Record (AoR) of the UAS."
   =NEW= 
    "However, this does not necessarily indicate the
     Address of Record (AoR) of the callee."
 
  - 4th paragraph, 3rd sentence.
     [Put comma behind "B2BUA"]

  - 5th paragraph, 4th sentence.
    [Change "not even any" -> "no"]
   =OLD=
     "In this case there is probably not even any need to 
      re-negotiate the session"
   =NEW= 
     "In this case there is probably no need to re-negotiate 
      the session"

   - 6th paragraph.
    [Rearranging the text with list]
   =OLD=
     "This document defines a mechanism for conveying the callee identity
      to a caller when a call is answered.  The same mechanism can be used
      to convey the identity of a user that replaces the caller or callee
      following a call re-arrangement such as call transfer.  In general
      the mechanism delivers connected identity, or the identity of a
      connected user.  The same mechanism can also be used to convey the
      identity of a potential callee prior to answer. 
   =NEW=
     "This document defines a mechanism for conveying connected identity, 
      or the identity of a connected user and can be used in the following 
      scenarios.
        - To convey the callee identity to a caller when a call is 
          answered.
        - To convey the identity of a user that replacese the caller or 
          callee following a call re-arrangement such as call transfer.
        - To convey the identity of a potential callee prior to answer"

> Section 4
 - 2nd paragraph, 2nd sentence.
    [Change "request's source" -> "caller"]

 - 5th paragraph, 3rd sentence.
    [Change "forwarded request" -> "forwarding request"]

> Section 5
 - 1st paragraph, 2nd sentence.
    [Add "if the domain supports sip-identity" at the end]
  =OLD=
    "A mid-dialog request is used to provide connected identity.  The UAC
     for that request inserts its identity in the From header field of the
     request and the Identity header field can be used to provide
     authentication."
  =NEW=
    "A mid-dialog request is used to provide connected identity.  The UAC
     for that request inserts its identity in the From header field of the
     request and the Identity header field can be used to provide
     authentication if the domain supports sip-identity"
 
> Section 6.1 
  - 1st paragraph, 1st sentence.
   [Change "UA that supports changes of URI in the From and To header field during
    a dialog" -> "UAC compliant to this specification"]

> Section 6.2 
  - 1st paragraph, 1st sentence.
   [Change "UA that supports changes of URI in the From and To header field during
    a dialog" -> "UAS compliant to this specification"]

  - 2nd paragraph, 1st sentence.
   [Change "id-change" -> \"id-change\"]

 Regards
  Shida Schubert


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 03:03:31 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMfnE-00015N-Vf; Mon, 11 Sep 2006 03:01:20 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMfnD-00015D-Vj
	for sip@ietf.org; Mon, 11 Sep 2006 03:01:19 -0400
Received: from smtp3.versatel.nl ([62.58.50.90])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMfnC-0002yK-Bc
	for sip@ietf.org; Mon, 11 Sep 2006 03:01:19 -0400
Received: (qmail 23804 invoked by uid 0); 11 Sep 2006 07:01:15 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp3.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 11 Sep 2006 07:01:15 -0000
Message-ID: <003001c6d570$13b99260$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>,
	"Juha Heinanen" <jh@tutpro.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi><200609100943.41939.theo@crazygreek.co.uk><17668.11164.638763.876307@rautu.tutpro.com>
	<200609110536.44472.theo@crazygreek.co.uk>
Subject: Re: [Sip] loop fix
Date: Mon, 11 Sep 2006 09:01:16 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 287c806b254c6353fcb09ee0e53bbc5e
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Juha,

Loop detection currently works the way it does to accomodate stateless 
proxies. It is the least common denominator; it will also work for stateful 
proxies, so there is no need to define separate mechanisms to achieve the 
same goal. That is a benefit

It is true that you can also detect loops by searching through existing 
state, with the aforementioned drawbacks that it won't work as well across 
reboots (I consider the performance of the lookup an implementation issue, 
it can be made efficient).

For the forking scenario, the proxy must by definition be stateful. So one 
could use a lookup through existing state as a way to do loop detection. 
There is nothing in the draft that prevents this - hashing is RECOMMENDED, 
but nothing says you can't do it your way. In fact, loop detection is a 
completely local feature - a proxy only has to recognise its own detection 
mechanism. So as long as it keeps to standard RFC3261 syntax, there is not 
actually a need to standardize any particular mechanism - just stating that 
it MUST do loop detection is sufficient.

What I personally don't like about the recommended mechanism, is the 
overloading of Via branches for both transaction id and loop detection. IMHO 
a much better solution is to separate the two; I personally use

Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}

And it would be nice if there were some way to detect if some proxy is doing 
loop detection or not. A separate parameter achieves this

Regards,

Jeroen

----- Original Message ----- 
From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
To: "Juha Heinanen" <jh@tutpro.com>
Cc: <sip@ietf.org>
Sent: Monday, September 11, 2006 6:36 AM
Subject: Re: [Sip] loop fix


On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:

> > (1) speed - if you have a large number of active transactions, then it's
> > almost certainly a lot faster to construct and compare a hash in X
> > number of via headers than search all the transactions received on
> > that particular transport.
>
> in some implementations this is true. if it is not true in all
> implementations, then the i-d should not give one SHOULD implementation
> solution.

As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing it in
other ways if your particular situation requires it - but as most 'common'
implementations will worry about the things listed here, then SHOULD is the
right force for it in my opinion, as there are (as per rfc2119) "valid
reasons in particular circumstances to ignore a particular item, but the 
full
implications must be understood and carefully weighed before choosing a
different course."

> > (2) resilience - a crashed proxy would still be able to perform loop
> > detection, even after loosing all of it's state - assuming it keeps
> > transactions in memory and not committed elsewhere before forwarding;
>
> this i don't quite understand. even if proxy looses all state, doesn't
> it rebuild that state next time it receives the looped request again and
> will detect the loop during the following round?

Only after it looped again after crashing, and that assumes it's not already
crashed again since.  Given that the attack vector that the I-D is trying to
fix, i think it is sensible for it to catch a loop between crashes of an
element, too.

fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a Network:

   [...]
   It is interesting to note that a few proxies rebooted during
   the scenario, and rejoined in the attack when they restarted (as long
   as they maintained registration state across reboots).  This points
   out that if this attack were launched on the Internet at large, it
   might require coordination among all the affected elements to stop
   it.

> > (3) scalability - loop may go through different proxies when load
> > balancing. KEeping the hash in the via header allows peer proxies to
> > detect and stop looped requests quicker than it would otherwise.
>
> this is not a valid reason, since if there are multiple proxies, they
> may be from different vendors and since there is no standardized way to
> calculate and add the hash into via header, one proxy cannot interpret
> the via header added by another proxy.

indeed, with multiple vendors.  but none the less, it's a reason a proxy may
want to use Via hashes rather than internally (which is what you asked).

 ~ Theo

-- 
Theo P. Zourzouvillys
http://www.crazygreek.co.uk
theo@crazygreek.co.uk

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 03:21:34 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMg4Y-00082s-00; Mon, 11 Sep 2006 03:19:14 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMg4W-00082e-9m
	for sip@ietf.org; Mon, 11 Sep 2006 03:19:12 -0400
Received: from smail3.alcatel.fr ([64.208.49.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMg4U-0005bS-RY
	for sip@ietf.org; Mon, 11 Sep 2006 03:19:12 -0400
Received: from missrv1.nextenso.alcatel.fr (proxy.nextenso.alcatel.fr
	[139.54.130.250])
	by smail3.alcatel.fr (ALCANET/NETFR) with ESMTP id k8B7IrMa017775;
	Mon, 11 Sep 2006 09:18:53 +0200
Received: from [139.54.131.75] (nx1075.nextenso.alcatel.fr [139.54.131.75])
	by missrv1.nextenso.alcatel.fr (8.13.5/8.12.8) with ESMTP id
	k8B7IoUD022175; Mon, 11 Sep 2006 09:18:50 +0200
Message-ID: <45050DD8.30102@alcatel.fr>
Date: Mon, 11 Sep 2006 09:18:48 +0200
From: Thomas Froment <Thomas.Froment@alcatel.fr>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] loop fix
References: <17665.31581.722403.878890@rautu.tutpro.com>	<45017FF4.1080204@alcatel.fr>	<17665.33328.177804.94980@rautu.tutpro.com>	<4501844A.6000105@nexcom.fr>
	<17665.34269.828648.204415@rautu.tutpro.com>
In-Reply-To: <17665.34269.828648.204415@rautu.tutpro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-nextenso_alcatel_fr-MailScanner-Information: Please contact the ISP for more
	information
X-nextenso_alcatel_fr-MailScanner: Not scanned: please contact your Internet
	E-Mail Service Provider for details
X-nextenso_alcatel_fr-MailScanner-From: thomas.froment@alcatel.fr
X-Alcanet-MTA-scanned-and-authorized: yes
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b19722fc8d3865b147c75ae2495625f2
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Juha Heinanen wrote:
> Thomas Leseney writes:
>
>  > Not necessarily. An IMS S-CSCF may proxy a request to several AS.
>  > Call id, from tag and RURI do not change. Internal state of the S-CSCF
>  > ensures that the request spirals but does not loop.
>
> IMS example doesn't count to me. 
lol
>  give me an example in regular rfc3261 environment.
>   
this is in RFC 3261:

Spiral: A spiral is a SIP request that is routed to a proxy,
         forwarded onwards, and arrives once again at that proxy, but
         this time differs in a way that will result in a different
         processing decision than the original request.  Typically, this
         means that the request's Request-URI differs from its previous
         arrival.  A spiral is not an error condition, unlike a loop.  A
         typical cause for this is call forwarding.  A user calls
         joe@example.com.  The example.com proxy forwards it to Joe's
         PC, which in turn, forwards it to bob@example.com.  This
         request is proxied back to the example.com proxy.  However,
         this is not a loop.  Since the request is targeted at a
         different user, it is considered a spiral, and is a valid
         condition.

somebody already mentionned  this loop detection is optional in RFC 3261 but is going to become mandatory with  
http://www.ietf.org/internet-drafts/draft-ietf-sip-fork-loop-fix-03.txt, look at this, you have some examples...





_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 03:23:15 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMg6l-0000bc-IK; Mon, 11 Sep 2006 03:21:31 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMg6k-0000ak-Fb
	for sip@ietf.org; Mon, 11 Sep 2006 03:21:30 -0400
Received: from jes-fe1.zx.nl ([194.187.76.132])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMg6f-0005yX-5i
	for sip@ietf.org; Mon, 11 Sep 2006 03:21:30 -0400
Received: from Inbox ([84.241.195.198])
	by jes-fe1.zx.nl (Sun Java System Messaging Server 6.2-2.05 (built Apr
	28
	2005)) with ESMTP id <0J5F00MGY5MAEX00@jes-fe1.zx.nl> for sip@ietf.org;
	Mon, 11 Sep 2006 09:16:01 +0100 (WEST)
Date: Mon, 11 Sep 2006 09:21:23 +0200
From: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: RE: [Sip] loop fix
To: Juha Heinanen <jh@tutpro.com>, Thomas Leseney <thomas.leseney@nexcom.fr>
Message-id: <0J5F00MGZ5MBEX00@jes-fe1.zx.nl>
MIME-version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Importance: normal
X-Priority: 3
X-Spam-Score: 1.2 (+)
X-Scan-Signature: e5ba305d0e64821bf3d8bc5d3bb07228
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

RFC3261 proxies can also route by prepending a Route header, without rewrit=
ing the request URI. In fact, this is the only way when the proxy is not re=
sponsible for the domain

Regards,
Jeroen

-----Oorspronkelijk bericht -----
Van: "Juha Heinanen" <jh@tutpro.com>
Aan: "Thomas Leseney" <thomas.leseney@nexcom.fr>
CC: sip@ietf.org
Verzonden: 8-9-06 17:01
Onderwerp: Re: [Sip] loop fix

Thomas Leseney writes:

 > Not necessarily. An IMS S-CSCF may proxy a request to several AS.
 > Call id, from tag and RURI do not change. Internal state of the S-CSCF
 > ensures that the request spirals but does not loop.

IMS example doesn't count to me.  give me an example in regular rfc3261
environment.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 09:04:49 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMlOJ-0000Ed-21; Mon, 11 Sep 2006 08:59:59 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMlOG-0000EY-Ry
	for sip@ietf.org; Mon, 11 Sep 2006 08:59:56 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMlOA-0005q7-7j
	for sip@ietf.org; Mon, 11 Sep 2006 08:59:56 -0400
Received: from sj-dkim-5.cisco.com ([171.68.10.79])
	by sj-iport-5.cisco.com with ESMTP; 11 Sep 2006 05:59:50 -0700
X-IronPort-AV: i="4.09,144,1157353200"; 
	d="scan'208"; a="319830028:sNHT36426422"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-5.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BCxngM006087; Mon, 11 Sep 2006 05:59:49 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8BCxn6W026178;
	Mon, 11 Sep 2006 05:59:49 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 05:59:49 -0700
Received: from [10.32.241.146] ([10.32.241.146]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 05:59:48 -0700
Message-ID: <45055DC3.90707@cisco.com>
Date: Mon, 11 Sep 2006 08:59:47 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Xavier Marjou <xavier.marjou@orange-ft.com>
Subject: Re: [Sip] GRUU and Mid-Dialog Requests
References: <jbm.20060901093557.fcaf9715@L-AT7568>
In-Reply-To: <jbm.20060901093557.fcaf9715@L-AT7568>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 12:59:48.0983 (UTC)
	FILETIME=[29D43870:01C6D5A2]
DKIM-Signature: a=rsa-sha1; q=dns; l=4198; t=1157979589; x=1158843589;
	c=relaxed/simple; s=sjdkim5002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Mid-Dialog=20Requests;
	X=v=3Dcisco.com=3B=20h=3DOOz5OmbSTO7G99tt/Q40AgvMUvs=3D;
	b=tO+WIDzpD2+c3oTTv2ETpMTRIpVVySd+Y/Fze+fB/rKwD23+GJv1LfKCZIcx0U5jn5l2jJWK
	gXnR2YlK3LT6hBSQijyD8zwb4GFG4/XoXPyNB32Z1Vcn46CVmzW9p6Cg;
Authentication-Results: sj-dkim-5.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 2857c5c041d6c02d7181d602c22822c8
Cc: sip@ietf.org, pkyzivat@cisco.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Sorry for jumping in late here. IETF cycles have been dominated by ICE 
work for me.

Firstly, as a bit of history, the main reason we place the GRUU in the 
Contact was that it allowed for interoperability as long as only one 
side - the agent which obtained the GRUU - supported it. As Dale pointed 
out, many implementations today take the contact header field learned 
from a peer, and use it as a target for new requests for features such 
as transfer. This is because the Contact, as defined by RFC 3261, is 
supposed to point to a specific UA instance and indeed is supposed to be 
globally routable too.

The problem we're having is, in reality, it has proven very hard for a 
UA to populate the Contact header field with a URI that is globally 
routable and which points to that specific instance. So, the GRUU spec 
provides a way for a URI to get a URI which meets the properties that 
RFC 3261 requires.

I understand your proposal, Xavier, and its not unreasonable. However, 
the problem is that it will not work with the existing implementations 
which are already assuming the Contact header field as the place to go 
for new requests for features like transfer. Thus, putting the GRUU 
anywhere else, whether its an updated To header field or a new header 
field, won't work.

Indeed, the essence of your proposal is to redefine the To, From and 
Contact semantics such that:

* Contact is a non-global URI for reaching an instance for mid-dialog 
requests only
* To and From are AOR for the initial requests in a dialog, and for 
mid-dialog requests, are modified to have both the identity and GRUU 
properties

This is a not-unreasonable proposal, its just going to not interoperate 
with anything which has assumed these header fields have the properties 
defined in 3261.

Thanks,
Jonathan R.

Xavier Marjou wrote:
>>Well, that is a separate discussion. For the moment we can discuss 
>>what you are proposing with the understanding that it assumes the To 
>>URI can be changed in the response.
> 
> 
> I agree
> 
> 
> 
>>You don't show it, but I am assuming that (5) and (6) have
>>To: Callee <sip:callee@example.com
>>and that it is changed by the callee for message 7. Is that right?
> 
> 
> Yes
> 
> 
> 
>>And then Caller is expected to consider the To URI in the response to be
>>both the "connected party" and device-specific URI for future requests?
> 
> 
> Yes
> 
> 
> 
>>In that case, the caller will need some rules for how to use that To-URI.
>>What if it wants to present the identity to its user, or save it in a 
>>call log for future callback? Does it strip off the opaque parameter?
> 
> 
> Indeed, this behavior would need to be described. I don't see any issue to 
> save it in a call-log (same case as a URI with a ;user=phone parameter).
> I agree there would be an issue with the presentation of the identity if we 
> want to also display the instance of the called party to the caller (the 
> opaque parameter is, of course, not suited to be displayed in a GUI). 
> Nevertheless, this does not make part of the use-cases.
> 
> 
> 
>>Assuming that caller also has a gruu, wouldn't it then need to use that
>>as the From-URI in (5) and (7).
> 
> 
> Yes he probably could do so if he has also successfully registered its GRUU 
> AOR.
> 
> 
> 
>>I think this proposal mixes up a lot of different things.
> 
> 
> Yes: as soon as an important modification happens, different derived 
> problems can arise.
> 
> 
> 
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 09:11:31 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMlXY-0004lv-4L; Mon, 11 Sep 2006 09:09:32 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMlXW-0004lq-OP
	for sip@ietf.org; Mon, 11 Sep 2006 09:09:30 -0400
Received: from sj-iport-3-in.cisco.com ([171.71.176.72]
	helo=sj-iport-3.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GMlXU-0006bn-8d for sip@ietf.org; Mon, 11 Sep 2006 09:09:30 -0400
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-3.cisco.com with ESMTP; 11 Sep 2006 06:09:28 -0700
X-IronPort-AV: i="4.09,144,1157353200"; 
	d="scan'208"; a="442890623:sNHT34582700"
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-4.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BD9RdH032213; Mon, 11 Sep 2006 06:09:27 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8BD9RYp024363;
	Mon, 11 Sep 2006 06:09:27 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 06:09:26 -0700
Received: from [10.32.241.146] ([10.32.241.146]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 06:09:26 -0700
Message-ID: <45056005.5080005@cisco.com>
Date: Mon, 11 Sep 2006 09:09:25 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Robert Sparks <rjsparks@estacado.net>
References: <F55F3DE7-A69B-467A-BF0C-2B235B099F7C@estacado.net>
In-Reply-To: <F55F3DE7-A69B-467A-BF0C-2B235B099F7C@estacado.net>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 13:09:26.0524 (UTC)
	FILETIME=[8211FBC0:01C6D5A3]
DKIM-Signature: a=rsa-sha1; q=dns; l=3757; t=1157980167; x=1158844167;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20GRUU-10=3A=20Storing=20state=20at=20the=20binding-agent=20(GRUU-
	factory?);
	X=v=3Dcisco.com=3B=20h=3DxJ1/SnquOU3nUt5WRHhmUIV0tZg=3D;
	b=KorkdMtMxYXZPnR7gF3DrqPGKAKws/WOd1Eurd+UN8qmai2SZXixOuWsmqk15cyrPKPCKjFs
	6NtvSB3HY9HhnffPoUNOg8zCMUC4k+SY1c4hjCUZJD3nZVEtThQC6x9k;
Authentication-Results: sj-dkim-4.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b5d20af10c334b36874c0264b10f59f1
Cc: IETF SIP List <sip@ietf.org>, sip-chairs@tools.ietf.org
Subject: [Sip] Re: GRUU-10: Storing state at the binding-agent
	(GRUU-factory?)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Thanks for the comments Robert. Replies inline.

Robert Sparks wrote:

> gruu-10 has a mixed message about the requirements on the overall  
> system for saving information about the existence of GRUUs.
> 
> It notes on page 13 that
> * "for any particular AOR, there can be a potentially infinite number  
> of GRUUs"
> and goes on to say
> *"it is RECOMMENDED that a GRUU be created at the time a contact with  
> an instance ID is first registered to an AOR (even if that  registration 
> indicates that the registering UA doesn't even support  GRUUs)
> 
> This section implies that new state is created at the thing that  "owns" 
> GRUUs for each new GRUU that gets created, and recognizes that  
> _clients_ can ask that thing to create an infinite number of them.  
> Later in that section it talks about the difficulty of maintaining  this 
> state across reboots and power-failures.
> 
> A little later (page 15) it notes again that a UA MUST be prepared to  
> receive a different GRUU for the same instance-id/AoR pair in  
> subsequent registrations because this owning-thing might lose state.
> 
> But, off in the appendix, in sections describing the creation of  GRUUs 
> it talks about building them such that this owning-thing  doesn't have 
> to create new state.
> 
> Is there a real requirement to keep state here or not?

As others have commented, the spec purposefully allows an implementation 
to go either way and be compliant. Thus there is no requirement for 
statefulness.


> 
> I don't think we meant there to be in the end, and that some of the  
> text is legacy and just needs to be elided or adjusted, but I can't  
> tell for sure, so let me ask the question another way:
> 
> Is it OK for me as a proxy that has the responsibility for  retargeting 
> GRUUs to _always_ return a 480 to a GRUU that I recognize  as feasibly 
> mine (cryptographically perhaps), maps correctly  (whatever that means) 
> to an AoR in good standing, but has no current  registered contact 
> associated with it EVEN IF I have no record of  dealing with that 
> particular instance-id ever before?
> 
> I think it is.

Yes, it is.

Indeed, I think 8.2.1 is quite explicit on this point:

If the Request-URI is within the domain of the proxy,
    contains a "gruu" URI parameter, and the GRUU is known within the
    domain and refers to a valid AOR within the domain, but the instance
    ID is unknown, the proxy SHOULD generate a 480 (Temporarily
    Unavailable).


Perhaps the confusion is around what it means to be 'known'. What I 
meant here, is for stateless registrars, it would mean that the AOR is 
something you recognize and the opaque param is formatted appropriately 
and could belong to your domain. For stateful, it would mean that the 
GRUU is in the database itself.


> 
> Furthermore, I suspect would be an error to return, say, a 404 in the  
> circumstance above - if I'm wrong, then we need text that reinforces  
> that a 404 to a GRUU doesn't say a thing about the existence or  
> viability of an AoR that might be derivable from that GRUU. Same with  410.

You are correct.

> 
> So if the intent is not to require infinite state storage, can we  tune 
> that language out?
> (If it was the intent, then we've got other text discussing those  
> ramifications that needs to go in).

Suggestions?

-Jonathan R.

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 09:13:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMlZn-0005b5-Ik; Mon, 11 Sep 2006 09:11:51 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMlZl-0005az-QL
	for sip@ietf.org; Mon, 11 Sep 2006 09:11:49 -0400
Received: from lhrga01-in.huawei.com ([195.33.106.110])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMlZk-0006yD-83
	for sip@ietf.org; Mon, 11 Sep 2006 09:11:49 -0400
Received: from huawei.com (lhrml01-in [172.18.7.5])
	by lhrga01-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J5F00CNMIPRFR@lhrga01-in.huawei.com> for
	sip@ietf.org; Mon, 11 Sep 2006 13:58:39 +0100 (BST)
Received: from IBM4307EA0CEF3 ([217.167.116.128])
	by lhrga01-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J5F003YCIPQ9T@lhrga01-in.huawei.com> for
	sip@ietf.org; Mon, 11 Sep 2006 13:58:39 +0100 (BST)
Date: Mon, 11 Sep 2006 15:11:36 +0800
From: Tina TSOU <tena@huawei.com>
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs
To: "Vijay K. Gurbani" <vkg@lucent.com>, sip@ietf.org
Message-id: <003801c6d571$869d6300$8074a7d9@IBM4307EA0CEF3>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=ISO-8859-1;
	reply-type=original
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <0J5F00MGZ5MBEX00@jes-fe1.zx.nl>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 093efd19b5f651b2707595638f6c4003
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

See in line with [Tina1: ...].

B. R.
Tina

Tina TSOU wrote:
> Hi All,
>
> I had some doubts about draft-gurbani-sip-domain-certs as following.
>  It will be appreciated if someone would like to reply it.

Tina: Thanks for a reading of the draft.  More inline.

> 1. In section 3
>
> <Quote> One way to combat this is to arrange for the proxy to possess
> two certificates -- one corresponding to "sips:example.com" and the
> other corresponding to "sips:downtown.example.com" -- and have it
> present the right one when contacted. </Quote>
>
> But as per my understanding, the proposal in this draft doesn't
> resolve this problem thereinbefore. As there is only one SIPURI
> identity in certificate, it cannot handle the proxy which had a domain
> name and a site name. Do I miss something?

Ummm...I am not sure I follow your question.  The text you quote further 
explains why having two certificates is not desirable...

[Tina1: Let me re-phrase the question: In the proposed solution in this 
draft, there is only one
URI label in the extension, but in the text quoted, there are 2 sips URI. 
How to map 2 sips URI into only one URI label?
I am not sure if one sips URI will be matched by URI label, the other URI 
will be matched by DNS label. But this is not a consistent behavior.]

> 2. As my understanding of section 4, Does it mean that certificate
> will contain two identities, one identity for transport layer, one for
> application protocol layer?

Yes.

> Is it possible to have multiple application protocol identity? e.g,
> one is sips:example.com, another is sips:donwtown.example.com.

You could conceivably have multiple application level identities bound to 
the certificate, e.g., mailto:user@example.com, sips:user@example.com, 
pres:user@example.com and so on.  These will be present in the certificate 
as a set of URIs.

However, if you note the draft has different labels on 
"downtown.example.com" and "example.com"; the former is preceeded by a "DNS" 
label, and the latter by a "URI" label.  So they are two different 
identities.

> How about multiple kind of application layer protocols implemented by
> one site? it will have each identity for every protocols?

Example ... I think I know what you mean, but in case my understanding is 
flawed, I do not want to go off on a tangent...

[Tina1: as in your example, one domain can have multiple applications such 
as mail, pres, sips, is it mandatory to have multiple URI labels (one for 
each application)?]

> 3. In Section 5,
>
> <Quote> If the UAC performed RFC3263 resolution on the URI to reach
> the server, the SIPS identity stored in the certificate MUST be
> matched.  Otherwise, if RFC3263 resolution on the URI failed, the UAC
> MUST match the DNS label in the certificate with the name of the
> server that it opened a TLS connection to. </Quote>

> "the SIPS ... MUST be matched", which URI will be used to match this
> SIPS identity? Is it the NextHop URI UAC used to reach the server?

If by "NextHop URI" you mean the R-URI or the topmost Route URI, yes.

[Tina1: yes, this is what I mean for "Nexthop URI".]

> If it's the NextHop URI and 3263 resolution failed, how the UAC can
> find the server and then get the certificate from the server?

Let's say you had a request destined to "sip:user@example.com".
Doing an rfc3263-resolution on example.com domain will yield a set IP 
address, port, transport tuples.  If when contacted over TLS, the server 
presents a certificate with the SAN label "sips:example.com", then you can 
be sure that your connection reached the right destination.

Now, let's say that as a result of a Route list, you had a request destined 
to "sips:user@downtown.example.com", where downtown is a specific host in 
the example.com domain.  NAPTR and SRV of "downtown.example.com" may not 
yield any RRs, so you would do a A/AAAA lookup.  If when contacted over TLS, 
the server presents a certificate with the SAN label 
"DNS:downtown.example.com", then you can be sure that your connection has 
reached the right destination.

[Tina1: I feel that the statement "This NATPR and SRV may not yield any RRs" 
doesn't mean 3263 resolution failed, it only means NAPTR or SRV fails, but 
A/AAAA lookup will succeed, so 3263 resolution still succeed.]

Also, for sips:downtown.example.com, it may also yield NAPTR RR, say the 
server want to map this sips URI to TLS over SCTP. As per the rule in draft, 
if the NAPTR/SRV/A query success, the URI used for query should match the 
URI label which is sips:example.com in your case, obviously it cannot match. 
Is anything missed?


Note that in the last case above, it may be the same server that was 
contacted during the first case.  But two different URIs were used to reach 
it; however, by having the right set of identities in the certificate, the 
server is accessible to either URI.

[Tina1: As in the certificate, there is already a DN label which intimates 
the domain and the domain of URL label is same as DN label, why is the URI 
label required?]

[Tina1: One more:

In section 9, para 3,
<Quote>Certainly, this means that the domain must share the domain's private 
key with the hosting service.</Quote>

Why does the hosting service have to share the same private key? Is it not 
allowed to have one private key per virtual domain?] 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 09:18:02 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMldi-0008D9-KZ; Mon, 11 Sep 2006 09:15:54 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMldh-0008D4-Cn
	for sip@ietf.org; Mon, 11 Sep 2006 09:15:53 -0400
Received: from sj-iport-2-in.cisco.com ([171.71.176.71]
	helo=sj-iport-2.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GMldg-0007Q1-1E for sip@ietf.org; Mon, 11 Sep 2006 09:15:53 -0400
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-2.cisco.com with ESMTP; 11 Sep 2006 06:15:52 -0700
X-IronPort-AV: i="4.09,145,1157353200"; 
	d="scan'208"; a="340693093:sNHT32769308"
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-4.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BDFp9D006586; Mon, 11 Sep 2006 06:15:51 -0700
Received: from xbh-sjc-211.amer.cisco.com (xbh-sjc-211.cisco.com
	[171.70.151.144])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8BDFpQV026698;
	Mon, 11 Sep 2006 06:15:51 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 06:15:51 -0700
Received: from [10.32.241.146] ([10.32.241.146]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 06:15:50 -0700
Message-ID: <45056185.902@cisco.com>
Date: Mon, 11 Sep 2006 09:15:49 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Robert Sparks <rjsparks@estacado.net>
References: <850EF6C5-45B9-431D-9B81-6FBB4D38EC2F@estacado.net>
In-Reply-To: <850EF6C5-45B9-431D-9B81-6FBB4D38EC2F@estacado.net>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 13:15:51.0042 (UTC)
	FILETIME=[6742C620:01C6D5A4]
DKIM-Signature: a=rsa-sha1; q=dns; l=2331; t=1157980551; x=1158844551;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20GRUU-10=3A=20in-vs-out-of-dialog=20gruu=20retargetting;
	X=v=3Dcisco.com=3B=20h=3DR8ENQdgGkkmVBb0yamtE6xeJHIA=3D;
	b=F6BNvH2hEXj1k5V4IyJ3xqlkbf8qXnVmsQ1smdr0OhC4b7thhrmLVbthNfANoiDJatICQDR+
	jiHToqgmrJWoUkF1kmPRHNKQo2Djm6/QIcQpM6W672lgeRbplnRLHz72;
Authentication-Results: sj-dkim-4.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0a7aa2e6e558383d84476dc338324fab
Cc: IETF SIP List <sip@ietf.org>, sip-chairs@tools.ietf.org
Subject: [Sip] Re: GRUU-10: in-vs-out-of-dialog gruu retargetting
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

inline.

Robert Sparks wrote:

> I forced myself (1) to forget the various conversations we had around  
> last-hop-spiraling and the interaction of GRUU with outbound and  tried 
> to read the proxy behavior section from the point-of-view of an  
> implementer who didn't have the list/meeting history in their head.  
> With those preconditions 8.2.1 through 8.2.3 get somewhat confusing.

You are not alone. Others have commented on this too, clearly it is 
needing some work.

> 
> First - It's not clear why there's any distinction between in-dialog  
> and out-of-dialog requests in the first place.
> That distinction isn't normal for a proxy - what's special that makes  
> it normal here?

Well... to be frank at this point its an artifact from previous 
revisions, where there really was quite different behavior. As of -9 or 
-10 or something they became more aligned, but it was incrementally 
edited towards that.

So, I would be inclined to unify the two sections. The one thing from 
8.2.3 that needs to be folded in is Route header processing. More below.

> 
> Next, if it is necessary to distinguish them, the criteria currently  in 
> the draft won't work. You can have out-of-dialog
> requests show up with Route headers fields.

Correct. As a side note there is a lot more to say on the concept of 
initial requests with Route headers. I think it has countless 
applications, but its a whole other discussion.

So, I need to take the Route header field discussion and put it into 
8.2.1 and that should work.

> 
> The only difference in behavior that I can back out of the current  text 
> (did I miss something?) is dealing with the situation
> where there is more than one contact currently bound to the GRUU.  8.2.1 
> says to use the most recent, 8.2.3 says to
> pick arbitrarily. To the implementer, this is going to appear arcane  at 
> best.

Right. I can't think of a reason why it needs to be different.

Thanks,
Jonathan R.

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 09:27:08 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMlmz-0003BR-P0; Mon, 11 Sep 2006 09:25:29 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMlmy-0003B7-AL
	for sip@ietf.org; Mon, 11 Sep 2006 09:25:28 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMlmv-0000ZZ-So
	for sip@ietf.org; Mon, 11 Sep 2006 09:25:28 -0400
Received: from sj-dkim-6.cisco.com ([171.68.10.81])
	by sj-iport-5.cisco.com with ESMTP; 11 Sep 2006 06:25:26 -0700
X-IronPort-AV: i="4.09,145,1157353200"; 
	d="scan'208"; a="319838470:sNHT37505096"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-6.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BDPPIg022926; Mon, 11 Sep 2006 06:25:25 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8BDPP6W007236;
	Mon, 11 Sep 2006 06:25:25 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 06:25:24 -0700
Received: from [10.32.241.146] ([10.32.241.146]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 06:25:24 -0700
Message-ID: <450563C3.80909@cisco.com>
Date: Mon, 11 Sep 2006 09:25:23 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] Re: gruu-10 focused review comments
References: <939B827E-F7D3-4D58-A9F2-92E879A0DAB2@nostrum.com>	<44EB7082.5010601@cisco.com>
	<54F82451-70EA-46C1-956A-429074445209@softarmor.com>
In-Reply-To: <54F82451-70EA-46C1-956A-429074445209@softarmor.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 13:25:24.0404 (UTC)
	FILETIME=[BD02DF40:01C6D5A5]
DKIM-Signature: a=rsa-sha1; q=dns; l=3367; t=1157981125; x=1158845125;
	c=relaxed/simple; s=sjdkim6002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20Re=3A=20gruu-10=20focused=20review=20comments; 
	X=v=3Dcisco.com=3B=20h=3Dml0tsz5m/C0BZGB42RXulvEc6pM=3D;
	b=RirvBlze6FIosBL/AyU3nKx1O3M+zt+BLh726t/J57Ilbxtldjkfix1bYqTn0rCu3g8EXUwh
	14WbcrORZj7NL5Jpdv1JMtBSw8cMfhEZeakM9nEY8cPXj06swaW3mh2b;
Authentication-Results: sj-dkim-6.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b280b4db656c3ca28dd62e5e0b03daa8
Cc: IETF SIP List <sip@ietf.org>, sip-chairs@tools.ietf.org,
	Paul Kyzivat <pkyzivat@cisco.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

inline.

Dean Willis wrote:

> 
> On Aug 22, 2006, at 4:00 PM, Paul Kyzivat wrote:
> 
> I'll paste my confusion in-line.
> 
>> Suggested fix: Replace the first paragraph as follows:
>>
>> OLD:
>>    There is no new behavior associated with sending a request to a  GRUU.
>>    A GRUU is a URI like any other.  When a UA receives a request or
>>    response, it knows that the remote target is a GRUU by the presence
>>    of the "gruu" URI parameter.  The UA can take the GRUU, send a
>>    request to it, and then be sure that the request is delivered to  the
>>    UA instance which sent the request or response.
>>
>> NEW:
>>    A GRUU is a URI like any other.  When a UA receives a request or
>>    response, it knows that the remote target is a GRUU by the presence
>>    of the "gruu" URI parameter.  The UA can take the GRUU, send a
>>    request to it, and then be sure that the request is delivered to  the
>>    UA instance which sent the request or response.
> 
> 
> But we've already got people talking about redirecting or retargeting  
> requests that were sent to a GRUU -- perhaps in the UA, or perhaps in  
> some proxy.

Err - that should be squarely in the category of 'dont do that'. Can you 
point me to where that discussion is? I haven't noticed it.


> 
> And the GRUU, despite being "universally routable", isn't necessarily  
> reachable. It is just more likely to be reachable than the real Contact.

Well, if the network is down its not reachable, sure. But the whole 
point of the spec is that, assuming the network is working, it *will* be 
delivered to that specific UA instance. I'm missing the subtlety of what 
you are pointing out here.

> 
>>
>>    For UACs that have been assuming the URIs in contact headers in
>>    messages from others are globally routable there is no new behavior
>>    associated with sending a request to that URI when it is a GRUU.
>>
> 
> I like the preceding.
> 
>>    However some UACs have been assuming that URIs in received contact
>>    headers are not globally routable, and using ad hoc techniques when
>>    targetting requests to them. (E.g. Using the To or From-URI instead
>>    of the contact URI, or sending a new request in-dialog when an
>>    out-of-dialog request would otherwise be preferred.) A GRUU-aware
>>    UAC SHOULD treat a URI containing a "gruu" URI-parameter as  globally
>>    routable, and condition its actions accordingly, if it would
>>    otherwise consider that URI to not be globally routable.
>>
> 
> But the last sentence of the preceding lost me. It's a URI. Since I  
> know it is supposed to be a GRUU, I should try it before trying  tricky 
> transforms on the other URIs I have available (including AOR).  But I 
> might NOT actually be able to reach it. Are there still use  cases where 
> I'm going to fall back and try something tricky?

I think Paul answered this - yes. When the Contact doesn't have the gruu 
param, you do something tricky.

-Jonathan R.


-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 09:27:13 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMlmG-00032q-2d; Mon, 11 Sep 2006 09:24:44 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMlmE-00032h-Gw
	for sip@ietf.org; Mon, 11 Sep 2006 09:24:42 -0400
Received: from ihemail3.lucent.com ([135.245.0.37])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMlmA-0000Pa-0Z
	for sip@ietf.org; Mon, 11 Sep 2006 09:24:42 -0400
Received: from ilexp02.ndc.lucent.com (h135-3-39-2.lucent.com [135.3.39.2])
	by ihemail3.lucent.com (8.13.6/IER-o) with ESMTP id k8BDOZcL014177
	for <sip@ietf.org>; Mon, 11 Sep 2006 08:24:35 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp02.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 11 Sep 2006 08:24:35 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 11 Sep 2006 15:24:33 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
Date: Mon, 11 Sep 2006 15:24:32 +0200
Message-ID: <5D1A7985295922448D5550C94DE291803D7A74@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
Thread-Index: Aca4t6jzb0cIdg3jQp2xn/3iF5Fd1gRcnWrAANcpi/ABUXCx0AC2G9xA
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: "IETF SIP List" <sip@ietf.org>
X-OriginalArrivalTime: 11 Sep 2006 13:24:33.0894 (UTC)
	FILETIME=[9EE7A860:01C6D5A5]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 93df555cbdbcdae9621e5b95d44b301e
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

A further reminder of the call, and a note that the compiled comments
can be found temporarily at:

http://portal.etsi.org/docbox/TISPAN/Open/ietf-temp/

There are two versions of the comments, one in Microsoft word and one in
HTML, and I have numbered the comments for reference. Otherwise the
comments are exactly as made on the mailing list.

At some point we will get the compiled comments up to the softarmor
site, but I am unable to do that, and I have temporarily lost
communication with Dean.

These comments do not include the responses posted by Jonathan this
earlier today.

Regards

Keith

> -----Original Message-----
> From: Drage, Keith (Keith) [mailto:drage@lucent.com]=20
> Sent: 08 September 2006 02:44
> To: IETF SIP List
> Subject: RE: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
>=20
> A reminder of the conference call on Monday.
>=20
> The call is expected to last up to 2 hours.
>=20
> I will post details of the comments summary when available. I=20
> am still compiling it.
>=20
> Regards
>=20
> Keith=20
>=20
> > -----Original Message-----
> > From: Drage, Keith (Keith)
> > Sent: 01 September 2006 06:26
> > To: 'IETF SIP List'
> > Subject: RE: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
> >=20
> > The rescheduled date for this conference call in Monday 11th=20
> > September. Details as on original call and are as follows:
> >=20
> > > 	8:00 am Pacific Time
> > > 	10:00 am Central US Time
> > > 	11:00 am Eastern US Time
> > > 	4:00 pm UK
> > > 	5:00 pm Central European Summer Time
> > >=20
> > > Bridge details as follows:
> > >=20
> > > Access Phone Number:  8007718734
> > > International Access Phone Number:  +1 6477233953 7-Digit
> > Access Code: =20
> > > 5776249
> > >=20
> >=20
> > All people who have reviewed the document are welcome.
> >=20
> > Note that I am still waiting on comments from some reviewers.=20
> > If you have comments, please submit them as soon as possible.
> >=20
> > Regards
> >=20
> > Keith
> >=20
> > > -----Original Message-----
> > > From: Drage, Keith (Keith)
> > > Sent: 28 August 2006 01:25
> > > To: Drage, Keith (Keith); IETF SIP List
> > > Subject: RE: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
> > >=20
> > > I am having to reschedule the call on the 4th as a critical=20
> > > participant is no longer available. I will still be compiling the=20
> > > comments received over the next week or so.
> > >=20
> > > The conference call on the 4th is therefore cancelled.
> > >=20
> > > Please keep an eye open for the rescheduled dates.
> > >=20
> > > Regards
> > >=20
> > > Keith
> > >=20
> > > > -----Original Message-----
> > > > From: Drage, Keith (Keith) [mailto:drage@lucent.com]
> > > > Sent: 05 August 2006 21:31
> > > > To: IETF SIP List
> > > > Subject: [Sip] Continuation of WGLC on draft-ietf-sip-gruu-10
> > > >=20
> > > > Working Group Last Call
> > > > -----------------------
> > > >=20
> > > > Jonathan has just published
> > > > http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-10.txt
> > > >  which should take into account all the major comments that
> > > have been
> > > > so far received on this document.
> > > >=20
> > > > Having initiated WGLC on this document on 13th January=20
> 2004, and=20
> > > > revised that WGLC on 5th July 2004 and 26th October=20
> 2005 we would=20
> > > > really like to reach a final conclusion of this WGLC.
> > > >=20
> > > > Therefore please review the document and submit your WGLC
> > comments
> > > > within two weeks, ie. By the 21st August 2006.
> > > >=20
> > > > Process
> > > > -------
> > > >=20
> > > > In addition to an open invitation for review by all
> > members of the
> > > > working group, we will be soliciting full review by a number of=20
> > > > experts who we believe will provide a good and complete
> > > understanding
> > > > of the issues and problems, if any, with the document. If
> > > you consider
> > > > you should be part of this list this please contact the=20
> WG chairs.
> > > >=20
> > > > The WG chairs will compile all submitted comments into a
> > > single review
> > > > document which will be discussed on the conference call
> > > below. Please
> > > > therefore submit your comments (to the SIP WG list and the
> > > WG chairs)
> > > > with information under the following headings for each comment:
> > > >=20
> > > > -	location in document
> > > > -	nature of comment (editorial, minor technical,=20
> critical error,
> > > > absolute show stopper - use your judgement on this)
> > > > -	comment
> > > > -	proposed fix
> > > >=20
> > > > We intend to have a conference call for reviewers to
> > > conclude on the
> > > > quality of the document on Monday 4th September at:
> > > >=20
> > > > 	8:00 am Pacific Time
> > > > 	10:00 am Central US Time
> > > > 	11:00 am Eastern US Time
> > > > 	4:00 pm UK
> > > > 	5:00 pm Central European Summer Time
> > > >=20
> > > > Bridge details as follows:
> > > >=20
> > > > Access Phone Number:  8007718734
> > > > International Access Phone Number:  +1 6477233953 7-Digit
> > > Access Code: =20
> > > > 5776249
> > > >=20
> > > > While this call is open to all WG members, we would expect
> > > only people
> > > > who have reviewed the document on this conference call. For
> > > details of
> > > > the process please see previous communication. Note that
> > the above
> > > > does include those reviewers who reviewed the document=20
> and had no=20
> > > > comments - if you are in this class, please report it.
> > > >=20
> > > > Regards
> > > >=20
> > > > Keith
> > > >=20
> > > > Keith Drage
> > > > drage@lucent.com
> > > > tel: +44 1793 776249
> > > >=20
> > > > _______________________________________________
> > > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > > This list is for NEW development of the core SIP Protocol Use=20
> > > > sip-implementors@cs.columbia.edu for questions on=20
> current sip Use=20
> > > > sipping@ietf.org for new developments on the application of sip
> > > >=20
> > >=20
> >=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 09:43:03 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMm1Q-0001WE-0A; Mon, 11 Sep 2006 09:40:24 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMm1O-0001VR-K3
	for sip@ietf.org; Mon, 11 Sep 2006 09:40:22 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMm1N-0003dS-7B
	for sip@ietf.org; Mon, 11 Sep 2006 09:40:22 -0400
Received: from sj-dkim-5.cisco.com ([171.68.10.79])
	by sj-iport-5.cisco.com with ESMTP; 11 Sep 2006 06:40:20 -0700
X-IronPort-AV: i="4.09,145,1157353200"; 
	d="scan'208"; a="319842843:sNHT35699584"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-5.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BDeK3V023659; Mon, 11 Sep 2006 06:40:20 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com
	[128.107.191.100])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8BDcm6Y012186;
	Mon, 11 Sep 2006 06:40:20 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.211);
	Mon, 11 Sep 2006 06:39:45 -0700
Received: from [10.32.241.146] ([10.32.241.146]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 06:39:45 -0700
Message-ID: <45056720.4070502@cisco.com>
Date: Mon, 11 Sep 2006 09:39:44 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] GRUU-10: "gruu" as both a header and URI parameter
References: <2B87277A-D19C-43D2-987B-C8DEA01456D2@estacado.net>
	<44C94B32-8591-47F6-A6FB-7D8D2C92ED83@cisco.com>
In-Reply-To: <44C94B32-8591-47F6-A6FB-7D8D2C92ED83@cisco.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 13:39:45.0186 (UTC)
	FILETIME=[BE13C820:01C6D5A7]
DKIM-Signature: a=rsa-sha1; q=dns; l=2768; t=1157982020; x=1158846020;
	c=relaxed/simple; s=sjdkim5002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU-10=3A=20=22gruu=22=20as=20both=20a=20header=20and=2
	0URI=20parameter;
	X=v=3Dcisco.com=3B=20h=3DxeDrKsUsZwK8A6mMomuPnmj2a7I=3D;
	b=fZPB07nHJAgyn39Mtfk5v+IHuU1BKVm3+mLq+h1bWIJUwovNl4PeDDVasY6n4jghMDrBc7yu
	zeSHpAkCYJ3DtnqesgjR5V6CVG7cFOGXZtDwYahAVDwJCslPNwfdtUBg;
Authentication-Results: sj-dkim-5.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d0bdc596f8dd1c226c458f0b4df27a88
Cc: IETF SIP List <sip@ietf.org>, Robert Sparks <rjsparks@estacado.net>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I think this is reasonable. Note that this would break backwards 
compatibility of this version of the spec with all previous versions. 
Generally IETF does not guarantee backwards compatibility when a 
document is still in I-D version (and indeed not for revisions of an RFC 
either...). This spec has been around a while though so I want to make 
sure people are OK with it. I don't think its been widely implemented 
yet though, as SBCs have mostly filled this need so far.

I would suggest:

;gr be the URI parameter which signals that the URI is a GRUU, analagous 
to ;lr.

;gruu be the Contact header field parameter which conveys the gruu 
assigned to you in the REGISTER response.

So, a REGISTER resposne would look like in part:

SIP/2.0 200 OK
Contact: <sip:10.0.1.1>;gruu="sip:joe@domain.com;gr;opaque=asdasdasd"

Thanks,
Jonathan R.

Cullen Jennings wrote:

> 
> On Aug 21, 2006, at 1:26 PM, Robert Sparks wrote:
> 
>> Right now, the mechanism is creating a header parameter and a URI  
>> parameter with the same name : "gruu".
>>
>> Thinking about this from the perspective of debugging things in a  
>> lab, or worse, over VoIP or an IM, I envision
>> many, many conversations that will take this form:
>>
>> A: I see the problem - it's in the gruu parameter.
>> B: Ok - I'll change that
>> (retry)
>> A: It's still broken - I don't see what you... Oh wait - I didn't  
>> mean _that_ gruu parameter, go
>>      change the other one.
>> B: Oh crud - was it the header parameter or the URI parameter? (and  
>> which one of those is outside
>>      the <>'s? I can never keep that straight...)
>>
>> For the sake of sanity (at least mine), could we please reconsider  
>> giving these things different names?
> 
> 
> Add my plea for consideration to Robert's - implementors are confused  
> enough about the difference between header parameters and uri  
> parameters without us adding to the confusion.
> 
> It's not like gruu is such an intuitively descriptive acronym that  
> nothing else could make sense, we could have gruu and groovy :-)
> 
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 10:11:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMmRr-00065R-Lh; Mon, 11 Sep 2006 10:07:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMmRq-00065M-M1
	for sip@ietf.org; Mon, 11 Sep 2006 10:07:42 -0400
Received: from sj-iport-3-in.cisco.com ([171.71.176.72]
	helo=sj-iport-3.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GMmRn-0008Q4-AS for sip@ietf.org; Mon, 11 Sep 2006 10:07:42 -0400
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-3.cisco.com with ESMTP; 11 Sep 2006 07:07:39 -0700
X-IronPort-AV: i="4.09,146,1157353200"; 
	d="scan'208"; a="442897358:sNHT30310748"
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BE7cQY017410 for <sip@ietf.org>; Mon, 11 Sep 2006 07:07:38 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8BE7cQV000373
	for <sip@ietf.org>; Mon, 11 Sep 2006 07:07:38 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 07:07:38 -0700
Received: from [10.32.241.146] ([10.32.241.146]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 07:07:38 -0700
Message-ID: <45056DA9.6060701@cisco.com>
Date: Mon, 11 Sep 2006 10:07:37 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: IETF SIP List <sip@ietf.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 14:07:38.0161 (UTC)
	FILETIME=[A33F8210:01C6D5AB]
DKIM-Signature: a=rsa-sha1; q=dns; l=2073; t=1157983658; x=1158847658;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Format=20for=20review=20comments;
	X=v=3Dcisco.com=3B=20h=3D67ty6k6N/Y4Yx/2luwJ5iLmV6v4=3D;
	b=UzF79qZHJWzw0yTuW3986Kjc4UxE1QkgLLU0RvNq3rBwC1PFQmC6UFSEuARlF3hYiurTQmr+
	NK+OrU5/fVqhJw5GRLbMqVsiO90t8/OxZIMFuBPPTwcKwpfNDFhc4bBJ;
Authentication-Results: sj-dkim-2.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: f4c2cf0bccc868e4cc88dace71fb3f44
Subject: [Sip] Format for review comments
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

As folks can probably tell I've been going through the review comments 
on gruu this morning in preparation for the call today. I'd like to 
suggest a particular format for review comments which makes them much, 
much, much more useful.

There are two ways to specify your comment. I'll call them form 1 and 
form 2. Here are two examples on a fictitious document:

Form 1
------

Section 3.2.1, first para:

I disagree with this. Can we change the second sentence to say "header 
field parameter" instead?

Form 2:
-------

In Section 3.2.1:

 > The user agent then constructs the message. It does so by adding
 > a new header parameter to to the Contact header field.

I disagree with this. Can we change the second sentence to say "header 
field parameter" instead?



I'd like to STRONGLY encourage folks to use form 2 for comments. There 
are several reasons why:

1. When editing the xml source to account for the comments, I can find 
the offending text in form 2 in my text editor by doign incremental 
forward search for the quoted text. With form 1, since the xml source 
does not contain section numbers, I cannot search for section 3.2.1 
directly in the xml source. Instead, I would have to refer back to the 
final document, find that section, get the section header name, and then 
search for it in the xml source. Much slower.

2. When reading the comments in email, the comments are standalone in 
Form 2, but not Form 1. What I mean is, just by reading the mail, and 
not having the document in front of me, I can understand and comment on 
the comment. This makes it easier to respond quickly, as it reduces the 
burden required to properly parse the mail.



Thanks,
Jonathan R.

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 10:55:05 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMn8z-00014y-5c; Mon, 11 Sep 2006 10:52:17 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMn8y-00014n-BT
	for sip@ietf.org; Mon, 11 Sep 2006 10:52:16 -0400
Received: from sj-iport-4.cisco.com ([171.68.10.86])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMn8w-0001Du-3C
	for sip@ietf.org; Mon, 11 Sep 2006 10:52:16 -0400
Received: from sj-dkim-5.cisco.com ([171.68.10.79])
	by sj-iport-4.cisco.com with ESMTP; 11 Sep 2006 07:52:13 -0700
X-IronPort-AV: i="4.09,146,1157353200"; 
	d="scan'208"; a="1852956013:sNHT30508760"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-5.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BEqD7k027052 for <sip@ietf.org>; Mon, 11 Sep 2006 07:52:13 -0700
Received: from [10.75.119.227] (rtp-vpn4-343.cisco.com [10.82.209.87])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8BEpE6c014213
	for <sip@ietf.org>; Mon, 11 Sep 2006 07:52:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <E1GLSh7-00050D-Rd@stiedprstage1.ietf.org>
References: <E1GLSh7-00050D-Rd@stiedprstage1.ietf.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <212E035E-2737-4A3B-9B5A-CDF251E6FF43@cisco.com>
Content-Transfer-Encoding: 7bit
From: Cullen Jennings <fluffy@cisco.com>
Date: Sun, 10 Sep 2006 22:54:07 -0400
To: SIP <sip@ietf.org>
X-Mailer: Apple Mail (2.752.2)
DKIM-Signature: a=rsa-sha1; q=dns; l=134; t=1157986333; x=1158850333;
	c=relaxed/simple; s=sjdkim5002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:Good=20Hash=3A=20draft-ietf-sip-fork-loop-fix-03;
	X=v=3Dcisco.com=3B=20h=3Dojqnd9IfD1jjTWaEemc/o4UmVtM=3D;
	b=OR1AJYbQTCvSfI0aBruzh2FnZbA4Nucx7ja/qn33Ss4Xps1cGH6kj/sUP6jli+yIyCxdlMmd
	Nw2fTQQmH5zU7s2uCOrl/CN6oJskL9AMU+MeGVanxhSoXufqlTAPTEJx;
Authentication-Results: sj-dkim-5.cisco.com; header.From=fluffy@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 2870a44b67ee17965ce5ad0177e150f4
Subject: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


I'm wondering why we would recommend a cryptographic hash function.  
I'm also wondering why it needs to be as large as 128 bits.


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Mon Sep 11 10:55:05 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMn9B-00016b-Mt; Mon, 11 Sep 2006 10:52:29 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMn9A-00016L-Em
	for sip@ietf.org; Mon, 11 Sep 2006 10:52:28 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMn99-0001Fg-4W
	for sip@ietf.org; Mon, 11 Sep 2006 10:52:28 -0400
Received: from sj-dkim-8.cisco.com ([171.68.10.93])
	by sj-iport-6.cisco.com with ESMTP; 11 Sep 2006 07:52:26 -0700
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-8.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BEqQYt024846; Mon, 11 Sep 2006 07:52:26 -0700
Received: from [10.75.119.227] (rtp-vpn4-343.cisco.com [10.82.209.87])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8BEpE6e014213;
	Mon, 11 Sep 2006 07:52:23 -0700 (PDT)
In-Reply-To: <44EC804B.2020706@lucent.com>
References: <44EA0891.6080909@lucent.com> <44EC696A.3010001@cisco.com>
	<44EC804B.2020706@lucent.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EDDAD0E1-4C1C-47AF-B63E-820396603C2F@cisco.com>
Content-Transfer-Encoding: 7bit
From: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] Updated revision of connect-reuse
	(draft-ietf-sip-connect-reuse-06)
Date: Sun, 10 Sep 2006 23:17:28 -0400
To: "Vijay K. Gurbani" <vkg@lucent.com>, IETF SIP List <sip@ietf.org>
X-Mailer: Apple Mail (2.752.2)
DKIM-Signature: a=rsa-sha1; q=dns; l=2992; t=1157986346; x=1158850346;
	c=relaxed/relaxed; s=sjdkim8002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:Re=3A=20[Sip]=20Updated=20revision=20of=20connect-reuse=20(draft-ietf-si
	p-connect-reuse-06);
	X=v=3Dcisco.com=3B=20h=3D1nwrOGyvVECKFiCdinUi/BAp+RQ=3D;
	b=uV5M8ljhprgcmP8orazDebLAb3g02A49zwslzssPtjODFj9zmDx8OTJtCCIE3Kgr1cVge/zM
	zUtrLfsgj0OJZUFbWmkvry7PVraMs1ZoUAj/W1A6D3o47Oo4aYL8Lipu;
Authentication-Results: sj-dkim-8.cisco.com; header.From=fluffy@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 244a2fd369eaf00ce6820a760a3de2e8
Cc: Paul H Kyzivat <pkyzivat@cisco.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

>
>> Section 2
>> The connect reuse mechanism described in this document is defined  
>> only for Transport Layer Security (TLS) transports.
>> The doc seems to be schizophrenic about this. It continues to talk
>> about connection reuse of TCP connections, but using different
>> connections in each direction. Not clear if that is intended as a
>> true part of the specification, as some non-normative text about a
>> usage that is already defined elsewhere, or simply as obsolete text
>> that hasn't been removed.
>
> You are right about the schizophrenic nature of TCP connection
> reuse.  Earlier versions mainly wanted to do TLS reuse; but I
> think that it is important to provide TCP connection reuse
> as well, but because of the security problems associated
> with doing TCP connection reuse a la TLS, it is best to open
> up a connection in each direction.
>
> It'll be great to provide normative behavior for TCP connection
> reuse in this document, especially now as the use of TCP
> in SIP increases.  If we do not provide any guidance, then
> implementations will have at least two different sets of
> behaviors:
>   1) Reuse the TCP connection in the backwards direction, a la
>      TLS.  This pitfalls of doing so are listed in Section 9.3.
>   2) Open up two connections for reuse, as this draft
>      recommends.
>
> For interoperability, it'll be good to have one behavior and
> it'll be even better if this information is maintained in one
> document (as opposed to having a connection reuse document
> for TLS and another for TCP).
>
> What do others in the WG think?
>
>

I sort of thought that this document was going to cover TCP as well.  
However, I don't see how any solution other than 2 above could work.  
A solution that allowed an attacker to connect to cisco, claim they  
were lucent, then intercept every call that cisco makes to lucent  
sounds like something that would certainly warrant a CERT advisory. I  
sort of doubt the WG would come to the conclusion that the dubious  
gains that this mechanisms offers of reducing two connection to one  
would ever be worth the security tradeoff of making it trivial for  
off path attackers to highjack calls of their choosing.

>
>> Section 10.2  (Virtual Servers and TCP Connections)
>> I don't follow this at all. I see absolutely no reason why the  
>> same connection should not be used for atlanta.example.com and  
>> chicago.example.com if the resolve to the same address.
>
> Hmmm...Jeroen also made the same comment.  So maybe I need to
> re-look at that section.  I was trying to partition the
> namespace for the server hosting the virtual domains such that
> requests in the backwards direction would result in a distinct
> TCP connection for each domain.  But maybe this is overkill.
> Any other opinions?
>
> Thanks much for your time on this.

With TLS, I think we have discussed this in the past and with TCP It  
won't matter if we end up with the solution 2 from above.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Mon Sep 11 13:15:10 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMpJ4-0003ft-Uz; Mon, 11 Sep 2006 13:10:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMpJ4-0003fR-8e
	for sip@ietf.org; Mon, 11 Sep 2006 13:10:50 -0400
Received: from smtp2.wanadoo.co.uk ([193.252.22.157] helo=smtp2.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMpJ0-0004oE-JJ
	for sip@ietf.org; Mon, 11 Sep 2006 13:10:50 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3113.me.freeserve.com (SMTP Server) with ESMTP id 7EF5B5C00087; 
	Mon, 11 Sep 2006 19:10:44 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3113.me.freeserve.com (SMTP Server) with SMTP id 09C095C00082; 
	Mon, 11 Sep 2006 19:10:44 +0200 (CEST)
X-ME-UUID: 20060911171044400.09C095C00082@mwinf3113.me.freeserve.com
Message-ID: <003301c6d5c5$38374e20$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Jeroen van Bemmel" <jbemmel@zonnet.nl>,
	"Theo Zourzouvillys" <theo@crazygreek.co.uk>,
	"Juha Heinanen" <jh@tutpro.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi><200609100943.41939.theo@crazygreek.co.uk><17668.11164.638763.876307@rautu.tutpro.com><200609110536.44472.theo@crazygreek.co.uk>
	<003001c6d570$13b99260$0601a8c0@BEMBUSTER>
Subject: Re: [Sip] loop fix
Date: Mon, 11 Sep 2006 18:10:39 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 1.9 (+)
X-Scan-Signature: 1449ead51a2ff026dcb23465f5379250
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I've reflected a bit more on this...

A question... is it possible to arrange that two (non-forking) proxies end 
up bouncing a single request between them?  I would think it is.  In this 
case, even though you don't get the combinatorial explosion that you do for 
the forking case, I think a 1 to 70 amplification of messages is still quite 
significant and worth protecting against.

So I think the various weighting should be, forking proxies MUST do loop 
detection.  Other proxies SHOULD do loop detection (as opposed to MAY). 
It's important that the draft explains a method to do loop detection in the 
most general case (i.e. allowing for stateless proxies etc.), but 
technically I don't think it even has to be RECOMMENDED strength.

It would be good if in some way the loop detection algorithm could be 
normatively referenced so that it would be possible to say that such and 
such an implementation fully implements and conforms to the loop detection 
algorithm described in RFC XXXX, by just saying "implements RFC XXXX".  That 
might require two RFCs though; one to mandate/recommend loop detection, and 
another to described the suggested loop detection algorithm.  That may be 
too much work for the small gain though!

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================

----- Original Message ----- 
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>; "Juha Heinanen" 
<jh@tutpro.com>
Cc: <sip@ietf.org>
Sent: Monday, September 11, 20From sip-bounces@ietf.org Mon Sep 11 13:15:10 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMpJ4-0003ft-Uz; Mon, 11 Sep 2006 13:10:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMpJ4-0003fR-8e
	for sip@ietf.org; Mon, 11 Sep 2006 13:10:50 -0400
Received: from smtp2.wanadoo.co.uk ([193.252.22.157] helo=smtp2.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMpJ0-0004oE-JJ
	for sip@ietf.org; Mon, 11 Sep 2006 13:10:50 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3113.me.freeserve.com (SMTP Server) with ESMTP id 7EF5B5C00087; 
	Mon, 11 Sep 2006 19:10:44 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3113.me.freeserve.com (SMTP Server) with SMTP id 09C095C00082; 
	Mon, 11 Sep 2006 19:10:44 +0200 (CEST)
X-ME-UUID: 20060911171044400.09C095C00082@mwinf3113.me.freeserve.com
Message-ID: <003301c6d5c5$38374e20$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Jeroen van Bemmel" <jbemmel@zonnet.nl>,
	"Theo Zourzouvillys" <theo@crazygreek.co.uk>,
	"Juha Heinanen" <jh@tutpro.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi><200609100943.41939.theo@crazygreek.co.uk><17668.11164.638763.876307@rautu.tutpro.com><200609110536.44472.theo@crazygreek.co.uk>
	<003001c6d570$13b99260$0601a8c0@BEMBUSTER>
Subject: Re: [Sip] loop fix
Date: Mon, 11 Sep 2006 18:10:39 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 1.9 (+)
X-Scan-Signature: 1449ead51a2ff026dcb23465f5379250
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I've reflected a bit more on this...

A question... is it possible to arrange that two (non-forking) proxies end 
up bouncing a single request between them?  I would think it is.  In this 
case, even though you don't get the combinatorial explosion that you do for 
the forking case, I think a 1 to 70 amplification of messages is still quite 
significant and worth protecting against.

So I think the various weighting should be, forking proxies MUST do loop 
detection.  Other proxies SHOULD do loop detection (as opposed to MAY). 
It's important that the draft explains a method to do loop detection in the 
most general case (i.e. allowing for stateless proxies etc.), but 
technically I don't think it even has to be RECOMMENDED strength.

It would be good if in some way the loop detection algorithm could be 
normatively referenced so that it would be possible to say that such and 
such an implementation fully implements and conforms to the loop detection 
algorithm described in RFC XXXX, by just saying "implements RFC XXXX".  That 
might require two RFCs though; one to mandate/recommend loop detection, and 
another to described the suggested loop detection algorithm.  That may be 
too much work for the small gain though!

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================

----- Original Message ----- 
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>; "Juha Heinanen" 
<jh@tutpro.com>
Cc: <sip@ietf.org>
Sent: Monday, September 11, 2006 8:01 AM
Subject: Re: [Sip] loop fix


> Juha,
>
> Loop detection currently works the way it does to accomodate stateless 
> proxies. It is the least common denominator; it will also work for 
> stateful proxies, so there is no need to define separate mechanisms to 
> achieve the same goal. That is a benefit
>
> It is true that you can also detect loops by searching through existing 
> state, with the aforementioned drawbacks that it won't work as well across 
> reboots (I consider the performance of the lookup an implementation issue, 
> it can be made efficient).
>
> For the forking scenario, the proxy must by definition be stateful. So one 
> could use a lookup through existing state as a way to do loop detection. 
> There is nothing in the draft that prevents this - hashing is RECOMMENDED, 
> but nothing says you can't do it your way. In fact, loop detection is a 
> completely local feature - a proxy only has to recognise its own detection 
> mechanism. So as long as it keeps to standard RFC3261 syntax, there is not 
> actually a need to standardize any particular mechanism - just stating 
> that it MUST do loop detection is sufficient.
>
> What I personally don't like about the recommended mechanism, is the 
> overloading of Via branches for both transaction id and loop detection. 
> IMHO a much better solution is to separate the two; I personally use
>
> Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}
>
> And it would be nice if there were some way to detect if some proxy is 
> doing loop detection or not. A separate parameter achieves this
>
> Regards,
>
> Jeroen
>
> ----- Original Message ----- 
> From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
> To: "Juha Heinanen" <jh@tutpro.com>
> Cc: <sip@ietf.org>
> Sent: Monday, September 11, 2006 6:36 AM
> Subject: Re: [Sip] loop fix
>
>
> On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:
>
>> > (1) speed - if you have a large number of active transactions, then 
>> > it's
>> > almost certainly a lot faster to construct and compare a hash in X
>> > number of via headers than search all the transactions received on
>> > that particular transport.
>>
>> in some implementations this is true. if it is not true in all
>> implementations, then the i-d should not give one SHOULD implementation
>> solution.
>
> As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing it 
> in
> other ways if your particular situation requires it - but as most 'common'
> implementations will worry about the things listed here, then SHOULD is 
> the
> right force for it in my opinion, as there are (as per rfc2119) "valid
> reasons in particular circumstances to ignore a particular item, but the 
> full
> implications must be understood and carefully weighed before choosing a
> different course."
>
>> > (2) resilience - a crashed proxy would still be able to perform loop
>> > detection, even after loosing all of it's state - assuming it keeps
>> > transactions in memory and not committed elsewhere before forwarding;
>>
>> this i don't quite understand. even if proxy looses all state, doesn't
>> it rebuild that state next time it receives the looped request again and
>> will detect the loop during the following round?
>
> Only after it looped again after crashing, and that assumes it's not 
> already
> crashed again since.  Given that the attack vector that the I-D is trying 
> to
> fix, i think it is sensible for it to catch a loop between crashes of an
> element, too.
>
> fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a 
> Network:
>
>   [...]
>   It is interesting to note that a few proxies rebooted during
>   the scenario, and rejoined in the attack when they restarted (as long
>   as they maintained registration state across reboots).  This points
>   out that if this attack were launched on the Internet at large, it
>   might require coordination among all the affected elements to stop
>   it.
>
>> > (3) scalability - loop may go through different proxies when load
>> > balancing. KEeping the hash in the via header allows peer proxies to
>> > detect and stop looped requests quicker than it would otherwise.
>>
>> this is not a valid reason, since if there are multiple proxies, they
>> may be from different vendors and since there is no standardized way to
>> calculate and add the hash into via header, one proxy cannot interpret
>> the via header added by another proxy.
>
> indeed, with multiple vendors.  but none the less, it's a reason a proxy 
> may
> want to use Via hashes rather than internally (which is what you asked).
>
> ~ Theo
>
> -- 
> Theo P. Zourzouvillys
> http://www.crazygreek.co.uk
> theo@crazygreek.co.uk
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Mon Sep 11 13:15:10 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMpJ6-0003gL-N5; Mon, 11 Sep 2006 13:10:52 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMpJ5-0003fx-0o
	for sip@ietf.org; Mon, 11 Sep 2006 13:10:51 -0400
Received: from smtp2.wanadoo.co.uk ([193.252.22.157] helo=smtp2.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMpJ0-0004oA-JK
	for sip@ietf.org; Mon, 11 Sep 2006 13:10:51 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3113.me.freeserve.com (SMTP Server) with ESMTP id E79585C00086; 
	Mon, 11 Sep 2006 19:10:43 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3113.me.freeserve.com (SMTP Server) with SMTP id A6C645C00082; 
	Mon, 11 Sep 2006 19:10:43 +0200 (CEST)
X-ME-UUID: 20060911171043683.A6C645C00082@mwinf3113.me.freeserve.com
Message-ID: <003201c6d5c5$37f710d0$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Cullen Jennings" <fluffy@cisco.com>, "SIP" <sip@ietf.org>
References: <E1GLSh7-00050D-Rd@stiedprstage1.ietf.org>
	<212E035E-2737-4A3B-9B5A-CDF251E6FF43@cisco.com>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Mon, 11 Sep 2006 17:52:13 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 1.9 (+)
X-Scan-Signature: 8b431ad66d60be2d47c7bfeb879db82c
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

----- Original Message From: "Cullen Jennings"

> I'm wondering why we would recommend a cryptographic hash function.  I'm 
> also wondering why it needs to be as large as 128 bits.

Hi Cullen,

I raised a similar question a while back 
(http://www1.ietf.org/mail-archive/web/sip/current/msg15133.html . 
Unfortunately I can't find Robert's reply in the archives.)

I think 06 8:01 AM
Subject: Re: [Sip] loop fix


> Juha,
>
> Loop detection currently works the way it does to accomodate stateless 
> proxies. It is the least common denominator; it will also work for 
> stateful proxies, so there is no need to define separate mechanisms to 
> achieve the same goal. That is a benefit
>
> It is true that you can also detect loops by searching through existing 
> state, with the aforementioned drawbacks that it won't work as well across 
> reboots (I consider the performance of the lookup an implementation issue, 
> it can be made efficient).
>
> For the forking scenario, the proxy must by definition be stateful. So one 
> could use a lookup through existing state as a way to do loop detection. 
> There is nothing in the draft that prevents this - hashing is RECOMMENDED, 
> but nothing says you can't do it your way. In fact, loop detection is a 
> completely local feature - a proxy only has to recognise its own detection 
> mechanism. So as long as it keeps to standard RFC3261 syntax, there is not 
> actually a need to standardize any particular mechanism - just stating 
> that it MUST do loop detection is sufficient.
>
> What I personally don't like about the recommended mechanism, is the 
> overloading of Via branches for both transaction id and loop detection. 
> IMHO a much better solution is to separate the two; I personally use
>
> Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}
>
> And it would be nice if there were some way to detect if some proxy is 
> doing loop detection or not. A separate parameter achieves this
>
> Regards,
>
> Jeroen
>
> ----- Original Message ----- 
> From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
> To: "Juha Heinanen" <jh@tutpro.com>
> Cc: <sip@ietf.org>
> Sent: Monday, September 11, 2006 6:36 AM
> Subject: Re: [Sip] loop fix
>
>
> On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:
>
>> > (1) speed - if you have a large number of active transactions, then 
>> > it's
>> > almost certainly a lot faster to construct and compare a hash in X
>> > number of via headers than search all the transactions received on
>> > that particular transport.
>>
>> in some implementations this is true. if it is not true in all
>> implementations, then the i-d should not give one SHOULD implementation
>> solution.
>
> As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing it 
> in
> other ways if your particular situation requires it - but as most 'common'
> implementations will worry about the things listed here, then SHOULD is 
> the
> right force for it in my opinion, as there are (as per rfc2119) "valid
> reasons in particular circumstances to ignore a particular item, but the 
> full
> implications must be understood and carefully weighed before choosing a
> different course."
>
>> > (2) resilience - a crashed proxy would still be able to perform loop
>> > detection, even after loosing all of it's state - assuming it keeps
>> > transactions in memory and not committed elsewhere before forwarding;
>>
>> this i don't quite understand. even if proxy looses all state, doesn't
>> it rebuild that state next time it receives the looped request again and
>> will detect the loop during the following round?
>
> Only after it looped again after crashing, and that assumes it's not 
> already
> crashed again since.  Given that the attack vector that the I-D is trying 
> to
> fix, i think it is sensible for it to catch a loop between crashes of an
> element, too.
>
> fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a 
> Network:
>
>   [...]
>   It is interesting to note that a few proxies rebooted during
>   the scenario, and rejoined in the attack when they restarted (as long
>   as they maintained registration state across reboots).  This points
>   out that if this attack were launched on the Internet at large, it
>   might require coordination among all the affected elements to stop
>   it.
>
>> > (3) scalability - loop may go through different proxies when load
>> > balancing. KEeping the hash in the via header allows peer pI then clarified off line with:

On Jul 6, 2006, at 1:28 PM, Pete Cordell wrote:

> Just to make sure I'm not talking a cross-purposes, the reference  to 
> cryptographic hashes I'm talking about is in 4.2.3.-
>
>   A common way to create the second part of the branch parameter value
>   when forking a request is to compute a cryptographic hash...
>
> I appreciate this has no normative value, but implies that  cryptographic 
> strength is recommended.
>
> Maybe just removing the word "cryptographic" is the right to do?  I 
> suppose the last sentence in that paragraph could go along the  lines of:
>
>     ...An MD5 [RFC1321] hash expressed in hexadecimal (base64
>   is not permissible for a token) is a reasonable choice of a hash
>   function, although other (non-cryptographic) hashes may suffice.

which Robert seemed to think this was reasonable.

As to the size of the hash, what size do you think is big enough?  Assuming 
the hash is working properly, even 16 bits is approaching five 9s territory 
for false positives.  Is there any reason why that's too simplistic a way to 
look at it?  I imagine 32-bits would be easy for most people to implement, 
and a logical size to choose as far as I can tell.  Should this be left as 
an implementation issue?

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





roxies to
>> > detect and stop looped requests quicker than it would otherwise.
>>
>> this is not a valid reason, since if there are multiple proxies, they
>> may be from different vendors and since there is no standardized way to
>> calculate and add the hash into via header, one proxy cannot interpret
>> the via header added by another proxy.
>
> indeed, with multiple vendors.  but none the less, it's a reason a proxy 
> may
> want to use Via hashes rather than internally (which is what you asked).
>
> ~ Theo
>
> -- 
> Theo P. Zourzouvillys
> http://www.crazygreek.co.uk
> theo@crazygreek.co.uk
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Mon Sep 11 13:15:10 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMpJ6-0003gL-N5; Mon, 11 Sep 2006 13:10:52 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMpJ5-0003fx-0o
	for sip@ietf.org; Mon, 11 Sep 2006 13:10:51 -0400
Received: from smtp2.wanadoo.co.uk ([193.252.22.157] helo=smtp2.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMpJ0-0004oA-JK
	for sip@ietf.org; Mon, 11 Sep 2006 13:10:51 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3113.me.freeserve.com (SMTP Server) with ESMTP id E79585C00086; 
	Mon, 11 Sep 2006 19:10:43 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3113.me.freeserve.com (SMTP Server) with SMTP id A6C645C00082; 
	Mon, 11 Sep 2006 19:10:43 +0200 (CEST)
X-ME-UUID: 20060911171043683.A6C645C00082@mwinf3113.me.freeserve.com
Message-ID: <003201c6d5c5$37f710d0$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Cullen Jennings" <fluffy@cisco.com>, "SIP" <sip@ietf.org>
References: <E1GLSh7-00050D-Rd@stiedprstage1.ietf.org>
	<212E035E-2737-4A3B-9B5A-CDF251E6FF43@cisco.com>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Mon, 11 Sep 2006 17:52:13 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 1.9 (+)
X-Scan-Signature: 8b431ad66d60be2d47c7bfeb879db82c
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

----- Original Message From: "Cullen Jennings"

> I'm wondering why we would recommend a cryptographic hash function.  I'm 
> also wondering why it needs to be as large as 128 bits.

Hi Cullen,

I raised a similar question a while back 
(http://www1.ietf.org/mail-archive/web/sip/current/msg15133.html . 
Unfortunately I can't find Robert's reply in the archives.)

I think I then clarified off line with:

On Jul 6, 2006, at 1:28 PM, Pete Cordell wrote:

> Just to make sure I'm not talking a cross-purposes, the reference  to 
> cryptographic hashes I'm talking about is in 4.2.3.-
>
>   A common way to create the second part of the branch parameter value
>   when forking a request is to compute a cryptographic hash...
>
> I appreciate this has no normative value, but implies that  cryptographic 
> strength is recommended.
>
> Maybe just removing the word "cryptographic" is the right to do?  I 
> suppose the last sentence in that paragraph could go along the  lines of:
>
>     ...An MD5 [RFC1321] hash expressed in hexadecimal (base64
>   is not permissible for a token) is a reasonable choice of a hash
>   function, although other (non-cryptographic) hashes may suffice.

which Robert seemed to think this was reasonable.

As to the size of the hash, what size do you think is big enough?  Assuming 
the hash is working properly, even 16 bits is approaching five 9s territory 
for false positives.  Is there any reason why that's too simplistic a way to 
look at it?  I imagine 32-bits would be easy for most people to implement, 
and a logical size to choose as far as I can tell.  Should this be left as 
an implementation issue?

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Mon Sep 11 13:34:23 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMpcw-00046w-In; Mon, 11 Sep 2006 13:31:22 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMpcu-00044A-Kd
	for sip@ietf.org; Mon, 11 Sep 2006 13:31:20 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMpct-0008Mv-57
	for sip@ietf.org; Mon, 11 Sep 2006 13:31:20 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 448F313F8DA; Mon, 11 Sep 2006 20:31:04 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (plasmid249.gprs.dnafinland.fi [62.78.124.249])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 4233E13F8C4;
	Mon, 11 Sep 2006 20:30:52 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 264A4F0AE6; Mon, 11 Sep 2006 20:31:10 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17669.40285.908627.423818@rautu.tutpro.com>
Date: Mon, 11 Sep 2006 20:31:09 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Pete Cordell" <pete@tech-know-ware.com>
Subject: Re: [Sip] loop fix
In-Reply-To: <003301c6d5c5$38374e20$5000a8c0@RW>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>
	<200609100943.41939.theo@crazygreek.co.uk>
	<17668.11164.638763.876307@rautu.tutpro.com>
	<200609110536.44472.theo@crazygreek.co.uk>
	<003001c6d570$13b99260$0601a8c0@BEMBUSTER>
	<003301c6d5c5$38374e20$5000a8c0@RW>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7bac9cb154eb5790ae3b2913587a40de
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Pete Cordell writes:

 > I think a 1 to 70 amplification of messages is
 > still quite significant and worth protecting against.

i agree.  where does 70 come from?  smells like yet another IMS
requirement :-) i have never seen even 20 "Received from" headers in
email messages and ip ttl is 32.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 13:54:17 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMpxB-0005Wa-G9; Mon, 11 Sep 2006 13:52:17 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMpx9-0005WQ-MF
	for sip@ietf.org; Mon, 11 Sep 2006 13:52:15 -0400
Received: from mail.infointeractive.com ([207.231.225.15]
	helo=smtp.infointeractive.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMpx8-0002ji-4a
	for sip@ietf.org; Mon, 11 Sep 2006 13:52:15 -0400
Received: from eng.infointeractive.com ([10.142.0.50]:45873 "EHLO
	eng.infointeractive.com") by mail.infointeractive.com with ESMTP
	id S896511AbWIKRwH (ORCPT <rfc822;sip@ietf.org>);
	Mon, 11 Sep 2006 14:52:07 -0300
Received: from localhost (user: 'benoit', uid#6008) by eng.infointeractive.com
	id <105611-14281>; Mon, 11 Sep 2006 14:52:01 -0300
Date: Mon, 11 Sep 2006 14:52:01 -0300
From: David Benoit <benoit@infointeractive.com>
To: sip@ietf.org
Subject: Re: [Sip] loop fix
Message-ID: <20060911175201.GG19029@infointeractive.com>
References: <003001c6d570$13b99260$0601a8c0@BEMBUSTER>
	<003301c6d5c5$38374e20$5000a8c0@RW>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <003301c6d5c5$38374e20$5000a8c0@RW>
User-Agent: Mutt/1.4.2.1i
X-Spam-Score: 0.0 (/)
X-Scan-Signature: a0534e6179a1e260079328e8b03c7901
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I'm sorry, but I'm still not convinced that any of this is going to help.
What, in any of this, prevents the following:

              A
              |
              P
             / \
            BB BB
            |   |
            P   P

Where A is a UA, P is a stateless proxy, and BB is a B2BUA.  The request
is going to fork from the proxy, arrive at the B2BUA, a _new_ (related
only internally to the B2BUA) call is then made to P and the tree grows
just as before.  It is not possible to detect the loop because the message
is not the same; it is a new transaction.  This new draft mentions nothing
about this, yet it is exactly the same problem.

Also, schemes such as these will only really protect against "friendly
fire" ... meaning it only really protects you against mis-configuration.
Anyone seriously out to destroy your proxy is going to at least not
forward on the headers such that they are detected as a loop.  You can't
assume that the malicious are ignorant.

The amplification problem can NOT be removed unless "you" are sending the
transaction to yourself.  That is the only way you can know that the
headers haven't been modified.

David


On Mon, Sep 11, 2006 at 06:10:39PM +0100, Pete Cordell wrote:
> I've reflected a bit more on this...
> 
> A question... is it possible to arrange that two (non-forking) proxies end 
> up bouncing a single request between them?  I would think it is.  In this 
> case, even though you don't get the combinatorial explosion that you do for 
> the forking case, I think a 1 to 70 amplification of messages is still 
> quite significant and worth protecting against.
> 
> So I think the various weighting should be, forking proxies MUST do loop 
> detection.  Other proxies SHOULD do loop detection (as opposed to MAY). 
> It's important that the draft explains a method to do loop detection in the 
> most general case (i.e. allowing for stateless proxies etc.), but 
> technically I don't think it even has to be RECOMMENDED strength.
> 
> It would be good if in some way the loop detection algorithm could be 
> normatively referenced so that it would be possible to say that such and 
> such an implementation fully implements and conforms to the loop detection 
> algorithm described in RFC XXXX, by just saying "implements RFC XXXX".  
> That might require two RFCs though; one to mandate/recommend loop 
> detection, and another to described the suggested loop detection algorithm. 
> That may be too much work for the small gain though!
> 
> Pete.
> --
> =============================================
> Pete Cordell
> Tech-Know-Ware Ltd
>                         for XML to C++ data binding visit
>                         http://www.tech-know-ware.com/lmx
>                         (or http://www.xml2cpp.com)
> =============================================
> 
> ----- Original Message ----- 
> From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
> To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>; "Juha Heinanen" 
> <jh@tutpro.com>
> Cc: <sip@ietf.org>
> Sent: Monday, September 11, 2006 8:01 AM
> Subject: Re: [Sip] loop fix
> 
> 
> >Juha,
> >
> >Loop detection currently works the way it does to accomodate stateless 
> >proxies. It is the least common denominator; it will also work for 
> >stateful proxies, so there is no need to define separate mechanisms to 
> >achieve the same goal. That is a benefit
> >
> >It is true that you can also detect loops by searching through existing 
> >state, with the aforementioned drawbacks that it won't work as well across 
> >reboots (I consider the performance of the lookup an implementation issue, 
> >it can be made efficient).
> >
> >For the forking scenario, the proxy must by definition be stateful. So one 
> >could use a lookup through existing state as a way to do loop detection. 
> >There is nothing in the draft that prevents this - hashing is RECOMMENDED, 
> >but nothing says you can't do it your way. In fact, loop detection is a 
> >completely local feature - a proxy only has to recognise its own detection 
> >mechanism. So as long as it keeps to standard RFC3261 syntax, there is not 
> >actually a need to standardize any particular mechanism - just stating 
> >that it MUST do loop detection is sufficient.
> >
> >What I personally don't like about the recommended mechanism, is the 
> >overloading of Via branches for both transaction id and loop detection. 
> >IMHO a much better solution is to separate the two; I personally use
> >
> >Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}
> >
> >And it would be nice if there were some way to detect if some proxy is 
> >doing loop detection or not. A separate parameter achieves this
> >
> >Regards,
> >
> >Jeroen
> >
> >----- Original Message ----- 
> >From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
> >To: "Juha Heinanen" <jh@tutpro.com>
> >Cc: <sip@ietf.org>
> >Sent: Monday, September 11, 2006 6:36 AM
> >Subject: Re: [Sip] loop fix
> >
> >
> >On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:
> >
> >>> (1) speed - if you have a large number of active transactions, then 
> >>> it's
> >>> almost certainly a lot faster to construct and compare a hash in X
> >>> number of via headers than search all the transactions received on
> >>> that particular transport.
> >>
> >>in some implementations this is true. if it is not true in all
> >>implementations, then the i-d should not give one SHOULD implementation
> >>solution.
> >
> >As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing it 
> >in
> >other ways if your particular situation requires it - but as most 'common'
> >implementations will worry about the things listed here, then SHOULD is 
> >the
> >right force for it in my opinion, as there are (as per rfc2119) "valid
> >reasons in particular circumstances to ignore a particular item, but the 
> >full
> >implications must be understood and carefully weighed before choosing a
> >different course."
> >
> >>> (2) resilience - a crashed proxy would still be able to perform loop
> >>> detection, even after loosing all of it's state - assuming it keeps
> >>> transactions in memory and not committed elsewhere before forwarding;
> >>
> >>this i don't quite understand. even if proxy looses all state, doesn't
> >>it rebuild that state next time it receives the looped request again and
> >>will detect the loop during the following round?
> >
> >Only after it looped again after crashing, and that assumes it's not 
> >already
> >crashed again since.  Given that the attack vector that the I-D is trying 
> >to
> >fix, i think it is sensible for it to catch a loop between crashes of an
> >element, too.
> >
> >fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a 
> >Network:
> >
> >  [...]
> >  It is interesting to note that a few proxies rebooted during
> >  the scenario, and rejoined in the attack when they restarted (as long
> >  as they maintained registration state across reboots).  This points
> >  out that if this attack were launched on the Internet at large, it
> >  might require coordination among all the affected elements to stop
> >  it.
> >
> >>> (3) scalability - loop may go through different proxies when load
> >>> balancing. KEeping the hash in the via header allows peer proxies to
> >>> detect and stop looped requests quicker than it would otherwise.
> >>
> >>this is not a valid reason, since if there are multiple proxies, they
> >>may be from different vendors and since there is no standardized way to
> >>calculate and add the hash into via header, one proxy cannot interpret
> >>the via header added by another proxy.
> >
> >indeed, with multiple vendors.  but none the less, it's a reason a proxy 
> >may
> >want to use Via hashes rather than internally (which is what you asked).
> >
> >~ Theo
> >
> >-- 
> >Theo P. Zourzouvillys
> >http://www.crazygreek.co.uk
> >theo@crazygreek.co.uk
> >
> >_______________________________________________
> >Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >This list is for NEW development of the core SIP Protocol
> >Use sip-implementors@cs.columbia.edu for questions on current sip
> >Use sipping@ietf.org for new developments on the application of sip
> >
> >_______________________________________________
> >Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >This list is for NEW development of the core SIP Protocol
> >Use sip-implementors@cs.columbia.edu for questions on current sip
> >Use sipping@ietf.org for new developments on the application of sip
> >
> 
> 
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

-- 
David.Benoit@InfoInteractive.com | phone: 902-832-2649  fax: 902-832-1015
 "Complex problems have simple, neat and wrong solutions" - H. L. Menken

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 14:06:30 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMq8i-0002dY-52; Mon, 11 Sep 2006 14:04:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMq8g-0002dN-BA
	for sip@ietf.org; Mon, 11 Sep 2006 14:04:10 -0400
Received: from nylon.softarmor.com ([66.135.38.164])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMq8f-0003yX-16
	for sip@ietf.org; Mon, 11 Sep 2006 14:04:10 -0400
Received: from [192.168.2.101] (rtp-isp-nat1.cisco.com [64.102.254.33])
	(authenticated bits=0)
	by nylon.softarmor.com (8.13.1/8.13.1) with ESMTP id k8BH6jDj031471
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Mon, 11 Sep 2006 12:06:46 -0500
In-Reply-To: <450563C3.80909@cisco.com>
References: <939B827E-F7D3-4D58-A9F2-92E879A0DAB2@nostrum.com>	<44EB7082.5010601@cisco.com>
	<54F82451-70EA-46C1-956A-429074445209@softarmor.com>
	<450563C3.80909@cisco.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <77D8769F-DC2C-424A-928F-8481038357A8@softarmor.com>
Content-Transfer-Encoding: 7bit
From: Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] Re: gruu-10 focused review comments
Date: Mon, 11 Sep 2006 13:04:01 -0500
To: Jonathan Rosenberg <jdrosen@cisco.com>
X-Mailer: Apple Mail (2.752.2)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0fa76816851382eb71b0a882ccdc29ac
Cc: IETF SIP List <sip@ietf.org>, sip-chairs@tools.ietf.org,
	Paul Kyzivat <pkyzivat@cisco.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


On Sep 11, 2006, at 8:25 AM, Jonathan Rosenberg wrote:


>> But we've already got people talking about redirecting or  
>> retargeting  requests that were sent to a GRUU -- perhaps in the  
>> UA, or perhaps in  some proxy.
>
> Err - that should be squarely in the category of 'dont do that'.  
> Can you point me to where that discussion is? I haven't noticed it.
>

I'd be happy putting that in the "don't do that" category.

>
>> And the GRUU, despite being "universally routable", isn't  
>> necessarily  reachable. It is just more likely to be reachable  
>> than the real Contact.
>
> Well, if the network is down its not reachable, sure. But the whole  
> point of the spec is that, assuming the network is working, it  
> *will* be delivered to that specific UA instance. I'm missing the  
> subtlety of what you are pointing out here.

Are there situations where a UA would play the same kind of "try-to- 
transform to something reachable" from GRUU and AOR that it might  
play today with Contact and AOR?

Restated:

Today we present Contact and AOR values. Some UAs either assume or  
discover that the Contact is unreachable, leading them to try to  
transform the AOR into a device-specific identifier for transactions  
requiring such an identifier.

Is there a situation in which UA might make similar decisions about a  
GRUU? For example, "I have thi GRUU, but it isn't working (perhaps  
temporarily) so I'll fall back to a modified AOR?"




>>>
>>>    For UACs that have been assuming the URIs in contact headers in
>>>    messages from others are globally routable there is no new  
>>> behavior
>>>    associated with sending a request to that URI when it is a GRUU.
>>>
>> I like the preceding.
>>>    However some UACs have been assuming that URIs in received  
>>> contact
>>>    headers are not globally routable, and using ad hoc techniques  
>>> when
>>>    targetting requests to them. (E.g. Using the To or From-URI  
>>> instead
>>>    of the contact URI, or sending a new request in-dialog when an
>>>    out-of-dialog request would otherwise be preferred.) A GRUU-aware
>>>    UAC SHOULD treat a URI containing a "gruu" URI-parameter as   
>>> globally
>>>    routable, and condition its actions accordingly, if it would
>>>    otherwise consider that URI to not be globally routable.
>>>
>> But the last sentence of the preceding lost me. It's a URI. Since  
>> I  know it is supposed to be a GRUU, I should try it before  
>> trying  tricky transforms on the other URIs I have available  
>> (including AOR).  But I might NOT actually be able to reach it.  
>> Are there still use  cases where I'm going to fall back and try  
>> something tricky?
>
> I think Paul answered this - yes. When the Contact doesn't have the  
> gruu param, you do something tricky.

I'm asking "Even if the Contact has the gruu param, will I need to do  
something tricky?"

--
Dean

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 14:40:12 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMqdT-0007mq-JC; Mon, 11 Sep 2006 14:35:59 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMqdR-0007lO-Mm
	for sip@ietf.org; Mon, 11 Sep 2006 14:35:57 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMqdO-0001Gp-3C
	for sip@ietf.org; Mon, 11 Sep 2006 14:35:57 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-1.cisco.com with ESMTP; 11 Sep 2006 11:35:54 -0700
X-IronPort-AV: i="4.09,146,1157353200"; 
	d="scan'208"; a="41080503:sNHT35617672"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BIZrD7028553; Mon, 11 Sep 2006 14:35:53 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8BIZpuI015359; 
	Mon, 11 Sep 2006 14:35:51 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 14:35:51 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 14:35:50 -0400
Message-ID: <4505AC86.6050001@cisco.com>
Date: Mon, 11 Sep 2006 14:35:50 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: David Benoit <benoit@infointeractive.com>
Subject: Re: [Sip] loop fix
References: <003001c6d570$13b99260$0601a8c0@BEMBUSTER>	<003301c6d5c5$38374e20$5000a8c0@RW>
	<20060911175201.GG19029@infointeractive.com>
In-Reply-To: <20060911175201.GG19029@infointeractive.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 18:35:50.0989 (UTC)
	FILETIME=[1B522FD0:01C6D5D1]
DKIM-Signature: a=rsa-sha1; q=dns; l=9773; t=1157999753; x=1158863753;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20loop=20fix
	|To:David=20Benoit=20<benoit@infointeractive.com>;
	X=v=3Dcisco.com=3B=20h=3DArK67HR9HZ/DG/+7xj8dvwH5p9U=3D;
	b=g1gR9Fudo/uoS4oqUEB706XXaP4brUFLw/tOl5hWcYwmERRpEr6xR11aofINaaWJVMzyLzuz
	57vrMRGBSpHGDiAV6AhccUzAy9SFagwM1wNzEv9FAhzW23Ul6s2s/oBs;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 17e5edc4dfd335965c1d21372171c01c
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

David,

Certainly it is possilbe to implement a scenario such as you show below.

Without loop detection and with Max-forwards of 70, such a thing will 
generate about 2^70 messages before max-forwards stops it. The 
difference compared to a non-b2bua case it that you will need 2^70-1 
b2bua call states to achieve this. It will presumably run out of 
capacity long before then.

This is of course a problem for B2BUAs. If we had any rules for them 
than we should probably require that they also implement loop detection.

	Paul

David Benoit wrote:
> I'm sorry, but I'm still not convinced that any of this is going to help.
> What, in any of this, prevents the following:
> 
>               A
>               |
>               P
>              / \
>             BB BB
>             |   |
>             P   P
> 
> Where A is a UA, P is a stateless proxy, and BB is a B2BUA.  The request
> is going to fork from the proxy, arrive at the B2BUA, a _new_ (related
> only internally to the B2BUA) call is then made to P and the tree grows
> just as before.  It is not possible to detect the loop because the message
> is not the same; it is a new transaction.  This new draft mentions nothing
> about this, yet it is exactly the same problem.
> 
> Also, schemes such as these will only really protect against "friendly
> fire" ... meaning it only really protects you against mis-configuration.
> Anyone seriously out to destroy your proxy is going to at least not
> forward on the headers such that they are detected as a loop.  You can't
> assume that the malicious are ignorant.
> 
> The amplification problem can NOT be removed unless "you" are sending the
> transaction to yourself.  That is the only way you can know that the
> headers haven't been modified.
> 
> David
> 
> 
> On Mon, Sep 11, 2006 at 06:10:39PM +0100, Pete Cordell wrote:
>> I've reflected a bit more on this...
>>
>> A question... is it possible to arrange that two (non-forking) proxies end 
>> up bouncing a single request between them?  I would think it is.  In this 
>> case, even though you don't get the combinatorial explosion that you do for 
>> the forking case, I think a 1 to 70 amplification of messages is still 
>> quite significant and worth protecting against.
>>
>> So I think the various weighting should be, forking proxies MUST do loop 
>> detection.  Other proxies SHOULD do loop detection (as opposed to MAY). 
>> It's important that the draft explains a method to do loop detection in the 
>> most general case (i.e. allowing for stateless proxies etc.), but 
>> technically I don't think it even has to be RECOMMENDED strength.
>>
>> It would be good if in some way the loop detection algorithm could be 
>> normatively referenced so that it would be possible to say that such and 
>> such an implementation fully implements and conforms to the loop detection 
>> algorithm described in RFC XXXX, by just saying "implements RFC XXXX".  
>> That might require two RFCs though; one to mandate/recommend loop 
>> detection, and another to described the suggested loop detection algorithm. 
>> That may be too much work for the small gain though!
>>
>> Pete.
>> --
>> =============================================
>> Pete Cordell
>> Tech-Know-Ware Ltd
>>                         for XML to C++ data binding visit
>>                         http://www.tech-know-ware.com/lmx
>>                         (or http://www.xml2cpp.com)
>> =============================================
>>
>> ----- Original Message ----- 
>> From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
>> To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>; "Juha Heinanen" 
>> <jh@tutpro.com>
>> Cc: <sip@ietf.org>
>> Sent: Monday, September 11, 2006 8:01 AM
>> Subject: Re: [Sip] loop fix
>>
>>
>>> Juha,
>>>
>>> Loop detection currently works the way it does to accomodate stateless 
>>> proxies. It is the least common denominator; it will also work for 
>>> stateful proxies, so there is no need to define separate mechanisms to 
>>> achieve the same goal. That is a benefit
>>>
>>> It is true that you can also detect loops by searching through existing 
>>> state, with the aforementioned drawbacks that it won't work as well across 
>>> reboots (I consider the performance of the lookup an implementation issue, 
>>> it can be made efficient).
>>>
>>> For the forking scenario, the proxy must by definition be stateful. So one 
>>> could use a lookup through existing state as a way to do loop detection. 
>>> There is nothing in the draft that prevents this - hashing is RECOMMENDED, 
>>> but nothing says you can't do it your way. In fact, loop detection is a 
>>> completely local feature - a proxy only has to recognise its own detection 
>>> mechanism. So as long as it keeps to standard RFC3261 syntax, there is not 
>>> actually a need to standardize any particular mechanism - just stating 
>>> that it MUST do loop detection is sufficient.
>>>
>>> What I personally don't like about the recommended mechanism, is the 
>>> overloading of Via branches for both transaction id and loop detection. 
>>> IMHO a much better solution is to separate the two; I personally use
>>>
>>> Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}
>>>
>>> And it would be nice if there were some way to detect if some proxy is 
>>> doing loop detection or not. A separate parameter achieves this
>>>
>>> Regards,
>>>
>>> Jeroen
>>>
>>> ----- Original Message ----- 
>>> From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
>>> To: "Juha Heinanen" <jh@tutpro.com>
>>> Cc: <sip@ietf.org>
>>> Sent: Monday, September 11, 2006 6:36 AM
>>> Subject: Re: [Sip] loop fix
>>>
>>>
>>> On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:
>>>
>>>>> (1) speed - if you have a large number of active transactions, then 
>>>>> it's
>>>>> almost certainly a lot faster to construct and compare a hash in X
>>>>> number of via headers than search all the transactions received on
>>>>> that particular transport.
>>>> in some implementations this is true. if it is not true in all
>>>> implementations, then the i-d should not give one SHOULD implementation
>>>> solution.
>>> As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing it 
>>> in
>>> other ways if your particular situation requires it - but as most 'common'
>>> implementations will worry about the things listed here, then SHOULD is 
>>> the
>>> right force for it in my opinion, as there are (as per rfc2119) "valid
>>> reasons in particular circumstances to ignore a particular item, but the 
>>> full
>>> implications must be understood and carefully weighed before choosing a
>>> different course."
>>>
>>>>> (2) resilience - a crashed proxy would still be able to perform loop
>>>>> detection, even after loosing all of it's state - assuming it keeps
>>>>> transactions in memory and not committed elsewhere before forwarding;
>>>> this i don't quite understand. even if proxy looses all state, doesn't
>>>> it rebuild that state next time it receives the looped request again and
>>>> will detect the loop during the following round?
>>> Only after it looped again after crashing, and that assumes it's not 
>>> already
>>> crashed again since.  Given that the attack vector that the I-D is trying 
>>> to
>>> fix, i think it is sensible for it to catch a loop between crashes of an
>>> element, too.
>>>
>>> fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a 
>>> Network:
>>>
>>>  [...]
>>>  It is interesting to note that a few proxies rebooted during
>>>  the scenario, and rejoined in the attack when they restarted (as long
>>>  as they maintained registration state across reboots).  This points
>>>  out that if this attack were launched on the Internet at large, it
>>>  might require coordination among all the affected elements to stop
>>>  it.
>>>
>>>>> (3) scalability - loop may go through different proxies when load
>>>>> balancing. KEeping the hash in the via header allows peer proxies to
>>>>> detect and stop looped requests quicker than it would otherwise.
>>>> this is not a valid reason, since if there are multiple proxies, they
>>>> may be from different vendors and since there is no standardized way to
>>>> calculate and add the hash into via header, one proxy cannot interpret
>>>> the via header added by another proxy.
>>> indeed, with multiple vendors.  but none the less, it's a reason a proxy 
>>> may
>>> want to use Via hashes rather than internally (which is what you asked).
>>>
>>> ~ Theo
>>>
>>> -- 
>>> Theo P. Zourzouvillys
>>> http://www.crazygreek.co.uk
>>> theo@crazygreek.co.uk
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
>>
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 14:58:41 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMqx4-0008E3-El; Mon, 11 Sep 2006 14:56:14 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMqx3-0008Du-A7
	for sip@ietf.org; Mon, 11 Sep 2006 14:56:13 -0400
Received: from smtp3.wanadoo.co.uk ([193.252.22.156] helo=smtp3.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMqx1-0004FT-WB
	for sip@ietf.org; Mon, 11 Sep 2006 14:56:13 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3214.me.freeserve.com (SMTP Server) with ESMTP id 70653800008B; 
	Mon, 11 Sep 2006 20:56:11 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3214.me.freeserve.com (SMTP Server) with SMTP id 2BA3D8000086; 
	Mon, 11 Sep 2006 20:56:11 +0200 (CEST)
X-ME-UUID: 20060911185611179.2BA3D8000086@mwinf3214.me.freeserve.com
Message-ID: <001201c6d5d3$f35138c0$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Juha Heinanen" <jh@tutpro.com>
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi><200609100943.41939.theo@crazygreek.co.uk><17668.11164.638763.876307@rautu.tutpro.com><200609110536.44472.theo@crazygreek.co.uk><003001c6d570$13b99260$0601a8c0@BEMBUSTER><003301c6d5c5$38374e20$5000a8c0@RW>
	<17669.40285.908627.423818@rautu.tutpro.com>
Subject: Re: [Sip] loop fix
Date: Mon, 11 Sep 2006 19:56:06 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 1.9 (+)
X-Scan-Signature: 8abaac9e10c826e8252866cbe6766464
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

----- Message From: "Juha Heinanen"

> Pete Cordell writes:
>
> > I think a 1 to 70 amplification of messages is
> > still quite significant and worth protecting against.
>
> i agree.  where does 70 come from?  smells like yet another IMS
> requirement :-) i have never seen even 20 "Received from" headers in
> email messages and ip ttl is 32.


The 70 I'm referring to is the default initial value of Max-Forwards (which 
leads to the 2^70 number being mentioned in the loop-fix draft).

As to why it is 70 and not some smaller value, I'm not sure.  The earliest 
reference I've found is comments about 2543-bis-06 where Jo Hornsby 
describes it as a "magically random figure"! 
(http://www1.ietf.org/mail-archive/web/sip/current/msg03463.html)  Had the 
IMS crowd infiltrated the ranks then? :-)

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 15:14:09 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMrC2-0006SN-KU; Mon, 11 Sep 2006 15:11:42 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMrC1-0006SI-97
	for sip@ietf.org; Mon, 11 Sep 2006 15:11:41 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMrBy-000723-V7
	for sip@ietf.org; Mon, 11 Sep 2006 15:11:41 -0400
Received: from sj-dkim-6.cisco.com ([171.68.10.81])
	by sj-iport-5.cisco.com with ESMTP; 11 Sep 2006 12:11:39 -0700
X-IronPort-AV: i="4.09,146,1157353200"; 
	d="scan'208"; a="319945813:sNHT31738064"
Received: from sj-core-3.cisco.com (sj-core-3.cisco.com [171.68.223.137])
	by sj-dkim-6.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BJBcgG008124; Mon, 11 Sep 2006 12:11:38 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-3.cisco.com (8.12.10/8.12.6) with ESMTP id k8BJBawB027538;
	Mon, 11 Sep 2006 12:11:37 -0700 (PDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 15:11:37 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 15:11:36 -0400
Message-ID: <4505B4E8.4040709@cisco.com>
Date: Mon, 11 Sep 2006 15:11:36 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] loop fix
References: <041001c6d37d$261a2c20$4101a8c0@Kasturi>	<200609100943.41939.theo@crazygreek.co.uk>	<17668.11164.638763.876307@rautu.tutpro.com>	<200609110536.44472.theo@crazygreek.co.uk>	<003001c6d570$13b99260$0601a8c0@BEMBUSTER>	<003301c6d5c5$38374e20$5000a8c0@RW>
	<17669.40285.908627.423818@rautu.tutpro.com>
In-Reply-To: <17669.40285.908627.423818@rautu.tutpro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 19:11:37.0023 (UTC)
	FILETIME=[1A74FCF0:01C6D5D6]
DKIM-Signature: a=rsa-sha1; q=dns; l=813; t=1158001898; x=1158865898;
	c=relaxed/simple; s=sjdkim6002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20loop=20fix;
	X=v=3Dcisco.com=3B=20h=3DArK67HR9HZ/DG/+7xj8dvwH5p9U=3D;
	b=OctE0cYwx0mBXG1qF2rS8krgXTiganXcsOJkNg/zKnFkJP13FNGebmKqKbiST3BDqalfPICq
	PadgJ2M102gSGqFlUZSJy5d98zF1vUSdKX9wM9rYCL3B8iltIkbDuRXp;
Authentication-Results: sj-dkim-6.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 798b2e660f1819ae38035ac1d8d5e3ab
Cc: sip@ietf.org, Pete Cordell <pete@tech-know-ware.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Juha Heinanen wrote:
> Pete Cordell writes:
> 
>  > I think a 1 to 70 amplification of messages is
>  > still quite significant and worth protecting against.
> 
> i agree.  where does 70 come from?  smells like yet another IMS
> requirement :-) i have never seen even 20 "Received from" headers in
> email messages and ip ttl is 32.

I'm pretty sure the primary authors of 3261 would not have chosen this 
value based on IMS, even if IMS had been making requests back then.

As I recall, when this first came up at SipIt, it turned out that 
*every* implementation present used Max-Forwards:20 as the initial 
value. Nobody knew how that happened, since there has been nothing 
written that suggested that value. But even the "small" value of 2^20 
was plenty to swamp the network.

	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 15:24:30 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMrMA-00020D-2T; Mon, 11 Sep 2006 15:22:10 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMrM8-0001vr-PJ
	for sip@ietf.org; Mon, 11 Sep 2006 15:22:08 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMrM7-0007ki-Cr
	for sip@ietf.org; Mon, 11 Sep 2006 15:22:08 -0400
Received: from sj-dkim-8.cisco.com ([171.68.10.93])
	by sj-iport-5.cisco.com with ESMTP; 11 Sep 2006 12:21:51 -0700
X-IronPort-AV: i="4.09,146,1157353200"; 
	d="scan'208"; a="319948634:sNHT45738921428"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-8.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BJLo7k004266 for <sip@ietf.org>; Mon, 11 Sep 2006 12:21:50 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8BJLn6W020786
	for <sip@ietf.org>; Mon, 11 Sep 2006 12:21:50 -0700 (PDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 15:21:49 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 15:21:49 -0400
Message-ID: <4505B74C.90506@cisco.com>
Date: Mon, 11 Sep 2006 15:21:48 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] draft-ietf-sip-gruu-10 comments
References: <285E7350-8C4F-4A92-8E1E-3BFAC67CC8EC@cisco.com>
In-Reply-To: <285E7350-8C4F-4A92-8E1E-3BFAC67CC8EC@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 19:21:49.0195 (UTC)
	FILETIME=[875705B0:01C6D5D7]
DKIM-Signature: a=rsa-sha1; q=dns; l=1205; t=1158002510; x=1158866510;
	c=relaxed/relaxed; s=sjdkim8002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20draft-ietf-sip-gruu-10=20comments;
	X=v=3Dcisco.com=3B=20h=3DpxVSc3rcbO3d4rtZolIqDUu8ECg=3D;
	b=OCcDOkMYfTM67dzGMHEJaxNArQI0FU/zl4EZ4Hh6wuQKvsUYMrH0yboB8yf+ZBRl+dOzvBVb
	WVlRD14TdtkBGOK0Xyizr1Bd8xaDOD7yr9uqMiWAmTFhgxS8Dhgg00Pw;
Authentication-Results: sj-dkim-8.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9466e0365fc95844abaf7c3f15a05c7d
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Cullen Jennings wrote:

> Section 8.2.2
> 
> I think I am likely confused here. I basically don't see why a simple 
> classic sip trapezoid deployment would ever need to Record Route. The 
> fact that the GRUU refereed to the "home" domain would cause it work get 
> back here. As a side note, I find the terms "home", "edge" etc very 
> undefined outside the IMS context. Anyways, I believe this section might 
> be all right but I am failing to understand what needs to be done and 
> why. If I was a non IMS proxy implementer, I suspect I would just ignore 
> this whole section.

*If* the topology is a simple trapezoid then I think you are correct.

But if there is a proxy before the originating home proxy, or after the 
terminating home proxy, then the R-R is needed to prevent a spiral.

On the originating side, this can be determined by whether there is a 
R-R present when the request arrives at the originating home proxy. On 
the terminating side that doesn't work, because the potential R-R hasn't 
happened yet, and you can't know in advance if it will happen.

So the problem is that you don't need it in a trapezoid, but you don't 
know if you have a trapezoid.

	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 15:30:56 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMrSV-0005ZE-4Z; Mon, 11 Sep 2006 15:28:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMrST-0005Z9-J6
	for sip@ietf.org; Mon, 11 Sep 2006 15:28:41 -0400
Received: from sccrmhc14.comcast.net ([63.240.77.84])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMrSS-0008E1-C5
	for sip@ietf.org; Mon, 11 Sep 2006 15:28:41 -0400
Received: from s73602
	(66-78-217-252.washingtondc.smartcity.com?[66.78.217.252])
	by comcast.net (sccrmhc14) with SMTP
	id <20060911192840014007ttbbe>; Mon, 11 Sep 2006 19:28:40 +0000
Message-ID: <03ae01c6d5d8$3c6a75e0$250015ac@china.huawei.com>
From: "Spencer Dawkins" <spencer@mcsr-labs.org>
To: "IETF SIP List" <sip@ietf.org>
References: <939B827E-F7D3-4D58-A9F2-92E879A0DAB2@nostrum.com>	<44EB7082.5010601@cisco.com><54F82451-70EA-46C1-956A-429074445209@softarmor.com><450563C3.80909@cisco.com>
	<77D8769F-DC2C-424A-928F-8481038357A8@softarmor.com>
Subject: Re: [Sip] Re: gruu-10 focused review comments
Date: Mon, 11 Sep 2006 15:26:52 -0400
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 4adaf050708fb13be3316a9eee889caa
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

>> Well, if the network is down its not reachable, sure. But the whole 
>> point of the spec is that, assuming the network is working, it  *will* be 
>> delivered to that specific UA instance. I'm missing the  subtlety of what 
>> you are pointing out here.
>
> Are there situations where a UA would play the same kind of "try-to- 
> transform to something reachable" from GRUU and AOR that it might  play 
> today with Contact and AOR?
>
> Restated:
>
> Today we present Contact and AOR values. Some UAs either assume or 
> discover that the Contact is unreachable, leading them to try to 
> transform the AOR into a device-specific identifier for transactions 
> requiring such an identifier.
>
> Is there a situation in which UA might make similar decisions about a 
> GRUU? For example, "I have this GRUU, but it isn't working (perhaps 
> temporarily) so I'll fall back to a modified AOR?"

My apologies in advance if this isn't a reasonable response, but ...

Given that we already have

   a GRUU that's trying to make up for a Contact
   that isn't working,

could we call an end to this spiraling madness instead of trying to come up 
with

   a something that's trying to make up for
      a GRUU that's trying to make up for a Contact
      that isn't working
   that isn't working?

This last sentence sounds way too much like the beginning of a North 
American children's song ("there was an old lady who swallowed a fly", at 
http://www.niehs.nih.gov/kids/lyrics/oldlady.htm).

"If you came up with a GRUU that doesn't work, but something else would 
have, maybe you should be thinking about why your GRUU doesn't work..."

Thanks,

Spencer 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 16:49:54 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMser-0000TD-Gg; Mon, 11 Sep 2006 16:45:33 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMsep-0000Qm-Rz
	for sip@ietf.org; Mon, 11 Sep 2006 16:45:31 -0400
Received: from mail.infointeractive.com ([207.231.225.15]
	helo=smtp.infointeractive.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMseo-0000XL-9U
	for sip@ietf.org; Mon, 11 Sep 2006 16:45:31 -0400
Received: from eng.infointeractive.com ([10.142.0.50]:48467 "EHLO
	eng.infointeractive.com") by mail.infointeractive.com with ESMTP
	id S888095AbWIKUpV (ORCPT <rfc822;sip@ietf.org>);
	Mon, 11 Sep 2006 17:45:21 -0300
Received: from localhost (user: 'benoit', uid#6008) by eng.infointeractive.com
	id <105614-14287>; Mon, 11 Sep 2006 17:45:05 -0300
Date: Mon, 11 Sep 2006 17:45:05 -0300
From: David Benoit <benoit@infointeractive.com>
To: Paul Kyzivat <pkyzivat@cisco.com>
Subject: Re: [Sip] loop fix
Message-ID: <20060911204505.GI19029@infointeractive.com>
References: <003001c6d570$13b99260$0601a8c0@BEMBUSTER>
	<003301c6d5c5$38374e20$5000a8c0@RW>
	<20060911175201.GG19029@infointeractive.com>
	<4505AC86.6050001@cisco.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <4505AC86.6050001@cisco.com>
User-Agent: Mutt/1.4.2.1i
X-Spam-Score: 0.0 (/)
X-Scan-Signature: f2728948111f2edaaf8980b5b9de55af
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I think you may have missed my point.  The B2BUA would be in every segment
of the loop, inserted.  The tree would still grow to n^Max_Forwards (where
n is the number of forks... which I have had cause to have as many as 8).
My point is that loop detection doesn't work here.  At no stage of the
"looping" (which, would be better called an infinite "spiral") can you
detect that it is the same message.

As I said earlier, it can _only_ _always_ work if you end up sending it to
yourself, which you should be able to detect _before_ you send it.

There has to be better protection against such escalation.  But what?

David

On Mon, Sep 11, 2006 at 02:35:50PM -0400, Paul Kyzivat wrote:
> David,
> 
> Certainly it is possilbe to implement a scenario such as you show below.
> 
> Without loop detection and with Max-forwards of 70, such a thing will 
> generate about 2^70 messages before max-forwards stops it. The 
> difference compared to a non-b2bua case it that you will need 2^70-1 
> b2bua call states to achieve this. It will presumably run out of 
> capacity long before then.
> 
> This is of course a problem for B2BUAs. If we had any rules for them 
> than we should probably require that they also implement loop detection.
> 
> 	Paul
> 
> David Benoit wrote:
> >I'm sorry, but I'm still not convinced that any of this is going to help.
> >What, in any of this, prevents the following:
> >
> >              A
> >              |
> >              P
> >             / \
> >            BB BB
> >            |   |
> >            P   P
> >
> >Where A is a UA, P is a stateless proxy, and BB is a B2BUA.  The request
> >is going to fork from the proxy, arrive at the B2BUA, a _new_ (related
> >only internally to the B2BUA) call is then made to P and the tree grows
> >just as before.  It is not possible to detect the loop because the message
> >is not the same; it is a new transaction.  This new draft mentions nothing
> >about this, yet it is exactly the same problem.
> >
> >Also, schemes such as these will only really protect against "friendly
> >fire" ... meaning it only really protects you against mis-configuration.
> >Anyone seriously out to destroy your proxy is going to at least not
> >forward on the headers such that they are detected as a loop.  You can't
> >assume that the malicious are ignorant.
> >
> >The amplification problem can NOT be removed unless "you" are sending the
> >transaction to yourself.  That is the only way you can know that the
> >headers haven't been modified.
> >
> >David
> >
> >
> >On Mon, Sep 11, 2006 at 06:10:39PM +0100, Pete Cordell wrote:
> >>I've reflected a bit more on this...
> >>
> >>A question... is it possible to arrange that two (non-forking) proxies 
> >>end up bouncing a single request between them?  I would think it is.  In 
> >>this case, even though you don't get the combinatorial explosion that you 
> >>do for the forking case, I think a 1 to 70 amplification of messages is 
> >>still quite significant and worth protecting against.
> >>
> >>So I think the various weighting should be, forking proxies MUST do loop 
> >>detection.  Other proxies SHOULD do loop detection (as opposed to MAY). 
> >>It's important that the draft explains a method to do loop detection in 
> >>the most general case (i.e. allowing for stateless proxies etc.), but 
> >>technically I don't think it even has to be RECOMMENDED strength.
> >>
> >>It would be good if in some way the loop detection algorithm could be 
> >>normatively referenced so that it would be possible to say that such and 
> >>such an implementation fully implements and conforms to the loop 
> >>detection algorithm described in RFC XXXX, by just saying "implements RFC 
> >>XXXX".  That might require two RFCs though; one to mandate/recommend loop 
> >>detection, and another to described the suggested loop detection 
> >>algorithm. That may be too much work for the small gain though!
> >>
> >>Pete.
> >>--
> >>=============================================
> >>Pete Cordell
> >>Tech-Know-Ware Ltd
> >>                        for XML to C++ data binding visit
> >>                        http://www.tech-know-ware.com/lmx
> >>                        (or http://www.xml2cpp.com)
> >>=============================================
> >>
> >>----- Original Message ----- 
> >>From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
> >>To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>; "Juha Heinanen" 
> >><jh@tutpro.com>
> >>Cc: <sip@ietf.org>
> >>Sent: Monday, September 11, 2006 8:01 AM
> >>Subject: Re: [Sip] loop fix
> >>
> >>
> >>>Juha,
> >>>
> >>>Loop detection currently works the way it does to accomodate stateless 
> >>>proxies. It is the least common denominator; it will also work for 
> >>>stateful proxies, so there is no need to define separate mechanisms to 
> >>>achieve the same goal. That is a benefit
> >>>
> >>>It is true that you can also detect loops by searching through existing 
> >>>state, with the aforementioned drawbacks that it won't work as well 
> >>>across reboots (I consider the performance of the lookup an 
> >>>implementation issue, it can be made efficient).
> >>>
> >>>For the forking scenario, the proxy must by definition be stateful. So 
> >>>one could use a lookup through existing state as a way to do loop 
> >>>detection. There is nothing in the draft that prevents this - hashing is 
> >>>RECOMMENDED, but nothing says you can't do it your way. In fact, loop 
> >>>detection is a completely local feature - a proxy only has to recognise 
> >>>its own detection mechanism. So as long as it keeps to standard RFC3261 
> >>>syntax, there is not actually a need to standardize any particular 
> >>>mechanism - just stating that it MUST do loop detection is sufficient.
> >>>
> >>>What I personally don't like about the recommended mechanism, is the 
> >>>overloading of Via branches for both transaction id and loop detection. 
> >>>IMHO a much better solution is to separate the two; I personally use
> >>>
> >>>Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}
> >>>
> >>>And it would be nice if there were some way to detect if some proxy is 
> >>>doing loop detection or not. A separate parameter achieves this
> >>>
> >>>Regards,
> >>>
> >>>Jeroen
> >>>
> >>>----- Original Message ----- 
> >>>From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
> >>>To: "Juha Heinanen" <jh@tutpro.com>
> >>>Cc: <sip@ietf.org>
> >>>Sent: Monday, September 11, 2006 6:36 AM
> >>>Subject: Re: [Sip] loop fix
> >>>
> >>>
> >>>On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:
> >>>
> >>>>>(1) speed - if you have a large number of active transactions, then 
> >>>>>it's
> >>>>>almost certainly a lot faster to construct and compare a hash in X
> >>>>>number of via headers than search all the transactions received on
> >>>>>that particular transport.
> >>>>in some implementations this is true. if it is not true in all
> >>>>implementations, then the i-d should not give one SHOULD implementation
> >>>>solution.
> >>>As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing 
> >>>it in
> >>>other ways if your particular situation requires it - but as most 
> >>>'common'
> >>>implementations will worry about the things listed here, then SHOULD is 
> >>>the
> >>>right force for it in my opinion, as there are (as per rfc2119) "valid
> >>>reasons in particular circumstances to ignore a particular item, but the 
> >>>full
> >>>implications must be understood and carefully weighed before choosing a
> >>>different course."
> >>>
> >>>>>(2) resilience - a crashed proxy would still be able to perform loop
> >>>>>detection, even after loosing all of it's state - assuming it keeps
> >>>>>transactions in memory and not committed elsewhere before forwarding;
> >>>>this i don't quite understand. even if proxy looses all state, doesn't
> >>>>it rebuild that state next time it receives the looped request again and
> >>>>will detect the loop during the following round?
> >>>Only after it looped again after crashing, and that assumes it's not 
> >>>already
> >>>crashed again since.  Given that the attack vector that the I-D is 
> >>>trying to
> >>>fix, i think it is sensible for it to catch a loop between crashes of an
> >>>element, too.
> >>>
> >>>fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a 
> >>>Network:
> >>>
> >>> [...]
> >>> It is interesting to note that a few proxies rebooted during
> >>> the scenario, and rejoined in the attack when they restarted (as long
> >>> as they maintained registration state across reboots).  This points
> >>> out that if this attack were launched on the Internet at large, it
> >>> might require coordination among all the affected elements to stop
> >>> it.
> >>>
> >>>>>(3) scalability - loop may go through different proxies when load
> >>>>>balancing. KEeping the hash in the via header allows peer proxies to
> >>>>>detect and stop looped requests quicker than it would otherwise.
> >>>>this is not a valid reason, since if there are multiple proxies, they
> >>>>may be from different vendors and since there is no standardized way to
> >>>>calculate and add the hash into via header, one proxy cannot interpret
> >>>>the via header added by another proxy.
> >>>indeed, with multiple vendors.  but none the less, it's a reason a proxy 
> >>>may
> >>>want to use Via hashes rather than internally (which is what you asked).
> >>>
> >>>~ Theo
> >>>
> >>>-- 
> >>>Theo P. Zourzouvillys
> >>>http://www.crazygreek.co.uk
> >>>theo@crazygreek.co.uk
> >>>
> >>>_______________________________________________
> >>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >>>This list is for NEW development of the core SIP Protocol
> >>>Use sip-implementors@cs.columbia.edu for questions on current sip
> >>>Use sipping@ietf.org for new developments on the application of sip
> >>>
> >>>_______________________________________________
> >>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >>>This list is for NEW development of the core SIP Protocol
> >>>Use sip-implementors@cs.columbia.edu for questions on current sip
> >>>Use sipping@ietf.org for new developments on the application of sip
> >>>
> >>
> >>
> >>_______________________________________________
> >>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >>This list is for NEW development of the core SIP Protocol
> >>Use sip-implementors@cs.columbia.edu for questions on current sip
> >>Use sipping@ietf.org for new developments on the application of sip
> >

-- 
David.Benoit@InfoInteractive.com | phone: 902-832-2649  fax: 902-832-1015
 "Complex problems have simple, neat and wrong solutions" - H. L. Menken

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 17:21:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMtAK-00053p-VN; Mon, 11 Sep 2006 17:18:04 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMtAJ-00053O-I7
	for sip@ietf.org; Mon, 11 Sep 2006 17:18:03 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMtAG-0006jp-JP
	for sip@ietf.org; Mon, 11 Sep 2006 17:18:03 -0400
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 11 Sep 2006 14:18:00 -0700
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8BLI0s2003343 for <sip@ietf.org>; Mon, 11 Sep 2006 14:18:00 -0700
Received: from xbh-sjc-211.amer.cisco.com (xbh-sjc-211.cisco.com
	[171.70.151.144])
	by sj-core-5.cisco.com (8.12.10/8.12.6) with ESMTP id k8BLHx1E016103
	for <sip@ietf.org>; Mon, 11 Sep 2006 14:17:59 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 14:17:59 -0700
Received: from [10.32.241.146] ([10.32.241.146]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 11 Sep 2006 14:17:59 -0700
Message-ID: <4505D286.7090105@cisco.com>
Date: Mon, 11 Sep 2006 17:17:58 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: IETF SIP List <sip@ietf.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Sep 2006 21:17:59.0441 (UTC)
	FILETIME=[C1EE2810:01C6D5E7]
DKIM-Signature: a=rsa-sha1; q=dns; l=9260; t=1158009480; x=1158873480;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DMJkOoI6lCXQelVeJeE/KHYMwKuQ=3D;
	b=SxCAM7xymafbK89lyg0YyDCl9sZUixzsJWXjzqlvRZY6YB+/N4wXZ3wuLrAQKiTAE+Kj5qqG
	1hoR5IQwPCjhqBkZ9kMyJSWDgieDrqPfRwbbhmBYtf93QRipn6v8Ewmt;
Authentication-Results: sj-dkim-2.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 86f85b2f88b0d50615aed44a7f9e33c7
Subject: [Sip] GRUU and Anonymity
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Several folks got together to discuss the review comments on the GRUU 
spec. Much of the time was spent discussing the issue of anonymity.

Today, GRUU doesn't provide any anonymity functions at all. Indeed, the 
recommendations for construction of gruus are such that they would 
contain the users AOR. So, if a user wants to make an anonymous call, 
what would they do? The GRUU spec says nothing about this, and 
unfortunately the answer is that they cannot use the GRUU specification 
at all.

The point was raised that there were many places, such as Europe, where 
anonymous calls are the norm. This is because privacy laws require that 
caller ID be given out as an opt-in feature, and the default is privacy. 
This results in a very large percentage of calls being anonymous. In 
these kinds of situations, GRUU would never get used, and the problems 
it solves (like making transfer work) won't be applicable.

A similar problem arises in network deployments which utilize network 
signaled privacy (in other words, the phone doesn't know the call is 
anonymous, but the network does). To support these kinds of deployments, 
the UA has to act as if every call was anonymous. This is how 3gpp is 
currently spec'd out, and it would make it very difficult to apply GRUU 
into 3gpp.

Thus, the concern was raised that a GRUU specification that didn't 
address anonymity at all was undeployable in many locales and unusable 
by many potential SDO customers. The question, then, is can it be 
addressed in this spec, and at what cost?

Unfortunately, anonymity is a big, thorny and hard problem. Indeed, 
there are many different types of anonymity. Consequently, I think its 
worth looking at a few different properties and seeing what the cost 
would be to add them to the GRUU spec.

Pseudonymity
------------

One feature that can be provided is pseudonymity. The idea is that the 
registrar, when it first creates a GRUU for an AOR/insteance-ID pair, 
actually would create two. One is the 'normal' one (generally 
constructed by adding an opaque parameter to the AOR), and another is a 
pseudonym for the GRUU:

sip:jdrosen@cisco.com;gruu;opaque=9asd8bvghasd8
sip:9ujjkasd--998@cisco.com;gruu

Both the pseudonym and the regular GRUU would be returned in the 
REGISTER response. The pseudonym would have the same temporal lifetime 
as the regular GRUU. The pseudonym can easily be constructed by 
encrypting the AOR and instance ID, or it can be computed and stored 
statefully.

The pseudonym would have the property that one could not, by inspection, 
determine the AOR. However, the pseudonym persists indefinitely, and 
consequently, two subsequent calls from the same UA instance would be 
known as coming from the same UA instance. Also, a recipient of the 
pseudonym could call the user back, at that instance, at any time in the 
future.

Adding this pseudonymity feature to GRUU is relatively low cost, in 
terms of complexity and time delay. I believe it would require the 
addition of one feature from:

http://www.ietf.org/internet-drafts/draft-rosenberg-sip-identity-coexistence-00.txt

namely, the user=anonymous URI parameter, so that a recipient knows to 
not try to render sip:9ujjkasd--998@cisco.com.


Temporal Privacy
----------------

There is probably a better name for this feature, but for now I'll call 
it temporal privacy.

The idea is that the Contact header field contains a pseudonym. The UA 
at the other end of the call can use that pseudonym for a certain 
duration. After that duration expires, the pseudonym is invalid. Being 
invalid means that any entity which makes a call to that URI, will not 
cause the phone to ring and the call will not succeed.

The most useful temporal scope is for the lifetime of the dialog. This 
is particularly useful for transfer and KPML, where that is exactly the 
desired temporal scope. However, other scopes could be possible. Indeed, 
another application of GRUU is in a call center, where you could call 
back the specific help desk person who you just talked to, without 
knowing their identity. This would work best with a temporal validity 
that is something like an hour or so, and possibly even longer.

This is most easily implemented in the UA. Consider temporal privacy 
with a scope equal to the lifetime of a dialog. The UA would obtain a 
psedononymous GRUU as above, and then add a unique grid parameter for 
each distinct dialog. When the UA receives a request that was targeted 
towards that GRUU, it will know the grid that was used. If the 
corresponding dialog is still in progress, the request is accepted. If 
not, the request is rejected with a 403.

Pushing the validity checking into the network is harder, since it would 
require proxies to retain dialog statefulness, store the correlation 
between grid and dialog, and know that the desired temporal scope of the 
anonymity is indeed for a dialog. No doubt some folks who like B2BUAs 
would be more than happy to do this.

Adding this feature to the UA is relatively low cost (in terms of 
specification work).

Note that, even though the grid would rotate on each call, the rest of 
the pseudononymous GRUU would not. This makes it easily to correlate. 
Thus, if Bob makes a call to Carol one day, and again to Carol the next 
day, Carol will know that this was the same person that called on the 
day previous.

Serial Pseudonymity
-------------------

With serial pseudonymity, the UA would be able to get multiple 
pseudonyms, and use a different one for each dialog. The pseudonyms 
could not be correlated together, except that they come from the same 
domain. Serial pseudonymity is orthogonal to temporal privacy. Each of 
the pseudonyms can have any temporal lifetime that is desired. The most 
obvious lifetime is to bind the validity to that of the dialog the 
pseudonym is used in. This would allow a UA to have a different GRUU
for each call, and for that GRUU only to be usable during the duration 
of the call.

Serial pseudonymity is harder to address. The TRUU draft:
http://www.ietf.org/internet-drafts/draft-jbemmel-sip-truu-02.txt
takes a stab at this. Any solution to this problem needs to deal with 
the question of how the UA instance gets a new pseudonym (the TRUU spec 
proposes a REGISTER with a new Contact URI) and what its validity is 
(the TRUU spec says that the clients explicitly invalidate them at the 
end of the dialog). Its possible to separate the validity issue out. In 
particular, if the network treats them as valid for the duration of the 
registration, and they are rejected by the UA, there is no need for the 
client to explicitly de-allocate them. Without de-allocation, the 
pseodonym can be considered valid for the duration that the contact URI 
itself is registered to that AOR with that instance ID. Doing that is 
relatively easy to add to GRUU, I believe.

However, obtaining them is something that is requried in any solution. 
Generating a register refresh is easy, however it has the drawback of 
incurring an additional delay and bandwidth utilization at the time of 
call setup. This may be a non-issue for enterprises or broadband access 
providers, but may be a huge issue for wireless (think 3gpp). 
Consequently, if folks believe that wireless providers will require 
serial pseudonymity, I suspect a query-based mechanism (like a REGISTER 
refresh) won't work. Any alternatives to that are much more complicated. 
The two I can think of are to try and coordinate a generator function 
between UA and proxy, or more likely, to make use of a network privacy 
server ala RFC 3323 to request serial pseudonymity. Both would probably 
require specification beyond the scope of the current GRUU spec.

True Anonymity
--------------

In true anonymity, each request is truly without identity. Nothing - 
absolutely nothing - in the request tells you anything about who is 
making it. This feature is nearly impossible to provide, GRUU or not. IP 
addresses alone will provide a ton of information. So, I think this is 
clearly out of scope. That is why I've focused on grades of 
pseudonymity, since that is what we are talking about here.



So, the question to the group is - do folks believe that some kind of 
anonymity needs to be addressed in the baseline GRUU draft for it to be 
useful? If so, what degree? Is is one of the ones above or something 
else entirely?

I believe it would be not too hard to add pseudonymity, temporal 
privacy, and limited serial pseudonymity (requriing a REGISTER refresh 
to get a new pseudonym) to the specification. Anything beyond that I 
think is far too complex. However, no doubt there are still issues 
lurking here and these will require time to ferret out.

Thoughts?

Thanks,
Jonathan R.


-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 17:46:55 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMtZw-0008KH-3T; Mon, 11 Sep 2006 17:44:32 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMtZu-0008KC-OU
	for sip@ietf.org; Mon, 11 Sep 2006 17:44:30 -0400
Received: from zcars04e.nortel.com ([47.129.242.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMtZt-0002QH-FT
	for sip@ietf.org; Mon, 11 Sep 2006 17:44:30 -0400
Received: from zrc2hxm2.corp.nortel.com (zrc2hxm2.corp.nortel.com
	[47.103.123.73])
	by zcars04e.nortel.com (Switch-2.2.0/Switch-2.2.0) with ESMTP id
	k8BLc9e27719; Mon, 11 Sep 2006 17:38:09 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Loop Avoidance || Was RE: [Sip] loop fix
Date: Mon, 11 Sep 2006 16:44:24 -0500
Message-ID: <62B9B0847CC47543B6B3B5E26BD268E60E5F6AAE@zrc2hxm2.corp.nortel.com>
In-Reply-To: <20060911204505.GI19029@infointeractive.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Loop Avoidance || Was RE: [Sip] loop fix
Thread-index: AcbV5Dzoxq4UwDAhS5OZ9Vr9XlxTMQABpd7A
From: "Samir Srivastava" <samirsr@nortel.com>
To: "David Benoit" <benoit@infointeractive.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 50a516d93fd399dc60588708fd9a3002
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi,

>=20
> There has to be better protection against such escalation.  But what?
>=20
> David
>=20

  With so much interest on the loop fix, I thought it is good to bring
the other solutions to group's attention.

  Loop Avoidance is better than the Loop Detection. Loops are caused by
the installation of "bad bindings". The proposed solution checks the
validity of bindings before they are committed for the further request
routing.

The solution checks the SIP reachability of the contacts too before they
are committed. This is more useful when forwarding is installed on
multiple proxies.=20

Proposed solution doesn't require checking for every transaction at
every proxy.

Draft is available at

<t>
http://www.ietf.org/internet-drafts/draft-srivastava-sipping-loop-avoida
nce-00.txt
</t>

It got comments from the group. Refer following threads for the solution
to them

http://www1.ietf.org/mail-archive/web/sipping/current/msg11084.html


http://www1.ietf.org/mail-archive/web/sipping/current/msg11085.html


http://www1.ietf.org/mail-archive/web/sipping/current/msg11097.html

Sorry it is taking long for the next version of the ID. Comments are
welcome.=20

Thx
Samir




_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 11 20:53:19 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GMwRp-00073j-RK; Mon, 11 Sep 2006 20:48:21 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GMwRo-00073d-Gi
	for sip@ietf.org; Mon, 11 Sep 2006 20:48:20 -0400
Received: from c243-111.rim.net ([216.9.243.111] helo=MHS01YKF.rim.net)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GMwRk-0006h9-Sk
	for sip@ietf.org; Mon, 11 Sep 2006 20:48:18 -0400
Importance: normal
Priority: normal
Received: from ngw02ykf.rim.net ([10.102.108.31]) by MHS01YKF.rim.net with
	Microsoft SMTPSVC(6.0.3790.211); Mon, 11 Sep 2006 20:47:56 -0400
Received: from XCH21YKF.rim.net ([10.102.100.36]) by ngw02ykf.rim.net (SAVSMTP
	3.1.6.45) with SMTP id M2006091120475520732 ;
	Mon, 11 Sep 2006 20:47:55 -0400
Received: from XCH47YKF.rim.net ([10.64.31.217]) by XCH21YKF.rim.net with
	Microsoft SMTPSVC(5.0.2195.6713); Mon, 11 Sep 2006 20:47:56 -0400
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Mon, 11 Sep 2006 20:46:04 -0400
Message-ID: <61968779B8AC4C4BAB421D4C12F008C0052C3353@XCH47YKF.rim.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
thread-index: AcbV6D1yoPSj631cSRiyVDVLW3LUsAAFyZGw
From: "Andrew Allen" <aallen@rim.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>,
	"IETF SIP List" <sip@ietf.org>
X-OriginalArrivalTime: 12 Sep 2006 00:47:56.0044 (UTC)
	FILETIME=[16173CC0:01C6D605]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 10d2fdecab7a7fa796e06e001d026c91
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Jonathan,

I don't think it is accurate to state that 3gpp has specified that the
terminal (UE) must indicate privacy and hence it is very difficult to
apply GRUU into 3gpp. This is what TS 24.229 actually states for UE
behavior with regard to Anonymity:=20

------------------------------------------------------------------------
----
Where privacy is required, in any initial request for a dialog or
request for a standalone transaction, the UE shall set the From header
to "Anonymous".

NOTE 5: The contents of the From header should not be relied upon to be
modified by the network based on any privacy specified by the user
either within the UE indication of privacy or by network subscription or
network policy. Therefore the user should include the value "Anonymous"
whenever privacy is explicitly required. As the user may well have
privacy requirements, terminal manufacturers should not automatically
derive and include values in this header from the public user identity
or other values stored in or derived from the UICC. Where the user has
not expressed a preference in the configuration of the terminal
implementation, the implementation should assume that privacy is
required. Users that require to identify themselves, and are making
calls to SIP destinations beyond the IM CN subsystem, where the
destination does not implement RFC 3325 [34], will need to include a
value in the From header other than Anonymous.

------------------------------------------------------------------------
----

My view is that the most important aspect to provide is Pseudonymity.
This seems to provide an equivalent level of anonymity to including an
IP address in the contact header as assumed in RFC 3261. Temporal
Privacy along the lines you have described seems to be a nice to have
which I think we should try and incorporate in the draft if the solution
is easy to specify without delaying the completion. I think Serial
Pseudonymity is a rat hole which really requires a full requirement
discussion (particularly on the lifetime requirements) and also has all
sorts of issues including that having a refresh registration every call
would not be acceptable from a 3gpp wireless perspective. 3gpp has just
completed an optimization of the call setup procedures to reduce the
number of messages exchanged to the bare minimum in order to make call
setup time acceptable so the addition of a REGISTER and 200 OK
transaction to the call setup is not going to go down very well.=20

If you require true anonymity today with RFC 3261 you need an SBC
anonymizer function to hide the IP Addresses and I think for now we can
live with an SBC anonymizer mechanism performing similar hiding on GRUUs
for those deployments that require it. Future work can attempt a more
general and friendly solution to these more stringent privacy
requirements which go beyond the privacy provided today using RFC 3261.

Andrew

=20
-----Original Message-----
From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
Sent: Monday, September 11, 2006 5:18 PM
To: IETF SIP List
Subject: [Sip] GRUU and Anonymity

Several folks got together to discuss the review comments on the GRUU=20
spec. Much of the time was spent discussing the issue of anonymity.

Today, GRUU doesn't provide any anonymity functions at all. Indeed, the=20
recommendations for construction of gruus are such that they would=20
contain the users AOR. So, if a user wants to make an anonymous call,=20
what would they do? The GRUU spec says nothing about this, and=20
unfortunately the answer is that they cannot use the GRUU specification=20
at all.

The point was raised that there were many places, such as Europe, where=20
anonymous calls are the norm. This is because privacy laws require that=20
caller ID be given out as an opt-in feature, and the default is privacy.

This results in a very large percentage of calls being anonymous. In=20
these kinds of situations, GRUU would never get used, and the problems=20
it solves (like making transfer work) won't be applicable.

A similar problem arises in network deployments which utilize network=20
signaled privacy (in other words, the phone doesn't know the call is=20
anonymous, but the network does). To support these kinds of deployments,

the UA has to act as if every call was anonymous. This is how 3gpp is=20
currently spec'd out, and it would make it very difficult to apply GRUU=20
into 3gpp.

Thus, the concern was raised that a GRUU specification that didn't=20
address anonymity at all was undeployable in many locales and unusable=20
by many potential SDO customers. The question, then, is can it be=20
addressed in this spec, and at what cost?

Unfortunately, anonymity is a big, thorny and hard problem. Indeed,=20
there are many different types of anonymity. Consequently, I think its=20
worth looking at a few different properties and seeing what the cost=20
would be to add them to the GRUU spec.

Pseudonymity
------------

One feature that can be provided is pseudonymity. The idea is that the=20
registrar, when it first creates a GRUU for an AOR/insteance-ID pair,=20
actually would create two. One is the 'normal' one (generally=20
constructed by adding an opaque parameter to the AOR), and another is a=20
pseudonym for the GRUU:

sip:jdrosen@cisco.com;gruu;opaque=3D9asd8bvghasd8
sip:9ujjkasd--998@cisco.com;gruu

Both the pseudonym and the regular GRUU would be returned in the=20
REGISTER response. The pseudonym would have the same temporal lifetime=20
as the regular GRUU. The pseudonym can easily be constructed by=20
encrypting the AOR and instance ID, or it can be computed and stored=20
statefully.

The pseudonym would have the property that one could not, by inspection,

determine the AOR. However, the pseudonym persists indefinitely, and=20
consequently, two subsequent calls from the same UA instance would be=20
known as coming from the same UA instance. Also, a recipient of the=20
pseudonym could call the user back, at that instance, at any time in the

future.

Adding this pseudonymity feature to GRUU is relatively low cost, in=20
terms of complexity and time delay. I believe it would require the=20
addition of one feature from:

http://www.ietf.org/internet-drafts/draft-rosenberg-sip-identity-coexist
ence-00.txt

namely, the user=3Danonymous URI parameter, so that a recipient knows to =

not try to render sip:9ujjkasd--998@cisco.com.


Temporal Privacy
----------------

There is probably a better name for this feature, but for now I'll call=20
it temporal privacy.

The idea is that the Contact header field contains a pseudonym. The UA=20
at the other end of the call can use that pseudonym for a certain=20
duration. After that duration expires, the pseudonym is invalid. Being=20
invalid means that any entity which makes a call to that URI, will not=20
cause the phone to ring and the call will not succeed.

The most useful temporal scope is for the lifetime of the dialog. This=20
is particularly useful for transfer and KPML, where that is exactly the=20
desired temporal scope. However, other scopes could be possible. Indeed,

another application of GRUU is in a call center, where you could call=20
back the specific help desk person who you just talked to, without=20
knowing their identity. This would work best with a temporal validity=20
that is something like an hour or so, and possibly even longer.

This is most easily implemented in the UA. Consider temporal privacy=20
with a scope equal to the lifetime of a dialog. The UA would obtain a=20
psedononymous GRUU as above, and then add a unique grid parameter for=20
each distinct dialog. When the UA receives a request that was targeted=20
towards that GRUU, it will know the grid that was used. If the=20
corresponding dialog is still in progress, the request is accepted. If=20
not, the request is rejected with a 403.

Pushing the validity checking into the network is harder, since it would

require proxies to retain dialog statefulness, store the correlation=20
between grid and dialog, and know that the desired temporal scope of the

anonymity is indeed for a dialog. No doubt some folks who like B2BUAs=20
would be more than happy to do this.

Adding this feature to the UA is relatively low cost (in terms of=20
specification work).

Note that, even though the grid would rotate on each call, the rest of=20
the pseudononymous GRUU would not. This makes it easily to correlate.=20
Thus, if Bob makes a call to Carol one day, and again to Carol the next=20
day, Carol will know that this was the same person that called on the=20
day previous.

Serial Pseudonymity
-------------------

With serial pseudonymity, the UA would be able to get multiple=20
pseudonyms, and use a different one for each dialog. The pseudonyms=20
could not be correlated together, except that they come from the same=20
domain. Serial pseudonymity is orthogonal to temporal privacy. Each of=20
the pseudonyms can have any temporal lifetime that is desired. The most=20
obvious lifetime is to bind the validity to that of the dialog the=20
pseudonym is used in. This would allow a UA to have a different GRUU
for each call, and for that GRUU only to be usable during the duration=20
of the call.

Serial pseudonymity is harder to address. The TRUU draft:
http://www.ietf.org/internet-drafts/draft-jbemmel-sip-truu-02.txt
takes a stab at this. Any solution to this problem needs to deal with=20
the question of how the UA instance gets a new pseudonym (the TRUU spec=20
proposes a REGISTER with a new Contact URI) and what its validity is=20
(the TRUU spec says that the clients explicitly invalidate them at the=20
end of the dialog). Its possible to separate the validity issue out. In=20
particular, if the network treats them as valid for the duration of the=20
registration, and they are rejected by the UA, there is no need for the=20
client to explicitly de-allocate them. Without de-allocation, the=20
pseodonym can be considered valid for the duration that the contact URI=20
itself is registered to that AOR with that instance ID. Doing that is=20
relatively easy to add to GRUU, I believe.

However, obtaining them is something that is requried in any solution.=20
Generating a register refresh is easy, however it has the drawback of=20
incurring an additional delay and bandwidth utilization at the time of=20
call setup. This may be a non-issue for enterprises or broadband access=20
providers, but may be a huge issue for wireless (think 3gpp).=20
Consequently, if folks believe that wireless providers will require=20
serial pseudonymity, I suspect a query-based mechanism (like a REGISTER=20
refresh) won't work. Any alternatives to that are much more complicated.

The two I can think of are to try and coordinate a generator function=20
between UA and proxy, or more likely, to make use of a network privacy=20
server ala RFC 3323 to request serial pseudonymity. Both would probably=20
require specification beyond the scope of the current GRUU spec.

True Anonymity
--------------

In true anonymity, each request is truly without identity. Nothing -=20
absolutely nothing - in the request tells you anything about who is=20
making it. This feature is nearly impossible to provide, GRUU or not. IP

addresses alone will provide a ton of information. So, I think this is=20
clearly out of scope. That is why I've focused on grades of=20
pseudonymity, since that is what we are talking about here.



So, the question to the group is - do folks believe that some kind of=20
anonymity needs to be addressed in the baseline GRUU draft for it to be=20
useful? If so, what degree? Is is one of the ones above or something=20
else entirely?

I believe it would be not too hard to add pseudonymity, temporal=20
privacy, and limited serial pseudonymity (requriing a REGISTER refresh=20
to get a new pseudonym) to the specification. Anything beyond that I=20
think is far too complex. However, no doubt there are still issues=20
lurking here and these will require time to ferret out.

Thoughts?

Thanks,
Jonathan R.


--=20
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



---------------------------------------------------------------------
This transmission (including any attachments) may contain confidential =
information, privileged material (including material protected by the =
solicitor-client or other applicable privileges), or constitute =
non-public information. Any use of this information by anyone other than =
the intended recipient is prohibited. If you have received this =
transmission in error, please immediately reply to the sender and delete =
this information from your system. Use, dissemination, distribution, or =
reproduction of this transmission by unintended recipients is not =
authorized and may be unlawful.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 02:29:01 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN1hj-0002iC-So; Tue, 12 Sep 2006 02:25:07 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN1hi-0002i5-2q
	for sip@ietf.org; Tue, 12 Sep 2006 02:25:06 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GN1hf-0004te-Nl
	for sip@ietf.org; Tue, 12 Sep 2006 02:25:06 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 4F45913F635; Tue, 12 Sep 2006 09:24:51 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (thymine200.gprs.dnafinland.fi [62.78.126.200])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id ABBE313F633;
	Tue, 12 Sep 2006 09:24:45 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id D2608F0AE6; Tue, 12 Sep 2006 09:25:01 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17670.21181.729633.330969@rautu.tutpro.com>
Date: Tue, 12 Sep 2006 09:25:01 +0300
From: Juha Heinanen <jh@tutpro.com>
To: Jonathan Rosenberg <jdrosen@cisco.com>
Subject: [Sip] GRUU and Anonymity
In-Reply-To: <4505D286.7090105@cisco.com>
References: <4505D286.7090105@cisco.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7a6398bf8aaeabc7a7bb696b6b0a2aad
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Jonathan Rosenberg writes:

 > So, the question to the group is - do folks believe that some kind of 
 > anonymity needs to be addressed in the baseline GRUU draft for it to be 
 > useful? If so, what degree? Is is one of the ones above or something 
 > else entirely?

pseudonymity would be ok with me.

at least in finland, anonymity requirement only applies to SIP/PSTN
calls, not to SIP/SIP calls.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 02:31:38 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN1mL-00048s-Sl; Tue, 12 Sep 2006 02:29:53 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN1mJ-00048n-Qp
	for sip@ietf.org; Tue, 12 Sep 2006 02:29:51 -0400
Received: from jes-fe1.zx.nl ([194.187.76.132])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GN1m9-0005D6-KN
	for sip@ietf.org; Tue, 12 Sep 2006 02:29:51 -0400
Received: from Inbox ([89.205.146.201])
	by jes-fe1.zx.nl (Sun Java System Messaging Server 6.2-2.05 (built Apr
	28
	2005)) with ESMTP id <0J5G006HHXWAKP00@jes-fe1.zx.nl> for sip@ietf.org;
	Tue, 12 Sep 2006 08:24:27 +0100 (WEST)
Date: Tue, 12 Sep 2006 08:29:46 +0200
From: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: RE: [Sip] GRUU and Anonymity
To: Andrew Allen <aallen@rim.com>, Jonathan Rosenberg <jdrosen@cisco.com>,
	IETF SIP List <sip@ietf.org>
Message-id: <0J5G006HIXWCKP00@jes-fe1.zx.nl>
MIME-version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Importance: normal
X-Priority: 3
X-Spam-Score: 1.2 (+)
X-Scan-Signature: 4515df9441674711565101d9d5c4f63f
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Andrew,

Minor remark: de-allocation of a temporary GRUU would happen after call tea=
r down, and not as part of call setup. Moreover, it could be optional.

Regards,

Jeroen

-----Oorspronkelijk bericht -----
Van: "Andrew Allen" <aallen@rim.com>
Aan: "Jonathan Rosenberg" <jdrosen@cisco.com>; "IETF SIP List" <sip@ietf.or=
g>
Verzonden: 12-9-06 02:46
Onderwerp: RE: [Sip] GRUU and Anonymity


Jonathan,

I don't think it is accurate to state that 3gpp has specified that the
terminal (UE) must indicate privacy and hence it is very difficult to
apply GRUU into 3gpp. This is what TS 24.229 actually states for UE
behavior with regard to Anonymity:=20

------------------------------------------------------------------------
----
Where privacy is required, in any initial request for a dialog or
request for a standalone transaction, the UE shall set the From header
to "Anonymous".

NOTE 5: The contents of the From header should not be relied upon to be
modified by the network based on any privacy specified by the user
either within the UE indication of privacy or by network subscription or
network policy. Therefore the user should include the value "Anonymous"
whenever privacy is explicitly required. As the user may well have
privacy requirements, terminal manufacturers should not automatically
derive and include values in this header from the public user identity
or other values stored in or derived from the UICC. Where the user has
not expressed a preference in the configuration of the terminal
implementation, the implementation should assume that privacy is
required. Users that require to identify themselves, and are making
calls to SIP destinations beyond the IM CN subsystem, where the
destination does not implement RFC 3325 [34], will need to include a
value in the From header other than Anonymous.

------------------------------------------------------------------------
----

My view is that the most important aspect to provide is Pseudonymity.
This seems to provide an equivalent level of anonymity to including an
IP address in the contact header as assumed in RFC 3261. Temporal
Privacy along the lines you have described seems to be a nice to have
which I think we should try and incorporate in the draft if the solution
is easy to specify without delaying the completion. I think Serial
Pseudonymity is a rat hole which really requires a full requirement
discussion (particularly on the lifetime requirements) and also has all
sorts of issues including that having a refresh registration every call
would not be acceptable from a 3gpp wireless perspective. 3gpp has just
completed an optimization of the call setup procedures to reduce the
number of messages exchanged to the bare minimum in order to make call
setup time acceptable so the addition of a REGISTER and 200 OK
transaction to the call setup is not going to go down very well.=20

If you require true anonymity today with RFC 3261 you need an SBC
anonymizer function to hide the IP Addresses and I think for now we can
live with an SBC anonymizer mechanism performing similar hiding on GRUUs
for those deployments that require it. Future work can attempt a more
general and friendly solution to these more stringent privacy
requirements which go beyond the privacy provided today using RFC 3261.

Andrew

=20
-----Original Message-----
From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
Sent: Monday, September 11, 2006 5:18 PM
To: IETF SIP List
Subject: [Sip] GRUU and Anonymity

Several folks got together to discuss the review comments on the GRUU=20
spec. Much of the time was spent discussing the issue of anonymity.

Today, GRUU doesn't provide any anonymity functions at all. Indeed, the=20
recommendations for construction of gruus are such that they would=20
contain the users AOR. So, if a user wants to make an anonymous call,=20
what would they do? The GRUU spec says nothing about this, and=20
unfortunately the answer is that they cannot use the GRUU specification=20
at all.

The point was raised that there were many places, such as Europe, where=20
anonymous calls are the norm. This is because privacy laws require that=20
caller ID be given out as an opt-in feature, and the default is privacy.

This results in a very large percentage of calls being anonymous. In=20
these kinds of situations, GRUU would never get used, and the problems=20
it solves (like making transfer work) won't be applicable.

A similar problem arises in network deployments which utilize network=20
signaled privacy (in other words, the phone doesn't know the call is=20
anonymous, but the network does). To support these kinds of deployments,

the UA has to act as if every call was anonymous. This is how 3gpp is=20
currently spec'd out, and it would make it very difficult to apply GRUU=20
into 3gpp.

Thus, the concern was raised that a GRUU specification that didn't=20
address anonymity at all was undeployable in many locales and unusable=20
by many potential SDO customers. The question, then, is can it be=20
addressed in this spec, and at what cost?

Unfortunately, anonymity is a big, thorny and hard problem. Indeed,=20
there are many different types of anonymity. Consequently, I think its=20
worth looking at a few different properties and seeing what the cost=20
would be to add them to the GRUU spec.

Pseudonymity
------------

One feature that can be provided is pseudonymity. The idea is that the=20
registrar, when it first creates a GRUU for an AOR/insteance-ID pair,=20
actually would create two. One is the 'normal' one (generally=20
constructed by adding an opaque parameter to the AOR), and another is a=20
pseudonym for the GRUU:

sip:jdrosen@cisco.com;gruu;opaque=3D9asd8bvghasd8
sip:9ujjkasd--998@cisco.com;gruu

Both the pseudonym and the regular GRUU would be returned in the=20
REGISTER response. The pseudonym would have the same temporal lifetime=20
as the regular GRUU. The pseudonym can easily be constructed by=20
encrypting the AOR and instance ID, or it can be computed and stored=20
statefully.

The pseudonym would have the property that one could not, by inspection,

determine the AOR. However, the pseudonym persists indefinitely, and=20
consequently, two subsequent calls from the same UA instance would be=20
known as coming from the same UA instance. Also, a recipient of the=20
pseudonym could call the user back, at that instance, at any time in the

future.

Adding this pseudonymity feature to GRUU is relatively low cost, in=20
terms of complexity and time delay. I believe it would require the=20
addition of one feature from:

http://www.ietf.org/internet-drafts/draft-rosenberg-sip-identity-coexist
ence-00.txt

namely, the user=3Danonymous URI parameter, so that a recipient knows to=20
not try to render sip:9ujjkasd--998@cisco.com.


Temporal Privacy
----------------

There is probably a better name for this feature, but for now I'll call=20
it temporal privacy.

The idea is that the Contact header field contains a pseudonym. The UA=20
at the other end of the call can use that pseudonym for a certain=20
duration. After that duration expires, the pseudonym is invalid. Being=20
invalid means that any entity which makes a call to that URI, will not=20
cause the phone to ring and the call will not succeed.

The most useful temporal scope is for the lifetime of the dialog. This=20
is particularly useful for transfer and KPML, where that is exactly the=20
desired temporal scope. However, other scopes could be possible. Indeed,

another application of GRUU is in a call center, where you could call=20
back the specific help desk person who you just talked to, without=20
knowing their identity. This would work best with a temporal validity=20
that is something like an hour or so, and possibly even longer.

This is most easily implemented in the UA. Consider temporal privacy=20
with a scope equal to the lifetime of a dialog. The UA would obtain a=20
psedononymous GRUU as above, and then add a unique grid parameter for=20
each distinct dialog. When the UA receives a request that was targeted=20
towards that GRUU, it will know the grid that was used. If the=20
corresponding dialog is still in progress, the request is accepted. If=20
not, the request is rejected with a 403.

Pushing the validity checking into the network is harder, since it would

require proxies to retain dialog statefulness, store the correlation=20
between grid and dialog, and know that the desired temporal scope of the

anonymity is indeed for a dialog. No doubt some folks who like B2BUAs=20
would be more than happy to do this.

Adding this feature to the UA is relatively low cost (in terms of=20
specification work).

Note that, even though the grid would rotate on each call, the rest of=20
the pseudononymous GRUU would not. This makes it easily to correlate.=20
Thus, if Bob makes a call to Carol one day, and again to Carol the next=20
day, Carol will know that this was the same person that called on the=20
day previous.

Serial Pseudonymity
-------------------

With serial pseudonymity, the UA would be able to get multiple=20
pseudonyms, and use a different one for each dialog. The pseudonyms=20
could not be correlated together, except that they come from the same=20
domain. Serial pseudonymity is orthogonal to temporal privacy. Each of=20
the pseudonyms can have any temporal lifetime that is desired. The most=20
obvious lifetime is to bind the validity to that of the dialog the=20
pseudonym is used in. This would allow a UA to have a different GRUU
for each call, and for that GRUU only to be usable during the duration=20
of the call.

Serial pseudonymity is harder to address. The TRUU draft:
http://www.ietf.org/internet-drafts/draft-jbemmel-sip-truu-02.txt
takes a stab at this. Any solution to this problem needs to deal with=20
the question of how the UA instance gets a new pseudonym (the TRUU spec=20
proposes a REGISTER with a new Contact URI) and what its validity is=20
(the TRUU spec says that the clients explicitly invalidate them at the=20
end of the dialog). Its possible to separate the validity issue out. In=20
particular, if the network treats them as valid for the duration of the=20
registration, and they are rejected by the UA, there is no need for the=20
client to explicitly de-allocate them. Without de-allocation, the=20
pseodonym can be considered valid for the duration that the contact URI=20
itself is registered to that AOR with that instance ID. Doing that is=20
relatively easy to add to GRUU, I believe.

However, obtaining them is something that is requried in any solution.=20
Generating a register refresh is easy, however it has the drawback of=20
incurring an additional delay and bandwidth utilization at the time of=20
call setup. This may be a non-issue for enterprises or broadband access=20
providers, but may be a huge issue for wireless (think 3gpp).=20
Consequently, if folks believe that wireless providers will require=20
serial pseudonymity, I suspect a query-based mechanism (like a REGISTER=20
refresh) won't work. Any alternatives to that are much more complicated.

The two I can think of are to try and coordinate a generator function=20
between UA and proxy, or more likely, to make use of a network privacy=20
server ala RFC 3323 to request serial pseudonymity. Both would probably=20
require specification beyond the scope of the current GRUU spec.

True Anonymity
--------------

In true anonymity, each request is truly without identity. Nothing -=20
absolutely nothing - in the request tells you anything about who is=20
making it. This feature is nearly impossible to provide, GRUU or not. IP

addresses alone will provide a ton of information. So, I think this is=20
clearly out of scope. That is why I've focused on grades of=20
pseudonymity, since that is what we are talking about here.



So, the question to the group is - do folks believe that some kind of=20
anonymity needs to be addressed in the baseline GRUU draft for it to be=20
useful? If so, what degree? Is is one of the ones above or something=20
else entirely?

I believe it would be not too hard to add pseudonymity, temporal=20
privacy, and limited serial pseudonymity (requriing a REGISTER refresh=20
to get a new pseudonym) to the specification. Anything beyond that I=20
think is far too complex. However, no doubt there are still issues=20
lurking here and these will require time to ferret out.

Thoughts?

Thanks,
Jonathan R.


--=20
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



---------------------------------------------------------------------
This transmission (including any attachments) may contain confidential info=
rmation, privileged material (including material protected by the solicitor=
-client or other applicable privileges), or constitute non-public informati=
on. Any use of this information by anyone other than the intended recipient=
 is prohibited. If you have received this transmission in error, please imm=
ediately reply to the sender and delete this information from your system. =
Use, dissemination, distribution, or reproduction of this transmission by u=
nintended recipients is not authorized and may be unlawful.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 02:51:54 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN25b-0002Xr-NF; Tue, 12 Sep 2006 02:49:47 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN25Z-0002Xm-MF
	for sip@ietf.org; Tue, 12 Sep 2006 02:49:45 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GN25Y-00070N-7Q
	for sip@ietf.org; Tue, 12 Sep 2006 02:49:45 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 7EB6713F65A; Tue, 12 Sep 2006 09:49:40 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (thymine200.gprs.dnafinland.fi [62.78.126.200])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id B082B13F634;
	Tue, 12 Sep 2006 09:49:29 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 063BFF0AE6; Tue, 12 Sep 2006 09:49:47 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17670.22667.949470.365821@rautu.tutpro.com>
Date: Tue, 12 Sep 2006 09:49:47 +0300
From: Juha Heinanen <jh@tutpro.com>
To: Jonathan Rosenberg <jdrosen@cisco.com>,
	IETF SIP List <sip@ietf.org>
Subject: [Sip] GRUU and Anonymity
In-Reply-To: <17670.21181.729633.330969@rautu.tutpro.com>
References: <4505D286.7090105@cisco.com>
	<17670.21181.729633.330969@rautu.tutpro.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 68c8cc8a64a9d0402e43b8eee9fc4199
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

after thinking this a bit more, it would actually be a very good idea
not to support gruu at all with anonymous calling.  so i change my vote.
let those people who want to make anonymous calls, fall back to non-gruu
calls.

even if someone has chosen anonymous calling to be the default, the
default can be overridden on per call basis using #31# dial prefix.  i
personally never answer anonymous phone calls, because they usually come
from telemarketing guys or some other "undercover" people.  so it is
just good for those guys to loose some functionality.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 07:05:05 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN61P-0002CI-2D; Tue, 12 Sep 2006 07:01:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN61N-0002CD-BZ
	for sip@ietf.org; Tue, 12 Sep 2006 07:01:41 -0400
Received: from ihemail2.lucent.com ([192.11.222.163])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GN61M-0002uo-0g
	for sip@ietf.org; Tue, 12 Sep 2006 07:01:41 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail2.lucent.com (8.13.6/IER-o) with ESMTP id k8CB1aOw011270;
	Tue, 12 Sep 2006 06:01:37 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Tue, 12 Sep 2006 06:01:36 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Tue, 12 Sep 2006 13:01:17 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] loop fix
Date: Tue, 12 Sep 2006 13:01:16 +0200
Message-ID: <5D1A7985295922448D5550C94DE291803D7E0A@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] loop fix
Thread-Index: AcbVyIUBhOenspe2QHqWHlh59flR7gAkg4TA
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: "Juha Heinanen" <jh@tutpro.com>, "Pete Cordell" <pete@tech-know-ware.com>
X-OriginalArrivalTime: 12 Sep 2006 11:01:17.0114 (UTC)
	FILETIME=[C53CE1A0:01C6D65A]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 39bd8f8cbb76cae18b7e23f7cf6b2b9f
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I agree.

It is an IMS requirement.

It is an IMS requirement because the 3GPP specifications normatively
reference RFC 3261 and the default value for the Max-Forwards header.

Perhaps 3GPP have to stop doing that!!!!!

Regards

Keith=20

> -----Original Message-----
> From: Juha Heinanen [mailto:jh@tutpro.com]=20
> Sent: 11 September 2006 18:31
> To: Pete Cordell
> Cc: sip@ietf.org
> Subject: Re: [Sip] loop fix
>=20
> Pete Cordell writes:
>=20
>  > I think a 1 to 70 amplification of messages is  > still=20
> quite significant and worth protecting against.
>=20
> i agree.  where does 70 come from?  smells like yet another=20
> IMS requirement :-) i have never seen even 20 "Received from"=20
> headers in email messages and ip ttl is 32.
>=20
> -- juha
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 09:01:55 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN7qz-00087h-MG; Tue, 12 Sep 2006 08:59:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN7qy-00086g-CE
	for sip@ietf.org; Tue, 12 Sep 2006 08:59:04 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GN7qx-0001as-NL
	for sip@ietf.org; Tue, 12 Sep 2006 08:59:04 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 12 Sep 2006 08:59:04 -0400
X-IronPort-AV: i="4.09,153,1157342400"; 
	d="scan'208"; a="101967871:sNHT58383064"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CCx3Lj021799; Tue, 12 Sep 2006 08:59:03 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8CCx2dM027088; 
	Tue, 12 Sep 2006 08:59:02 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 08:59:02 -0400
Received: from [10.86.240.24] ([10.86.240.24]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 08:59:01 -0400
Message-ID: <4506AF15.9020707@cisco.com>
Date: Tue, 12 Sep 2006 08:59:01 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: Re: [Sip] GRUU and Anonymity
References: <0J5G006HIXWCKP00@jes-fe1.zx.nl>
In-Reply-To: <0J5G006HIXWCKP00@jes-fe1.zx.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Sep 2006 12:59:01.0923 (UTC)
	FILETIME=[38312F30:01C6D66B]
DKIM-Signature: a=rsa-sha1; q=dns; l=13666; t=1158065943; x=1158929943;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity
	|To:Jeroen=20Van=20Bemmel=20<jbemmel@zonnet.nl>;
	X=v=3Dcisco.com=3B=20h=3DONUzYILMhsEbjhLpG/U2iddFvRU=3D;
	b=V9fbKnWyROAlKE2WCaAriweo5WV6+6Hghu0WXSjO7eXbMHny8r6V9FFGPl6J+2yBtCzgBASV
	BqExIMdtDG8amni/n35CYZYnZaRibYkq1dUyZAKiVf8K+bwIFLmMNYJt;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: f60fbf3dbcaca652b6d10036f0630412
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

The need to deallocate temporary gruus could be a problem. If you put 
the responsibility on the UAC to do it, what incentive does it have? Its 
easier to just not bother. And the registrar doesn't in general know 
when the old temp gruu is no longer needed. You could try to couple it, 
so that you can't get a new one without giving up your old one, but that 
isn't necessarily workable. (Wanting a new gruu for a new call doesn't 
mean that you are done with the earlier call.)

Its *way* better if the gruus are arranged so that there is no state 
retained that must be deallocated.

	Paul

Jeroen Van Bemmel wrote:
> Andrew,
> 
> Minor remark: de-allocation of a temporary GRUU would happen after call tear down, and not as part of call setup. Moreover, it could be optional.
> 
> Regards,
> 
> Jeroen
> 
> -----Oorspronkelijk bericht -----
> Van: "Andrew Allen" <aallen@rim.com>
> Aan: "Jonathan Rosenberg" <jdrosen@cisco.com>; "IETF SIP List" <sip@ietf.org>
> Verzonden: 12-9-06 02:46
> Onderwerp: RE: [Sip] GRUU and Anonymity
> 
> 
> Jonathan,
> 
> I don't think it is accurate to state that 3gpp has specified that the
> terminal (UE) must indicate privacy and hence it is very difficult to
> apply GRUU into 3gpp. This is what TS 24.229 actually states for UE
> behavior with regard to Anonymity: 
> 
> ------------------------------------------------------------------------
> ----
> Where privacy is required, in any initial request for a dialog or
> request for a standalone transaction, the UE shall set the From header
> to "Anonymous".
> 
> NOTE 5: The contents of the From header should not be relied upon to be
> modified by the network based on any privacy specified by the user
> either within the UE indication of privacy or by network subscription or
> network policy. Therefore the user should include the value "Anonymous"
> whenever privacy is explicitly required. As the user may well have
> privacy requirements, terminal manufacturers should not automatically
> derive and include values in this header from the public user identity
> or other values stored in or derived from the UICC. Where the user has
> not expressed a preference in the configuration of the terminal
> implementation, the implementation should assume that privacy is
> required. Users that require to identify themselves, and are making
> calls to SIP destinations beyond the IM CN subsystem, where the
> destination does not implement RFC 3325 [34], will need to include a
> value in the From header other than Anonymous.
> 
> ------------------------------------------------------------------------
> ----
> 
> My view is that the most important aspect to provide is Pseudonymity.
> This seems to provide an equivalent level of anonymity to including an
> IP address in the contact header as assumed in RFC 3261. Temporal
> Privacy along the lines you have described seems to be a nice to have
> which I think we should try and incorporate in the draft if the solution
> is easy to specify without delaying the completion. I think Serial
> Pseudonymity is a rat hole which really requires a full requirement
> discussion (particularly on the lifetime requirements) and also has all
> sorts of issues including that having a refresh registration every call
> would not be acceptable from a 3gpp wireless perspective. 3gpp has just
> completed an optimization of the call setup procedures to reduce the
> number of messages exchanged to the bare minimum in order to make call
> setup time acceptable so the addition of a REGISTER and 200 OK
> transaction to the call setup is not going to go down very well. 
> 
> If you require true anonymity today with RFC 3261 you need an SBC
> anonymizer function to hide the IP Addresses and I think for now we can
> live with an SBC anonymizer mechanism performing similar hiding on GRUUs
> for those deployments that require it. Future work can attempt a more
> general and friendly solution to these more stringent privacy
> requirements which go beyond the privacy provided today using RFC 3261.
> 
> Andrew
> 
>  
> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com] 
> Sent: Monday, September 11, 2006 5:18 PM
> To: IETF SIP List
> Subject: [Sip] GRUU and Anonymity
> 
> Several folks got together to discuss the review comments on the GRUU 
> spec. Much of the time was spent discussing the issue of anonymity.
> 
> Today, GRUU doesn't provide any anonymity functions at all. Indeed, the 
> recommendations for construction of gruus are such that they would 
> contain the users AOR. So, if a user wants to make an anonymous call, 
> what would they do? The GRUU spec says nothing about this, and 
> unfortunately the answer is that they cannot use the GRUU specification 
> at all.
> 
> The point was raised that there were many places, such as Europe, where 
> anonymous calls are the norm. This is because privacy laws require that 
> caller ID be given out as an opt-in feature, and the default is privacy.
> 
> This results in a very large percentage of calls being anonymous. In 
> these kinds of situations, GRUU would never get used, and the problems 
> it solves (like making transfer work) won't be applicable.
> 
> A similar problem arises in network deployments which utilize network 
> signaled privacy (in other words, the phone doesn't know the call is 
> anonymous, but the network does). To support these kinds of deployments,
> 
> the UA has to act as if every call was anonymous. This is how 3gpp is 
> currently spec'd out, and it would make it very difficult to apply GRUU 
> into 3gpp.
> 
> Thus, the concern was raised that a GRUU specification that didn't 
> address anonymity at all was undeployable in many locales and unusable 
> by many potential SDO customers. The question, then, is can it be 
> addressed in this spec, and at what cost?
> 
> Unfortunately, anonymity is a big, thorny and hard problem. Indeed, 
> there are many different types of anonymity. Consequently, I think its 
> worth looking at a few different properties and seeing what the cost 
> would be to add them to the GRUU spec.
> 
> Pseudonymity
> ------------
> 
> One feature that can be provided is pseudonymity. The idea is that the 
> registrar, when it first creates a GRUU for an AOR/insteance-ID pair, 
> actually would create two. One is the 'normal' one (generally 
> constructed by adding an opaque parameter to the AOR), and another is a 
> pseudonym for the GRUU:
> 
> sip:jdrosen@cisco.com;gruu;opaque=9asd8bvghasd8
> sip:9ujjkasd--998@cisco.com;gruu
> 
> Both the pseudonym and the regular GRUU would be returned in the 
> REGISTER response. The pseudonym would have the same temporal lifetime 
> as the regular GRUU. The pseudonym can easily be constructed by 
> encrypting the AOR and instance ID, or it can be computed and stored 
> statefully.
> 
> The pseudonym would have the property that one could not, by inspection,
> 
> determine the AOR. However, the pseudonym persists indefinitely, and 
> consequently, two subsequent calls from the same UA instance would be 
> known as coming from the same UA instance. Also, a recipient of the 
> pseudonym could call the user back, at that instance, at any time in the
> 
> future.
> 
> Adding this pseudonymity feature to GRUU is relatively low cost, in 
> terms of complexity and time delay. I believe it would require the 
> addition of one feature from:
> 
> http://www.ietf.org/internet-drafts/draft-rosenberg-sip-identity-coexist
> ence-00.txt
> 
> namely, the user=anonymous URI parameter, so that a recipient knows to 
> not try to render sip:9ujjkasd--998@cisco.com.
> 
> 
> Temporal Privacy
> ----------------
> 
> There is probably a better name for this feature, but for now I'll call 
> it temporal privacy.
> 
> The idea is that the Contact header field contains a pseudonym. The UA 
> at the other end of the call can use that pseudonym for a certain 
> duration. After that duration expires, the pseudonym is invalid. Being 
> invalid means that any entity which makes a call to that URI, will not 
> cause the phone to ring and the call will not succeed.
> 
> The most useful temporal scope is for the lifetime of the dialog. This 
> is particularly useful for transfer and KPML, where that is exactly the 
> desired temporal scope. However, other scopes could be possible. Indeed,
> 
> another application of GRUU is in a call center, where you could call 
> back the specific help desk person who you just talked to, without 
> knowing their identity. This would work best with a temporal validity 
> that is something like an hour or so, and possibly even longer.
> 
> This is most easily implemented in the UA. Consider temporal privacy 
> with a scope equal to the lifetime of a dialog. The UA would obtain a 
> psedononymous GRUU as above, and then add a unique grid parameter for 
> each distinct dialog. When the UA receives a request that was targeted 
> towards that GRUU, it will know the grid that was used. If the 
> corresponding dialog is still in progress, the request is accepted. If 
> not, the request is rejected with a 403.
> 
> Pushing the validity checking into the network is harder, since it would
> 
> require proxies to retain dialog statefulness, store the correlation 
> between grid and dialog, and know that the desired temporal scope of the
> 
> anonymity is indeed for a dialog. No doubt some folks who like B2BUAs 
> would be more than happy to do this.
> 
> Adding this feature to the UA is relatively low cost (in terms of 
> specification work).
> 
> Note that, even though the grid would rotate on each call, the rest of 
> the pseudononymous GRUU would not. This makes it easily to correlate. 
> Thus, if Bob makes a call to Carol one day, and again to Carol the next 
> day, Carol will know that this was the same person that called on the 
> day previous.
> 
> Serial Pseudonymity
> -------------------
> 
> With serial pseudonymity, the UA would be able to get multiple 
> pseudonyms, and use a different one for each dialog. The pseudonyms 
> could not be correlated together, except that they come from the same 
> domain. Serial pseudonymity is orthogonal to temporal privacy. Each of 
> the pseudonyms can have any temporal lifetime that is desired. The most 
> obvious lifetime is to bind the validity to that of the dialog the 
> pseudonym is used in. This would allow a UA to have a different GRUU
> for each call, and for that GRUU only to be usable during the duration 
> of the call.
> 
> Serial pseudonymity is harder to address. The TRUU draft:
> http://www.ietf.org/internet-drafts/draft-jbemmel-sip-truu-02.txt
> takes a stab at this. Any solution to this problem needs to deal with 
> the question of how the UA instance gets a new pseudonym (the TRUU spec 
> proposes a REGISTER with a new Contact URI) and what its validity is 
> (the TRUU spec says that the clients explicitly invalidate them at the 
> end of the dialog). Its possible to separate the validity issue out. In 
> particular, if the network treats them as valid for the duration of the 
> registration, and they are rejected by the UA, there is no need for the 
> client to explicitly de-allocate them. Without de-allocation, the 
> pseodonym can be considered valid for the duration that the contact URI 
> itself is registered to that AOR with that instance ID. Doing that is 
> relatively easy to add to GRUU, I believe.
> 
> However, obtaining them is something that is requried in any solution. 
> Generating a register refresh is easy, however it has the drawback of 
> incurring an additional delay and bandwidth utilization at the time of 
> call setup. This may be a non-issue for enterprises or broadband access 
> providers, but may be a huge issue for wireless (think 3gpp). 
> Consequently, if folks believe that wireless providers will require 
> serial pseudonymity, I suspect a query-based mechanism (like a REGISTER 
> refresh) won't work. Any alternatives to that are much more complicated.
> 
> The two I can think of are to try and coordinate a generator function 
> between UA and proxy, or more likely, to make use of a network privacy 
> server ala RFC 3323 to request serial pseudonymity. Both would probably 
> require specification beyond the scope of the current GRUU spec.
> 
> True Anonymity
> --------------
> 
> In true anonymity, each request is truly without identity. Nothing - 
> absolutely nothing - in the request tells you anything about who is 
> making it. This feature is nearly impossible to provide, GRUU or not. IP
> 
> addresses alone will provide a ton of information. So, I think this is 
> clearly out of scope. That is why I've focused on grades of 
> pseudonymity, since that is what we are talking about here.
> 
> 
> 
> So, the question to the group is - do folks believe that some kind of 
> anonymity needs to be addressed in the baseline GRUU draft for it to be 
> useful? If so, what degree? Is is one of the ones above or something 
> else entirely?
> 
> I believe it would be not too hard to add pseudonymity, temporal 
> privacy, and limited serial pseudonymity (requriing a REGISTER refresh 
> to get a new pseudonym) to the specification. Anything beyond that I 
> think is far too complex. However, no doubt there are still issues 
> lurking here and these will require time to ferret out.
> 
> Thoughts?
> 
> Thanks,
> Jonathan R.
> 
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 09:03:12 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN7tI-0000Ye-5n; Tue, 12 Sep 2006 09:01:28 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN7tG-0000YZ-Kc
	for sip@ietf.org; Tue, 12 Sep 2006 09:01:26 -0400
Received: from sj-iport-3-in.cisco.com ([171.71.176.72]
	helo=sj-iport-3.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GN7tD-000205-9C for sip@ietf.org; Tue, 12 Sep 2006 09:01:26 -0400
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-3.cisco.com with ESMTP; 12 Sep 2006 06:01:21 -0700
X-IronPort-AV: i="4.09,153,1157353200"; 
	d="scan'208"; a="443036146:sNHT30273152"
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CD1KdH020085; Tue, 12 Sep 2006 06:01:20 -0700
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by sj-core-5.cisco.com (8.12.10/8.12.6) with ESMTP id k8CD1E1K021924;
	Tue, 12 Sep 2006 06:01:19 -0700 (PDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 09:01:18 -0400
Received: from [10.86.240.24] ([10.86.240.24]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 09:01:17 -0400
Message-ID: <4506AF9D.7090203@cisco.com>
Date: Tue, 12 Sep 2006 09:01:17 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <4505D286.7090105@cisco.com>	<17670.21181.729633.330969@rautu.tutpro.com>
	<17670.22667.949470.365821@rautu.tutpro.com>
In-Reply-To: <17670.22667.949470.365821@rautu.tutpro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Sep 2006 13:01:17.0832 (UTC)
	FILETIME=[89334080:01C6D66B]
DKIM-Signature: a=rsa-sha1; q=dns; l=1147; t=1158066080; x=1158930080;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DONUzYILMhsEbjhLpG/U2iddFvRU=3D;
	b=DKO4pFOyRKp+Q2evahNTr/nPkCNlqyOcvuNit7C9llqMNs81IV5OyS9ZxyexcHDWteVoj6AI
	K+6O4cyQgBV2uIDGxE5qvZHLJdE7sugt+ytN5HjAGkUkuuX28ZLu6BC/;
Authentication-Results: sj-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0bc60ec82efc80c84b8d02f4b0e4de22
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Juha,

So when somebody wants to make an anonymous call to the police, to 
report some issue, you don't think it important that the call be 
transferable to the correct department?

	Paul

Juha Heinanen wrote:
> after thinking this a bit more, it would actually be a very good idea
> not to support gruu at all with anonymous calling.  so i change my vote.
> let those people who want to make anonymous calls, fall back to non-gruu
> calls.
> 
> even if someone has chosen anonymous calling to be the default, the
> default can be overridden on per call basis using #31# dial prefix.  i
> personally never answer anonymous phone calls, because they usually come
> from telemarketing guys or some other "undercover" people.  so it is
> just good for those guys to loose some functionality.
> 
> -- juha
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 09:15:52 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN85C-0005cx-1U; Tue, 12 Sep 2006 09:13:46 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN85A-0005cr-Dt
	for sip@ietf.org; Tue, 12 Sep 2006 09:13:44 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GN859-0003xP-2y
	for sip@ietf.org; Tue, 12 Sep 2006 09:13:44 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id EDEE913F636; Tue, 12 Sep 2006 16:13:36 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (thymine200.gprs.dnafinland.fi [62.78.126.200])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id CB39913F605;
	Tue, 12 Sep 2006 16:13:21 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 8EFEDF0AE6; Tue, 12 Sep 2006 16:13:34 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17670.45694.84137.287683@rautu.tutpro.com>
Date: Tue, 12 Sep 2006 16:13:34 +0300
From: Juha Heinanen <jh@tutpro.com>
To: Paul Kyzivat <pkyzivat@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
In-Reply-To: <4506AF9D.7090203@cisco.com>
References: <4505D286.7090105@cisco.com>
	<17670.21181.729633.330969@rautu.tutpro.com>
	<17670.22667.949470.365821@rautu.tutpro.com>
	<4506AF9D.7090203@cisco.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 30ac594df0e66ffa5a93eb4c48bcb014
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Paul Kyzivat writes:

 > So when somebody wants to make an anonymous call to the police, to 
 > report some issue, you don't think it important that the call be 
 > transferable to the correct department?

i don't believe in soviet union style system with anonymous informers.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 09:33:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN8Le-00026R-Jn; Tue, 12 Sep 2006 09:30:46 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN8Ld-00026H-AX
	for sip@ietf.org; Tue, 12 Sep 2006 09:30:45 -0400
Received: from mailgw4.ericsson.se ([193.180.251.62])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GN8LT-0006hL-Qv
	for sip@ietf.org; Tue, 12 Sep 2006 09:30:45 -0400
Received: from esealmw129.eemea.ericsson.se (unknown [153.88.254.120])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	4078A8E0001; Tue, 12 Sep 2006 15:30:35 +0200 (CEST)
Received: from esealmw127.eemea.ericsson.se ([153.88.254.171]) by
	esealmw129.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 15:30:35 +0200
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw127.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 15:30:34 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 15:30:34 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB594017F1502@esealmw113.eemea.ericsson.se>
In-Reply-To: <17670.45694.84137.287683@rautu.tutpro.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbWbXC4GMEurJf2Qq6pvHp4DWQyvQAAg8Dw
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Juha Heinanen" <jh@tutpro.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 12 Sep 2006 13:30:34.0712 (UTC)
	FILETIME=[A061DD80:01C6D66F]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 2409bba43e9c8d580670fda8b695204a
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


In Finland people don't call the police. They grab a knife and take care
of things themselves :)=20

> -----Original Message-----
> From: Juha Heinanen [mailto:jh@tutpro.com]=20
> Sent: 12. syyskuuta 2006 16:14
> To: Paul Kyzivat
> Cc: IETF SIP List
> Subject: Re: [Sip] GRUU and Anonymity
>=20
> Paul Kyzivat writes:
>=20
>  > So when somebody wants to make an anonymous call to the=20
> police, to  > report some issue, you don't think it important=20
> that the call be  > transferable to the correct department?
>=20
> i don't believe in soviet union style system with anonymous informers.
>=20
> -- juha
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 09:35:53 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN8Ov-00042i-Is; Tue, 12 Sep 2006 09:34:09 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN8Ou-00042c-65
	for sip@ietf.org; Tue, 12 Sep 2006 09:34:08 -0400
Received: from mailgw4.ericsson.se ([193.180.251.62])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GN8Ok-00077a-0D
	for sip@ietf.org; Tue, 12 Sep 2006 09:34:08 -0400
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	504EF8E0001; Tue, 12 Sep 2006 15:33:55 +0200 (CEST)
Received: from esealmw128.eemea.ericsson.se ([153.88.254.172]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 15:33:54 +0200
Received: from eesmdmw020.eemea.ericsson.se ([159.107.3.34]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 15:33:54 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 15:33:52 +0200
Message-ID: <33D71F0FC0684C4C8A3BB76989EDED9C027C58C8@eesmdmw020.eemea.ericsson.se>
In-Reply-To: <4506AF15.9020707@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbWcBYxS0T25l/kSfWzS4blwGURlw==
From: "Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>,
	"Jeroen Van Bemmel" <jbemmel@zonnet.nl>
X-OriginalArrivalTime: 12 Sep 2006 13:33:54.0674 (UTC)
	FILETIME=[1791A520:01C6D670]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: c119f9923e40f08a1d7f390ce651ea92
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

With TRUU, the network drops the TRUU when the UE does not refresh it
anymore. The incentive for the UE is to not have to remember and refresh
all the obtained TRUUs.

/Javier

-----Original Message-----
From: Paul Kyzivat [mailto:pkyzivat@cisco.com]=20
Sent: martes, 12 de septiembre de 2006 14:59
To: Jeroen Van Bemmel
Cc: IETF SIP List
Subject: Re: [Sip] GRUU and Anonymity

The need to deallocate temporary gruus could be a problem. If you put
the responsibility on the UAC to do it, what incentive does it have? Its
easier to just not bother. And the registrar doesn't in general know
when the old temp gruu is no longer needed. You could try to couple it,
so that you can't get a new one without giving up your old one, but that
isn't necessarily workable. (Wanting a new gruu for a new call doesn't
mean that you are done with the earlier call.)

Its *way* better if the gruus are arranged so that there is no state
retained that must be deallocated.

	Paul

Jeroen Van Bemmel wrote:
> Andrew,
>=20
> Minor remark: de-allocation of a temporary GRUU would happen after
call tear down, and not as part of call setup. Moreover, it could be
optional.
>=20
> Regards,
>=20
> Jeroen
>=20
> -----Oorspronkelijk bericht -----
> Van: "Andrew Allen" <aallen@rim.com>
> Aan: "Jonathan Rosenberg" <jdrosen@cisco.com>; "IETF SIP List"=20
> <sip@ietf.org>
> Verzonden: 12-9-06 02:46
> Onderwerp: RE: [Sip] GRUU and Anonymity
>=20
>=20
> Jonathan,
>=20
> I don't think it is accurate to state that 3gpp has specified that the

> terminal (UE) must indicate privacy and hence it is very difficult to=20
> apply GRUU into 3gpp. This is what TS 24.229 actually states for UE=20
> behavior with regard to Anonymity:
>=20
> ----------------------------------------------------------------------
> --
> ----
> Where privacy is required, in any initial request for a dialog or=20
> request for a standalone transaction, the UE shall set the From header

> to "Anonymous".
>=20
> NOTE 5: The contents of the From header should not be relied upon to=20
> be modified by the network based on any privacy specified by the user=20
> either within the UE indication of privacy or by network subscription=20
> or network policy. Therefore the user should include the value
"Anonymous"
> whenever privacy is explicitly required. As the user may well have=20
> privacy requirements, terminal manufacturers should not automatically=20
> derive and include values in this header from the public user identity

> or other values stored in or derived from the UICC. Where the user has

> not expressed a preference in the configuration of the terminal=20
> implementation, the implementation should assume that privacy is=20
> required. Users that require to identify themselves, and are making=20
> calls to SIP destinations beyond the IM CN subsystem, where the=20
> destination does not implement RFC 3325 [34], will need to include a=20
> value in the From header other than Anonymous.
>=20
> ----------------------------------------------------------------------
> --
> ----
>=20
> My view is that the most important aspect to provide is Pseudonymity.
> This seems to provide an equivalent level of anonymity to including an

> IP address in the contact header as assumed in RFC 3261. Temporal=20
> Privacy along the lines you have described seems to be a nice to have=20
> which I think we should try and incorporate in the draft if the=20
> solution is easy to specify without delaying the completion. I think=20
> Serial Pseudonymity is a rat hole which really requires a full=20
> requirement discussion (particularly on the lifetime requirements) and

> also has all sorts of issues including that having a refresh=20
> registration every call would not be acceptable from a 3gpp wireless=20
> perspective. 3gpp has just completed an optimization of the call setup

> procedures to reduce the number of messages exchanged to the bare=20
> minimum in order to make call setup time acceptable so the addition of

> a REGISTER and 200 OK transaction to the call setup is not going to go
down very well.
>=20
> If you require true anonymity today with RFC 3261 you need an SBC=20
> anonymizer function to hide the IP Addresses and I think for now we=20
> can live with an SBC anonymizer mechanism performing similar hiding on

> GRUUs for those deployments that require it. Future work can attempt a

> more general and friendly solution to these more stringent privacy=20
> requirements which go beyond the privacy provided today using RFC
3261.
>=20
> Andrew
>=20
> =20
> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]
> Sent: Monday, September 11, 2006 5:18 PM
> To: IETF SIP List
> Subject: [Sip] GRUU and Anonymity
>=20
> Several folks got together to discuss the review comments on the GRUU=20
> spec. Much of the time was spent discussing the issue of anonymity.
>=20
> Today, GRUU doesn't provide any anonymity functions at all. Indeed,=20
> the recommendations for construction of gruus are such that they would

> contain the users AOR. So, if a user wants to make an anonymous call,=20
> what would they do? The GRUU spec says nothing about this, and=20
> unfortunately the answer is that they cannot use the GRUU=20
> specification at all.
>=20
> The point was raised that there were many places, such as Europe,=20
> where anonymous calls are the norm. This is because privacy laws=20
> require that caller ID be given out as an opt-in feature, and the
default is privacy.
>=20
> This results in a very large percentage of calls being anonymous. In=20
> these kinds of situations, GRUU would never get used, and the problems

> it solves (like making transfer work) won't be applicable.
>=20
> A similar problem arises in network deployments which utilize network=20
> signaled privacy (in other words, the phone doesn't know the call is=20
> anonymous, but the network does). To support these kinds of=20
> deployments,
>=20
> the UA has to act as if every call was anonymous. This is how 3gpp is=20
> currently spec'd out, and it would make it very difficult to apply=20
> GRUU into 3gpp.
>=20
> Thus, the concern was raised that a GRUU specification that didn't=20
> address anonymity at all was undeployable in many locales and unusable

> by many potential SDO customers. The question, then, is can it be=20
> addressed in this spec, and at what cost?
>=20
> Unfortunately, anonymity is a big, thorny and hard problem. Indeed,=20
> there are many different types of anonymity. Consequently, I think its

> worth looking at a few different properties and seeing what the cost=20
> would be to add them to the GRUU spec.
>=20
> Pseudonymity
> ------------
>=20
> One feature that can be provided is pseudonymity. The idea is that the

> registrar, when it first creates a GRUU for an AOR/insteance-ID pair,=20
> actually would create two. One is the 'normal' one (generally=20
> constructed by adding an opaque parameter to the AOR), and another is=20
> a pseudonym for the GRUU:
>=20
> sip:jdrosen@cisco.com;gruu;opaque=3D9asd8bvghasd8
> sip:9ujjkasd--998@cisco.com;gruu
>=20
> Both the pseudonym and the regular GRUU would be returned in the=20
> REGISTER response. The pseudonym would have the same temporal lifetime

> as the regular GRUU. The pseudonym can easily be constructed by=20
> encrypting the AOR and instance ID, or it can be computed and stored=20
> statefully.
>=20
> The pseudonym would have the property that one could not, by=20
> inspection,
>=20
> determine the AOR. However, the pseudonym persists indefinitely, and=20
> consequently, two subsequent calls from the same UA instance would be=20
> known as coming from the same UA instance. Also, a recipient of the=20
> pseudonym could call the user back, at that instance, at any time in=20
> the
>=20
> future.
>=20
> Adding this pseudonymity feature to GRUU is relatively low cost, in=20
> terms of complexity and time delay. I believe it would require the=20
> addition of one feature from:
>=20
> http://www.ietf.org/internet-drafts/draft-rosenberg-sip-identity-coexi
> st
> ence-00.txt
>=20
> namely, the user=3Danonymous URI parameter, so that a recipient knows =
to

> not try to render sip:9ujjkasd--998@cisco.com.
>=20
>=20
> Temporal Privacy
> ----------------
>=20
> There is probably a better name for this feature, but for now I'll=20
> call it temporal privacy.
>=20
> The idea is that the Contact header field contains a pseudonym. The UA

> at the other end of the call can use that pseudonym for a certain=20
> duration. After that duration expires, the pseudonym is invalid. Being

> invalid means that any entity which makes a call to that URI, will not

> cause the phone to ring and the call will not succeed.
>=20
> The most useful temporal scope is for the lifetime of the dialog. This

> is particularly useful for transfer and KPML, where that is exactly=20
> the desired temporal scope. However, other scopes could be possible.=20
> Indeed,
>=20
> another application of GRUU is in a call center, where you could call=20
> back the specific help desk person who you just talked to, without=20
> knowing their identity. This would work best with a temporal validity=20
> that is something like an hour or so, and possibly even longer.
>=20
> This is most easily implemented in the UA. Consider temporal privacy=20
> with a scope equal to the lifetime of a dialog. The UA would obtain a=20
> psedononymous GRUU as above, and then add a unique grid parameter for=20
> each distinct dialog. When the UA receives a request that was targeted

> towards that GRUU, it will know the grid that was used. If the=20
> corresponding dialog is still in progress, the request is accepted. If

> not, the request is rejected with a 403.
>=20
> Pushing the validity checking into the network is harder, since it=20
> would
>=20
> require proxies to retain dialog statefulness, store the correlation=20
> between grid and dialog, and know that the desired temporal scope of=20
> the
>=20
> anonymity is indeed for a dialog. No doubt some folks who like B2BUAs=20
> would be more than happy to do this.
>=20
> Adding this feature to the UA is relatively low cost (in terms of=20
> specification work).
>=20
> Note that, even though the grid would rotate on each call, the rest of

> the pseudononymous GRUU would not. This makes it easily to correlate.
> Thus, if Bob makes a call to Carol one day, and again to Carol the=20
> next day, Carol will know that this was the same person that called on

> the day previous.
>=20
> Serial Pseudonymity
> -------------------
>=20
> With serial pseudonymity, the UA would be able to get multiple=20
> pseudonyms, and use a different one for each dialog. The pseudonyms=20
> could not be correlated together, except that they come from the same=20
> domain. Serial pseudonymity is orthogonal to temporal privacy. Each of

> the pseudonyms can have any temporal lifetime that is desired. The=20
> most obvious lifetime is to bind the validity to that of the dialog=20
> the pseudonym is used in. This would allow a UA to have a different=20
> GRUU for each call, and for that GRUU only to be usable during the=20
> duration of the call.
>=20
> Serial pseudonymity is harder to address. The TRUU draft:
> http://www.ietf.org/internet-drafts/draft-jbemmel-sip-truu-02.txt
> takes a stab at this. Any solution to this problem needs to deal with=20
> the question of how the UA instance gets a new pseudonym (the TRUU=20
> spec proposes a REGISTER with a new Contact URI) and what its validity

> is (the TRUU spec says that the clients explicitly invalidate them at=20
> the end of the dialog). Its possible to separate the validity issue=20
> out. In particular, if the network treats them as valid for the=20
> duration of the registration, and they are rejected by the UA, there=20
> is no need for the client to explicitly de-allocate them. Without=20
> de-allocation, the pseodonym can be considered valid for the duration=20
> that the contact URI itself is registered to that AOR with that=20
> instance ID. Doing that is relatively easy to add to GRUU, I believe.
>=20
> However, obtaining them is something that is requried in any solution.

> Generating a register refresh is easy, however it has the drawback of=20
> incurring an additional delay and bandwidth utilization at the time of

> call setup. This may be a non-issue for enterprises or broadband=20
> access providers, but may be a huge issue for wireless (think 3gpp).
> Consequently, if folks believe that wireless providers will require=20
> serial pseudonymity, I suspect a query-based mechanism (like a=20
> REGISTER
> refresh) won't work. Any alternatives to that are much more
complicated.
>=20
> The two I can think of are to try and coordinate a generator function=20
> between UA and proxy, or more likely, to make use of a network privacy

> server ala RFC 3323 to request serial pseudonymity. Both would=20
> probably require specification beyond the scope of the current GRUU
spec.
>=20
> True Anonymity
> --------------
>=20
> In true anonymity, each request is truly without identity. Nothing -=20
> absolutely nothing - in the request tells you anything about who is=20
> making it. This feature is nearly impossible to provide, GRUU or not.=20
> IP
>=20
> addresses alone will provide a ton of information. So, I think this is

> clearly out of scope. That is why I've focused on grades of=20
> pseudonymity, since that is what we are talking about here.
>=20
>=20
>=20
> So, the question to the group is - do folks believe that some kind of=20
> anonymity needs to be addressed in the baseline GRUU draft for it to=20
> be useful? If so, what degree? Is is one of the ones above or=20
> something else entirely?
>=20
> I believe it would be not too hard to add pseudonymity, temporal=20
> privacy, and limited serial pseudonymity (requriing a REGISTER refresh

> to get a new pseudonym) to the specification. Anything beyond that I=20
> think is far too complex. However, no doubt there are still issues=20
> lurking here and these will require time to ferret out.
>=20
> Thoughts?
>=20
> Thanks,
> Jonathan R.
>=20
>=20



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 11:11:45 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GN9sK-0001WY-Gj; Tue, 12 Sep 2006 11:08:36 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GN9sI-0001Tm-Ce
	for sip@ietf.org; Tue, 12 Sep 2006 11:08:34 -0400
Received: from rwcrmhc11.comcast.net ([216.148.227.151])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GN9iw-0004ED-5Y
	for sip@ietf.org; Tue, 12 Sep 2006 10:58:55 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (rwcrmhc11) with ESMTP
	id <20060912145853m11009m9rqe>; Tue, 12 Sep 2006 14:58:53 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8CEwq1f017672
	for <sip@ietf.org>; Tue, 12 Sep 2006 10:58:52 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8CEwnwA017668;
	Tue, 12 Sep 2006 10:58:49 -0400
Date: Tue, 12 Sep 2006 10:58:49 -0400
Message-Id: <200609121458.k8CEwnwA017668@dragon.ariadne.com>
To: sip@ietf.org
Subject: Re: [Sip] GRUU and Anonymity
From: Dale.Worley@comcast.net
X-Spam-Score: 0.2 (/)
X-Scan-Signature: cab78e1e39c4b328567edb48482b6a69
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I don't see generating TRUUs (thanks, Jeroen!) as being that
difficult, even without going back to the Registrar for them.  The
following is a half-baked scheme to create TRUUs with serial and
temporal anonymity (thanks, Jonathan!).  But if I can cook this up in
5 minutes, someone who knows crypto should be able to devise something
that works in practice.

    The proxy gives the UA a GRUU used only for generating and routing
    TRUUs.  (This GRUU can be custom-made for this purpose by the UA
    generating a random UUID URN for use as an instance-ID.)

    The proxy also gives the UA a proxy-specific public key, PublicKey.

    The UA will generate a sequence of TRUUs, TRUU(0), TRUU(1),
    TRUU(2), etc.  The UA keeps a sequence counter for generating
    TRUUs, with permanent storage of: the last sequence number used, a
    sequence number before which all TRUUs are known to be invalid, and
    for those sequence numbers in between those two numbers, which are
    valid and which are invalid.

    (Perhaps a TRUU is used for just one call, and after that call is
    over, that TRUU is marked invalid.  A "call" may involve more than one
    dialog at the SIP level.)

    TRUU(n) = PublicKey(GRUU concat SequenceNumber)

    When a request with an TRUU as the request-URI arrives at the proxy,
    the proxy calculates:
        (GRUU, SequenceNumber) = PrivateKey(TRUU)
    It rewrites the request-URI to be the GRUU and appends a parameter to
    carry SequenceNumber.

    When the request arrives at the UA, it examines the SequenceNumber to
    determine whether to accept the request or not.  If it wants to reject
    the request, it does not respond 404 (as that may give away
    information about the UA), but rather 301 (Moved Permanently!) with a
    Contact address that is known to be invalid in the proxy's domain.
    The proxy will then generate a 404.

    Only the UA (or proxy) can generate the UA's TRUUs because only it
    knows its GRUU.  Since the proxy does not let the UA know the
    private key, malfunctioning UAs cannot disclose the private key,
    so no third party can dissect a TRUU.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 12:44:45 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNBK0-0000rX-3D; Tue, 12 Sep 2006 12:41:16 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNBJz-0000q8-FB
	for sip@ietf.org; Tue, 12 Sep 2006 12:41:15 -0400
Received: from jes-fe1.zx.nl ([194.187.76.132])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNBJu-00076J-5c
	for sip@ietf.org; Tue, 12 Sep 2006 12:41:15 -0400
Received: from Inbox ([84.241.202.207])
	by jes-fe1.zx.nl (Sun Java System Messaging Server 6.2-2.05 (built Apr
	28
	2005)) with ESMTP id <0J5H006LQQ7CKO30@jes-fe1.zx.nl> for sip@ietf.org;
	Tue, 12 Sep 2006 18:35:46 +0100 (WEST)
Date: Tue, 12 Sep 2006 18:41:11 +0200
From: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: RE: [Sip] GRUU and Anonymity
To: Paul Kyzivat <pkyzivat@cisco.com>
Message-id: <0J5H006LRQ7EKO30@jes-fe1.zx.nl>
MIME-version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Importance: normal
X-Priority: 3
X-Spam-Score: 1.2 (+)
X-Scan-Signature: 4d87d2aa806f79fed918a62e834505ca
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Paul (and others),

The reason that the TRUU draft proposes explicit invalidation=20
(which implies state at the registrar/proxy), is that I assumed a requireme=
nt that the UA would not even receive requests sent to an expired TRUU. The=
 idea behind that is that it would prevent SPAM from consuming (wireless) r=
esources; the UA could "step away" from an attack.

If this feature is not desired, then I agree a stateless approach is better=
 (at least not state linear in the number of clients). The UA could mint it=
s own TRUUs, along the lines that Dale sketched=20

Regards,
Jeroen

--Oorspronkelijk bericht -----
Van: "Paul Kyzivat" <pkyzivat@cisco.com>
Aan: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>
CC: "Andrew Allen" <aallen@rim.com>; "Jonathan Rosenberg" <jdrosen@cisco.co=
m>; "IETF SIP List" <sip@ietf.org>
Verzonden: 12-9-06 14:59
Onderwerp: Re: [Sip] GRUU and Anonymity

The need to deallocate temporary gruus could be a problem. If you put=20
the responsibility on the UAC to do it, what incentive does it have? Its=20
easier to just not bother. And the registrar doesn't in general know=20
when the old temp gruu is no longer needed. You could try to couple it,=20
so that you can't get a new one without giving up your old one, but that=20
isn't necessarily workable. (Wanting a new gruu for a new call doesn't=20
mean that you are done with the earlier call.)

Its *way* better if the gruus are arranged so that there is no state=20
retained that must be deallocated.

	Paul

Jeroen Van Bemmel wrote:
> Andrew,
>=20
> Minor remark: de-allocation of a temporary GRUU would happen after call t=
ear down, and not as part of call setup. Moreover, it could be optional.
>=20
> Regards,
>=20
> Jeroen
>=20
> -----Oorspronkelijk bericht -----
> Van: "Andrew Allen" <aallen@rim.com>
> Aan: "Jonathan Rosenberg" <jdrosen@cisco.com>; "IETF SIP List" <sip@ietf.=
org>
> Verzonden: 12-9-06 02:46


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Tue Sep 12 12:44:45 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNBKq-00018U-A9; Tue, 12 Sep 2006 12:42:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNBKo-00018O-8Y
	for sip@ietf.org; Tue, 12 Sep 2006 12:42:06 -0400
Received: from zcars04e.nortel.com ([47.129.242.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNBKn-0007Ca-09
	for sip@ietf.org; Tue, 12 Sep 2006 12:42:06 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04e.nortel.com (Switch-2.2.0/Switch-2.2.0) with ESMTP id
	k8CGZg118916; Tue, 12 Sep 2006 12:35:42 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 11:41:58 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D144310@zrc2hxm0.corp.nortel.com>
In-Reply-To: <4505D286.7090105@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbV6Gf6TOvb6k2TRw+ts61MpCAaoQAoNoXw
From: "Francois Audet" <audet@nortel.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>, "IETF SIP List" <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 8b30eb7682a596edff707698f4a80f7d
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Sent: Monday, September 11, 2006 2:18 PM
> To: IETF SIP List
> Subject: [Sip] GRUU and Anonymity
> Pseudonymity
> ------------
>=20
> One feature that can be provided is pseudonymity. The idea is=20
> that the registrar, when it first creates a GRUU for an=20
> AOR/insteance-ID pair, actually would create two. One is the=20
> 'normal' one (generally constructed by adding an opaque=20
> parameter to the AOR), and another is a pseudonym for the GRUU:
>=20
> sip:jdrosen@cisco.com;gruu;opaque=3D9asd8bvghasd8
> sip:9ujjkasd--998@cisco.com;gruu

I'm not sure that an annonymity feature that obfuscate the user name but
not
the domain name is good enough.

It may be good enough when the provider is Big Ma Bell, but not
otherwise.

If the people that are susceptible to call me in a specific domain is
small
enough, I could probably guess who the annonymous entity is.

It reminds me of a "confidential feedback" I submitted for my boss's
performance.=20
I discovered later that my feedback (submitted to my boss) didn't have
my name,=20
but it had my location (I was the only employee working for him located
the Bay=20
Area).

In other words, I don't think pseudonymity is good enough.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Tue Sep 12 12:44:45 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNBK0-0000rX-3D; Tue, 12 Sep 2006 12:41:16 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNBJz-0000q8-FB
	for sip@ietf.org; Tue, 12 Sep 2006 12:41:15 -0400
Received: from jes-fe1.zx.nl ([194.187.76.132])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNBJu-00076J-5c
	for sip@ietf.org; Tue, 12 Sep 2006 12:41:15 -0400
Received: from Inbox ([84.241.202.207])
	by jes-fe1.zx.nl (Sun Java System Messaging Server 6.2-2.05 (built Apr
	28
	2005)) with ESMTP id <0J5H006LQQ7CKO30@jes-fe1.zx.nl> for sip@ietf.org;
	Tue, 12 Sep 2006 18:35:46 +0100 (WEST)
Date: Tue, 12 Sep 2006 18:41:11 +0200
From: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: RE: [Sip] GRUU and Anonymity
To: Paul Kyzivat <pkyzivat@cisco.com>
Message-id: <0J5H006LRQ7EKO30@jes-fe1.zx.nl>
MIME-version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Importance: normal
X-Priority: 3
X-Spam-Score: 1.2 (+)
X-Scan-Signature: 4d87d2aa806f79fed918a62e834505ca
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Paul (and others),

The reason that the TRUU draft proposes explicit invalidation=20
(which implies state at the registrar/proxy), is that I assumed a requireme=
nt that the UA would not even receive requests sent to an expired TRUU. The=
 idea behind that is that it would prevent SPAM from consuming (wireless) r=
esources; the UA could "step away" from an attack.

If this feature is not desired, then I agree a stateless approach is better=
 (at least not state linear in the number of clients). The UA could mint it=
s own TRUUs, along the lines that Dale sketched=20

Regards,
Jeroen

--Oorspronkelijk bericht -----
Van: "Paul Kyzivat" <pkyzivat@cisco.com>
Aan: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>
CC: "Andrew Allen" <aallen@rim.com>; "Jonathan Rosenberg" <jdrosen@cisco.co=
m>; "IETF SIP List" <sip@ietf.org>
Verzonden: 12-9-06 14:59
Onderwerp: Re: [Sip] GRUU and Anonymity

The need to deallocate temporary gruus could be a problem. If you put=20
the responsibility on the UAC to do it, what incentive does it have? Its=20
easier to just not bother. And the registrar doesn't in general know=20
when the old temp gruu is no longer needed. You could try to couple it,=20
so that you can't get a new one without giving up your old one, but that=20
isn't necessarily workable. (Wanting a new gruu for a new call doesn't=20
mean that you are done with the earlier call.)

Its *way* better if the gruus are arranged so that there is no state=20
retained that must be deallocated.

	Paul

Jeroen Van Bemmel wrote:
> Andrew,
>=20
> Minor remark: de-allocation of a temporary GRUU would happen after call t=
ear down, and not as part of call setup. Moreover, it could be optional.
>=20
> Regards,
>=20
> Jeroen
>=20
> -----Oorspronkelijk bericht -----
> Van: "Andrew Allen" <aallen@rim.com>
> Aan: "Jonathan Rosenberg" <jdrosen@cisco.com>; "IETF SIP List" <sip@ietf.=
org>
> Verzonden: 12-9-06 02:46


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Tue Sep 12 12:44:45 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNBKq-00018U-A9; Tue, 12 Sep 2006 12:42:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNBKo-00018O-8Y
	for sip@ietf.org; Tue, 12 Sep 2006 12:42:06 -0400
Received: from zcars04e.nortel.com ([47.129.242.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNBKn-0007Ca-09
	for sip@ietf.org; Tue, 12 Sep 2006 12:42:06 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04e.nortel.com (Switch-2.2.0/Switch-2.2.0) with ESMTP id
	k8CGZg118916; Tue, 12 Sep 2006 12:35:42 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 11:41:58 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D144310@zrc2hxm0.corp.nortel.com>
In-Reply-To: <4505D286.7090105@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbV6Gf6TOvb6k2TRw+ts61MpCAaoQAoNoXw
From: "Francois Audet" <audet@nortel.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>, "IETF SIP List" <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 8b30eb7682a596edff707698f4a80f7d
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Sent: Monday, September 11, 2006 2:18 PM
> To: IETF SIP List
> Subject: [Sip] GRUU and Anonymity
> Pseudonymity
> ------------
>=20
> One feature that can be provided is pseudonymity. The idea is=20
> that the registrar, when it first creates a GRUU for an=20
> AOR/insteance-ID pair, actually would create two. One is the=20
> 'normal' one (generally constructed by adding an opaque=20
> parameter to the AOR), and another is a pseudonym for the GRUU:
>=20
> sip:jdrosen@cisco.com;gruu;opaque=3D9asd8bvghasd8
> sip:9ujjkasd--998@cisco.com;gruu

I'm not sure that an annonymity feature that obfuscate the user name but
not
the domain name is good enough.

It may be good enough when the provider is Big Ma Bell, but not
otherwise.

If the people that are susceptible to call me in a specific domain is
small
enough, I could probably guess who the annonymous entity is.

It reminds me of a "confidential feedback" I submitted for my boss's
performance.=20
I discovered later that my feedback (submitted to my boss) didn't have
my name,=20
but it had my location (I was the only employee working for him located
the Bay=20
Area).

In other words, I don't think pseudonymity is good enough.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Tue Sep 12 13:18:01 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNBqq-0004l4-Ef; Tue, 12 Sep 2006 13:15:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNBqp-0004ko-5d
	for sip@ietf.org; Tue, 12 Sep 2006 13:15:11 -0400
Received: from c243-111.rim.net ([216.9.243.111] helo=MHS01YKF.rim.net)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNBqn-0002cg-20
	for sip@ietf.org; Tue, 12 Sep 2006 13:15:11 -0400
Importance: normal
Priority: normal
Received: from ngw02ykf.rim.net ([10.102.108.31]) by MHS01YKF.rim.net with
	Microsoft SMTPSVC(6.0.3790.211); Tue, 12 Sep 2006 13:15:08 -0400
Received: from XCH20YKF.rim.net ([10.102.100.35]) by ngw02ykf.rim.net (SAVSMTP
	3.1.6.45) with SMTP id M2006091213150827179 ;
	Tue, 12 Sep 2006 13:15:08 -0400
Received: from XCH47YKF.rim.net ([10.64.31.217]) by XCH20YKF.rim.net with
	Microsoft SMTPSVC(5.0.2195.6713); Tue, 12 Sep 2006 13:15:08 -0400
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 13:15:07 -0400
Message-ID: <61968779B8AC4C4BAB421D4C12F008C0052C34C7@XCH47YKF.rim.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
thread-index: AcbWbXC4GMEurJf2Qq6pvHp4DWQyvQAAg8DwAAK96IA=
From: "Andrew Allen" <aallen@rim.com>
To: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>,
	"Juha Heinanen" <jh@tutpro.com>, "Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 12 Sep 2006 17:15:08.0781 (UTC)
	FILETIME=[FF8DA1D0:01C6D68E]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: f607d15ccc2bc4eaf3ade8ffa8af02a0
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Im surprised that Dean hasn't already commented that in Dallas it's
somewhat similar (except that there they grab a gun!)


-----Original Message-----
From: Christer Holmberg (JO/LMF) [mailto:christer.holmberg@ericsson.com]

Sent: Tuesday, September 12, 2006 9:31 AM
To: Juha Heinanen; Paul Kyzivat
Cc: IETF SIP List
Subject: RE: [Sip] GRUU and Anonymity


In Finland people don't call the police. They grab a knife and take care
of things themselves :)=20

> -----Original Message-----
> From: Juha Heinanen [mailto:jh@tutpro.com]=20
> Sent: 12. syyskuuta 2006 16:14
> To: Paul Kyzivat
> Cc: IETF SIP List
> Subject: Re: [Sip] GRUU and Anonymity
>=20
> Paul Kyzivat writes:
>=20
>  > So when somebody wants to make an anonymous call to the=20
> police, to  > report some issue, you don't think it important=20
> that the call be  > transferable to the correct department?
>=20
> i don't believe in soviet union style system with anonymous informers.
>=20
> -- juha
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



---------------------------------------------------------------------
This transmission (including any attachments) may contain confidential =
information, privileged material (including material protected by the =
solicitor-client or other applicable privileges), or constitute =
non-public information. Any use of this information by anyone other than =
the intended recipient is prohibited. If you have received this =
transmission in error, please immediately reply to the sender and delete =
this information from your system. Use, dissemination, distribution, or =
reproduction of this transmission by unintended recipients is not =
authorized and may be unlawful.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 13:18:01 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNBqU-0004Wc-DL; Tue, 12 Sep 2006 13:14:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNBqS-0004WS-KP
	for sip@ietf.org; Tue, 12 Sep 2006 13:14:48 -0400
Received: from c243-111.rim.net ([216.9.243.111] helo=MHS02YKF.rim.net)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNBqR-0002Xq-AV
	for sip@ietf.org; Tue, 12 Sep 2006 13:14:48 -0400
Received: from ngw02ykf.rim.net ([10.102.108.31]) by MHS02YKF.rim.net with
	Microsoft SMTPSVC(6.0.3790.211); Tue, 12 Sep 2006 13:14:42 -0400
Importance: normal
Priority: normal
Received: from XCH21YKF.rim.net ([10.102.100.36]) by ngw02ykf.rim.net (SAVSMTP
	3.1.6.45) with SMTP id M2006091213144227144 ;
	Tue, 12 Sep 2006 13:14:42 -0400
Received: from XCH47YKF.rim.net ([10.64.31.217]) by XCH21YKF.rim.net with
	Microsoft SMTPSVC(5.0.2195.6713); Tue, 12 Sep 2006 13:14:42 -0400
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 13:14:41 -0400
Message-ID: <61968779B8AC4C4BAB421D4C12F008C0052C34C3@XCH47YKF.rim.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
thread-index: AcbV6Gf6TOvb6k2TRw+ts61MpCAaoQAoNoXwAAES50A=
From: "Andrew Allen" <aallen@rim.com>
To: "Francois Audet" <audet@nortel.com>,
	"Jonathan Rosenberg" <jdrosen@cisco.com>, "IETF SIP List" <sip@ietf.org>
X-OriginalArrivalTime: 12 Sep 2006 17:14:42.0512 (UTC)
	FILETIME=[EFE54D00:01C6D68E]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 6cca30437e2d04f45110f2ff8dc1b1d5
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Is it any worse than the situation today where the contact address is an
IP Address where the netid part reveals the domain the user is in and if
there is any knowledge of that network topology and the subnet ids even
potentially the geographic location of the caller?

Certainly IP addresses can be correlated to not only reveal the identity
of the user but also potentially something about their location.

The question as I see it for the progress of GRUU is does GRUU have
bigger annonymity concerns than RFC 3261? I think solving all the
potential anonymity issues with SIP and IP is well beyond the scope of
the GRUU work.

-----Original Message-----
From: Francois Audet [mailto:audet@nortel.com]=20
Sent: Tuesday, September 12, 2006 12:42 PM
To: Jonathan Rosenberg; IETF SIP List
Subject: RE: [Sip] GRUU and Anonymity

=20

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Sent: Monday, September 11, 2006 2:18 PM
> To: IETF SIP List
> Subject: [Sip] GRUU and Anonymity
> Pseudonymity
> ------------
>=20
> One feature that can be provided is pseudonymity. The idea is=20
> that the registrar, when it first creates a GRUU for an=20
> AOR/insteance-ID pair, actually would create two. One is the=20
> 'normal' one (generally constructed by adding an opaque=20
> parameter to the AOR), and another is a pseudonym for the GRUU:
>=20
> sip:jdrosen@cisco.com;gruu;opaque=3D9asd8bvghasd8
> sip:9ujjkasd--998@cisco.com;gruu

I'm not sure that an annonymity feature that obfuscate the user name but
not
the domain name is good enough.

It may be good enough when the provider is Big Ma Bell, but not
otherwise.

If the people that are susceptible to call me in a specific domain is
small
enough, I could probably guess who the annonymous entity is.

It reminds me of a "confidential feedback" I submitted for my boss's
performance.=20
I discovered later that my feedback (submitted to my boss) didn't have
my name,=20
but it had my location (I was the only employee working for him located
the Bay=20
Area).

In other words, I don't think pseudonymity is good enough.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



---------------------------------------------------------------------
This transmission (including any attachments) may contain confidential =
information, privileged material (including material protected by the =
solicitor-client or other applicable privileges), or constitute =
non-public information. Any use of this information by anyone other than =
the intended recipient is prohibited. If you have received this =
transmission in error, please immediately reply to the sender and delete =
this information from your system. Use, dissemination, distribution, or =
reproduction of this transmission by unintended recipients is not =
authorized and may be unlawful.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 13:34:58 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNC7f-0002H0-6n; Tue, 12 Sep 2006 13:32:35 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNC7d-0002GY-7D
	for sip@ietf.org; Tue, 12 Sep 2006 13:32:33 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNC7b-0004Wr-HM
	for sip@ietf.org; Tue, 12 Sep 2006 13:32:33 -0400
Received: from sj-dkim-5.cisco.com ([171.68.10.79])
	by sj-iport-5.cisco.com with ESMTP; 12 Sep 2006 10:32:30 -0700
X-IronPort-AV: i="4.09,155,1157353200"; 
	d="scan'208"; a="320351866:sNHT467577264"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-5.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CHWUVq017118; Tue, 12 Sep 2006 10:32:30 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8CHWU6W020973;
	Tue, 12 Sep 2006 10:32:30 -0700 (PDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 13:32:29 -0400
Received: from [10.86.240.24] ([10.86.240.24]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 13:32:29 -0400
Message-ID: <4506EF2C.40702@cisco.com>
Date: Tue, 12 Sep 2006 13:32:28 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Dale.Worley@comcast.net
Subject: Re: [Sip] GRUU and Anonymity
References: <200609121458.k8CEwnwA017668@dragon.ariadne.com>
In-Reply-To: <200609121458.k8CEwnwA017668@dragon.ariadne.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Sep 2006 17:32:29.0434 (UTC)
	FILETIME=[6BD4ADA0:01C6D691]
DKIM-Signature: a=rsa-sha1; q=dns; l=5088; t=1158082350; x=1158946350;
	c=relaxed/simple; s=sjdkim5002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DONUzYILMhsEbjhLpG/U2iddFvRU=3D;
	b=V+oS10gT9geHCC62Ly5/s2X4LDIG9EafMBQdVtzEbm2zpHyW31UF4o3mUd1gRrRm0su9WAiZ
	7phnbZIdm4O0taiwzs18sICSrMTuwaAVlsxtM/ddwUXIdbEx/wfNmpOy;
Authentication-Results: sj-dkim-5.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: a87a9cdae4ac5d3fbeee75cd0026d632
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Dale,

I'm not sure I follow all the details, but I get the gist. I gather the 
proxy isn't expected to have any idea which sequence numbers are/aren't 
valid. If so, then it seems that the sequence number is analogous to the 
grid parameter. It may be possible align the two approaches closely.

For instance, perhaps the normal gruu is of form:
	sip:user@domain;gruu;opaque=xyz;grid=abc

Then an anonymous form of it could be
	sip:PublicKey(user,opaque,grid)@domain;gruu

and as you suggest, the proxy could turn this back into the 
non-anonymous form and then process it normally. Ultimately the UA would 
receive the grid.

But a piece I am missing in the above and below is how the proxy 
determines what private key to apply to the incoming truu. It could 
potentially get the one currently assigned to a registered contact, but 
to do so it would need to know what user, and then which contact.

I guess the anonymous form of the gruu could be:
	sip:PublicKey(user,opaque,grid)@domain;gruu;key=foo

where foo is either the public key or an index into all the private keys 
held by the proxy. But that then provides a value that can be used to 
correlate anonymous gruus from the same source. And it also dictates 
some special state storage in the proxy.

Another messy aspect of this is that it couples the UA and the proxy 
regarding the details of the format of the URI, and that might cause 
some difficulties.

For instance, one problem I have encountered with IMS (and which may 
apply to other large domains) is that the user space is partitioned, 
with a different home proxy handling each partition. In the kind of 
scheme you have proposed, it becomes necessary to guarantee that 
anonymous gruus are routed to the proper home proxy. There are no doubt 
a bunch of ways to do that, but I think it all comes down to either 
making a shared table of all the assigned anonymous gruus, or else 
putting something into the gruu that correlates 1:1 with which home 
proxy is responsible. The shared table seems expecially troublesome. 
Providing correlator to the home proxy is less so, but may still be 
offensive to some. Coming up with a mechanism that distributes the 
construction to the UA while providing the system enough flexibility 
about how the result is structured is at least a little tricky. This is 
the "generator" that Jonathan was talking about as an alternative.

	Paul

Dale.Worley@comcast.net wrote:
> I don't see generating TRUUs (thanks, Jeroen!) as being that
> difficult, even without going back to the Registrar for them.  The
> following is a half-baked scheme to create TRUUs with serial and
> temporal anonymity (thanks, Jonathan!).  But if I can cook this up in
> 5 minutes, someone who knows crypto should be able to devise something
> that works in practice.
> 
>     The proxy gives the UA a GRUU used only for generating and routing
>     TRUUs.  (This GRUU can be custom-made for this purpose by the UA
>     generating a random UUID URN for use as an instance-ID.)
> 
>     The proxy also gives the UA a proxy-specific public key, PublicKey.
> 
>     The UA will generate a sequence of TRUUs, TRUU(0), TRUU(1),
>     TRUU(2), etc.  The UA keeps a sequence counter for generating
>     TRUUs, with permanent storage of: the last sequence number used, a
>     sequence number before which all TRUUs are known to be invalid, and
>     for those sequence numbers in between those two numbers, which are
>     valid and which are invalid.
> 
>     (Perhaps a TRUU is used for just one call, and after that call is
>     over, that TRUU is marked invalid.  A "call" may involve more than one
>     dialog at the SIP level.)
> 
>     TRUU(n) = PublicKey(GRUU concat SequenceNumber)
> 
>     When a request with an TRUU as the request-URI arrives at the proxy,
>     the proxy calculates:
>         (GRUU, SequenceNumber) = PrivateKey(TRUU)
>     It rewrites the request-URI to be the GRUU and appends a parameter to
>     carry SequenceNumber.
> 
>     When the request arrives at the UA, it examines the SequenceNumber to
>     determine whether to accept the request or not.  If it wants to reject
>     the request, it does not respond 404 (as that may give away
>     information about the UA), but rather 301 (Moved Permanently!) with a
>     Contact address that is known to be invalid in the proxy's domain.
>     The proxy will then generate a 404.
> 
>     Only the UA (or proxy) can generate the UA's TRUUs because only it
>     knows its GRUU.  Since the proxy does not let the UA know the
>     private key, malfunctioning UAs cannot disclose the private key,
>     so no third party can dissect a TRUU.
> 
> Dale
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 13:40:50 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNCDp-000696-EF; Tue, 12 Sep 2006 13:38:57 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNCDn-000691-Ju
	for sip@ietf.org; Tue, 12 Sep 2006 13:38:55 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNCDm-0005cz-Ba
	for sip@ietf.org; Tue, 12 Sep 2006 13:38:55 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8CHcaw02268; Tue, 12 Sep 2006 13:38:36 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 12:38:08 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D14445F@zrc2hxm0.corp.nortel.com>
In-Reply-To: <61968779B8AC4C4BAB421D4C12F008C0052C34C3@XCH47YKF.rim.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbV6Gf6TOvb6k2TRw+ts61MpCAaoQAoNoXwAAES50AAAQNmgA==
From: "Francois Audet" <audet@nortel.com>
To: "Andrew Allen" <aallen@rim.com>, "Jonathan Rosenberg" <jdrosen@cisco.com>, 
	"IETF SIP List" <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 798b2e660f1819ae38035ac1d8d5e3ab
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
> Is it any worse than the situation today where the contact=20
> address is an IP Address where the netid part reveals the=20
> domain the user is in and if there is any knowledge of that=20
> network topology and the subnet ids even potentially the=20
> geographic location of the caller?
>
> Certainly IP addresses can be correlated to not only reveal=20
> the identity of the user but also potentially something about=20
> their location.
>=20
> The question as I see it for the progress of GRUU is does=20
> GRUU have bigger annonymity concerns than RFC 3261? I think=20
> solving all the potential anonymity issues with SIP and IP is=20
> well beyond the scope of the GRUU work.

I guess what I'm trying to say is that if we need annonymity,
it needs to be full annonymity. I don't see a value in "pseudonymity".

So, I agree with you. When we DO solve annonymity, it needs to
work with GRUU and everthing else. In the meanwhile, I don't think GRUU=20
is special and requires immediately a solution to annonymity.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 15:05:34 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNDWC-0007Rs-7g; Tue, 12 Sep 2006 15:02:00 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNDWB-0007Rk-Ct
	for sip@ietf.org; Tue, 12 Sep 2006 15:01:59 -0400
Received: from nylon.softarmor.com ([66.135.38.164])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNDW9-00014C-1x
	for sip@ietf.org; Tue, 12 Sep 2006 15:01:59 -0400
Received: from [192.168.2.101] ([12.5.186.27]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.1/8.13.1) with ESMTP id k8CI4Zvb005034
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Tue, 12 Sep 2006 13:04:36 -0500
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0D14445F@zrc2hxm0.corp.nortel.com>
References: <1ECE0EB50388174790F9694F77522CCF0D14445F@zrc2hxm0.corp.nortel.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <748A109E-43E5-4375-B641-5BBE7EEE8889@softarmor.com>
Content-Transfer-Encoding: 7bit
From: Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 14:01:48 -0500
To: Francois Audet <audet@nortel.com>
X-Mailer: Apple Mail (2.752.2)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 39bd8f8cbb76cae18b7e23f7cf6b2b9f
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


I'll try and summarize. Please correct me if I'm wrong:

1) GRUU is required for successful call transfer whenever a target is  
behind a NAT relative to either the transferor or transferee or both.

2) Call transfer functions are a requirement for the operational  
environment. Therefore, all calls originating from a NATed node must  
be made using a GRUU.

3) Call transfers made using GRUU as it is currently specified cannot  
be made legally on a service operated in a Euro-style privacy regime  
when the identity of the transferee and target must be protected.  
Note that signaling of the privacy requirements of a transfer target  
is, AFAIK, out of the scope of anything we've done so far.

4) To expand on #3, call transfers using GRUU as currently specified  
can never be made without revealing the identity of the transferee to  
the target

5) Further, unless an aliasing mechanism outside the scope of GRUU is  
available, the AOR of the transfer target is always revealed to the  
transferee, so this subaspect may not be a GRUU problem. Perhaps we  
should concentrate on accidental revelation of the transferee to the  
target?


Question: Does this conundrum mean we should not advance GRUU until  
we figure out something that might work?

Possible Solution: Find a way for the transferor to construct a  
"GRUU" (or at least a suitable alias)  for each of the transferee and  
the target to use for the duration of the transfer dialog.

--
Dean


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 15:08:04 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNDaF-00011R-3F; Tue, 12 Sep 2006 15:06:11 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNDaD-00011M-SK
	for sip@ietf.org; Tue, 12 Sep 2006 15:06:09 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNDaB-0001SZ-IM
	for sip@ietf.org; Tue, 12 Sep 2006 15:06:09 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 12 Sep 2006 15:06:07 -0400
X-IronPort-AV: i="4.09,155,1157342400"; 
	d="scan'208"; a="102049726:sNHT32100932"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CJ67le013708; Tue, 12 Sep 2006 15:06:07 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8CJ66dM012354; 
	Tue, 12 Sep 2006 15:06:07 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 15:06:06 -0400
Received: from [161.44.55.64] ([161.44.55.64]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 15:06:06 -0400
Message-ID: <4507051E.4000002@cisco.com>
Date: Tue, 12 Sep 2006 15:06:06 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <1ECE0EB50388174790F9694F77522CCF0D14445F@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0D14445F@zrc2hxm0.corp.nortel.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Sep 2006 19:06:06.0503 (UTC)
	FILETIME=[7FDD6370:01C6D69E]
DKIM-Signature: a=rsa-sha1; q=dns; l=1953; t=1158087967; x=1158951967;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity
	|To:Francois=20Audet=20<audet@nortel.com>;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=k7i6IQtkCSH/K42ncHzb1RfMAVxInh+Mk3yMqIj9HpQjcvJHqjzjGOL1iP2zvfmVJWWMO8EJ
	ip477X9z5p58AmIaKe+2WSZpJiYOkjA9oeImFrlqPiOTVFtOF0JXTuB/;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7aafa0432175920a4b3e118e16c5cb64
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

inline.

Francois Audet wrote:

>  
> 
>>Is it any worse than the situation today where the contact 
>>address is an IP Address where the netid part reveals the 
>>domain the user is in and if there is any knowledge of that 
>>network topology and the subnet ids even potentially the 
>>geographic location of the caller?
>>
>>Certainly IP addresses can be correlated to not only reveal 
>>the identity of the user but also potentially something about 
>>their location.
>>
>>The question as I see it for the progress of GRUU is does 
>>GRUU have bigger annonymity concerns than RFC 3261? I think 
>>solving all the potential anonymity issues with SIP and IP is 
>>well beyond the scope of the GRUU work.
> 
> 
> I guess what I'm trying to say is that if we need annonymity,
> it needs to be full annonymity. I don't see a value in "pseudonymity".

Why? Certainly there are privacy applications (such as calling the 
police to anonymously report an incident) where pseudonymity is probably 
sufficient.

> 
> So, I agree with you. When we DO solve annonymity, it needs to
> work with GRUU and everthing else. In the meanwhile, I don't think GRUU 
> is special and requires immediately a solution to annonymity.
> 

You may have to wait a while. A LONG while.

In:
http://www.jdrosen.net/papers/draft-rosenberg-sip-identity-privacy-00.txt

I took a stab at some thoughts on true anonymity. Its nearly impossible 
to do. Even anonymizers aren't sufficient. It is possible that the only 
solutions require crazy BGP hacks like I describe else a global, massive 
p2p mesh.

-Jonathan R.

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 15:08:47 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNDbD-0001Dg-50; Tue, 12 Sep 2006 15:07:11 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNDbC-0001Da-6R
	for sip@ietf.org; Tue, 12 Sep 2006 15:07:10 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNDbA-0001hB-Tp
	for sip@ietf.org; Tue, 12 Sep 2006 15:07:10 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 12 Sep 2006 15:07:08 -0400
X-IronPort-AV: i="4.09,155,1157342400"; 
	d="scan'208"; a="102049982:sNHT33802864"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CJ78JM024229; Tue, 12 Sep 2006 15:07:08 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8CJ78uI006876; 
	Tue, 12 Sep 2006 15:07:08 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 15:07:08 -0400
Received: from [161.44.55.64] ([161.44.55.64]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 15:07:07 -0400
Message-ID: <4507055B.2030203@cisco.com>
Date: Tue, 12 Sep 2006 15:07:07 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <4505D286.7090105@cisco.com>	<17670.21181.729633.330969@rautu.tutpro.com>
	<17670.22667.949470.365821@rautu.tutpro.com>
In-Reply-To: <17670.22667.949470.365821@rautu.tutpro.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Sep 2006 19:07:07.0850 (UTC)
	FILETIME=[A46E32A0:01C6D69E]
DKIM-Signature: a=rsa-sha1; q=dns; l=1167; t=1158088028; x=1158952028;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity
	|To:Juha=20Heinanen=20<jh@tutpro.com>;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=VTa+rlVObS1l95E/tbWhACcMikXoqHuTwhAEHlDLVYspDohdA7k3CDfcSgabKTn1Adq8pu3n
	9ES3OnwwkZ5VEg9sWm3O7xvpwnUwXlNkRzAWehUDeE0tnKgxNZ9T2B0m;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9466e0365fc95844abaf7c3f15a05c7d
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

My question is whether this is just a personal bias against anonymous 
calls (which is fine) or a belief that pseudonymity will not meet the 
regulatory requirements which you need to meet.

-JOnathan R.

Juha Heinanen wrote:

> after thinking this a bit more, it would actually be a very good idea
> not to support gruu at all with anonymous calling.  so i change my vote.
> let those people who want to make anonymous calls, fall back to non-gruu
> calls.
> 
> even if someone has chosen anonymous calling to be the default, the
> default can be overridden on per call basis using #31# dial prefix.  i
> personally never answer anonymous phone calls, because they usually come
> from telemarketing guys or some other "undercover" people.  so it is
> just good for those guys to loose some functionality.
> 
> -- juha
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 15:27:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNDso-0007c8-LG; Tue, 12 Sep 2006 15:25:22 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNDsm-0007c0-Fw
	for sip@ietf.org; Tue, 12 Sep 2006 15:25:20 -0400
Received: from alnrmhc11.comcast.net ([204.127.225.91])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNDsl-00068t-7X
	for sip@ietf.org; Tue, 12 Sep 2006 15:25:20 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc11) with ESMTP
	id <20060912192518b1100agm4ae>; Tue, 12 Sep 2006 19:25:18 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8CJPH1f023895
	for <sip@ietf.org>; Tue, 12 Sep 2006 15:25:17 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8CJPHxF023891;
	Tue, 12 Sep 2006 15:25:17 -0400
Date: Tue, 12 Sep 2006 15:25:17 -0400
Message-Id: <200609121925.k8CJPHxF023891@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <4506EF2C.40702@cisco.com> (pkyzivat@cisco.com)
Subject: Re: [Sip] GRUU and Anonymity
References: <200609121458.k8CEwnwA017668@dragon.ariadne.com>
	<4506EF2C.40702@cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 0a7aa2e6e558383d84476dc338324fab
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Paul Kyzivat <pkyzivat@cisco.com>

   I'm not sure I follow all the details, but I get the gist. I gather the 
   proxy isn't expected to have any idea which sequence numbers are/aren't 
   valid. If so, then it seems that the sequence number is analogous to the 
   grid parameter. It may be possible align the two approaches closely.

   For instance, perhaps the normal gruu is of form:
	   sip:user@domain;gruu;opaque=xyz;grid=abc

   Then an anonymous form of it could be
	   sip:PublicKey(user,opaque,grid)@domain;gruu

   and as you suggest, the proxy could turn this back into the 
   non-anonymous form and then process it normally. Ultimately the UA would 
   receive the grid.

The reason that the pseudo-grid's are numbers is so that the UA can
store a threshold, before which all pseudo-grid's are known to be
invalid.  If they didn't form an ordered sequence, the UA would have
to record in non-volatile memory all invalid ones.  Or all valid ones.

Uh, yes, the number of valid ones at any given moment is expected to
be small.  So you don't really need them to be numbers, as long as
there is some way to avoid using the same one twice (very often).

   But a piece I am missing in the above and below is how the proxy 
   determines what private key to apply to the incoming truu. It could 
   potentially get the one currently assigned to a registered contact, but 
   to do so it would need to know what user, and then which contact.

   I guess the anonymous form of the gruu could be:
	   sip:PublicKey(user,opaque,grid)@domain;gruu;key=foo

There's only one private key for the domain.

   Another messy aspect of this is that it couples the UA and the proxy 
   regarding the details of the format of the URI, and that might cause 
   some difficulties.

Yeah, it's a pretty tight coupling between the processing in the proxy
and in the UA.  In particular, they have to implement opposite halves
of the encryption operation.

   For instance, one problem I have encountered with IMS (and which may 
   apply to other large domains) is that the user space is partitioned, 
   with a different home proxy handling each partition. In the kind of 
   scheme you have proposed, it becomes necessary to guarantee that 
   anonymous gruus are routed to the proper home proxy.

Not really.  Since there is only one private key, any proxy can open
any TRUU for the domain.  Once it does that, it has the GRUU for the
UA, but we already assume that any proxy can route any GRUU for the
domain.

This scheme seems to have a problem in that it's not too hard to forge
TRUUs that might get partially routed before they are rejected.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 15:27:57 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNDti-0007jE-KV; Tue, 12 Sep 2006 15:26:18 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNDth-0007j9-Ia
	for sip@ietf.org; Tue, 12 Sep 2006 15:26:17 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNDtf-0006Sv-6g
	for sip@ietf.org; Tue, 12 Sep 2006 15:26:17 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 0B0C213F8A6; Tue, 12 Sep 2006 22:26:11 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (anneal165.gprs.dnafinland.fi [62.78.105.165])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id E55A913F87D;
	Tue, 12 Sep 2006 22:25:52 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 19572F024A; Tue, 12 Sep 2006 22:26:00 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17671.2503.889463.457383@rautu.tutpro.com>
Date: Tue, 12 Sep 2006 22:25:59 +0300
From: Juha Heinanen <jh@tutpro.com>
To: Jonathan Rosenberg <jdrosen@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
In-Reply-To: <4507055B.2030203@cisco.com>
References: <4505D286.7090105@cisco.com>
	<17670.21181.729633.330969@rautu.tutpro.com>
	<17670.22667.949470.365821@rautu.tutpro.com>
	<4507055B.2030203@cisco.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d6b246023072368de71562c0ab503126
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Jonathan Rosenberg writes:

 > My question is whether this is just a personal bias against anonymous 
 > calls (which is fine) or a belief that pseudonymity will not meet the 
 > regulatory requirements which you need to meet.

jonathan,

there is personal bias, but what comes to regulatory requirements in
europe, as i said, they currently only apply to calls terminating from
sip to pstn and wise versa.  in those cases anonymity is easy to
accomplish with or without gruu without any additions to rfc3261 or the
current gruu spec.

what comes to anonymity of sip-to-sip calls, in my opinion it is not
sufficient if only user part of uri is anonymous, also the host part
needs to be.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 15:30:12 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNDvk-0000VY-DY; Tue, 12 Sep 2006 15:28:24 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNDvj-0000VT-K7
	for sip@ietf.org; Tue, 12 Sep 2006 15:28:23 -0400
Received: from rwcrmhc13.comcast.net ([204.127.192.83])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNDvi-0006sg-C4
	for sip@ietf.org; Tue, 12 Sep 2006 15:28:23 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (rwcrmhc13) with ESMTP
	id <20060912192821m1300cjtb7e>; Tue, 12 Sep 2006 19:28:21 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8CJSK1f023962
	for <sip@ietf.org>; Tue, 12 Sep 2006 15:28:20 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8CJSKiS023958;
	Tue, 12 Sep 2006 15:28:20 -0400
Date: Tue, 12 Sep 2006 15:28:20 -0400
Message-Id: <200609121928.k8CJSKiS023958@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <0J5H006LRQ7EKO30@jes-fe1.zx.nl> (jbemmel@zonnet.nl)
Subject: Re: [Sip] GRUU and Anonymity
References: <0J5H006LRQ7EKO30@jes-fe1.zx.nl>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: cf4fa59384e76e63313391b70cd0dd25
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Jeroen Van Bemmel <jbemmel@zonnet.nl>

   The reason that the TRUU draft proposes explicit invalidation
   (which implies state at the registrar/proxy), is that I assumed a
   requirement that the UA would not even receive requests sent to an
   expired TRUU. The idea behind that is that it would prevent SPAM
   from consuming (wireless) resources; the UA could "step away" from
   an attack.

Perhaps a merged implementation is feasible -- With every registration
refresh, the UA provides the proxy with the minimum TRUU sequence
number that is now valid.  This requires no more messages, but it
allows the proxy to block any SPIT that uses a TRUU that is
significantly out of date.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 16:13:11 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNEaI-0004Ww-9H; Tue, 12 Sep 2006 16:10:18 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNEaG-0004Wr-Rp
	for sip@ietf.org; Tue, 12 Sep 2006 16:10:16 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNEaE-0004mE-9t
	for sip@ietf.org; Tue, 12 Sep 2006 16:10:16 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 12 Sep 2006 13:10:14 -0700
X-IronPort-AV: i="4.09,155,1157353200"; 
	d="scan'208"; a="41304209:sNHT90574392"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CKAEaM017545; Tue, 12 Sep 2006 16:10:14 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8CKA8uM009848; 
	Tue, 12 Sep 2006 16:10:13 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 16:10:09 -0400
Received: from [161.44.55.134] ([161.44.55.134]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 16:10:08 -0400
Message-ID: <4507141F.3010509@cisco.com>
Date: Tue, 12 Sep 2006 16:10:07 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: Re: [Sip] GRUU and Anonymity
References: <0J5H006LRQ7EKO30@jes-fe1.zx.nl>
In-Reply-To: <0J5H006LRQ7EKO30@jes-fe1.zx.nl>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Sep 2006 20:10:08.0821 (UTC)
	FILETIME=[72109650:01C6D6A7]
DKIM-Signature: a=rsa-sha1; q=dns; l=1169; t=1158091814; x=1158955814;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity
	|To:Jeroen=20Van=20Bemmel=20<jbemmel@zonnet.nl>;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=ydqioOVrB+8jlBT695fJuZFRfV1ndIyn5yQsqiP6/WWLKXlBwwAyYzV7lEzYkv2YPs8wJH5+
	BbPk9jyRVOWKv0ffmI4oU7s5hBCQAIcZOIc7i6D/+6kIUaRRFyhUzbiX;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e5ba305d0e64821bf3d8bc5d3bb07228
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Jeroen Van Bemmel wrote:

> Paul (and others),
> 
> The reason that the TRUU draft proposes explicit invalidation (which
> implies state at the registrar/proxy), is that I assumed a
> requirement that the UA would not even receive requests sent to an
> expired TRUU. The idea behind that is that it would prevent SPAM from
> consuming (wireless) resources; the UA could "step away" from an
> attack.

Thats an optimization, and its preventing something else entirely. 
Namely, it has nothing to do with anonymity at all. It has to do with 
DoS prevention or malicious attack prevention. Indeed it is better 
characterized as an anti-spam measure than anything else. Note that:

http://www.jdrosen.net/papers/draft-ietf-sipping-spam-02.txt

actually discusses Limited Use Addresses as an anti-spam vehicle.

-Jonathan R.

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 17:27:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNFjp-00052e-Vq; Tue, 12 Sep 2006 17:24:13 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNFjn-0004wp-0n
	for sip@ietf.org; Tue, 12 Sep 2006 17:24:11 -0400
Received: from smtp4.versatel.nl ([62.58.50.91])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNFY4-0004HH-Gt
	for sip@ietf.org; Tue, 12 Sep 2006 17:12:05 -0400
Received: (qmail 3793 invoked by uid 0); 12 Sep 2006 21:11:41 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp4.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 12 Sep 2006 21:11:41 -0000
Message-ID: <004601c6d6b0$104037b0$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>
References: <0J5H006LRQ7EKO30@jes-fe1.zx.nl> <4507141F.3010509@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 23:11:49 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 8b431ad66d60be2d47c7bfeb879db82c
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



> Jeroen Van Bemmel wrote:
>
>> Paul (and others),
>>
>> The reason that the TRUU draft proposes explicit invalidation (which
>> implies state at the registrar/proxy), is that I assumed a
>> requirement that the UA would not even receive requests sent to an
>> expired TRUU. The idea behind that is that it would prevent SPAM from
>> consuming (wireless) resources; the UA could "step away" from an
>> attack.
>
> Thats an optimization, and its preventing something else entirely. Namely, 
> it has nothing to do with anonymity at all. It has to do with DoS 
> prevention or malicious attack prevention. Indeed it is better 
> characterized as an anti-spam measure than anything else. Note that:
>
> http://www.jdrosen.net/papers/draft-ietf-sipping-spam-02.txt
>
> actually discusses Limited Use Addresses as an anti-spam vehicle.
>
> -Jonathan R.
>

Truu, I only wanted to mention it to indicate there could be other 
considerations. I did add that reference to my working copy of the draft 
some time ago.

I believe it is possible to provide several "flavours" of GRUUs

1) minted by the domain, possibly with instance id, as currently defined
2) with limited lifetime
3) with explicit invalidation, ie blocked by the proxy (eg as anti-DoS/spam 
mechanism)
4) using encrypted pseudonyms generated by the UAC (to protect against 
correlation)

Although I see a need for these features, I also feel that the current GRUU 
draft provides sufficient value in itself. Moreover, the draft does not 
appear to prohibit adding these features at a later point in time. My 
proposal would be to finish the GRUU draft as-is, and define a WG work item 
for these additional features. Ultimately, an UA could then request and use 
the type of GRUU that is appropriate for its context (subject to domain 
policy).

Regards,

Jeroen



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Tue Sep 12 17:27:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNFjo-0004z1-Fw; Tue, 12 Sep 2006 17:24:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNFjm-0004wq-Ot
	for sip@ietf.org; Tue, 12 Sep 2006 17:24:10 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNFYS-0004Ip-W6
	for sip@ietf.org; Tue, 12 Sep 2006 17:12:31 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 12 Sep 2006 17:12:28 -0400
X-IronPort-AV: i="4.09,155,1157342400"; 
	d="scan'208"; a="102073519:sNHT32222754"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CLCSAU012694; Tue, 12 Sep 2006 17:12:28 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8CLCSdM018029; 
	Tue, 12 Sep 2006 17:12:28 -0400 (EDT)
Received: from xmb-rtp-20b.amer.cisco.com ([64.102.31.53]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 17:12:28 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 17:12:27 -0400
Message-ID: <072C5B76F7CEAB488172C6F64B30B5E301EBEEA8@xmb-rtp-20b.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbWoY4E7q4bXcaHRyq9APuQYhVOjgADlyiA
From: "Michael Hammer \(mhammer\)" <mhammer@cisco.com>
To: <Dale.Worley@comcast.net>, <sip@ietf.org>
X-OriginalArrivalTime: 12 Sep 2006 21:12:28.0437 (UTC)
	FILETIME=[270CB450:01C6D6B0]
DKIM-Signature: a=rsa-sha1; q=dns; l=3735; t=1158095548; x=1158959548;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=mhammer@cisco.com;
	z=From:=22Michael=20Hammer=20\(mhammer\)=22=20<mhammer@cisco.com>
	|Subject:RE=3A=20[Sip]=20GRUU=20and=20Anonymity
	|To:<Dale.Worley@comcast.net>,=20<sip@ietf.org>;
	X=v=3Dcisco.com=3B=20h=3DHWKR4OfegDB3o3ctejGKEc0PqDc=3D;
	b=aqnx5yuqbvJ+JmCZ1ZqNCNw45Tln/zpfXsDnX7W26JIxdGLTCt3z5mjGBrunYWIlGYbZxCUL
	F7iiEthyRUEv/oBxBHbkxCTphPtXsxlaNeUPxz7tQhxIfL8OQ0a1KdQB;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=mhammer@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 14582b0692e7f70ce7111d04db3781c8
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Dale,

I didn't understand the Public-Private Key pair aspect and the statement
of one private key per domain?

Isn't that one private key per user?

Mike=20

> -----Original Message-----
> From: Dale.Worley@comcast.net [mailto:Dale.Worley@comcast.net]=20
> Sent: Tuesday, September 12, 2006 3:25 PM
> To: sip@ietf.org
> Subject: Re: [Sip] GRUU and Anonymity
>=20
>    From: Paul Kyzivat <pkyzivat@cisco.com>
>=20
>    I'm not sure I follow all the details, but I get the gist.=20
> I gather the=20
>    proxy isn't expected to have any idea which sequence=20
> numbers are/aren't=20
>    valid. If so, then it seems that the sequence number is=20
> analogous to the=20
>    grid parameter. It may be possible align the two=20
> approaches closely.
>=20
>    For instance, perhaps the normal gruu is of form:
> 	   sip:user@domain;gruu;opaque=3Dxyz;grid=3Dabc
>=20
>    Then an anonymous form of it could be
> 	   sip:PublicKey(user,opaque,grid)@domain;gruu
>=20
>    and as you suggest, the proxy could turn this back into the=20
>    non-anonymous form and then process it normally.=20
> Ultimately the UA would=20
>    receive the grid.
>=20
> The reason that the pseudo-grid's are numbers is so that the=20
> UA can store a threshold, before which all pseudo-grid's are=20
> known to be invalid.  If they didn't form an ordered=20
> sequence, the UA would have to record in non-volatile memory=20
> all invalid ones.  Or all valid ones.
>=20
> Uh, yes, the number of valid ones at any given moment is=20
> expected to be small.  So you don't really need them to be=20
> numbers, as long as there is some way to avoid using the same=20
> one twice (very often).
>=20
>    But a piece I am missing in the above and below is how the proxy=20
>    determines what private key to apply to the incoming truu.=20
> It could=20
>    potentially get the one currently assigned to a registered=20
> contact, but=20
>    to do so it would need to know what user, and then which contact.
>=20
>    I guess the anonymous form of the gruu could be:
> 	   sip:PublicKey(user,opaque,grid)@domain;gruu;key=3Dfoo
>=20
> There's only one private key for the domain.
>=20
>    Another messy aspect of this is that it couples the UA and=20
> the proxy=20
>    regarding the details of the format of the URI, and that=20
> might cause=20
>    some difficulties.
>=20
> Yeah, it's a pretty tight coupling between the processing in=20
> the proxy and in the UA.  In particular, they have to=20
> implement opposite halves of the encryption operation.
>=20
>    For instance, one problem I have encountered with IMS (and=20
> which may=20
>    apply to other large domains) is that the user space is=20
> partitioned,=20
>    with a different home proxy handling each partition. In=20
> the kind of=20
>    scheme you have proposed, it becomes necessary to guarantee that=20
>    anonymous gruus are routed to the proper home proxy.
>=20
> Not really.  Since there is only one private key, any proxy=20
> can open any TRUU for the domain.  Once it does that, it has=20
> the GRUU for the UA, but we already assume that any proxy can=20
> route any GRUU for the domain.
>=20
> This scheme seems to have a problem in that it's not too hard=20
> to forge TRUUs that might get partially routed before they=20
> are rejected.
>=20
> Dale
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Tue Sep 12 17:27:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNFjp-00052e-Vq; Tue, 12 Sep 2006 17:24:13 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNFjn-0004wp-0n
	for sip@ietf.org; Tue, 12 Sep 2006 17:24:11 -0400
Received: from smtp4.versatel.nl ([62.58.50.91])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNFY4-0004HH-Gt
	for sip@ietf.org; Tue, 12 Sep 2006 17:12:05 -0400
Received: (qmail 3793 invoked by uid 0); 12 Sep 2006 21:11:41 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp4.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 12 Sep 2006 21:11:41 -0000
Message-ID: <004601c6d6b0$104037b0$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>
References: <0J5H006LRQ7EKO30@jes-fe1.zx.nl> <4507141F.3010509@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 23:11:49 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 8b431ad66d60be2d47c7bfeb879db82c
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



> Jeroen Van Bemmel wrote:
>
>> Paul (and others),
>>
>> The reason that the TRUU draft proposes explicit invalidation (which
>> implies state at the registrar/proxy), is that I assumed a
>> requirement that the UA would not even receive requests sent to an
>> expired TRUU. The idea behind that is that it would prevent SPAM from
>> consuming (wireless) resources; the UA could "step away" from an
>> attack.
>
> Thats an optimization, and its preventing something else entirely. Namely, 
> it has nothing to do with anonymity at all. It has to do with DoS 
> prevention or malicious attack prevention. Indeed it is better 
> characterized as an anti-spam measure than anything else. Note that:
>
> http://www.jdrosen.net/papers/draft-ietf-sipping-spam-02.txt
>
> actually discusses Limited Use Addresses as an anti-spam vehicle.
>
> -Jonathan R.
>

Truu, I only wanted to mention it to indicate there could be other 
considerations. I did add that reference to my working copy of the draft 
some time ago.

I believe it is possible to provide several "flavours" of GRUUs

1) minted by the domain, possibly with instance id, as currently defined
2) with limited lifetime
3) with explicit invalidation, ie blocked by the proxy (eg as anti-DoS/spam 
mechanism)
4) using encrypted pseudonyms generated by the UAC (to protect against 
correlation)

Although I see a need for these features, I also feel that the current GRUU 
draft provides sufficient value in itself. Moreover, the draft does not 
appear to prohibit adding these features at a later point in time. My 
proposal would be to finish the GRUU draft as-is, and define a WG work item 
for these additional features. Ultimately, an UA could then request and use 
the type of GRUU that is appropriate for its context (subject to domain 
policy).

Regards,

Jeroen



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Tue Sep 12 17:27:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNFjo-0004z1-Fw; Tue, 12 Sep 2006 17:24:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNFjm-0004wq-Ot
	for sip@ietf.org; Tue, 12 Sep 2006 17:24:10 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNFYS-0004Ip-W6
	for sip@ietf.org; Tue, 12 Sep 2006 17:12:31 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 12 Sep 2006 17:12:28 -0400
X-IronPort-AV: i="4.09,155,1157342400"; 
	d="scan'208"; a="102073519:sNHT32222754"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CLCSAU012694; Tue, 12 Sep 2006 17:12:28 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8CLCSdM018029; 
	Tue, 12 Sep 2006 17:12:28 -0400 (EDT)
Received: from xmb-rtp-20b.amer.cisco.com ([64.102.31.53]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 17:12:28 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 17:12:27 -0400
Message-ID: <072C5B76F7CEAB488172C6F64B30B5E301EBEEA8@xmb-rtp-20b.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbWoY4E7q4bXcaHRyq9APuQYhVOjgADlyiA
From: "Michael Hammer \(mhammer\)" <mhammer@cisco.com>
To: <Dale.Worley@comcast.net>, <sip@ietf.org>
X-OriginalArrivalTime: 12 Sep 2006 21:12:28.0437 (UTC)
	FILETIME=[270CB450:01C6D6B0]
DKIM-Signature: a=rsa-sha1; q=dns; l=3735; t=1158095548; x=1158959548;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=mhammer@cisco.com;
	z=From:=22Michael=20Hammer=20\(mhammer\)=22=20<mhammer@cisco.com>
	|Subject:RE=3A=20[Sip]=20GRUU=20and=20Anonymity
	|To:<Dale.Worley@comcast.net>,=20<sip@ietf.org>;
	X=v=3Dcisco.com=3B=20h=3DHWKR4OfegDB3o3ctejGKEc0PqDc=3D;
	b=aqnx5yuqbvJ+JmCZ1ZqNCNw45Tln/zpfXsDnX7W26JIxdGLTCt3z5mjGBrunYWIlGYbZxCUL
	F7iiEthyRUEv/oBxBHbkxCTphPtXsxlaNeUPxz7tQhxIfL8OQ0a1KdQB;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=mhammer@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 14582b0692e7f70ce7111d04db3781c8
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Dale,

I didn't understand the Public-Private Key pair aspect and the statement
of one private key per domain?

Isn't that one private key per user?

Mike=20

> -----Original Message-----
> From: Dale.Worley@comcast.net [mailto:Dale.Worley@comcast.net]=20
> Sent: Tuesday, September 12, 2006 3:25 PM
> To: sip@ietf.org
> Subject: Re: [Sip] GRUU and Anonymity
>=20
>    From: Paul Kyzivat <pkyzivat@cisco.com>
>=20
>    I'm not sure I follow all the details, but I get the gist.=20
> I gather the=20
>    proxy isn't expected to have any idea which sequence=20
> numbers are/aren't=20
>    valid. If so, then it seems that the sequence number is=20
> analogous to the=20
>    grid parameter. It may be possible align the two=20
> approaches closely.
>=20
>    For instance, perhaps the normal gruu is of form:
> 	   sip:user@domain;gruu;opaque=3Dxyz;grid=3Dabc
>=20
>    Then an anonymous form of it could be
> 	   sip:PublicKey(user,opaque,grid)@domain;gruu
>=20
>    and as you suggest, the proxy could turn this back into the=20
>    non-anonymous form and then process it normally.=20
> Ultimately the UA would=20
>    receive the grid.
>=20
> The reason that the pseudo-grid's are numbers is so that the=20
> UA can store a threshold, before which all pseudo-grid's are=20
> known to be invalid.  If they didn't form an ordered=20
> sequence, the UA would have to record in non-volatile memory=20
> all invalid ones.  Or all valid ones.
>=20
> Uh, yes, the number of valid ones at any given moment is=20
> expected to be small.  So you don't really need them to be=20
> numbers, as long as there is some way to avoid using the same=20
> one twice (very often).
>=20
>    But a piece I am missing in the above and below is how the proxy=20
>    determines what private key to apply to the incoming truu.=20
> It could=20
>    potentially get the one currently assigned to a registered=20
> contact, but=20
>    to do so it would need to know what user, and then which contact.
>=20
>    I guess the anonymous form of the gruu could be:
> 	   sip:PublicKey(user,opaque,grid)@domain;gruu;key=3Dfoo
>=20
> There's only one private key for the domain.
>=20
>    Another messy aspect of this is that it couples the UA and=20
> the proxy=20
>    regarding the details of the format of the URI, and that=20
> might cause=20
>    some difficulties.
>=20
> Yeah, it's a pretty tight coupling between the processing in=20
> the proxy and in the UA.  In particular, they have to=20
> implement opposite halves of the encryption operation.
>=20
>    For instance, one problem I have encountered with IMS (and=20
> which may=20
>    apply to other large domains) is that the user space is=20
> partitioned,=20
>    with a different home proxy handling each partition. In=20
> the kind of=20
>    scheme you have proposed, it becomes necessary to guarantee that=20
>    anonymous gruus are routed to the proper home proxy.
>=20
> Not really.  Since there is only one private key, any proxy=20
> can open any TRUU for the domain.  Once it does that, it has=20
> the GRUU for the UA, but we already assume that any proxy can=20
> route any GRUU for the domain.
>=20
> This scheme seems to have a problem in that it's not too hard=20
> to forge TRUUs that might get partially routed before they=20
> are rejected.
>=20
> Dale
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Tue Sep 12 17:54:59 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNGBe-0007tq-Qh; Tue, 12 Sep 2006 17:52:58 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNGBd-0007tg-2f
	for sip@ietf.org; Tue, 12 Sep 2006 17:52:57 -0400
Received: from sccrmhc12.comcast.net ([204.127.200.82])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNGBb-0001OX-TH
	for sip@ietf.org; Tue, 12 Sep 2006 17:52:57 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (sccrmhc12) with ESMTP
	id <200609122152550120067441e>; Tue, 12 Sep 2006 21:52:55 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8CLqt1f027273
	for <sip@ietf.org>; Tue, 12 Sep 2006 17:52:55 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8CLqtgf027269;
	Tue, 12 Sep 2006 17:52:55 -0400
Date: Tue, 12 Sep 2006 17:52:55 -0400
Message-Id: <200609122152.k8CLqtgf027269@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <072C5B76F7CEAB488172C6F64B30B5E301EBEEA8@xmb-rtp-20b.amer.cisco.com>
	(mhammer@cisco.com)
Subject: Re: [Sip] GRUU and Anonymity
References: <072C5B76F7CEAB488172C6F64B30B5E301EBEEA8@xmb-rtp-20b.amer.cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 68c8cc8a64a9d0402e43b8eee9fc4199
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: "Michael Hammer \(mhammer\)" <mhammer@cisco.com>

   I didn't understand the Public-Private Key pair aspect and the statement
   of one private key per domain?

In what way?

   Isn't that one private key per user?

In this case, no.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 12 18:17:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNGX3-00082e-U2; Tue, 12 Sep 2006 18:15:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNGX2-00082W-3w
	for sip@ietf.org; Tue, 12 Sep 2006 18:15:04 -0400
Received: from zrtps0kn.nortel.com ([47.140.192.55])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNGWz-0004bN-Pe
	for sip@ietf.org; Tue, 12 Sep 2006 18:15:04 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zrtps0kn.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8CMEed13107; Tue, 12 Sep 2006 18:14:40 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 17:14:35 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
In-Reply-To: <4507051E.4000002@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbWnoQPIzKrGtaZTm2zsQ3nacC9fQAGHm7g
From: "Francois Audet" <audet@nortel.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 3e15cc4fdc61d7bce84032741d11c8e5
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
> > I guess what I'm trying to say is that if we need=20
> annonymity, it needs=20
> > to be full annonymity. I don't see a value in "pseudonymity".
>=20
> Why? Certainly there are privacy applications (such as=20
> calling the police to anonymously report an incident) where=20
> pseudonymity is probably sufficient.

I don't believe that a system that "works sometimes" is useful.

To take the "police" example, if my domain is enough for the police
to track me down (or to a subset small enought that I'm not annonymous),
then, well, it's not annonymous anymore. Maybe I have my own=20
domain, or you can track that there was only one user with that
particular
domain who might have made that call. Maybe I'm reporting something to=20
police, and it shows my employer's domain. Suddently, my employer is
embroiled.

The end-user will not have confidence that's it's really annonymous
because
it's not always annonymous.

Maybe I'm missing something that is special to GRUU. I'm reading Dean's
summary,
but I'm not terribly convinced that the claims are true.

I'm highly sceptical that somehow that we (IETF) need to provide a
solution to
the GRUU anonimity problem.

But I could be missising something.


> >=20
> > So, I agree with you. When we DO solve annonymity, it needs to work=20
> > with GRUU and everthing else. In the meanwhile, I don't=20
> think GRUU is=20
> > special and requires immediately a solution to annonymity.
> >=20
>=20
> You may have to wait a while. A LONG while.
>=20
> In:
> http://www.jdrosen.net/papers/draft-rosenberg-sip-identity-pri
vacy-00.txt
>=20
> I took a stab at some thoughts on true anonymity. Its nearly=20
> impossible to do. Even anonymizers aren't sufficient. It is=20
> possible that the only solutions require crazy BGP hacks like=20
> I describe else a global, massive p2p mesh.

Yeah, I have read this, and I do agree that it's MUCH bigger than just
GRUU.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Tue Sep 12 18:17:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNGWu-00081o-4P; Tue, 12 Sep 2006 18:14:56 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNGWt-00081i-8T
	for sip@ietf.org; Tue, 12 Sep 2006 18:14:55 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNGWr-0004ad-L5
	for sip@ietf.org; Tue, 12 Sep 2006 18:14:55 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 12 Sep 2006 15:14:53 -0700
X-IronPort-AV: i="4.09,156,1157353200"; 
	d="scan'208"; a="41322688:sNHT40291148"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CMErEe003768; Tue, 12 Sep 2006 18:14:53 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8CMErdM016697; 
	Tue, 12 Sep 2006 18:14:53 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 18:14:53 -0400
Received: from [10.86.240.24] ([10.86.240.24]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 18:14:52 -0400
Message-ID: <4507315B.2050608@cisco.com>
Date: Tue, 12 Sep 2006 18:14:51 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: David Benoit <benoit@infointeractive.com>
Subject: Re: [Sip] loop fix
References: <003001c6d570$13b99260$0601a8c0@BEMBUSTER>
	<003301c6d5c5$38374e20$5000a8c0@RW>
	<20060911175201.GG19029@infointeractive.com>
	<4505AC86.6050001@cisco.com>
	<20060911204505.GI19029@infointeractive.com>
In-Reply-To: <20060911204505.GI19029@infointeractive.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Sep 2006 22:14:52.0437 (UTC)
	FILETIME=[DEA5C450:01C6D6B8]
DKIM-Signature: a=rsa-sha1; q=dns; l=11468; t=1158099293; x=1158963293;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20loop=20fix
	|To:David=20Benoit=20<benoit@infointeractive.com>;
	X=v=3Dcisco.com=3B=20h=3DArK67HR9HZ/DG/+7xj8dvwH5p9U=3D;
	b=o0frIw2cMMEqg8fjfr7nTt0M2/21g+aILMC8bzImInA4ByOCHW8b3iBJHjU/AtfxLy96Dwfs
	hVNqw64+/wK0vvdwt7fJ4n+OF2ePTUxlrRiyBKmG5UvQvYe35alNTPrq;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 2b2ad76aced9b1d558e34a970a85c027
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

David,

There are two cases here:
- the B2BUA is a complicit evil doer
- the B2BUA is a bystander

If the B2BUA is an evil doer, then there is no amplification. If the 
evil doer is willing to devote this much resource to the attack then we 
are perhaps helpless to solve it by these kinds of means.

If the B2BUA is a bystander, then IMO it has an obligation to do loop 
detection. How it would do that is a question. But because we don't 
currently do specs for B2BUAs we aren't likely to specify how.

	Paul

David Benoit wrote:
> I think you may have missed my point.  The B2BUA would be in every segment
> of the loop, inserted.  The tree would still grow to n^Max_Forwards (where
> n is the number of forks... which I have had cause to have as many as 8).
> My point is that loop detection doesn't work here.  At no stage of the
> "looping" (which, would be better called an infinite "spiral") can you
> detect that it is the same message.
> 
> As I said earlier, it can _only_ _always_ work if you end up sending it to
> yourself, which you should be able to detect _before_ you send it.
> 
> There has to be better protection against such escalation.  But what?
> 
> David
> 
> On Mon, Sep 11, 2006 at 02:35:50PM -0400, Paul Kyzivat wrote:
>> David,
>>
>> Certainly it is possilbe to implement a scenario such as you show below.
>>
>> Without loop detection and with Max-forwards of 70, such a thing will 
>> generate about 2^70 messages before max-forwards stops it. The 
>> difference compared to a non-b2bua case it that you will need 2^70-1 
>> b2bua call states to achieve this. It will presumably run out of 
>> capacity long before then.
>>
>> This is of course a problem for B2BUAs. If we had any rules for them 
>> than we should probably require that they also implement loop detection.
>>
>> 	Paul
>>
>> David Benoit wrote:
>>> I'm sorry, but I'm still not convinced that any of this is going to help.
>>> What, in any of this, prevents the following:
>>>
>>>              A
>>>              |
>>>              P
>>>             / \
>>>            BB BB
>>>            |   |
>>>            P   P
>>>
>>> Where A is a UA, P is a stateless proxy, and BB is a B2BUA.  The request
>>> is going to fork from the proxy, arrive at the B2BUA, a _new_ (related
>>> only internally to the B2BUA) call is then made to P and the tree grows
>>> just as before.  It is not possible to detect the loop because the message
>>> is not the same; it is a new transaction.  This new draft mentions nothing
>>> about this, yet it is exactly the same problem.
>>>
>>> Also, schemes such as these will only really protect against "friendly
>>> fire" ... meaning it only really protects you against mis-configuration.
>>> Anyone seriously out to destroy your proxy is going to at least not
>>> forward on the headers such that they are detected as a loop.  You can't
>>> assume that the malicious are ignorant.
>>>
>>> The amplification problem can NOT be removed unless "you" are sending the
>>> transaction to yourself.  That is the only way you can know that the
>>> headers haven't been modified.
>>>
>>> David
>>>
>>>
>>> On Mon, Sep 11, 2006 at 06:10:39PM +0100, Pete Cordell wrote:
>>>> I've reflected a bit more on this...
>>>>
>>>> A question... is it possible to arrange that two (non-forking) proxies 
>>>> end up bouncing a single request between them?  I would think it is.  In 
>>>> this case, even though you don't get the combinatorial explosion that you 
>>>> do for the forking case, I think a 1 to 70 amplification of messages is 
>>>> still quite significant and worth protecting against.
>>>>
>>>> So I think the various weighting should be, forking proxies MUST do loop 
>>>> detection.  Other proxies SHOULD do loop detection (as opposed to MAY). 
>>>> It's important that the draft explains a method to do loop detection in 
>>>> the most general case (i.e. allowing for stateless proxies etc.), but 
>>>> technically I don't think it even has to be RECOMMENDED strength.
>>>>
>>>> It would be good if in some way the loop detection algorithm could be 
>>>> normatively referenced so that it would be possible to say that such and 
>>>> such an implementation fully implements and conforms to the loop 
>>>> detection algorithm described in RFC XXXX, by just saying "implements RFC 
>>>> XXXX".  That might require two RFCs though; one to mandate/recommend loop 
>>>> detection, and another to described the suggested loop detection 
>>>> algorithm. That may be too much work for the small gain though!
>>>>
>>>> Pete.
>>>> --
>>>> =============================================
>>>> Pete Cordell
>>>> Tech-Know-Ware Ltd
>>>>                        for XML to C++ data binding visit
>>>>                        http://www.tech-know-ware.com/lmx
>>>>                        (or http://www.xml2cpp.com)
>>>> =============================================
>>>>
>>>> ----- Original Message ----- 
>>>> From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
>>>> To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>; "Juha Heinanen" 
>>>> <jh@tutpro.com>
>>>> Cc: <sip@ietf.org>
>>>> Sent: Monday, September 11, 2006 8:01 AM
>>>> Subject: Re: [Sip] loop fix
>>>>
>>>>
>>>>> Juha,
>>>>>
>>>>> Loop detection currently works the way it does to accomodate stateless 
>>>>> proxies. It is the least common denominator; it will also work for 
>>>>> stateful proxies, so there is no need to define separate mechanisms to 
>>>>> achieve the same goal. That is a benefit
>>>>>
>>>>> It is true that you can also detect loops by searching through existing 
>>>>> state, with the aforementioned drawbacks that it won't work as well 
>>>>> across reboots (I consider the performance of the lookup an 
>>>>> implementation issue, it can be made efficient).
>>>>>
>>>>> For the forking scenario, the proxy must by definition be stateful. So 
>>>>> one could use a lookup through existing state as a way to do loop 
>>>>> detection. There is nothing in the draft that prevents this - hashing is 
>>>>> RECOMMENDED, but nothing says you can't do it your way. In fact, loop 
>>>>> detection is a completely local feature - a proxy only has to recognise 
>>>>> its own detection mechanism. So as long as it keeps to standard RFC3261 
>>>>> syntax, there is not actually a need to standardize any particular 
>>>>> mechanism - just stating that it MUST do loop detection is sufficient.
>>>>>
>>>>> What I personally don't like about the recommended mechanism, is the 
>>>>> overloading of Via branches for both transaction id and loop detection. 
>>>>> IMHO a much better solution is to separate the two; I personally use
>>>>>
>>>>> Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}
>>>>>
>>>>> And it would be nice if there were some way to detect if some proxy is 
>>>>> doing loop detection or not. A separate parameter achieves this
>>>>>
>>>>> Regards,
>>>>>
>>>>> Jeroen
>>>>>
>>>>> ----- Original Message ----- 
>>>>> From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
>>>>> To: "Juha Heinanen" <jh@tutpro.com>
>>>>> Cc: <sip@ietf.org>
>>>>> Sent: Monday, September 11, 2006 6:36 AM
>>>>> Subject: Re: [Sip] loop fix
>>>>>
>>>>>
>>>>> On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:
>>>>>
>>>>>>> (1) speed - if you have a large number of active transactions, then 
>>>>>>> it's
>>>>>>> almost certainly a lot faster to construct and compare a hash in X
>>>>>>> number of via headers than search all the transactions received on
>>>>>>> that particular transport.
>>>>>> in some implementations this is true. if it is not true in all
>>>>>> implementations, then the i-d should not give one SHOULD implementation
>>>>>> solution.
>>>>> As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing 
>>>>> it in
>>>>> other ways if your particular situation requires it - but as most 
>>>>> 'common'
>>>>> implementations will worry about the things listed here, then SHOULD is 
>>>>> the
>>>>> right force for it in my opinion, as there are (as per rfc2119) "valid
>>>>> reasons in particular circumstances to ignore a particular item, but the 
>>>>> full
>>>>> implications must be understood and carefully weighed before choosing a
>>>>> different course."
>>>>>
>>>>>>> (2) resilience - a crashed proxy would still be able to perform loop
>>>>>>> detection, even after loosing all of it's state - assuming it keeps
>>>>>>> transactions in memory and not committed elsewhere before forwarding;
>>>>>> this i don't quite understand. even if proxy looses all state, doesn't
>>>>>> it rebuild that state next time it receives the looped request again and
>>>>>> will detect the loop during the following round?
>>>>> Only after it looped again after crashing, and that assumes it's not 
>>>>> already
>>>>> crashed again since.  Given that the attack vector that the I-D is 
>>>>> trying to
>>>>> fix, i think it is sensible for it to catch a loop between crashes of an
>>>>> element, too.
>>>>>
>>>>> fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a 
>>>>> Network:
>>>>>
>>>>> [...]
>>>>> It is interesting to note that a few proxies rebooted during
>>>>> the scenario, and rejoined in the attack when they restarted (as long
>>>>> as they maintained registration state across reboots).  This points
>>>>> out that if this attack were launched on the Internet at large, it
>>>>> might require coordination among all the affected elements to stop
>>>>> it.
>>>>>
>>>>>>> (3) scalability - loop may go through different proxies when load
>>>>>>> balancing. KEeping the hash in the via header allows peer proxies to
>>>>>>> detect and stop looped requests quicker than it would otherwise.
>>>>>> this is not a valid reason, since if there are multiple proxies, they
>>>>>> may be from different vendors and since there is no standardized way to
>>>>>> calculate and add the hash into via header, one proxy cannot interpret
>>>>>> the via header added by another proxy.
>>>>> indeed, with multiple vendors.  but none the less, it's a reason a proxy 
>>>>> may
>>>>> want to use Via hashes rather than internally (which is what you asked).
>>>>>
>>>>> ~ Theo
>>>>>
>>>>> -- 
>>>>> Theo P. Zourzouvillys
>>>>> http://www.crazygreek.co.uk
>>>>> theo@crazygreek.co.uk
>>>>>
>>>>> _______________________________________________
>>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>> This list is for NEW development of the core SIP Protocol
>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>> Use sipping@ietf.org for new developments on the application of sip
>>>>>
>>>>> _______________________________________________
>>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>> This list is for NEW development of the core SIP Protocol
>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>> Use sipping@ietf.org for new developments on the application of sip
>>>>>
>>>>
>>>> _______________________________________________
>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>> This list is for NEW development of the core SIP Protocol
>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Tue Sep 12 18:17:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNGX3-00082e-U2; Tue, 12 Sep 2006 18:15:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNGX2-00082W-3w
	for sip@ietf.org; Tue, 12 Sep 2006 18:15:04 -0400
Received: from zrtps0kn.nortel.com ([47.140.192.55])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNGWz-0004bN-Pe
	for sip@ietf.org; Tue, 12 Sep 2006 18:15:04 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zrtps0kn.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8CMEed13107; Tue, 12 Sep 2006 18:14:40 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 12 Sep 2006 17:14:35 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
In-Reply-To: <4507051E.4000002@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbWnoQPIzKrGtaZTm2zsQ3nacC9fQAGHm7g
From: "Francois Audet" <audet@nortel.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 3e15cc4fdc61d7bce84032741d11c8e5
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
> > I guess what I'm trying to say is that if we need=20
> annonymity, it needs=20
> > to be full annonymity. I don't see a value in "pseudonymity".
>=20
> Why? Certainly there are privacy applications (such as=20
> calling the police to anonymously report an incident) where=20
> pseudonymity is probably sufficient.

I don't believe that a system that "works sometimes" is useful.

To take the "police" example, if my domain is enough for the police
to track me down (or to a subset small enought that I'm not annonymous),
then, well, it's not annonymous anymore. Maybe I have my own=20
domain, or you can track that there was only one user with that
particular
domain who might have made that call. Maybe I'm reporting something to=20
police, and it shows my employer's domain. Suddently, my employer is
embroiled.

The end-user will not have confidence that's it's really annonymous
because
it's not always annonymous.

Maybe I'm missing something that is special to GRUU. I'm reading Dean's
summary,
but I'm not terribly convinced that the claims are true.

I'm highly sceptical that somehow that we (IETF) need to provide a
solution to
the GRUU anonimity problem.

But I could be missising something.


> >=20
> > So, I agree with you. When we DO solve annonymity, it needs to work=20
> > with GRUU and everthing else. In the meanwhile, I don't=20
> think GRUU is=20
> > special and requires immediately a solution to annonymity.
> >=20
>=20
> You may have to wait a while. A LONG while.
>=20
> In:
> http://www.jdrosen.net/papers/draft-rosenberg-sip-identity-pri
vacy-00.txt
>=20
> I took a stab at some thoughts on true anonymity. Its nearly=20
> impossible to do. Even anonymizers aren't sufficient. It is=20
> possible that the only solutions require crazy BGP hacks like=20
> I describe else a global, massive p2p mesh.

Yeah, I have read this, and I do agree that it's MUCH bigger than just
GRUU.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Tue Sep 12 18:17:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNGWu-00081o-4P; Tue, 12 Sep 2006 18:14:56 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNGWt-00081i-8T
	for sip@ietf.org; Tue, 12 Sep 2006 18:14:55 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNGWr-0004ad-L5
	for sip@ietf.org; Tue, 12 Sep 2006 18:14:55 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 12 Sep 2006 15:14:53 -0700
X-IronPort-AV: i="4.09,156,1157353200"; 
	d="scan'208"; a="41322688:sNHT40291148"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8CMErEe003768; Tue, 12 Sep 2006 18:14:53 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8CMErdM016697; 
	Tue, 12 Sep 2006 18:14:53 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 18:14:53 -0400
Received: from [10.86.240.24] ([10.86.240.24]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 12 Sep 2006 18:14:52 -0400
Message-ID: <4507315B.2050608@cisco.com>
Date: Tue, 12 Sep 2006 18:14:51 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: David Benoit <benoit@infointeractive.com>
Subject: Re: [Sip] loop fix
References: <003001c6d570$13b99260$0601a8c0@BEMBUSTER>
	<003301c6d5c5$38374e20$5000a8c0@RW>
	<20060911175201.GG19029@infointeractive.com>
	<4505AC86.6050001@cisco.com>
	<20060911204505.GI19029@infointeractive.com>
In-Reply-To: <20060911204505.GI19029@infointeractive.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Sep 2006 22:14:52.0437 (UTC)
	FILETIME=[DEA5C450:01C6D6B8]
DKIM-Signature: a=rsa-sha1; q=dns; l=11468; t=1158099293; x=1158963293;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20loop=20fix
	|To:David=20Benoit=20<benoit@infointeractive.com>;
	X=v=3Dcisco.com=3B=20h=3DArK67HR9HZ/DG/+7xj8dvwH5p9U=3D;
	b=o0frIw2cMMEqg8fjfr7nTt0M2/21g+aILMC8bzImInA4ByOCHW8b3iBJHjU/AtfxLy96Dwfs
	hVNqw64+/wK0vvdwt7fJ4n+OF2ePTUxlrRiyBKmG5UvQvYe35alNTPrq;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 2b2ad76aced9b1d558e34a970a85c027
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

David,

There are two cases here:
- the B2BUA is a complicit evil doer
- the B2BUA is a bystander

If the B2BUA is an evil doer, then there is no amplification. If the 
evil doer is willing to devote this much resource to the attack then we 
are perhaps helpless to solve it by these kinds of means.

If the B2BUA is a bystander, then IMO it has an obligation to do loop 
detection. How it would do that is a question. But because we don't 
currently do specs for B2BUAs we aren't likely to specify how.

	Paul

David Benoit wrote:
> I think you may have missed my point.  The B2BUA would be in every segment
> of the loop, inserted.  The tree would still grow to n^Max_Forwards (where
> n is the number of forks... which I have had cause to have as many as 8).
> My point is that loop detection doesn't work here.  At no stage of the
> "looping" (which, would be better called an infinite "spiral") can you
> detect that it is the same message.
> 
> As I said earlier, it can _only_ _always_ work if you end up sending it to
> yourself, which you should be able to detect _before_ you send it.
> 
> There has to be better protection against such escalation.  But what?
> 
> David
> 
> On Mon, Sep 11, 2006 at 02:35:50PM -0400, Paul Kyzivat wrote:
>> David,
>>
>> Certainly it is possilbe to implement a scenario such as you show below.
>>
>> Without loop detection and with Max-forwards of 70, such a thing will 
>> generate about 2^70 messages before max-forwards stops it. The 
>> difference compared to a non-b2bua case it that you will need 2^70-1 
>> b2bua call states to achieve this. It will presumably run out of 
>> capacity long before then.
>>
>> This is of course a problem for B2BUAs. If we had any rules for them 
>> than we should probably require that they also implement loop detection.
>>
>> 	Paul
>>
>> David Benoit wrote:
>>> I'm sorry, but I'm still not convinced that any of this is going to help.
>>> What, in any of this, prevents the following:
>>>
>>>              A
>>>              |
>>>              P
>>>             / \
>>>            BB BB
>>>            |   |
>>>            P   P
>>>
>>> Where A is a UA, P is a stateless proxy, and BB is a B2BUA.  The request
>>> is going to fork from the proxy, arrive at the B2BUA, a _new_ (related
>>> only internally to the B2BUA) call is then made to P and the tree grows
>>> just as before.  It is not possible to detect the loop because the message
>>> is not the same; it is a new transaction.  This new draft mentions nothing
>>> about this, yet it is exactly the same problem.
>>>
>>> Also, schemes such as these will only really protect against "friendly
>>> fire" ... meaning it only really protects you against mis-configuration.
>>> Anyone seriously out to destroy your proxy is going to at least not
>>> forward on the headers such that they are detected as a loop.  You can't
>>> assume that the malicious are ignorant.
>>>
>>> The amplification problem can NOT be removed unless "you" are sending the
>>> transaction to yourself.  That is the only way you can know that the
>>> headers haven't been modified.
>>>
>>> David
>>>
>>>
>>> On Mon, Sep 11, 2006 at 06:10:39PM +0100, Pete Cordell wrote:
>>>> I've reflected a bit more on this...
>>>>
>>>> A question... is it possible to arrange that two (non-forking) proxies 
>>>> end up bouncing a single request between them?  I would think it is.  In 
>>>> this case, even though you don't get the combinatorial explosion that you 
>>>> do for the forking case, I think a 1 to 70 amplification of messages is 
>>>> still quite significant and worth protecting against.
>>>>
>>>> So I think the various weighting should be, forking proxies MUST do loop 
>>>> detection.  Other proxies SHOULD do loop detection (as opposed to MAY). 
>>>> It's important that the draft explains a method to do loop detection in 
>>>> the most general case (i.e. allowing for stateless proxies etc.), but 
>>>> technically I don't think it even has to be RECOMMENDED strength.
>>>>
>>>> It would be good if in some way the loop detection algorithm could be 
>>>> normatively referenced so that it would be possible to say that such and 
>>>> such an implementation fully implements and conforms to the loop 
>>>> detection algorithm described in RFC XXXX, by just saying "implements RFC 
>>>> XXXX".  That might require two RFCs though; one to mandate/recommend loop 
>>>> detection, and another to described the suggested loop detection 
>>>> algorithm. That may be too much work for the small gain though!
>>>>
>>>> Pete.
>>>> --
>>>> =============================================
>>>> Pete Cordell
>>>> Tech-Know-Ware Ltd
>>>>                        for XML to C++ data binding visit
>>>>                        http://www.tech-know-ware.com/lmx
>>>>                        (or http://www.xml2cpp.com)
>>>> =============================================
>>>>
>>>> ----- Original Message ----- 
>>>> From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
>>>> To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>; "Juha Heinanen" 
>>>> <jh@tutpro.com>
>>>> Cc: <sip@ietf.org>
>>>> Sent: Monday, September 11, 2006 8:01 AM
>>>> Subject: Re: [Sip] loop fix
>>>>
>>>>
>>>>> Juha,
>>>>>
>>>>> Loop detection currently works the way it does to accomodate stateless 
>>>>> proxies. It is the least common denominator; it will also work for 
>>>>> stateful proxies, so there is no need to define separate mechanisms to 
>>>>> achieve the same goal. That is a benefit
>>>>>
>>>>> It is true that you can also detect loops by searching through existing 
>>>>> state, with the aforementioned drawbacks that it won't work as well 
>>>>> across reboots (I consider the performance of the lookup an 
>>>>> implementation issue, it can be made efficient).
>>>>>
>>>>> For the forking scenario, the proxy must by definition be stateful. So 
>>>>> one could use a lookup through existing state as a way to do loop 
>>>>> detection. There is nothing in the draft that prevents this - hashing is 
>>>>> RECOMMENDED, but nothing says you can't do it your way. In fact, loop 
>>>>> detection is a completely local feature - a proxy only has to recognise 
>>>>> its own detection mechanism. So as long as it keeps to standard RFC3261 
>>>>> syntax, there is not actually a need to standardize any particular 
>>>>> mechanism - just stating that it MUST do loop detection is sufficient.
>>>>>
>>>>> What I personally don't like about the recommended mechanism, is the 
>>>>> overloading of Via branches for both transaction id and loop detection. 
>>>>> IMHO a much better solution is to separate the two; I personally use
>>>>>
>>>>> Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}
>>>>>
>>>>> And it would be nice if there were some way to detect if some proxy is 
>>>>> doing loop detection or not. A separate parameter achieves this
>>>>>
>>>>> Regards,
>>>>>
>>>>> Jeroen
>>>>>
>>>>> ----- Original Message ----- 
>>>>> From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
>>>>> To: "Juha Heinanen" <jh@tutpro.com>
>>>>> Cc: <sip@ietf.org>
>>>>> Sent: Monday, September 11, 2006 6:36 AM
>>>>> Subject: Re: [Sip] loop fix
>>>>>
>>>>>
>>>>> On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:
>>>>>
>>>>>>> (1) speed - if you have a large number of active transactions, then 
>>>>>>> it's
>>>>>>> almost certainly a lot faster to construct and compare a hash in X
>>>>>>> number of via headers than search all the transactions received on
>>>>>>> that particular transport.
>>>>>> in some implementations this is true. if it is not true in all
>>>>>> implementations, then the i-d should not give one SHOULD implementation
>>>>>> solution.
>>>>> As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing 
>>>>> it in
>>>>> other ways if your particular situation requires it - but as most 
>>>>> 'common'
>>>>> implementations will worry about the things listed here, then SHOULD is 
>>>>> the
>>>>> right force for it in my opinion, as there are (as per rfc2119) "valid
>>>>> reasons in particular circumstances to ignore a particular item, but the 
>>>>> full
>>>>> implications must be understood and carefully weighed before choosing a
>>>>> different course."
>>>>>
>>>>>>> (2) resilience - a crashed proxy would still be able to perform loop
>>>>>>> detection, even after loosing all of it's state - assuming it keeps
>>>>>>> transactions in memory and not committed elsewhere before forwarding;
>>>>>> this i don't quite understand. even if proxy looses all state, doesn't
>>>>>> it rebuild that state next time it receives the looped request again and
>>>>>> will detect the loop during the following round?
>>>>> Only after it looped again after crashing, and that assumes it's not 
>>>>> already
>>>>> crashed again since.  Given that the attack vector that the I-D is 
>>>>> trying to
>>>>> fix, i think it is sensible for it to catch a loop between crashes of an
>>>>> element, too.
>>>>>
>>>>> fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a 
>>>>> Network:
>>>>>
>>>>> [...]
>>>>> It is interesting to note that a few proxies rebooted during
>>>>> the scenario, and rejoined in the attack when they restarted (as long
>>>>> as they maintained registration state across reboots).  This points
>>>>> out that if this attack were launched on the Internet at large, it
>>>>> might require coordination among all the affected elements to stop
>>>>> it.
>>>>>
>>>>>>> (3) scalability - loop may go through different proxies when load
>>>>>>> balancing. KEeping the hash in the via header allows peer proxies to
>>>>>>> detect and stop looped requests quicker than it would otherwise.
>>>>>> this is not a valid reason, since if there are multiple proxies, they
>>>>>> may be from different vendors and since there is no standardized way to
>>>>>> calculate and add the hash into via header, one proxy cannot interpret
>>>>>> the via header added by another proxy.
>>>>> indeed, with multiple vendors.  but none the less, it's a reason a proxy 
>>>>> may
>>>>> want to use Via hashes rather than internally (which is what you asked).
>>>>>
>>>>> ~ Theo
>>>>>
>>>>> -- 
>>>>> Theo P. Zourzouvillys
>>>>> http://www.crazygreek.co.uk
>>>>> theo@crazygreek.co.uk
>>>>>
>>>>> _______________________________________________
>>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>> This list is for NEW development of the core SIP Protocol
>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>> Use sipping@ietf.org for new developments on the application of sip
>>>>>
>>>>> _______________________________________________
>>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>> This list is for NEW development of the core SIP Protocol
>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>> Use sipping@ietf.org for new developments on the application of sip
>>>>>
>>>>
>>>> _______________________________________________
>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>> This list is for NEW development of the core SIP Protocol
>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Wed Sep 13 02:55:55 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNOaT-0005xj-Sf; Wed, 13 Sep 2006 02:51:09 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNOaS-0005xe-AO
	for sip@ietf.org; Wed, 13 Sep 2006 02:51:08 -0400
Received: from ihemail3.lucent.com ([135.245.0.37])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNOaP-00048h-09
	for sip@ietf.org; Wed, 13 Sep 2006 02:51:08 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail3.lucent.com (8.13.6/IER-o) with ESMTP id k8D6otZP007340
	for <sip@ietf.org>; Wed, 13 Sep 2006 01:51:00 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Wed, 13 Sep 2006 01:50:58 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Wed, 13 Sep 2006 08:50:51 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 13 Sep 2006 08:50:51 +0200
Message-ID: <5D1A7985295922448D5550C94DE2918042B676@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SIP WGLC reminder
Thread-Index: AcbWshjcd4u/SoQuRQmkEhD7ESvn8g==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 13 Sep 2006 06:50:51.0803 (UTC)
	FILETIME=[F3DE1EB0:01C6D700]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: ea4ac80f790299f943f0a53be7e1a21a
Subject: [Sip] SIP WGLC reminder
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

A reminder that both

http://www.ietf.org/internet-drafts/draft-ietf-sip-acr-code-02.txt

And=20

http://www.ietf.org/internet-drafts/draft-ietf-sip-connected-identity-01
.txt

Are currently in WGLC and we are expecting comments by=20

Monday 18th September
---------------------

As yet neither document has sufficient indication of review to submit to
the IESG. Neither of these documents is particularly long or complex.
Please review and submit comments. If you have no comments please say
so.

Your reviews are the only way (without just killing the work) that we
can get documents published by the SIP group. Please review.

Regards

Keith

Keith Drage
Lucent Technologies
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 05:43:54 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNREI-0001J3-Bt; Wed, 13 Sep 2006 05:40:26 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNREH-0001Iy-K4
	for sip@ietf.org; Wed, 13 Sep 2006 05:40:25 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNREG-0005ux-6I
	for sip@ietf.org; Wed, 13 Sep 2006 05:40:25 -0400
Received: from S4DE8PSAANQ.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Wed, 13 Sep 2006 11:40:20 +0200
Received: by S4DE8PSAANQ.blf.telekom.de with Internet Mail Service
	(5.5.2653.19) id <SVR0BPZH>; Wed, 13 Sep 2006 11:40:20 +0200
Message-Id: <85108216918A984C8C60172D7C84770A56F676@S4DE8PSAAGO.mitte.t-com.de>
From: "Jesske, R" <R.Jesske@t-com.net>
To: drage@lucent.com,
    sip@ietf.org
Subject: AW: [Sip] SIP WGLC reminder
Date: Wed, 13 Sep 2006 11:40:17 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d0bdc596f8dd1c226c458f0b4df27a88
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Still a open coment I made already.=20

In this Draft is described that:
The request contained a Privacy header field whose value was 'id'
      [3] or 'user'.  This explicitly excludes the 'header' and
      'session' privacy services, since those do not directly convey =
the
      identity of the requestor.

Why the value 'header ' is exluded?=20

In RFC3323 is described that header:
      header: The user requests that a privacy service obscure those
      headers which cannot be completely expunged of identifying
      information without the assistance of intermediaries (such as Via
      and Contact).  Also, no unnecessary headers should be added by =
the
      service that might reveal personal information about the
      originator of the request.

So from my understanding 'id' is a subset of 'header' because the =
P-Asserted-Identity can only be deleted by untermediarities.

Best Regards

Roland

> -----Urspr=FCngliche Nachricht-----
> Von: Drage, Keith (Keith) [mailto:drage@lucent.com]=20
> Gesendet: Mittwoch, 13. September 2006 08:51
> An: sip@ietf.org
> Betreff: [Sip] SIP WGLC reminder
>=20
>=20
> A reminder that both
>=20
> http://www.ietf.org/internet-drafts/draft-ietf-sip-acr-code-02.txt
>=20
> And=20
>=20
> http://www.ietf.org/internet-drafts/draft-ietf-sip-connected-i
dentity-01
.txt

Are currently in WGLC and we are expecting comments by=20

Monday 18th September
---------------------

As yet neither document has sufficient indication of review to submit =
to
the IESG. Neither of these documents is particularly long or complex.
Please review and submit comments. If you have no comments please say
so.

Your reviews are the only way (without just killing the work) that we
can get documents published by the SIP group. Please review.

Regards

Keith

Keith Drage
Lucent Technologies
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 05:58:48 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNRTm-0007aq-0E; Wed, 13 Sep 2006 05:56:26 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNRTj-0007RT-UP
	for sip@ietf.org; Wed, 13 Sep 2006 05:56:23 -0400
Received: from mail.ficora.fi ([194.100.96.25] helo=portti1.ficora.fi)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNRTi-0007bT-GV
	for sip@ietf.org; Wed, 13 Sep 2006 05:56:23 -0400
Received: from POSTI.laru.local ([10.1.0.10]) by portti1.ficora.fi with
	InterScan Messaging Security Suite; Wed, 13 Sep 2006 13:10:02 +0300
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Re: [Sip] GRUU and Anonymity
Date: Wed, 13 Sep 2006 12:56:20 +0300
Message-ID: <07BC6C0D40216E44A34BE6701694FE86038B48E2@POSTI.laru.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: [Sip] GRUU and Anonymity
thread-index: AcbXGt0Oh1sblFUeSAW7geH0YWK4Zg==
From: "Nieminen Klaus" <Klaus.Nieminen@ficora.fi>
To: <sip@ietf.org>
X-Spam-Score: 0.1 (/)
X-Scan-Signature: ffa9dfbbe7cc58b3fa6b8ae3e57b0aa3
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

	Juha,

Juha Hein=E4nen writes:

> there is personal bias, but what comes to regulatory requirements in
> europe, as i said, they currently only apply to calls terminating from
> sip to pstn and wise versa.  in those cases anonymity is easy to
> accomplish with or without gruu without any additions to rfc3261 or =
the
> current gruu spec.

I must tell that your interpretation is not fully correct.=20

The obligation to offer calling line identification barring only =
concerns telephone services (e.g. PATS subscribtion). However this does =
not necessarily mean that all calls need to originate from PSTN or =
terminate to PSTN. So it's applicable also to SIP-to-SIP calls...=20

If we think the wording that is used in directive: It's calling line =
identity. In PSTN this is a E.164 number. However in SIP, at least I =
wouldn't claim that this would definitely mean only E.164 numbers... =
(not going to make any guess about future interpretations :)

regards,

- Klaus -

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 06:29:16 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNRxA-0002Ll-IM; Wed, 13 Sep 2006 06:26:48 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNRx9-0002Kp-3n
	for sip@ietf.org; Wed, 13 Sep 2006 06:26:47 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNRus-0002jz-0N
	for sip@ietf.org; Wed, 13 Sep 2006 06:24:27 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id BA85913F636; Wed, 13 Sep 2006 13:24:14 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (eukaryote41.gprs.dnafinland.fi [62.78.106.41])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 77D9B13F617;
	Wed, 13 Sep 2006 13:24:08 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 3B62EF024A; Wed, 13 Sep 2006 13:24:24 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17671.56408.188411.666439@rautu.tutpro.com>
Date: Wed, 13 Sep 2006 13:24:24 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Nieminen Klaus" <Klaus.Nieminen@ficora.fi>
Subject: Re: [Sip] GRUU and Anonymity
In-Reply-To: <07BC6C0D40216E44A34BE6701694FE86038B48E2@POSTI.laru.local>
References: <07BC6C0D40216E44A34BE6701694FE86038B48E2@POSTI.laru.local>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e5ba305d0e64821bf3d8bc5d3bb07228
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Nieminen Klaus writes:

 > The obligation to offer calling line identification barring only
 > concerns telephone services (e.g. PATS subscribtion). However this
 > does not necessarily mean that all calls need to originate from PSTN
 > or terminate to PSTN. So it's applicable also to SIP-to-SIP calls... 

klaus,

my message was not clear.  i meant sip-to-sip calls where UAs don't
subscribe to regulated telephony service.  if skype would use SIP, would
it apply to skype-skype calls using skype's proprietary URIs?

 > If we think the wording that is used in directive: It's calling line
 > identity. In PSTN this is a E.164 number. However in SIP, at least I
 > wouldn't claim that this would definitely mean only E.164
 > numbers... (not going to make any guess about future interpretations
 > :)

if calling line identity in sip-sip calls needs to be barred, then you
authorities need to specify how it is done both by SIP UA and proxy
operator.  i don't remember seeing any specifications on SIP UA
requirements when it connects to regulated telephony service nor have i
seen requirements on how two operator connect to each other using SIP.

you cannot simply say that a proxy operator has to do barring of calling
line identification.  in SIP, this definitely also means that the UA
must participate in the barring process somehow.  proxy cannot just go
and change the From header of the request it receives from the UA.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 06:35:37 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNS3t-00053i-M6; Wed, 13 Sep 2006 06:33:45 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNS3s-00053c-99
	for sip@ietf.org; Wed, 13 Sep 2006 06:33:44 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNS3i-00047c-R3
	for sip@ietf.org; Wed, 13 Sep 2006 06:33:44 -0400
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	0C0C04F007B; Wed, 13 Sep 2006 12:33:32 +0200 (CEST)
Received: from esealmw126.eemea.ericsson.se ([153.88.254.170]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 12:33:31 +0200
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 12:33:30 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Wed, 13 Sep 2006 12:33:29 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB594017F1519@esealmw113.eemea.ericsson.se>
In-Reply-To: <17671.56408.188411.666439@rautu.tutpro.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbXH4AEyrK9zoZSTEmbVkn2I44zwQAAE1xg
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Juha Heinanen" <jh@tutpro.com>,
	"Nieminen Klaus" <Klaus.Nieminen@ficora.fi>
X-OriginalArrivalTime: 13 Sep 2006 10:33:30.0923 (UTC)
	FILETIME=[0E860FB0:01C6D720]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 08170828343bcf1325e4a0fb4584481c
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20

>you cannot simply say that a proxy operator has to do barring=20
>of calling line identification.  in SIP, this definitely also=20
>means that the UA must participate in the barring process=20
>somehow.  proxy cannot just go and change the From header of=20
>the request it receives from the UA.

Why not? You could say it acts like a B2BUA...

Regards,

Christer



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 06:38:16 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNS6a-0006mv-4D; Wed, 13 Sep 2006 06:36:32 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNS6Y-0006mq-D2
	for sip@ietf.org; Wed, 13 Sep 2006 06:36:30 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNS6W-0004LI-VR
	for sip@ietf.org; Wed, 13 Sep 2006 06:36:30 -0400
Received: from S4DE8PSAANQ.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Wed, 13 Sep 2006 12:36:28 +0200
Received: by S4DE8PSAANQ.blf.telekom.de with Internet Mail Service
	(5.5.2653.19) id <SVR0BYZA>; Wed, 13 Sep 2006 12:36:27 +0200
Message-Id: <85108216918A984C8C60172D7C84770A56F67A@S4DE8PSAAGO.mitte.t-com.de>
From: "Jesske, R" <R.Jesske@t-com.net>
To: "Jesske, R" <R.Jesske@t-com.net>,
    drage@lucent.com,
    sip@ietf.org
Date: Wed, 13 Sep 2006 12:36:18 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d8ae4fd88fcaf47c1a71c804d04f413d
Cc: 
Subject: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Sorry that I forgot to change the Issue. here again.
> Still a open coment I made already.=20
>=20
> In this Draft is described that:
> The request contained a Privacy header field whose value was 'id'
>       [3] or 'user'.  This explicitly excludes the 'header' and
>       'session' privacy services, since those do not directly=20
> convey the
>       identity of the requestor.
>=20
> Why the value 'header ' is exluded?=20
>=20
> In RFC3323 is described that header:
>       header: The user requests that a privacy service obscure those
>       headers which cannot be completely expunged of identifying
>       information without the assistance of intermediaries=20
> (such as Via
>       and Contact).  Also, no unnecessary headers should be=20
> added by the
>       service that might reveal personal information about the
>       originator of the request.
>=20
> So from my understanding 'id' is a subset of 'header' because=20
> the P-Asserted-Identity can only be deleted by untermediarities.
>=20
> Best Regards
>=20
> Roland
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Drage, Keith (Keith) [mailto:drage@lucent.com]=20
> > Gesendet: Mittwoch, 13. September 2006 08:51
> > An: sip@ietf.org
> > Betreff: [Sip] SIP WGLC reminder
> >=20
> >=20
> > A reminder that both
> >=20
> > http://www.ietf.org/internet-drafts/draft-ietf-sip-acr-code-02.txt
> >=20
> > And=20
> >=20
> > http://www.ietf.org/internet-drafts/draft-ietf-sip-connected-i
> dentity-01
> .txt
>=20
> Are currently in WGLC and we are expecting comments by=20
>=20
> Monday 18th September
> ---------------------
>=20
> As yet neither document has sufficient indication of review=20
> to submit to
> the IESG. Neither of these documents is particularly long or complex.
> Please review and submit comments. If you have no comments please say
> so.
>=20
> Your reviews are the only way (without just killing the work) that we
> can get documents published by the SIP group. Please review.
>=20
> Regards
>=20
> Keith
>=20
> Keith Drage
> Lucent Technologies
> drage@lucent.com
> tel: +44 1793 776249
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 06:41:17 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNS9M-0007xm-3B; Wed, 13 Sep 2006 06:39:24 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNS9K-0007wH-VC
	for sip@ietf.org; Wed, 13 Sep 2006 06:39:22 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNS9J-0004k1-KU
	for sip@ietf.org; Wed, 13 Sep 2006 06:39:22 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id DAEBF13F634; Wed, 13 Sep 2006 13:39:17 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (eukaryote41.gprs.dnafinland.fi [62.78.106.41])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 9F92A13F60A;
	Wed, 13 Sep 2006 13:39:11 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id C2C47F024A; Wed, 13 Sep 2006 13:39:27 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17671.57311.440187.474556@rautu.tutpro.com>
Date: Wed, 13 Sep 2006 13:39:27 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Christer Holmberg (JO/LMF)" <christer.holmberg@ericsson.com>
Subject: RE: [Sip] GRUU and Anonymity
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB594017F1519@esealmw113.eemea.ericsson.se>
References: <17671.56408.188411.666439@rautu.tutpro.com>
	<5EB80D22825EEE42872083AD5BFFB594017F1519@esealmw113.eemea.ericsson.se>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 08e48e05374109708c00c6208b534009
Cc: sip@ietf.org, Nieminen Klaus <Klaus.Nieminen@ficora.fi>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Christer Holmberg (JO/LMF) writes:

 > Why not? You could say it acts like a B2BUA...

if regulators require service provider to use b2bua for each request
from subscriber, then i would not call it ietf sip based service.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 07:37:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNT0b-0003s6-P0; Wed, 13 Sep 2006 07:34:25 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNT0a-0003oC-6o
	for sip@ietf.org; Wed, 13 Sep 2006 07:34:24 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNT0U-0006w1-Na
	for sip@ietf.org; Wed, 13 Sep 2006 07:34:24 -0400
Received: from esealmw127.eemea.ericsson.se (unknown [153.88.254.122])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	E4C2B4F0090; Wed, 13 Sep 2006 13:34:17 +0200 (CEST)
Received: from esealmw129.eemea.ericsson.se ([153.88.254.173]) by
	esealmw127.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 13:34:15 +0200
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw129.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 13:34:15 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Wed, 13 Sep 2006 13:34:14 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB594017F151E@esealmw113.eemea.ericsson.se>
In-Reply-To: <17671.57311.440187.474556@rautu.tutpro.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbXIOLp21z/TK9UQdybw/WuQP8xiwAB5plw
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Juha Heinanen" <jh@tutpro.com>
X-OriginalArrivalTime: 13 Sep 2006 11:34:15.0404 (UTC)
	FILETIME=[8ACDBAC0:01C6D728]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7d33c50f3756db14428398e2bdedd581
Cc: sip@ietf.org, Nieminen Klaus <Klaus.Nieminen@ficora.fi>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


I don't know what IETF SIP is. SIP is SIP, only SIP and nothing but SIP
:)=20

> -----Original Message-----
> From: Juha Heinanen [mailto:jh@tutpro.com]=20
> Sent: 13. syyskuuta 2006 13:39
> To: Christer Holmberg (JO/LMF)
> Cc: Nieminen Klaus; sip@ietf.org
> Subject: RE: [Sip] GRUU and Anonymity
>=20
> Christer Holmberg (JO/LMF) writes:
>=20
>  > Why not? You could say it acts like a B2BUA...
>=20
> if regulators require service provider to use b2bua for each=20
> request from subscriber, then i would not call it ietf sip=20
> based service.
>=20
> -- juha
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 09:09:01 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNUQB-0003v1-MQ; Wed, 13 Sep 2006 09:04:55 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNUQA-0003tK-Ek
	for sip@ietf.org; Wed, 13 Sep 2006 09:04:54 -0400
Received: from mail.gmx.net ([213.165.64.20])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GNUQ9-0005py-0R
	for sip@ietf.org; Wed, 13 Sep 2006 09:04:54 -0400
Received: (qmail invoked by alias); 13 Sep 2006 13:04:51 -0000
Received: from unknown (EHLO [10.75.119.218]) [64.251.112.98]
	by mail.gmx.net (mp041) with SMTP; 13 Sep 2006 15:04:51 +0200
X-Authenticated: #29516787
Message-ID: <450801EE.2000702@gmx.net>
Date: Wed, 13 Sep 2006 15:04:46 +0200
From: Hannes Tschofenig <Hannes.Tschofenig@gmx.net>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Andrew Newton <andy@hxr.us>
References: <44EF58D8.3030100@hxr.us>
In-Reply-To: <44EF58D8.3030100@hxr.us>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 8abaac9e10c826e8252866cbe6766464
Cc: GEOPRIV <geopriv@ietf.org>, IETF SIP List <sip@ietf.org>
Subject: [Sip] Re: [Geopriv] rethinking data:
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Andy,

my opinion is known. In the design team we concluded:

security(location-by-value)=security(location-by-reference).

Ciao
Hannes

Andrew Newton schrieb:
> Having reviewed the archives on the recent location conveyance 
> discussion, I see that I was the only one to raise an objection to the 
> use of a data: URL in the Location header.
> 
> My objection was based on the fact that it would add unnecessary 
> complexity.  Given some more time to think this through, I believe it 
> adds no more complexity than the alternative... even much less 
> complexity than the alternatives especially if there is no desire to 
> specify its use with XML D-Sig.  Of course, the use of this mechanism 
> MUST be restricted specifically to emergency scenarios, and only when 
> location is not present in the body.
> 
> -andy
> 
> 
> _______________________________________________
> Geopriv mailing list
> Geopriv@ietf.org
> https://www1.ietf.org/mailman/listinfo/geopriv
> 
> 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 10:15:43 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNVTS-0003kZ-7g; Wed, 13 Sep 2006 10:12:22 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNVTQ-0003kU-BA
	for sip@ietf.org; Wed, 13 Sep 2006 10:12:20 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNVTN-0001ZU-Mk
	for sip@ietf.org; Wed, 13 Sep 2006 10:12:20 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 13 Sep 2006 07:12:17 -0700
X-IronPort-AV: i="4.09,160,1157353200"; 
	d="scan'208"; a="41434512:sNHT33561848"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8DECHmb021848; Wed, 13 Sep 2006 10:12:17 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8DECHuI027513; 
	Wed, 13 Sep 2006 10:12:17 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 10:12:17 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 10:12:16 -0400
Message-ID: <450811C0.1090402@cisco.com>
Date: Wed, 13 Sep 2006 10:12:16 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Dale.Worley@comcast.net
Subject: Re: [Sip] GRUU and Anonymity
References: <200609121458.k8CEwnwA017668@dragon.ariadne.com>	<4506EF2C.40702@cisco.com>
	<200609121925.k8CJPHxF023891@dragon.ariadne.com>
In-Reply-To: <200609121925.k8CJPHxF023891@dragon.ariadne.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Sep 2006 14:12:16.0542 (UTC)
	FILETIME=[9E0093E0:01C6D73E]
DKIM-Signature: a=rsa-sha1; q=dns; l=4618; t=1158156737; x=1159020737;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity
	|To:Dale.Worley@comcast.net;
	X=v=3Dcisco.com=3B=20h=3DONUzYILMhsEbjhLpG/U2iddFvRU=3D;
	b=EPuwICNRQmm1VVHoLlwQiTI4O5xVnS11XIu7vXzGUlaqZ7+4QhQvWp8wlLjNyevloduAayMF
	c+E6jmOrpO2xbLTPmphx6PPJDI5+S85vIcKfRwhTx2gHHyonDnsHsRS0;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 6e922792024732fb1bb6f346e63517e4
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Dale.Worley@comcast.net wrote:
>    From: Paul Kyzivat <pkyzivat@cisco.com>
> 
>    I'm not sure I follow all the details, but I get the gist. I gather the 
>    proxy isn't expected to have any idea which sequence numbers are/aren't 
>    valid. If so, then it seems that the sequence number is analogous to the 
>    grid parameter. It may be possible align the two approaches closely.
> 
>    For instance, perhaps the normal gruu is of form:
> 	   sip:user@domain;gruu;opaque=xyz;grid=abc
> 
>    Then an anonymous form of it could be
> 	   sip:PublicKey(user,opaque,grid)@domain;gruu
> 
>    and as you suggest, the proxy could turn this back into the 
>    non-anonymous form and then process it normally. Ultimately the UA would 
>    receive the grid.
> 
> The reason that the pseudo-grid's are numbers is so that the UA can
> store a threshold, before which all pseudo-grid's are known to be
> invalid.  If they didn't form an ordered sequence, the UA would have
> to record in non-volatile memory all invalid ones.  Or all valid ones.
> 
> Uh, yes, the number of valid ones at any given moment is expected to
> be small.  So you don't really need them to be numbers, as long as
> there is some way to avoid using the same one twice (very often).

The way the values are tracked by the UA isn't relevant to the 
mechanism. If a UA wants to use grid values that are monotonically 
increasing integers, in order to simplify tracking which are still 
valid, then it is free to do so. If it wants to use callids, then it can 
do that. Whatever.

>    But a piece I am missing in the above and below is how the proxy 
>    determines what private key to apply to the incoming truu. It could 
>    potentially get the one currently assigned to a registered contact, but 
>    to do so it would need to know what user, and then which contact.
> 
>    I guess the anonymous form of the gruu could be:
> 	   sip:PublicKey(user,opaque,grid)@domain;gruu;key=foo
> 
> There's only one private key for the domain.

Oh! I didn't guess that. That seems like a fatal flaw. Once it is 
cracked, it is cracked for everybody. And it will be hard to change if 
it is compromised.

>    Another messy aspect of this is that it couples the UA and the proxy 
>    regarding the details of the format of the URI, and that might cause 
>    some difficulties.
> 
> Yeah, it's a pretty tight coupling between the processing in the proxy
> and in the UA.  In particular, they have to implement opposite halves
> of the encryption operation.

That part isn't so bad. But it also couples other aspects of formatting 
the anonymous gruu. (Does it have the same domain as the regular gruu? 
Does it have parameters? Is it necessary to provide a standard prefix or 
suffix to the encrypted part before putting it into the URI?)

I have no doubt that we could come up with some flexible scheme for 
this, characterized by a few parameters. But then we need to convey 
those parameters, etc. Its not a show stopper, but its unpleasantly 
complex to cover in general.

>    For instance, one problem I have encountered with IMS (and which may 
>    apply to other large domains) is that the user space is partitioned, 
>    with a different home proxy handling each partition. In the kind of 
>    scheme you have proposed, it becomes necessary to guarantee that 
>    anonymous gruus are routed to the proper home proxy.
> 
> Not really.  Since there is only one private key, any proxy can open
> any TRUU for the domain.  Once it does that, it has the GRUU for the
> UA, but we already assume that any proxy can route any GRUU for the
> domain.

If there is only one key, then I agree the problem is simpler.
But I have to believe that the key will need to change from time to 
time. That results in a key distribution problem.

It would be way safer if there was a separate key for every gruu. But 
that leads to all the other problems I have been worrying about.

> This scheme seems to have a problem in that it's not too hard to forge
> TRUUs that might get partially routed before they are rejected.

I think there are different views of how important a problem that is. It 
doesn't bother me so much.

	Paul

> Dale
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 10:28:34 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNVhE-0001rH-I8; Wed, 13 Sep 2006 10:26:36 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNSHi-00037T-1Z
	for sip@ietf.org; Wed, 13 Sep 2006 06:48:02 -0400
Received: from web30104.mail.mud.yahoo.com ([209.191.69.36])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GNSHg-0005vx-JZ
	for sip@ietf.org; Wed, 13 Sep 2006 06:48:02 -0400
Received: (qmail 93919 invoked by uid 60001); 13 Sep 2006 10:47:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
	b=XGJrv2TGNiyl+IJ7UAYqHLPrgpnOAiqSP4qBTujc1Zp9aRqsSuNcXlQLSFmFjH2B6hOstCyNRs1T98MUk4pw5mj4tWCUlkNBmSKy0blDb30fR6PoImRT69k4J7Rr5DCFPJXuf0U5PH7ZeV3mtp8pdAs0osmSfq3yTXjWBSdtVEY=
	; 
Message-ID: <20060913104759.93917.qmail@web30104.mail.mud.yahoo.com>
Received: from [62.23.212.7] by web30104.mail.mud.yahoo.com via HTTP;
	Wed, 13 Sep 2006 03:47:59 PDT
Date: Wed, 13 Sep 2006 03:47:59 -0700 (PDT)
From: Maheswari D <dmaheswa@yahoo.com>
To: sip@ietf.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7655788c23eb79e336f5f8ba8bce7906
X-Mailman-Approved-At: Wed, 13 Sep 2006 10:26:35 -0400
Subject: [Sip] P-Asserted Value syntax
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hello All,

Can you please clarify if the following P-Asserted
value are according to the RFC standard.

1)P-Asserted-Identity:<sip:213106404@10.9.34.10:5061;user=phone>
2)P-Asserted-Identity:sip:213106404@10.9.34.10:5061 

RFC shows examples only for the mail address with the
tag like follows:
P-Asserted-Identity: <sip:fluffy@cisco.com>

If the above 2 syntax are wrong, can you please guide
with the correct syntax.

Thanks & Regards,
Maheswari.D


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 11:03:53 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNWF1-0001pJ-0W; Wed, 13 Sep 2006 11:01:31 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNWF0-0001pE-8Z
	for sip@ietf.org; Wed, 13 Sep 2006 11:01:30 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNWEu-0001aY-B7
	for sip@ietf.org; Wed, 13 Sep 2006 11:01:30 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 13 Sep 2006 11:01:24 -0400
X-IronPort-AV: i="4.09,160,1157342400"; 
	d="scan'208"; a="102208710:sNHT32282076"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8DF1Nbe029319; Wed, 13 Sep 2006 11:01:23 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8DF1MuO022224; 
	Wed, 13 Sep 2006 11:01:23 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 11:01:23 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 11:01:23 -0400
Message-ID: <45081D43.5040003@cisco.com>
Date: Wed, 13 Sep 2006 11:01:23 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Sep 2006 15:01:23.0490 (UTC)
	FILETIME=[7A852820:01C6D745]
DKIM-Signature: a=rsa-sha1; q=dns; l=4215; t=1158159683; x=1159023683;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity
	|To:Francois=20Audet=20<audet@nortel.com>;
	X=v=3Dcisco.com=3B=20h=3DONUzYILMhsEbjhLpG/U2iddFvRU=3D;
	b=bQHHLhRtbrzvnQqkjV97rQOvvzz3nJF3InYqX7SdpEe3v8uAfGWF09fN+VZuRgOgNA7qoDiv
	++LPchIt5EOzPoYDNFW5G6XDPr9kUSIzDjcw2HpY+vI2ansDVCFs68FR;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 14582b0692e7f70ce7111d04db3781c8
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Francois,

You are stating a need for a level of anonymity that Jonathan says is 
almost impossible to achieve. Something has to give here.

I think the world already deals with differing levels of anonymity. 
Callerid blocking in the pstn only blocks your identity from the 
receiving party, while the whole intervening network has access to your 
identity. And its often negated when making emergency calls. So if I 
have a *serious* need to remain anonymous, invoking callerid blocking 
already isn't enough. Instead I am forced to seek out an anonymous phone 
from which to originate the call, or use some very complex mechanisms 
that are not widely available. And when seeking out an anonymous phone 
from which to make my call, I will again typically be limited in the 
scope of anonymity. For instance if I cannot travel to an arbitrary 
location to make my call then the location I make the call from can be 
used to guess where I am.

One part of jonathan's old proposal escapes me: why is it important to 
support sip identity when making an anonymous call? Does it really 
matter to the recipient that the caller is really the particular 
anonymous caller it claims to be rather than some other unknown caller?

I am inclined to think that an independent anonymizer service (b2bua 
based) running in its own domain, would be sufficient for all *my* worst 
case anonymity needs, and that anonymity within the domain of my own 
provider would be sufficient for those cases when I just want to "block 
callerid". YMMV.

It is clear that the more complete forms of anonymity are relatively 
expensive to provide, to the point that it probably wouldn't be good to 
make that the default. If it became an extra cost service then it would 
be self funding. Then people will settle for less when the need doesn't 
justify the cost.

	Paul

Francois Audet wrote:
>  
>>> I guess what I'm trying to say is that if we need 
>> annonymity, it needs 
>>> to be full annonymity. I don't see a value in "pseudonymity".
>> Why? Certainly there are privacy applications (such as 
>> calling the police to anonymously report an incident) where 
>> pseudonymity is probably sufficient.
> 
> I don't believe that a system that "works sometimes" is useful.
> 
> To take the "police" example, if my domain is enough for the police
> to track me down (or to a subset small enought that I'm not annonymous),
> then, well, it's not annonymous anymore. Maybe I have my own 
> domain, or you can track that there was only one user with that
> particular
> domain who might have made that call. Maybe I'm reporting something to 
> police, and it shows my employer's domain. Suddently, my employer is
> embroiled.
> 
> The end-user will not have confidence that's it's really annonymous
> because
> it's not always annonymous.
> 
> Maybe I'm missing something that is special to GRUU. I'm reading Dean's
> summary,
> but I'm not terribly convinced that the claims are true.
> 
> I'm highly sceptical that somehow that we (IETF) need to provide a
> solution to
> the GRUU anonimity problem.
> 
> But I could be missising something.
> 
> 
>>> So, I agree with you. When we DO solve annonymity, it needs to work 
>>> with GRUU and everthing else. In the meanwhile, I don't 
>> think GRUU is 
>>> special and requires immediately a solution to annonymity.
>>>
>> You may have to wait a while. A LONG while.
>>
>> In:
>> http://www.jdrosen.net/papers/draft-rosenberg-sip-identity-pri
> vacy-00.txt
>> I took a stab at some thoughts on true anonymity. Its nearly 
>> impossible to do. Even anonymizers aren't sufficient. It is 
>> possible that the only solutions require crazy BGP hacks like 
>> I describe else a global, massive p2p mesh.
> 
> Yeah, I have read this, and I do agree that it's MUCH bigger than just
> GRUU.
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 11:57:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNX4V-0000KM-5b; Wed, 13 Sep 2006 11:54:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNX4R-0000J6-UX
	for sip@ietf.org; Wed, 13 Sep 2006 11:54:39 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNX4P-0000XA-I3
	for sip@ietf.org; Wed, 13 Sep 2006 11:54:39 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8DFsNs19816; Wed, 13 Sep 2006 11:54:23 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] P-Asserted Value syntax
Date: Wed, 13 Sep 2006 10:53:37 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D192F1F@zrc2hxm0.corp.nortel.com>
In-Reply-To: <20060913104759.93917.qmail@web30104.mail.mud.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] P-Asserted Value syntax
Thread-Index: AcbXQNCWF4jhET+pSHyYVblCz8nRbQACuSSg
From: "Francois Audet" <audet@nortel.com>
To: "Maheswari D" <dmaheswa@yahoo.com>, <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 41c17b4b16d1eedaa8395c26e9a251c4
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

First one is wrong as it would require a phone-context or a "+"
parameter to
be RFC 3966 compliant (which is what user=3Dphone means).

So Assuming your intent was for 213 =3D=3D Algeria's country code, it =
would
look
like:

P-Asserted-Identity:<sip:+213106404@10.9.34.10:5061;user=3Dphone>

If on the othe hand, this was a private 9-digit number used inside
an enterprise (say, example.com), it could look like:

P-Asserted-Identity:<sip:213106404;phone-context=3Dexample.com@10.9.34.10=
:
5061;user=3Dphone>

---

Second one is technically correct. However, instead of being a phone=20
number it means a user name (there is no user=3Dphone parameter) which =
may

not make much sense outside one's network. If you send it to me and we=20
are in different domains, to me the number is just a user-name that only
make sense at 10.9.34.10.


For both case, it would normally make more sense to use a domain name
instead of an IP address.
 =20

> -----Original Message-----
> From: Maheswari D [mailto:dmaheswa@yahoo.com]=20
> Sent: Wednesday, September 13, 2006 3:48 AM
> To: sip@ietf.org
> Subject: [Sip] P-Asserted Value syntax
>=20
> Hello All,
>=20
> Can you please clarify if the following P-Asserted value are=20
> according to the RFC standard.
>=20
> 1)P-Asserted-Identity:<sip:213106404@10.9.34.10:5061;user=3Dphone>
> 2)P-Asserted-Identity:sip:213106404@10.9.34.10:5061=20
>=20
> RFC shows examples only for the mail address with the tag=20
> like follows:
> P-Asserted-Identity: <sip:fluffy@cisco.com>
>=20
> If the above 2 syntax are wrong, can you please guide with=20
> the correct syntax.
>=20
> Thanks & Regards,
> Maheswari.D
>=20
>=20
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection=20
> around http://mail.yahoo.com=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 11:58:42 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNX6f-0001We-Qo; Wed, 13 Sep 2006 11:56:57 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNX6e-0001Ui-5c
	for sip@ietf.org; Wed, 13 Sep 2006 11:56:56 -0400
Received: from nylon.softarmor.com ([66.135.38.164])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNX6c-0000xE-RK
	for sip@ietf.org; Wed, 13 Sep 2006 11:56:56 -0400
Received: from [192.168.2.100] ([12.5.186.27]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.1/8.13.1) with ESMTP id k8DExVY2010487
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Wed, 13 Sep 2006 09:59:31 -0500
In-Reply-To: <85108216918A984C8C60172D7C84770A56F67A@S4DE8PSAAGO.mitte.t-com.de>
References: <85108216918A984C8C60172D7C84770A56F67A@S4DE8PSAAGO.mitte.t-com.de>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <27100C2E-0F7C-48AB-A835-637AFA0BD56F@softarmor.com>
Content-Transfer-Encoding: 7bit
From: Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Date: Wed, 13 Sep 2006 10:56:41 -0500
To: "Jesske, R" <R.Jesske@t-com.net>
X-Mailer: Apple Mail (2.752.2)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 5a9a1bd6c2d06a21d748b7d0070ddcb8
Cc: sip@ietf.org, drage@lucent.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


On Sep 13, 2006, at 5:36 AM, Jesske, R wrote:
>> dy.
>>
>> In this Draft is described that:
>> The request contained a Privacy header field whose value was 'id'
>>       [3] or 'user'.  This explicitly excludes the 'header' and
>>       'session' privacy services, since those do not directly
>> convey the
>>       identity of the requestor.
>>
>> Why the value 'header ' is exluded?
>>
>> In RFC3323 is described that header:
>>       header: The user requests that a privacy service obscure those
>>       headers which cannot be completely expunged of identifying
>>       information without the assistance of intermediaries
>> (such as Via
>>       and Contact).  Also, no unnecessary headers should be
>> added by the
>>       service that might reveal personal information about the
>>       originator of the request.
>>
>> So from my understanding 'id' is a subset of 'header' because
>> the P-Asserted-Identity can only be deleted by untermediarities.

ID privacy is only a subset of header privacy if the identity  
mechanism is entirely header-based. It isn't always that way. IMS is  
not the entire SIP world. RFC 3323 "header" privacy doesn't preclude  
non-header-field-based identity expressions, so ACR can't  
automatically reject requests with "header" privacy.

Nor can ACR automatically accept a request that does NOT have  
"header" privacy.

In the specific case of ACR, we're trying to reject an INVITE that  
does not contain an explicit and intentional disclosure of the  
requestor's identity. While the requestor's identity might "leak"  
from headers, only specific identity headers (or other identity  
mechanisms, such as AIB) carry the sort of strong identity assertion  
needed for anonymous call rejection to work as expected.

Here's an example: Let's say the the Contact: header field value in  
my INVITE is really a reversible GRUU. That is, the GRUU contains my  
AOR. I use no other identity mechanisms.

I call you. You have ACR turned on. Is the fact that my identity is  
encoded in the Contact: header field of my INVITE good enough to keep  
you from rejecting my call?

I'd argue that it is not. Since we don't have a widely accepted way  
for assuring that the identity expressed in a Contact header field is  
valid, we really can't use this information for ACR.


--
Dean

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 12:42:06 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNXlV-0003Uf-EX; Wed, 13 Sep 2006 12:39:09 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNXlU-0003UZ-P9
	for sip@ietf.org; Wed, 13 Sep 2006 12:39:08 -0400
Received: from mail.infointeractive.com ([207.231.225.15]
	helo=smtp.infointeractive.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNXlR-0005nU-48
	for sip@ietf.org; Wed, 13 Sep 2006 12:39:08 -0400
Received: from eng.infointeractive.com ([10.142.0.50]:54526 "EHLO
	eng.infointeractive.com") by mail.infointeractive.com with ESMTP
	id S897524AbWIMQip (ORCPT <rfc822;sip@ietf.org>);
	Wed, 13 Sep 2006 13:38:45 -0300
Received: from localhost (user: 'benoit', uid#6008) by eng.infointeractive.com
	id <105984-9222>; Wed, 13 Sep 2006 13:38:42 -0300
Date: Wed, 13 Sep 2006 13:38:42 -0300
From: David Benoit <benoit@infointeractive.com>
To: Paul Kyzivat <pkyzivat@cisco.com>
Subject: Re: [Sip] loop fix
Message-ID: <20060913163842.GJ19029@infointeractive.com>
References: <003001c6d570$13b99260$0601a8c0@BEMBUSTER>
	<003301c6d5c5$38374e20$5000a8c0@RW>
	<20060911175201.GG19029@infointeractive.com>
	<4505AC86.6050001@cisco.com>
	<20060911204505.GI19029@infointeractive.com>
	<4507315B.2050608@cisco.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <4507315B.2050608@cisco.com>
User-Agent: Mutt/1.4.2.1i
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 2d133cc328f58695161c98bb4f4dc213
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

On Tue, Sep 12, 2006 at 06:14:51PM -0400, Paul Kyzivat wrote:
> David,
> 
> There are two cases here:
> - the B2BUA is a complicit evil doer
> - the B2BUA is a bystander
> 
> If the B2BUA is an evil doer, then there is no amplification. If the 
> evil doer is willing to devote this much resource to the attack then we 
> are perhaps helpless to solve it by these kinds of means.

How is there no amplification?  My point is that all the B2BUA would have
to do is just that, back-to-back the call and the proxy that the loop is
made through can never detect it.  Does that make the loop detection
pointless?  No, but it does mean that it obviously does not solve the
whole problem.

> If the B2BUA is a bystander, then IMO it has an obligation to do loop 
> detection. How it would do that is a question. But because we don't 
> currently do specs for B2BUAs we aren't likely to specify how.

That's unfortunate as I don't use "proxies" that aren't B2BUAs.  I find it
much easier to write a B2BUA than a "proxy" since I have to know about all
the state of the transactions anyway.  I see no benefit to a proxy over a
B2BUA.

Here's the problem.  You want to protect against amplification.  Spiraling
calls are okay (presumably because they are taking a different "route" on
each loop.  We can't remove forking because that is too useful.

I really think the only reasonable protection the proxy can do is make
sure that the proxy is not sending a transaction to itself.  You should
never have a spiral that has a message going from A to A without going
through B.  A should know that it _is_ A and that sending to A is
pointless as it could otherwise determine what to do with the message
(either detect it as a loop, or apply different processing rules).

On the binding side of things, you have to protect against malicious
bindings.  There has to be some qualification that a binding is against an
endpoint that _can_not_ produce a loop.  For example, if you only allowed
bindings to be registered against a network element that was not allowed
to send messages back "in" but only "out".  In other words, make it
impossible on the layer 3 side of things for the messages to loop.  If you
want to protect your network, you have to control your network.  You can't
trust that the messages will be well formed, and you can't trust that a
binding won't try to create a loop.

David

> 
> 	Paul
> 
> David Benoit wrote:
> >I think you may have missed my point.  The B2BUA would be in every segment
> >of the loop, inserted.  The tree would still grow to n^Max_Forwards (where
> >n is the number of forks... which I have had cause to have as many as 8).
> >My point is that loop detection doesn't work here.  At no stage of the
> >"looping" (which, would be better called an infinite "spiral") can you
> >detect that it is the same message.
> >
> >As I said earlier, it can _only_ _always_ work if you end up sending it to
> >yourself, which you should be able to detect _before_ you send it.
> >
> >There has to be better protection against such escalation.  But what?
> >
> >David
> >
> >On Mon, Sep 11, 2006 at 02:35:50PM -0400, Paul Kyzivat wrote:
> >>David,
> >>
> >>Certainly it is possilbe to implement a scenario such as you show below.
> >>
> >>Without loop detection and with Max-forwards of 70, such a thing will 
> >>generate about 2^70 messages before max-forwards stops it. The 
> >>difference compared to a non-b2bua case it that you will need 2^70-1 
> >>b2bua call states to achieve this. It will presumably run out of 
> >>capacity long before then.
> >>
> >>This is of course a problem for B2BUAs. If we had any rules for them 
> >>than we should probably require that they also implement loop detection.
> >>
> >>	Paul
> >>
> >>David Benoit wrote:
> >>>I'm sorry, but I'm still not convinced that any of this is going to help.
> >>>What, in any of this, prevents the following:
> >>>
> >>>             A
> >>>             |
> >>>             P
> >>>            / \
> >>>           BB BB
> >>>           |   |
> >>>           P   P
> >>>
> >>>Where A is a UA, P is a stateless proxy, and BB is a B2BUA.  The request
> >>>is going to fork from the proxy, arrive at the B2BUA, a _new_ (related
> >>>only internally to the B2BUA) call is then made to P and the tree grows
> >>>just as before.  It is not possible to detect the loop because the 
> >>>message
> >>>is not the same; it is a new transaction.  This new draft mentions 
> >>>nothing
> >>>about this, yet it is exactly the same problem.
> >>>
> >>>Also, schemes such as these will only really protect against "friendly
> >>>fire" ... meaning it only really protects you against mis-configuration.
> >>>Anyone seriously out to destroy your proxy is going to at least not
> >>>forward on the headers such that they are detected as a loop.  You can't
> >>>assume that the malicious are ignorant.
> >>>
> >>>The amplification problem can NOT be removed unless "you" are sending the
> >>>transaction to yourself.  That is the only way you can know that the
> >>>headers haven't been modified.
> >>>
> >>>David
> >>>
> >>>
> >>>On Mon, Sep 11, 2006 at 06:10:39PM +0100, Pete Cordell wrote:
> >>>>I've reflected a bit more on this...
> >>>>
> >>>>A question... is it possible to arrange that two (non-forking) proxies 
> >>>>end up bouncing a single request between them?  I would think it is.  
> >>>>In this case, even though you don't get the combinatorial explosion 
> >>>>that you do for the forking case, I think a 1 to 70 amplification of 
> >>>>messages is still quite significant and worth protecting against.
> >>>>
> >>>>So I think the various weighting should be, forking proxies MUST do 
> >>>>loop detection.  Other proxies SHOULD do loop detection (as opposed to 
> >>>>MAY). It's important that the draft explains a method to do loop 
> >>>>detection in the most general case (i.e. allowing for stateless proxies 
> >>>>etc.), but technically I don't think it even has to be RECOMMENDED 
> >>>>strength.
> >>>>
> >>>>It would be good if in some way the loop detection algorithm could be 
> >>>>normatively referenced so that it would be possible to say that such 
> >>>>and such an implementation fully implements and conforms to the loop 
> >>>>detection algorithm described in RFC XXXX, by just saying "implements 
> >>>>RFC XXXX".  That might require two RFCs though; one to 
> >>>>mandate/recommend loop detection, and another to described the 
> >>>>suggested loop detection algorithm. That may be too much work for the 
> >>>>small gain though!
> >>>>
> >>>>Pete.
> >>>>--
> >>>>=============================================
> >>>>Pete Cordell
> >>>>Tech-Know-Ware Ltd
> >>>>                       for XML to C++ data binding visit
> >>>>                       http://www.tech-know-ware.com/lmx
> >>>>                       (or http://www.xml2cpp.com)
> >>>>=============================================
> >>>>
> >>>>----- Original Message ----- 
> >>>>From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
> >>>>To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>; "Juha Heinanen" 
> >>>><jh@tutpro.com>
> >>>>Cc: <sip@ietf.org>
> >>>>Sent: Monday, September 11, 2006 8:01 AM
> >>>>Subject: Re: [Sip] loop fix
> >>>>
> >>>>
> >>>>>Juha,
> >>>>>
> >>>>>Loop detection currently works the way it does to accomodate stateless 
> >>>>>proxies. It is the least common denominator; it will also work for 
> >>>>>stateful proxies, so there is no need to define separate mechanisms to 
> >>>>>achieve the same goal. That is a benefit
> >>>>>
> >>>>>It is true that you can also detect loops by searching through 
> >>>>>existing state, with the aforementioned drawbacks that it won't work 
> >>>>>as well across reboots (I consider the performance of the lookup an 
> >>>>>implementation issue, it can be made efficient).
> >>>>>
> >>>>>For the forking scenario, the proxy must by definition be stateful. So 
> >>>>>one could use a lookup through existing state as a way to do loop 
> >>>>>detection. There is nothing in the draft that prevents this - hashing 
> >>>>>is RECOMMENDED, but nothing says you can't do it your way. In fact, 
> >>>>>loop detection is a completely local feature - a proxy only has to 
> >>>>>recognise its own detection mechanism. So as long as it keeps to 
> >>>>>standard RFC3261 syntax, there is not actually a need to standardize 
> >>>>>any particular mechanism - just stating that it MUST do loop detection 
> >>>>>is sufficient.
> >>>>>
> >>>>>What I personally don't like about the recommended mechanism, is the 
> >>>>>overloading of Via branches for both transaction id and loop 
> >>>>>detection. IMHO a much better solution is to separate the two; I 
> >>>>>personally use
> >>>>>
> >>>>>Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}
> >>>>>
> >>>>>And it would be nice if there were some way to detect if some proxy is 
> >>>>>doing loop detection or not. A separate parameter achieves this
> >>>>>
> >>>>>Regards,
> >>>>>
> >>>>>Jeroen
> >>>>>
> >>>>>----- Original Message ----- 
> >>>>>From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
> >>>>>To: "Juha Heinanen" <jh@tutpro.com>
> >>>>>Cc: <sip@ietf.org>
> >>>>>Sent: Monday, September 11, 2006 6:36 AM
> >>>>>Subject: Re: [Sip] loop fix
> >>>>>
> >>>>>
> >>>>>On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:
> >>>>>
> >>>>>>>(1) speed - if you have a large number of active transactions, then 
> >>>>>>>it's
> >>>>>>>almost certainly a lot faster to construct and compare a hash in X
> >>>>>>>number of via headers than search all the transactions received on
> >>>>>>>that particular transport.
> >>>>>>in some implementations this is true. if it is not true in all
> >>>>>>implementations, then the i-d should not give one SHOULD 
> >>>>>>implementation
> >>>>>>solution.
> >>>>>As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing 
> >>>>>it in
> >>>>>other ways if your particular situation requires it - but as most 
> >>>>>'common'
> >>>>>implementations will worry about the things listed here, then SHOULD 
> >>>>>is the
> >>>>>right force for it in my opinion, as there are (as per rfc2119) "valid
> >>>>>reasons in particular circumstances to ignore a particular item, but 
> >>>>>the full
> >>>>>implications must be understood and carefully weighed before choosing a
> >>>>>different course."
> >>>>>
> >>>>>>>(2) resilience - a crashed proxy would still be able to perform loop
> >>>>>>>detection, even after loosing all of it's state - assuming it keeps
> >>>>>>>transactions in memory and not committed elsewhere before forwarding;
> >>>>>>this i don't quite understand. even if proxy looses all state, doesn't
> >>>>>>it rebuild that state next time it receives the looped request again 
> >>>>>>and
> >>>>>>will detect the loop during the following round?
> >>>>>Only after it looped again after crashing, and that assumes it's not 
> >>>>>already
> >>>>>crashed again since.  Given that the attack vector that the I-D is 
> >>>>>trying to
> >>>>>fix, i think it is sensible for it to catch a loop between crashes of 
> >>>>>an
> >>>>>element, too.
> >>>>>
> >>>>>fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a 
> >>>>>Network:
> >>>>>
> >>>>>[...]
> >>>>>It is interesting to note that a few proxies rebooted during
> >>>>>the scenario, and rejoined in the attack when they restarted (as long
> >>>>>as they maintained registration state across reboots).  This points
> >>>>>out that if this attack were launched on the Internet at large, it
> >>>>>might require coordination among all the affected elements to stop
> >>>>>it.
> >>>>>
> >>>>>>>(3) scalability - loop may go through different proxies when load
> >>>>>>>balancing. KEeping the hash in the via header allows peer proxies to
> >>>>>>>detect and stop looped requests quicker than it would otherwise.
> >>>>>>this is not a valid reason, since if there are multiple proxies, they
> >>>>>>may be from different vendors and since there is no standardized way 
> >>>>>>to
> >>>>>>calculate and add the hash into via header, one proxy cannot interpret
> >>>>>>the via header added by another proxy.
> >>>>>indeed, with multiple vendors.  but none the less, it's a reason a 
> >>>>>proxy may
> >>>>>want to use Via hashes rather than internally (which is what you 
> >>>>>asked).
> >>>>>
> >>>>>~ Theo
> >>>>>
> >>>>>-- 
> >>>>>Theo P. Zourzouvillys
> >>>>>http://www.crazygreek.co.uk
> >>>>>theo@crazygreek.co.uk
> >>>>>
> >>>>>_______________________________________________
> >>>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >>>>>This list is for NEW development of the core SIP Protocol
> >>>>>Use sip-implementors@cs.columbia.edu for questions on current sip
> >>>>>Use sipping@ietf.org for new developments on the application of sip
> >>>>>
> >>>>>_______________________________________________
> >>>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >>>>>This list is for NEW development of the core SIP Protocol
> >>>>>Use sip-implementors@cs.columbia.edu for questions on current sip
> >>>>>Use sipping@ietf.org for new developments on the application of sip
> >>>>>
> >>>>
> >>>>_______________________________________________
> >>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >>>>This list is for NEW development of the core SIP Protocol
> >>>>Use sip-implementors@cs.columbia.edu for questions on current sip
> >>>>Use sipping@ietf.org for new developments on the application of sip
> >

-- 
David.Benoit@InfoInteractive.com | phone: 902-832-2649  fax: 902-832-1015
 "Complex problems have simple, neat and wrong solutions" - H. L. Menken

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 13:03:34 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNY6D-0004Wl-Ka; Wed, 13 Sep 2006 13:00:33 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNY6B-0004OX-Rt
	for sip@ietf.org; Wed, 13 Sep 2006 13:00:31 -0400
Received: from zrtps0kn.nortel.com ([47.140.192.55])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNY6A-00083h-II
	for sip@ietf.org; Wed, 13 Sep 2006 13:00:31 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zrtps0kn.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8DH0RA06402; Wed, 13 Sep 2006 13:00:28 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 13 Sep 2006 12:00:26 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D1930AB@zrc2hxm0.corp.nortel.com>
In-Reply-To: <5D1A7985295922448D5550C94DE2918042B676@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Review of draft-ietf-sip-connected-identity-01
Thread-Index: AcbWshjcd4u/SoQuRQmkEhD7ESvn8gAnK6og
From: "Francois Audet" <audet@nortel.com>
To: "Drage, Keith \(Keith\)" <drage@lucent.com>, <sip@ietf.org>,
	"John Elwell" <john.elwell@siemens.com>
X-Spam-Score: 1.1 (+)
X-Scan-Signature: 1a1bf7677bfe77d8af1ebe0e91045c5b
Cc: 
Subject: [Sip] Review of draft-ietf-sip-connected-identity-01
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Here is my review of Connected-Identity.

I believe the document is in good shape and has received ample comments
over the years=20
from the working groups...



General Comments:

- Section 6.4

  I'm not sure what is the intent of the first paragraph. Is the intent
to say that=20
  RFC 4474 MUST be used when updating connected identity, which I would
interpret as
  mandating the usage of the Indentity and Identity-Info headers? Or are
we saying
  that there are other requirement concerning the From header itself in
RFC 4474 that
  must be observed? I think it needs to be clarified.

  My assumption is that supporting Connected-ID does NOT mandate the
usage of Identity
  and Identity-Info headers. Those headers are only mandatory if
Authenticated Connected
  Identity is desired. If this is correct, I think it needs to be
explicitely noted (this
  is the material in 6.5).


- Section 6.6
 =20
  This is more of a question than a request for change. Do we know of
proxies that
  would have problems with From/To changing in a mid-dialog request? And
why the=20
  phrase "that record routes"? Does it make any difference?



Editorial comments:

- Section 3

  First sentence of first paragraph: I'd change "a call and its session"
to "a session".

  Last sentence of first paragraph: I'd change "because of call
forwarding" to "because of
  retargeting".


- Section 4

  Last paragraph: remove ", typically located at the outbound proxy, ".
It's not necessarily
  false, but I don't think we need to say that as we can't really
predict how this will be
  implemented.


- Section 5

  Third paragraph: I don't believe the wording about response identity
being subject to study=20
  is appropriate for an RFC: it made sense when we were developping the
draft, but I'd rather=20
  we remove it now. Similarly, I'm not sure we should keep the wording
about GRUU, because
  we can't predict if GRUU will tackle or not the annonymity issue (as
we saw in the mailing
  list recently). My suggestion would be to remove the paragraph
altogether. If this is=20
  not acceptable, then I'd remove all mention of GRUU, and I'd remove
the second sentence of
  the paragraph.


- Section 6.3

  This is more a question than a request for a change. What do we mean
by using a re-INVITE=20
  instead of an UPDATE if there is "other reasons" for the re-INVITE?
Any example? The draft
  makes it mandatory for both ends to support UPDATE. Is this because in
some cases we
  may want the identity change to trigger user action (to accept the
change for example)? If
  so, maybe we should state it.=20


- Section 7

  Messages show bunch of "TODO" that needs to be done.


- Section 11.1
 =20
  Reference [3] should be replaced with RFC 4474.

  Reference [8] shouuld be updated to draft-ietf-sip-gruu-10.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 14:16:39 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNZE2-0007Fb-KS; Wed, 13 Sep 2006 14:12:42 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNZE0-0007F1-Ti
	for sip@ietf.org; Wed, 13 Sep 2006 14:12:40 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNZ8T-0001LL-Cg
	for sip@ietf.org; Wed, 13 Sep 2006 14:07:01 -0400
Received: from sj-dkim-5.cisco.com ([171.68.10.79])
	by sj-iport-5.cisco.com with ESMTP; 13 Sep 2006 11:06:57 -0700
X-IronPort-AV: i="4.09,160,1157353200"; 
	d="scan'208"; a="320834729:sNHT44459788"
Received: from sj-core-3.cisco.com (sj-core-3.cisco.com [171.68.223.137])
	by sj-dkim-5.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8DI6uvf004229; Wed, 13 Sep 2006 11:06:56 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-3.cisco.com (8.12.10/8.12.6) with ESMTP id k8DI6nwH012159;
	Wed, 13 Sep 2006 11:06:56 -0700 (PDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 14:06:51 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 14:06:50 -0400
Message-ID: <450848BA.8020903@cisco.com>
Date: Wed, 13 Sep 2006 14:06:50 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: David Benoit <benoit@infointeractive.com>
Subject: Re: [Sip] loop fix
References: <003001c6d570$13b99260$0601a8c0@BEMBUSTER>	<003301c6d5c5$38374e20$5000a8c0@RW>	<20060911175201.GG19029@infointeractive.com>	<4505AC86.6050001@cisco.com>	<20060911204505.GI19029@infointeractive.com>	<4507315B.2050608@cisco.com>
	<20060913163842.GJ19029@infointeractive.com>
In-Reply-To: <20060913163842.GJ19029@infointeractive.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Sep 2006 18:06:50.0754 (UTC)
	FILETIME=[62E2E620:01C6D75F]
DKIM-Signature: a=rsa-sha1; q=dns; l=14957; t=1158170816; x=1159034816;
	c=relaxed/simple; s=sjdkim5002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20loop=20fix;
	X=v=3Dcisco.com=3B=20h=3DArK67HR9HZ/DG/+7xj8dvwH5p9U=3D;
	b=NV94oKuCKPvSod5adzxaq0cX3X+Kj82dqryYsaOa8KSWcT5BnCRxaRGNiizhYWKMV1iv+Z09
	j1NJeJ56atEVCYc3DM8gkdkPIx0FPvKZ2USh7eV0pvWwPhRdt/CebdpV;
Authentication-Results: sj-dkim-5.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9f79b8e383fd3af2b1b5b1d0910f6094
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



David Benoit wrote:
> On Tue, Sep 12, 2006 at 06:14:51PM -0400, Paul Kyzivat wrote:
>> David,
>>
>> There are two cases here:
>> - the B2BUA is a complicit evil doer
>> - the B2BUA is a bystander
>>
>> If the B2BUA is an evil doer, then there is no amplification. If the 
>> evil doer is willing to devote this much resource to the attack then we 
>> are perhaps helpless to solve it by these kinds of means.
> 
> How is there no amplification?  My point is that all the B2BUA would have
> to do is just that, back-to-back the call and the proxy that the loop is
> made through can never detect it.  Does that make the loop detection
> pointless?  No, but it does mean that it obviously does not solve the
> whole problem.

My point is that to prevent the loop detection from working, even if the 
forking is done elsewhere, the B2BUA must be present in *every* 
iteration of the loop. Thus the resources required by the B2BUA scale 
linearly with the size of the problem it is attempting to create.

>> If the B2BUA is a bystander, then IMO it has an obligation to do loop 
>> detection. How it would do that is a question. But because we don't 
>> currently do specs for B2BUAs we aren't likely to specify how.
> 
> That's unfortunate as I don't use "proxies" that aren't B2BUAs.  I find it
> much easier to write a B2BUA than a "proxy" since I have to know about all
> the state of the transactions anyway.  I see no benefit to a proxy over a
> B2BUA.

It would be interesting to understand why you find yourself in this 
position. I think people here would like to arrange things so that kind 
of tactic isn't necessary.

> Here's the problem.  You want to protect against amplification.  Spiraling
> calls are okay (presumably because they are taking a different "route" on
> each loop.  We can't remove forking because that is too useful.
> 
> I really think the only reasonable protection the proxy can do is make
> sure that the proxy is not sending a transaction to itself.  You should
> never have a spiral that has a message going from A to A without going
> through B.  A should know that it _is_ A and that sending to A is
> pointless as it could otherwise determine what to do with the message
> (either detect it as a loop, or apply different processing rules).

Its trivial to recognize sending to yourself. But it also isn't always 
wrong. Nor is it sufficient to prevent loops. The loop that goes from A 
to B to A ... is just a bad as the one that goes from A to A.

So I don't see why what you suggest is either necessary or sufficient.

> On the binding side of things, you have to protect against malicious
> bindings.  There has to be some qualification that a binding is against an
> endpoint that _can_not_ produce a loop.  For example, if you only allowed
> bindings to be registered against a network element that was not allowed
> to send messages back "in" but only "out".  In other words, make it
> impossible on the layer 3 side of things for the messages to loop.  If you
> want to protect your network, you have to control your network.  You can't
> trust that the messages will be well formed, and you can't trust that a
> binding won't try to create a loop.

Except in very tightly controlled closed networks you will never be able 
to achieve this. And, I can never know that I am not routing to somebody 
that fails to do this.

	Paul

> David
> 
>> 	Paul
>>
>> David Benoit wrote:
>>> I think you may have missed my point.  The B2BUA would be in every segment
>>> of the loop, inserted.  The tree would still grow to n^Max_Forwards (where
>>> n is the number of forks... which I have had cause to have as many as 8).
>>> My point is that loop detection doesn't work here.  At no stage of the
>>> "looping" (which, would be better called an infinite "spiral") can you
>>> detect that it is the same message.
>>>
>>> As I said earlier, it can _only_ _always_ work if you end up sending it to
>>> yourself, which you should be able to detect _before_ you send it.
>>>
>>> There has to be better protection against such escalation.  But what?
>>>
>>> David
>>>
>>> On Mon, Sep 11, 2006 at 02:35:50PM -0400, Paul Kyzivat wrote:
>>>> David,
>>>>
>>>> Certainly it is possilbe to implement a scenario such as you show below.
>>>>
>>>> Without loop detection and with Max-forwards of 70, such a thing will 
>>>> generate about 2^70 messages before max-forwards stops it. The 
>>>> difference compared to a non-b2bua case it that you will need 2^70-1 
>>>> b2bua call states to achieve this. It will presumably run out of 
>>>> capacity long before then.
>>>>
>>>> This is of course a problem for B2BUAs. If we had any rules for them 
>>>> than we should probably require that they also implement loop detection.
>>>>
>>>> 	Paul
>>>>
>>>> David Benoit wrote:
>>>>> I'm sorry, but I'm still not convinced that any of this is going to help.
>>>>> What, in any of this, prevents the following:
>>>>>
>>>>>             A
>>>>>             |
>>>>>             P
>>>>>            / \
>>>>>           BB BB
>>>>>           |   |
>>>>>           P   P
>>>>>
>>>>> Where A is a UA, P is a stateless proxy, and BB is a B2BUA.  The request
>>>>> is going to fork from the proxy, arrive at the B2BUA, a _new_ (related
>>>>> only internally to the B2BUA) call is then made to P and the tree grows
>>>>> just as before.  It is not possible to detect the loop because the 
>>>>> message
>>>>> is not the same; it is a new transaction.  This new draft mentions 
>>>>> nothing
>>>>> about this, yet it is exactly the same problem.
>>>>>
>>>>> Also, schemes such as these will only really protect against "friendly
>>>>> fire" ... meaning it only really protects you against mis-configuration.
>>>>> Anyone seriously out to destroy your proxy is going to at least not
>>>>> forward on the headers such that they are detected as a loop.  You can't
>>>>> assume that the malicious are ignorant.
>>>>>
>>>>> The amplification problem can NOT be removed unless "you" are sending the
>>>>> transaction to yourself.  That is the only way you can know that the
>>>>> headers haven't been modified.
>>>>>
>>>>> David
>>>>>
>>>>>
>>>>> On Mon, Sep 11, 2006 at 06:10:39PM +0100, Pete Cordell wrote:
>>>>>> I've reflected a bit more on this...
>>>>>>
>>>>>> A question... is it possible to arrange that two (non-forking) proxies 
>>>>>> end up bouncing a single request between them?  I would think it is.  
>>>>>> In this case, even though you don't get the combinatorial explosion 
>>>>>> that you do for the forking case, I think a 1 to 70 amplification of 
>>>>>> messages is still quite significant and worth protecting against.
>>>>>>
>>>>>> So I think the various weighting should be, forking proxies MUST do 
>>>>>> loop detection.  Other proxies SHOULD do loop detection (as opposed to 
>>>>>> MAY). It's important that the draft explains a method to do loop 
>>>>>> detection in the most general case (i.e. allowing for stateless proxies 
>>>>>> etc.), but technically I don't think it even has to be RECOMMENDED 
>>>>>> strength.
>>>>>>
>>>>>> It would be good if in some way the loop detection algorithm could be 
>>>>>> normatively referenced so that it would be possible to say that such 
>>>>>> and such an implementation fully implements and conforms to the loop 
>>>>>> detection algorithm described in RFC XXXX, by just saying "implements 
>>>>>> RFC XXXX".  That might require two RFCs though; one to 
>>>>>> mandate/recommend loop detection, and another to described the 
>>>>>> suggested loop detection algorithm. That may be too much work for the 
>>>>>> small gain though!
>>>>>>
>>>>>> Pete.
>>>>>> --
>>>>>> =============================================
>>>>>> Pete Cordell
>>>>>> Tech-Know-Ware Ltd
>>>>>>                       for XML to C++ data binding visit
>>>>>>                       http://www.tech-know-ware.com/lmx
>>>>>>                       (or http://www.xml2cpp.com)
>>>>>> =============================================
>>>>>>
>>>>>> ----- Original Message ----- 
>>>>>> From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
>>>>>> To: "Theo Zourzouvillys" <theo@crazygreek.co.uk>; "Juha Heinanen" 
>>>>>> <jh@tutpro.com>
>>>>>> Cc: <sip@ietf.org>
>>>>>> Sent: Monday, September 11, 2006 8:01 AM
>>>>>> Subject: Re: [Sip] loop fix
>>>>>>
>>>>>>
>>>>>>> Juha,
>>>>>>>
>>>>>>> Loop detection currently works the way it does to accomodate stateless 
>>>>>>> proxies. It is the least common denominator; it will also work for 
>>>>>>> stateful proxies, so there is no need to define separate mechanisms to 
>>>>>>> achieve the same goal. That is a benefit
>>>>>>>
>>>>>>> It is true that you can also detect loops by searching through 
>>>>>>> existing state, with the aforementioned drawbacks that it won't work 
>>>>>>> as well across reboots (I consider the performance of the lookup an 
>>>>>>> implementation issue, it can be made efficient).
>>>>>>>
>>>>>>> For the forking scenario, the proxy must by definition be stateful. So 
>>>>>>> one could use a lookup through existing state as a way to do loop 
>>>>>>> detection. There is nothing in the draft that prevents this - hashing 
>>>>>>> is RECOMMENDED, but nothing says you can't do it your way. In fact, 
>>>>>>> loop detection is a completely local feature - a proxy only has to 
>>>>>>> recognise its own detection mechanism. So as long as it keeps to 
>>>>>>> standard RFC3261 syntax, there is not actually a need to standardize 
>>>>>>> any particular mechanism - just stating that it MUST do loop detection 
>>>>>>> is sufficient.
>>>>>>>
>>>>>>> What I personally don't like about the recommended mechanism, is the 
>>>>>>> overloading of Via branches for both transaction id and loop 
>>>>>>> detection. IMHO a much better solution is to separate the two; I 
>>>>>>> personally use
>>>>>>>
>>>>>>> Via: SIP/2.0/UDP host:port;branch=z9h....;ld={loop hash}
>>>>>>>
>>>>>>> And it would be nice if there were some way to detect if some proxy is 
>>>>>>> doing loop detection or not. A separate parameter achieves this
>>>>>>>
>>>>>>> Regards,
>>>>>>>
>>>>>>> Jeroen
>>>>>>>
>>>>>>> ----- Original Message ----- 
>>>>>>> From: "Theo Zourzouvillys" <theo@crazygreek.co.uk>
>>>>>>> To: "Juha Heinanen" <jh@tutpro.com>
>>>>>>> Cc: <sip@ietf.org>
>>>>>>> Sent: Monday, September 11, 2006 6:36 AM
>>>>>>> Subject: Re: [Sip] loop fix
>>>>>>>
>>>>>>>
>>>>>>> On Sunday 10 September 2006 16:13, Juha Heinanen <jh@tutpro.com> wrote:
>>>>>>>
>>>>>>>>> (1) speed - if you have a large number of active transactions, then 
>>>>>>>>> it's
>>>>>>>>> almost certainly a lot faster to construct and compare a hash in X
>>>>>>>>> number of via headers than search all the transactions received on
>>>>>>>>> that particular transport.
>>>>>>>> in some implementations this is true. if it is not true in all
>>>>>>>> implementations, then the i-d should not give one SHOULD 
>>>>>>>> implementation
>>>>>>>> solution.
>>>>>>> As it is SHOULD (aka 'RECOMMENDED'), you have the flexibility of doing 
>>>>>>> it in
>>>>>>> other ways if your particular situation requires it - but as most 
>>>>>>> 'common'
>>>>>>> implementations will worry about the things listed here, then SHOULD 
>>>>>>> is the
>>>>>>> right force for it in my opinion, as there are (as per rfc2119) "valid
>>>>>>> reasons in particular circumstances to ignore a particular item, but 
>>>>>>> the full
>>>>>>> implications must be understood and carefully weighed before choosing a
>>>>>>> different course."
>>>>>>>
>>>>>>>>> (2) resilience - a crashed proxy would still be able to perform loop
>>>>>>>>> detection, even after loosing all of it's state - assuming it keeps
>>>>>>>>> transactions in memory and not committed elsewhere before forwarding;
>>>>>>>> this i don't quite understand. even if proxy looses all state, doesn't
>>>>>>>> it rebuild that state next time it receives the looped request again 
>>>>>>>> and
>>>>>>>> will detect the loop during the following round?
>>>>>>> Only after it looped again after crashing, and that assumes it's not 
>>>>>>> already
>>>>>>> crashed again since.  Given that the attack vector that the I-D is 
>>>>>>> trying to
>>>>>>> fix, i think it is sensible for it to catch a loop between crashes of 
>>>>>>> an
>>>>>>> element, too.
>>>>>>>
>>>>>>> fork-loop-fix-03, 3.  Vulnerability: Leveraging Forking to Flood a 
>>>>>>> Network:
>>>>>>>
>>>>>>> [...]
>>>>>>> It is interesting to note that a few proxies rebooted during
>>>>>>> the scenario, and rejoined in the attack when they restarted (as long
>>>>>>> as they maintained registration state across reboots).  This points
>>>>>>> out that if this attack were launched on the Internet at large, it
>>>>>>> might require coordination among all the affected elements to stop
>>>>>>> it.
>>>>>>>
>>>>>>>>> (3) scalability - loop may go through different proxies when load
>>>>>>>>> balancing. KEeping the hash in the via header allows peer proxies to
>>>>>>>>> detect and stop looped requests quicker than it would otherwise.
>>>>>>>> this is not a valid reason, since if there are multiple proxies, they
>>>>>>>> may be from different vendors and since there is no standardized way 
>>>>>>>> to
>>>>>>>> calculate and add the hash into via header, one proxy cannot interpret
>>>>>>>> the via header added by another proxy.
>>>>>>> indeed, with multiple vendors.  but none the less, it's a reason a 
>>>>>>> proxy may
>>>>>>> want to use Via hashes rather than internally (which is what you 
>>>>>>> asked).
>>>>>>>
>>>>>>> ~ Theo
>>>>>>>
>>>>>>> -- 
>>>>>>> Theo P. Zourzouvillys
>>>>>>> http://www.crazygreek.co.uk
>>>>>>> theo@crazygreek.co.uk
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>>>> This list is for NEW development of the core SIP Protocol
>>>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>>>> Use sipping@ietf.org for new developments on the application of sip
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>>>> This list is for NEW development of the core SIP Protocol
>>>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>>>> Use sipping@ietf.org for new developments on the application of sip
>>>>>>>
>>>>>> _______________________________________________
>>>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>>> This list is for NEW development of the core SIP Protocol
>>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>>> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 15:27:43 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNaL3-0004Jr-5G; Wed, 13 Sep 2006 15:24:01 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNaL1-0004Jl-S2
	for sip@ietf.org; Wed, 13 Sep 2006 15:23:59 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNaL0-0001h4-GG
	for sip@ietf.org; Wed, 13 Sep 2006 15:23:59 -0400
Received: from zrc2hxm2.corp.nortel.com (zrc2hxm2.corp.nortel.com
	[47.103.123.73])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8DJNks08836
	for <sip@ietf.org>; Wed, 13 Sep 2006 15:23:47 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE:  [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Date: Wed, 13 Sep 2006 14:23:15 -0500
Message-ID: <62B9B0847CC47543B6B3B5E26BD268E60E665AF4@zrc2hxm2.corp.nortel.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RE:  [Sip] doubts about draft-audet-sip-sips-guidelines-03.txt
Thread-index: AcbQ1aySn+OvZYC+Q6WUHRnbfKwJNwAQn9dwAAAWz/ABkZKSEAACWiEA
From: "Samir Srivastava" <samirsr@nortel.com>
To: "Francois Audet" <audet@nortel.com>, <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 944ecb6e61f753561f559a497458fb4f
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi,

Can we avoid double encryption between two SIP addressable entities?

If IPSEC tunnel is between two *SIP un-addressable* entities, then SIP
application layer does not bother.=20

This is penalty of tight coupling of TLS with SIPS. It is secure routing
requirement, and should be done with Proxy-Require with clear definition
of secure protocol etc. After 3261 (SIPS), we found new URI property
(GRUU) and now we are defining GRUU with SIPS. When we discover new URI
properties in future then we will keep defining its behavior for SIPS
(more texts/cycles/complications etc) .

Thx
Samir


<< Removed unrelated stuff >>
 =20
> >
> >
> > 	1. Does SIPS always require TLS? In IMS case, if I-CSCF
> > of different operators already have an IPSec link, is it
> > mandatory to establish another TLS link above IPSec?
>=20
> This is what is described in Section 3 of the draft, but I probably
> need to discuss the last-hop exception rule in more details,
especially
> how it relates to Record-Route.
>=20
> The answer is that SIPS always require TLS for all hops until you
reach
> the
> last hop. It has been proposed by many that the "last-hop exception
> rule"
> be deprecated.
>=20
> To answer your question in terms of when you send a request outside of
> an existing dialog, you are correct that (except for the last hop),
> you DO have to use TLS for reaching SIPS resources. If you are using
> IPsec
> as per your example, this will indeed mean TLS over an IPsec link.
That
> is
> correct.
>=20
> The last hop exception has some interesting side effects however when
> used
> inside a dialog.
>=20
> If the last hop doesn't use TLS, the last Record-Route entry would be
a
> SIP URI instead of SIPS URI.
>=20
> Therefore, within that dialog, the last hop would be allowed to send
> requests where the request-URI itself is sips but where the
Record-route
> is SIP, and therefore that request would not be sent over TLS. In
other
> words,
> a terminal would be able to accept over TCP/UDP a request to SIPS
> addressed to
> itself, and send mid-dialog requests to a remote target using a SIPS
> Request-URI
> but using UDP or TCP as per the Record-Route entry.
>=20
> What does it mean for architectures that prefer to use IPsec instead
of
> TLS?
>=20
> It means the following:
>=20
> - You probably do not want to use SIPS URIs for those devices in the
> IPsec
>   network (phones, etc.).
>=20
> - If Record-Route is used, those devices will be able to reuse the
same
> TCP or
>   UDP connection for sending mid-dialog requests even if the
Request-URI
> is SIPS.
>=20
> - However, if the device is sendind requests outside of a dialog (like
> an INVITE for
>   example), to a SIPS URI, it HAS to use TLS (and therefore TLS over
> IPsec in your
>   example).
>=20
> - Therefore, if you do NOT want to do TLS over IPsec in this case, it
> means that
>   you can not reach SIPS resources. You will be able to receive
requests
> from
>   entities using SIPS as contacts (with Record-route), but you will
not
> be able
>   to make requests to SIPS. If a resource supports both SIP and SIPS,
it
> would
>   still be reachable using SIP since they are routed the same way.
>=20
>=20
> I will include much more text on this in the next revision.
>=20
> =20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 16:32:01 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNbLL-0005et-0K; Wed, 13 Sep 2006 16:28:23 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNbLJ-0005YB-NS
	for sip@ietf.org; Wed, 13 Sep 2006 16:28:21 -0400
Received: from sj-iport-2-in.cisco.com ([171.71.176.71]
	helo=sj-iport-2.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GNbLI-0001yQ-AG for sip@ietf.org; Wed, 13 Sep 2006 16:28:21 -0400
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-2.cisco.com with ESMTP; 13 Sep 2006 13:28:20 -0700
X-IronPort-AV: i="4.09,160,1157353200"; 
	d="scan'208"; a="341285038:sNHT36210420"
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8DKSJ3q018926; Wed, 13 Sep 2006 13:28:19 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com
	[128.107.191.100])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8DKSDZR012932;
	Wed, 13 Sep 2006 13:28:19 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.211);
	Wed, 13 Sep 2006 13:28:16 -0700
Received: from [10.32.241.148] ([10.32.241.148]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 13:28:15 -0700
Message-ID: <450869DE.8070300@cisco.com>
Date: Wed, 13 Sep 2006 16:28:14 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Raphael Tryster <raphael.tryster@vocaltec.com>
Subject: Re: [Sip] WGLC: draft-ietf-sip-acr-code
References: <431F3BDE11BF2F42A22CBEFA36BD88A461D1FE@mailserver.vocaltec.local>
In-Reply-To: <431F3BDE11BF2F42A22CBEFA36BD88A461D1FE@mailserver.vocaltec.local>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Sep 2006 20:28:16.0032 (UTC)
	FILETIME=[24819200:01C6D773]
DKIM-Signature: a=rsa-sha1; q=dns; l=3069; t=1158179299; x=1159043299;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20WGLC=3A=20draft-ietf-sip-acr-code;
	X=v=3Dcisco.com=3B=20h=3DnxIjVrrqRrBbgPNnfPbRyBjbeJo=3D;
	b=e8/gWM15oYDcCSRRm2ExsgE1p9Z2B0XdEhLvjFbPfpXpSx7ZgWQcHFyM3N3f8FC5wCk6TK8h
	GwwepfBfnw1SSJ1SD6BiIHETpgadju18GAkZ3f1UZKNjmVlZa3Mj41SI;
Authentication-Results: sj-dkim-2.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b280b4db656c3ca28dd62e5e0b03daa8
Cc: IETF SIP List <sip@ietf.org>, "Drage, Keith \(Keith\)" <drage@lucent.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Thanks, I've fixed these.

-Jonathan R.

Raphael Tryster wrote:

> I believe the singular of "automata" is "automaton".  Two instances -
> second paragraph of section 1 and second bullet of section 3.
> 
> In section 4, "A UAC the does not understand" should be "A UAC that
> does not understand".
> 
> In the first sentence of section 7, "an request" should be "a
> request".  In the same sentence, "the called party" is singular,
> while "they" is plural.
> 
> Raphael Tryster
> 
> -----Original Message----- From: Drage, Keith (Keith)
> [mailto:drage@lucent.com] Sent: Monday, September 04, 2006 9:16 PM 
> To: IETF SIP List Subject: [Sip] WGLC: draft-ietf-sip-acr-code
> 
> 
> (as WG chair)
> 
> This is to announce a Working Group Last Call on:
> 
> http://www.ietf.org/internet-drafts/draft-ietf-sip-acr-code-02.txt
> 
> Rejecting Anonymous Requests in the Session Initiation Protocol (SIP)
> 
> 
> Please review and provide comments (along with any suggestions for 
> resolution) on this document by:
> 
> Monday 18th September 2006. ---------------------------
> 
> In addition, if you have reviewed and have no comments on this
> version of the document, that is useful information, so please
> indicate this direct to the WG chairs.
> 
> As this is one of the simplest documents the SIP WG has dealt with in
> a long while, we encourage you to take the few minutes needed to read
> this one, and get comments to us by the deadline.
> 
> Regards
> 
> Keith
> 
> 
> Keith Drage Lucent Technologies drage@lucent.com tel: +44 1793 776249
> 
> 
> _______________________________________________ Sip mailing list
> https://www1.ietf.org/mailman/listinfo/sip This list is for NEW
> development of the core SIP Protocol Use
> sip-implementors@cs.columbia.edu for questions on current sip Use
> sipping@ietf.org for new developments on the application of sip 
> **********************************************************************************************
>  This e-mail contains confidential, privileged or proprietary
> information to VocalTec Communications. If you received this messege
> by mistake, please inform us and then delete the original and all
> copies. *** eSafe scanned this email for viruses, vandals, and
> malicious content. *** 
> **********************************************************************************************
> 
> 
> 
> _______________________________________________ Sip mailing list
> https://www1.ietf.org/mailman/listinfo/sip This list is for NEW
> development of the core SIP Protocol Use
> sip-implementors@cs.columbia.edu for questions on current sip Use
> sipping@ietf.org for new developments on the application of sip
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 16:37:47 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNbSb-0008Rp-Ku; Wed, 13 Sep 2006 16:35:53 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNbSa-0008RX-BR
	for sip@ietf.org; Wed, 13 Sep 2006 16:35:52 -0400
Received: from sj-iport-3-in.cisco.com ([171.71.176.72]
	helo=sj-iport-3.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GNbSX-0002x4-Qy for sip@ietf.org; Wed, 13 Sep 2006 16:35:52 -0400
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-3.cisco.com with ESMTP; 13 Sep 2006 13:35:49 -0700
X-IronPort-AV: i="4.09,160,1157353200"; 
	d="scan'208"; a="443219505:sNHT34942496"
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8DKZn1C011654; Wed, 13 Sep 2006 13:35:49 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8DKZmYp019035;
	Wed, 13 Sep 2006 13:35:48 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 13:35:48 -0700
Received: from [10.32.241.148] ([10.32.241.148]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 13:35:47 -0700
Message-ID: <45086BA2.3050205@cisco.com>
Date: Wed, 13 Sep 2006 16:35:46 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
References: <85108216918A984C8C60172D7C84770A56F67A@S4DE8PSAAGO.mitte.t-com.de>
	<27100C2E-0F7C-48AB-A835-637AFA0BD56F@softarmor.com>
In-Reply-To: <27100C2E-0F7C-48AB-A835-637AFA0BD56F@softarmor.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Sep 2006 20:35:47.0929 (UTC)
	FILETIME=[31DB9490:01C6D774]
DKIM-Signature: a=rsa-sha1; q=dns; l=3877; t=1158179749; x=1159043749;
	c=relaxed/simple; s=sjdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20SIP=20WGLC=20=20Draft=20draft-ietf-sip-acr-code-02.txt;
	X=v=3Dcisco.com=3B=20h=3DUnPnx38myGIzEvdYwxcdt8uUb1c=3D;
	b=ZCM0jxToq/UXCyh/yfcvCY6Pph8OFg7WxYihqRsmTwqa0/agil3fUC3aXvwWPdRkgRp9hSiL
	PoqXhRb+F1+jZn7eohQw7o3aSnJVmv3ge9AKn5PQXVn7iYqD7E6h5GKe;
Authentication-Results: sj-dkim-1.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 32b73d73e8047ed17386f9799119ce43
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org, drage@lucent.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I agree with Dean. And to add to that, I'll also note that I view 
'header' privacy as much different than 'id' privacy. Header privacy is 
likely to be executed almost immediately, at the point of origin. Thus 
by the time the request reaches the terminating side there is no 
'header' value left since the privacy service stripped it. The 'id' tag 
in the Privacy header is explicitly different; its stripped at the last 
hop, not at the first.

Furthermore, any user that wants a level of anonymity associated with 
'header' is also likely to use 'id' at the same time, and thus the 
service would be triggered from that. Any case in which 'header' is used 
but 'id' is not seems weird to me.

-Jonathan R.

Dean Willis wrote:

> 
> On Sep 13, 2006, at 5:36 AM, Jesske, R wrote:
> 
>>> dy.
>>>
>>> In this Draft is described that:
>>> The request contained a Privacy header field whose value was 'id'
>>>       [3] or 'user'.  This explicitly excludes the 'header' and
>>>       'session' privacy services, since those do not directly
>>> convey the
>>>       identity of the requestor.
>>>
>>> Why the value 'header ' is exluded?
>>>
>>> In RFC3323 is described that header:
>>>       header: The user requests that a privacy service obscure those
>>>       headers which cannot be completely expunged of identifying
>>>       information without the assistance of intermediaries
>>> (such as Via
>>>       and Contact).  Also, no unnecessary headers should be
>>> added by the
>>>       service that might reveal personal information about the
>>>       originator of the request.
>>>
>>> So from my understanding 'id' is a subset of 'header' because
>>> the P-Asserted-Identity can only be deleted by untermediarities.
> 
> 
> ID privacy is only a subset of header privacy if the identity  mechanism 
> is entirely header-based. It isn't always that way. IMS is  not the 
> entire SIP world. RFC 3323 "header" privacy doesn't preclude  
> non-header-field-based identity expressions, so ACR can't  automatically 
> reject requests with "header" privacy.
> 
> Nor can ACR automatically accept a request that does NOT have  "header" 
> privacy.
> 
> In the specific case of ACR, we're trying to reject an INVITE that  does 
> not contain an explicit and intentional disclosure of the  requestor's 
> identity. While the requestor's identity might "leak"  from headers, 
> only specific identity headers (or other identity  mechanisms, such as 
> AIB) carry the sort of strong identity assertion  needed for anonymous 
> call rejection to work as expected.
> 
> Here's an example: Let's say the the Contact: header field value in  my 
> INVITE is really a reversible GRUU. That is, the GRUU contains my  AOR. 
> I use no other identity mechanisms.
> 
> I call you. You have ACR turned on. Is the fact that my identity is  
> encoded in the Contact: header field of my INVITE good enough to keep  
> you from rejecting my call?
> 
> I'd argue that it is not. Since we don't have a widely accepted way  for 
> assuring that the identity expressed in a Contact header field is  
> valid, we really can't use this information for ACR.
> 
> 
> -- 
> Dean
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 16:45:22 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNbZs-0004Lu-Ny; Wed, 13 Sep 2006 16:43:24 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNbZr-0004GO-E1
	for sip@ietf.org; Wed, 13 Sep 2006 16:43:23 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNbZp-0003zy-Gb
	for sip@ietf.org; Wed, 13 Sep 2006 16:43:23 -0400
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 13 Sep 2006 13:43:21 -0700
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8DKhK5s004575; Wed, 13 Sep 2006 13:43:20 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com
	[128.107.191.100])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8DKhKYp024795;
	Wed, 13 Sep 2006 13:43:20 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.211);
	Wed, 13 Sep 2006 13:43:20 -0700
Received: from [10.32.241.148] ([10.32.241.148]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 13:43:19 -0700
Message-ID: <45086D66.50308@cisco.com>
Date: Wed, 13 Sep 2006 16:43:18 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: "Jesske, R" <R.Jesske@t-com.net>
Subject: Re: AW: [Sip] updated acr code draft
References: <85108216918A984C8C60172D7C84770A56F5F6@S4DE8PSAAGO.mitte.t-com.de>
In-Reply-To: <85108216918A984C8C60172D7C84770A56F5F6@S4DE8PSAAGO.mitte.t-com.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 13 Sep 2006 20:43:19.0997 (UTC)
	FILETIME=[3F4FAED0:01C6D775]
DKIM-Signature: a=rsa-sha1; q=dns; l=16326; t=1158180200; x=1159044200;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20AW=3A=20[Sip]=20updated=20acr=20code=20draft;
	X=v=3Dcisco.com=3B=20h=3DfS+pMXeQ+FsPNa6kqFG5dBn5DC4=3D;
	b=kocSFRyLg3UkMwhkD1wiNt7YeLl9/vszWZJX1v7Sm8nz/nr+PTvcZqOAH5q//vauoWuJKg9z
	vnT3plyq7hNSD/vHSwJ5cN9KboBzbzk5I0FAWVBd8Fh4sWc/DotpEKrp;
Authentication-Results: sj-dkim-2.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 4bbdb236f788407ff689fcae8109fe34
Cc: sip@ietf.org, sanjsinh@cisco.com, pkyzivat@cisco.com, maltarai@cisco.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

This is an old thread but I wanted to comment since we are now in WGLC.

I dont think this specification should address this issue. THis is well 
into service definition. The meaning of the 433 is clear. Whether a UAS 
sends one on a mid-dialog request is a matter of policy. Whether the UAC 
sends a BYE afterwards is a metter of policy. Whether the UAS sends a 
BYE on receipt of the anonymous update is a matter of policy.

Consequently I think the spec needs to say nothing about any of this. I 
view this all as fodder for call flows for MIG.

-Jonathan R.

Jesske, R wrote:

> ACR seen from service perspective on a strict line should forbid any anonymous behaviour also the below described Xfer scenario. How I release the call should be done due to SIP rules either with 433 or a CANCEL or BYE including a Reason header with SIP 433.
> 
> But there could be also some further scenarios that can be deployed as mentioned below. I think this are valid scenarios and the user should decide if he wants to restrict all anonymous calls or if he wants to allow to pass such Xfer calls.
> 
> BR
> 
> Roland Jesske  
> 
> 
>>-----Ursprngliche Nachricht-----
>>Von: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
>>Gesendet: Donnerstag, 10. August 2006 16:04
>>An: Rajeev Narang (ranarang)
>>Cc: sip@ietf.org; Jesske, Roland; Sanjay Sinha (sanjsinh); 
>>Mohammad Al-Taraireh (maltarai)
>>Betreff: Re: [Sip] updated acr code draft
>>
>>
>>I think the behaviors you describe are all valid ones that the 
>>respective UAs may choose to do. And there are other 
>>behaviors that are 
>>equally valid that might be chosen. I don't think sip/sipping 
>>can/should 
>>define these, except as example call flows or maybe best 
>>practices. This 
>>is starting to get pretty deep into feature specification.
>>
>>I think any of the participants in the scenario you describe 
>>should be 
>>prepared to deal with a variety of responses. As best I can 
>>tell, each 
>>one can be dealt with on its own without necessarily 
>>understanding the 
>>bigger picture of what is going on. That is a good thing, since in 
>>general none of the players will know the big picture.
>>
>>More inline.
>>
>>	Paul
>>
>>Rajeev Narang (ranarang) wrote:
>>
>>>Hi,
>>>
>>>I think Mohammad still hasn't got the clarification.
>>>
>>>The scenario is:-
>>>
>>>UA1----dialog1-------b2bua------dialog4----UA2
>>>               dialog2|dialog3
>>>                      |
>>>                     UA3
>>>
>>>Say UA1 uses anonymous for its Name/Number.
>>>Say UA2 would reject the anonymous calls.
>>>UA3 is "not" using anonymous for its Name/Number and will 
>>
>>"not" reject anonymous calls.
>>
>>> 
>>>1) UA1 calls UA3 (dialog1 and dialog2 are established)
>>>2) UA3 puts UA1 on hold and does early attended Xfer to UA2 
>>
>>(dialog3 and dialog4 are in early connected state, UA2 is 
>>still ringing).
>>
>>>The dialog3/dialog4 INVITE dialogs will use the Name/Number 
>>
>>of UA3 in the From header. So UA2 will allow it as dialog4 
>>
>>>is not carrying anonymous Name/Id.
>>>3) UA3 presses the Xfer button again to complete the early 
>>
>>attended Xfer.
>>
>>>Now the identity info of UA1 will be communicated on 
>>
>>dialog4 to UA2 in the UPDATE message say using RPID header. 
>>The INVITE dialog4 will not change the Display Name and Id in 
>>the From header as per the UA1's identity, so it will remain 
>>same as original, which is UA3's identity used during 
>>dialog3/dialog4 establishent.
>>
>>>The question is the handling of UA1's anonymity by UA2 in 
>>
>>the UPDATE message and affect to the INVITE dialog4.
>>
>>>1. Should UPDATE be responded with 433.
>>
>>That is a choice to be made. It would be equally valid to 
>>conclude that 
>>one knew the original caller, (and so has someone to *blame*), and 
>>decide to trust the wisdom of the person doing the transfer.
>>
>>For instance, suppose U3 is secretary and U4 is boss. The 
>>boss may never 
>>take anonymous calls, but the secretary does. The secretary 
>>acts as the 
>>screener for anonymous calls to the boss.
>>
>>
>>>How to handle the INVITE dialog4 as 200 OK is still not 
>>
>>sent on dialog4.
>>
>>>Based on 433 for UPDATE, b2bua can send CANCEL (With Reason 
>>
>>Header carrying Q.850 cause=21 Rejected)to UA2 and UA2 can 
>>send 487 on dialog4. 
>>
>>>2. Or UPDATE is responded with 433 and later 433 is sent on 
>>
>>INVITE dialog4 resulting in clearing the dialog4 on UA2 and b2bua.
>>
>>While UA2 *could* do this, it doesn't make a lot of sense to me. Once 
>>the UPDATE is rejected, the dialog continues as it was 
>>before. There is 
>>no question of the identity of the caller (UA3) and so no 
>>reason to fail 
>>the call with a 433. User 3 and user 4 can continue to talk - 
>>with user 
>>4 complaining to user 3 about trying to transfer an anonymous caller.
>>
>>
>>>Probably 433 followed by 180 on INVITE dialog will not look 
>>
>>appropriate.
>>
>>I don't follow. Which dialog? You can't send a 180 to an invite after 
>>having sent a 433 to the same invite. I don't see anything 
>>odd in other 
>>combinations.
>>
>>
>>>The dialog1 is already an established dialog so BYE will be sent.
>>
>>Presumably this will happen if/when the b2bua has nothing else to 
>>connect it to. As long as UA3 is in the call I wouldn't expect that.
>>
>>
>>>The other scenario:-
>>>If it has been attended Xfer then dialog4 would have been 
>>
>>already established. So in the same anonymous config the
>>
>>>UPDATE could be responded with 433
>>
>>Certainly.
>>
>>
>>>and BYE with Reason header carrying SIP Status=433 could be 
>>
>>sent from UA2 to b2bua on dialog4.
>>
>>As I commented above, I don't see why you would want to do this. From 
>>UA2's perspective it still has a call with a known caller. If 
>>the b2bua 
>>can't maintain that (say because UA3 has sent a BYE) then the b2bua 
>>might need to send a BYE - to all the remaining parties.
>>
>>
>>>Could we get clarification on this so that standard 
>>
>>approach can be used.
>>
>>As I said above, I don't think there is, or need be, a broad standard 
>>for this.
>>
>>	Paul
>>
>>
>>>Regards,
>>>Rajeev
>>>
>>>
>>>-----Original Message-----
>>>From: Jesske, R [mailto:R.Jesske@t-com.net] 
>>>Sent: Monday, August 07, 2006 10:26 AM
>>>To: Mohammad Al-Taraireh (maltarai); Sanjay Sinha 
>>
>>(sanjsinh); Jonathan Rosenberg (jdrosen); sip@ietf.org
>>
>>>Subject: AW: [Sip] updated acr code draft
>>>
>>>The UAC either should include the identity in the From 
>>
>>header instead of anonymous or don't call again if the user 
>>still wants to be anonymous.
>>
>>>The UAS should close the transactions.
>>>
>>>Best Regards
>>>
>>>Roland
>>>
>>>
>>>>-----Ursprngliche Nachricht-----
>>>>Von: Mohammad Al-Taraireh (maltarai) [mailto:maltarai@cisco.com]
>>>>Gesendet: Freitag, 4. August 2006 16:13
>>>>An: Jesske, Roland; Sanjay Sinha (sanjsinh); Jonathan Rosenberg 
>>>>(jdrosen); sip@ietf.org
>>>>Betreff: RE: [Sip] updated acr code draft
>>>>
>>>>
>>>>
>>>>The identity in the From header in not the correct party after the 
>>>>xfer is complete! I still don't see an answer to what 
>>
>>should the UAC 
>>
>>>>do when it gets the 433 response, or what the UAS should 
>>
>>do after it 
>>
>>>>send the 433, basically how does that response impact the INVITE 
>>>>dialog.
>>>>
>>>>Thanks,
>>>>
>>>>Mo
>>>>
>>>>-----Original Message-----
>>>>From: Jesske, R [mailto:R.Jesske@t-com.net]
>>>>Sent: Friday, August 04, 2006 4:14 AM
>>>>To: Mohammad Al-Taraireh (maltarai); Sanjay Sinha 
>>
>>(sanjsinh); Jonathan 
>>
>>>>Rosenberg (jdrosen); sip@ietf.org
>>>>Subject: AW: [Sip] updated acr code draft
>>>>
>>>>There is a difference between an unavailable identity and 
>>
>>a anonymous 
>>
>>>>identity so that the endpoint can decide.
>>>>As a wrote before the From header is a mandatory header. 
>>
>>So there must 
>>
>>>>an identity in.
>>>>
>>>>In which scenario this early attended transfer could 
>>
>>appear is this 
>>
>>>>also a interworking case or a pure SIP case?
>>>>
>>>>What is with the identity I'm registering with?
>>>>
>>>>
>>>>BR
>>>>
>>>>Roland
>>>>
>>>>
>>>>>-----Ursprngliche Nachricht-----
>>>>>Von: Mohammad Al-Taraireh (maltarai) [mailto:maltarai@cisco.com]
>>>>>Gesendet: Donnerstag, 3. August 2006 16:22
>>>>>An: Sanjay Sinha (sanjsinh); Jesske, Roland; Jonathan Rosenberg 
>>>>>(jdrosen); sip@ietf.org
>>>>>Cc: Mohammad Al-Taraireh (maltarai)
>>>>>Betreff: RE: [Sip] updated acr code draft
>>>>>
>>>>>
>>>>>
>>>>>Another case is a early attended transfer. For example 
>>
>>the transfer 
>>
>>>>>target will get an INVITE without caller id blocking and then an 
>>>>>UPDATE after the xfer with caller id blocking to change the
>>>>
>>>>display. 
>>>>
>>>>>If there is a policy on the endpoint to reject anonymous
>>>>
>>>>calls, what
>>>>
>>>>>should the do in this case? which the question below 
>>
>>"what does 433 
>>
>>>>>mean for mid call UPDATE or reINVITE?"
>>>>>
>>>>>Thanks,
>>>>>
>>>>>Mo
>>>>>
>>>>>-----Original Message-----
>>>>>From: Sanjay Sinha (sanjsinh)
>>>>>Sent: Thursday, August 03, 2006 9:57 AM
>>>>>To: Jesske, R; Jonathan Rosenberg (jdrosen); sip@ietf.org
>>>>>Subject: RE: [Sip] updated acr code draft
>>>>>
>>>>>Scenario is PSTN-SIP interworking. For some cases, display
>>>>
>>>>IE is not
>>>>
>>>>>available in SETUP because some TCAP query is required. 
>>>>
>>>>When the query
>>>>
>>>>>is complete, switch sends display IE in a FACILITY message. From 
>>>>>header is mandatory in INVITE, but calling name and number
>>>>
>>>>is not. So
>>>>
>>>>>Invite is sent without caller-identity which is later
>>>>
>>>>updated with an
>>>>
>>>>>UPDATE/INFO, when the UA gets FACILITY with display information.
>>>>>
>>>>>Thanks
>>>>>Sanjay. 
>>>>>
>>>>>-----Original Message-----
>>>>>From: Jesske, R [mailto:R.Jesske@t-com.net]
>>>>>Sent: Thursday, August 03, 2006 1:52 AM
>>>>>To: Sanjay Sinha (sanjsinh); Jonathan Rosenberg (jdrosen); 
>>>>>sip@ietf.org
>>>>>Subject: AW: [Sip] updated acr code draft
>>>>>
>>>>>The ACR service itself reacts only on identities that are
>>>>
>>>>put anonymus
>>>>
>>>>>by the user or on behalf on the user.
>>>>>So if the restriction is based on other reasons ACR will
>>>>
>>>>not terminate
>>>>
>>>>>the call.
>>>>>
>>>>>My question to your scenario is in which case an identity is not 
>>>>>available in an INVITE. The From header is an mandatory
>>>>
>>>>header so the
>>>>
>>>>>>From Header has have an user identity. Or not?
>>>>>
>>>>>The P-Asserted-Identity is set by an trusted network 
>>
>>entity that is 
>>
>>>>>aware of the user sending that request.
>>>>>
>>>>>Best Regards
>>>>>
>>>>>Roland
>>>>>
>>>>>
>>>>>>-----Ursprngliche Nachricht-----
>>>>>>Von: Sanjay Sinha (sanjsinh) [mailto:sanjsinh@cisco.com]
>>>>>>Gesendet: Mittwoch, 2. August 2006 17:32
>>>>>>An: Jonathan Rosenberg (jdrosen); IETF SIP List
>>>>>>Betreff: RE: [Sip] updated acr code draft
>>>>>>
>>>>>>
>>>>>>What about the case in which caller information is not
>>>>
>>>>available at
>>>>
>>>>>>the time INVITE is sent to establish a call, but is
>>>>
>>>>available later
>>>>
>>>>>>and an UPDATE/INFO is sent by UAC to update the caller-id
>>>>>
>>>>>information.
>>>>>
>>>>>>If UAS rejects UPDATE/INFO with 433, what does it mean for
>>>>>
>>>>>the Invite
>>>>>
>>>>>>dialog.
>>>>>>Should that also be terminated as a result of ACR?
>>>>>>
>>>>>>Thanks
>>>>>>Sanjay
>>>>>>
>>>>>>-----Original Message-----
>>>>>>From: Jonathan Rosenberg (jdrosen)
>>>>>>Sent: Monday, July 31, 2006 4:31 PM
>>>>>>To: IETF SIP List
>>>>>>Subject: [Sip] updated acr code draft
>>>>>>
>>>>>>I've submitted a minor update to the ACR code draft. Until
>>>>>
>>>>>it appears,
>>>>>
>>>>>>you can pick it up at:
>>>>>>
>>>>>>http://www.jdrosen.net/papers/draft-ietf-sip-acr-code-02.txt
>>>>>>
>>>>>>the changes are:
>>>>>>
>>>>>>* replaced P-Asserted-ID with P-Asserted-Identity
>>>>>>
>>>>>>* added to security considerations section, consideration for 
>>>>>>anonymizers in the network. Namely, don't retry request on
>>>>>
>>>>>receipt of
>>>>>
>>>>>>433 unless explicitly configured to do so by user
>>>>>>
>>>>>>
>>>>>>Thanks,
>>>>>>Jonathan R.
>>>>>>-- 
>>>>>>Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
>>>>>>Cisco Fellow                                   Parsippany, NJ 
>>>>>>07054-2711
>>>>>>Cisco Systems
>>>>>>jdrosen@cisco.com                              FAX:   
>>>>
>>>>(973) 952-5050
>>>>
>>>>>>http://www.jdrosen.net                         PHONE: 
>>>>
>>>>(973) 952-5000
>>>>
>>>>>>http://www.cisco.com
>>>>>>
>>>>>>_______________________________________________
>>>>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>>>This list is for NEW development of the core SIP Protocol Use 
>>>>>>sip-implementors@cs.columbia.edu for questions on 
>>
>>current sip Use 
>>
>>>>>>sipping@ietf.org for new developments on the application of sip
>>>>>>
>>>>>>_______________________________________________
>>>>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>>>This list is for NEW development of the core SIP Protocol Use 
>>>>>>sip-implementors@cs.columbia.edu for questions on 
>>
>>current sip Use 
>>
>>>>>>sipping@ietf.org for new developments on the application of sip
>>>>>>
>>>>>
>>>>>_______________________________________________
>>>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>>This list is for NEW development of the core SIP Protocol Use 
>>>>>sip-implementors@cs.columbia.edu for questions on current sip Use 
>>>>>sipping@ietf.org for new developments on the application of sip
>>>>>
>>>>>_______________________________________________
>>>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>>This list is for NEW development of the core SIP Protocol Use 
>>>>>sip-implementors@cs.columbia.edu for questions on current sip Use 
>>>>>sipping@ietf.org for new developments on the application of sip
>>>>>
>>>>
>>>>_______________________________________________
>>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>This list is for NEW development of the core SIP Protocol Use 
>>>>sip-implementors@cs.columbia.edu for questions on current sip Use 
>>>>sipping@ietf.org for new developments on the application of sip
>>>>
>>>
>>>_______________________________________________
>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>This list is for NEW development of the core SIP Protocol 
>>
>>Use sip-implementors@cs.columbia.edu for questions on current 
>>sip Use sipping@ietf.org for new developments on the 
>>application of sip
>>
>>>_______________________________________________
>>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>This list is for NEW development of the core SIP Protocol
>>>Use sip-implementors@cs.columbia.edu for questions on current sip
>>>Use sipping@ietf.org for new developments on the application of sip
>>>
>>
>>_______________________________________________
>>Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>This list is for NEW development of the core SIP Protocol
>>Use sip-implementors@cs.columbia.edu for questions on current sip
>>Use sipping@ietf.org for new developments on the application of sip
>>
> 
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 13 16:48:01 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNbcf-0005uy-89; Wed, 13 Sep 2006 16:46:17 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNbce-0005uk-Fy
	for sip@ietf.org; Wed, 13 Sep 2006 16:46:16 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNbcd-0004Wd-4F
	for sip@ietf.org; Wed, 13 Sep 2006 16:46:16 -0400
Received: from sj-dkim-6.cisco.com ([171.68.10.81])
	by sj-iport-5.cisco.com with ESMTP; 13 Sep 2006 13:46:15 -0700
X-IronPort-AV: i="4.09,160,1157353200"; 
	d="scan'208"; a="320896711:sNHT33277984"
Received: from sj-core-3.cisco.com (sj-core-3.cisco.com [171.68.223.137])
	by sj-dkim-6.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8DKkEa8031634; Wed, 13 Sep 2006 13:46:14 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com
	[128.107.191.100])
	by sj-core-3.cisco.com (8.12.10/8.12.6) with ESMTP id k8DKkEw7000912;
	Wed, 13 Sep 2006 13:46:14 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.211);
	Wed, 13 Sep 2006 13:46:14 -0700
Received: from [10.32.241.148] ([10.32.241.148]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 13 Sep 2006 13:46:13 -0700
Message-ID: <45086E14.4010508@cisco.com>
Date: Wed, 13 Sep 2006 16:46:12 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Henning Schulzrinne <hgs@cs.columbia.edu>
Subject: Re: [Sip] updated acr code draft
References: <44CE6866.5070906@cisco.com> <44CE6A1A.3000200@cs.columbia.edu>
In-Reply-To: <44CE6A1A.3000200@cs.columbia.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 13 Sep 2006 20:46:13.0827 (UTC)
	FILETIME=[A6EC0930:01C6D775]
DKIM-Signature: a=rsa-sha1; q=dns; l=1854; t=1158180374; x=1159044374;
	c=relaxed/simple; s=sjdkim6002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20updated=20acr=20code=20draft;
	X=v=3Dcisco.com=3B=20h=3DgfgaY3iE55EmUDQBj03WnpQ2Jxs=3D;
	b=TdsWt2mmQczv7tXCE//EkUCmvGp6Rs856PF9zImLExeSjnxLevPIsUlW6awU52cqqoEVpEzW
	gmqP7+/0UplSe3yaO3I8YrbfCPsQFtzRodDa1jdIjje7+Ulfzr7Ok0po;
Authentication-Results: sj-dkim-6.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7aafa0432175920a4b3e118e16c5cb64
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

OK, I will change the text to MUST NOT retry.

-Jonathan R.

Henning Schulzrinne wrote:

> Just a quick comment:
> 
>   request without requesting anonymity.  It SHOULD only do so if it
>    obtains confirmation from the user that this is desirable.  Such
>    confirmation could be obtained through the user interface, or by
>    accessing user defined policy.  The UAC SHOULD NOT retry the request
>    if user continues to request anonymity.
> 
> No guidance is given when the UAC might just retry the request without 
> anonymity and without asking. Is "because it feels like it" a good 
> enough reason :-)? Can a vendor just decide that all its products don't 
> really feel that strongly about anonymity or is this something that only 
> users (or administrators) should be able to configure?
> 
> I think the right answer is that the UAC MUST NOT do this automatically 
> unless the user or administrator has configured an automatic 
> non-anonymous retry.
> 
> 
> Jonathan Rosenberg wrote:
> 
>> I've submitted a minor update to the ACR code draft. Until it appears, 
>> you can pick it up at:
>>
>> http://www.jdrosen.net/papers/draft-ietf-sip-acr-code-02.txt
>>
>> the changes are:
>>
>> * replaced P-Asserted-ID with P-Asserted-Identity
>>
>> * added to security considerations section, consideration
>> for anonymizers in the network. Namely, don't retry
>> request on receipt of 433 unless explicitly configured
>> to do so by user
>>
>>
>> Thanks,
>> Jonathan R.
> 
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 00:06:52 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNiRB-0007NX-IB; Thu, 14 Sep 2006 00:02:53 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNiR9-0007NL-I6
	for sip@ietf.org; Thu, 14 Sep 2006 00:02:51 -0400
Received: from shaman.nostrum.com ([72.232.15.10] helo=nostrum.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNiR6-0000PX-5N
	for sip@ietf.org; Thu, 14 Sep 2006 00:02:51 -0400
Received: from [172.27.172.89] ([64.119.159.194]) (authenticated bits=0)
	by nostrum.com (8.13.6/8.13.6) with ESMTP id k8E42hUI094542
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Wed, 13 Sep 2006 23:02:45 -0500 (CDT)
	(envelope-from rjsparks@nostrum.com)
In-Reply-To: <003201c6d5c5$37f710d0$5000a8c0@RW>
References: <E1GLSh7-00050D-Rd@stiedprstage1.ietf.org>
	<212E035E-2737-4A3B-9B5A-CDF251E6FF43@cisco.com>
	<003201c6d5c5$37f710d0$5000a8c0@RW>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <17C34D4B-194D-4203-8B07-EE7D7611AE5D@nostrum.com>
Content-Transfer-Encoding: 7bit
From: Robert Sparks <rjsparks@nostrum.com>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Wed, 13 Sep 2006 23:02:42 -0500
To: Pete Cordell <pete@tech-know-ware.com>
X-Mailer: Apple Mail (2.752.2)
Received-SPF: pass (nostrum.com: 64.119.159.194 is authenticated by a trusted
	mechanism)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b280b4db656c3ca28dd62e5e0b03daa8
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I really thought I addressed your comment in the draft, Pete.

The word cryptographic appears exactly once in the current text, and  
it's in a section that the RFC editor will
delete before publishing. For convenience, here's where it occurs (in  
the Change-Log section):

> 9.1.  -02 to -03
>
<snip>
>
>       Removed the word "cryptographic" from the hash description in  
> the
>       non-normative note to implementers (per list discussion) and  
> added
>       characterization of the properties the hash chosen should have.

RjS

On Sep 11, 2006, at 11:52 AM, Pete Cordell wrote:

> ----- Original Message From: "Cullen Jennings"
>
>> I'm wondering why we would recommend a cryptographic hash  
>> function.  I'm also wondering why it needs to be as large as 128  
>> bits.
>
> Hi Cullen,
>
> I raised a similar question a while back (http://www1.ietf.org/mail- 
> archive/web/sip/current/msg15133.html . Unfortunately I can't find  
> Robert's reply in the archives.)
>
> I think I then clarified off line with:
>
> On Jul 6, 2006, at 1:28 PM, Pete Cordell wrote:
>
>> Just to make sure I'm not talking a cross-purposes, the reference   
>> to cryptographic hashes I'm talking about is in 4.2.3.-
>>
>>   A common way to create the second part of the branch parameter  
>> value
>>   when forking a request is to compute a cryptographic hash...
>>
>> I appreciate this has no normative value, but implies that   
>> cryptographic strength is recommended.
>>
>> Maybe just removing the word "cryptographic" is the right to do?   
>> I suppose the last sentence in that paragraph could go along the   
>> lines of:
>>
>>     ...An MD5 [RFC1321] hash expressed in hexadecimal (base64
>>   is not permissible for a token) is a reasonable choice of a hash
>>   function, although other (non-cryptographic) hashes may suffice.
>
> which Robert seemed to think this was reasonable.
>
> As to the size of the hash, what size do you think is big enough?   
> Assuming the hash is working properly, even 16 bits is approaching  
> five 9s territory for false positives.  Is there any reason why  
> that's too simplistic a way to look at it?  I imagine 32-bits would  
> be easy for most people to implement, and a logical size to choose  
> as far as I can tell.  Should this be left as an implementation issue?
>
> Pete.
> --
> =============================================
> Pete Cordell
> Tech-Know-Ware Ltd
>                         for XML to C++ data binding visit
>                         http://www.tech-know-ware.com/lmx
>                         (or http://www.xml2cpp.com)
> =============================================
>
>
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 04:38:23 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNmgs-0007uc-4x; Thu, 14 Sep 2006 04:35:22 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNmgp-0007uR-G1
	for sip@ietf.org; Thu, 14 Sep 2006 04:35:19 -0400
Received: from smtp1.wanadoo.co.uk ([193.252.22.158] helo=smtp1.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNmgn-000888-Vv
	for sip@ietf.org; Thu, 14 Sep 2006 04:35:19 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3016.me.freeserve.com (SMTP Server) with ESMTP id 50D98C400087; 
	Thu, 14 Sep 2006 10:35:15 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3016.me.freeserve.com (SMTP Server) with SMTP id F1716C400085; 
	Thu, 14 Sep 2006 10:35:14 +0200 (CEST)
X-ME-UUID: 20060914083514989.F1716C400085@mwinf3016.me.freeserve.com
Message-ID: <001e01c6d7d8$b52115f0$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Robert Sparks" <rjsparks@nostrum.com>
References: <E1GLSh7-00050D-Rd@stiedprstage1.ietf.org><212E035E-2737-4A3B-9B5A-CDF251E6FF43@cisco.com><003201c6d5c5$37f710d0$5000a8c0@RW>
	<17C34D4B-194D-4203-8B07-EE7D7611AE5D@nostrum.com>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Thu, 14 Sep 2006 09:35:13 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 5d7a7e767f20255fce80fa0b77fb2433
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Robert,

I'd actually missed the fact that you'd updated the draft and was really 
commenting on changes proposed to -02.

That said, I am of the opinion at the moment that recommending a 128-bit 
hash is overkill.  If due to poor distribution, the hash function works a 
tenth as well as the bit count suggests even a 32 bit hash will result in a 
false clash once in 400 million times.  My expectation is that the loop vs. 
spiral decision will only have to be made on a small minority of calls as 
well (figure out of the air - 1 in 50 maybe!).  So that would be a 1 in 20 
billion failure rate, which would seem OK to me.

I suppose one issue is that if you do happen to be the 20 billionth person 
trying to make such a call, then your call will fail every time, which may 
be a bad effect.

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================

----- Original Message ----- 
From: "Robert Sparks" <rjsparks@nostrum.com>
To: "Pete Cordell" <pete@tech-know-ware.com>
Cc: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>
Sent: Thursday, September 14, 2006 5:02 AM
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03


>I really thought I addressed your comment in the draft, Pete.
>
> The word cryptographic appears exactly once in the current text, and  it's 
> in a section that the RFC editor will
> delete before publishing. For convenience, here's where it occurs (in  the 
> Change-Log section):
>
>> 9.1.  -02 to -03
>>
> <snip>
>>
>>       Removed the word "cryptographic" from the hash description in  the
>>       non-normative note to implementers (per list discussion) and  added
>>       characterization of the properties the hash chosen should have.
>
> RjS
>
> On Sep 11, 2006, at 11:52 AM, Pete Cordell wrote:
>
>> ----- Original Message From: "Cullen Jennings"
>>
>>> I'm wondering why we would recommend a cryptographic hash  function. 
>>> I'm also wondering why it needs to be as large as 128  bits.
>>
>> Hi Cullen,
>>
>> I raised a similar question a while back (http://www1.ietf.org/mail- 
>> archive/web/sip/current/msg15133.html . Unfortunately I can't find 
>> Robert's reply in the archives.)
>>
>> I think I then clarified off line with:
>>
>> On Jul 6, 2006, at 1:28 PM, Pete Cordell wrote:
>>
>>> Just to make sure I'm not talking a cross-purposes, the reference   to 
>>> cryptographic hashes I'm talking about is in 4.2.3.-
>>>
>>>   A common way to create the second part of the branch parameter  value
>>>   when forking a request is to compute a cryptographic hash...
>>>
>>> I appreciate this has no normative value, but implies that 
>>> cryptographic strength is recommended.
>>>
>>> Maybe just removing the word "cryptographic" is the right to do?   I 
>>> suppose the last sentence in that paragraph could go along the   lines 
>>> of:
>>>
>>>     ...An MD5 [RFC1321] hash expressed in hexadecimal (base64
>>>   is not permissible for a token) is a reasonable choice of a hash
>>>   function, although other (non-cryptographic) hashes may suffice.
>>
>> which Robert seemed to think this was reasonable.
>>
>> As to the size of the hash, what size do you think is big enough? 
>> Assuming the hash is working properly, even 16 bits is approaching  five 
>> 9s territory for false positives.  Is there any reason why  that's too 
>> simplistic a way to look at it?  I imagine 32-bits would  be easy for 
>> most people to implement, and a logical size to choose  as far as I can 
>> tell.  Should this be left as an implementation issue?
>>
>> Pete.
>> --
>> =============================================
>> Pete Cordell
>> Tech-Know-Ware Ltd
>>                         for XML to C++ data binding visit
>>                         http://www.tech-know-ware.com/lmx
>>                         (or http://www.xml2cpp.com)
>> =============================================
>>
>>
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 06:23:41 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNoKS-0000eu-0L; Thu, 14 Sep 2006 06:20:20 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNoKQ-0000ep-B6
	for sip@ietf.org; Thu, 14 Sep 2006 06:20:18 -0400
Received: from jes-fe2.zx.nl ([194.187.76.133])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNoKL-0002gx-2e
	for sip@ietf.org; Thu, 14 Sep 2006 06:20:18 -0400
Received: from Inbox ([84.241.211.144])
	by jes-fe2.zx.nl (Sun Java System Messaging Server 6.2-2.05 (built Apr
	28
	2005)) with ESMTP id <0J5K00LB9YCPJM20@jes-fe2.zx.nl> for sip@ietf.org;
	Thu, 14 Sep 2006 12:24:41 +0100 (WEST)
Date: Thu, 14 Sep 2006 12:20:17 +0200
From: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: RE: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
To: Pete Cordell <pete@tech-know-ware.com>,
	Robert Sparks <rjsparks@nostrum.com>
Message-id: <0J5K00LBAYCRJM20@jes-fe2.zx.nl>
MIME-version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Importance: normal
X-Priority: 3
X-Spam-Score: 1.2 (+)
X-Scan-Signature: 7a6398bf8aaeabc7a7bb696b6b0a2aad
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
I suppose one issue is that if you do happen to be the 20 billionth person=
=20
trying to make such a call, then your call will fail every time, which may=
=20
be a bad effect.
 =20
(jvb) And THAT'S the reason to include the call-id in the hash: to ensure t=
hat an unlucky caller does not suffer the same fate twice (or rather: to ma=
ke it very unlikely)

Jeroen=


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 09:18:47 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNr44-0003o5-QS; Thu, 14 Sep 2006 09:15:36 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNr42-0003lj-EB
	for sip@ietf.org; Thu, 14 Sep 2006 09:15:34 -0400
Received: from shaman.nostrum.com ([72.232.15.10] helo=nostrum.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNqpa-0005ZJ-Rz
	for sip@ietf.org; Thu, 14 Sep 2006 09:00:40 -0400
Received: from [172.27.172.89] ([64.119.159.194]) (authenticated bits=0)
	by nostrum.com (8.13.6/8.13.6) with ESMTP id k8ED0XIL020150
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Thu, 14 Sep 2006 08:00:36 -0500 (CDT)
	(envelope-from rjsparks@nostrum.com)
In-Reply-To: <0J5K00LBAYCRJM20@jes-fe2.zx.nl>
References: <0J5K00LBAYCRJM20@jes-fe2.zx.nl>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <82A13E06-241F-4DDD-AF9C-EC32FC5B0072@nostrum.com>
Content-Transfer-Encoding: 7bit
From: Robert Sparks <rjsparks@nostrum.com>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Thu, 14 Sep 2006 08:00:33 -0500
To: Jeroen Van Bemmel <jbemmel@zonnet.nl>
X-Mailer: Apple Mail (2.752.2)
Received-SPF: pass (nostrum.com: 64.119.159.194 is authenticated by a trusted
	mechanism)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 8b431ad66d60be2d47c7bfeb879db82c
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>,
	Pete Cordell <pete@tech-know-ware.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hrmm. Let me poke at that for a minute.

You would never compare the hashes you created for two different  
calls. You only compare hashes for
different instances of the _same request_ reaching the element  
multiple times. The only things in the
Via stack when the request reaches you are values placed when _this  
request_ went through other element,
and you're checking to see if one of them just happened to be this  
element.

The Call-ID is invariant for those comparisons. If you had a perfect  
hash, including it would have no effect
on the correctness of the algorithm at all - it would be wasted  
effort, which is why we were removing it.

But for a hash that has collisions, including it, or any other set of  
bits that change between requests,
shifts where you land in the hash's range, increasing the probability  
that you won't encounter the _same_
collision more than once.

That may be exactly why call-id and cseq were included in the hash in  
3261. Assuming that's so, then
all we need are bits that change between transactions. The first part  
of the via branch parameter would
be enough.

So, I propose I add text explaining why you SHOULD (do we make this  
MUST?) add some set of bits that
change between requests, and note that either the first part of the  
via branch or the combination of call-id
and cseq would be good choices.

RjS

On Sep 14, 2006, at 5:20 AM, Jeroen Van Bemmel wrote:

>
> I suppose one issue is that if you do happen to be the 20 billionth  
> person
> trying to make such a call, then your call will fail every time,  
> which may
> be a bad effect.
>
> (jvb) And THAT'S the reason to include the call-id in the hash: to  
> ensure that an unlucky caller does not suffer the same fate twice  
> (or rather: to make it very unlikely)
>
> Jeroen


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 10:16:46 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNryz-0001h2-0E; Thu, 14 Sep 2006 10:14:25 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNryw-0001gp-Tw
	for sip@ietf.org; Thu, 14 Sep 2006 10:14:22 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNryv-0003RH-Cm
	for sip@ietf.org; Thu, 14 Sep 2006 10:14:22 -0400
Received: from S4DE8PSAANQ.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Thu, 14 Sep 2006 16:14:10 +0200
Received: by S4DE8PSAANQ.blf.telekom.de with Internet Mail Service
	(5.5.2653.19) id <SVR02MAW>; Thu, 14 Sep 2006 16:14:09 +0200
Message-Id: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>
From: "Jesske, R" <R.Jesske@t-com.net>
To: jdrosen@cisco.com,
    dean.willis@softarmor.com
Subject: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Date: Thu, 14 Sep 2006 16:11:49 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Spam-Score: 0.0 (/)
X-Scan-Signature: cd3fc8e909678b38737fc606dec187f0
Cc: sip@ietf.org, esasaki@NTT-AT.COM, drage@lucent.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

The discussion shows how privacy could be interpreted.
At least with the 'header' privacy the origin user expresses that he =
want to be anonymous. So it is an intension of the user.=20
Of course the privacy server can strip of the privacy value but that is =
due to the Provider of the server. Within RFC3323 I didn't found =
something that says that if you have privacy performed that you have to =
delete the privacy header itself.

I'm against that we explicitly exclude the 'header' value for a reason =
to send the 433 Response.

The point in section 3 that describes when it is assumed that the call =
was anonymous is from my point of view a list of examples. So I propose =
to point this out like:

3.  Server Behavior

A server acting on behalf of the called party, such as the UAS or a
   proxy in their domain, MAY generate a 433 (Anonymity Disallowed)
   response when it receives an anonymous request, and the called party
   refuses to fulfill the request because the requestor is anonymous.  =
A
   request is considered anonymous when the identity of the originator
   of the request has been explicitly withheld by the originator or on =
behalf of the originator.  The following cases show exampes where this =
occur: ...

Best Regards

Roland




> -----Urspr=FCngliche Nachricht-----
> Von: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Gesendet: Mittwoch, 13. September 2006 22:36
> An: Dean Willis
> Cc: Jesske, Roland; sip@ietf.org; drage@lucent.com
> Betreff: Re: [Sip] SIP WGLC Draft draft-ietf-sip-acr-code-02.txt
>=20
>=20
> I agree with Dean. And to add to that, I'll also note that I view=20
> 'header' privacy as much different than 'id' privacy. Header=20
> privacy is=20
> likely to be executed almost immediately, at the point of=20
> origin. Thus=20
> by the time the request reaches the terminating side there is no=20
> 'header' value left since the privacy service stripped it.=20
> The 'id' tag=20
> in the Privacy header is explicitly different; its stripped=20
> at the last=20
> hop, not at the first.
>=20
> Furthermore, any user that wants a level of anonymity associated with =

> 'header' is also likely to use 'id' at the same time, and thus the=20
> service would be triggered from that. Any case in which=20
> 'header' is used=20
> but 'id' is not seems weird to me.
>=20
> -Jonathan R.
>=20
> Dean Willis wrote:
>=20
> >=20
> > On Sep 13, 2006, at 5:36 AM, Jesske, R wrote:
> >=20
> >>> dy.
> >>>
> >>> In this Draft is described that:
> >>> The request contained a Privacy header field whose value was 'id'
> >>>       [3] or 'user'.  This explicitly excludes the 'header' and
> >>>       'session' privacy services, since those do not directly
> >>> convey the
> >>>       identity of the requestor.
> >>>
> >>> Why the value 'header ' is exluded?
> >>>
> >>> In RFC3323 is described that header:
> >>>       header: The user requests that a privacy service=20
> obscure those
> >>>       headers which cannot be completely expunged of identifying
> >>>       information without the assistance of intermediaries
> >>> (such as Via
> >>>       and Contact).  Also, no unnecessary headers should be
> >>> added by the
> >>>       service that might reveal personal information about the
> >>>       originator of the request.
> >>>
> >>> So from my understanding 'id' is a subset of 'header' because
> >>> the P-Asserted-Identity can only be deleted by untermediarities.
> >=20
> >=20
> > ID privacy is only a subset of header privacy if the=20
> identity  mechanism=20
> > is entirely header-based. It isn't always that way. IMS is  not the =

> > entire SIP world. RFC 3323 "header" privacy doesn't preclude =20
> > non-header-field-based identity expressions, so ACR can't =20
> automatically=20
> > reject requests with "header" privacy.
> >=20
> > Nor can ACR automatically accept a request that does NOT 
> have  "header"=20
> > privacy.
> >=20
> > In the specific case of ACR, we're trying to reject an=20
> INVITE that  does=20
> > not contain an explicit and intentional disclosure of the =20
> requestor's=20
> > identity. While the requestor's identity might "leak"  from=20
> headers,=20
> > only specific identity headers (or other identity =20
> mechanisms, such as=20
> > AIB) carry the sort of strong identity assertion  needed=20
> for anonymous=20
> > call rejection to work as expected.
> >=20
> > Here's an example: Let's say the the Contact: header field=20
> value in  my=20
> > INVITE is really a reversible GRUU. That is, the GRUU=20
> contains my  AOR.=20
> > I use no other identity mechanisms.
> >=20
> > I call you. You have ACR turned on. Is the fact that my=20
> identity is =20
> > encoded in the Contact: header field of my INVITE good=20
> enough to keep =20
> > you from rejecting my call?
> >=20
> > I'd argue that it is not. Since we don't have a widely=20
> accepted way  for=20
> > assuring that the identity expressed in a Contact header field is =20
> > valid, we really can't use this information for ACR.
> >=20
> >=20
> > --=20
> > Dean
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> >=20
>=20
> --=20
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ=20
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 11:23:52 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNt18-0004nH-UC; Thu, 14 Sep 2006 11:20:42 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNt16-0004kp-JY
	for sip@ietf.org; Thu, 14 Sep 2006 11:20:40 -0400
Received: from jes-fe2.zx.nl ([194.187.76.133])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNsmg-00054Q-B9
	for sip@ietf.org; Thu, 14 Sep 2006 11:05:51 -0400
Received: from Inbox ([84.241.217.204])
	by jes-fe2.zx.nl (Sun Java System Messaging Server 6.2-2.05 (built Apr
	28
	2005)) with ESMTP id <0J5L00LLPBKRJM30@jes-fe2.zx.nl> for sip@ietf.org;
	Thu, 14 Sep 2006 17:10:23 +0100 (WEST)
Date: Thu, 14 Sep 2006 17:06:00 +0200
From: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: RE: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
To: Robert Sparks <rjsparks@nostrum.com>
Message-id: <0J5L00LLRBKTJM30@jes-fe2.zx.nl>
MIME-version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Importance: normal
X-Priority: 3
X-Spam-Score: 1.2 (+)
X-Scan-Signature: fb6060cb60c0cea16e3f7219e40a0a81
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>,
	Pete Cordell <pete@tech-know-ware.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Yes, except that using "the via branch" here is tricky: which one do you ta=
ke?

Pre-RFC3261 clients would not insert a branch parameter, so taking the top =
via branch wont always work. Using the branch parameter added by the proxy =
itself is possible, provided that only the "first part" is used. Implemento=
rs then need to make sure to disect the branch prior to calculating the loo=
p hash.

Possible, but easy to get wrong

Jeroen

-----Oorspronkelijk bericht -----
Van: "Robert Sparks" <rjsparks@nostrum.com>
Aan: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>
CC: "Pete Cordell" <pete@tech-know-ware.com>; "Cullen Jennings" <fluffy@cis=
co.com>; "SIP" <sip@ietf.org>
Verzonden: 14-9-06 15:00
Onderwerp: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03

Hrmm. Let me poke at that for a minute.

You would never compare the hashes you created for two different =20
calls. You only compare hashes for
different instances of the _same request_ reaching the element =20
multiple times. The only things in the
Via stack when the request reaches you are values placed when _this =20
request_ went through other element,
and you're checking to see if one of them just happened to be this =20
element.

The Call-ID is invariant for those comparisons. If you had a perfect =20
hash, including it would have no effect
on the correctness of the algorithm at all - it would be wasted =20
effort, which is why we were removing it.

But for a hash that has collisions, including it, or any other set of =20
bits that change between requests,
shifts where you land in the hash's range, increasing the probability =20
that you won't encounter the _same_
collision more than once.

That may be exactly why call-id and cseq were included in the hash in =20
3261. Assuming that's so, then
all we need are bits that change between transactions. The first part =20
of the via branch parameter would
be enough.

So, I propose I add text explaining why you SHOULD (do we make this =20
MUST?) add some set of bits that
change between requests, and note that either the first part of the =20
via branch or the combination of call-id
and cseq would be good choices.

RjS

On Sep 14, 2006, at 5:20 AM, Jeroen Van Bemmel wrote:

>
> I suppose one issue is that if you do happen to be the 20 billionth =20
> person
> trying to make such a call, then your call will fail every time, =20
> which may
> be a bad effect.
>
> (jvb) And THAT'S the reason to include the call-id in the hash: to =20
> ensure that an unlucky caller does not suffer the same fate twice =20
> (or rather: to make it very unlikely)
>
> Jeroen



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 12:02:11 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNtdR-0006Am-TO; Thu, 14 Sep 2006 12:00:17 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNtdG-00064y-Mi
	for sip@ietf.org; Thu, 14 Sep 2006 12:00:07 -0400
Received: from smtp1.wanadoo.co.uk ([193.252.22.158] helo=smtp1.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNtdE-0004oI-OS
	for sip@ietf.org; Thu, 14 Sep 2006 12:00:06 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3004.me.freeserve.com (SMTP Server) with ESMTP id 11C0C1C001CA; 
	Thu, 14 Sep 2006 18:00:04 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3004.me.freeserve.com (SMTP Server) with SMTP id A65A81C001C4; 
	Thu, 14 Sep 2006 18:00:03 +0200 (CEST)
X-ME-UUID: 20060914160003681.A65A81C001C4@mwinf3004.me.freeserve.com
Message-ID: <001f01c6d816$d86bee70$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Robert Sparks" <rjsparks@nostrum.com>,
	"Jeroen Van Bemmel" <jbemmel@zonnet.nl>
References: <0J5K00LBAYCRJM20@jes-fe2.zx.nl>
	<82A13E06-241F-4DDD-AF9C-EC32FC5B0072@nostrum.com>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Thu, 14 Sep 2006 16:59:52 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 2857c5c041d6c02d7181d602c22822c8
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

----- From: "Robert Sparks" <rjsparks@nostrum.com>

> That may be exactly why call-id and cseq were included in the hash in 
> 3261. Assuming that's so, then
> all we need are bits that change between transactions. The first part  of 
> the via branch parameter would
> be enough.
>
> So, I propose I add text explaining why you SHOULD (do we make this 
> MUST?) add some set of bits that
> change between requests, and note that either the first part of the  via 
> branch or the combination of call-id
> and cseq would be good choices.

That's quite cunning Jeroen!  I think it can only be SHOULD, because the 
whole thing is SHOULD and RECOMMENDED etc.

One issue is that this works well for the cryptographic hashes, but I don't 
think it will work for the linear hash I mentioned in an earlier e-mail, 
i.e.:

for( i=0; i<strlen(data); ++i )
    hash = hash * MULTIPLIER + data[i];

where MULTIPLIER is 31 or 37.

That's because if:
    HASH( C1 . Ra ) == HASH( C1 . Rb )  then
            most likely HASH( C2 . Ra ) == HASH( C2 . Rb )
where:
    C1 is the fixed data specific to Call 1, e.g. Call-Id, and
    C2 is similar for the second call, and
    Ra is the routing input for the first time through proxy and
    Rb is the routing data for the second time through the proxy and
    . is some form of concatenation operator.

Because
    HASH( C1 . Ra ) can be converted into HASH( C1 . ? ) + HASH( Ra ) and 
then HASH( C1 . ? ) can be removed from the equation in each case.

According to some site on the internet [1] (so it must be true), Perl's hash 
function is:

x[] = { 61,59,53,47,43,41,37,31,29,23,17,13,11,7,3,1 };
for( i=0; i<strlen(data); ++i )
    hash = hash * 5 + data[i] * x[i%16];

This is still fairly linear despite x[], so doesn't fix the problem above. 
But if you had:


len_call_id = strlen( Call-Id );
for( i=0; i<strlen(data); ++i )
    hash = hash * 5 + data[i] * Call-Id[i % len_call_id];

or even:

len_call_id = strlen( Call-Id );
for( i=0; i<strlen(data); ++i )
    hash = hash * 5 + data[i] ^ Call-Id[i % len_call_id];

I think that's sufficient non-linearity such that:

If HASH( C1 . Ra ) == HASH( C1 . Rb )  then
    there's a good chance HASH( C2 . Ra ) != HASH( C2 . Rb )

If that's the case, this would be considerably more efficient than an MD5 
hash.  Trouble is I have no proof of my assertion about the non-linearity 
effect, so it would seem difficult to include something like the latter hash 
function in the draft.  What I have proven is that it would be a lot of 
waffle to discuss such issues in the draft!

So on the one hand the draft can recommend an MD-5 hash, but I think is 
unnecessarily computationally demanding for the task, or it can waffle about 
other issues and allude to simpler hashes but not have a very good 
mathematical basis.

Thus I'm not really sure what to suggest!  Maybe the text in the core of the 
draft could remain the same, but an informal appendix could include 
discussion such as above!

Hope that helps !!!!

Pete.

[1] 
http://www.cs.duke.edu/~mlittman/courses/Archive/cps130-97/lectures/lect11/node25.html

> On Sep 14, 2006, at 5:20 AM, Jeroen Van Bemmel wrote:
>
>>
>> I suppose one issue is that if you do happen to be the 20 billionth 
>> person
>> trying to make such a call, then your call will fail every time,  which 
>> may
>> be a bad effect.
>>
>> (jvb) And THAT'S the reason to include the call-id in the hash: to 
>> ensure that an unlucky caller does not suffer the same fate twice  (or 
>> rather: to make it very unlikely)
>>
>> Jeroen
>
>
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 12:55:18 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNuRc-0002Am-7i; Thu, 14 Sep 2006 12:52:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNuRa-0002Ac-H5
	for sip@ietf.org; Thu, 14 Sep 2006 12:52:06 -0400
Received: from jes-fe2.zx.nl ([194.187.76.133])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNuRT-0008Ne-6q
	for sip@ietf.org; Thu, 14 Sep 2006 12:52:06 -0400
Received: from Inbox ([84.241.220.103])
	by jes-fe2.zx.nl (Sun Java System Messaging Server 6.2-2.05 (built Apr
	28
	2005)) with ESMTP id <0J5L00L27GI0JL40@jes-fe2.zx.nl> for sip@ietf.org;
	Thu, 14 Sep 2006 18:56:41 +0100 (WEST)
Date: Thu, 14 Sep 2006 18:52:19 +0200
From: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: RE: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
To: Pete Cordell <pete@tech-know-ware.com>,
	Robert Sparks <rjsparks@nostrum.com>
Message-id: <0J5L00L28GI2JL40@jes-fe2.zx.nl>
MIME-version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Importance: normal
X-Priority: 3
X-Spam-Score: 1.2 (+)
X-Scan-Signature: 769a46790fb42fbb0b0cc700c82f7081
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Pete,

I use djb2 (a linear hash) with loop-hash =3D HASH(routing info) + HASH( ca=
ll-id ), modulo 2^32 (or 64)

So no concatenation. I guess this avoids the issue you mentioned.

Regards,
Jeroen=20

-----Oorspronkelijk bericht -----
Van: "Pete Cordell" <pete@tech-know-ware.com>
Aan: "Robert Sparks" <rjsparks@nostrum.com>; "Jeroen Van Bemmel" <jbemmel@z=
onnet.nl>
CC: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>
Verzonden: 14-9-06 17:59
Onderwerp: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03

----- From: "Robert Sparks" <rjsparks@nostrum.com>

> That may be exactly why call-id and cseq were included in the hash in=20
> 3261. Assuming that's so, then
> all we need are bits that change between transactions. The first part  of=
=20
> the via branch parameter would
> be enough.
>
> So, I propose I add text explaining why you SHOULD (do we make this=20
> MUST?) add some set of bits that
> change between requests, and note that either the first part of the  via=
=20
> branch or the combination of call-id
> and cseq would be good choices.

That's quite cunning Jeroen!  I think it can only be SHOULD, because the=20
whole thing is SHOULD and RECOMMENDED etc.

One issue is that this works well for the cryptographic hashes, but I don't=
=20
think it will work for the linear hash I mentioned in an earlier e-mail,=20
i.e.:

for( i=3D0; i<strlen(data); ++i )
    hash =3D hash * MULTIPLIER + data[i];

where MULTIPLIER is 31 or 37.



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 13:11:16 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNuhq-0000Yi-IL; Thu, 14 Sep 2006 13:08:54 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNuhp-0000Yb-GL
	for sip@ietf.org; Thu, 14 Sep 2006 13:08:53 -0400
Received: from smtp1.wanadoo.co.uk ([193.252.22.158] helo=smtp1.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNuho-0000ms-0i
	for sip@ietf.org; Thu, 14 Sep 2006 13:08:53 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3013.me.freeserve.com (SMTP Server) with ESMTP id 64D76B400087; 
	Thu, 14 Sep 2006 19:08:51 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3013.me.freeserve.com (SMTP Server) with SMTP id 1792BB400085; 
	Thu, 14 Sep 2006 19:08:51 +0200 (CEST)
X-ME-UUID: 20060914170851966.1792BB400085@mwinf3013.me.freeserve.com
Message-ID: <005e01c6d820$746a3b70$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>,
	"Robert Sparks" <rjsparks@nostrum.com>
References: <0J5L00LLRBKTJM30@jes-fe2.zx.nl>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Thu, 14 Sep 2006 18:08:48 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 057ebe9b96adec30a7efb2aeda4c26a4
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I don't think CSeq should be included either.  We want information that is 
invariant throughout a session.  By including CSeq there's a chance that one 
request doesn't have a hash collision when doing the loop detection, but a 
subsequent request does.

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================

----- Original Message ----- 
From: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>
To: "Robert Sparks" <rjsparks@nostrum.com>
Cc: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>; "Pete 
Cordell" <pete@tech-know-ware.com>
Sent: Thursday, September 14, 2006 4:06 PM
Subject: RE: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03


Yes, except that using "the via branch" here is tricky: which one do you 
take?

Pre-RFC3261 clients would not insert a branch parameter, so taking the top 
via branch wont always work. Using the branch parameter added by the proxy 
itself is possible, provided that only the "first part" is used. 
Implementors then need to make sure to disect the branch prior to 
calculating the loop hash.

Possible, but easy to get wrong

Jeroen

-----Oorspronkelijk bericht -----
Van: "Robert Sparks" <rjsparks@nostrum.com>
Aan: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>
CC: "Pete Cordell" <pete@tech-know-ware.com>; "Cullen Jennings" 
<fluffy@cisco.com>; "SIP" <sip@ietf.org>
Verzonden: 14-9-06 15:00
Onderwerp: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03

Hrmm. Let me poke at that for a minute.

You would never compare the hashes you created for two different
calls. You only compare hashes for
different instances of the _same request_ reaching the element
multiple times. The only things in the
Via stack when the request reaches you are values placed when _this
request_ went through other element,
and you're checking to see if one of them just happened to be this
element.

The Call-ID is invariant for those comparisons. If you had a perfect
hash, including it would have no effect
on the correctness of the algorithm at all - it would be wasted
effort, which is why we were removing it.

But for a hash that has collisions, including it, or any other set of
bits that change between requests,
shifts where you land in the hash's range, increasing the probability
that you won't encounter the _same_
collision more than once.

That may be exactly why call-id and cseq were included in the hash in
3261. Assuming that's so, then
all we need are bits that change between transactions. The first part
of the via branch parameter would
be enough.

So, I propose I add text explaining why you SHOULD (do we make this
MUST?) add some set of bits that
change between requests, and note that either the first part of the
via branch or the combination of call-id
and cseq would be good choices.

RjS

On Sep 14, 2006, at 5:20 AM, Jeroen Van Bemmel wrote:

>
> I suppose one issue is that if you do happen to be the 20 billionth
> person
> trying to make such a call, then your call will fail every time,
> which may
> be a bad effect.
>
> (jvb) And THAT'S the reason to include the call-id in the hash: to
> ensure that an unlucky caller does not suffer the same fate twice
> (or rather: to make it very unlikely)
>
> Jeroen



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 13:35:43 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNv5x-0004ny-6T; Thu, 14 Sep 2006 13:33:49 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNv5u-0004nt-Tg
	for sip@ietf.org; Thu, 14 Sep 2006 13:33:46 -0400
Received: from smtp1.wanadoo.co.uk ([193.252.22.158] helo=smtp1.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNv5t-00046f-FE
	for sip@ietf.org; Thu, 14 Sep 2006 13:33:46 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3012.me.freeserve.com (SMTP Server) with ESMTP id E0A791C00089; 
	Thu, 14 Sep 2006 19:33:44 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3012.me.freeserve.com (SMTP Server) with SMTP id 9765F1C00088; 
	Thu, 14 Sep 2006 19:33:44 +0200 (CEST)
X-ME-UUID: 20060914173344620.9765F1C00088@mwinf3012.me.freeserve.com
Message-ID: <008c01c6d823$ee98e3d0$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>,
	"Robert Sparks" <rjsparks@nostrum.com>
References: <0J5L00L28GI2JL40@jes-fe2.zx.nl>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Thu, 14 Sep 2006 18:29:20 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: f66b12316365a3fe519e75911daf28a8
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Jeroen,

I don't think it fixes it I'm afraid!  Assuming your + operator is regular 
addition (modulo 32 or what ever):

If:
    HASH(routing info1) + HASH( call-id1 ) == HASH(routing info2) + HASH( 
call-id1 )

then:
    HASH(routing info1)  == HASH(routing info2)

Therefore:
     HASH(routing info1) + HASH( call-id2 ) == HASH(routing info2) + HASH( 
call-id2 )

Does that make sense or have I missed something?

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================

----- Original Message ----- 
From: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>
To: "Pete Cordell" <pete@tech-know-ware.com>; "Robert Sparks" 
<rjsparks@nostrum.com>
Cc: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>
Sent: Thursday, September 14, 2006 5:52 PM
Subject: RE: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03


Pete,

I use djb2 (a linear hash) with loop-hash = HASH(routing info) + HASH( 
call-id ), modulo 2^32 (or 64)

So no concatenation. I guess this avoids the issue you mentioned.

Regards,
Jeroen

-----Oorspronkelijk bericht -----
Van: "Pete Cordell" <pete@tech-know-ware.com>
Aan: "Robert Sparks" <rjsparks@nostrum.com>; "Jeroen Van Bemmel" 
<jbemmel@zonnet.nl>
CC: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>
Verzonden: 14-9-06 17:59
Onderwerp: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03

----- From: "Robert Sparks" <rjsparks@nostrum.com>

> That may be exactly why call-id and cseq were included in the hash in
> 3261. Assuming that's so, then
> all we need are bits that change between transactions. The first part  of
> the via branch parameter would
> be enough.
>
> So, I propose I add text explaining why you SHOULD (do we make this
> MUST?) add some set of bits that
> change between requests, and note that either the first part of the  via
> branch or the combination of call-id
> and cseq would be good choices.

That's quite cunning Jeroen!  I think it can only be SHOULD, because the
whole thing is SHOULD and RECOMMENDED etc.

One issue is that this works well for the cryptographic hashes, but I don't
think it will work for the linear hash I mentioned in an earlier e-mail,
i.e.:

for( i=0; i<strlen(data); ++i )
    hash = hash * MULTIPLIER + data[i];

where MULTIPLIER is 31 or 37.



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 14:09:33 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNvc5-00054A-UH; Thu, 14 Sep 2006 14:07:01 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNvc4-000545-F6
	for sip@ietf.org; Thu, 14 Sep 2006 14:07:00 -0400
Received: from smtp4.versatel.nl ([62.58.50.91])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNvc2-0008Ms-V5
	for sip@ietf.org; Thu, 14 Sep 2006 14:07:00 -0400
Received: (qmail 20081 invoked by uid 0); 14 Sep 2006 18:06:36 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp4.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 14 Sep 2006 18:06:36 -0000
Message-ID: <001401c6d828$88493b70$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Pete Cordell" <pete@tech-know-ware.com>,
	"Robert Sparks" <rjsparks@nostrum.com>
References: <0J5L00L28GI2JL40@jes-fe2.zx.nl>
	<008c01c6d823$ee98e3d0$5000a8c0@RW>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Thu, 14 Sep 2006 20:06:39 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 825e642946eda55cd9bc654a36dab8c2
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Pete,

No, you're right - after I sent that e-mail, I realized it has the same 
problem.

What might work is HASH( routing-info ^ call-id ), where '^' is defined over 
individual characters ie
HASH( r[0] ^ c[0] : r[1] ^ c[1] ... )

Recommendation could be to either use a non-linear hash function, or take 
care to mix in the call-id in a non-linear way

Regards,

Jeroen

----- Original Message ----- 
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>; "Robert Sparks" 
<rjsparks@nostrum.com>
Cc: "SIP" <sip@ietf.org>
Sent: Thursday, September 14, 2006 7:29 PM
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03


> Hi Jeroen,
>
> I don't think it fixes it I'm afraid!  Assuming your + operator is regular 
> addition (modulo 32 or what ever):
>
> If:
>    HASH(routing info1) + HASH( call-id1 ) == HASH(routing info2) + HASH( 
> call-id1 )
>
> then:
>    HASH(routing info1)  == HASH(routing info2)
>
> Therefore:
>     HASH(routing info1) + HASH( call-id2 ) == HASH(routing info2) + 
> HASH( call-id2 )
>
> Does that make sense or have I missed something?
>
> Pete.
> --
> =============================================
> Pete Cordell
> Tech-Know-Ware Ltd
>                         for XML to C++ data binding visit
>                         http://www.tech-know-ware.com/lmx
>                         (or http://www.xml2cpp.com)
> =============================================
>
> ----- Original Message ----- 
> From: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>
> To: "Pete Cordell" <pete@tech-know-ware.com>; "Robert Sparks" 
> <rjsparks@nostrum.com>
> Cc: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>
> Sent: Thursday, September 14, 2006 5:52 PM
> Subject: RE: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
>
>
> Pete,
>
> I use djb2 (a linear hash) with loop-hash = HASH(routing info) + HASH( 
> call-id ), modulo 2^32 (or 64)
>
> So no concatenation. I guess this avoids the issue you mentioned.
>
> Regards,
> Jeroen
>
> -----Oorspronkelijk bericht -----
> Van: "Pete Cordell" <pete@tech-know-ware.com>
> Aan: "Robert Sparks" <rjsparks@nostrum.com>; "Jeroen Van Bemmel" 
> <jbemmel@zonnet.nl>
> CC: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>
> Verzonden: 14-9-06 17:59
> Onderwerp: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
>
> ----- From: "Robert Sparks" <rjsparks@nostrum.com>
>
>> That may be exactly why call-id and cseq were included in the hash in
>> 3261. Assuming that's so, then
>> all we need are bits that change between transactions. The first part  of
>> the via branch parameter would
>> be enough.
>>
>> So, I propose I add text explaining why you SHOULD (do we make this
>> MUST?) add some set of bits that
>> change between requests, and note that either the first part of the  via
>> branch or the combination of call-id
>> and cseq would be good choices.
>
> That's quite cunning Jeroen!  I think it can only be SHOULD, because the
> whole thing is SHOULD and RECOMMENDED etc.
>
> One issue is that this works well for the cryptographic hashes, but I 
> don't
> think it will work for the linear hash I mentioned in an earlier e-mail,
> i.e.:
>
> for( i=0; i<strlen(data); ++i )
>    hash = hash * MULTIPLIER + data[i];
>
> where MULTIPLIER is 31 or 37.
>
>
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>
> 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 14:29:04 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNvur-0005xC-1W; Thu, 14 Sep 2006 14:26:25 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNvup-0005x4-Fu
	for sip@ietf.org; Thu, 14 Sep 2006 14:26:23 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNvuo-00039o-63
	for sip@ietf.org; Thu, 14 Sep 2006 14:26:23 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 14 Sep 2006 14:26:22 -0400
X-IronPort-AV: i="4.09,166,1157342400"; 
	d="scan'208"; a="102455501:sNHT58845142"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8EIQL8g020430; Thu, 14 Sep 2006 14:26:21 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8EIQHdQ018665; 
	Thu, 14 Sep 2006 14:26:20 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 14 Sep 2006 14:26:18 -0400
Received: from [161.44.55.75] ([161.44.55.75]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 14 Sep 2006 14:26:17 -0400
Message-ID: <45099EC9.9000202@cisco.com>
Date: Thu, 14 Sep 2006 14:26:17 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: "Jesske, R" <R.Jesske@t-com.net>
Subject: Re: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
References: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>
In-Reply-To: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 14 Sep 2006 18:26:17.0887 (UTC)
	FILETIME=[44F702F0:01C6D82B]
DKIM-Signature: a=rsa-sha1; q=dns; l=2141; t=1158258381; x=1159122381;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20AW=3A=20[Sip]=20SIP=20WGLC=20=20Draft=20draft-ietf-sip-acr-code-
	02.txt |To:=22Jesske,=20R=22=20<R.Jesske@t-com.net>;
	X=v=3Dcisco.com=3B=20h=3DbXiAxb+WCc9S6/tVgdejnUVOHto=3D;
	b=IdAqohOGVRwF9inxOZeDgLwUWQ6LDode2NbbBtkWfkvxsaPHrQd9Sbhlat8p4xtvNAVO6ZqJ
	FSopmJJFNjrvHInptZrBy7y5ikaO7VVPfbqgPgCh62EJEmlxeoPOOxEI;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 50a516d93fd399dc60588708fd9a3002
Cc: sip@ietf.org, esasaki@NTT-AT.COM, drage@lucent.com,
	dean.willis@softarmor.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Jesske, R wrote:

> The discussion shows how privacy could be interpreted. At least with
> the 'header' privacy the origin user expresses that he want to be
> anonymous. So it is an intension of the user. Of course the privacy
> server can strip of the privacy value but that is due to the Provider
> of the server. Within RFC3323 I didn't found something that says that
> if you have privacy performed that you have to delete the privacy
> header itself.

 From RFC3323:

>  When a privacy service performs one of the functions corresponding to
>    a privacy level listed in the Privacy header, it SHOULD remove the
>    corresponding priv-value from the Privacy header - otherwise, any
>    other privacy service involved with routing this message might
>    unnecessarily apply the same function, which in many cases would be
>    undesirable.  When the last priv-value (not counting 'critical') has
>    been removed from the Privacy header, the entire Privacy header MUST
>    be removed from a message.



> 
> I'm against that we explicitly exclude the 'header' value for a
> reason to send the 433 Response.

I'm not strongly opposed to it; I just think the semantics of the ACR 
service are more strongly coupled to the presentation identity, and not 
other information in the request. For example, what if a user sent a 
request that did NOT utilize id privacy, but did have header privacy? In 
such a case, the call would be delivered to the called party with 
P-Asserted-ID, though would lack identifying information (like IP 
address) in the Contact. Is this an anonymous request? From the 
perspective of the called party, certainly not. Anonymity is only 
observable to the called party through the 'id' Privacy tag, NOT the 
header tag.

Thanks,
Jonathan R.
-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 14:32:25 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNvzH-0007xB-S6; Thu, 14 Sep 2006 14:30:59 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNvzG-0007w9-IV
	for sip@ietf.org; Thu, 14 Sep 2006 14:30:58 -0400
Received: from nylon.softarmor.com ([66.135.38.164])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNvzE-0003sX-8U
	for sip@ietf.org; Thu, 14 Sep 2006 14:30:58 -0400
Received: from [64.101.149.220] (deawilli-t42ciscocom-1.cisco.com
	[64.101.149.220]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.1/8.13.1) with ESMTP id k8EHXYe6016355
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Thu, 14 Sep 2006 12:33:35 -0500
Message-ID: <45099F5D.8000904@softarmor.com>
Date: Thu, 14 Sep 2006 13:28:45 -0500
From: Dean Willis <dean.willis@softarmor.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060719)
MIME-Version: 1.0
To: "Jesske, R" <R.Jesske@t-com.net>
Subject: Re: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
References: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>
In-Reply-To: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d6b246023072368de71562c0ab503126
Cc: sip@ietf.org, esasaki@NTT-AT.COM, drage@lucent.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Jesske, R wrote:
> At least with the 'header' privacy the origin user expresses that he want to be anonymous. So it is an intension of the user. 
> Of course the privacy server can strip of the privacy value but that is due to the Provider of the server. Within RFC3323 I didn't found something that says that if you have privacy performed that you have to delete the privacy header itself.

Does it? Do we have real scenarios where the "header" privacy option 
does NOT imply that the originating user desires anonymity?

Or is the case where a call goes out with a "header" privacy value, but 
includes an authenticated identity body or other non-header identity 
mechanism simply an error?

If it is an error, what needs to be corrected, in terms of

1) Changing any specifications?

2) Run-time detection of and response to the error condition?

--
dean

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 15:26:14 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNwo8-0005Ui-Cw; Thu, 14 Sep 2006 15:23:32 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNwo7-0005UC-3R
	for sip@ietf.org; Thu, 14 Sep 2006 15:23:31 -0400
Received: from smtp1.wanadoo.co.uk ([193.252.22.158] helo=smtp1.freeserve.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNwo5-0004It-FI
	for sip@ietf.org; Thu, 14 Sep 2006 15:23:31 -0400
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf3002.me.freeserve.com (SMTP Server) with ESMTP id 9E1941C00146; 
	Thu, 14 Sep 2006 21:23:28 +0200 (CEST)
Received: from RW (user-5445210e.lns4-c11.dsl.pol.co.uk [84.69.33.14])
	by mwinf3002.me.freeserve.com (SMTP Server) with SMTP id 8B82E1C00145; 
	Thu, 14 Sep 2006 21:23:27 +0200 (CEST)
X-ME-UUID: 20060914192327571.8B82E1C00145@mwinf3002.me.freeserve.com
Message-ID: <000a01c6d833$422d6200$5000a8c0@RW>
From: "Pete Cordell" <pete@tech-know-ware.com>
To: "Jeroen van Bemmel" <jbemmel@zonnet.nl>,
	"Robert Sparks" <rjsparks@nostrum.com>
References: <0J5L00L28GI2JL40@jes-fe2.zx.nl><008c01c6d823$ee98e3d0$5000a8c0@RW>
	<001401c6d828$88493b70$0601a8c0@BEMBUSTER>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Thu, 14 Sep 2006 20:22:29 +0100
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 48472a944c87678fcfe8db15ffecdfff
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Jeroen,

For me I think something like the following would work and is efficient (if 
I feel inspired tomorrow I might compare its efficiency with an MD-5 
implementation):-

    unsigned int hash = 0;
    int i;
    for( i=0; r[i] != '\0' && c[i] != '\0'; ++i ) {
        hash = hash * 33 + r[i] ^ c[i];
    }

    if( r[i] != '\0' ) {
        for( ; r[i] != '\0'; ++i ) {
            hash = hash * 33 + r[i];
        }
    }
    else if( c[i] != '\0' ) {
        for( ; c[i] != '\0'; ++i ) {
            hash = hash * 33 + c[i];
        }
    }

As a note, I imagine that in most cases the Call-Id string (c[]) will be 
shorter than the concatenated routing information (r[]), but I think it's 
important to work in the whole of the Call-Id into the hash even if that's 
not the case to allow for the two sessions' Call-Ids to share the same 
initial characters.

That's all low level implementation though, and I don't think it really 
belongs in an RFC.  (Some may even think it doesn't belong on this mailing 
list!)

So once again, I'm not sure where that leaves the loop-fix draft!

Pete.
--
=============================================
Pete Cordell
Tech-Know-Ware Ltd
                         for XML to C++ data binding visit
                         http://www.tech-know-ware.com/lmx
                         (or http://www.xml2cpp.com)
=============================================

----- Original Message ----- 
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Pete Cordell" <pete@tech-know-ware.com>; "Robert Sparks" 
<rjsparks@nostrum.com>
Cc: "SIP" <sip@ietf.org>
Sent: Thursday, September 14, 2006 7:06 PM
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03


> Hi Pete,
>
> No, you're right - after I sent that e-mail, I realized it has the same 
> problem.
>
> What might work is HASH( routing-info ^ call-id ), where '^' is defined 
> over individual characters ie
> HASH( r[0] ^ c[0] : r[1] ^ c[1] ... )
>
> Recommendation could be to either use a non-linear hash function, or take 
> care to mix in the call-id in a non-linear way
>
> Regards,
>
> Jeroen
>
> ----- Original Message ----- 
> From: "Pete Cordell" <pete@tech-know-ware.com>
> To: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>; "Robert Sparks" 
> <rjsparks@nostrum.com>
> Cc: "SIP" <sip@ietf.org>
> Sent: Thursday, September 14, 2006 7:29 PM
> Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
>
>
>> Hi Jeroen,
>>
>> I don't think it fixes it I'm afraid!  Assuming your + operator is 
>> regular addition (modulo 32 or what ever):
>>
>> If:
>>    HASH(routing info1) + HASH( call-id1 ) == HASH(routing info2) + 
>> HASH( call-id1 )
>>
>> then:
>>    HASH(routing info1)  == HASH(routing info2)
>>
>> Therefore:
>>     HASH(routing info1) + HASH( call-id2 ) == HASH(routing info2) + 
>> HASH( call-id2 )
>>
>> Does that make sense or have I missed something?
>>
>> Pete.
>> --
>> =============================================
>> Pete Cordell
>> Tech-Know-Ware Ltd
>>                         for XML to C++ data binding visit
>>                         http://www.tech-know-ware.com/lmx
>>                         (or http://www.xml2cpp.com)
>> =============================================
>>
>> ----- Original Message ----- 
>> From: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>
>> To: "Pete Cordell" <pete@tech-know-ware.com>; "Robert Sparks" 
>> <rjsparks@nostrum.com>
>> Cc: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>
>> Sent: Thursday, September 14, 2006 5:52 PM
>> Subject: RE: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
>>
>>
>> Pete,
>>
>> I use djb2 (a linear hash) with loop-hash = HASH(routing info) + HASH( 
>> call-id ), modulo 2^32 (or 64)
>>
>> So no concatenation. I guess this avoids the issue you mentioned.
>>
>> Regards,
>> Jeroen
>>
>> -----Oorspronkelijk bericht -----
>> Van: "Pete Cordell" <pete@tech-know-ware.com>
>> Aan: "Robert Sparks" <rjsparks@nostrum.com>; "Jeroen Van Bemmel" 
>> <jbemmel@zonnet.nl>
>> CC: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>
>> Verzonden: 14-9-06 17:59
>> Onderwerp: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
>>
>> ----- From: "Robert Sparks" <rjsparks@nostrum.com>
>>
>>> That may be exactly why call-id and cseq were included in the hash in
>>> 3261. Assuming that's so, then
>>> all we need are bits that change between transactions. The first part 
>>> of
>>> the via branch parameter would
>>> be enough.
>>>
>>> So, I propose I add text explaining why you SHOULD (do we make this
>>> MUST?) add some set of bits that
>>> change between requests, and note that either the first part of the  via
>>> branch or the combination of call-id
>>> and cseq would be good choices.
>>
>> That's quite cunning Jeroen!  I think it can only be SHOULD, because the
>> whole thing is SHOULD and RECOMMENDED etc.
>>
>> One issue is that this works well for the cryptographic hashes, but I 
>> don't
>> think it will work for the linear hash I mentioned in an earlier e-mail,
>> i.e.:
>>
>> for( i=0; i<strlen(data); ++i )
>>    hash = hash * MULTIPLIER + data[i];
>>
>> where MULTIPLIER is 31 or 37.
>>
>>
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>
>>
>
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 15:37:33 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNwzs-00021p-6i; Thu, 14 Sep 2006 15:35:40 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNwzq-00021k-Lm
	for sip@ietf.org; Thu, 14 Sep 2006 15:35:38 -0400
Received: from [204.200.195.236] (helo=personeta.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNwzl-0006wo-DR
	for sip@ietf.org; Thu, 14 Sep 2006 15:35:38 -0400
Received: from adii ([66.244.166.124]) (authenticated bits=0)
	by personeta.com (8.13.6.20060614/8.13.1) with ESMTP id k8EJZW47066784; 
	Thu, 14 Sep 2006 19:35:32 GMT
Message-Id: <200609141935.k8EJZW47066784@personeta.com>
From: "adi" <adi@personeta.com>
To: "'Maheswari D'" <dmaheswa@yahoo.com>, <sip@ietf.org>
Subject: RE: [Sip] P-Asserted Value syntax
Date: Thu, 14 Sep 2006 22:34:43 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0D192F1F@zrc2hxm0.corp.nortel.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcbXQNCWF4jhET+pSHyYVblCz8nRbQACuSSgADoJ0XA=
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d185fa790257f526fedfd5d01ed9c976
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

In the first case you may use the "tel:" with the phone number

-----Original Message-----
From: Francois Audet [mailto:audet@nortel.com] 
Sent: Wednesday, September 13, 2006 6:54 PM
To: Maheswari D; sip@ietf.org
Subject: RE: [Sip] P-Asserted Value syntax

First one is wrong as it would require a phone-context or a "+"
parameter to
be RFC 3966 compliant (which is what user=phone means).

So Assuming your intent was for 213 == Algeria's country code, it would
look
like:

P-Asserted-Identity:<sip:+213106404@10.9.34.10:5061;user=phone>

If on the othe hand, this was a private 9-digit number used inside
an enterprise (say, example.com), it could look like:

P-Asserted-Identity:<sip:213106404;phone-context=example.com@10.9.34.10:
5061;user=phone>

---

Second one is technically correct. However, instead of being a phone 
number it means a user name (there is no user=phone parameter) which may

not make much sense outside one's network. If you send it to me and we 
are in different domains, to me the number is just a user-name that only
make sense at 10.9.34.10.


For both case, it would normally make more sense to use a domain name
instead of an IP address.
  

> -----Original Message-----
> From: Maheswari D [mailto:dmaheswa@yahoo.com] 
> Sent: Wednesday, September 13, 2006 3:48 AM
> To: sip@ietf.org
> Subject: [Sip] P-Asserted Value syntax
> 
> Hello All,
> 
> Can you please clarify if the following P-Asserted value are 
> according to the RFC standard.
> 
> 1)P-Asserted-Identity:<sip:213106404@10.9.34.10:5061;user=phone>
> 2)P-Asserted-Identity:sip:213106404@10.9.34.10:5061 
> 
> RFC shows examples only for the mail address with the tag 
> like follows:
> P-Asserted-Identity: <sip:fluffy@cisco.com>
> 
> If the above 2 syntax are wrong, can you please guide with 
> the correct syntax.
> 
> Thanks & Regards,
> Maheswari.D
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection 
> around http://mail.yahoo.com 
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use 
> sip-implementors@cs.columbia.edu for questions on current sip 
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 17:49:51 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNz3T-0000mc-HT; Thu, 14 Sep 2006 17:47:31 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNz3R-0000mW-Fv
	for sip@ietf.org; Thu, 14 Sep 2006 17:47:29 -0400
Received: from ihemail4.lucent.com ([135.245.0.39])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNz3P-00061Z-4X
	for sip@ietf.org; Thu, 14 Sep 2006 17:47:29 -0400
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail4.lucent.com (8.13.6/IER-o) with ESMTP id k8ELkj76018478; 
	Thu, 14 Sep 2006 16:46:45 -0500 (CDT)
Received: from [135.185.244.90] (il0015vkg1.ih.lucent.com [135.185.244.90]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k8ELkjE24975; Thu, 14 Sep 2006 16:46:45 -0500 (CDT)
Message-ID: <4509CDC5.9060800@lucent.com>
Date: Thu, 14 Sep 2006 16:46:45 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Tina TSOU <tena@huawei.com>
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs
References: <0J5F00MGZ5MBEX00@jes-fe1.zx.nl>
	<003801c6d571$869d6300$8074a7d9@IBM4307EA0CEF3>
In-Reply-To: <003801c6d571$869d6300$8074a7d9@IBM4307EA0CEF3>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d185fa790257f526fedfd5d01ed9c976
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Tina TSOU wrote:
> See in line with [Tina1: ...].

Tina: Please see inline.

(Tina's email is in its entirety at
http://www1.ietf.org/mail-archive/web/sip/current/msg16278.html;
here I quote her questions).

> [Tina1: Let me re-phrase the question: In the proposed solution in this 
> draft, there is only one
> URI label in the extension, but in the text quoted, there are 2 sips 
> URI. How to map 2 sips URI into only one URI label?
> I am not sure if one sips URI will be matched by URI label, the other 
> URI will be matched by DNS label. But this is not a consistent behavior.]

I think we are talking past one another ... it is not the intent
to map two SIP URIs into one.  All the section you quote is
trying to say is that if a proxy is known through multiple
names (i.e., sips:example.com and sips:downtown.example.com), then
it is expected that it has keying material corresponding to each
identity, and that it presents the right certificate when
contacted.  The draft is trying to argue that a proxy can possess
one certificate with multiple identities to allow cases where
it can present the same certificate when contacted through a
generic URI like "sips:example.com" and a host-specific URI
(that may appear in a Route) like "sips:downtown.example.com".

> [Tina1: as in your example, one domain can have multiple applications 
> such as mail, pres, sips, is it mandatory to have multiple URI labels 
> (one for each application)?]

Yes; see example certificate in sec-flows-01, Section 4.3.

> [Tina1: I feel that the statement "This NATPR and SRV may not yield any 
> RRs" doesn't mean 3263 resolution failed, it only means NAPTR or SRV 
> fails, but A/AAAA lookup will succeed, so 3263 resolution still succeed.]

Yes, you are right.  We should qualify the phrase "RFC3263 resolution
on the URI failed"...

> Also, for sips:downtown.example.com, it may also yield NAPTR RR, say the 
> server want to map this sips URI to TLS over SCTP. As per the rule in 
> draft, if the NAPTR/SRV/A query success, the URI used for query should 
> match the URI label which is sips:example.com in your case, obviously it 
> cannot match. Is anything missed?

In the above case, "sips:downtown.example.com" is a delegated
subdomain, and thus the URI label in its certificate should say
"URI:sips:downtown.example.com" and not "URI:sips:example.com".

> [Tina1: As in the certificate, there is already a DN label which 
> intimates the domain and the domain of URL label is same as DN label, 
> why is the URI label required?]

Do you mean DNS label or DN (Distinguished Name)?  I presume you
meant DNS; if so then this catches the case where you are
sending request through a specific proxy (probably due to R-R).
When you opened a TLS connection to that proxy, it will present
to you a certificate that had the hostname corresponding to the
one that you opened the TLS connection to.

> In section 9, para 3,
> <Quote>Certainly, this means that the domain must share the domain's 
> private key with the hosting service.</Quote>
> 
> Why does the hosting service have to share the same private key? Is it 
> not allowed to have one private key per virtual domain?]

In case of a virtual SIP server, the certificate (and its keying
material) is owned by me, but the server itself is running on a
third party's host.  So I do have to make the keying material
available to the operator...

Thanks,

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 17:53:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNz7T-0003lJ-2E; Thu, 14 Sep 2006 17:51:39 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNz7R-0003lE-No
	for sip@ietf.org; Thu, 14 Sep 2006 17:51:37 -0400
Received: from ihemail4.lucent.com ([135.245.0.39])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNz7P-0006G4-F5
	for sip@ietf.org; Thu, 14 Sep 2006 17:51:37 -0400
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail4.lucent.com (8.13.6/IER-o) with ESMTP id k8ELpYDB020290; 
	Thu, 14 Sep 2006 16:51:34 -0500 (CDT)
Received: from [135.185.244.90] (il0015vkg1.ih.lucent.com [135.185.244.90]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k8ELpYE28027; Thu, 14 Sep 2006 16:51:34 -0500 (CDT)
Message-ID: <4509CEE6.2030106@lucent.com>
Date: Thu, 14 Sep 2006 16:51:34 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] Updated revision of
	connect-reuse	(draft-ietf-sip-connect-reuse-06)
References: <44EA0891.6080909@lucent.com>
	<44EC696A.3010001@cisco.com>	<44EC804B.2020706@lucent.com>
	<EDDAD0E1-4C1C-47AF-B63E-820396603C2F@cisco.com>
In-Reply-To: <EDDAD0E1-4C1C-47AF-B63E-820396603C2F@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7d33c50f3756db14428398e2bdedd581
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   Complete context for this response is at:
   http://www1.ietf.org/mail-archive/web/sip/current/msg16284.html
   Only portions from Cullen's response quoted below.

Cullen Jennings wrote:
> I sort of thought that this document was going to cover TCP as well.  

Cullen: Good; thanks.  I think that'll be very helpful to implementors.

> With TLS, I think we have discussed this in the past and with TCP It  
> won't matter if we end up with the solution 2 from above.

2 it is.  I will rev up the draft.

Thanks.

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 18:49:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNzyJ-0002Eq-Ni; Thu, 14 Sep 2006 18:46:15 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GNzyH-0002El-EM
	for sip@ietf.org; Thu, 14 Sep 2006 18:46:13 -0400
Received: from agnada.com ([69.36.182.244])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GNzyG-0006Hw-2X
	for sip@ietf.org; Thu, 14 Sep 2006 18:46:13 -0400
Received: from [192.168.0.101] (S010600095b9792b5.vc.shawcable.net
	[24.85.243.115]) (authenticated)
	by agnada.com (8.11.6/8.11.6) with ESMTP id k8ELHT831181;
	Thu, 14 Sep 2006 15:17:30 -0600
Message-ID: <4509C6E8.6080503@ntt-at.com>
Date: Thu, 14 Sep 2006 14:17:28 -0700
From: Shida Schubert <shida@ntt-at.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Dean Willis <dean.willis@softarmor.com>
Subject: Re: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
References: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>
	<45099F5D.8000904@softarmor.com>
In-Reply-To: <45099F5D.8000904@softarmor.com>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0fa76816851382eb71b0a882ccdc29ac
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org, drage@lucent.com,
	esasaki@ntt-at.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
Reply-To: shida@ntt-at.com
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


I personally think RFC3323 is underspecified with what headers to
be obscured per privacy value. Interestingly though I found the text in
IANA consideration that is concise about what each privacy value's
intent.

"Text from the IANA consideration of RFC3323

   o  user: Request that privacy services provide a user-level privacy
      function

   o  header: Request that privacy services modify headers that cannot
      be set arbitrarily by the user (Contact/Via)."

Considering the text above, if "header" was set any headers that can not
be set
arbitrarily by the user needs to be obscured/modified by the privacy
services, which
I believe would include P-A-ID as well.

If that's the case, requesting "header" would naturally mean requesting
anonymity, as the
domain supporting P-A-ID would alter the value of the P-A-ID to be
anonymous as the
text in IANA suggests.

My original interpretation of "header" privacy value was actually quite
different. I saw
the "header privacy" as a way for UA to request some sort of topology
hiding
(obscuring Contact, via, headers revealing a path to the UA etc.).
With that interpretation, I could see a scenario where "header" privacy
option does NOT
imply that the originating user desires anonymity(e.g. I call my client,
I want to show them
who I am but not wanting them to find out I am calling from home.). But
this can not hold true if the domain provides P-A-ID as "header' privacy
value will
modify the header to obscure the identity of the user, thus making it an
anonymous call.

Regards
Shida

Dean Willis wrote:
> Jesske, R wrote:
>> At least with the 'header' privacy the origin user expresses that he
>> want to be anonymous. So it is an intension of the user. Of course
>> the privacy server can strip of the privacy value but that is due to
>> the Provider of the server. Within RFC3323 I didn't found something
>> that says that if you have privacy performed that you have to delete
>> the privacy header itself.
>
> Does it? Do we have real scenarios where the "header" privacy option
> does NOT imply that the originating user desires anonymity?
>
> Or is the case where a call goes out with a "header" privacy value,
> but includes an authenticated identity body or other non-header
> identity mechanism simply an error?
>
> If it is an error, what needs to be corrected, in terms of
>
> 1) Changing any specifications?
>
> 2) Run-time detection of and response to the error condition?
>
> -- 
> dean
>
> _______________________________________________
> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>
>


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 14 20:21:54 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GO1QW-0007ow-49; Thu, 14 Sep 2006 20:19:28 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GO1QT-0007lk-QS
	for sip@ietf.org; Thu, 14 Sep 2006 20:19:25 -0400
Received: from zrtps0kn.nortel.com ([47.140.192.55])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GO1Nh-00067f-Gs
	for sip@ietf.org; Thu, 14 Sep 2006 20:16:34 -0400
Received: from zrc2hxm2.corp.nortel.com (zrc2hxm2.corp.nortel.com
	[47.103.123.73])
	by zrtps0kn.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8F0GQv17632
	for <sip@ietf.org>; Thu, 14 Sep 2006 20:16:26 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 14 Sep 2006 19:16:26 -0500
Message-ID: <62B9B0847CC47543B6B3B5E26BD268E60E74621B@zrc2hxm2.corp.nortel.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Another Comment on draft-audet-sip-sips-guidelines-03 w.r.t.
	telURI etc
Thread-index: AcbYXC7PHan5wMNeTauBmlZOGpTeFw==
From: "Samir Srivastava" <samirsr@nortel.com>
To: <sip@ietf.org>
X-Spam-Score: 0.1 (/)
X-Scan-Signature: b7b9551d71acde901886cc48bfc088a6
Subject: [Sip] Another Comment on draft-audet-sip-sips-guidelines-03 w.r.t.
	telURI etc
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1083679128=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1083679128==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6D85C.2E95E3BC"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6D85C.2E95E3BC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

1) In section 5, it makes following statement
"However, if an SIPS AOR is used, a SIPS Contact MUST also be used. If a
SIP AOR is used, a SIP Contact MUST also be used. Those are mechanical
rules with no influence on routing. "
Which doesn't allow the mailto and tel URL registration for SIPS and
SIP. Atleast It should have allowed the telURI and mailto for SIP.=20
Refer the following from section 10.2.1 of 3261
"A SIP UA can choose to register telephone numbers (with the tel URL,
RFC 2806 [9]) or email addresses (with a mailto URL, RFC 2368 [32]) as
Contacts for an address-of-record, for example."=20
Why we are restricting this...
2) Now the big question 3261, in section 8.1.1.2 gives an example of 411
with telURI to be interpreted by the visitor domain proxy (not to be
interpreted by the home domain proxy with airport example ) How can we
route it securly ?


Thx
Samir=20



------_=_NextPart_001_01C6D85C.2E95E3BC
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7651.14">
<TITLE>Another Comment on draft-audet-sip-sips-guidelines-03 w.r.t. =
telURI etc</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT FACE=3D"Times New Roman">1) In section 5, it makes following =
statement</FONT>

<BR><FONT FACE=3D"Times New Roman">&quot;However, if an SIPS AOR is =
used, a SIPS Contact MUST also be used. If a SIP AOR is used, a SIP =
Contact MUST also be used. Those are mechanical rules with no influence =
on routing. &quot;</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Which doesn't allow the mailto and tel =
URL registration for SIPS and SIP. Atleast It should have allowed the =
telURI and mailto for SIP. </FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Refer the following from section 10.2.1 =
of 3261</FONT>

<BR><FONT FACE=3D"Times New Roman">&quot;A SIP UA can choose to register =
telephone numbers (with the tel URL, RFC 2806 [9]) or email addresses =
(with a mailto URL, RFC 2368 [32]) as Contacts for an address-of-record, =
for example.&quot; </FONT></P>

<P><FONT FACE=3D"Times New Roman">Why we are restricting this...</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">2) Now the big question 3261, in =
section 8.1.1.2 gives an example of 411 with telURI to be interpreted by =
the visitor domain proxy (not to be interpreted by the home domain proxy =
with airport example ) How can we route it securly ?</FONT></P>
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">Thx</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">Samir </FONT>
</P>
<BR>

</BODY>
</HTML>
------_=_NextPart_001_01C6D85C.2E95E3BC--


--===============1083679128==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1083679128==--




From sip-bounces@ietf.org Thu Sep 14 23:08:02 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GO40Q-0006YW-QS; Thu, 14 Sep 2006 23:04:42 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GO40Q-0006WO-Ae
	for sip@ietf.org; Thu, 14 Sep 2006 23:04:42 -0400
Received: from alnrmhc13.comcast.net ([204.127.225.93])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GO40P-0004Zx-3y
	for sip@ietf.org; Thu, 14 Sep 2006 23:04:42 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc13) with ESMTP
	id <20060915030440b1300paht7e>; Fri, 15 Sep 2006 03:04:40 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8F34d1f004297
	for <sip@ietf.org>; Thu, 14 Sep 2006 23:04:39 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8F34bZ1004293;
	Thu, 14 Sep 2006 23:04:37 -0400
Date: Thu, 14 Sep 2006 23:04:37 -0400
Message-Id: <200609150304.k8F34bZ1004293@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <748A109E-43E5-4375-B641-5BBE7EEE8889@softarmor.com>
	(dean.willis@softarmor.com)
Subject: Re: [Sip] GRUU and Anonymity
References: <1ECE0EB50388174790F9694F77522CCF0D14445F@zrc2hxm0.corp.nortel.com>
	<748A109E-43E5-4375-B641-5BBE7EEE8889@softarmor.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 79899194edc4f33a41f49410777972f8
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Dean Willis <dean.willis@softarmor.com>

   Question: Does this conundrum mean we should not advance GRUU until  
   we figure out something that might work?

I believe strongly that the answer is "No", that we can and should
advance the GRUU I-D now, as doing so will be valuable immediately,
and no one has even claimed that doing so will interfere with a
suitably prvacy-enhanced contact URI in the future.

In regard to my proposed scheme for generating TRUUs, I'm not
surprised that it has weaknesses.  The point is that if I can solve a
significant fraction of the TRUU problem with literally a few minutes'
thought, it should be possible for someone versed in crypto
engineering to devise a real solution which we can advance as a
successor/extension of the GRUU I-D.

"This is not the problem we're solving today..."

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 00:38:17 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GO5Pi-0000yS-Id; Fri, 15 Sep 2006 00:34:54 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GO5Ph-0000yN-QF
	for sip@ietf.org; Fri, 15 Sep 2006 00:34:53 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GO5Pf-00049E-8b
	for sip@ietf.org; Fri, 15 Sep 2006 00:34:53 -0400
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 14 Sep 2006 21:34:50 -0700
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8F4Yo2k018059; Thu, 14 Sep 2006 21:34:50 -0700
Received: from xbh-sjc-211.amer.cisco.com (xbh-sjc-211.cisco.com
	[171.70.151.144])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8F4YnQV005576;
	Thu, 14 Sep 2006 21:34:49 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 14 Sep 2006 21:34:49 -0700
Received: from [10.32.241.148] ([10.32.241.148]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 14 Sep 2006 21:34:49 -0700
Message-ID: <450A2D66.2020209@cisco.com>
Date: Fri, 15 Sep 2006 00:34:46 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: shida@ntt-at.com
Subject: Re: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
References: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>	<45099F5D.8000904@softarmor.com>
	<4509C6E8.6080503@ntt-at.com>
In-Reply-To: <4509C6E8.6080503@ntt-at.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Sep 2006 04:34:49.0245 (UTC)
	FILETIME=[476E1CD0:01C6D880]
DKIM-Signature: a=rsa-sha1; q=dns; l=4139; t=1158294890; x=1159158890;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20AW=3A=20[Sip]=20SIP=20WGLC=20=20Draft=20draft-ietf-sip-acr-code-
	02.txt;
	X=v=3Dcisco.com=3B=20h=3D6mrwOKhznu729dLtV7sqN5zsyV4=3D;
	b=bXhaL6ySZjsd9zFMMAnC3CXtrU+QRnASCqW4OsyxBZNN+dAvMWYJC5doeGmdxsUUpRS6cAL2
	UtCW/4Y3fauiwS6N4+jGGTQg0T0hBAjVqZFkMzn3UyYfT4AbH00c0xbe;
Authentication-Results: sj-dkim-2.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: a7d2e37451f7f22841e3b6f40c67db0f
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org, drage@lucent.com,
	esasaki@ntt-at.com, Dean Willis <dean.willis@softarmor.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

This is a good point.

I did not think that the 'header' value applied to P-Asserted-ID.
Rather, the 'id' value does, which is defined specifically for this
purpose in RFC 3325. However I agree with you that *if* 'header' implied
removal of P-Asserted-ID, it becomes a superset of 'id' and then it
should be added to the list of things that define an anonymous call.

Perhaps Jon P. can comment on whether the intent was for 'header'
privacy to apply to P-Asserted-ID?

-Jonathan R.

Shida Schubert wrote:
> I personally think RFC3323 is underspecified with what headers to
> be obscured per privacy value. Interestingly though I found the text in
> IANA consideration that is concise about what each privacy value's
> intent.
> 
> "Text from the IANA consideration of RFC3323
> 
>    o  user: Request that privacy services provide a user-level privacy
>       function
> 
>    o  header: Request that privacy services modify headers that cannot
>       be set arbitrarily by the user (Contact/Via)."
> 
> Considering the text above, if "header" was set any headers that can not
> be set
> arbitrarily by the user needs to be obscured/modified by the privacy
> services, which
> I believe would include P-A-ID as well.
> 
> If that's the case, requesting "header" would naturally mean requesting
> anonymity, as the
> domain supporting P-A-ID would alter the value of the P-A-ID to be
> anonymous as the
> text in IANA suggests.
> 
> My original interpretation of "header" privacy value was actually quite
> different. I saw
> the "header privacy" as a way for UA to request some sort of topology
> hiding
> (obscuring Contact, via, headers revealing a path to the UA etc.).
> With that interpretation, I could see a scenario where "header" privacy
> option does NOT
> imply that the originating user desires anonymity(e.g. I call my client,
> I want to show them
> who I am but not wanting them to find out I am calling from home.). But
> this can not hold true if the domain provides P-A-ID as "header' privacy
> value will
> modify the header to obscure the identity of the user, thus making it an
> anonymous call.
> 
> Regards
> Shida
> 
> Dean Willis wrote:
> 
>>Jesske, R wrote:
>>
>>>At least with the 'header' privacy the origin user expresses that he
>>>want to be anonymous. So it is an intension of the user. Of course
>>>the privacy server can strip of the privacy value but that is due to
>>>the Provider of the server. Within RFC3323 I didn't found something
>>>that says that if you have privacy performed that you have to delete
>>>the privacy header itself.
>>
>>Does it? Do we have real scenarios where the "header" privacy option
>>does NOT imply that the originating user desires anonymity?
>>
>>Or is the case where a call goes out with a "header" privacy value,
>>but includes an authenticated identity body or other non-header
>>identity mechanism simply an error?
>>
>>If it is an error, what needs to be corrected, in terms of
>>
>>1) Changing any specifications?
>>
>>2) Run-time detection of and response to the error condition?
>>
>>-- 
>>dean
>>
>>_______________________________________________
>>Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
>>This list is for NEW development of the core SIP Protocol
>>Use sip-implementors@cs.columbia.edu for questions on current sip
>>Use sipping@ietf.org for new developments on the application of sip
>>
>>
> 
> 
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 03:37:09 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GO8Cq-000253-Uf; Fri, 15 Sep 2006 03:33:48 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GO8Cp-00022n-8D
	for sip@ietf.org; Fri, 15 Sep 2006 03:33:47 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GO8Cn-0000in-O7
	for sip@ietf.org; Fri, 15 Sep 2006 03:33:47 -0400
Received: from S4DE8PSAANQ.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Fri, 15 Sep 2006 09:33:42 +0200
Received: by S4DE8PSAANQ.blf.telekom.de with Internet Mail Service
	(5.5.2653.19) id <SVR0MCAS>; Fri, 15 Sep 2006 09:33:42 +0200
Message-Id: <85108216918A984C8C60172D7C84770A56F697@S4DE8PSAAGO.mitte.t-com.de>
From: "Jesske, R" <R.Jesske@t-com.net>
To: jdrosen@cisco.com
Subject: AW: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Date: Fri, 15 Sep 2006 09:33:37 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7fa173a723009a6ca8ce575a65a5d813
Cc: sip@ietf.org, esasaki@NTT-AT.COM, drage@lucent.com,
	dean.willis@softarmor.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



> -----Urspr=FCngliche Nachricht-----
> Von: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Gesendet: Donnerstag, 14. September 2006 20:26
> An: Jesske, Roland
> Cc: sip@ietf.org; esasaki@NTT-AT.COM; drage@lucent.com;=20
> dean.willis@softarmor.com
> Betreff: Re: AW: [Sip] SIP WGLC Draft draft-ietf-sip-acr-code-02.txt
>=20
>=20
>=20
>=20
> Jesske, R wrote:
>=20
> > The discussion shows how privacy could be interpreted. At least =
with
> > the 'header' privacy the origin user expresses that he want to be
> > anonymous. So it is an intension of the user. Of course the privacy
> > server can strip of the privacy value but that is due to=20
> the Provider
> > of the server. Within RFC3323 I didn't found something that=20
> says that
> > if you have privacy performed that you have to delete the privacy
> > header itself.
>=20
>  From RFC3323:
>=20
> >  When a privacy service performs one of the functions=20
> corresponding to
> >    a privacy level listed in the Privacy header, it SHOULD=20
> remove the
> >    corresponding priv-value from the Privacy header - otherwise, =
any
> >    other privacy service involved with routing this message might
> >    unnecessarily apply the same function, which in many=20
> cases would be
> >    undesirable.  When the last priv-value (not counting=20
> 'critical') has
> >    been removed from the Privacy header, the entire Privacy=20
> header MUST
> >    be removed from a message.
>=20
>=20
>=20
> >=20
> > I'm against that we explicitly exclude the 'header' value for a
> > reason to send the 433 Response.
>=20
> I'm not strongly opposed to it; I just think the semantics of the ACR =

> service are more strongly coupled to the presentation=20
> identity, and not=20
> other information in the request. For example, what if a user sent a=20
> request that did NOT utilize id privacy, but did have header=20
> privacy? In=20
> such a case, the call would be delivered to the called party with=20
> P-Asserted-ID, though would lack identifying information (like IP=20
> address) in the Contact. Is this an anonymous request?=20

I think this is one interpretation how the 'header' privacy is =
interpreted but looking into 3323 where 'header' is defined is says:

      header: The user requests that a privacy service obscure those
      headers which cannot be completely expunged of identifying
      information without the assistance of intermediaries (such as Via
      and Contact).  Also, no unnecessary headers should be added by =
the
      service that might reveal personal information about the
      originator of the request.

My interpretation is that the P-Asserted-Identity is also a header =
'which cannot be completely expunged of identifying information without =
the assistance of intermediaries'.
So if the user includes 'header' the P-Asserted-Identity' shall also be =
anonymised.

I know that the 'id' privacy was defined in an extra context as a =
P-header draft but the general rules of SIP shall apply. So also the =
rules of RFC3323.=20

Other thoughts?

Thank you and Best Regards

Roland



>From the=20
> perspective of the called party, certainly not. Anonymity is only=20
> observable to the called party through the 'id' Privacy tag, NOT the=20
> header tag.
>=20
> Thanks,
> Jonathan R.
> --=20
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ=20
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 03:46:54 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GO8NL-0005VP-C6; Fri, 15 Sep 2006 03:44:39 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GO8NJ-0005Tk-N6
	for sip@ietf.org; Fri, 15 Sep 2006 03:44:37 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GO8NI-0001mC-8a
	for sip@ietf.org; Fri, 15 Sep 2006 03:44:37 -0400
Received: from S4DE8PSAANQ.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Fri, 15 Sep 2006 09:44:35 +0200
Received: by S4DE8PSAANQ.blf.telekom.de with Internet Mail Service
	(5.5.2653.19) id <SVR0MDDW>; Fri, 15 Sep 2006 09:44:35 +0200
Message-Id: <85108216918A984C8C60172D7C84770A56F699@S4DE8PSAAGO.mitte.t-com.de>
From: "Jesske, R" <R.Jesske@t-com.net>
To: dean.willis@softarmor.com
Subject: AW: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Date: Fri, 15 Sep 2006 09:44:32 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e8a67952aa972b528dd04570d58ad8fe
Cc: sip@ietf.org, esasaki@NTT-AT.COM, drage@lucent.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


> -----Urspr=FCngliche Nachricht-----
> Von: Dean Willis [mailto:dean.willis@softarmor.com]=20
> Gesendet: Donnerstag, 14. September 2006 20:29
> An: Jesske, Roland
> Cc: sip@ietf.org; esasaki@NTT-AT.COM; drage@lucent.com
> Betreff: Re: AW: [Sip] SIP WGLC Draft draft-ietf-sip-acr-code-02.txt
>=20
>=20
> Jesske, R wrote:
> > At least with the 'header' privacy the origin user=20
> expresses that he want to be anonymous. So it is an intension=20
> of the user.=20
> > Of course the privacy server can strip of the privacy value=20
> but that is due to the Provider of the server. Within RFC3323=20
> I didn't found something that says that if you have privacy=20
> performed that you have to delete the privacy header itself.
>=20
> Does it?=20
YES

I meant that when I make anonymisation in a server there is no rule =
that says that the privacy header itself must be stripped of. So that =
within a INVITE the headers itself are anonymised and the privacy =
indication in the privacy header itself will be kept.

>Do we have real scenarios where the "header" privacy option=20
> does NOT imply that the originating user desires anonymity?

No, not that I know
>=20
> Or is the case where a call goes out with a "header" privacy=20
> value, but=20
> includes an authenticated identity body or other non-header identity=20
> mechanism simply an error?

With regard to the 'header' privacy I interpret that 'is' is a subset =
of the 'header' privacy. Please look at the other mail as answer to =
Jonathans mail where I described how I understand this issue.

>=20
> If it is an error, what needs to be corrected, in terms of
>=20
> 1) Changing any specifications?
>=20
> 2) Run-time detection of and response to the error condition?

I think all is proper described with in RFC3323 and RFC3325

Thank you and Best Regards

Roland

>=20
> --
> dean
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 03:59:57 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GO8ZV-0001RY-F5; Fri, 15 Sep 2006 03:57:13 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GO8ZT-0001RG-Ny
	for sip@ietf.org; Fri, 15 Sep 2006 03:57:11 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GO8ZS-0002vr-8t
	for sip@ietf.org; Fri, 15 Sep 2006 03:57:11 -0400
Received: from S4DE8PSAANQ.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Fri, 15 Sep 2006 09:57:08 +0200
Received: by S4DE8PSAANQ.blf.telekom.de with Internet Mail Service
	(5.5.2653.19) id <SVR0M1X1>; Fri, 15 Sep 2006 09:57:08 +0200
Message-Id: <85108216918A984C8C60172D7C84770A56F69B@S4DE8PSAAGO.mitte.t-com.de>
From: "Jesske, R" <R.Jesske@t-com.net>
To: shida@ntt-at.com,
    dean.willis@softarmor.com
Subject: AW: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Date: Fri, 15 Sep 2006 09:57:03 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 825e642946eda55cd9bc654a36dab8c2
Cc: sip@ietf.org, esasaki@ntt-at.com, drage@lucent.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Sorry I doubled your comment before.

That is also my interpretation and how people within TISPAN think.

Thanks and Best Regards

Roland

> -----Urspr=FCngliche Nachricht-----
> Von: Shida Schubert [mailto:shida@ntt-at.com]=20
> Gesendet: Donnerstag, 14. September 2006 23:17
> An: Dean Willis
> Cc: Jesske, Roland; sip@ietf.org; drage@lucent.com; =
esasaki@ntt-at.com
> Betreff: Re: AW: [Sip] SIP WGLC Draft draft-ietf-sip-acr-code-02.txt
>=20
>=20
>=20
> I personally think RFC3323 is underspecified with what headers to
> be obscured per privacy value. Interestingly though I found=20
> the text in
> IANA consideration that is concise about what each privacy value's
> intent.
>=20
> "Text from the IANA consideration of RFC3323
>=20
>    o  user: Request that privacy services provide a user-level =
privacy
>       function
>=20
>    o  header: Request that privacy services modify headers that =
cannot
>       be set arbitrarily by the user (Contact/Via)."
>=20
> Considering the text above, if "header" was set any headers=20
> that can not
> be set
> arbitrarily by the user needs to be obscured/modified by the privacy
> services, which
> I believe would include P-A-ID as well.
>=20
> If that's the case, requesting "header" would naturally mean=20
> requesting
> anonymity, as the
> domain supporting P-A-ID would alter the value of the P-A-ID to be
> anonymous as the
> text in IANA suggests.
>=20
> My original interpretation of "header" privacy value was=20
> actually quite
> different. I saw
> the "header privacy" as a way for UA to request some sort of topology
> hiding
> (obscuring Contact, via, headers revealing a path to the UA etc.).
> With that interpretation, I could see a scenario where=20
> "header" privacy
> option does NOT
> imply that the originating user desires anonymity(e.g. I call=20
> my client,
> I want to show them
> who I am but not wanting them to find out I am calling from=20
> home.). But
> this can not hold true if the domain provides P-A-ID as=20
> "header' privacy
> value will
> modify the header to obscure the identity of the user, thus=20
> making it an
> anonymous call.
>=20
> Regards
> Shida
>=20
> Dean Willis wrote:
> > Jesske, R wrote:
> >> At least with the 'header' privacy the origin user=20
> expresses that he
> >> want to be anonymous. So it is an intension of the user. Of course
> >> the privacy server can strip of the privacy value but that=20
> is due to
> >> the Provider of the server. Within RFC3323 I didn't found =
something
> >> that says that if you have privacy performed that you have=20
> to delete
> >> the privacy header itself.
> >
> > Does it? Do we have real scenarios where the "header" privacy =
option
> > does NOT imply that the originating user desires anonymity?
> >
> > Or is the case where a call goes out with a "header" privacy value,
> > but includes an authenticated identity body or other non-header
> > identity mechanism simply an error?
> >
> > If it is an error, what needs to be corrected, in terms of
> >
> > 1) Changing any specifications?
> >
> > 2) Run-time detection of and response to the error condition?
> >
> > --=20
> > dean
> >
> > _______________________________________________
> > Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> >
> >
>=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 06:31:08 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOAvS-0000bp-V6; Fri, 15 Sep 2006 06:28:02 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOAvS-0000bk-BT
	for sip@ietf.org; Fri, 15 Sep 2006 06:28:02 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOAvP-0002x2-1X
	for sip@ietf.org; Fri, 15 Sep 2006 06:28:02 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k8FARfuU003586
	for <sip@ietf.org>; Fri, 15 Sep 2006 05:27:41 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 15 Sep 2006 05:27:52 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 15 Sep 2006 12:26:48 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 15 Sep 2006 12:26:47 +0200
Message-ID: <5D1A7985295922448D5550C94DE2918042C18B@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Completion of WGLC on draft-ietf-sip-gruu
Thread-Index: AcbYsXLrhySOqq5BQSGij8Y3Ktd/aw==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 15 Sep 2006 10:26:48.0618 (UTC)
	FILETIME=[738EB0A0:01C6D8B1]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 52e1467c2184c31006318542db5614d5
Subject: [Sip] Completion of WGLC on draft-ietf-sip-gruu
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

We had a conference call last week on this, and agreed that we would
continue in a further call.

The continuation call will be on:

Tuesday 19th September
----------------------

11:00 am - 1:00 pm Pacific
12:00 midday - 2:00 pm Mountain
1:00 pm - 3:00 pm Central
2:00 pm - 4:00 pm Eastern
7:00 pm - 9:00 pm UK

Bridge details

Access Phone Number:  8007718734
International Access Phone Number:  +1 6477233953=20
7-Digit Access Code:  5776249

The compiled comments are at:

http://www.softarmor.com/sipwg/reviews/gruu/index.html

Other documents will also appear in this area, referenced by this same
index page. I have some updates to do to the compiled comments based on
the conference call and the list discussion in the last 7 days.

Regards

Keith

Keith Drage
Lucent Technologies
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 09:23:54 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GODc8-0007mL-KW; Fri, 15 Sep 2006 09:20:16 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GODc6-0007mG-Vl
	for sip@ietf.org; Fri, 15 Sep 2006 09:20:14 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GODc5-0004g1-HZ
	for sip@ietf.org; Fri, 15 Sep 2006 09:20:14 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 15 Sep 2006 09:20:13 -0400
X-IronPort-AV: i="4.09,170,1157342400"; 
	d="scan'208"; a="102590043:sNHT34765952"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FDKDKJ015171; Fri, 15 Sep 2006 09:20:13 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8FDKCuI010848; 
	Fri, 15 Sep 2006 09:20:12 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 09:20:12 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 09:20:12 -0400
Message-ID: <450AA88B.8010403@cisco.com>
Date: Fri, 15 Sep 2006 09:20:11 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Jonathan Rosenberg <jdrosen@cisco.com>
Subject: Re: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
References: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>	<45099F5D.8000904@softarmor.com>	<4509C6E8.6080503@ntt-at.com>
	<450A2D66.2020209@cisco.com>
In-Reply-To: <450A2D66.2020209@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Sep 2006 13:20:12.0461 (UTC)
	FILETIME=[ACBB25D0:01C6D8C9]
DKIM-Signature: a=rsa-sha1; q=dns; l=5833; t=1158326413; x=1159190413;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20AW=3A=20[Sip]=20SIP=20WGLC=20=20Draft=20draft-ietf-sip-acr-code-
	02.txt |To:Jonathan=20Rosenberg=20<jdrosen@cisco.com>;
	X=v=3Dcisco.com=3B=20h=3DTVN87KTTXZdd9/lotaskt7PXDRo=3D;
	b=qz68Za1FtHGc3nmSE7XIqArlW5RwDumxRgTwr1nIBUQCMnO2jghZiqbSkVQt3xO0yWpMNDWj
	AKF7ShEDT/8trzkzyZH+Lm9jvo8VA5Fw9XwJ8lce0yUtAJoiHOgoYode;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 8f374d0786b25a451ef87d82c076f593
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org, esasaki@ntt-at.com,
	Dean Willis <dean.willis@softarmor.com>, drage@lucent.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Jonathan Rosenberg wrote:
> This is a good point.
> 
> I did not think that the 'header' value applied to P-Asserted-ID.
> Rather, the 'id' value does, which is defined specifically for this
> purpose in RFC 3325. However I agree with you that *if* 'header' implied
> removal of P-Asserted-ID, it becomes a superset of 'id' and then it
> should be added to the list of things that define an anonymous call.

I agree that the intent is not entirely clear. But like Jonathan I had 
interpreted the specs so that 'header' privacy did not remove 
P-Asserted-Identity. I just reviewed 3323 and 3325, and I think that is 
still the correct interpretation based on more or less the same logic 
Jonathan mentioned earlier:

- it is suggested that 'header' privacy be applied early on the call
   path. (Section 4.3: "It is RECOMMENDED that service providers couple
   the privacy service function with a local outbound proxy.")

- 'id' privacy must be applied late in the call path or else the
   P-Asserted-ID header isn't available to servers that need it.

- when the 'header' function is carried out, the 'header' token
   is to be removed. That is specified in section 5:

   "When a privacy service performs one of the functions corresponding to
    a privacy level listed in the Privacy header, it SHOULD remove the
    corresponding priv-value from the Privacy header - otherwise, any
    other privacy service involved with routing this message might
    unnecessarily apply the same function, which in many cases would be
    undesirable."

I guess the following strategy *could* be used to make the 'header' 
privacy level to be a superset of 'id' privacy:

- The outbound proxy it would hide most headers ,
   but would note that it isn't forwarding across a trust domain
   boundary and so not remove P-Asserted-ID.

- It would remove the 'header' token from the Privacy header,
   but because it hasn't completed the job by removing P-Asserted-ID,
   it must insert an 'id' token to ensure that is done later.

While that is a possibility, it seems like quite a stretch to me. I see 
no hints in either document that this kind of behavior is expected. It 
seems way more straightforward to treat them as independent options.

	Paul

> Perhaps Jon P. can comment on whether the intent was for 'header'
> privacy to apply to P-Asserted-ID?
> 
> -Jonathan R.
> 
> Shida Schubert wrote:
>> I personally think RFC3323 is underspecified with what headers to
>> be obscured per privacy value. Interestingly though I found the text in
>> IANA consideration that is concise about what each privacy value's
>> intent.
>>
>> "Text from the IANA consideration of RFC3323
>>
>>    o  user: Request that privacy services provide a user-level privacy
>>       function
>>
>>    o  header: Request that privacy services modify headers that cannot
>>       be set arbitrarily by the user (Contact/Via)."
>>
>> Considering the text above, if "header" was set any headers that can not
>> be set
>> arbitrarily by the user needs to be obscured/modified by the privacy
>> services, which
>> I believe would include P-A-ID as well.
>>
>> If that's the case, requesting "header" would naturally mean requesting
>> anonymity, as the
>> domain supporting P-A-ID would alter the value of the P-A-ID to be
>> anonymous as the
>> text in IANA suggests.
>>
>> My original interpretation of "header" privacy value was actually quite
>> different. I saw
>> the "header privacy" as a way for UA to request some sort of topology
>> hiding
>> (obscuring Contact, via, headers revealing a path to the UA etc.).
>> With that interpretation, I could see a scenario where "header" privacy
>> option does NOT
>> imply that the originating user desires anonymity(e.g. I call my client,
>> I want to show them
>> who I am but not wanting them to find out I am calling from home.). But
>> this can not hold true if the domain provides P-A-ID as "header' privacy
>> value will
>> modify the header to obscure the identity of the user, thus making it an
>> anonymous call.
>>
>> Regards
>> Shida
>>
>> Dean Willis wrote:
>>
>>> Jesske, R wrote:
>>>
>>>> At least with the 'header' privacy the origin user expresses that he
>>>> want to be anonymous. So it is an intension of the user. Of course
>>>> the privacy server can strip of the privacy value but that is due to
>>>> the Provider of the server. Within RFC3323 I didn't found something
>>>> that says that if you have privacy performed that you have to delete
>>>> the privacy header itself.
>>> Does it? Do we have real scenarios where the "header" privacy option
>>> does NOT imply that the originating user desires anonymity?
>>>
>>> Or is the case where a call goes out with a "header" privacy value,
>>> but includes an authenticated identity body or other non-header
>>> identity mechanism simply an error?
>>>
>>> If it is an error, what needs to be corrected, in terms of
>>>
>>> 1) Changing any specifications?
>>>
>>> 2) Run-time detection of and response to the error condition?
>>>
>>> -- 
>>> dean
>>>
>>> _______________________________________________
>>> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
>>>
>>
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 09:53:07 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOE5u-0001LH-GZ; Fri, 15 Sep 2006 09:51:02 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOE5s-0001JY-Qt
	for sip@ietf.org; Fri, 15 Sep 2006 09:51:00 -0400
Received: from ondar.cablelabs.com ([192.160.73.61])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOE5r-0002OS-Ip
	for sip@ietf.org; Fri, 15 Sep 2006 09:51:00 -0400
Received: from srvxchg.cablelabs.com (srvxchg.cablelabs.com [10.5.0.20])
	by ondar.cablelabs.com (8.13.7/8.13.7) with ESMTP id k8FDovIU017542;
	Fri, 15 Sep 2006 07:50:58 -0600 (MDT)
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: [Sip]  SIP MIB draft-12 submitted
Date: Fri, 15 Sep 2006 07:50:57 -0600
Message-ID: <CD6CE349CFD30D40BF5E13B3E0D8480401BADCFF@srvxchg.cablelabs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip]  SIP MIB draft-12 submitted
Thread-Index: AcarjvzlgnS+WVKLR2qGYJr116N2BgtPAmHA
From: "Jean-Francois Mule" <jf.mule@cablelabs.com>
To: "SIP WG List" <sip@ietf.org>
X-Approved: ondar
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d6b246023072368de71562c0ab503126
Cc: "Wijnen, Bert \(Bert\)" <bwijnen@lucent.com>, klingle@cisco.com,
	"Dan Romascanu \(E-mail\)" <dromasca@avaya.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


   We have submitted the final revision of the SIP MIB module.=20

   Draft-12 does address the comments we received during the IESG review
(logged in the ID tracker), and additional comments from Carl
Kalbfleisch, Harald Alvestrand, Dan Romascanu, David Harrington, and
Bert Wijnen.=20

   There are a few technical changes and numerous editorial ones,
including major object renaming for name consistency. The most notable
technical change is the addition of many discontinuity timers in the
tables with Counter32 objects.

   Special thanks to Bert who spent many hours working on this new
version of the draft.

Kevin and Jean-Francois.



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 10:16:43 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOESn-0000sO-IH; Fri, 15 Sep 2006 10:14:41 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOESl-0000qt-N5
	for sip@ietf.org; Fri, 15 Sep 2006 10:14:39 -0400
Received: from mail46.messagelabs.com ([216.82.241.227])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GOESi-0007Oe-FS
	for sip@ietf.org; Fri, 15 Sep 2006 10:14:39 -0400
X-VirusChecked: Checked
X-Env-Sender: Francesco_Paradiso@alliedtelesyn.com
X-Msg-Ref: server-19.tower-46.messagelabs.com!1158329674!20310665!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [207.170.229.164]
Received: (qmail 23969 invoked from network); 15 Sep 2006 14:14:35 -0000
Received: from 207-170-229-164.static.twtelecom.net (HELO
	SVR-WA-OWA.alliedtelesyn.com) (207.170.229.164)
	by server-19.tower-46.messagelabs.com with SMTP;
	15 Sep 2006 14:14:35 -0000
Received: from svr-wa-exch.atg.lc ([149.35.31.11]) by
	SVR-WA-OWA.alliedtelesyn.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 07:14:34 -0700
Received: from alliedtelesyn.com ([10.17.252.2]) by svr-wa-exch.atg.lc with
	Microsoft SMTPSVC(6.0.3790.1830); Fri, 15 Sep 2006 07:14:34 -0700
Received: from svr-mila-e2k1.atg.lc ([10.17.39.14] RDNS failed) by
	alliedtelesyn.com with Microsoft SMTPSVC(5.0.2195.6713); 
	Fri, 15 Sep 2006 16:13:05 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Fri, 15 Sep 2006 16:14:33 +0200
Message-ID: <563047DA3F61634180B39CD3E27D384401A55D@svr-mila-e2k1.atg.lc>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Remote-Party ID
Thread-Index: AcbY0URbfUBqcXToSjm+Mc3FyVVSgg==
From: "Paradiso, Francesco" <Francesco_Paradiso@alliedtelesyn.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 15 Sep 2006 14:13:05.0390 (UTC)
	FILETIME=[0FF1B0E0:01C6D8D1]
X-Spam-Score: 0.3 (/)
X-Scan-Signature: 02ec665d00de228c50c93ed6b5e4fc1a
Subject: [Sip] Remote-Party ID
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0667876844=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0667876844==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6D8D1.44355BF0"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6D8D1.44355BF0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,
where I can find MANDATORY info about Remote-Party ID field in SIP
messages?
=20
Thanks in advance
=20
=20

Best Regards,
Francesco

 =20

=20

------_=_NextPart_001_01C6D8D1.44355BF0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.5450.4" name=3DGENERATOR></HEAD>
<BODY>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D158385913-15092006>Hi=20
all,</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D158385913-15092006>where =
I can find=20
MANDATORY info about Remote-Party ID field in SIP =
messages?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D158385913-15092006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D158385913-15092006>Thanks =
in=20
advance</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D158385913-15092006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV class=3DSection1>
<DIV>
<P class=3DMsoAutoSig align=3Dleft><SPAN lang=3DIT=20
style=3D"FONT-SIZE: 13.5pt; COLOR: black; FONT-FAMILY: Arial; =
mso-ansi-language: IT"><FONT=20
face=3D"Monotype Corsiva" size=3D4>Best=20
Regards,<BR>Francesco</FONT></SPAN></P>&nbsp;<SPAN=20
style=3D"FONT-SIZE: 9pt; FONT-FAMILY: Arial"><?xml:namespace prefix =3D =
o ns =3D=20
"urn:schemas-microsoft-com:office:office" /><o:p></o:p></SPAN>=20
<P></P></DIV></DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------_=_NextPart_001_01C6D8D1.44355BF0--


--===============0667876844==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0667876844==--




From sip-bounces@ietf.org Fri Sep 15 10:27:17 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOEcY-0004g7-55; Fri, 15 Sep 2006 10:24:46 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOEcX-0004fz-0U
	for sip@ietf.org; Fri, 15 Sep 2006 10:24:45 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOEcU-0001F2-Kw
	for sip@ietf.org; Fri, 15 Sep 2006 10:24:44 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 15 Sep 2006 10:24:42 -0400
X-IronPort-AV: i="4.09,171,1157342400"; 
	d="scan'208"; a="102606094:sNHT32858808"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FEOgce013790; Fri, 15 Sep 2006 10:24:42 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8FEOguI008521; 
	Fri, 15 Sep 2006 10:24:42 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 10:24:42 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 10:24:41 -0400
Message-ID: <450AB7A9.7070600@cisco.com>
Date: Fri, 15 Sep 2006 10:24:41 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Samir Srivastava <samirsr@nortel.com>
Subject: Re: [Sip] Another Comment on draft-audet-sip-sips-guidelines-03 w.r.t.
	telURI etc
References: <62B9B0847CC47543B6B3B5E26BD268E60E74621B@zrc2hxm2.corp.nortel.com>
In-Reply-To: <62B9B0847CC47543B6B3B5E26BD268E60E74621B@zrc2hxm2.corp.nortel.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Sep 2006 14:24:41.0551 (UTC)
	FILETIME=[AEE36DF0:01C6D8D2]
DKIM-Signature: a=rsa-sha1; q=dns; l=4024; t=1158330282; x=1159194282;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20Another=20Comment=20on=20draft-audet-sip-sips-guidelines
	-03=20w.r.t.=0A=20telURI=20etc
	|To:Samir=20Srivastava=20<samirsr@nortel.com>;
	X=v=3Dcisco.com=3B=20h=3DZ7JmNyHiqX/HSofclBexmbcCvlg=3D;
	b=be6XT5U34fXJMK2JYMeflmKg7OjTdeB0nx4aTUTGRmRFSy38+HvXAwhiJvbOun3tOCvPzaNT
	cU7rg9mhJWZnB3TLbZP4f9f18ZvnWzJnlWbylAaOO2VYxpVEm3duILG1;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: a2c12dacc0736f14d6b540e805505a86
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Samir Srivastava wrote:
> 1) In section 5, it makes following statement
> "However, if an SIPS AOR is used, a SIPS Contact MUST also be used. If a 
> SIP AOR is used, a SIP Contact MUST also be used. Those are mechanical 
> rules with no influence on routing. "
> 
> Which doesn't allow the mailto and tel URL registration for SIPS and 
> SIP. Atleast It should have allowed the telURI and mailto for SIP.
 >
> Refer the following from section 10.2.1 of 3261
> "A SIP UA can choose to register telephone numbers (with the tel URL, 
> RFC 2806 [9]) or email addresses (with a mailto URL, RFC 2368 [32]) as 
> Contacts for an address-of-record, for example."

I have some sympathy for this. I think we get wound up thinking that the 
contacts being registered are in fact destinations belonging to the UAC 
doing the REGISTER. While this is usually the case, it need not always 
be the case.

The mailto case, or other kinds of URIs that have can't be used to 
transmit sip requests, are pretty benign here. The only way they can 
have a request on routing is to be returned in a 3xx response, all the 
way back to the UAC. In that case there is no security issue, because 
the UAC gets to decide whether to use this "insecure" transport.

TEL is more troublesome, because sip requests *can* be routed to it, but 
  the URI doesn't guarantee a secure path.

Maybe the solution to all contacts that aren't "secure enough" (namely 
everything except SIPS) should be permitted in registration, but should 
not be considered as candidates for routing. Instead, like mailto, they 
can only be used by being returned to the UAC in a 3xx.

It seems that you can already get in the above situation as follows:

	REGISTER sips:example.com
	To: sip:bob@example.com
	From: sip:bob@example.com
	Contact: sip:bob@bob.cheap-phone.example.com
	Contact: tel:+12125551234
	Contact: mailto:bob@example.org

	REGISTER sips:example.com
	To: sips:bob@example.com
	From: sips:bob@example.com
	Contact: sips:bob@bob.secure-phone.example.com

After this, how is an INVITE to sip:bob@example.com routed?
It may only be *forwarded* to sips:bob@bob.secure-phone.example.com.
But it could be redirected to the others. So the proxy can either just 
redirect, or it can try forwarding to the one valid forwarding 
destination and then redirect with the remaining destinations if that 
one doesn't work out.

Given that the proxy must be prepared to deal with contacts that it may 
not be permitted to forward to, I fail to see the rationale for 
preventing registration to a sips URI of contacts that can't be routed 
to securely.


> Why we are restricting this...
> 2) Now the big question 3261, in section 8.1.1.2 gives an example of 411 
> with telURI to be interpreted by the visitor domain proxy (not to be 
> interpreted by the home domain proxy with airport example ) How can we 
> route it securly ?

Note that the usage of <tel:411> in 3261 is *invalid*. So it has to be 
taken with a grain of salt. (Something similar but valid is 
<tel:411;phone-context=+1>.)

Also, ECRIT has been quite busy since the publication of 3261, so we 
have more evolved practices defined now. I believe that today the 
recommendation would rather be to use <urn:sos>

But these both suffer from not being SIPS, and not having a secure form. 
(Do we want TELS and URNS ??? :-)

Perhaps you can't ever expect security on an emergency call - it may be 
compromised in many ways in order to expedite handling the emergency. 
Not very satisfying, but maybe its reality.

In the case of TEL, if you want a secure call, there are a couple of 
things you can do:

- perform your own ENUM lookup and select a sips target

- convert to a SIPS URI with the domain name of a domain you
   believe will be able reach the destination securely. When a
   proxy for the chosen domain receives the request it may do
   as it wishes to ensure it reaches the destination securely.

	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 10:43:25 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOEsc-0004fI-Ta; Fri, 15 Sep 2006 10:41:22 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOEsb-0004f8-1K
	for sip@ietf.org; Fri, 15 Sep 2006 10:41:21 -0400
Received: from sj-iport-3-in.cisco.com ([171.71.176.72]
	helo=sj-iport-3.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GOEsZ-00046c-D1 for sip@ietf.org; Fri, 15 Sep 2006 10:41:21 -0400
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-3.cisco.com with ESMTP; 15 Sep 2006 07:41:19 -0700
X-IronPort-AV: i="4.09,171,1157353200"; 
	d="scan'208"; a="443376042:sNHT36784548"
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-4.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FEfIZl012770; Fri, 15 Sep 2006 07:41:18 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com
	[128.107.191.100])
	by sj-core-5.cisco.com (8.12.10/8.12.6) with ESMTP id k8FEfI1E003893;
	Fri, 15 Sep 2006 07:41:18 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.211);
	Fri, 15 Sep 2006 07:41:18 -0700
Received: from [10.32.241.148] ([10.32.241.148]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 07:41:17 -0700
Message-ID: <450ABB8B.9040700@cisco.com>
Date: Fri, 15 Sep 2006 10:41:15 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Paul Kyzivat <pkyzivat@cisco.com>
Subject: Re: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
References: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>	<45099F5D.8000904@softarmor.com>	<4509C6E8.6080503@ntt-at.com>
	<450A2D66.2020209@cisco.com> <450AA88B.8010403@cisco.com>
In-Reply-To: <450AA88B.8010403@cisco.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Sep 2006 14:41:17.0457 (UTC)
	FILETIME=[007EA010:01C6D8D5]
DKIM-Signature: a=rsa-sha1; q=dns; l=6624; t=1158331278; x=1159195278;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20AW=3A=20[Sip]=20SIP=20WGLC=20=20Draft=20draft-ietf-sip-acr-code-
	02.txt;
	X=v=3Dcisco.com=3B=20h=3DbXiAxb+WCc9S6/tVgdejnUVOHto=3D;
	b=aAD1T9oh3op9VM2luP9ncy0+zY/woGJob2J5LVZ70lC2weKbPMJjBOnZkKH7HuwfcQMsj72M
	BbPPwHKJFebf0PpHGat2xEPo6IGfg6wYu6iwiU3VtlyqlZ/5LGOc6Qm5;
Authentication-Results: sj-dkim-4.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 20f22c03b5c66958bff5ef54fcda6e48
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org, esasaki@ntt-at.com,
	Dean Willis <dean.willis@softarmor.com>, drage@lucent.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Right.

So what this means for acr-code is that we are really at a stalemate 
here until its clear what RFC 3323 is supposed to mean. Its important to 
note that it is certainly not the job of acr-code to clarify this behavior.

-Jonathan R.

Paul Kyzivat wrote:

> 
> 
> Jonathan Rosenberg wrote:
> 
>> This is a good point.
>>
>> I did not think that the 'header' value applied to P-Asserted-ID.
>> Rather, the 'id' value does, which is defined specifically for this
>> purpose in RFC 3325. However I agree with you that *if* 'header' implied
>> removal of P-Asserted-ID, it becomes a superset of 'id' and then it
>> should be added to the list of things that define an anonymous call.
> 
> 
> I agree that the intent is not entirely clear. But like Jonathan I had 
> interpreted the specs so that 'header' privacy did not remove 
> P-Asserted-Identity. I just reviewed 3323 and 3325, and I think that is 
> still the correct interpretation based on more or less the same logic 
> Jonathan mentioned earlier:
> 
> - it is suggested that 'header' privacy be applied early on the call
>   path. (Section 4.3: "It is RECOMMENDED that service providers couple
>   the privacy service function with a local outbound proxy.")
> 
> - 'id' privacy must be applied late in the call path or else the
>   P-Asserted-ID header isn't available to servers that need it.
> 
> - when the 'header' function is carried out, the 'header' token
>   is to be removed. That is specified in section 5:
> 
>   "When a privacy service performs one of the functions corresponding to
>    a privacy level listed in the Privacy header, it SHOULD remove the
>    corresponding priv-value from the Privacy header - otherwise, any
>    other privacy service involved with routing this message might
>    unnecessarily apply the same function, which in many cases would be
>    undesirable."
> 
> I guess the following strategy *could* be used to make the 'header' 
> privacy level to be a superset of 'id' privacy:
> 
> - The outbound proxy it would hide most headers ,
>   but would note that it isn't forwarding across a trust domain
>   boundary and so not remove P-Asserted-ID.
> 
> - It would remove the 'header' token from the Privacy header,
>   but because it hasn't completed the job by removing P-Asserted-ID,
>   it must insert an 'id' token to ensure that is done later.
> 
> While that is a possibility, it seems like quite a stretch to me. I see 
> no hints in either document that this kind of behavior is expected. It 
> seems way more straightforward to treat them as independent options.
> 
>     Paul
> 
>> Perhaps Jon P. can comment on whether the intent was for 'header'
>> privacy to apply to P-Asserted-ID?
>>
>> -Jonathan R.
>>
>> Shida Schubert wrote:
>>
>>> I personally think RFC3323 is underspecified with what headers to
>>> be obscured per privacy value. Interestingly though I found the text in
>>> IANA consideration that is concise about what each privacy value's
>>> intent.
>>>
>>> "Text from the IANA consideration of RFC3323
>>>
>>>    o  user: Request that privacy services provide a user-level privacy
>>>       function
>>>
>>>    o  header: Request that privacy services modify headers that cannot
>>>       be set arbitrarily by the user (Contact/Via)."
>>>
>>> Considering the text above, if "header" was set any headers that can not
>>> be set
>>> arbitrarily by the user needs to be obscured/modified by the privacy
>>> services, which
>>> I believe would include P-A-ID as well.
>>>
>>> If that's the case, requesting "header" would naturally mean requesting
>>> anonymity, as the
>>> domain supporting P-A-ID would alter the value of the P-A-ID to be
>>> anonymous as the
>>> text in IANA suggests.
>>>
>>> My original interpretation of "header" privacy value was actually quite
>>> different. I saw
>>> the "header privacy" as a way for UA to request some sort of topology
>>> hiding
>>> (obscuring Contact, via, headers revealing a path to the UA etc.).
>>> With that interpretation, I could see a scenario where "header" privacy
>>> option does NOT
>>> imply that the originating user desires anonymity(e.g. I call my client,
>>> I want to show them
>>> who I am but not wanting them to find out I am calling from home.). But
>>> this can not hold true if the domain provides P-A-ID as "header' privacy
>>> value will
>>> modify the header to obscure the identity of the user, thus making it an
>>> anonymous call.
>>>
>>> Regards
>>> Shida
>>>
>>> Dean Willis wrote:
>>>
>>>> Jesske, R wrote:
>>>>
>>>>> At least with the 'header' privacy the origin user expresses that he
>>>>> want to be anonymous. So it is an intension of the user. Of course
>>>>> the privacy server can strip of the privacy value but that is due to
>>>>> the Provider of the server. Within RFC3323 I didn't found something
>>>>> that says that if you have privacy performed that you have to delete
>>>>> the privacy header itself.
>>>>
>>>> Does it? Do we have real scenarios where the "header" privacy option
>>>> does NOT imply that the originating user desires anonymity?
>>>>
>>>> Or is the case where a call goes out with a "header" privacy value,
>>>> but includes an authenticated identity body or other non-header
>>>> identity mechanism simply an error?
>>>>
>>>> If it is an error, what needs to be corrected, in terms of
>>>>
>>>> 1) Changing any specifications?
>>>>
>>>> 2) Run-time detection of and response to the error condition?
>>>>
>>>> -- 
>>>> dean
>>>>
>>>> _______________________________________________
>>>> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
>>>> This list is for NEW development of the core SIP Protocol
>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>> Use sipping@ietf.org for new developments on the application of sip
>>>>
>>>>
>>>
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
>>
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 11:08:29 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOFGT-0006LV-A5; Fri, 15 Sep 2006 11:06:01 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOFGR-0006LP-RG
	for sip@ietf.org; Fri, 15 Sep 2006 11:05:59 -0400
Received: from sj-iport-1-in.cisco.com ([171.71.176.70]
	helo=sj-iport-1.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GOFGN-0000Ey-6J for sip@ietf.org; Fri, 15 Sep 2006 11:05:59 -0400
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-1.cisco.com with ESMTP; 15 Sep 2006 08:05:54 -0700
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-3.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FF5sqF023273; Fri, 15 Sep 2006 08:05:54 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8FF5sYp026966;
	Fri, 15 Sep 2006 08:05:54 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 08:05:54 -0700
Received: from [10.32.241.148] ([10.32.241.148]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 08:05:53 -0700
Message-ID: <450AC150.1000405@cisco.com>
Date: Fri, 15 Sep 2006 11:05:52 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Paul Kyzivat <pkyzivat@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
	<45081D43.5040003@cisco.com>
In-Reply-To: <45081D43.5040003@cisco.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Sep 2006 15:05:53.0942 (UTC)
	FILETIME=[708C5B60:01C6D8D8]
DKIM-Signature: a=rsa-sha1; q=dns; l=7148; t=1158332754; x=1159196754;
	c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=H9nrcCHKKLen9lCrQe3La37nQQtrgYW39v9LeqCdfRN4s4IqZoa36ri8YNcw+ovmgF09uV2G
	w+i4v3BsiUCKifyQBUIizvEgfiSdBhpLF2Y9cH2t5Njj5DTPsVH3Qw0J;
Authentication-Results: sj-dkim-3.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 20f22c03b5c66958bff5ef54fcda6e48
Cc: IETF SIP List <sip@ietf.org>, Francois Audet <audet@nortel.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Back to the original question, I feel strongly that it is not in the 
scope of gruu to solve THIS level of anonymity. I agree its worth doing 
but not in the gruu spec.

I think its fair to ask whether or not the gruu spec should be specified 
in a way that it provides privacy services that are no worse than what 
what is defined in RFC 3261. And more specifically, if a user does not 
explicitly invoke a privacy service (through the privacy header or other 
mechanisms), does GRUU make things worse, and can we specify it in a way 
that doesnt make it worse?

Clearly one could use gruu as defined today, and if you wanted header 
anonymity, you can use the 'header' privacy service and that would work 
and provide you a level of anonymity on par with today without gruu.

It is certainly the case that, in RFC 3261, the SIP invite, without 
treatment by some external b2bua service, will reveal the domain of the 
originator, through the IP addresses in the SDP alone. Even with 
treatment by ANY of the privacy services provided in RFC3323, the domain 
of the originator is revealed. Consequently I don't think we need to 
hold up gruu on this feature.

With RFC 3261 today, if the user didn't use an anonymization service, 
they could include a From header field of username@anonymous.invalid. 
They could rotate the value of 'username' from call to call, though the 
IP addresses in various places would probably correlate across calls, 
since most users have fairly static IPs.

Thus, I would asser that SIP today, without usage of an anonymity 
service, provides nothing more than pseudonymity (with the IP address as 
your pseudonym). This would tell me that it would be acceptable to 
produce a gruu spec which provides nothing more than pseudonymity. Since 
IP addresses can change over longer periods of time (reboot cycles), I'd 
also propose that gruu support slowly changing pseudonyms - namely, 
different on each registration. This is fairly easy to add to gruu.

With this proposal, I would assert that GRUU provides privacy services 
equivalent to the level of anonymity afforded by RFC 3261, and that 
better anonymity can be provided by the mechanisms in rfc3323, which get 
no better or worse with the addition of gruu. I think this is the metric 
we need to meet, and NO BETTER.

Does this get us out of this conundrum?

-Jonathan R.


Paul Kyzivat wrote:

> Francois,
> 
> You are stating a need for a level of anonymity that Jonathan says is 
> almost impossible to achieve. Something has to give here.
> 
> I think the world already deals with differing levels of anonymity. 
> Callerid blocking in the pstn only blocks your identity from the 
> receiving party, while the whole intervening network has access to your 
> identity. And its often negated when making emergency calls. So if I 
> have a *serious* need to remain anonymous, invoking callerid blocking 
> already isn't enough. Instead I am forced to seek out an anonymous phone 
> from which to originate the call, or use some very complex mechanisms 
> that are not widely available. And when seeking out an anonymous phone 
> from which to make my call, I will again typically be limited in the 
> scope of anonymity. For instance if I cannot travel to an arbitrary 
> location to make my call then the location I make the call from can be 
> used to guess where I am.
> 
> One part of jonathan's old proposal escapes me: why is it important to 
> support sip identity when making an anonymous call? Does it really 
> matter to the recipient that the caller is really the particular 
> anonymous caller it claims to be rather than some other unknown caller?
> 
> I am inclined to think that an independent anonymizer service (b2bua 
> based) running in its own domain, would be sufficient for all *my* worst 
> case anonymity needs, and that anonymity within the domain of my own 
> provider would be sufficient for those cases when I just want to "block 
> callerid". YMMV.
> 
> It is clear that the more complete forms of anonymity are relatively 
> expensive to provide, to the point that it probably wouldn't be good to 
> make that the default. If it became an extra cost service then it would 
> be self funding. Then people will settle for less when the need doesn't 
> justify the cost.
> 
>     Paul
> 
> Francois Audet wrote:
> 
>>  
>>
>>>> I guess what I'm trying to say is that if we need 
>>>
>>> annonymity, it needs
>>>
>>>> to be full annonymity. I don't see a value in "pseudonymity".
>>>
>>> Why? Certainly there are privacy applications (such as calling the 
>>> police to anonymously report an incident) where pseudonymity is 
>>> probably sufficient.
>>
>>
>> I don't believe that a system that "works sometimes" is useful.
>>
>> To take the "police" example, if my domain is enough for the police
>> to track me down (or to a subset small enought that I'm not annonymous),
>> then, well, it's not annonymous anymore. Maybe I have my own domain, 
>> or you can track that there was only one user with that
>> particular
>> domain who might have made that call. Maybe I'm reporting something to 
>> police, and it shows my employer's domain. Suddently, my employer is
>> embroiled.
>>
>> The end-user will not have confidence that's it's really annonymous
>> because
>> it's not always annonymous.
>>
>> Maybe I'm missing something that is special to GRUU. I'm reading Dean's
>> summary,
>> but I'm not terribly convinced that the claims are true.
>>
>> I'm highly sceptical that somehow that we (IETF) need to provide a
>> solution to
>> the GRUU anonimity problem.
>>
>> But I could be missising something.
>>
>>
>>>> So, I agree with you. When we DO solve annonymity, it needs to work 
>>>> with GRUU and everthing else. In the meanwhile, I don't 
>>>
>>> think GRUU is
>>>
>>>> special and requires immediately a solution to annonymity.
>>>>
>>> You may have to wait a while. A LONG while.
>>>
>>> In:
>>> http://www.jdrosen.net/papers/draft-rosenberg-sip-identity-pri
>>
>> vacy-00.txt
>>
>>> I took a stab at some thoughts on true anonymity. Its nearly 
>>> impossible to do. Even anonymizers aren't sufficient. It is possible 
>>> that the only solutions require crazy BGP hacks like I describe else 
>>> a global, massive p2p mesh.
>>
>>
>> Yeah, I have read this, and I do agree that it's MUCH bigger than just
>> GRUU.
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 11:10:23 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOFIy-0006pO-QM; Fri, 15 Sep 2006 11:08:36 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOFIx-0006oV-0A
	for sip@ietf.org; Fri, 15 Sep 2006 11:08:35 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOFIu-0000NA-NG
	for sip@ietf.org; Fri, 15 Sep 2006 11:08:34 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-1.cisco.com with ESMTP; 15 Sep 2006 08:08:33 -0700
X-IronPort-AV: i="4.09,171,1157353200"; 
	d="scan'208,217"; a="41855491:sNHT50093900"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FF8WVX017566; Fri, 15 Sep 2006 11:08:32 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8FF8WdM026752; 
	Fri, 15 Sep 2006 11:08:32 -0400 (EDT)
Received: from xmb-rtp-215.amer.cisco.com ([64.102.31.124]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 11:08:32 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: [Sip] Remote-Party ID
Date: Fri, 15 Sep 2006 11:08:31 -0400
Message-ID: <8983EC086A9D954BA74D9763E853CF3E0217C56C@xmb-rtp-215.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Remote-Party ID
Thread-Index: AcbY0URbfUBqcXToSjm+Mc3FyVVSggABykbg
From: "Sanjay Sinha \(sanjsinh\)" <sanjsinh@cisco.com>
To: "Paradiso, Francesco" <Francesco_Paradiso@alliedtelesyn.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 15 Sep 2006 15:08:32.0134 (UTC)
	FILETIME=[CED68A60:01C6D8D8]
DKIM-Signature: a=rsa-sha1; q=dns; l=3213; t=1158332912; x=1159196912;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=sanjsinh@cisco.com;
	z=From:=22Sanjay=20Sinha=20\(sanjsinh\)=22=20<sanjsinh@cisco.com>
	|Subject:RE=3A=20[Sip]=20Remote-Party=20ID |To:=22Paradiso,
	=20Francesco=22=20<Francesco_Paradiso@alliedtelesyn.com>, =0A
	=20=20=20=20=20=20=20=20<sip@ietf.org>;
	X=v=3Dcisco.com=3B=20h=3Df57NIXNtvMfx0Eis6MF374s4Y1E=3D;
	b=lzpGtwAunOLOcwlF8PFk2JiQ9NYD/ARNu6vYLA4GYHo6poVgwxY9DVDzDaYdnYPWIq/EMRW6
	E4a/wNf83t89NRAsIsCKrq2gWveHarGf3m/XdKyAx31tlaWyvsQt/TRF;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=sanjsinh@cisco.com;
	dkim=pass (
	59 extraneous bytes; sig from cisco.com verified; ); 
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 34d35111647d654d033d58d318c0d21a
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0517181788=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0517181788==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6D8D8.CEC2BCE2"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6D8D8.CEC2BCE2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

You can refer to this draft: draft-ietf-sip-privacy-05.txt. Though
Remote-Party ID is not standard anymore and has been replaced with PAI.
Pl. see RFC3323-3325.
=20
Sanjay

________________________________

From: Paradiso, Francesco [mailto:Francesco_Paradiso@alliedtelesyn.com]=20
Sent: Friday, September 15, 2006 10:15 AM
To: sip@ietf.org
Subject: [Sip] Remote-Party ID


Hi all,
where I can find MANDATORY info about Remote-Party ID field in SIP
messages?
=20
Thanks in advance
=20
=20

Best Regards,
Francesco

 =20

=20

------_=_NextPart_001_01C6D8D8.CEC2BCE2
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns:o =3D "urn:schemas-microsoft-com:office:office"><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2900.2976" name=3DGENERATOR></HEAD>
<BODY>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D766480515-15092006><FONT =
face=3DArial=20
color=3D#0000ff size=3D2>You can refer to this draft: =
draft-ietf-sip-privacy-05.txt.=20
Though <FONT color=3D#000000>Rem</FONT><FONT color=3D#0000ff>ote-Party =
ID&nbsp;is=20
not standard anymore and has been replaced with PAI. Pl. see=20
RFC3323-3325.</FONT></FONT></SPAN></DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D766480515-15092006><FONT =
face=3DArial=20
color=3D#0000ff size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV dir=3Dltr align=3Dleft><SPAN class=3D766480515-15092006><FONT =
face=3DArial=20
color=3D#0000ff size=3D2>Sanjay</FONT></SPAN></DIV><BR>
<DIV class=3DOutlookMessageHeader lang=3Den-us dir=3Dltr align=3Dleft>
<HR tabIndex=3D-1>
<FONT face=3DTahoma size=3D2><B>From:</B> Paradiso, Francesco=20
[mailto:Francesco_Paradiso@alliedtelesyn.com] <BR><B>Sent:</B> Friday, =
September=20
15, 2006 10:15 AM<BR><B>To:</B> sip@ietf.org<BR><B>Subject:</B> [Sip]=20
Remote-Party ID<BR></FONT><BR></DIV>
<DIV></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D158385913-15092006>Hi=20
all,</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D158385913-15092006>where =
I can find=20
MANDATORY info about Remote-Party ID field in SIP =
messages?</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D158385913-15092006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN class=3D158385913-15092006>Thanks =
in=20
advance</SPAN></FONT></DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D158385913-15092006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV class=3DSection1>
<DIV>
<P class=3DMsoAutoSig align=3Dleft><SPAN lang=3DIT=20
style=3D"FONT-SIZE: 13.5pt; COLOR: black; FONT-FAMILY: Arial; =
mso-ansi-language: IT"><FONT=20
face=3D"Monotype Corsiva" size=3D4>Best=20
Regards,<BR>Francesco</FONT></SPAN></P>&nbsp;<SPAN=20
style=3D"FONT-SIZE: 9pt; FONT-FAMILY: Arial"><o:p></o:p></SPAN>=20
<P></P></DIV></DIV>
<DIV>&nbsp;</DIV></BODY></HTML>

------_=_NextPart_001_01C6D8D8.CEC2BCE2--


--===============0517181788==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0517181788==--




From sip-bounces@ietf.org Fri Sep 15 12:14:50 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOGIO-000298-RE; Fri, 15 Sep 2006 12:12:04 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOGIN-00028q-Jh
	for sip@ietf.org; Fri, 15 Sep 2006 12:12:03 -0400
Received: from sj-iport-1-in.cisco.com ([171.71.176.70]
	helo=sj-iport-1.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GOGIL-0005jo-9U for sip@ietf.org; Fri, 15 Sep 2006 12:12:03 -0400
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-1.cisco.com with ESMTP; 15 Sep 2006 09:12:01 -0700
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FGC0lu020122; Fri, 15 Sep 2006 09:12:00 -0700
Received: from [192.168.1.3] (sjc-vpn4-129.cisco.com [10.21.80.129])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8FGBRQf024691;
	Fri, 15 Sep 2006 09:12:00 -0700 (PDT)
In-Reply-To: <0J5L00L28GI2JL40@jes-fe2.zx.nl>
References: <0J5L00L28GI2JL40@jes-fe2.zx.nl>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9102F009-D9C4-4C18-8670-C95F2E98867E@cisco.com>
Content-Transfer-Encoding: 7bit
From: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
Date: Thu, 14 Sep 2006 17:28:57 -0700
To: Jeroen Van Bemmel <jbemmel@zonnet.nl>
X-Mailer: Apple Mail (2.752.2)
DKIM-Signature: a=rsa-sha1; q=dns; l=1782; t=1158336720; x=1159200720;
	c=relaxed/simple; s=sjdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:Re=3A=20[Sip]=20Good=20Hash=3A=20draft-ietf-sip-fork-loop-fix-03;
	X=v=3Dcisco.com=3B=20h=3DAyadtlHzVE2lqPGk6mddYA9NTlg=3D;
	b=j7j0bxFdHpTEa8kaf8p9LdS/XeIzL4EtupPj/0pswe1cGTRMtKnogcTYbZo6fGAZSZS3yZjT
	lQ8QiOLpt01YByshmUT4M41Q6l0Bzb8z44xa4MKNWNASg/YD/iAhV2V4;
Authentication-Results: sj-dkim-1.cisco.com; header.From=fluffy@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 82c9bddb247d9ba4471160a9a865a5f3
Cc: SIP <sip@ietf.org>, Pete Cordell <pete@tech-know-ware.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


I don't think we should require any specific hash but I think it  
would be nice to give implementors some advice on what might be a  
reasonable choice.


On Sep 14, 2006, at 9:52 AM, Jeroen Van Bemmel wrote:

> Pete,
>
> I use djb2 (a linear hash) with loop-hash = HASH(routing info) +  
> HASH( call-id ), modulo 2^32 (or 64)
>
> So no concatenation. I guess this avoids the issue you mentioned.
>
> Regards,
> Jeroen
>
> -----Oorspronkelijk bericht -----
> Van: "Pete Cordell" <pete@tech-know-ware.com>
> Aan: "Robert Sparks" <rjsparks@nostrum.com>; "Jeroen Van Bemmel"  
> <jbemmel@zonnet.nl>
> CC: "Cullen Jennings" <fluffy@cisco.com>; "SIP" <sip@ietf.org>
> Verzonden: 14-9-06 17:59
> Onderwerp: Re: [Sip] Good Hash: draft-ietf-sip-fork-loop-fix-03
>
> ----- From: "Robert Sparks" <rjsparks@nostrum.com>
>
>> That may be exactly why call-id and cseq were included in the hash in
>> 3261. Assuming that's so, then
>> all we need are bits that change between transactions. The first  
>> part  of
>> the via branch parameter would
>> be enough.
>>
>> So, I propose I add text explaining why you SHOULD (do we make this
>> MUST?) add some set of bits that
>> change between requests, and note that either the first part of  
>> the  via
>> branch or the combination of call-id
>> and cseq would be good choices.
>
> That's quite cunning Jeroen!  I think it can only be SHOULD,  
> because the
> whole thing is SHOULD and RECOMMENDED etc.
>
> One issue is that this works well for the cryptographic hashes, but  
> I don't
> think it will work for the linear hash I mentioned in an earlier e- 
> mail,
> i.e.:
>
> for( i=0; i<strlen(data); ++i )
>     hash = hash * MULTIPLIER + data[i];
>
> where MULTIPLIER is 31 or 37.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 12:14:50 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOGIQ-00029J-Pq; Fri, 15 Sep 2006 12:12:06 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOGIO-000293-MA
	for sip@ietf.org; Fri, 15 Sep 2006 12:12:04 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOGIM-0005jq-CW
	for sip@ietf.org; Fri, 15 Sep 2006 12:12:04 -0400
Received: from sj-dkim-2.cisco.com ([171.71.179.186])
	by sj-iport-6.cisco.com with ESMTP; 15 Sep 2006 09:12:02 -0700
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FGC1RM002744; Fri, 15 Sep 2006 09:12:01 -0700
Received: from [192.168.1.3] (sjc-vpn4-129.cisco.com [10.21.80.129])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8FGBRQg024691;
	Fri, 15 Sep 2006 09:12:01 -0700 (PDT)
In-Reply-To: <4505B74C.90506@cisco.com>
References: <285E7350-8C4F-4A92-8E1E-3BFAC67CC8EC@cisco.com>
	<4505B74C.90506@cisco.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B22D5A4D-F4B9-49C4-9693-9F84F3E09F8F@cisco.com>
Content-Transfer-Encoding: 7bit
From: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] draft-ietf-sip-gruu-10 comments
Date: Thu, 14 Sep 2006 17:33:32 -0700
To: Paul Kyzivat <pkyzivat@cisco.com>
X-Mailer: Apple Mail (2.752.2)
DKIM-Signature: a=rsa-sha1; q=dns; l=1596; t=1158336721; x=1159200721;
	c=relaxed/simple; s=sjdkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:Re=3A=20[Sip]=20draft-ietf-sip-gruu-10=20comments;
	X=v=3Dcisco.com=3B=20h=3DWfCaFaeXb1Q2ofWJ9m44BX0SOYo=3D;
	b=xX7AvIRdMafszxrd1PNVxx+9gyT4rf3GY5XosQ7ydfXPQzea9l/eXYAvTUbnDLlzSm/tYLfc
	y1ijHc6ygKeMK2bKmXeI9B7N1QxrjfTQZq/mQCYRxDjkxYsvimgs6jLO;
Authentication-Results: sj-dkim-2.cisco.com; header.From=fluffy@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e1e48a527f609d1be2bc8d8a70eb76cb
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


On Sep 11, 2006, at 12:21 PM, Paul Kyzivat wrote:

>
>
> Cullen Jennings wrote:
>
>> Section 8.2.2
>> I think I am likely confused here. I basically don't see why a  
>> simple classic sip trapezoid deployment would ever need to Record  
>> Route. The fact that the GRUU refereed to the "home" domain would  
>> cause it work get back here. As a side note, I find the terms  
>> "home", "edge" etc very undefined outside the IMS context.  
>> Anyways, I believe this section might be all right but I am  
>> failing to understand what needs to be done and why. If I was a  
>> non IMS proxy implementer, I suspect I would just ignore this  
>> whole section.
>
> *If* the topology is a simple trapezoid then I think you are correct.
>
> But if there is a proxy before the originating home proxy, or after  
> the terminating home proxy, then the R-R is needed to prevent a  
> spiral.
>
> On the originating side, this can be determined by whether there is  
> a R-R present when the request arrives at the originating home  
> proxy. On the terminating side that doesn't work, because the  
> potential R-R hasn't happened yet, and you can't know in advance if  
> it will happen.
>
> So the problem is that you don't need it in a trapezoid, but you  
> don't know if you have a trapezoid.
>

But on the terminating side, it seems like the home proxy know there  
is another proxy because it needs to insert that into the route

(I don't spend enough time thinking about this so I assume you are  
right, just trying to make sure I understand)

> 	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 12:24:10 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOGS3-0007c0-Qp; Fri, 15 Sep 2006 12:22:03 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOGS2-0007b9-05
	for sip@ietf.org; Fri, 15 Sep 2006 12:22:02 -0400
Received: from harjus.tutpro.com ([192.98.100.3])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOGRz-0007L9-GP
	for sip@ietf.org; Fri, 15 Sep 2006 12:22:01 -0400
Received: by harjus.tutpro.com (Postfix, from userid 1000)
	id 2D92BAC36D; Fri, 15 Sep 2006 19:21:55 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17674.54050.916073.393735@harjus.tutpro.com>
Date: Fri, 15 Sep 2006 19:21:54 +0300
To: Jonathan Rosenberg <jdrosen@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
In-Reply-To: <450AC150.1000405@cisco.com>
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
	<45081D43.5040003@cisco.com> <450AC150.1000405@cisco.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
From: jh@tutpro.com (Juha Heinanen)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 856eb5f76e7a34990d1d457d8e8e5b7f
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>,
	Francois Audet <audet@nortel.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Jonathan Rosenberg writes:

 > It is certainly the case that, in RFC 3261, the SIP invite, without 
 > treatment by some external b2bua service, will reveal the domain of the 
 > originator, through the IP addresses in the SDP alone. 

many ISPs (and also cellular operators officing GPRS/EDGE/UMTS services)
provide a dynamic IP address that changes for each connection to
the internet, for example, this was the last one that i got:

eukaryote41.gprs.dnafinland.fi

in those cases, SDP does not reveal my domain, only the ISP that i was
connected to the network.  it cannot be worse that that when my SIP UA
uses "pseudonymity" gruu , i.e., it must not reveal my real domain
tutpro.com.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 12:50:53 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOGre-0001Pr-NT; Fri, 15 Sep 2006 12:48:30 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOGrd-0001PJ-NM
	for sip@ietf.org; Fri, 15 Sep 2006 12:48:29 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOGrc-0004VG-C5
	for sip@ietf.org; Fri, 15 Sep 2006 12:48:29 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8FGmOo19632; Fri, 15 Sep 2006 12:48:25 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Another Comment on draft-audet-sip-sips-guidelines-03
	w.r.t.	telURI etc
Date: Fri, 15 Sep 2006 11:48:14 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D1E275C@zrc2hxm0.corp.nortel.com>
In-Reply-To: <62B9B0847CC47543B6B3B5E26BD268E60E74621B@zrc2hxm2.corp.nortel.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Another Comment on draft-audet-sip-sips-guidelines-03
	w.r.t.	telURI etc
Thread-Index: AcbYXC7PHan5wMNeTauBmlZOGpTeFwAiHJ5w
From: "Francois Audet" <audet@nortel.com>
To: "Samir Srivastava" <samirsr@nortel.com>, <sip@ietf.org>,
	"Paul Kyzivat" <pkyzivat@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 4d87d2aa806f79fed918a62e834505ca
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Thanks.=20

It was not the intent to exclude those.

Basically, it should say the following:

	If all the Contacts are SIPS, a SIPS AOR MUST also be used by
the UAC. If at least=20
	one of the Contacts is SIP or neither SIPS nor SIPS (e.g.,
mailto, tel, http, https), a=20
	SIP AOR MUST also be used by the UAC. However, The UAS (the
Registrar), MUST treat the=20
	SIP and SIPS schemes of the AOR the same way (i.e., it MUST NOT
care if it is SIP or
	SIPS). Those are mechanical rules with no influence on routing.



________________________________

	From: Srivastava, Samir (SC100:8826)=20
	Sent: Thursday, September 14, 2006 5:16 PM
	To: sip@ietf.org
	Subject: [Sip] Another Comment on
draft-audet-sip-sips-guidelines-03 w.r.t. telURI etc
=09
=09

	1) In section 5, it makes following statement=20
	"However, if an SIPS AOR is used, a SIPS Contact MUST also be
used. If a SIP AOR is used, a SIP Contact MUST also be used. Those are
mechanical rules with no influence on routing. "

	Which doesn't allow the mailto and tel URL registration for SIPS
and SIP. Atleast It should have allowed the telURI and mailto for SIP.=20

	Refer the following from section 10.2.1 of 3261=20
	"A SIP UA can choose to register telephone numbers (with the tel
URL, RFC 2806 [9]) or email addresses (with a mailto URL, RFC 2368 [32])
as Contacts for an address-of-record, for example."=20

	Why we are restricting this...=20
	2) Now the big question 3261, in section 8.1.1.2 gives an
example of 411 with telURI to be interpreted by the visitor domain proxy
(not to be interpreted by the home domain proxy with airport example )
How can we route it securly ?


	Thx=20
	Samir=20



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 16:46:09 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOKVt-0007Fj-3x; Fri, 15 Sep 2006 16:42:17 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOKVs-0007Dl-5u
	for sip@ietf.org; Fri, 15 Sep 2006 16:42:16 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOKVq-0003dM-T0
	for sip@ietf.org; Fri, 15 Sep 2006 16:42:16 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-1.cisco.com with ESMTP; 15 Sep 2006 13:42:14 -0700
X-IronPort-AV: i="4.09,171,1157353200"; 
	d="scan'208"; a="41916063:sNHT31826784"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FKgE4e024180 for <sip@ietf.org>; Fri, 15 Sep 2006 16:42:14 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8FKgEuI009397
	for <sip@ietf.org>; Fri, 15 Sep 2006 16:42:14 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 16:42:14 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 16:42:13 -0400
Message-ID: <450B1025.6010305@cisco.com>
Date: Fri, 15 Sep 2006 16:42:13 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] draft-ietf-sip-gruu-10 comments
References: <285E7350-8C4F-4A92-8E1E-3BFAC67CC8EC@cisco.com>
	<4505B74C.90506@cisco.com>
	<B22D5A4D-F4B9-49C4-9693-9F84F3E09F8F@cisco.com>
In-Reply-To: <B22D5A4D-F4B9-49C4-9693-9F84F3E09F8F@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Sep 2006 20:42:13.0967 (UTC)
	FILETIME=[6CC7CDF0:01C6D907]
DKIM-Signature: a=rsa-sha1; q=dns; l=2051; t=1158352934; x=1159216934;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20draft-ietf-sip-gruu-10=20comments
	|To:Cullen=20Jennings=20<fluffy@cisco.com>;
	X=v=3Dcisco.com=3B=20h=3DpxVSc3rcbO3d4rtZolIqDUu8ECg=3D;
	b=imjKfu5s+cslvC0QjW9Pdjmj58VAX7MoEEH887RGSzonGjUJ9Gm8TpBuwuEvBCXhsTAhY6gY
	mXBxdHiGhoNVjiWMgNq9elUwWLvaMkpjPg1Kj4gWLkmVe8pTgtxmE4KU;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 8b431ad66d60be2d47c7bfeb879db82c
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

comment at end.

	Paul

Cullen Jennings wrote:
> 
> On Sep 11, 2006, at 12:21 PM, Paul Kyzivat wrote:
> 
>>
>>
>> Cullen Jennings wrote:
>>
>>> Section 8.2.2
>>> I think I am likely confused here. I basically don't see why a simple 
>>> classic sip trapezoid deployment would ever need to Record Route. The 
>>> fact that the GRUU refereed to the "home" domain would cause it work 
>>> get back here. As a side note, I find the terms "home", "edge" etc 
>>> very undefined outside the IMS context. Anyways, I believe this 
>>> section might be all right but I am failing to understand what needs 
>>> to be done and why. If I was a non IMS proxy implementer, I suspect I 
>>> would just ignore this whole section.
>>
>> *If* the topology is a simple trapezoid then I think you are correct.
>>
>> But if there is a proxy before the originating home proxy, or after 
>> the terminating home proxy, then the R-R is needed to prevent a spiral.
>>
>> On the originating side, this can be determined by whether there is a 
>> R-R present when the request arrives at the originating home proxy. On 
>> the terminating side that doesn't work, because the potential R-R 
>> hasn't happened yet, and you can't know in advance if it will happen.
>>
>> So the problem is that you don't need it in a trapezoid, but you don't 
>> know if you have a trapezoid.
>>
> 
> But on the terminating side, it seems like the home proxy know there is 
> another proxy because it needs to insert that into the route
> 
> (I don't spend enough time thinking about this so I assume you are 
> right, just trying to make sure I understand)

Well, the terminating home proxy will know if it is including another 
proxy after it. But it doesn't know if that proxy, or some other proxy 
*it* includes, will R-R.

And even if the home proxy isn't inserting a proxy (e.g. no Path header 
registered), it doesn't really know if the contact that was registered 
is the actual destination, or whether it identifies another proxy.

	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 17:13:01 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOKwp-0004bz-VM; Fri, 15 Sep 2006 17:10:07 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOKwo-0004bL-93
	for sip@ietf.org; Fri, 15 Sep 2006 17:10:06 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOKwn-0001Q9-0E
	for sip@ietf.org; Fri, 15 Sep 2006 17:10:06 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 15 Sep 2006 17:10:04 -0400
X-IronPort-AV: i="4.09,171,1157342400"; 
	d="scan'208"; a="102680367:sNHT66264192"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FLA4ql003541 for <sip@ietf.org>; Fri, 15 Sep 2006 17:10:04 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8FLA4uI022930
	for <sip@ietf.org>; Fri, 15 Sep 2006 17:10:04 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 17:10:04 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 17:10:04 -0400
Message-ID: <450B16AB.5050409@cisco.com>
Date: Fri, 15 Sep 2006 17:10:03 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: SIP IETF <sip@ietf.org>
References: <85108216918A984C8C60172D7C84770A56F689@S4DE8PSAAGO.mitte.t-com.de>	<45099F5D.8000904@softarmor.com>	<4509C6E8.6080503@ntt-at.com>	<450A2D66.2020209@cisco.com>
	<450AA88B.8010403@cisco.com>
In-Reply-To: <450AA88B.8010403@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Sep 2006 21:10:04.0138 (UTC)
	FILETIME=[5047ACA0:01C6D90B]
DKIM-Signature: a=rsa-sha1; q=dns; l=2088; t=1158354604; x=1159218604;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20SIP=20WGLC=20=20Draft=20draft-ietf-sip-acr-code-02.txt
	|To:SIP=20IETF=20<sip@ietf.org>;
	X=v=3Dcisco.com=3B=20h=3DreSd4+0hpthPM9L3Vz8od0EdwN8=3D;
	b=eSvRC+Bph+ZMsg7ml3pCkFBqGpKaCi0iqEnZcmdrRJb30AqZRE/NlT+mL7jJZpY6gI7QYZim
	tmT52Rf/EoXTgjOq+XrxKfL6kMmVZlea0e2y2R8ZyElCOUpz7Feke/pD;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 769a46790fb42fbb0b0cc700c82f7081
Subject: [Sip] Re: SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Here are some comments based on a fresh read of this draft.

	Paul

* Intro, second paragraph - typo:

s/to explicitly to indicate/to explicitly indicate/

* Section 3:

    "A server acting on behalf of the called party, such as the UAS or a
    proxy in their domain, MAY generate a 433 ..."

Is there any reason this is restricted to servers acting on behalf of 
the called party? While that is where is is likely to be most useful, I 
can see no reason to prevent a server acting for the calling party, or 
for an intermediary, from using this.

Regarding the controversy over what values of the privacy header might 
justify this response: Why don't we just say that any value in the 
Privacy header other than "none" or "critical" *may* be considered 
grounds for returning this response?

   "It is important to note that lack of a P-Asserted-Identity header
    field, in and of itself, is not an indication of anonymity.  Even
    though a Privacy header field value of 'id' will cause the removal of
    the P-Asserted-Identity header field, there is no way to
    differentiate this case from one in which P-Asserted-Identity was not
    supported by the originating domain.  As a consequence, a request
    without a P-Asserted-Identity is considered anonymous only when there
    is some other indication of this, such as a From header field with a
    display name of 'Anonymous'."

I'm not clear whether this is intended to have normative strength or 
not. I think not. If so, it would be better to make that explicit by 
making it a note or something. I think there is good logic here, but it 
may not suit everyone's policy. And I can see no reason to require this 
policy. If someone has the misfortune to be calling on a path that can't 
deliver the identity then they will not be able to successfully complete 
the call even if they are not overtly blocking their identity. But that 
is life - it is what the callee desires.

(Maybe this question is moot, since these are criteria gating use of 
something at MAY strength.)





_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 15 18:32:09 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOMAL-0001aj-2T; Fri, 15 Sep 2006 18:28:09 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GOMAK-0001a2-0n
	for sip@ietf.org; Fri, 15 Sep 2006 18:28:08 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GOMAI-0000HL-JZ
	for sip@ietf.org; Fri, 15 Sep 2006 18:28:07 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 15 Sep 2006 15:28:06 -0700
X-IronPort-AV: i="4.09,173,1157353200"; 
	d="scan'208"; a="41929298:sNHT33117552"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8FMS6rS019017; Fri, 15 Sep 2006 18:28:06 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8FMS6dM002769; 
	Fri, 15 Sep 2006 18:28:06 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 18:28:06 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 15 Sep 2006 18:28:05 -0400
Message-ID: <450B28F5.20705@cisco.com>
Date: Fri, 15 Sep 2006 18:28:05 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: John Elwell <john.elwell@siemens.com>
Subject: Re: [Sip] draft-ietf-sip-connected-identity-01 comments
References: <013F1EE9-D9C7-4D71-A213-404BAAC59987@cisco.com>
In-Reply-To: <013F1EE9-D9C7-4D71-A213-404BAAC59987@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Sep 2006 22:28:05.0934 (UTC)
	FILETIME=[36D90CE0:01C6D916]
DKIM-Signature: a=rsa-sha1; q=dns; l=1349; t=1158359286; x=1159223286;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20draft-ietf-sip-connected-identity-01=20comments
	|To:John=20Elwell=20<john.elwell@siemens.com>;
	X=v=3Dcisco.com=3B=20h=3D60mmL/20YgmiuteR0KFOwafb4AQ=3D;
	b=AG+QH2gnKML9GzzB/8MVWuGLLnYB9YUfML1QN19JgXdCATdCAMXMRTQ4FjsqpAGhvej2WQNG
	ZmxrLqQlCYk7UjVT1NsYL4v9YCtbav5pBB2ABXmAFVNV5kPbDgLEJQ0k;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 69a74e02bbee44ab4f8eafdbcedd94a1
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I finally read this version carefully. It looks good to me. I only found 
a few minor things:

* Section 1 - Terminology:

        "callee: the user that answers a call by issuing a 2xx response
         to an INVITE request."

for consistency with the definition of caller, I suggest this say:

        "callee: the user of the UA that answers a call by issuing a
         2xx response to an INVITE request."

* Section 6.2:

When sending an UPDATE or reINVITE request that changes the connected 
identity, I think it makes sense that the sender MUST include 
Required:id-change. AFAICT in all cases when a change is sent a 
Supported:id-change has already been received, so it should not be 
necessary to send a Require. But doing so could cover some cases when 
things go amiss. And the scope of a Supported header is one of those 
things that isn't well defined, so better to be safe.

* Section 6.5:

There remains an issue of whether there will in fact be an 
authentication service on the recorded route for the dialog. To ensure 
this, during dialog establishment, the presence of Supported:id-change 
could be used as a hint that an authentication service should be 
included and Record-Route.

* Section 11.1 - Normative References:

Reference [3] is out of date. This is now RFC 4474.

	Thanks,
	Paul


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 16 08:16:07 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GOZ1F-0000g9-Me; Sat, 16 Sep 2006 08:11:37 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GNyRZ-0002TA-3S; Thu, 14 Sep 2006 17:08:21 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GNyRX-0006UR-FV; Thu, 14 Sep 2006 17:08:21 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 14 Sep 2006 17:08:19 -0400
X-IronPort-AV: i="4.09,166,1157342400"; 
	d="scan'208,217"; a="102484767:sNHT58667804"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8EL8IIQ001900; Thu, 14 Sep 2006 17:08:18 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8EL8IdM002469; 
	Thu, 14 Sep 2006 17:08:18 -0400 (EDT)
Received: from xmb-rtp-203.amer.cisco.com ([64.102.31.20]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 14 Sep 2006 17:08:18 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 14 Sep 2006 17:08:17 -0400
Message-ID: <BABC859E6D0B9A4D8448CC7F41CD2B0702625DB4@xmb-rtp-203.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: request for comments : Pre-Congestion Notification BOF
Thread-Index: AcbYP4YfvtirvYIhSFGdD6HjZk4LpgAAArNA
From: "Anna Charny \(acharny\)" <acharny@cisco.com>
To: <tsvwg@ietf.org>, <nsis@ietf.org>, <sip@ietf.org>, <sipping@ietf.org>,
	<ieprep@ietf.org>, <ecrit@ietf.org>, <pwe3@ietf.org>, <dccp@ietf.org>
X-OriginalArrivalTime: 14 Sep 2006 21:08:18.0670 (UTC)
	FILETIME=[E700C8E0:01C6D841]
DKIM-Signature: a=rsa-sha1; q=dns; l=15065; t=1158268098; x=1159132098;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=acharny@cisco.com;
	z=From:=22Anna=20Charny=20\(acharny\)=22=20<acharny@cisco.com>
	|Subject:request=20for=20comments=20=3A=20Pre-Congestion=20Notification=20BOF
	|To:<tsvwg@ietf.org>, =20<nsis@ietf.org>, =20<sip@ietf.org>,
	=20<sipping@ietf.o
	rg>, =0A=20=20=20=20=20=20=20=20<ieprep@ietf.org>, =20<ecrit@ietf.org>,
	=20<pw e3@ietf.org>,=20<dccp@ietf.org>;
	X=v=3Dcisco.com=3B=20h=3DKLVS47oTgOlui5Yc+sNvxQCORMA=3D;
	b=qHx7qIfS4bxqiefMJyFjACDfZGAx4xMzftZYpW53xMM2qDpbS413iuGxFj0Q1d01yL7R8qEO
	KJC5lyYf5+RB6IjsAV8BcZ8qkkAth8VKo8yP0LuBXLe3lhEdJvu/bLJa;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=acharny@cisco.com;
	dkim=pass (
	45 extraneous bytes; sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: fac892abe0c719c7bb99f6e7c710cdae
X-Mailman-Approved-At: Sat, 16 Sep 2006 08:11:36 -0400
Cc: pcn@ietf.org
Subject: [Sip] request for comments : Pre-Congestion Notification BOF
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0380206746=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0380206746==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6D841.E6B39F70"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6D841.E6B39F70
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Dear all,
=20
We have submitted a request for Pre-Congestion Notification BOF at the
San Diego meeting.  The proposed BOF description, agenda, draft charter
and the problem statement draft are in the attached message below.
=20
We welcome your feedback on any of these documents.  Please send your
comments to pcn@ietf.org.
=20
Best Regards,
Anna Charny

________________________________

From: Anna Charny (acharny)=20
Sent: Thursday, September 14, 2006 4:51 PM
To: 'Magnus Westerlund'; 'Lars Eggert'
Cc: 'agenda@ietf.org'; pcn@ietf.org
Subject: Request for Pre-Congestion Notification BOF


Hello Lars and Magnus,
=20
This message constitutes a formal request for Pre-Congestion
Notification BOF at the November IETF meeting in San Diego. =20
=20
The BOF description and its proposed agenda are attached at the end of
this message.
=20
If this BOF is approved,  we would like to request a two-hour slot that
avoids scheduling conflicts with the following working groups:  tsv,
nsis, sip, ieprep, ecrit, pwe3, dccp.
=20
We also ask that you CC agenda@ietf.org with your decision.
=20
Of course we welcome any feedback you might have.
=20
Best Regards,
Anna Charny
=20
PCN BOF Description
=20
The Pre-Congestion Notification (PCN)  BOF will address the problem of
how to provide scalable and resilient admission control and strong QoS
assurance while using packet marking techniques. Current attempts to
deliver QoS using only packet marking (e.g. DiffServ) are limited in the
level of QoS assurance that can be provided without substantial
over-provisioning. To improve the QoS assurance, PCN will add flow
admission control and flow pre-emption. In normal circumstances
admission control should protect the QoS of previously admitted flows.
In times of heavy congestion (for example caused by route changes due to
link or router failure) pre-emption of some flows should preserve the
QoS of remaining flows.
=20
The overall approach will be based on a the concept of a PCN-Region,
within which the functionality is separated between the PCN-Interior
Node (PIN) and the PCN-End Node (PEN). The initial scope of the BOF will
be the case of a single DiffServ region, which maps to a PCN-Region.
PINs mark packet headers when their traffic is above a certain level, as
an early warning of incipient congestion ("pre-congestion"); this builds
on concepts from RFC 3168 "The Addition of Explicit Congestion
Notification to IP".  PENs monitor the markings and that information is
used to make flow admission control and pre-emption decisions. The
decisions could be made by the PENs or by a centralized system (which is
informed of the PCN information).=20

The BOF will address the need and the motivation for PCN work in the
context of IETF, provide a brief overview of prior PCN efforts and
related work,  and review open issues.  The BOF will also discuss the
scope of work and solicit feedback on the proposed charter.  Ultimately,
the goal of the BOF is to solicit community feedback on whether the
problem is clear and needs to be addressed, and consequently whether the
creation of a new PCN WG within the scope of the proposed charter is
warranted.
=20
The draft charter is available from
http://standards.nortel.com/pcn/PCN_draft_charter_v00.txt
<http://standards.nortel.com/pcn/PCN_draft_charter_v00.txt> .  The
problem statement and motivation for the PCN work is discussed in more
detail in draft-chan-pcn-problem-statement-00, which has been submitted
to IETF and is also available at
http://standards.nortel.com/pcn/draft-chan-pcn-problem-statement-00.txt
<http://standards.nortel.com/pcn/draft-chan-pcn-problem-statement-00.txt
> .
=20
Proposed BOF agenda =20
=20
1.  Agenda bashing  (5 min)
2.  Motivation and Problem Statement presentation  (15 min)
3.  Discussion of motivation and problem statement (30 min)
4.  Overview of prior PCN efforts, related work and open issues (15 min)
5.  Overview of the proposed charter (10 min)
6.  Discussion/bashing of the proposed charter (20 min)=20
7.  General discussion and poll on the WG creation (25 min)


------_=_NextPart_001_01C6D841.E6B39F70
Content-Type: text/html;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2800.1555" name=3DGENERATOR></HEAD>
<BODY>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff =
size=3D2><SPAN=20
class=3D256355120-14092006>Dear all,</SPAN></FONT></DIV>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff =
size=3D2><SPAN=20
class=3D256355120-14092006></SPAN></FONT>&nbsp;</DIV>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff =
size=3D2><SPAN=20
class=3D256355120-14092006>We have submitted a request =
for&nbsp;Pre-Congestion=20
Notification BOF at the San Diego meeting.&nbsp; The proposed BOF =
description,=20
agenda, draft charter and&nbsp;the problem statement&nbsp;draft are in =
the=20
attached message below.</SPAN></FONT></DIV>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff =
size=3D2><SPAN=20
class=3D256355120-14092006></SPAN></FONT>&nbsp;</DIV>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff =
size=3D2><SPAN=20
class=3D256355120-14092006>We welcome your&nbsp;feedback on any of these =

documents.&nbsp; </SPAN></FONT><FONT face=3DArial color=3D#0000ff =
size=3D2><SPAN=20
class=3D256355120-14092006>Please send your comments to <A=20
href=3D"mailto:pcn@ietf.org">pcn@ietf.org</A>.</SPAN></FONT></DIV>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff =
size=3D2><SPAN=20
class=3D256355120-14092006></SPAN></FONT>&nbsp;</DIV>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff =
size=3D2><SPAN=20
class=3D256355120-14092006>Best Regards,</SPAN></FONT></DIV>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff =
size=3D2><SPAN=20
class=3D256355120-14092006>Anna Charny</SPAN></FONT></DIV><BR>
<DIV class=3DOutlookMessageHeader lang=3Den-us dir=3Dltr align=3Dleft>
<HR tabIndex=3D-1>
<FONT face=3DTahoma size=3D2><B>From:</B> Anna Charny (acharny) =
<BR><B>Sent:</B>=20
Thursday, September 14, 2006 4:51 PM<BR><B>To:</B> 'Magnus Westerlund'; =
'Lars=20
Eggert'<BR><B>Cc:</B> 'agenda@ietf.org'; pcn@ietf.org<BR><B>Subject:</B> =
Request=20
for Pre-Congestion Notification BOF<BR></FONT><BR></DIV>
<DIV></DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial size=3D2>Hello =
Lars and=20
Magnus,</FONT></SPAN></DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial size=3D2>This =
message=20
constitutes a formal request for Pre-Congestion Notification BOF at the =
November=20
IETF meeting in San Diego.&nbsp; </FONT></SPAN></DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial =
size=3D2></FONT></SPAN><SPAN=20
class=3D011413519-14092006><FONT face=3DArial =
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial size=3D2>The =
BOF description=20
and its proposed agenda are attached at the end of this=20
message.</FONT></SPAN></DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><FONT face=3DArial><FONT size=3D2><SPAN =
class=3D011413519-14092006>If this BOF is=20
approved,&nbsp; we would like to request a two-hour slot that avoids =
scheduling=20
conflicts with the following working groups:&nbsp; </SPAN><SPAN=20
class=3D011413519-14092006>tsv, nsis, sip, ieprep, ecrit, pwe3,=20
dccp.</SPAN></FONT></FONT></DIV>
<DIV><FONT face=3DArial><FONT size=3D2><SPAN=20
class=3D011413519-14092006></SPAN></FONT></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial><FONT size=3D2><SPAN =
class=3D011413519-14092006>We&nbsp;also=20
ask&nbsp;that you CC <A =
href=3D"mailto:agenda@ietf.org">agenda@ietf.org</A> with=20
your decision.</SPAN></FONT></FONT></DIV>
<DIV><FONT face=3DArial><FONT size=3D2><SPAN=20
class=3D011413519-14092006></SPAN></FONT></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial><FONT size=3D2><SPAN =
class=3D011413519-14092006>Of course we=20
welcome any feedback you might have.</SPAN></FONT></FONT></DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial size=3D2>Best=20
Regards,</FONT></SPAN></DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial size=3D2>Anna=20
Charny</FONT></SPAN></DIV>
<DIV><SPAN class=3D011413519-14092006><FONT face=3DArial=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><FONT face=3DArial><FONT size=3D2><U>PCN B<SPAN=20
class=3D011413519-14092006>O</SPAN>F Description<BR></U>&nbsp;<BR>The=20
Pre-Congestion Notification<SPAN class=3D011413519-14092006>=20
(PCN)</SPAN>&nbsp;<SPAN class=3D011413519-14092006> </SPAN>BOF will =
address the=20
problem of how to provide scalable<SPAN class=3D011413519-14092006> and=20
</SPAN>resilient admission control and strong QoS assurance while using =
packet=20
marking techniques. Current attempts to deliver QoS using only packet =
marking=20
(e.g. DiffServ) are limited in the level of QoS assurance that can be =
provided=20
without substantial over-provisioning. To improve the QoS assurance, PCN =
will=20
add flow admission control and flow pre-emption. In normal circumstances =

admission control should protect the QoS of previously admitted flows. =
In times=20
of heavy congestion (for example caused by route changes due to link or =
router=20
failure) pre-emption of some flows should preserve the QoS of remaining=20
flows.<BR>&nbsp;<BR><SPAN class=3D011413519-14092006></SPAN>The overall =
approach=20
will be based on a the concept of a PCN-Region, within which the =
functionality=20
is separated between the PCN-Interior Node (PIN)<SPAN =
class=3D011413519-14092006>=20
</SPAN>and the PCN-End Node (PEN).<SPAN class=3D011413519-14092006> The =
initial=20
scope of the BOF will be the case of a single DiffServ region, =
which&nbsp;maps=20
to&nbsp;<SPAN class=3D011413519-14092006>a =
</SPAN>PCN-Region.&nbsp;&nbsp;=20
</SPAN>PINs<SPAN class=3D011413519-14092006> </SPAN>mark packet headers =
when their=20
traffic is above a certain level, as an early warning of incipient =
congestion=20
(&#8220;pre-congestion&#8221;); this builds on concepts from RFC 3168 =
"The Addition of=20
Explicit Congestion Notification to IP".&nbsp;<SPAN =
class=3D011413519-14092006>=20
</SPAN>PENs<SPAN class=3D011413519-14092006>&nbsp;</SPAN>monitor the =
markings and=20
that information is used to make flow admission control and pre-emption=20
decisions. The decisions could be made by the&nbsp;PENs<SPAN=20
class=3D011413519-14092006> </SPAN>or by a centralized system (which is =
informed=20
of the&nbsp;<SPAN class=3D011413519-14092006>PCN information</SPAN>).=20
</FONT></FONT></DIV>
<DIV><BR><FONT face=3DArial><FONT size=3D2>The B<SPAN=20
class=3D011413519-14092006>O</SPAN>F will address the need and the =
motivation for=20
PCN work in the context of IETF<SPAN class=3D011413519-14092006>, =
</SPAN>provide a=20
brief overview of prior PCN efforts and related work,<SPAN=20
class=3D011413519-14092006>&nbsp; </SPAN></FONT></FONT><FONT =
face=3DArial><FONT=20
size=3D2>and review open issues.&nbsp; The B<SPAN=20
class=3D011413519-14092006>O</SPAN>F will also discuss the scope of work =
and=20
solicit feedback on the proposed charter.&nbsp; Ultimately, the goal of =
the=20
B<SPAN class=3D011413519-14092006>O</SPAN>F is to solicit community =
feedback on=20
whether the problem is clear and needs to be addressed, and consequently =
whether=20
the creation of a new&nbsp;<SPAN class=3D011413519-14092006>PCN =
</SPAN>WG within=20
the scope of the proposed charter is warranted.<BR>&nbsp;<BR><SPAN=20
class=3D011413519-14092006>The&nbsp;draft charter is available from <A=20
title=3Dhttp://standards.nortel.com/pcn/PCN_draft_charter_v00.txt=20
href=3D"http://standards.nortel.com/pcn/PCN_draft_charter_v00.txt"=20
eudora=3D"autourl"><FONT face=3D"Times New Roman"=20
size=3D3>http://standards.nortel.com/pcn/PCN_draft_charter_v00.txt</FONT>=
</A>.&nbsp;=20
The problem statement and motivation for the PCN work is discussed in =
more=20
detail in draft-chan-pcn-problem-statement-00, which has been submitted =
to IETF=20
and is also available&nbsp;at <A=20
title=3Dhttp://standards.nortel.com/pcn/draft-chan-pcn-problem-statement-=
00.txt=20
href=3D"http://standards.nortel.com/pcn/draft-chan-pcn-problem-statement-=
00.txt"=20
eudora=3D"autourl"><FONT face=3D"Times New Roman"=20
size=3D3>http://standards.nortel.com/pcn/draft-chan-pcn-problem-statement=
-00.txt</FONT></A>.</SPAN><BR>&nbsp;<BR><U>Proposed=20
B<SPAN class=3D011413519-14092006>O</SPAN>F agenda&nbsp; =
</U></FONT></FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial><FONT size=3D2><SPAN =
class=3D011413519-14092006>1.=20
</SPAN>&nbsp;Agenda bashing&nbsp;<SPAN class=3D011413519-14092006> =
(</SPAN>5=20
min<SPAN class=3D011413519-14092006>)</SPAN><BR><SPAN=20
class=3D011413519-14092006>2.&nbsp; </SPAN>Motivation and =
Problem&nbsp;<SPAN=20
class=3D011413519-14092006>S</SPAN>tatement presentation&nbsp;<SPAN=20
class=3D011413519-14092006> </SPAN><SPAN =
class=3D011413519-14092006>(</SPAN>15=20
min<SPAN class=3D011413519-14092006>)</SPAN><BR><SPAN=20
class=3D011413519-14092006>3.&nbsp; </SPAN>Discussion of motivation and =
problem=20
statement&nbsp;<SPAN class=3D011413519-14092006>(</SPAN>30 min<SPAN=20
class=3D011413519-14092006>)</SPAN><BR><SPAN =
class=3D011413519-14092006>4.&nbsp;=20
</SPAN>Overview of prior PCN efforts<SPAN class=3D011413519-14092006>,=20
</SPAN><SPAN class=3D011413519-14092006>related work and </SPAN>open=20
issues&nbsp;<SPAN class=3D011413519-14092006>(</SPAN>1<SPAN=20
class=3D011413519-14092006>5</SPAN> min<SPAN=20
class=3D011413519-14092006>)</SPAN><BR><SPAN =
class=3D011413519-14092006>5.&nbsp;=20
</SPAN>Overview of the proposed charter&nbsp;<SPAN=20
class=3D011413519-14092006>(</SPAN>10 min<SPAN=20
class=3D011413519-14092006>)</SPAN><BR><SPAN =
class=3D011413519-14092006>6.&nbsp;=20
</SPAN>Discussion/bashing of the proposed charter&nbsp;<SPAN=20
class=3D011413519-14092006>(</SPAN>20 min<SPAN=20
class=3D011413519-14092006>)</SPAN>&nbsp;<BR><SPAN=20
class=3D011413519-14092006>7.&nbsp; </SPAN>General discussion and poll =
on the WG=20
creation&nbsp;<SPAN class=3D011413519-14092006>(</SPAN>25 min<SPAN=20
class=3D011413519-14092006>)</SPAN><BR></FONT></FONT></DIV></BODY></HTML>=


------_=_NextPart_001_01C6D841.E6B39F70--


--===============0380206746==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0380206746==--




From sip-bounces@ietf.org Mon Sep 18 01:11:10 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPBKX-00056F-UE; Mon, 18 Sep 2006 01:06:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPBKV-000568-3d
	for sip@ietf.org; Mon, 18 Sep 2006 01:06:03 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPBKS-0000JW-QB
	for sip@ietf.org; Mon, 18 Sep 2006 01:06:03 -0400
Received: from sj-dkim-5.cisco.com ([171.68.10.79])
	by sj-iport-5.cisco.com with ESMTP; 17 Sep 2006 22:06:00 -0700
X-IronPort-AV: i="4.09,179,1157353200"; 
	d="scan'208"; a="322222206:sNHT32033532"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-5.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8I55xx6025106; Sun, 17 Sep 2006 22:05:59 -0700
Received: from [192.168.1.3] (sjc-vpn-hwcore-770.cisco.com [10.21.155.2])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8I55w6W000494;
	Sun, 17 Sep 2006 22:05:58 -0700 (PDT)
In-Reply-To: <61968779B8AC4C4BAB421D4C12F008C0052C34C7@XCH47YKF.rim.net>
References: <61968779B8AC4C4BAB421D4C12F008C0052C34C7@XCH47YKF.rim.net>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <495A22B3-C56C-45BD-A889-B70D0D84235E@cisco.com>
Content-Transfer-Encoding: 7bit
From: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
Date: Sun, 17 Sep 2006 22:02:12 -0700
To: Andrew Allen <aallen@rim.com>
X-Mailer: Apple Mail (2.752.2)
DKIM-Signature: a=rsa-sha1; q=dns; l=774; t=1158555959; x=1159419959;
	c=relaxed/simple; s=sjdkim5002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DZ39bG2oCOJMMVzcbRJS9Pt33/8A=3D;
	b=nSj8v3v7JvIF4aVHrtunCb6boDRPrRkOwZVPL8YrgfJUNEDJ72XgttaVkuOrLpaFjRw0brkq
	SDU6sozXoVVe2Im6l79a7PgEdoF5yXZAkbu+QsMM9q462+qVcNJNyiiS;
Authentication-Results: sj-dkim-5.cisco.com; header.From=fluffy@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 93238566e09e6e262849b4f805833007
Cc: IETF SIP List <sip@ietf.org>, Juha Heinanen <jh@tutpro.com>,
	Paul Kyzivat <pkyzivat@cisco.com>,
	"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


There is an book by Richard W. Stevens that promotes exactly this  
solution - ironically for the conversation here, the book is called  
"Dial 911 and Die". Myself, I'm a big fan of dialing 911 to save lives.

On Sep 12, 2006, at 10:15 AM, Andrew Allen wrote:

> Im surprised that Dean hasn't already commented that in Dallas it's
> somewhat similar (except that there they grab a gun!)
>
>
> -----Original Message-----
> From: Christer Holmberg (JO/LMF)  
> [mailto:christer.holmberg@ericsson.com]
>
> Sent: Tuesday, September 12, 2006 9:31 AM
> To: Juha Heinanen; Paul Kyzivat
> Cc: IETF SIP List
> Subject: RE: [Sip] GRUU and Anonymity
>
>
> In Finland people don't call the police. They grab a knife and take  
> care
> of things themselves :)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 01:30:22 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPBg8-0004d9-6P; Mon, 18 Sep 2006 01:28:24 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPBg5-0004cv-Gs
	for sip@ietf.org; Mon, 18 Sep 2006 01:28:21 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPBg1-00059B-Qf
	for sip@ietf.org; Mon, 18 Sep 2006 01:28:21 -0400
Received: from sj-dkim-6.cisco.com ([171.68.10.81])
	by sj-iport-5.cisco.com with ESMTP; 17 Sep 2006 22:28:17 -0700
X-IronPort-AV: i="4.09,179,1157353200"; 
	d="scan'208"; a="322226388:sNHT41046958"
Received: from sj-core-3.cisco.com (sj-core-3.cisco.com [171.68.223.137])
	by sj-dkim-6.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8I5SHYW003638; Sun, 17 Sep 2006 22:28:17 -0700
Received: from [192.168.1.3] (sjc-vpn6-185.cisco.com [10.21.120.185])
	by sj-core-3.cisco.com (8.12.10/8.12.6) with ESMTP id k8I5SFw7009088;
	Sun, 17 Sep 2006 22:28:15 -0700 (PDT)
In-Reply-To: <450AC150.1000405@cisco.com>
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
	<45081D43.5040003@cisco.com> <450AC150.1000405@cisco.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A9BC1F54-0545-4B6E-888E-E68AAC6E11BB@cisco.com>
Content-Transfer-Encoding: 7bit
From: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
Date: Sun, 17 Sep 2006 22:28:15 -0700
To: Jonathan Rosenberg <jdrosen@cisco.com>
X-Mailer: Apple Mail (2.752.2)
DKIM-Signature: a=rsa-sha1; q=dns; l=8960; t=1158557297; x=1159421297;
	c=relaxed/simple; s=sjdkim6002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DZ39bG2oCOJMMVzcbRJS9Pt33/8A=3D;
	b=FuDHrab9Q+Stngcf1sKCoHxOJUuZxsQve2dZh68FHWDVHRTpJe0ZHun9m+7M3Jhg5x9+X1/l
	buTQKI3L9zKmE4Nnf7nxBU+F3eU/JR3+vmfyNE1AeYSw5OZyULONLC6S;
Authentication-Results: sj-dkim-6.cisco.com; header.From=fluffy@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 31b28e25e9d13a22020d8b7aedc9832c
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>,
	Francois Audet <audet@nortel.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


That sounds like a good way out of the conundrum. I think that if we  
make try to find a solution that is plausible to implement and deploy  
and is no worse that what we currently have deployed, then that is  
the minimal level to meet at this point.

I think it is worth nothing that anonymous actions of any kind are  
only as good as the pool they can hide in - if know my IP phone is on  
a network with only one other phone, well nothing helps. The problem  
we are trying to solve here is one that allows this to be useful for  
a large number of deployments and uses cases but clearly it won't  
work for everything.  For a large domain, this will offer reasonable  
security in many of the use cases - in other cases such as you only  
know one person in Finland and the IP address for the RTP is in  
Finland, well it won't help much.  In cases of small domains, I'm  
sure that a larger domain could offer a virtual forward to a GRUU  
that provided something much stronger. However, even with all these  
limitations, this level of anonymization would allow many  
communication providers to meet the needs of their users.


On Sep 15, 2006, at 8:05 AM, Jonathan Rosenberg wrote:

> Back to the original question, I feel strongly that it is not in  
> the scope of gruu to solve THIS level of anonymity. I agree its  
> worth doing but not in the gruu spec.
>
> I think its fair to ask whether or not the gruu spec should be  
> specified in a way that it provides privacy services that are no  
> worse than what what is defined in RFC 3261. And more specifically,  
> if a user does not explicitly invoke a privacy service (through the  
> privacy header or other mechanisms), does GRUU make things worse,  
> and can we specify it in a way that doesnt make it worse?
>
> Clearly one could use gruu as defined today, and if you wanted  
> header anonymity, you can use the 'header' privacy service and that  
> would work and provide you a level of anonymity on par with today  
> without gruu.
>
> It is certainly the case that, in RFC 3261, the SIP invite, without  
> treatment by some external b2bua service, will reveal the domain of  
> the originator, through the IP addresses in the SDP alone. Even  
> with treatment by ANY of the privacy services provided in RFC3323,  
> the domain of the originator is revealed. Consequently I don't  
> think we need to hold up gruu on this feature.
>
> With RFC 3261 today, if the user didn't use an anonymization  
> service, they could include a From header field of  
> username@anonymous.invalid. They could rotate the value of  
> 'username' from call to call, though the IP addresses in various  
> places would probably correlate across calls, since most users have  
> fairly static IPs.
>
> Thus, I would asser that SIP today, without usage of an anonymity  
> service, provides nothing more than pseudonymity (with the IP  
> address as your pseudonym). This would tell me that it would be  
> acceptable to produce a gruu spec which provides nothing more than  
> pseudonymity. Since IP addresses can change over longer periods of  
> time (reboot cycles), I'd also propose that gruu support slowly  
> changing pseudonyms - namely, different on each registration. This  
> is fairly easy to add to gruu.
>
> With this proposal, I would assert that GRUU provides privacy  
> services equivalent to the level of anonymity afforded by RFC 3261,  
> and that better anonymity can be provided by the mechanisms in  
> rfc3323, which get no better or worse with the addition of gruu. I  
> think this is the metric we need to meet, and NO BETTER.
>
> Does this get us out of this conundrum?
>
> -Jonathan R.
>
>
> Paul Kyzivat wrote:
>
>> Francois,
>> You are stating a need for a level of anonymity that Jonathan says  
>> is almost impossible to achieve. Something has to give here.
>> I think the world already deals with differing levels of  
>> anonymity. Callerid blocking in the pstn only blocks your identity  
>> from the receiving party, while the whole intervening network has  
>> access to your identity. And its often negated when making  
>> emergency calls. So if I have a *serious* need to remain  
>> anonymous, invoking callerid blocking already isn't enough.  
>> Instead I am forced to seek out an anonymous phone from which to  
>> originate the call, or use some very complex mechanisms that are  
>> not widely available. And when seeking out an anonymous phone from  
>> which to make my call, I will again typically be limited in the  
>> scope of anonymity. For instance if I cannot travel to an  
>> arbitrary location to make my call then the location I make the  
>> call from can be used to guess where I am.
>> One part of jonathan's old proposal escapes me: why is it  
>> important to support sip identity when making an anonymous call?  
>> Does it really matter to the recipient that the caller is really  
>> the particular anonymous caller it claims to be rather than some  
>> other unknown caller?
>> I am inclined to think that an independent anonymizer service  
>> (b2bua based) running in its own domain, would be sufficient for  
>> all *my* worst case anonymity needs, and that anonymity within the  
>> domain of my own provider would be sufficient for those cases when  
>> I just want to "block callerid". YMMV.
>> It is clear that the more complete forms of anonymity are  
>> relatively expensive to provide, to the point that it probably  
>> wouldn't be good to make that the default. If it became an extra  
>> cost service then it would be self funding. Then people will  
>> settle for less when the need doesn't justify the cost.
>>     Paul
>> Francois Audet wrote:
>>>
>>>>> I guess what I'm trying to say is that if we need
>>>>
>>>> annonymity, it needs
>>>>
>>>>> to be full annonymity. I don't see a value in "pseudonymity".
>>>>
>>>> Why? Certainly there are privacy applications (such as calling  
>>>> the police to anonymously report an incident) where pseudonymity  
>>>> is probably sufficient.
>>>
>>>
>>> I don't believe that a system that "works sometimes" is useful.
>>>
>>> To take the "police" example, if my domain is enough for the police
>>> to track me down (or to a subset small enought that I'm not  
>>> annonymous),
>>> then, well, it's not annonymous anymore. Maybe I have my own  
>>> domain, or you can track that there was only one user with that
>>> particular
>>> domain who might have made that call. Maybe I'm reporting  
>>> something to police, and it shows my employer's domain.  
>>> Suddently, my employer is
>>> embroiled.
>>>
>>> The end-user will not have confidence that's it's really annonymous
>>> because
>>> it's not always annonymous.
>>>
>>> Maybe I'm missing something that is special to GRUU. I'm reading  
>>> Dean's
>>> summary,
>>> but I'm not terribly convinced that the claims are true.
>>>
>>> I'm highly sceptical that somehow that we (IETF) need to provide a
>>> solution to
>>> the GRUU anonimity problem.
>>>
>>> But I could be missising something.
>>>
>>>
>>>>> So, I agree with you. When we DO solve annonymity, it needs to  
>>>>> work with GRUU and everthing else. In the meanwhile, I don't
>>>>
>>>> think GRUU is
>>>>
>>>>> special and requires immediately a solution to annonymity.
>>>>>
>>>> You may have to wait a while. A LONG while.
>>>>
>>>> In:
>>>> http://www.jdrosen.net/papers/draft-rosenberg-sip-identity-pri
>>>
>>> vacy-00.txt
>>>
>>>> I took a stab at some thoughts on true anonymity. Its nearly  
>>>> impossible to do. Even anonymizers aren't sufficient. It is  
>>>> possible that the only solutions require crazy BGP hacks like I  
>>>> describe else a global, massive p2p mesh.
>>>
>>>
>>> Yeah, I have read this, and I do agree that it's MUCH bigger than  
>>> just
>>> GRUU.
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
>
> -- 
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ  
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 01:53:34 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPC28-0004i3-4D; Mon, 18 Sep 2006 01:51:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPC26-0004hr-EA
	for sip@ietf.org; Mon, 18 Sep 2006 01:51:06 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPC25-0004W0-3V
	for sip@ietf.org; Mon, 18 Sep 2006 01:51:06 -0400
Received: from sj-dkim-7.cisco.com ([171.68.10.88])
	by sj-iport-5.cisco.com with ESMTP; 17 Sep 2006 22:51:05 -0700
X-IronPort-AV: i="4.09,179,1157353200"; 
	d="scan'208"; a="322230458:sNHT33651560"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-7.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8I5p4AR006519; Sun, 17 Sep 2006 22:51:04 -0700
Received: from [192.168.1.3] (sjc-vpn6-185.cisco.com [10.21.120.185])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8I5p36W011869;
	Sun, 17 Sep 2006 22:51:04 -0700 (PDT)
In-Reply-To: <450B1025.6010305@cisco.com>
References: <285E7350-8C4F-4A92-8E1E-3BFAC67CC8EC@cisco.com>
	<4505B74C.90506@cisco.com>
	<B22D5A4D-F4B9-49C4-9693-9F84F3E09F8F@cisco.com>
	<450B1025.6010305@cisco.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6BC8C183-DAAF-4763-82CD-AF405AC6823D@cisco.com>
Content-Transfer-Encoding: 7bit
From: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] draft-ietf-sip-gruu-10 comments
Date: Sun, 17 Sep 2006 22:51:04 -0700
To: Paul Kyzivat <pkyzivat@cisco.com>
X-Mailer: Apple Mail (2.752.2)
DKIM-Signature: a=rsa-sha1; q=dns; l=2455; t=1158558664; x=1159422664;
	c=relaxed/simple; s=sjdkim7002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=fluffy@cisco.com;
	z=From:Cullen=20Jennings=20<fluffy@cisco.com>
	|Subject:Re=3A=20[Sip]=20draft-ietf-sip-gruu-10=20comments;
	X=v=3Dcisco.com=3B=20h=3DWfCaFaeXb1Q2ofWJ9m44BX0SOYo=3D;
	b=Y/WvfOCoWN9u/Ohw0lnmkdPp0molbaZqNjyywNWgeDVkCrbt3DkB9gm4nhZ5rPBtU87Pwt/Z
	77RyuB7BfySWGp/e/DGmciTfx3AyHms/NFkJ0osYmRRxs++ajbFHxddI;
Authentication-Results: sj-dkim-7.cisco.com; header.From=fluffy@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 82c9bddb247d9ba4471160a9a865a5f3
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


On Sep 15, 2006, at 1:42 PM, Paul Kyzivat wrote:

> Cullen Jennings wrote:
>> On Sep 11, 2006, at 12:21 PM, Paul Kyzivat wrote:
>>>
>>>
>>> Cullen Jennings wrote:
>>>
>>>> Section 8.2.2
>>>> I think I am likely confused here. I basically don't see why a  
>>>> simple classic sip trapezoid deployment would ever need to  
>>>> Record Route. The fact that the GRUU refereed to the "home"  
>>>> domain would cause it work get back here. As a side note, I find  
>>>> the terms "home", "edge" etc very undefined outside the IMS  
>>>> context. Anyways, I believe this section might be all right but  
>>>> I am failing to understand what needs to be done and why. If I  
>>>> was a non IMS proxy implementer, I suspect I would just ignore  
>>>> this whole section.
>>>
>>> *If* the topology is a simple trapezoid then I think you are  
>>> correct.
>>>
>>> But if there is a proxy before the originating home proxy, or  
>>> after the terminating home proxy, then the R-R is needed to  
>>> prevent a spiral.
>>>
>>> On the originating side, this can be determined by whether there  
>>> is a R-R present when the request arrives at the originating home  
>>> proxy. On the terminating side that doesn't work, because the  
>>> potential R-R hasn't happened yet, and you can't know in advance  
>>> if it will happen.
>>>
>>> So the problem is that you don't need it in a trapezoid, but you  
>>> don't know if you have a trapezoid.
>>>
>> But on the terminating side, it seems like the home proxy know  
>> there is another proxy because it needs to insert that into the route
>> (I don't spend enough time thinking about this so I assume you are  
>> right, just trying to make sure I understand)
>
> Well, the terminating home proxy will know if it is including  
> another proxy after it. But it doesn't know if that proxy, or some  
> other proxy *it* includes, will R-R.
>
> And even if the home proxy isn't inserting a proxy (e.g. no Path  
> header registered), it doesn't really know if the contact that was  
> registered is the actual destination, or whether it identifies  
> another proxy.

Ok, but that seems like the advice should be "if you are using the  
path stuff (or the broken 3rd party registrations) to include another  
proxy, then you must R-R".  Making everyone R-R for no good reason  
just seems like a complicated wasted and will slow down systems that  
don't need it.


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 04:55:41 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPErP-00033a-PR; Mon, 18 Sep 2006 04:52:15 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPErO-00033S-6h
	for sip@ietf.org; Mon, 18 Sep 2006 04:52:14 -0400
Received: from nylon.softarmor.com ([66.135.38.164])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPBvP-0002Fz-O2
	for sip@ietf.org; Mon, 18 Sep 2006 01:44:13 -0400
Received: from [192.168.2.100] (c-24-1-184-104.hsd1.tx.comcast.net
	[24.1.184.104]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.1/8.13.1) with ESMTP id k8I4kmgJ020236
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Sun, 17 Sep 2006 23:46:48 -0500
Message-ID: <450E3380.3070809@softarmor.com>
Date: Mon, 18 Sep 2006 00:49:52 -0500
From: Dean Willis <dean.willis@softarmor.com>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <61968779B8AC4C4BAB421D4C12F008C0052C34C7@XCH47YKF.rim.net>
	<495A22B3-C56C-45BD-A889-B70D0D84235E@cisco.com>
In-Reply-To: <495A22B3-C56C-45BD-A889-B70D0D84235E@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0bc60ec82efc80c84b8d02f4b0e4de22
Cc: IETF SIP List <sip@ietf.org>, Juha Heinanen <jh@tutpro.com>,
	Paul Kyzivat <pkyzivat@cisco.com>,
	"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Cullen Jennings wrote:
> 
> There is an book by Richard W. Stevens that promotes exactly this  
> solution - ironically for the conversation here, the book is called  
> "Dial 911 and Die". Myself, I'm a big fan of dialing 911 to save lives.

My experience to-date is that calling 911 only provides a cleanup crew 
for picking up the pieces, and they only pick up the big pieces and 
leave the smaller ones behind. Of course, 911 response in my neck of the 
woods is measured in hours, and then only if the one ambulance or the 
one deputy working the south end of the county happen to be free right 
now. Fortunately there are some volunteer responders. If someone reports 
a fire, we take marshmallows, because all that's left by the time we get 
there are some nice coals for cooking on, and because marshmallows are 
about the most useful thing the volunteers have for taking to fires. 
Well, marshmallows and some long sticks for roasting them on.

Oddly enough, I saw a car drive off the road, crash into a tree, catch 
fire, and (more or less) explode earlier today. I tried calling 911, and 
failed. The occupants were apparently saved by their airbags, but I'm 
afraid the tree didn't make it.

And if anybody makes a crack about Juha or I serving a similar role in 
preventing fatalities in case of SIP-author crashes, somebody's going to 
be calling for a 911 crew to come pick up some pieces ;-)

--
Dean (tree, not airbag) Willis

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 06:36:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPGQd-0005Qt-5x; Mon, 18 Sep 2006 06:32:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPGQb-0005Qj-90
	for sip@ietf.org; Mon, 18 Sep 2006 06:32:41 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPGQX-0007fC-Ux
	for sip@ietf.org; Mon, 18 Sep 2006 06:32:41 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k8IAWKCX024589;
	Mon, 18 Sep 2006 05:32:20 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 18 Sep 2006 05:32:30 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 18 Sep 2006 12:32:28 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 18 Sep 2006 12:32:28 +0200
Message-ID: <5D1A7985295922448D5550C94DE291804684A3@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Comments on draft-ietf-sip-acr-code-02
Thread-Index: AcbZpzT2TvyhCbGmRvWVbh1nso76og==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 18 Sep 2006 10:32:28.0861 (UTC)
	FILETIME=[BD98E6D0:01C6DB0D]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 769a46790fb42fbb0b0cc700c82f7081
Cc: 
Subject: [Sip] Comments on draft-ietf-sip-acr-code-02
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I have reviewed the entire draft.

1)	In section 3, I wondered if it would be appropriate to have a
couple more key statements of when it does not apply.=20

For example, if we are using RFC 4474, and the recipient of the SIP
request has received the identity but has been unable to obtain the
certificate for the identity, then the proposed 433 response code is
inappropriate, and indeed RFC 4474 specifies response codes for this
situation, which should always be used in preference.

2)	Section 3.=20

   o  The request contained a Privacy header field whose value was 'id'
      [3] or 'user'.  This explicitly excludes the 'header' and
      'session' privacy services, since those do not directly convey the
      identity of the requestor.

I have noted the ongoing discussion on this, and certainly my
interpretation was that the "header" value in the Privacy header could
cover the P-Asserted-Identity header. However I think we should avoid
that this draft attempts to fix unclear specification in RFC 3323 and
(and possibly RFC 3325). I would therefore suggest that we strike the
offending words.

3)	Section 4.

This section seems to be the one that should talk about dialog usage.
While identities are usefully provided in the initial transaction in a
dialog, there is nothing that prevents them being exchanged in later
transactions, and indeed for the support of some services it is
necessary, as the identity will have changed.=20

The document should indicate the effect of receiving a 433 response to a
request sent within an existing dialog, where the implementation does
support this extension, which I assume should be the defauly 4xx
response treatment.

Regards

Keith=20



Keith Drage
Lucent Technologies
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 07:29:51 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPHHx-0000Ft-TM; Mon, 18 Sep 2006 07:27:49 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPHHv-0000FS-A9
	for sip@ietf.org; Mon, 18 Sep 2006 07:27:47 -0400
Received: from [67.15.60.3] (helo=mail.aftek.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPHHt-0003B0-CS
	for sip@ietf.org; Mon, 18 Sep 2006 07:27:47 -0400
Received: (qmail 24472 invoked by uid 510); 18 Sep 2006 06:42:02 -0500
Received: from abum@aftek.com by plain.ev1servers.net by uid 508 with
	qmail-scanner-1.22-st-qms (clamdscan: 0.75.1. perlscan: 1.25-st-qms.
	Clear:RC:0(59.95.41.74):SA:0(-102.4/1.7):. 
	Processed in 3.842333 secs); 18 Sep 2006 11:42:02 -0000
X-Spam-Status: No, hits=-102.4 required=1.7
X-Antivirus-MYDOMAIN-Mail-From: abum@aftek.com via plain.ev1servers.net
X-Antivirus-MYDOMAIN: 1.22-st-qms (Clear:RC:0(59.95.41.74):SA:0(-102.4/1.7):.
	Processed in 3.842333 secs Process 24374)
Received: from unknown (HELO abum) (abum@aftek.com@59.95.41.74)
	by mail.aftek.com with SMTP; 18 Sep 2006 06:41:58 -0500
From: "Abu M. Muttalib" <abum@aftek.com>
To: <sipping@ietf.org>,
	<simple@ietf.org>,
	<sip@ietf.org>
Date: Mon, 18 Sep 2006 17:02:36 +0530
Message-ID: <BKEKJNIHLJDCFGDBOHGMOEKPDJAA.abum@aftek.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_006F_01C6DB44.3DAC9F20"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Spam-Score: 0.1 (/)
X-Scan-Signature: cb256aa41b5300a7da304d7294799ef5
Cc: 
Subject: [Sip] Not able to get OK response for INVITE request
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

------=_NextPart_000_006F_01C6DB44.3DAC9F20
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi,

I am registered to one VoIP server.

In the first log, named,
"arcor.outgoing.on.landline.from.xpro.selected.cap", I am successfully
registered to the Server and am able to make outgoing call to a PSTN no.

In the second log, named,
"arcor.outgoing.on.landline.from.device.selected.cap", though I am
successfully registered, I am not able to make an outgoing call to a PSTN
no.

I tried to analyze the logs but was not able to figure out why I am not
getting the 200 OK in the response of my INVITE request.

Any lead will be appreciated. Please help.

Regards and anticipation,
Abu.

------=_NextPart_000_006F_01C6DB44.3DAC9F20
Content-Type: application/octet-stream;
	name="arcor.outgoing.on.landline.from.device.selected.cap"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="arcor.outgoing.on.landline.from.device.selected.cap"

=D4=C3=B2=A1=02=00=04=00=00=00=00=00=00=00=00=00=FF=FF=00=00=01=00=00=00=1E=
x=0EEIf=06=00o=01=00=00o=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E`=01a=00=
=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

=1Ex=0EEhf=06=00=8B=01=00=00=8B=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=
=C0=01}-!=00=00@=012=B4=0A=
=00=00RA'=CDr=03=03=17G=00=00=00=00E`=01a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

"x=0EE=E3=86=05=00o=01=00=00o=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E`=01=
a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

"x=0EE=18=87=05=00=8B=01=00=00=8B=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00=
E=C0=01}-"=00=00@=012=B3=0A=
=00=00RA'=CDr=03=03=17G=00=00=00=00E`=01a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

$x=0EE>=B5=00=00=92=01=00=00=92=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=
=00=01=84=00=0E@=00@=11BS=0A=
=00=00R=D4=90=18&"=C1=13=C4=01p6=EFREGISTER sip:06120.sip.arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK374841151
From: <sip:061204099698@arcor.de>;tag=3D2625740400
To: <sip:061204099698@arcor.de>
Call-ID: 4113856029@10.0.0.82
CSeq: 2 REGISTER
Contact: <sip:061204099698@10.0.0.82:8897>
max-forwards: 10
expires: 60
user-agent: G-Tek Sipphone
Content-Length: 0

$x=0EE=C5B	=
=00=C3=01=00=00=C3=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E=00=01=B5=00=0E=
@=00=FB=11=87!=D4=90=18&=0A=
=00=00R=13=C4"=C1=01=A1=1A=07SIP/2.0 401 Unauthorized
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK374841151;rport=3D6=
3525
From: <sip:061204099698@arcor.de>;tag=3D2625740400
To: <sip:061204099698@arcor.de>;tag=3DSD8hqo699-
Call-ID: 4113856029@10.0.0.82
CSeq: 2 REGISTER
Server: SSW/0.0.0
WWW-Authenticate: Digest =
realm=3D"arcor.de",nonce=3D"450e7629ebc0900765475189c09858bd18dcc358",alg=
orithm=3DMD5
Content-Length: 0

$x=0EET+=0A=
=00_=02=00=00_=02=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=00=02Q=00=0F@=00=
@=11A=85=0A=
=00=00R=D4=90=18&"=C1=13=C4=02=3D=9C	REGISTER sip:06120.sip.arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK2292258101
From: <sip:061204099698@arcor.de>;tag=3D330560918
To: <sip:061204099698@arcor.de>
Call-ID: 4113856029@10.0.0.82
CSeq: 3 REGISTER
Contact: <sip:061204099698@10.0.0.82:8897>
Authorization: Digest username=3D"061204099698", realm=3D"arcor.de", =
nonce=3D"450e7629ebc0900765475189c09858bd18dcc358", =
uri=3D"sip:06120.sip.arcor.de", =
response=3D"e202425edf8857b238714c06ef3f318a", algorithm=3DMD5
max-forwards: 10
expires: 60
user-agent: G-Tek Sipphone
Content-Length: 0

%x=0EE=03=C7=03=00=E7=01=00=00=E7=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01=D9=00=0F@=00=FB=11=86=FC=D4=90=18&=0A=
=00=00R=13=C4"=C1=01=C5o7SIP/2.0 200 OK
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK2292258101;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D330560918
To: <sip:061204099698@arcor.de>;tag=3DSD8hqo699-4d0b1cf8
Call-ID: 4113856029@10.0.0.82
CSeq: 3 REGISTER
Allow: INVITE, ACK, PRACK, CANCEL, BYE, OPTIONS, MESSAGE, NOTIFY, =
UPDATE, REGISTER, INFO, REFER, SUBSCRIBE
Contact: <sip:061204099698@10.0.0.82:8897>;expires=3D60
Content-Length: 0

%x=0EE=B9=E4=08=00=E6=02=00=00=E6=02=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00=
E=00=02=D8=00=10@=00@=11@=FD=0A=
=00=00R=D4=90=18&"=C1=13=C4=02=C4=AA=12INVITE =
sip:00912025442722@arcor.de SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1317965634
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>
Call-ID: 97868107@10.0.0.82
CSeq: 20 INVITE
Contact: <sip:061204099698@10.0.0.82:8897>
max-forwards: 10
user-agent: G-Tek Sipphone
Content-Type: application/sdp
Content-Length: 315 =20

v=3D0
o=3D061204099698 123456 654321 IN IP4 10.0.0.82
s=3DA conversation
c=3DIN IP4 10.0.0.82
t=3D0 0
m=3Daudio 7981 RTP/AVP 0 3 8 23 18 4 101
a=3Drtpmap:0 PCMU/8000/1
a=3Drtpmap:3 gsm/8000/1
a=3Drtpmap:8 PCMA/8000/1
a=3Drtpmap:23 G726_16/8000/1
a=3Drtpmap:18 G729/8000/1
a=3Drtpmap:4 G723/8000/1
a=3Drtpmap:101 telephone-event
&x=0EE=B8=D2=02=00=1E=01=00=00=1E=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01=10=00=10@=00=FB=11=87=C4=D4=90=18&=0A=
=00=00R=13=C4"=C1=00=FC@1SIP/2.0 100 Trying
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1317965634;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>
Call-ID: 97868107@10.0.0.82
CSeq: 20 INVITE

&x=0EE=E3=0F=03=00=D6=01=00=00=D6=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01=C8=00=10@=00=FB=11=87=0C=D4=90=18&=0A=
=00=00R=13=C4"=C1=01=B4=EF=FBSIP/2.0 407 Proxy Authentication Required
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1317965634;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-
Call-ID: 97868107@10.0.0.82
CSeq: 20 INVITE
Server: SSW/0.0.0
Proxy-Authenticate: Digest =
realm=3D"arcor.de",nonce=3D"450e762b147fb4872d1ddded1a67759310d8f17f",alg=
orithm=3DMD5
Content-Length: 0

&x=0EE=AA5=05=007=01=00=007=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=00=01=
)=00=11@=00@=11B=AB=0A=
=00=00R=D4=90=18&"=C1=13=C4=01=15=F2tACK sip:00912025442722@arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1317965634
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-
Call-ID: 97868107@10.0.0.82
CSeq: 20 ACK
Content-Length: 0

&x=0EE=A4=04=06=00=BE=03=00=00=BE=03=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00=
E=00=03=B0=00=12@=00@=11@#=0A=
=00=00R=D4=90=18&"=C1=13=C4=03=9C=19=F3INVITE =
sip:00912025442722@arcor.de SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1583092097
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>
Call-ID: 97868107@10.0.0.82
CSeq: 21 INVITE
Contact: <sip:061204099698@10.0.0.82:8897>
Proxy-Authorization: Digest username=3D"061204099698", =
realm=3D"arcor.de", nonce=3D"450e762b147fb4872d1ddded1a67759310d8f17f", =
uri=3D"sip:00912025442722@arcor.de", =
response=3D"d0ccaf5fe2becfc1ed39439c4b436eff", algorithm=3DMD5
max-forwards: 10
user-agent: G-Tek Sipphone
Content-Type: application/sdp
Content-Length: 315 =20

v=3D0
o=3D061204099698 123456 654321 IN IP4 10.0.0.82
s=3DA conversation
c=3DIN IP4 10.0.0.82
t=3D0 0
m=3Daudio 7981 RTP/AVP 0 3 8 23 18 4 101
a=3Drtpmap:0 PCMU/8000/1
a=3Drtpmap:3 gsm/8000/1
a=3Drtpmap:8 PCMA/8000/1
a=3Drtpmap:23 G726_16/8000/1
a=3Drtpmap:18 G729/8000/1
a=3Drtpmap:4 G723/8000/1
a=3Drtpmap:101 telephone-event
&x=0EE=1Bg=06=00o=01=00=00o=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E`=01=
a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

&x=0EECg=06=00=8B=01=00=00=8B=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=C0=
=01}-#=00=00@=012=B2=0A=
=00=00RA'=CDr=03=03=17G=00=00=00=00E`=01a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

&x=0EE=1D=B1=0A=
=00=D6=01=00=00=D6=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E=00=01=C8=00=10=
@=00=FB=11=87=0C=D4=90=18&=0A=
=00=00R=13=C4"=C1=01=B4=EF=FBSIP/2.0 407 Proxy Authentication Required
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1317965634;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-
Call-ID: 97868107@10.0.0.82
CSeq: 20 INVITE
Server: SSW/0.0.0
Proxy-Authenticate: Digest =
realm=3D"arcor.de",nonce=3D"450e762b147fb4872d1ddded1a67759310d8f17f",alg=
orithm=3DMD5
Content-Length: 0

&x=0EE=DB=A4=0B=007=01=00=007=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=00=
=01)=00=13@=00@=11B=A9=0A=
=00=00R=D4=90=18&"=C1=13=C4=01=15=F2tACK sip:00912025442722@arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1317965634
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-
Call-ID: 97868107@10.0.0.82
CSeq: 20 ACK
Content-Length: 0

'x=0EEI3=00=00=1E=01=00=00=1E=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E=00=
=01=10=00=12@=00=FB=11=87=C2=D4=90=18&=0A=
=00=00R=13=C4"=C1=00=FCA0SIP/2.0 100 Trying
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1583092097;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>
Call-ID: 97868107@10.0.0.82
CSeq: 21 INVITE

'x=0EE=83=AD=00=00=8B=01=00=00=8B=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01}=00=12@=00=FB=11=87U=D4=90=18&=0A=
=00=00R=13=C4"=C1=01i=B6=01SIP/2.0 503 Service Unavailable
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1583092097;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-35c93eaa
Call-ID: 97868107@10.0.0.82
CSeq: 21 INVITE
Reason: Q.850 ;cause=3D42 ;text=3D"2"
Server: SSW/0.0.0
Content-Length: 0

'x=0EE=FC=EB=01=00?=01=00=00?=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=00=
=011=00=14@=00@=11B=A0=0A=
=00=00R=D4=90=18&"=C1=13=C4=01=1D=BF7ACK sip:00912025442722@arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1583092097
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-35c93eaa
Call-ID: 97868107@10.0.0.82
CSeq: 21 ACK
Content-Length: 0

'x=0EE=C2=11=08=00=8B=01=00=00=8B=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01}=00=12@=00=FB=11=87U=D4=90=18&=0A=
=00=00R=13=C4"=C1=01i=B6=01SIP/2.0 503 Service Unavailable
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1583092097;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-35c93eaa
Call-ID: 97868107@10.0.0.82
CSeq: 21 INVITE
Reason: Q.850 ;cause=3D42 ;text=3D"2"
Server: SSW/0.0.0
Content-Length: 0

*x=0EE=89)=06=00o=01=00=00o=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E`=01=
a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

*x=0EE=A5)=06=00=8B=01=00=00=8B=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=
=C0=01}-$=00=00@=012=B1=0A=
=00=00RA'=CDr=03=03=17G=00=00=00=00E`=01a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

<x=0EE=0C=8A=0C=00=DD=01=00=00=DD=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00=
E=00=01=CF=02|@=00@=11=1D=B7=0A=
=00=00RA'=CDr=13=C4=13=DA=01=BB=B4xREGISTER sip:fwd.pulver.com SIP/2.0
Via: SIP/2.0/UDP =
10.0.0.82:5060;rport;branch=3Dz9hG4bK1523C5100ED0EA203E554F80E9071E40
From: 744603 <sip:744603@fwd.pulver.com>;tag=3D1200694077
To: 744603 <sip:744603@fwd.pulver.com>
Contact: "744603" <sip:744603@10.0.0.82:5060>
Call-ID: 1A6B8727012B2FA3BA627BC709EA4F5F@fwd.pulver.com
CSeq: 64486 REGISTER
Expires: 1800
Max-Forwards: 70
User-Agent: X-Lite release 1105d
Content-Length: 0

=3Dx=0EEg=C8=03=00=95=01=00=00=95=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E`=01=87=00=00@=00=FB=11e=1AA'=CDr=0A=
=00=00R=13=DA=13=C4=01s<2SIP/2.0 200 OK
To: 744603<sip:744603@fwd.pulver.com>;tag=3D023f6359
From: 744603 <sip:744603@fwd.pulver.com>;tag=3D1200694077
Via: SIP/2.0/UDP =
10.0.0.82:5060;branch=3Dz9hG4bK1523C5100ED0EA203E554F80E9071E40
Call-ID: 1A6B8727012B2FA3BA627BC709EA4F5F@fwd.pulver.com
CSeq: 64486 REGISTER
Contact: "744603"<sip:744603@10.0.0.82:5060>;expires=3D57
Content-Length: 0


------=_NextPart_000_006F_01C6DB44.3DAC9F20
Content-Type: application/octet-stream;
	name="arcor.outgoing.on.landline.from.xpro.selected.cap"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="arcor.outgoing.on.landline.from.xpro.selected.cap"

=D4=C3=B2=A1=02=00=04=00=00=00=00=00=00=00=00=00=FF=FF=00=00=01=00=00=00=1E=
x=0EEIf=06=00o=01=00=00o=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E`=01a=00=
=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

=1Ex=0EEhf=06=00=8B=01=00=00=8B=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=
=C0=01}-!=00=00@=012=B4=0A=
=00=00RA'=CDr=03=03=17G=00=00=00=00E`=01a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

"x=0EE=E3=86=05=00o=01=00=00o=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E`=01=
a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

"x=0EE=18=87=05=00=8B=01=00=00=8B=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00=
E=C0=01}-"=00=00@=012=B3=0A=
=00=00RA'=CDr=03=03=17G=00=00=00=00E`=01a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

$x=0EE>=B5=00=00=92=01=00=00=92=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=
=00=01=84=00=0E@=00@=11BS=0A=
=00=00R=D4=90=18&"=C1=13=C4=01p6=EFREGISTER sip:06120.sip.arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK374841151
From: <sip:061204099698@arcor.de>;tag=3D2625740400
To: <sip:061204099698@arcor.de>
Call-ID: 4113856029@10.0.0.82
CSeq: 2 REGISTER
Contact: <sip:061204099698@10.0.0.82:8897>
max-forwards: 10
expires: 60
user-agent: G-Tek Sipphone
Content-Length: 0

$x=0EE=C5B	=
=00=C3=01=00=00=C3=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E=00=01=B5=00=0E=
@=00=FB=11=87!=D4=90=18&=0A=
=00=00R=13=C4"=C1=01=A1=1A=07SIP/2.0 401 Unauthorized
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK374841151;rport=3D6=
3525
From: <sip:061204099698@arcor.de>;tag=3D2625740400
To: <sip:061204099698@arcor.de>;tag=3DSD8hqo699-
Call-ID: 4113856029@10.0.0.82
CSeq: 2 REGISTER
Server: SSW/0.0.0
WWW-Authenticate: Digest =
realm=3D"arcor.de",nonce=3D"450e7629ebc0900765475189c09858bd18dcc358",alg=
orithm=3DMD5
Content-Length: 0

$x=0EET+=0A=
=00_=02=00=00_=02=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=00=02Q=00=0F@=00=
@=11A=85=0A=
=00=00R=D4=90=18&"=C1=13=C4=02=3D=9C	REGISTER sip:06120.sip.arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK2292258101
From: <sip:061204099698@arcor.de>;tag=3D330560918
To: <sip:061204099698@arcor.de>
Call-ID: 4113856029@10.0.0.82
CSeq: 3 REGISTER
Contact: <sip:061204099698@10.0.0.82:8897>
Authorization: Digest username=3D"061204099698", realm=3D"arcor.de", =
nonce=3D"450e7629ebc0900765475189c09858bd18dcc358", =
uri=3D"sip:06120.sip.arcor.de", =
response=3D"e202425edf8857b238714c06ef3f318a", algorithm=3DMD5
max-forwards: 10
expires: 60
user-agent: G-Tek Sipphone
Content-Length: 0

%x=0EE=03=C7=03=00=E7=01=00=00=E7=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01=D9=00=0F@=00=FB=11=86=FC=D4=90=18&=0A=
=00=00R=13=C4"=C1=01=C5o7SIP/2.0 200 OK
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK2292258101;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D330560918
To: <sip:061204099698@arcor.de>;tag=3DSD8hqo699-4d0b1cf8
Call-ID: 4113856029@10.0.0.82
CSeq: 3 REGISTER
Allow: INVITE, ACK, PRACK, CANCEL, BYE, OPTIONS, MESSAGE, NOTIFY, =
UPDATE, REGISTER, INFO, REFER, SUBSCRIBE
Contact: <sip:061204099698@10.0.0.82:8897>;expires=3D60
Content-Length: 0

%x=0EE=B9=E4=08=00=E6=02=00=00=E6=02=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00=
E=00=02=D8=00=10@=00@=11@=FD=0A=
=00=00R=D4=90=18&"=C1=13=C4=02=C4=AA=12INVITE =
sip:00912025442722@arcor.de SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1317965634
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>
Call-ID: 97868107@10.0.0.82
CSeq: 20 INVITE
Contact: <sip:061204099698@10.0.0.82:8897>
max-forwards: 10
user-agent: G-Tek Sipphone
Content-Type: application/sdp
Content-Length: 315 =20

v=3D0
o=3D061204099698 123456 654321 IN IP4 10.0.0.82
s=3DA conversation
c=3DIN IP4 10.0.0.82
t=3D0 0
m=3Daudio 7981 RTP/AVP 0 3 8 23 18 4 101
a=3Drtpmap:0 PCMU/8000/1
a=3Drtpmap:3 gsm/8000/1
a=3Drtpmap:8 PCMA/8000/1
a=3Drtpmap:23 G726_16/8000/1
a=3Drtpmap:18 G729/8000/1
a=3Drtpmap:4 G723/8000/1
a=3Drtpmap:101 telephone-event
&x=0EE=B8=D2=02=00=1E=01=00=00=1E=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01=10=00=10@=00=FB=11=87=C4=D4=90=18&=0A=
=00=00R=13=C4"=C1=00=FC@1SIP/2.0 100 Trying
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1317965634;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>
Call-ID: 97868107@10.0.0.82
CSeq: 20 INVITE

&x=0EE=E3=0F=03=00=D6=01=00=00=D6=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01=C8=00=10@=00=FB=11=87=0C=D4=90=18&=0A=
=00=00R=13=C4"=C1=01=B4=EF=FBSIP/2.0 407 Proxy Authentication Required
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1317965634;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-
Call-ID: 97868107@10.0.0.82
CSeq: 20 INVITE
Server: SSW/0.0.0
Proxy-Authenticate: Digest =
realm=3D"arcor.de",nonce=3D"450e762b147fb4872d1ddded1a67759310d8f17f",alg=
orithm=3DMD5
Content-Length: 0

&x=0EE=AA5=05=007=01=00=007=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=00=01=
)=00=11@=00@=11B=AB=0A=
=00=00R=D4=90=18&"=C1=13=C4=01=15=F2tACK sip:00912025442722@arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1317965634
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-
Call-ID: 97868107@10.0.0.82
CSeq: 20 ACK
Content-Length: 0

&x=0EE=A4=04=06=00=BE=03=00=00=BE=03=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00=
E=00=03=B0=00=12@=00@=11@#=0A=
=00=00R=D4=90=18&"=C1=13=C4=03=9C=19=F3INVITE =
sip:00912025442722@arcor.de SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1583092097
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>
Call-ID: 97868107@10.0.0.82
CSeq: 21 INVITE
Contact: <sip:061204099698@10.0.0.82:8897>
Proxy-Authorization: Digest username=3D"061204099698", =
realm=3D"arcor.de", nonce=3D"450e762b147fb4872d1ddded1a67759310d8f17f", =
uri=3D"sip:00912025442722@arcor.de", =
response=3D"d0ccaf5fe2becfc1ed39439c4b436eff", algorithm=3DMD5
max-forwards: 10
user-agent: G-Tek Sipphone
Content-Type: application/sdp
Content-Length: 315 =20

v=3D0
o=3D061204099698 123456 654321 IN IP4 10.0.0.82
s=3DA conversation
c=3DIN IP4 10.0.0.82
t=3D0 0
m=3Daudio 7981 RTP/AVP 0 3 8 23 18 4 101
a=3Drtpmap:0 PCMU/8000/1
a=3Drtpmap:3 gsm/8000/1
a=3Drtpmap:8 PCMA/8000/1
a=3Drtpmap:23 G726_16/8000/1
a=3Drtpmap:18 G729/8000/1
a=3Drtpmap:4 G723/8000/1
a=3Drtpmap:101 telephone-event
&x=0EE=1Bg=06=00o=01=00=00o=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E`=01=
a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

&x=0EECg=06=00=8B=01=00=00=8B=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=C0=
=01}-#=00=00@=012=B2=0A=
=00=00RA'=CDr=03=03=17G=00=00=00=00E`=01a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

&x=0EE=1D=B1=0A=
=00=D6=01=00=00=D6=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E=00=01=C8=00=10=
@=00=FB=11=87=0C=D4=90=18&=0A=
=00=00R=13=C4"=C1=01=B4=EF=FBSIP/2.0 407 Proxy Authentication Required
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1317965634;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-
Call-ID: 97868107@10.0.0.82
CSeq: 20 INVITE
Server: SSW/0.0.0
Proxy-Authenticate: Digest =
realm=3D"arcor.de",nonce=3D"450e762b147fb4872d1ddded1a67759310d8f17f",alg=
orithm=3DMD5
Content-Length: 0

&x=0EE=DB=A4=0B=007=01=00=007=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=00=
=01)=00=13@=00@=11B=A9=0A=
=00=00R=D4=90=18&"=C1=13=C4=01=15=F2tACK sip:00912025442722@arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1317965634
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-
Call-ID: 97868107@10.0.0.82
CSeq: 20 ACK
Content-Length: 0

'x=0EEI3=00=00=1E=01=00=00=1E=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E=00=
=01=10=00=12@=00=FB=11=87=C2=D4=90=18&=0A=
=00=00R=13=C4"=C1=00=FCA0SIP/2.0 100 Trying
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1583092097;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>
Call-ID: 97868107@10.0.0.82
CSeq: 21 INVITE

'x=0EE=83=AD=00=00=8B=01=00=00=8B=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01}=00=12@=00=FB=11=87U=D4=90=18&=0A=
=00=00R=13=C4"=C1=01i=B6=01SIP/2.0 503 Service Unavailable
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1583092097;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-35c93eaa
Call-ID: 97868107@10.0.0.82
CSeq: 21 INVITE
Reason: Q.850 ;cause=3D42 ;text=3D"2"
Server: SSW/0.0.0
Content-Length: 0

'x=0EE=FC=EB=01=00?=01=00=00?=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=00=
=011=00=14@=00@=11B=A0=0A=
=00=00R=D4=90=18&"=C1=13=C4=01=1D=BF7ACK sip:00912025442722@arcor.de =
SIP/2.0
Via: SIP/2.0/UDP 10.0.0.82:8897;rport;branch=3Dz9hG4bK1583092097
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-35c93eaa
Call-ID: 97868107@10.0.0.82
CSeq: 21 ACK
Content-Length: 0

'x=0EE=C2=11=08=00=8B=01=00=00=8B=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E=00=01}=00=12@=00=FB=11=87U=D4=90=18&=0A=
=00=00R=13=C4"=C1=01i=B6=01SIP/2.0 503 Service Unavailable
Via: SIP/2.0/UDP =
10.0.0.82:8897;received=3D59.95.41.74;branch=3Dz9hG4bK1583092097;rport=3D=
63525
From: <sip:061204099698@arcor.de>;tag=3D4151104476
To: <sip:00912025442722@arcor.de>;tag=3DSDq9fs299-35c93eaa
Call-ID: 97868107@10.0.0.82
CSeq: 21 INVITE
Reason: Q.850 ;cause=3D42 ;text=3D"2"
Server: SSW/0.0.0
Content-Length: 0

*x=0EE=89)=06=00o=01=00=00o=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00E`=01=
a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

*x=0EE=A5)=06=00=8B=01=00=00=8B=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00E=
=C0=01}-$=00=00@=012=B1=0A=
=00=00RA'=CDr=03=03=17G=00=00=00=00E`=01a=00=00@=00=FB=11e@A'=CDr=0A=
=00=00R=13=DA"=96=01M=E5TOPTIONS sip:626994@10.0.0.82:8854 SIP/2.0
To: <sip:626994@fwd.pulver.com>
From: <sip:626994@fwd.pulver.com>;tag=3D9a8eb617
Via: SIP/2.0/UDP =
65.39.205.114:5082;branch=3Dz9hG4bK-d87543-479f1632615e46043715-1--d87543=
-
Call-ID: 5c44406f3a866532e00f893b01fc886dc1728607
CSeq: 1001 OPTIONS
Max-Forwards: 70
Content-Length: 0

<x=0EE=0C=8A=0C=00=DD=01=00=00=DD=01=00=00=00P=BA4+=D3=00=15=F2;!=9E=08=00=
E=00=01=CF=02|@=00@=11=1D=B7=0A=
=00=00RA'=CDr=13=C4=13=DA=01=BB=B4xREGISTER sip:fwd.pulver.com SIP/2.0
Via: SIP/2.0/UDP =
10.0.0.82:5060;rport;branch=3Dz9hG4bK1523C5100ED0EA203E554F80E9071E40
From: 744603 <sip:744603@fwd.pulver.com>;tag=3D1200694077
To: 744603 <sip:744603@fwd.pulver.com>
Contact: "744603" <sip:744603@10.0.0.82:5060>
Call-ID: 1A6B8727012B2FA3BA627BC709EA4F5F@fwd.pulver.com
CSeq: 64486 REGISTER
Expires: 1800
Max-Forwards: 70
User-Agent: X-Lite release 1105d
Content-Length: 0

=3Dx=0EEg=C8=03=00=95=01=00=00=95=01=00=00=00=15=F2;!=9E=00P=BA4+=D3=08=00=
E`=01=87=00=00@=00=FB=11e=1AA'=CDr=0A=
=00=00R=13=DA=13=C4=01s<2SIP/2.0 200 OK
To: 744603<sip:744603@fwd.pulver.com>;tag=3D023f6359
From: 744603 <sip:744603@fwd.pulver.com>;tag=3D1200694077
Via: SIP/2.0/UDP =
10.0.0.82:5060;branch=3Dz9hG4bK1523C5100ED0EA203E554F80E9071E40
Call-ID: 1A6B8727012B2FA3BA627BC709EA4F5F@fwd.pulver.com
CSeq: 64486 REGISTER
Contact: "744603"<sip:744603@10.0.0.82:5060>;expires=3D57
Content-Length: 0


------=_NextPart_000_006F_01C6DB44.3DAC9F20
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
------=_NextPart_000_006F_01C6DB44.3DAC9F20--






From sip-bounces@ietf.org Mon Sep 18 08:58:46 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPIfH-0001r6-IK; Mon, 18 Sep 2006 08:55:59 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPIfE-0001qC-TP
	for sip@ietf.org; Mon, 18 Sep 2006 08:55:56 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPIfB-00027Z-5B
	for sip@ietf.org; Mon, 18 Sep 2006 08:55:56 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 18 Sep 2006 08:55:53 -0400
X-IronPort-AV: i="4.09,180,1157342400"; 
	d="scan'208"; a="102959956:sNHT32940332"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8ICtqIL019488 for <sip@ietf.org>; Mon, 18 Sep 2006 08:55:52 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8ICtquI009712
	for <sip@ietf.org>; Mon, 18 Sep 2006 08:55:52 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 08:55:49 -0400
Received: from [10.86.240.58] ([10.86.240.58]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 08:55:49 -0400
Message-ID: <450E9754.1010905@cisco.com>
Date: Mon, 18 Sep 2006 08:55:48 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] draft-ietf-sip-gruu-10 comments
References: <285E7350-8C4F-4A92-8E1E-3BFAC67CC8EC@cisco.com>
	<4505B74C.90506@cisco.com>
	<B22D5A4D-F4B9-49C4-9693-9F84F3E09F8F@cisco.com>
	<450B1025.6010305@cisco.com>
	<6BC8C183-DAAF-4763-82CD-AF405AC6823D@cisco.com>
In-Reply-To: <6BC8C183-DAAF-4763-82CD-AF405AC6823D@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Sep 2006 12:55:49.0339 (UTC)
	FILETIME=[C3E1B2B0:01C6DB21]
DKIM-Signature: a=rsa-sha1; q=dns; l=4115; t=1158584152; x=1159448152;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20draft-ietf-sip-gruu-10=20comments
	|To:Cullen=20Jennings=20<fluffy@cisco.com>;
	X=v=3Dcisco.com=3B=20h=3DpxVSc3rcbO3d4rtZolIqDUu8ECg=3D;
	b=ixWDuuXn8DPVRJpt7HFgev56hDeilRF9GMfuAncTI4y6QgAjVfWa02MUvYngMERgu44bocMM
	n0ABXtvPJvdGeElO9/1/tYDFJWvcZ8tamPdEoNXc8celK0Uz9Mbo/9I8;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 14582b0692e7f70ce7111d04db3781c8
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Cullen Jennings wrote:
> 
> On Sep 15, 2006, at 1:42 PM, Paul Kyzivat wrote:
> 
>> Cullen Jennings wrote:
>>> On Sep 11, 2006, at 12:21 PM, Paul Kyzivat wrote:
>>>>
>>>>
>>>> Cullen Jennings wrote:
>>>>
>>>>> Section 8.2.2
>>>>> I think I am likely confused here. I basically don't see why a 
>>>>> simple classic sip trapezoid deployment would ever need to Record 
>>>>> Route. The fact that the GRUU refereed to the "home" domain would 
>>>>> cause it work get back here. As a side note, I find the terms 
>>>>> "home", "edge" etc very undefined outside the IMS context. Anyways, 
>>>>> I believe this section might be all right but I am failing to 
>>>>> understand what needs to be done and why. If I was a non IMS proxy 
>>>>> implementer, I suspect I would just ignore this whole section.
>>>>
>>>> *If* the topology is a simple trapezoid then I think you are correct.
>>>>
>>>> But if there is a proxy before the originating home proxy, or after 
>>>> the terminating home proxy, then the R-R is needed to prevent a spiral.
>>>>
>>>> On the originating side, this can be determined by whether there is 
>>>> a R-R present when the request arrives at the originating home 
>>>> proxy. On the terminating side that doesn't work, because the 
>>>> potential R-R hasn't happened yet, and you can't know in advance if 
>>>> it will happen.
>>>>
>>>> So the problem is that you don't need it in a trapezoid, but you 
>>>> don't know if you have a trapezoid.
>>>>
>>> But on the terminating side, it seems like the home proxy know there 
>>> is another proxy because it needs to insert that into the route
>>> (I don't spend enough time thinking about this so I assume you are 
>>> right, just trying to make sure I understand)
>>
>> Well, the terminating home proxy will know if it is including another 
>> proxy after it. But it doesn't know if that proxy, or some other proxy 
>> *it* includes, will R-R.
>>
>> And even if the home proxy isn't inserting a proxy (e.g. no Path 
>> header registered), it doesn't really know if the contact that was 
>> registered is the actual destination, or whether it identifies another 
>> proxy.
> 
> Ok, but that seems like the advice should be "if you are using the path 
> stuff (or the broken 3rd party registrations) to include another proxy, 
> then you must R-R". 

Who is "you"?

The entity doing the R-R is the home proxy. The entity initiating the 
registration is something else.

The home proxy knows nothing about the characteristics of the address 
being registered other than what it can tell by examination of the URI 
itself, which isn't helpful.

The entity requesting the registration may often know that it is 
registering its own address and so it one hop away. But if it is doing a 
3rd party registration then it may well not know one way or the other.

So, at best I think we can try to exploit affirmative statements that 
there are no intervening hops. We have begin to identify cases where we 
make this assumption - notable sip-outbound. So I guess the question is 
whether we should *require* that contacts registered for GRUUs be the 
address of a UA and not a proxy, in order that the home proxy can know 
it doesn't need to R-R.

It gives me heartburn to impose restrictions like this. One of the 
powers of SIP is that you don't need to know whether a SIP URI denotes a 
UI or proxy when using it.

> Making everyone R-R for no good reason just seems 
> like a complicated wasted and will slow down systems that don't need it.

Well, if you omit the R-R because you know requests will be routed to 
you anyway, then no hops are being saved by omitting the R-R.

But it may save something: if you traverse the trapezoid for 
out-of-dialog requests, are using gruus at both ends, but don't R-R, 
then in-dialog requests will each traverse only *one* of the proxies. If 
both proxies R-R, then mid-dialog requests will traverse both.

Whether that works out in practice, and if so whether it is an 
improvement, is an open question.

	Paul

> 
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 09:51:11 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPJTq-0005Ej-Id; Mon, 18 Sep 2006 09:48:14 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPJTp-0005Ee-65
	for sip@ietf.org; Mon, 18 Sep 2006 09:48:13 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPJTn-0007hM-Gd
	for sip@ietf.org; Mon, 18 Sep 2006 09:48:13 -0400
Received: from sj-dkim-6.cisco.com ([171.68.10.81])
	by sj-iport-5.cisco.com with ESMTP; 18 Sep 2006 06:48:11 -0700
X-IronPort-AV: i="4.09,180,1157353200"; 
	d="scan'208"; a="322350140:sNHT53171666"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-6.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8IDmAtv005511; Mon, 18 Sep 2006 06:48:10 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8IDm16i015100;
	Mon, 18 Sep 2006 06:48:09 -0700 (PDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 09:48:06 -0400
Received: from [192.168.1.88] ([10.86.242.235]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 09:48:05 -0400
Message-ID: <450EA394.6000005@cisco.com>
Date: Mon, 18 Sep 2006 09:48:04 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
	<45081D43.5040003@cisco.com> <450AC150.1000405@cisco.com>
	<A9BC1F54-0545-4B6E-888E-E68AAC6E11BB@cisco.com>
In-Reply-To: <A9BC1F54-0545-4B6E-888E-E68AAC6E11BB@cisco.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Sep 2006 13:48:05.0623 (UTC)
	FILETIME=[1140A870:01C6DB29]
DKIM-Signature: a=rsa-sha1; q=dns; l=9860; t=1158587290; x=1159451290;
	c=relaxed/simple; s=sjdkim6002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=tHzP2Mb7vUqKtoiHKqTh2dTCXSZyKwXxYElTH9JWWyL4lNFT7nY1QWBTWRJkqpRMstPlzd3P
	1OkdA31m980OpX/tRMjuduCiXCqNJrd8TIfHFEoi6SEVuC+fnW8dpPzO;
Authentication-Results: sj-dkim-6.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7268a2980febc47a9fa732aba2b737ba
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>,
	Francois Audet <audet@nortel.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

So what is your view on the specific mechanism I was proposing to meet 
this objective? Namely, that the registrar would provide you with a 
'regular' gruu and a pseudononymous one, and the latter changes every 
time you create a new registration (not refresh, a new one entirely).

-Jonathan R.

Cullen Jennings wrote:

> 
> That sounds like a good way out of the conundrum. I think that if we  
> make try to find a solution that is plausible to implement and deploy  
> and is no worse that what we currently have deployed, then that is  the 
> minimal level to meet at this point.
> 
> I think it is worth nothing that anonymous actions of any kind are  only 
> as good as the pool they can hide in - if know my IP phone is on  a 
> network with only one other phone, well nothing helps. The problem  we 
> are trying to solve here is one that allows this to be useful for  a 
> large number of deployments and uses cases but clearly it won't  work 
> for everything.  For a large domain, this will offer reasonable  
> security in many of the use cases - in other cases such as you only  
> know one person in Finland and the IP address for the RTP is in  
> Finland, well it won't help much.  In cases of small domains, I'm  sure 
> that a larger domain could offer a virtual forward to a GRUU  that 
> provided something much stronger. However, even with all these  
> limitations, this level of anonymization would allow many  communication 
> providers to meet the needs of their users.
> 
> 
> On Sep 15, 2006, at 8:05 AM, Jonathan Rosenberg wrote:
> 
>> Back to the original question, I feel strongly that it is not in  the 
>> scope of gruu to solve THIS level of anonymity. I agree its  worth 
>> doing but not in the gruu spec.
>>
>> I think its fair to ask whether or not the gruu spec should be  
>> specified in a way that it provides privacy services that are no  
>> worse than what what is defined in RFC 3261. And more specifically,  
>> if a user does not explicitly invoke a privacy service (through the  
>> privacy header or other mechanisms), does GRUU make things worse,  and 
>> can we specify it in a way that doesnt make it worse?
>>
>> Clearly one could use gruu as defined today, and if you wanted  header 
>> anonymity, you can use the 'header' privacy service and that  would 
>> work and provide you a level of anonymity on par with today  without 
>> gruu.
>>
>> It is certainly the case that, in RFC 3261, the SIP invite, without  
>> treatment by some external b2bua service, will reveal the domain of  
>> the originator, through the IP addresses in the SDP alone. Even  with 
>> treatment by ANY of the privacy services provided in RFC3323,  the 
>> domain of the originator is revealed. Consequently I don't  think we 
>> need to hold up gruu on this feature.
>>
>> With RFC 3261 today, if the user didn't use an anonymization  service, 
>> they could include a From header field of  username@anonymous.invalid. 
>> They could rotate the value of  'username' from call to call, though 
>> the IP addresses in various  places would probably correlate across 
>> calls, since most users have  fairly static IPs.
>>
>> Thus, I would asser that SIP today, without usage of an anonymity  
>> service, provides nothing more than pseudonymity (with the IP  address 
>> as your pseudonym). This would tell me that it would be  acceptable to 
>> produce a gruu spec which provides nothing more than  pseudonymity. 
>> Since IP addresses can change over longer periods of  time (reboot 
>> cycles), I'd also propose that gruu support slowly  changing 
>> pseudonyms - namely, different on each registration. This  is fairly 
>> easy to add to gruu.
>>
>> With this proposal, I would assert that GRUU provides privacy  
>> services equivalent to the level of anonymity afforded by RFC 3261,  
>> and that better anonymity can be provided by the mechanisms in  
>> rfc3323, which get no better or worse with the addition of gruu. I  
>> think this is the metric we need to meet, and NO BETTER.
>>
>> Does this get us out of this conundrum?
>>
>> -Jonathan R.
>>
>>
>> Paul Kyzivat wrote:
>>
>>> Francois,
>>> You are stating a need for a level of anonymity that Jonathan says  
>>> is almost impossible to achieve. Something has to give here.
>>> I think the world already deals with differing levels of  anonymity. 
>>> Callerid blocking in the pstn only blocks your identity  from the 
>>> receiving party, while the whole intervening network has  access to 
>>> your identity. And its often negated when making  emergency calls. So 
>>> if I have a *serious* need to remain  anonymous, invoking callerid 
>>> blocking already isn't enough.  Instead I am forced to seek out an 
>>> anonymous phone from which to  originate the call, or use some very 
>>> complex mechanisms that are  not widely available. And when seeking 
>>> out an anonymous phone from  which to make my call, I will again 
>>> typically be limited in the  scope of anonymity. For instance if I 
>>> cannot travel to an  arbitrary location to make my call then the 
>>> location I make the  call from can be used to guess where I am.
>>> One part of jonathan's old proposal escapes me: why is it  important 
>>> to support sip identity when making an anonymous call?  Does it 
>>> really matter to the recipient that the caller is really  the 
>>> particular anonymous caller it claims to be rather than some  other 
>>> unknown caller?
>>> I am inclined to think that an independent anonymizer service  (b2bua 
>>> based) running in its own domain, would be sufficient for  all *my* 
>>> worst case anonymity needs, and that anonymity within the  domain of 
>>> my own provider would be sufficient for those cases when  I just want 
>>> to "block callerid". YMMV.
>>> It is clear that the more complete forms of anonymity are  relatively 
>>> expensive to provide, to the point that it probably  wouldn't be good 
>>> to make that the default. If it became an extra  cost service then it 
>>> would be self funding. Then people will  settle for less when the 
>>> need doesn't justify the cost.
>>>     Paul
>>> Francois Audet wrote:
>>>
>>>>
>>>>>> I guess what I'm trying to say is that if we need
>>>>>
>>>>>
>>>>> annonymity, it needs
>>>>>
>>>>>> to be full annonymity. I don't see a value in "pseudonymity".
>>>>>
>>>>>
>>>>> Why? Certainly there are privacy applications (such as calling  the 
>>>>> police to anonymously report an incident) where pseudonymity  is 
>>>>> probably sufficient.
>>>>
>>>>
>>>>
>>>> I don't believe that a system that "works sometimes" is useful.
>>>>
>>>> To take the "police" example, if my domain is enough for the police
>>>> to track me down (or to a subset small enought that I'm not  
>>>> annonymous),
>>>> then, well, it's not annonymous anymore. Maybe I have my own  
>>>> domain, or you can track that there was only one user with that
>>>> particular
>>>> domain who might have made that call. Maybe I'm reporting  something 
>>>> to police, and it shows my employer's domain.  Suddently, my 
>>>> employer is
>>>> embroiled.
>>>>
>>>> The end-user will not have confidence that's it's really annonymous
>>>> because
>>>> it's not always annonymous.
>>>>
>>>> Maybe I'm missing something that is special to GRUU. I'm reading  
>>>> Dean's
>>>> summary,
>>>> but I'm not terribly convinced that the claims are true.
>>>>
>>>> I'm highly sceptical that somehow that we (IETF) need to provide a
>>>> solution to
>>>> the GRUU anonimity problem.
>>>>
>>>> But I could be missising something.
>>>>
>>>>
>>>>>> So, I agree with you. When we DO solve annonymity, it needs to  
>>>>>> work with GRUU and everthing else. In the meanwhile, I don't
>>>>>
>>>>>
>>>>> think GRUU is
>>>>>
>>>>>> special and requires immediately a solution to annonymity.
>>>>>>
>>>>> You may have to wait a while. A LONG while.
>>>>>
>>>>> In:
>>>>> http://www.jdrosen.net/papers/draft-rosenberg-sip-identity-pri
>>>>
>>>>
>>>> vacy-00.txt
>>>>
>>>>> I took a stab at some thoughts on true anonymity. Its nearly  
>>>>> impossible to do. Even anonymizers aren't sufficient. It is  
>>>>> possible that the only solutions require crazy BGP hacks like I  
>>>>> describe else a global, massive p2p mesh.
>>>>
>>>>
>>>>
>>>> Yeah, I have read this, and I do agree that it's MUCH bigger than  just
>>>> GRUU.
>>>>
>>>> _______________________________________________
>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>> This list is for NEW development of the core SIP Protocol
>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>> Use sipping@ietf.org for new developments on the application of sip
>>>>
>>
>> -- 
>> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
>> Cisco Fellow                                   Parsippany, NJ  07054-2711
>> Cisco Systems
>> jdrosen@cisco.com                              FAX:   (973) 952-5050
>> http://www.jdrosen.net                         PHONE: (973) 952-5000
>> http://www.cisco.com
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
> 
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 09:52:48 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPJWZ-0006gx-OB; Mon, 18 Sep 2006 09:51:03 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPJWY-0006gh-LG
	for sip@ietf.org; Mon, 18 Sep 2006 09:51:02 -0400
Received: from sj-iport-4.cisco.com ([171.68.10.86])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPJWX-00004t-Ad
	for sip@ietf.org; Mon, 18 Sep 2006 09:51:02 -0400
Received: from sj-dkim-6.cisco.com ([171.68.10.81])
	by sj-iport-4.cisco.com with ESMTP; 18 Sep 2006 06:51:00 -0700
X-IronPort-AV: i="4.09,180,1157353200"; 
	d="scan'208"; a="1854013861:sNHT810285294"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-6.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8IDp01Z006897; Mon, 18 Sep 2006 06:51:00 -0700
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8IDow6W016417;
	Mon, 18 Sep 2006 06:50:59 -0700 (PDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 09:50:45 -0400
Received: from [192.168.1.88] ([10.86.242.235]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 09:50:45 -0400
Message-ID: <450EA434.2090508@cisco.com>
Date: Mon, 18 Sep 2006 09:50:44 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>	<45081D43.5040003@cisco.com>	<450AC150.1000405@cisco.com>
	<17674.54050.916073.393735@harjus.tutpro.com>
In-Reply-To: <17674.54050.916073.393735@harjus.tutpro.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Sep 2006 13:50:45.0325 (UTC)
	FILETIME=[70713FD0:01C6DB29]
DKIM-Signature: a=rsa-sha1; q=dns; l=1676; t=1158587460; x=1159451460;
	c=relaxed/simple; s=sjdkim6002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=AaWVbYAWHiWn0p5Q59YPp8PGWz7EL7+sTdu2wcrhbtbyZNO0RSN6zwnewMbsnZhedv/1wz34
	29S7ZhhS4LTBN+NqAPantYHpi3wiO+VPZxb9cEwSS26mycNZ2aZu4KCl;
Authentication-Results: sj-dkim-6.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: a7d6aff76b15f3f56fcb94490e1052e4
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>,
	Francois Audet <audet@nortel.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

The SDP doesn't reveal your domain, but the topmost via certainly will. 
If you combine that with the fact that your own IP is static during your 
connection to the Internet, you end up with a level of anonymity that is 
functionally equal to what I'm proposing.

I'm not saying that we don't need anonymity where you can't even 
determine the domain of the originator; I'm merely saying that SIP 
itself doesn't provide this (and indeed neither does rfc3323 really), so 
we do not need to strive to meet this goal for gruu to progress.

Thanks,
Jonathan R.

Juha Heinanen wrote:

> Jonathan Rosenberg writes:
> 
>  > It is certainly the case that, in RFC 3261, the SIP invite, without 
>  > treatment by some external b2bua service, will reveal the domain of the 
>  > originator, through the IP addresses in the SDP alone. 
> 
> many ISPs (and also cellular operators officing GPRS/EDGE/UMTS services)
> provide a dynamic IP address that changes for each connection to
> the internet, for example, this was the last one that i got:
> 
> eukaryote41.gprs.dnafinland.fi
> 
> in those cases, SDP does not reveal my domain, only the ISP that i was
> connected to the network.  it cannot be worse that that when my SIP UA
> uses "pseudonymity" gruu , i.e., it must not reveal my real domain
> tutpro.com.
> 
> -- juha
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 10:01:01 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPJdT-0002TS-UW; Mon, 18 Sep 2006 09:58:11 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPJdS-0002SE-JD
	for sip@ietf.org; Mon, 18 Sep 2006 09:58:10 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPJdQ-0002CS-88
	for sip@ietf.org; Mon, 18 Sep 2006 09:58:10 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 18 Sep 2006 09:57:55 -0400
X-IronPort-AV: i="4.09,180,1157342400"; 
	d="scan'208"; a="102977011:sNHT33014240"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8IDvlP2031211 for <sip@ietf.org>; Mon, 18 Sep 2006 09:57:47 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8IDvluI010743
	for <sip@ietf.org>; Mon, 18 Sep 2006 09:57:47 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 09:57:46 -0400
Received: from [192.168.1.88] ([10.86.242.235]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 09:57:46 -0400
Message-ID: <450EA5D9.1060305@cisco.com>
Date: Mon, 18 Sep 2006 09:57:45 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Cullen Jennings <fluffy@cisco.com>
Subject: Re: [Sip] draft-ietf-sip-gruu-10 comments
References: <285E7350-8C4F-4A92-8E1E-3BFAC67CC8EC@cisco.com>
	<4505B74C.90506@cisco.com>
	<B22D5A4D-F4B9-49C4-9693-9F84F3E09F8F@cisco.com>
	<450B1025.6010305@cisco.com>
	<6BC8C183-DAAF-4763-82CD-AF405AC6823D@cisco.com>
In-Reply-To: <6BC8C183-DAAF-4763-82CD-AF405AC6823D@cisco.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Sep 2006 13:57:46.0711 (UTC)
	FILETIME=[6B9BA670:01C6DB2A]
DKIM-Signature: a=rsa-sha1; q=dns; l=3546; t=1158587867; x=1159451867;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20draft-ietf-sip-gruu-10=20comments
	|To:Cullen=20Jennings=20<fluffy@cisco.com>;
	X=v=3Dcisco.com=3B=20h=3DF411ZHCr/cAN0lTj++cVu1p1Kuc=3D;
	b=OlwWEavEZ9olYJru3YML0GRFPrAjkkNq9CPCXCJIPrBBfbkwIyBH5e4nC1tOW9ltXevOu+Wk
	UrJHqyw7qsrLTsiBJ5AV1kTDs7kD53Da6dCQkVcAkAdjHUaZHcIPJpfA;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b7b9551d71acde901886cc48bfc088a6
Cc: SIP <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

My view on this is that, with GRUU, the home proxy in the terminating 
domain is going to get visited ANYWAY, even with just a trapezoid. So 
there is no penalty to record-routing, besides perhaps the overhead in 
the sip message for the extra bytes. Thus it seems simpler to say that 
you should always do it.

It is a fair point that in mixed mode deployments where not all 
endpoints in a domain support gruu, the record-route would not be needed 
and would introduce an extra hop. I think it would be OK to say that if 
the registered contact was assigned a gruu, then the home proxy has to 
record-route. Would that be OK?

-Jonathan R.

Cullen Jennings wrote:

> 
> On Sep 15, 2006, at 1:42 PM, Paul Kyzivat wrote:
> 
>> Cullen Jennings wrote:
>>
>>> On Sep 11, 2006, at 12:21 PM, Paul Kyzivat wrote:
>>>
>>>>
>>>>
>>>> Cullen Jennings wrote:
>>>>
>>>>> Section 8.2.2
>>>>> I think I am likely confused here. I basically don't see why a  
>>>>> simple classic sip trapezoid deployment would ever need to  Record 
>>>>> Route. The fact that the GRUU refereed to the "home"  domain would 
>>>>> cause it work get back here. As a side note, I find  the terms 
>>>>> "home", "edge" etc very undefined outside the IMS  context. 
>>>>> Anyways, I believe this section might be all right but  I am 
>>>>> failing to understand what needs to be done and why. If I  was a 
>>>>> non IMS proxy implementer, I suspect I would just ignore  this 
>>>>> whole section.
>>>>
>>>>
>>>> *If* the topology is a simple trapezoid then I think you are  correct.
>>>>
>>>> But if there is a proxy before the originating home proxy, or  after 
>>>> the terminating home proxy, then the R-R is needed to  prevent a 
>>>> spiral.
>>>>
>>>> On the originating side, this can be determined by whether there  is 
>>>> a R-R present when the request arrives at the originating home  
>>>> proxy. On the terminating side that doesn't work, because the  
>>>> potential R-R hasn't happened yet, and you can't know in advance  if 
>>>> it will happen.
>>>>
>>>> So the problem is that you don't need it in a trapezoid, but you  
>>>> don't know if you have a trapezoid.
>>>>
>>> But on the terminating side, it seems like the home proxy know  there 
>>> is another proxy because it needs to insert that into the route
>>> (I don't spend enough time thinking about this so I assume you are  
>>> right, just trying to make sure I understand)
>>
>>
>> Well, the terminating home proxy will know if it is including  another 
>> proxy after it. But it doesn't know if that proxy, or some  other 
>> proxy *it* includes, will R-R.
>>
>> And even if the home proxy isn't inserting a proxy (e.g. no Path  
>> header registered), it doesn't really know if the contact that was  
>> registered is the actual destination, or whether it identifies  
>> another proxy.
> 
> 
> Ok, but that seems like the advice should be "if you are using the  path 
> stuff (or the broken 3rd party registrations) to include another  proxy, 
> then you must R-R".  Making everyone R-R for no good reason  just seems 
> like a complicated wasted and will slow down systems that  don't need it.
> 
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 12:25:28 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPLt8-0003PL-8B; Mon, 18 Sep 2006 12:22:30 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPLt6-0003PG-SI
	for sip@ietf.org; Mon, 18 Sep 2006 12:22:28 -0400
Received: from harjus.tutpro.com ([192.98.100.3])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPLt5-0006cG-Gp
	for sip@ietf.org; Mon, 18 Sep 2006 12:22:28 -0400
Received: by harjus.tutpro.com (Postfix, from userid 1000)
	id 04682AC3DB; Mon, 18 Sep 2006 19:22:21 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17678.51133.857991.574216@harjus.tutpro.com>
Date: Mon, 18 Sep 2006 19:22:21 +0300
To: Jonathan Rosenberg <jdrosen@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
In-Reply-To: <450EA434.2090508@cisco.com>
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
	<45081D43.5040003@cisco.com> <450AC150.1000405@cisco.com>
	<17674.54050.916073.393735@harjus.tutpro.com>
	<450EA434.2090508@cisco.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
From: jh@tutpro.com (Juha Heinanen)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: de4f315c9369b71d7dd5909b42224370
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>,
	Francois Audet <audet@nortel.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Jonathan Rosenberg writes:

 > The SDP doesn't reveal your domain, but the topmost via certainly
 > will. 

i don't get it.  i just made a call from my laptop that gets dynamic
address from my isp.  here is how topmost via and ip part of sdp look
like:

Via: SIP/2.0/UDP 62.78.104.204:6060;rport;branch=z9hG4bKfusbdfzf
...
c=IN IP4 62.78.104.204

based on that information, you cannot tell from which domain my call
came from.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 13:33:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPMwK-0000bN-VF; Mon, 18 Sep 2006 13:29:52 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPMwI-0000ZT-2l
	for sip@ietf.org; Mon, 18 Sep 2006 13:29:50 -0400
Received: from nylon.softarmor.com ([66.135.38.164])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPMsf-0006nj-LD
	for sip@ietf.org; Mon, 18 Sep 2006 13:26:08 -0400
Received: from [64.101.149.162] ([64.101.149.162]) (authenticated bits=0)
	by nylon.softarmor.com (8.13.1/8.13.1) with ESMTP id k8IGSjdo023243
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Mon, 18 Sep 2006 11:28:46 -0500
In-Reply-To: <17678.51133.857991.574216@harjus.tutpro.com>
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
	<45081D43.5040003@cisco.com> <450AC150.1000405@cisco.com>
	<17674.54050.916073.393735@harjus.tutpro.com>
	<450EA434.2090508@cisco.com>
	<17678.51133.857991.574216@harjus.tutpro.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <80524C3A-0F8B-4456-ADE4-33071EE6DB3A@softarmor.com>
Content-Transfer-Encoding: 7bit
From: Dean Willis <dean.willis@softarmor.com>
Subject: Re: [Sip] GRUU and Anonymity
Date: Mon, 18 Sep 2006 12:25:55 -0500
To: Juha Heinanen <jh@tutpro.com>
X-Mailer: Apple Mail (2.752.2)
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 52e1467c2184c31006318542db5614d5
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>,
	Francois Audet <audet@nortel.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


On Sep 18, 2006, at 11:22 AM, Juha Heinanen wrote:

> Jonathan Rosenberg writes:
>
>> The SDP doesn't reveal your domain, but the topmost via certainly
>> will.
>
> i don't get it.  i just made a call from my laptop that gets dynamic
> address from my isp.  here is how topmost via and ip part of sdp look
> like:
>
> Via: SIP/2.0/UDP 62.78.104.204:6060;rport;branch=z9hG4bKfusbdfzf
> ...
> c=IN IP4 62.78.104.204
>
> based on that information, you cannot tell from which domain my call
> came from.

Accorfing to traceroute, it came from:

allozyme204.gprs.dnafinland.fi

Just guessing, I'd say you were in Finland or using a Finnish VPN  
when making the call . . . Further, I'd guess you were connected over  
a mobile phone (GPRS) network.  Hmm, "dnafinland.fi" has a web page.  
They look like a mobile services vendor. I bet that if I weren't  
illiterate I could get more useful info from the web page, and maybe  
even launch a pretexting attack and get some billing records.

Does me knowing this violate your privacy? Maybe not, but other  
people wig-out over less.

--
Dean


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 14:00:18 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPNNi-0004Dz-38; Mon, 18 Sep 2006 13:58:10 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPNNg-0004Du-RQ
	for sip@ietf.org; Mon, 18 Sep 2006 13:58:08 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPNNf-0003W9-J2
	for sip@ietf.org; Mon, 18 Sep 2006 13:58:08 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-1.cisco.com with ESMTP; 18 Sep 2006 10:58:07 -0700
X-IronPort-AV: i="4.09,181,1157353200"; 
	d="scan'208"; a="42278745:sNHT31696832"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8IHw7Pw027485; Mon, 18 Sep 2006 13:58:07 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8IHw6uI004527; 
	Mon, 18 Sep 2006 13:58:06 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 13:58:06 -0400
Received: from [192.168.1.88] ([10.86.242.235]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 18 Sep 2006 13:58:06 -0400
Message-ID: <450EDE2D.20100@cisco.com>
Date: Mon, 18 Sep 2006 13:58:05 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Juha Heinanen <jh@tutpro.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>	<45081D43.5040003@cisco.com>	<450AC150.1000405@cisco.com>	<17674.54050.916073.393735@harjus.tutpro.com>	<450EA434.2090508@cisco.com>
	<17678.51133.857991.574216@harjus.tutpro.com>
In-Reply-To: <17678.51133.857991.574216@harjus.tutpro.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Sep 2006 17:58:06.0193 (UTC)
	FILETIME=[FE49FE10:01C6DB4B]
DKIM-Signature: a=rsa-sha1; q=dns; l=1259; t=1158602287; x=1159466287;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity
	|To:Juha=20Heinanen=20<jh@tutpro.com>;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=UBwrQ7floC+cq6gEyHrfGbh6NgZKnL9zhPFETiBMl6Lw/5/2XFOT3B9x2ah9Jcsd4+AwTUXt
	/UzT1qkCp6hXHNBNWHj8eFGUbiXA6/Y7/UDBf+2ebpu/9BKrtmyelUxY;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 69a74e02bbee44ab4f8eafdbcedd94a1
Cc: IETF SIP List <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>,
	Francois Audet <audet@nortel.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Sorry for not being clear. I meant, the Via header as it leaves the 
proxy for your SIP provider. That will point to the proxy itself and 
thus identify the SIP provider.

In other words, when the call reaches the terminating party, the via 
stack plus your SDP IP address will tell them what SIP provider the call 
  is coming from, and that this is the same person that called me an 
hour ago.

-Jonathan R.

Juha Heinanen wrote:
> Jonathan Rosenberg writes:
> 
>  > The SDP doesn't reveal your domain, but the topmost via certainly
>  > will. 
> 
> i don't get it.  i just made a call from my laptop that gets dynamic
> address from my isp.  here is how topmost via and ip part of sdp look
> like:
> 
> Via: SIP/2.0/UDP 62.78.104.204:6060;rport;branch=z9hG4bKfusbdfzf
> ...
> c=IN IP4 62.78.104.204
> 
> based on that information, you cannot tell from which domain my call
> came from.
> 
> -- juha
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 15:52:30 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPP81-0004YH-Kl; Mon, 18 Sep 2006 15:50:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPP7y-0004Xr-IR; Mon, 18 Sep 2006 15:50:02 -0400
Received: from ns1.neustar.com ([2001:503:c779:1a::9c9a:108a])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GPP7y-0004hv-B2; Mon, 18 Sep 2006 15:50:02 -0400
Received: from stiedprstage1.ietf.org (stiedprstage1.va.neustar.com
	[10.31.47.10]) by ns1.neustar.com (Postfix) with ESMTP id 4B64D26E63;
	Mon, 18 Sep 2006 19:50:02 +0000 (GMT)
Received: from ietf by stiedprstage1.ietf.org with local (Exim 4.43)
	id 1GPP7y-0004RW-6a; Mon, 18 Sep 2006 15:50:02 -0400
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
To: i-d-announce@ietf.org
From: Internet-Drafts@ietf.org
Message-Id: <E1GPP7y-0004RW-6a@stiedprstage1.ietf.org>
Date: Mon, 18 Sep 2006 15:50:02 -0400
X-Spam-Score: -2.5 (--)
X-Scan-Signature: b7b9551d71acde901886cc48bfc088a6
Cc: sip@ietf.org
Subject: [Sip] I-D ACTION:draft-ietf-sip-mib-12.txt 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts 
directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.

	Title		: Management Information Base for the Session Initiation Protocol (SIP)
	Author(s)	: D. Walker, et al.
	Filename	: draft-ietf-sip-mib-12.txt
	Pages		: 96
	Date		: 2006-9-18
	
This memo defines a portion of the Management Information Base (MIB)
for use with network management protocols in the Internet community.
In particular, it describes a set of managed objects that are used to
manage Session Initiation Protocol (SIP) entities, which include User
Agents, Proxy, Redirect and Registrar servers.

A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-mib-12.txt

To remove yourself from the I-D Announcement list, send a message to 
i-d-announce-request@ietf.org with the word unsubscribe in the body of 
the message. 
You can also visit https://www1.ietf.org/mailman/listinfo/I-D-announce 
to change your subscription settings.

Internet-Drafts are also available by anonymous FTP. Login with the 
username "anonymous" and a password of your e-mail address. After 
logging in, type "cd internet-drafts" and then 
"get draft-ietf-sip-mib-12.txt".

A list of Internet-Drafts directories can be found in
http://www.ietf.org/shadow.html 
or ftp://ftp.ietf.org/ietf/1shadow-sites.txt

Internet-Drafts can also be obtained by e-mail.

Send a message to:
	mailserv@ietf.org.
In the body type:
	"FILE /internet-drafts/draft-ietf-sip-mib-12.txt".
	
NOTE:	The mail server at ietf.org can return the document in
	MIME-encoded form by using the "mpack" utility.  To use this
	feature, insert the command "ENCODING mime" before the "FILE"
	command.  To decode the response(s), you will need "munpack" or
	a MIME-compliant mail reader.  Different MIME-compliant mail readers
	exhibit different behavior, especially when dealing with
	"multipart" MIME messages (i.e. documents which have been split
	up into multiple messages), so check your local documentation on
	how to manipulate these messages.

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Multipart/Alternative; Boundary="OtherAccess"

--OtherAccess
Content-Type: Message/External-body; access-type="mail-server";
	server="mailserv@ietf.org"

Content-Type: text/plain
Content-ID: <2006-9-18100222.I-D@ietf.org>

ENCODING mime
FILE /internet-drafts/draft-ietf-sip-mib-12.txt

--OtherAccess
Content-Type: Message/External-body; name="draft-ietf-sip-mib-12.txt";
	site="ftp.ietf.org"; access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2006-9-18100222.I-D@ietf.org>


--OtherAccess--

--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--




From sip-bounces@ietf.org Mon Sep 18 16:29:52 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPPiH-0006Xd-Eh; Mon, 18 Sep 2006 16:27:33 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPPiF-0006XV-Nr
	for sip@ietf.org; Mon, 18 Sep 2006 16:27:31 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPPiE-0004or-Bc
	for sip@ietf.org; Mon, 18 Sep 2006 16:27:31 -0400
Received: from zrc2hxm2.corp.nortel.com (zrc2hxm2.corp.nortel.com
	[47.103.123.73])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8IKRQI21604; Mon, 18 Sep 2006 16:27:26 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Another Comment on draft-audet-sip-sips-guidelines-03
	w.r.t. telURI etc
Date: Mon, 18 Sep 2006 15:27:25 -0500
Message-ID: <62B9B0847CC47543B6B3B5E26BD268E60E7B5A93@zrc2hxm2.corp.nortel.com>
In-Reply-To: <450AB7A9.7070600@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Another Comment on draft-audet-sip-sips-guidelines-03
	w.r.t. telURI etc
Thread-index: AcbY0r/sYCicrNzlQ5K8h5ZBo/EzrgChNKGw
From: "Samir Srivastava" <samirsr@nortel.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 2ed806e2f53ff1a061ad4f97e00345ac
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Paul,

   Thx for the clarification on current usage of tel:411 etc. It should
be logged in bugzilla too.

   I am not of the opinion of getting every URI with "S" suffix for
secure routing which needs to be routed over SIP network.

   It doubles the entries in DNS, IANA registries (more cycles etc). We
are getting these pains because of non-modularity. In my view it is
secure-routing requirement. Applying HTTPS (CS model) to hop-by-hop SIP
is wrong.

   With Proxy-Require, we settle the security separately and keep the
development of new URL schemes, Properties etc separately. Unless there
is change in secure protocol etc, we don't have to worry about the
security of each URL scheme separately. Also as per the current proposal
of SIPS, preference among the different transports will be *only* in
DNS. It will be good to consider all required DNS entries with out-bound
variants too.=20

   Proxy-Require is more scalable and neat solution.=20

   I can only ask the group to reconsider the decision of SIPS, which
looks to me dead on this.=20

Thx
Samir

> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]
> Sent: Friday, September 15, 2006 7:25 AM
> To: Srivastava, Samir (SC100:8826)
> Cc: sip@ietf.org
> Subject: Re: [Sip] Another Comment on
draft-audet-sip-sips-guidelines-03
> w.r.t. telURI etc
>=20
>=20
>=20
> Samir Srivastava wrote:
> > 1) In section 5, it makes following statement
> > "However, if an SIPS AOR is used, a SIPS Contact MUST also be used.
If a
> > SIP AOR is used, a SIP Contact MUST also be used. Those are
mechanical
> > rules with no influence on routing. "
> >
> > Which doesn't allow the mailto and tel URL registration for SIPS and
> > SIP. Atleast It should have allowed the telURI and mailto for SIP.
>  >
> > Refer the following from section 10.2.1 of 3261
> > "A SIP UA can choose to register telephone numbers (with the tel
URL,
> > RFC 2806 [9]) or email addresses (with a mailto URL, RFC 2368 [32])
as
> > Contacts for an address-of-record, for example."
>=20
> I have some sympathy for this. I think we get wound up thinking that
the
> contacts being registered are in fact destinations belonging to the
UAC
> doing the REGISTER. While this is usually the case, it need not always
> be the case.
>=20
> The mailto case, or other kinds of URIs that have can't be used to
> transmit sip requests, are pretty benign here. The only way they can
> have a request on routing is to be returned in a 3xx response, all the
> way back to the UAC. In that case there is no security issue, because
> the UAC gets to decide whether to use this "insecure" transport.
>=20
> TEL is more troublesome, because sip requests *can* be routed to it,
but
>   the URI doesn't guarantee a secure path.
>=20
> Maybe the solution to all contacts that aren't "secure enough" (namely
> everything except SIPS) should be permitted in registration, but
should
> not be considered as candidates for routing. Instead, like mailto,
they
> can only be used by being returned to the UAC in a 3xx.
>=20
> It seems that you can already get in the above situation as follows:
>=20
> 	REGISTER sips:example.com
> 	To: sip:bob@example.com
> 	From: sip:bob@example.com
> 	Contact: sip:bob@bob.cheap-phone.example.com
> 	Contact: tel:+12125551234
> 	Contact: mailto:bob@example.org
>=20
> 	REGISTER sips:example.com
> 	To: sips:bob@example.com
> 	From: sips:bob@example.com
> 	Contact: sips:bob@bob.secure-phone.example.com
>=20
> After this, how is an INVITE to sip:bob@example.com routed?
> It may only be *forwarded* to sips:bob@bob.secure-phone.example.com.
> But it could be redirected to the others. So the proxy can either just
> redirect, or it can try forwarding to the one valid forwarding
> destination and then redirect with the remaining destinations if that
> one doesn't work out.
>=20
> Given that the proxy must be prepared to deal with contacts that it
may
> not be permitted to forward to, I fail to see the rationale for
> preventing registration to a sips URI of contacts that can't be routed
> to securely.
>=20
>=20
> > Why we are restricting this...
> > 2) Now the big question 3261, in section 8.1.1.2 gives an example of
411
> > with telURI to be interpreted by the visitor domain proxy (not to be
> > interpreted by the home domain proxy with airport example ) How can
we
> > route it securly ?
>=20
> Note that the usage of <tel:411> in 3261 is *invalid*. So it has to be
> taken with a grain of salt. (Something similar but valid is
> <tel:411;phone-context=3D+1>.)
>=20
> Also, ECRIT has been quite busy since the publication of 3261, so we
> have more evolved practices defined now. I believe that today the
> recommendation would rather be to use <urn:sos>
>=20
> But these both suffer from not being SIPS, and not having a secure
form.
> (Do we want TELS and URNS ??? :-)
>=20
> Perhaps you can't ever expect security on an emergency call - it may
be
> compromised in many ways in order to expedite handling the emergency.
> Not very satisfying, but maybe its reality.
>=20
> In the case of TEL, if you want a secure call, there are a couple of
> things you can do:
>=20
> - perform your own ENUM lookup and select a sips target
>=20
> - convert to a SIPS URI with the domain name of a domain you
>    believe will be able reach the destination securely. When a
>    proxy for the chosen domain receives the request it may do
>    as it wishes to ensure it reaches the destination securely.
>=20
> 	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 17:55:06 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPR1t-0006mA-MV; Mon, 18 Sep 2006 17:51:53 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPR1r-0006m5-WB
	for sip@ietf.org; Mon, 18 Sep 2006 17:51:52 -0400
Received: from laser.networkresonance.com ([198.144.196.2])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPR1q-00023k-M4
	for sip@ietf.org; Mon, 18 Sep 2006 17:51:51 -0400
Received: from networkresonance.com (raman.networkresonance.com
	[198.144.196.3])
	by laser.networkresonance.com (Postfix) with ESMTP id EEE8E222426
	for <sip@ietf.org>; Mon, 18 Sep 2006 15:05:17 -0700 (PDT)
To: sip@ietf.org
X-Mailer: MH-E 7.4.3; nmh 1.2; XEmacs 21.4 (patch 19)
Date: Mon, 18 Sep 2006 14:51:49 -0700
From: Eric Rescorla <ekr@networkresonance.com>
Message-Id: <20060918220517.EEE8E222426@laser.networkresonance.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e5ba305d0e64821bf3d8bc5d3bb07228
Subject: [Sip] GRUU and grid
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I recently made another pass through gruu-10 and I started wondering
about the use of the "grid" parameter. ISTM that it serves two
purposes:

1. To let a UA hang a context variable/indicator off of a URI.
2. To let a UA know it was referenced via a GRUU.

So, the grid is sort of doing double duty in two not terribly
related contexts. That's not always bad, but I fear it is
in this case.

First, wouldn't it be nice to be able to hang a context
variable/indicator off any URI, not just a GRUU?  I've seen this issue
come up in the context of e-mail spam, where users would like to be able
to mint new e-mail addresses (sort-of capabilities) for each use to
enable easy filtering.  It's obviously really nice to be able to do this
without the help of your service provider. If you could use grids
(probably renamed) with AORs or something like them, that would work for
this, right? 

Second, just from an evocative perspective, having a "grid" parameter
which can get into the To: one of two ways and which means 
"I was referenced via a GRUU" feels overloaded. Why not invent
a different parameter for "I was referenced via a GRUU".

-Ekr






_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 18 18:23:19 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPRUC-0004f1-HN; Mon, 18 Sep 2006 18:21:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPRUA-0004ev-Ox
	for sip@ietf.org; Mon, 18 Sep 2006 18:21:06 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPRU9-0006KD-EH
	for sip@ietf.org; Mon, 18 Sep 2006 18:21:06 -0400
Received: from zrc2hxm2.corp.nortel.com (zrc2hxm2.corp.nortel.com
	[47.103.123.73])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8IMKtI11657; Mon, 18 Sep 2006 18:20:55 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 18 Sep 2006 17:20:48 -0500
Message-ID: <62B9B0847CC47543B6B3B5E26BD268E60E84F9F8@zrc2hxm2.corp.nortel.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: A Comment draft-ietf-sip-hitchhikers-guide-00.txt
Thread-index: AcbbcLEgM0FwX2tmSmW+2kKa9JhuXQ==
From: "Samir Srivastava" <samirsr@nortel.com>
To: <jdrosen@cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 21be852dc93f0971708678c18d38c096
Cc: sip@ietf.org
Subject: [Sip] A Comment draft-ietf-sip-hitchhikers-guide-00.txt
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============2126989296=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============2126989296==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6DB70.B15195E3"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6DB70.B15195E3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

1)       Shouldn't we have reference to the open bugs in this guide in
some form. Atleast a reference to bugzilla web site?

=20

2)       It refers the RFC 2976 for SIP INFO. Shouldn't it refer the RFC
2833 there.  We may be widening its scope to media too..

=20

=20

Thx

Samir

=20

  =20


------_=_NextPart_001_01C6DB70.B15195E3
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:Arial;
	color:windowtext;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:153225326;
	mso-list-type:hybrid;
	mso-list-template-ids:924762578 1027607696 67698713 67698715 67698703 =
67698713 67698715 67698703 67698713 67698715;}
@list l0:level1
	{mso-level-text:"%1\)";
	mso-level-tab-stop:21.0pt;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-.25in;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=3DEN-US link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Hi,<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal =
style=3D'margin-left:21.0pt;text-indent:-.25in;mso-list:l0 level1 =
lfo1'><![if !supportLists]><font
size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'><span
style=3D'mso-list:Ignore'>1)<font size=3D1 face=3D"Times New =
Roman"><span
style=3D'font:7.0pt "Times New =
Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
</span></font></span></span></font><![endif]><font
size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'>Shouldn&#8217;t
we have reference to the open bugs in this guide in some form. Atleast a
reference to bugzilla web site?<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;<o:p></o:p></span></font></p>

<p class=3DMsoNormal =
style=3D'margin-left:21.0pt;text-indent:-.25in;mso-list:l0 level1 =
lfo1'><![if !supportLists]><font
size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'><span
style=3D'mso-list:Ignore'>2)<font size=3D1 face=3D"Times New =
Roman"><span
style=3D'font:7.0pt "Times New =
Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
</span></font></span></span></font><![endif]><font
size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial'>It refers
the RFC 2976 for SIP INFO. Shouldn&#8217;t it refer the RFC 2833 there. =
&nbsp;We
may be widening its scope to media too..<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Thx<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Samir<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;&nbsp; <o:p></o:p></span></font></p>

</div>

</body>

</html>

------_=_NextPart_001_01C6DB70.B15195E3--


--===============2126989296==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============2126989296==--




From sip-bounces@ietf.org Tue Sep 19 04:42:34 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPb7M-0000a8-Ha; Tue, 19 Sep 2006 04:38:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPb7K-0000UB-EQ
	for sip@ietf.org; Tue, 19 Sep 2006 04:38:10 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPax4-0001ab-Qk
	for sip@ietf.org; Tue, 19 Sep 2006 04:27:36 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k8J8ROwb010104;
	Tue, 19 Sep 2006 03:27:24 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Tue, 19 Sep 2006 03:27:34 -0500
Received: from DEEXC1U02.de.lucent.com ([135.248.187.26]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Tue, 19 Sep 2006 10:27:32 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] WGLC: draft-ietf-sip-connected-identity
Date: Tue, 19 Sep 2006 10:27:31 +0200
Message-ID: <C9449EE0B54F384396600B16264E64815B4173@DEEXC1U02.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] WGLC: draft-ietf-sip-connected-identity
Thread-Index: AcbQV2brJET+D2wYRIK3vYlQKHXq7gLbUXrg
From: "Gaast, Sietse van der \(Sietse\)" <gaast@lucent.com>
To: "Drage, Keith \(Keith\)" <drage@lucent.com>, <sip@ietf.org>
X-OriginalArrivalTime: 19 Sep 2006 08:27:32.0749 (UTC)
	FILETIME=[73FABBD0:01C6DBC5]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 4b800b1eab964a31702fa68f1ff0e955
Cc: "Elwell, John" <john.elwell@siemens.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Keith, John, all,
=20
My review of the 01 version of the draft only resulted in some minor
editorial suggestions:
=20
page 3: 3, 4th paragraph, "owing to", consider "due to".=20
page 5: 5, second paragraph, "A request in either direction after answer
can indicate a change of user", consider inserting "connected" before
"user".
=20
Regards,
Sietse van der Gaast

Sietse van der Gaast
Bell Labs Europe
Lucent Technologies
Hilversum, the Netherlands


> -----Original Message-----
> From: Drage, Keith (Keith)=20
> Sent: maandag 4 september 2006 21:22
> To: sip@ietf.org
> Cc: Elwell, John
> Subject: [Sip] WGLC: draft-ietf-sip-connected-identity
>=20
> (as WG chair)
>=20
> This is to announce a Working Group Last Call on:
>=20
> http://www.ietf.org/internet-drafts/draft-ietf-sip-connected-i
> dentity-01
> .txt
>=20
> Connected Identity in the Session Initiation Protocol (SIP)
>=20
> Please review and provide comments (along with any suggestions for
> resolution) on this document by:
>=20
> 	Monday 18th September 2006.
> 	---------------------------
>=20
> In addition, if you have reviewed and have no comments on=20
> this version of the document, that is useful information, so=20
> please indicate this direct to the WG chairs.
>=20
> Please note that a known issue with this document is that the=20
> example calculation of the signatures and the corresponding=20
> certificate has not yet occurred. This will be completed in=20
> the next version using the same automatic mechanisms used for=20
> RFC 4474, so comments on this are not necessary. However=20
> comments otherwise on the contents of the examples are=20
> entirely appropriate.
>=20
>=20
> Regards
>=20
> Keith
>=20
> Keith Drage
> Lucent Technologies
> drage@lucent.com
> tel: +44 1793 776249
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 05:44:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPc6G-0005lc-At; Tue, 19 Sep 2006 05:41:08 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPc6E-0005ky-Mq
	for sip@ietf.org; Tue, 19 Sep 2006 05:41:06 -0400
Received: from co300216-ier2.net.avaya.com ([198.152.13.103])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPc6D-0007OO-Ax
	for sip@ietf.org; Tue, 19 Sep 2006 05:41:06 -0400
Received: from IS0004AVEXU1.global.avaya.com (h135-64-105-51.avaya.com
	[135.64.105.51])
	by co300216-ier2.net.avaya.com (Switch-3.1.8/Switch-3.1.7) with ESMTP
	id k8J9XSQF027320 for <sip@ietf.org>; Tue, 19 Sep 2006 05:33:29 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip]  SIP MIB draft-12 submitted
Date: Tue, 19 Sep 2006 12:41:03 +0300
Message-ID: <AAB4B3D3CF0F454F98272CBE187FDE2F0B4749FE@is0004avexu1.global.avaya.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip]  SIP MIB draft-12 submitted
Thread-Index: AcbbzHZBpzb6rZ2lTDuvAHbi0m6TTgAAzFOQ
From: "Romascanu, Dan \(Dan\)" <dromasca@avaya.com>
To: "Wijnen, Bert \(Bert\)" <bwijnen@lucent.com>,
	"Jean-Francois Mule" <jf.mule@cablelabs.com>, "SIP WG List" <sip@ietf.org>
X-Scanner: InterScan AntiVirus for Sendmail
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0ddefe323dd869ab027dbfff7eff0465
Cc: klingle@cisco.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I cleared my DISCUSS and changed my vote to a 'Yes'.=20

Dan


=20
=20

> -----Original Message-----
> From: Wijnen, Bert (Bert) [mailto:bwijnen@lucent.com]=20
> Sent: Tuesday, September 19, 2006 12:18 PM
> To: Jean-Francois Mule; SIP WG List
> Cc: klingle@cisco.com; Romascanu, Dan (Dan)
> Subject: RE: [Sip] SIP MIB draft-12 submitted
>=20
> I checked the new rev 12 (that came out in the ID repository=20
> yday) and I can report that I am happy with it.
> Bert=20
> > -----Original Message-----
> > From: Jean-Francois Mule [mailto:jf.mule@cablelabs.com]
> > Sent: Friday, September 15, 2006 15:51
> > To: SIP WG List
> > Cc: klingle@cisco.com; Wijnen, Bert (Bert); Dan Romascanu (E-mail)
> > Subject: [Sip] SIP MIB draft-12 submitted
> >=20
> >=20
> >=20
> >    We have submitted the final revision of the SIP MIB module.=20
> >=20
> >    Draft-12 does address the comments we received during the IESG=20
> > review (logged in the ID tracker), and additional comments=20
> from Carl=20
> > Kalbfleisch, Harald Alvestrand, Dan Romascanu, David=20
> Harrington, and=20
> > Bert Wijnen.
> >=20
> >    There are a few technical changes and numerous editorial ones,=20
> > including major object renaming for name consistency. The=20
> most notable=20
> > technical change is the addition of many discontinuity=20
> timers in the=20
> > tables with Counter32 objects.
> >=20
> >    Special thanks to Bert who spent many hours working on this new=20
> > version of the draft.
> >=20
> > Kevin and Jean-Francois.
> >=20
> >=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 10:00:15 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPg6C-0003cn-0u; Tue, 19 Sep 2006 09:57:20 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPg6A-0003by-B0
	for sip@ietf.org; Tue, 19 Sep 2006 09:57:18 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPg5L-0002ny-HP
	for sip@ietf.org; Tue, 19 Sep 2006 09:56:28 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-1.cisco.com with ESMTP; 19 Sep 2006 06:56:23 -0700
X-IronPort-AV: i="4.09,185,1157353200"; 
	d="scan'208"; a="42453362:sNHT32659196"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8JDuNFP016650; Tue, 19 Sep 2006 09:56:23 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8JDuEdc017399; 
	Tue, 19 Sep 2006 09:56:26 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 19 Sep 2006 09:56:18 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 19 Sep 2006 09:56:18 -0400
Message-ID: <450FF701.8020707@cisco.com>
Date: Tue, 19 Sep 2006 09:56:17 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Eric Rescorla <ekr@networkresonance.com>
Subject: Re: [Sip] GRUU and grid
References: <20060918220517.EEE8E222426@laser.networkresonance.com>
In-Reply-To: <20060918220517.EEE8E222426@laser.networkresonance.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 19 Sep 2006 13:56:18.0431 (UTC)
	FILETIME=[6166F0F0:01C6DBF3]
DKIM-Signature: a=rsa-sha1; q=dns; l=3211; t=1158674183; x=1159538183;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20grid
	|To:Eric=20Rescorla=20<ekr@networkresonance.com>;
	X=v=3Dcisco.com=3B=20h=3DJ0L+1lFe8flUOjLWQMT19RKfF70=3D;
	b=FNTgX7U3sB5DCRx6Nx0R3xHGnRXmzx4h7TX0AbaaA9Ljce/FgQolSMc2S9gVvC8KKAAh/yQr
	jelUW/CHFfefX+mbjC5uuHuX+w94L6cU3GpFXIN4d5KsAuEQbCnW1Ccp;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: bdc523f9a54890b8a30dd6fd53d5d024
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Eric Rescorla wrote:
> I recently made another pass through gruu-10 and I started wondering
> about the use of the "grid" parameter. ISTM that it serves two
> purposes:
> 
> 1. To let a UA hang a context variable/indicator off of a URI.
> 2. To let a UA know it was referenced via a GRUU.
> 
> So, the grid is sort of doing double duty in two not terribly
> related contexts. That's not always bad, but I fear it is
> in this case.

I must admit that this double usage arose out of expediency, and fairly 
recently.

Originally there was no way to tell whether you had been invoked via a 
gruu or the corresponding AOR, except if you had happened to use a grid 
parameter and it hadn't been tampered with. But that turned out not to 
be good enough.

The usage seemed benign enough at the time.

> First, wouldn't it be nice to be able to hang a context
> variable/indicator off any URI, not just a GRUU? 

Perhaps. Though the logistics get more difficult. If the context is 
applied to an AOR, and can be delivered to multiple UAs, then they must 
have a common agreement about the meaning of the context. But I suppose 
somebody would find a use for it.

> I've seen this issue
> come up in the context of e-mail spam, where users would like to be able
> to mint new e-mail addresses (sort-of capabilities) for each use to
> enable easy filtering.  It's obviously really nice to be able to do this
> without the help of your service provider. If you could use grids
> (probably renamed) with AORs or something like them, that would work for
> this, right? 
> 
> Second, just from an evocative perspective, having a "grid" parameter
> which can get into the To: one of two ways

It is only the R-URI that can get a grid parameter in two ways.

> and which means 
> "I was referenced via a GRUU" feels overloaded. Why not invent
> a different parameter for "I was referenced via a GRUU".

I think of the grid parameter with no value as simply the "default" 
value in a gruu, so it doesn't feel overloaded to me.

Would it seem less weird if the gruu that was returned by the registrar 
was pre-populated with a grid parameter with no value? (And the 
understanding that the UA may add a value to it if desired.) In that 
case, the use of a gruu with no grid parameter would be an error, which 
could be fixed either by rejecting it or by inserting the grid parameter.

But I also don't have a big problem with making this two parameters if 
there is agreement that grid should be usable for non-gruus. The 
downside to this is that the grid parameter requires special action from 
the proxy translating the R-URI. Coupling this to gruu ensures it will 
be implemented where it needs to be. If it were decoupled then I don't 
know how you ensure the proper translation will be done.

	Paul

> -Ekr
> 
> 
> 
> 
> 
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 10:58:45 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPh0N-0001tk-QR; Tue, 19 Sep 2006 10:55:23 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPh0K-0001qp-6y
	for sip@ietf.org; Tue, 19 Sep 2006 10:55:20 -0400
Received: from rwcrmhc11.comcast.net ([204.127.192.81])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPgwu-0004YE-Cw
	for sip@ietf.org; Tue, 19 Sep 2006 10:51:51 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (rwcrmhc11) with ESMTP
	id <20060919145147m1100b9qlee>; Tue, 19 Sep 2006 14:51:47 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8JEpk1f004475
	for <sip@ietf.org>; Tue, 19 Sep 2006 10:51:46 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8JEpkxA004471;
	Tue, 19 Sep 2006 10:51:46 -0400
Date: Tue, 19 Sep 2006 10:51:46 -0400
Message-Id: <200609191451.k8JEpkxA004471@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <45056720.4070502@cisco.com> (jdrosen@cisco.com)
Subject: Re: [Sip] GRUU-10: "gruu" as both a header and URI parameter
References: <2B87277A-D19C-43D2-987B-C8DEA01456D2@estacado.net>
	<44C94B32-8591-47F6-A6FB-7D8D2C92ED83@cisco.com>
	<45056720.4070502@cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 93238566e09e6e262849b4f805833007
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Jonathan Rosenberg <jdrosen@cisco.com>

   I would suggest:

   ;gr be the URI parameter which signals that the URI is a GRUU, analagous 
   to ;lr.

   ;gruu be the Contact header field parameter which conveys the gruu 
   assigned to you in the REGISTER response.

   So, a REGISTER resposne would look like in part:

   SIP/2.0 200 OK
   Contact: <sip:10.0.1.1>;gruu="sip:joe@domain.com;gr;opaque=asdasdasd"

This seems reasonable to me, as it avoids the confusion as previously
mentioned, and makes the URI shorter.

In re backward compatibility, the only loss is that an implementation
that looks for "gruu" on URIs will be unable to detect that the new
GRUUs are GRUUs.  But it's not clear that any implementation does that
yet.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 11:00:13 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPh2a-0002WP-RK; Tue, 19 Sep 2006 10:57:40 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPh0e-0001x9-Ir
	for sip@ietf.org; Tue, 19 Sep 2006 10:55:40 -0400
Received: from alnrmhc14.comcast.net ([206.18.177.54])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPgny-0003TB-2k
	for sip@ietf.org; Tue, 19 Sep 2006 10:42:36 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc14) with ESMTP
	id <20060919144223b1400jc6j4e>; Tue, 19 Sep 2006 14:42:33 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8JEgM1f004277
	for <sip@ietf.org>; Tue, 19 Sep 2006 10:42:22 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8JEgMl0004273;
	Tue, 19 Sep 2006 10:42:22 -0400
Date: Tue, 19 Sep 2006 10:42:22 -0400
Message-Id: <200609191442.k8JEgMl0004273@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <450EA394.6000005@cisco.com> (jdrosen@cisco.com)
Subject: Re: [Sip] GRUU and Anonymity
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>
	<45081D43.5040003@cisco.com> <450AC150.1000405@cisco.com>
	<A9BC1F54-0545-4B6E-888E-E68AAC6E11BB@cisco.com>
	<450EA394.6000005@cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: d6b246023072368de71562c0ab503126
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Jonathan Rosenberg <jdrosen@cisco.com>

   So what is your view on the specific mechanism I was proposing to meet 
   this objective? Namely, that the registrar would provide you with a 
   'regular' gruu and a pseudononymous one, and the latter changes every 
   time you create a new registration (not refresh, a new one entirely).

I agree that you've shown the necessity of modifying GRUU to support
this level of anonymity.  But one clarification -- is the
"pseudononymous GRUU" expected to have a longer lifetime than the
registration, or do you envision it having the same lifetime?

If the latter, it seems that implementing "pseudononymous GRUUs" is
simple, and not much of a burden on Registrars, since they can be
created by any method and stored in the record of the registration.
If the former, then we need to consider how a family of pseudononymous
GRUUs for each UA can be managed.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 11:27:44 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPhT3-0002EK-BT; Tue, 19 Sep 2006 11:25:01 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPhT1-0002EA-E8
	for sip@ietf.org; Tue, 19 Sep 2006 11:24:59 -0400
Received: from laser.networkresonance.com ([198.144.196.2])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPhSx-0000fv-TQ
	for sip@ietf.org; Tue, 19 Sep 2006 11:24:59 -0400
Received: from networkresonance.com (raman.networkresonance.com
	[198.144.196.3])
	by laser.networkresonance.com (Postfix) with ESMTP id 15E39222426
	for <sip@ietf.org>; Tue, 19 Sep 2006 08:38:23 -0700 (PDT)
To: sip@ietf.org
X-Mailer: MH-E 7.4.3; nmh 1.2; XEmacs 21.4 (patch 19)
Date: Tue, 19 Sep 2006 08:24:55 -0700
From: Eric Rescorla <ekr@networkresonance.com>
Message-Id: <20060919153823.15E39222426@laser.networkresonance.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7a6398bf8aaeabc7a7bb696b6b0a2aad
Subject: [Sip] "opaque"
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

The GRUU generation method specified in gruu-10 S. 9 involves
an "opaque" parameter. ISTM that this name is a mistake, for
two reasons:

1. Why does this parameter get named "opaque" where others
   don't? Isn't the "grid" just as opaque?
2. The fact that "opaque" is a term we use a lot in 
   technical discussion means that we're pretty much
   guaranteed to have conversations where people get 
   confused about whether they're talking about *an*
   opaque parameter or *the* opaque parameter.

-Ekr

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 11:38:42 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPhdp-0004yd-0w; Tue, 19 Sep 2006 11:36:09 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPhdn-0004vN-QY
	for sip@ietf.org; Tue, 19 Sep 2006 11:36:07 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPhdk-0002CR-ED
	for sip@ietf.org; Tue, 19 Sep 2006 11:36:07 -0400
Received: from sj-dkim-7.cisco.com ([171.68.10.88])
	by sj-iport-5.cisco.com with ESMTP; 19 Sep 2006 08:36:04 -0700
X-IronPort-AV: i="4.09,186,1157353200"; 
	d="scan'208"; a="322847710:sNHT33463072"
Received: from sj-core-3.cisco.com (sj-core-3.cisco.com [171.68.223.137])
	by sj-dkim-7.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8JFa3SL005337; Tue, 19 Sep 2006 08:36:03 -0700
Received: from xbh-sjc-211.amer.cisco.com (xbh-sjc-211.cisco.com
	[171.70.151.144])
	by sj-core-3.cisco.com (8.12.10/8.12.6) with ESMTP id k8JFa3w9019365;
	Tue, 19 Sep 2006 08:36:03 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 19 Sep 2006 08:36:03 -0700
Received: from [10.32.241.148] ([10.32.241.148]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 19 Sep 2006 08:36:03 -0700
Message-ID: <45100E61.9080909@cisco.com>
Date: Tue, 19 Sep 2006 11:36:01 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Dale.Worley@comcast.net
Subject: Re: [Sip] GRUU and Anonymity
References: <1ECE0EB50388174790F9694F77522CCF0D144A51@zrc2hxm0.corp.nortel.com>	<45081D43.5040003@cisco.com>
	<450AC150.1000405@cisco.com>	<A9BC1F54-0545-4B6E-888E-E68AAC6E11BB@cisco.com>	<450EA394.6000005@cisco.com>
	<200609191442.k8JEgMl0004273@dragon.ariadne.com>
In-Reply-To: <200609191442.k8JEgMl0004273@dragon.ariadne.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 19 Sep 2006 15:36:03.0344 (UTC)
	FILETIME=[50B03100:01C6DC01]
DKIM-Signature: a=rsa-sha1; q=dns; l=1943; t=1158680163; x=1159544163;
	c=relaxed/simple; s=sjdkim7002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=iBBQyAATs4wpq5ayW2ev4Yquh4kwBFdLXTrMhCttsYaUsPYgygogy6LPg1yZwPF7S45FdLxl
	GBsRY1PqaU8RNCVA5ZEceIGqvV5d3IZZSjz7WAY2+nRwwtyM9VmTjvyc;
Authentication-Results: sj-dkim-7.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9ed51c9d1356100bce94f1ae4ec616a9
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

The proposal was that it would have the lifetime of the registration. It 
would remain fixed during refreshes, but if your registration lapses and 
expires, or is ended with Expires:0, when you log back on with a new 
registration you'd get a new pseudononymnous gruu.

-Jonathan R.

Dale.Worley@comcast.net wrote:

>    From: Jonathan Rosenberg <jdrosen@cisco.com>
> 
>    So what is your view on the specific mechanism I was proposing to meet 
>    this objective? Namely, that the registrar would provide you with a 
>    'regular' gruu and a pseudononymous one, and the latter changes every 
>    time you create a new registration (not refresh, a new one entirely).
> 
> I agree that you've shown the necessity of modifying GRUU to support
> this level of anonymity.  But one clarification -- is the
> "pseudononymous GRUU" expected to have a longer lifetime than the
> registration, or do you envision it having the same lifetime?
> 
> If the latter, it seems that implementing "pseudononymous GRUUs" is
> simple, and not much of a burden on Registrars, since they can be
> created by any method and stored in the record of the registration.
> If the former, then we need to consider how a family of pseudononymous
> GRUUs for each UA can be managed.
> 
> Dale
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 12:11:30 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPi8s-0007yA-Qb; Tue, 19 Sep 2006 12:08:14 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPi8q-0007y3-WD
	for sip@ietf.org; Tue, 19 Sep 2006 12:08:13 -0400
Received: from jes-fe1.zx.nl ([194.187.76.132])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPi8g-00067K-WB
	for sip@ietf.org; Tue, 19 Sep 2006 12:08:12 -0400
Received: from Inbox ([84.241.210.60])
	by jes-fe1.zx.nl (Sun Java System Messaging Server 6.2-2.05 (built Apr
	28
	2005)) with ESMTP id <0J5U00B8QNBV8970@jes-fe1.zx.nl> for sip@ietf.org;
	Tue, 19 Sep 2006 18:02:32 +0100 (WEST)
Date: Tue, 19 Sep 2006 18:08:16 +0200
From: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: RE: [Sip] GRUU and grid
To: Paul Kyzivat <pkyzivat@cisco.com>, Eric Rescorla <ekr@networkresonance.com>
Message-id: <0J5U00B8RNBX8970@jes-fe1.zx.nl>
MIME-version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Importance: normal
X-Priority: 3
X-Spam-Score: 1.2 (+)
X-Scan-Signature: a87a9cdae4ac5d3fbeee75cd0026d632
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Paul, Eric,

As I commented before - for a request sent to a GRUU outside of a dialog, I=
 think the GRUU would normally appear in the To header, including any grid =
parameter. Therefore the UAS could inspect that to determine if the request=
 was sent to (one of) its GRUU(s), and proxies need not copy the grid

Regards,
Jeroen=20

-----Oorspronkelijk bericht -----
Van: "Paul Kyzivat" <pkyzivat@cisco.com>
Aan: "Eric Rescorla" <ekr@networkresonance.com>
CC: sip@ietf.org
Verzonden: 19-9-06 15:56
Onderwerp: Re: [Sip] GRUU and grid



Eric Rescorla wrote:
> I recently made another pass through gruu-10 and I started wondering
> about the use of the "grid" parameter. ISTM that it serves two
> purposes:
>=20
> 1. To let a UA hang a context variable/indicator off of a URI.
> 2. To let a UA know it was referenced via a GRUU.
>=20
> So, the grid is sort of doing double duty in two not terribly
> related contexts. That's not always bad, but I fear it is
> in this case.

I must admit that this double usage arose out of expediency, and fairly=20
recently.

Originally there was no way to tell whether you had been invoked via a=20
gruu or the corresponding AOR, except if you had happened to use a grid=20
parameter and it hadn't been tampered with. But that turned out not to=20
be good enough.

The usage seemed benign enough at the time.

> First, wouldn't it be nice to be able to hang a context
> variable/indicator off any URI, not just a GRUU?=20

Perhaps. Though the logistics get more difficult. If the context is=20
applied to an AOR, and can be delivered to multiple UAs, then they must=20
have a common agreement about the meaning of the context. But I suppose=20
somebody would find a use for it.

> I've seen this issue
> come up in the context of e-mail spam, where users would like to be able
> to mint new e-mail addresses (sort-of capabilities) for each use to
> enable easy filtering.  It's obviously really nice to be able to do this
> without the help of your service provider. If you could use grids
> (probably renamed) with AORs or something like them, that would work for
> this, right?=20
>=20
> Second, just from an evocative perspective, having a "grid" parameter
> which can get into the To: one of two ways

It is only the R-URI that can get a grid parameter in two ways.

> and which means=20
> "I was referenced via a GRUU" feels overloaded. Why not invent
> a different parameter for "I was referenced via a GRUU".

I think of the grid parameter with no value as simply the "default"=20
value in a gruu, so it doesn't feel overloaded to me.

Would it seem less weird if the gruu that was returned by the registrar=20
was pre-populated with a grid parameter with no value? (And the=20
understanding that the UA may add a value to it if desired.) In that=20
case, the use of a gruu with no grid parameter would be an error, which=20
could be fixed either by rejecting it or by inserting the grid parameter.

But I also don't have a big problem with making this two parameters if=20
there is agreement that grid should be usable for non-gruus. The=20
downside to this is that the grid parameter requires special action from=20
the proxy translating the R-URI. Coupling this to gruu ensures it will=20
be implemented where it needs to be. If it were decoupled then I don't=20
know how you ensure the proper translation will be done.

	Paul

> -Ekr
>=20
>=20
>=20
>=20
>=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 12:46:59 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPihd-0001ls-Sn; Tue, 19 Sep 2006 12:44:09 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPihb-0001lG-JM
	for sip@ietf.org; Tue, 19 Sep 2006 12:44:07 -0400
Received: from rwcrmhc15.comcast.net ([204.127.192.85])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPiaK-0002g6-0i
	for sip@ietf.org; Tue, 19 Sep 2006 12:36:37 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (rwcrmhc15) with ESMTP
	id <20060919163629m1500lcc7oe>; Tue, 19 Sep 2006 16:36:35 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8JGaS1f006953
	for <sip@ietf.org>; Tue, 19 Sep 2006 12:36:28 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8JGaS2X006949;
	Tue, 19 Sep 2006 12:36:28 -0400
Date: Tue, 19 Sep 2006 12:36:28 -0400
Message-Id: <200609191636.k8JGaS2X006949@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <0J5U00B8RNBX8970@jes-fe1.zx.nl> (jbemmel@zonnet.nl)
Subject: Re: [Sip] GRUU and grid
References: <0J5U00B8RNBX8970@jes-fe1.zx.nl>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 1ac7cc0a4cd376402b85bc1961a86ac2
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Jeroen Van Bemmel <jbemmel@zonnet.nl>

   As I commented before - for a request sent to a GRUU outside of a
   dialog, I think the GRUU would normally appear in the To header,
   including any grid parameter. Therefore the UAS could inspect that
   to determine if the request was sent to (one of) its GRUU(s), and
   proxies need not copy the grid

That's assuming that the request was originally sent to the GRUU, as
opposed to originally sent to an address that was then forwarded to
the GRUU.  In general, treating the To field as anything other than a
comment is dangerous.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 12:46:59 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPihO-0001fC-TC; Tue, 19 Sep 2006 12:43:54 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPihN-0001dp-Kr
	for sip@ietf.org; Tue, 19 Sep 2006 12:43:53 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPid0-0003C5-JJ
	for sip@ietf.org; Tue, 19 Sep 2006 12:39:24 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 19 Sep 2006 09:39:22 -0700
X-IronPort-AV: i="4.09,186,1157353200"; 
	d="scan'208"; a="42495561:sNHT34361488"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8JGdMnM008983; Tue, 19 Sep 2006 12:39:22 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8JGdLdM007889; 
	Tue, 19 Sep 2006 12:39:21 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 19 Sep 2006 12:39:21 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 19 Sep 2006 12:39:21 -0400
Message-ID: <45101D37.6020406@cisco.com>
Date: Tue, 19 Sep 2006 12:39:19 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Jeroen Van Bemmel <jbemmel@zonnet.nl>
Subject: Re: [Sip] GRUU and grid
References: <0J5U00B8RNBX8970@jes-fe1.zx.nl>
In-Reply-To: <0J5U00B8RNBX8970@jes-fe1.zx.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 19 Sep 2006 16:39:21.0255 (UTC)
	FILETIME=[286B6B70:01C6DC0A]
DKIM-Signature: a=rsa-sha1; q=dns; l=5417; t=1158683962; x=1159547962;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20grid
	|To:Jeroen=20Van=20Bemmel=20<jbemmel@zonnet.nl>;
	X=v=3Dcisco.com=3B=20h=3DJ0L+1lFe8flUOjLWQMT19RKfF70=3D;
	b=HJMAWn9D59f34YtxBgmdHddZdjsjM20/tcfXv33T7KTpcwuvqqVwts/IW9mk3UY+DmMPs7xE
	OkmhEvYdRTp4Ou5XQV57zPUbs1y2eCZGrlp1yIk3JB1Diq6trTdHUSe9;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: a1852b4f554b02e7e4548cc7928acc1f
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Jeroen Van Bemmel wrote:
> Paul, Eric,
> 
> As I commented before - for a request sent to a GRUU outside of a dialog,
> I think the GRUU would normally appear in the To header, including any
> grid parameter. Therefore the UAS could inspect that to determine if the
> request was sent to (one of) its GRUU(s), and proxies need not copy the grid

The To-URI is never a reliable source of information. I agree that in 
*some* cases the gruu is likely to end up in the To-URI as well as the 
R-URI, but there are lots of cases when that might not be so. E.g.
- I might have gotten in an invite dialog with you, and then want to
   subscribe to you. That is recommended to be done out of dialog now.
   I am likely to use the To or From URI from my existing dialog
   for the new dialog, and just use the gruu from the Contact for
   the R-URI.

- I might send a request, get a 3xx that happens to contain a gruu,
   and retry changing only the R-URI to the gruu.

- I might send a request to alice@atlanta, and be forwarded to
   a gruu for bob@biloxi. Only the R-URI will be updated.

- I might subscribe to presence for alice@atlanta, and pick out
   a contact to call that happens to be a gruu, to send a request to.
   I'm inclined to make the To be alice@atlanta and the R-URI be
   the gruu.

The time you want the grid is when the gruu was definitely the target of 
the request, and was translated. To be sure of that, the proxy doing the 
translation must be complicit.

	Paul

> Regards,
> Jeroen 
> 
> -----Oorspronkelijk bericht -----
> Van: "Paul Kyzivat" <pkyzivat@cisco.com>
> Aan: "Eric Rescorla" <ekr@networkresonance.com>
> CC: sip@ietf.org
> Verzonden: 19-9-06 15:56
> Onderwerp: Re: [Sip] GRUU and grid
> 
> 
> 
> Eric Rescorla wrote:
>> I recently made another pass through gruu-10 and I started wondering
>> about the use of the "grid" parameter. ISTM that it serves two
>> purposes:
>>
>> 1. To let a UA hang a context variable/indicator off of a URI.
>> 2. To let a UA know it was referenced via a GRUU.
>>
>> So, the grid is sort of doing double duty in two not terribly
>> related contexts. That's not always bad, but I fear it is
>> in this case.
> 
> I must admit that this double usage arose out of expediency, and fairly 
> recently.
> 
> Originally there was no way to tell whether you had been invoked via a 
> gruu or the corresponding AOR, except if you had happened to use a grid 
> parameter and it hadn't been tampered with. But that turned out not to 
> be good enough.
> 
> The usage seemed benign enough at the time.
> 
>> First, wouldn't it be nice to be able to hang a context
>> variable/indicator off any URI, not just a GRUU? 
> 
> Perhaps. Though the logistics get more difficult. If the context is 
> applied to an AOR, and can be delivered to multiple UAs, then they must 
> have a common agreement about the meaning of the context. But I suppose 
> somebody would find a use for it.
> 
>> I've seen this issue
>> come up in the context of e-mail spam, where users would like to be able
>> to mint new e-mail addresses (sort-of capabilities) for each use to
>> enable easy filtering.  It's obviously really nice to be able to do this
>> without the help of your service provider. If you could use grids
>> (probably renamed) with AORs or something like them, that would work for
>> this, right? 
>>
>> Second, just from an evocative perspective, having a "grid" parameter
>> which can get into the To: one of two ways
> 
> It is only the R-URI that can get a grid parameter in two ways.
> 
>> and which means 
>> "I was referenced via a GRUU" feels overloaded. Why not invent
>> a different parameter for "I was referenced via a GRUU".
> 
> I think of the grid parameter with no value as simply the "default" 
> value in a gruu, so it doesn't feel overloaded to me.
> 
> Would it seem less weird if the gruu that was returned by the registrar 
> was pre-populated with a grid parameter with no value? (And the 
> understanding that the UA may add a value to it if desired.) In that 
> case, the use of a gruu with no grid parameter would be an error, which 
> could be fixed either by rejecting it or by inserting the grid parameter.
> 
> But I also don't have a big problem with making this two parameters if 
> there is agreement that grid should be usable for non-gruus. The 
> downside to this is that the grid parameter requires special action from 
> the proxy translating the R-URI. Coupling this to gruu ensures it will 
> be implemented where it needs to be. If it were decoupled then I don't 
> know how you ensure the proper translation will be done.
> 
> 	Paul
> 
>> -Ekr
>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 13:40:54 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPjWh-0004N0-1i; Tue, 19 Sep 2006 13:36:55 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPjWf-0004A8-Bq
	for sip@ietf.org; Tue, 19 Sep 2006 13:36:53 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPjP3-0002PZ-LD
	for sip@ietf.org; Tue, 19 Sep 2006 13:29:04 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k8JHSSZd003088;
	Tue, 19 Sep 2006 12:28:36 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Tue, 19 Sep 2006 12:28:42 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Tue, 19 Sep 2006 19:28:40 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Tue, 19 Sep 2006 19:28:39 +0200
Message-ID: <5D1A7985295922448D5550C94DE29180468D47@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbY2Jrw6NXLn0UTQV6Oy5FlbcbZjwDN/4vw
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 19 Sep 2006 17:28:40.0396 (UTC)
	FILETIME=[0C3480C0:01C6DC11]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e367d58950869b6582535ddf5a673488
Cc: IETF SIP List <sip@ietf.org>, Francois Audet <audet@nortel.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

What I also believe we need is text that covers how the UA
implementation recovers from the situation where the GRUU has been
accidently revealed. It seems to me that where the user has to
explicitly turn it off before he calls the kitchen salesman is
definitely prone to error. If the GRUU lasts for ever, then the kitchen
salesman has the opportunity of calling that UA for ever.

On the call we discussed that the user should request a new GRUU, and
that we would then bar the old GRUU within the UA itself, but this
sounds a bit like a fudge rather than a real fix.

Regards

Keith=20

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Sent: 15 September 2006 16:06
> To: Paul Kyzivat
> Cc: IETF SIP List; Francois Audet
> Subject: Re: [Sip] GRUU and Anonymity
>=20
> Back to the original question, I feel strongly that it is not=20
> in the scope of gruu to solve THIS level of anonymity. I=20
> agree its worth doing but not in the gruu spec.
>=20
> I think its fair to ask whether or not the gruu spec should=20
> be specified in a way that it provides privacy services that=20
> are no worse than what what is defined in RFC 3261. And more=20
> specifically, if a user does not explicitly invoke a privacy=20
> service (through the privacy header or other mechanisms),=20
> does GRUU make things worse, and can we specify it in a way=20
> that doesnt make it worse?
>=20
> Clearly one could use gruu as defined today, and if you=20
> wanted header anonymity, you can use the 'header' privacy=20
> service and that would work and provide you a level of=20
> anonymity on par with today without gruu.
>=20
> It is certainly the case that, in RFC 3261, the SIP invite,=20
> without treatment by some external b2bua service, will reveal=20
> the domain of the originator, through the IP addresses in the=20
> SDP alone. Even with treatment by ANY of the privacy services=20
> provided in RFC3323, the domain of the originator is=20
> revealed. Consequently I don't think we need to hold up gruu=20
> on this feature.
>=20
> With RFC 3261 today, if the user didn't use an anonymization=20
> service, they could include a From header field of=20
> username@anonymous.invalid.=20
> They could rotate the value of 'username' from call to call,=20
> though the IP addresses in various places would probably=20
> correlate across calls, since most users have fairly static IPs.
>=20
> Thus, I would asser that SIP today, without usage of an=20
> anonymity service, provides nothing more than pseudonymity=20
> (with the IP address as your pseudonym). This would tell me=20
> that it would be acceptable to produce a gruu spec which=20
> provides nothing more than pseudonymity. Since IP addresses=20
> can change over longer periods of time (reboot cycles), I'd=20
> also propose that gruu support slowly changing pseudonyms -=20
> namely, different on each registration. This is fairly easy=20
> to add to gruu.
>=20
> With this proposal, I would assert that GRUU provides privacy=20
> services equivalent to the level of anonymity afforded by RFC=20
> 3261, and that better anonymity can be provided by the=20
> mechanisms in rfc3323, which get no better or worse with the=20
> addition of gruu. I think this is the metric we need to meet,=20
> and NO BETTER.
>=20
> Does this get us out of this conundrum?
>=20
> -Jonathan R.
>=20
>=20
> Paul Kyzivat wrote:
>=20
> > Francois,
> >=20
> > You are stating a need for a level of anonymity that=20
> Jonathan says is=20
> > almost impossible to achieve. Something has to give here.
> >=20
> > I think the world already deals with differing levels of anonymity.=20
> > Callerid blocking in the pstn only blocks your identity from the=20
> > receiving party, while the whole intervening network has access to=20
> > your identity. And its often negated when making emergency=20
> calls. So=20
> > if I have a *serious* need to remain anonymous, invoking callerid=20
> > blocking already isn't enough. Instead I am forced to seek out an=20
> > anonymous phone from which to originate the call, or use some very=20
> > complex mechanisms that are not widely available. And when=20
> seeking out=20
> > an anonymous phone from which to make my call, I will again=20
> typically=20
> > be limited in the scope of anonymity. For instance if I=20
> cannot travel=20
> > to an arbitrary location to make my call then the location=20
> I make the=20
> > call from can be used to guess where I am.
> >=20
> > One part of jonathan's old proposal escapes me: why is it=20
> important to=20
> > support sip identity when making an anonymous call? Does it really=20
> > matter to the recipient that the caller is really the particular=20
> > anonymous caller it claims to be rather than some other=20
> unknown caller?
> >=20
> > I am inclined to think that an independent anonymizer service (b2bua
> > based) running in its own domain, would be sufficient for all *my*=20
> > worst case anonymity needs, and that anonymity within the=20
> domain of my=20
> > own provider would be sufficient for those cases when I=20
> just want to=20
> > "block callerid". YMMV.
> >=20
> > It is clear that the more complete forms of anonymity are=20
> relatively=20
> > expensive to provide, to the point that it probably=20
> wouldn't be good=20
> > to make that the default. If it became an extra cost=20
> service then it=20
> > would be self funding. Then people will settle for less=20
> when the need=20
> > doesn't justify the cost.
> >=20
> >     Paul
> >=20
> > Francois Audet wrote:
> >=20
> >> =20
> >>
> >>>> I guess what I'm trying to say is that if we need
> >>>
> >>> annonymity, it needs
> >>>
> >>>> to be full annonymity. I don't see a value in "pseudonymity".
> >>>
> >>> Why? Certainly there are privacy applications (such as=20
> calling the=20
> >>> police to anonymously report an incident) where pseudonymity is=20
> >>> probably sufficient.
> >>
> >>
> >> I don't believe that a system that "works sometimes" is useful.
> >>
> >> To take the "police" example, if my domain is enough for=20
> the police=20
> >> to track me down (or to a subset small enought that I'm not=20
> >> annonymous), then, well, it's not annonymous anymore.=20
> Maybe I have my=20
> >> own domain, or you can track that there was only one user=20
> with that=20
> >> particular domain who might have made that call. Maybe I'm=20
> reporting=20
> >> something to police, and it shows my employer's domain.=20
> Suddently, my=20
> >> employer is embroiled.
> >>
> >> The end-user will not have confidence that's it's really=20
> annonymous=20
> >> because it's not always annonymous.
> >>
> >> Maybe I'm missing something that is special to GRUU. I'm reading=20
> >> Dean's summary, but I'm not terribly convinced that the claims are=20
> >> true.
> >>
> >> I'm highly sceptical that somehow that we (IETF) need to provide a=20
> >> solution to the GRUU anonimity problem.
> >>
> >> But I could be missising something.
> >>
> >>
> >>>> So, I agree with you. When we DO solve annonymity, it=20
> needs to work=20
> >>>> with GRUU and everthing else. In the meanwhile, I don't
> >>>
> >>> think GRUU is
> >>>
> >>>> special and requires immediately a solution to annonymity.
> >>>>
> >>> You may have to wait a while. A LONG while.
> >>>
> >>> In:
> >>> http://www.jdrosen.net/papers/draft-rosenberg-sip-identity-pri
> >>
> >> vacy-00.txt
> >>
> >>> I took a stab at some thoughts on true anonymity. Its nearly=20
> >>> impossible to do. Even anonymizers aren't sufficient. It=20
> is possible=20
> >>> that the only solutions require crazy BGP hacks like I=20
> describe else=20
> >>> a global, massive p2p mesh.
> >>
> >>
> >> Yeah, I have read this, and I do agree that it's MUCH bigger than=20
> >> just GRUU.
> >>
> >> _______________________________________________
> >> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >> This list is for NEW development of the core SIP Protocol Use=20
> >> sip-implementors@cs.columbia.edu for questions on current sip Use=20
> >> sipping@ietf.org for new developments on the application of sip
> >>
> >=20
>=20
> --=20
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ=20
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 14:35:37 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPkPT-0000cc-Nv; Tue, 19 Sep 2006 14:33:31 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPkPR-0000XY-VC
	for sip@ietf.org; Tue, 19 Sep 2006 14:33:29 -0400
Received: from smtp4.versatel.nl ([62.58.50.91])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPkPP-00079s-ON
	for sip@ietf.org; Tue, 19 Sep 2006 14:33:29 -0400
Received: (qmail 18792 invoked by uid 0); 19 Sep 2006 18:33:04 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp4.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 19 Sep 2006 18:33:04 -0000
Message-ID: <002001c6dc1a$111bc1d0$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
References: <0J5U00B8RNBX8970@jes-fe1.zx.nl> <45101D37.6020406@cisco.com>
Subject: Re: [Sip] GRUU and grid
Date: Tue, 19 Sep 2006 20:33:13 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0770535483960d190d4a0d020e7060bd
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

OK, so there exist cases that would not work without the proxy's help.

It appears the draft could provide some more guidance in section 8.1.2, on 
how to populate the To header for requests sent to a GRUU outside of a 
dialog.
RFC3261 says: "The initial Request-URI of the message SHOULD be set to the 
value of the URI in the To field." But for GRUU, we start with a request 
URI.

If the AoR can be derived from the GRUU or is otherwise known, it would make 
sense to use that. But for anonymized GRUUs?

Regards,

Jeroen

----- Original Message ----- 
From: "Paul Kyzivat" <pkyzivat@cisco.com>
To: "Jeroen Van Bemmel" <jbemmel@zonnet.nl>
Cc: "Eric Rescorla" <ekr@networkresonance.com>; <sip@ietf.org>
Sent: Tuesday, September 19, 2006 6:39 PM
Subject: Re: [Sip] GRUU and grid


>
>
> Jeroen Van Bemmel wrote:
>> Paul, Eric,
>>
>> As I commented before - for a request sent to a GRUU outside of a dialog,
>> I think the GRUU would normally appear in the To header, including any
>> grid parameter. Therefore the UAS could inspect that to determine if the
>> request was sent to (one of) its GRUU(s), and proxies need not copy the 
>> grid
>
> The To-URI is never a reliable source of information. I agree that in 
> *some* cases the gruu is likely to end up in the To-URI as well as the 
> R-URI, but there are lots of cases when that might not be so. E.g.
> - I might have gotten in an invite dialog with you, and then want to
>   subscribe to you. That is recommended to be done out of dialog now.
>   I am likely to use the To or From URI from my existing dialog
>   for the new dialog, and just use the gruu from the Contact for
>   the R-URI.
>
> - I might send a request, get a 3xx that happens to contain a gruu,
>   and retry changing only the R-URI to the gruu.
>
> - I might send a request to alice@atlanta, and be forwarded to
>   a gruu for bob@biloxi. Only the R-URI will be updated.
>
> - I might subscribe to presence for alice@atlanta, and pick out
>   a contact to call that happens to be a gruu, to send a request to.
>   I'm inclined to make the To be alice@atlanta and the R-URI be
>   the gruu.
>
> The time you want the grid is when the gruu was definitely the target of 
> the request, and was translated. To be sure of that, the proxy doing the 
> translation must be complicit.
>
> Paul
>
>> Regards,
>> Jeroen -----Oorspronkelijk bericht -----
>> Van: "Paul Kyzivat" <pkyzivat@cisco.com>
>> Aan: "Eric Rescorla" <ekr@networkresonance.com>
>> CC: sip@ietf.org
>> Verzonden: 19-9-06 15:56
>> Onderwerp: Re: [Sip] GRUU and grid
>>
>>
>>
>> Eric Rescorla wrote:
>>> I recently made another pass through gruu-10 and I started wondering
>>> about the use of the "grid" parameter. ISTM that it serves two
>>> purposes:
>>>
>>> 1. To let a UA hang a context variable/indicator off of a URI.
>>> 2. To let a UA know it was referenced via a GRUU.
>>>
>>> So, the grid is sort of doing double duty in two not terribly
>>> related contexts. That's not always bad, but I fear it is
>>> in this case.
>>
>> I must admit that this double usage arose out of expediency, and fairly 
>> recently.
>>
>> Originally there was no way to tell whether you had been invoked via a 
>> gruu or the corresponding AOR, except if you had happened to use a grid 
>> parameter and it hadn't been tampered with. But that turned out not to be 
>> good enough.
>>
>> The usage seemed benign enough at the time.
>>
>>> First, wouldn't it be nice to be able to hang a context
>>> variable/indicator off any URI, not just a GRUU?
>>
>> Perhaps. Though the logistics get more difficult. If the context is 
>> applied to an AOR, and can be delivered to multiple UAs, then they must 
>> have a common agreement about the meaning of the context. But I suppose 
>> somebody would find a use for it.
>>
>>> I've seen this issue
>>> come up in the context of e-mail spam, where users would like to be able
>>> to mint new e-mail addresses (sort-of capabilities) for each use to
>>> enable easy filtering.  It's obviously really nice to be able to do this
>>> without the help of your service provider. If you could use grids
>>> (probably renamed) with AORs or something like them, that would work for
>>> this, right?
>>> Second, just from an evocative perspective, having a "grid" parameter
>>> which can get into the To: one of two ways
>>
>> It is only the R-URI that can get a grid parameter in two ways.
>>
>>> and which means "I was referenced via a GRUU" feels overloaded. Why not 
>>> invent
>>> a different parameter for "I was referenced via a GRUU".
>>
>> I think of the grid parameter with no value as simply the "default" value 
>> in a gruu, so it doesn't feel overloaded to me.
>>
>> Would it seem less weird if the gruu that was returned by the registrar 
>> was pre-populated with a grid parameter with no value? (And the 
>> understanding that the UA may add a value to it if desired.) In that 
>> case, the use of a gruu with no grid parameter would be an error, which 
>> could be fixed either by rejecting it or by inserting the grid parameter.
>>
>> But I also don't have a big problem with making this two parameters if 
>> there is agreement that grid should be usable for non-gruus. The downside 
>> to this is that the grid parameter requires special action from the proxy 
>> translating the R-URI. Coupling this to gruu ensures it will be 
>> implemented where it needs to be. If it were decoupled then I don't know 
>> how you ensure the proper translation will be done.
>>
>> Paul
>>
>>> -Ekr
>>>
>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>> 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 19 14:35:37 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPkP1-0008Ab-LF; Tue, 19 Sep 2006 14:33:03 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPkP0-00083r-5t
	for sip@ietf.org; Tue, 19 Sep 2006 14:33:02 -0400
Received: from borg.juniper.net ([207.17.137.119])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPkOy-00076f-S0
	for sip@ietf.org; Tue, 19 Sep 2006 14:33:02 -0400
Received: from unknown (HELO alpha.jnpr.net) ([172.24.18.126])
	by borg.juniper.net with ESMTP; 19 Sep 2006 11:30:52 -0700
X-IronPort-AV: i="4.09,186,1157353200"; 
	d="scan'208,217"; a="590798737:sNHT68426996"
Received: from hadron.jnpr.net ([172.24.15.25]) by alpha.jnpr.net with
	Microsoft SMTPSVC(6.0.3790.1830); Tue, 19 Sep 2006 11:32:59 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Tue, 19 Sep 2006 11:32:57 -0700
Message-ID: <F07F17B61B7FF545BC7D7E4BFBE15D2A02139430@hadron.jnpr.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Interoperability with Microsoft LCS server
Thread-Index: AcbcGgdcWPxNY6tnT5aTp7q31sIqIw==
From: "Anil Bollineni" <ABollineni@juniper.net>
To: <sip-implementors@cs.columbia.edu>
X-OriginalArrivalTime: 19 Sep 2006 18:32:59.0726 (UTC)
	FILETIME=[088B86E0:01C6DC1A]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7fa173a723009a6ca8ce575a65a5d813
Cc: sip@ietf.org
Subject: [Sip] Interoperability with Microsoft LCS server
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0808386018=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0808386018==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6DC1A.07697304"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6DC1A.07697304
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi All,

=20

We are planning to interoperate with Microsoft LCS server. I have
observed that LCS server has implemented some proprietary SIP
extensions. Does anybody know what RFC's and drafts that Microsoft LCS
server follows?=20

=20

Thanks in Advance,

Anil


------_=_NextPart_001_01C6DC1A.07697304
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:Arial;
	color:windowtext;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-US link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Hi All,<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>We are planning to interoperate with Microsoft LCS =
server. I
have observed that LCS server has implemented some proprietary SIP =
extensions. Does
anybody know what RFC&#8217;s and drafts that Microsoft LCS server =
follows? <o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Thanks in Advance,<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Anil<o:p></o:p></span></font></p>

</div>

</body>

</html>

------_=_NextPart_001_01C6DC1A.07697304--


--===============0808386018==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0808386018==--




From sip-bounces@ietf.org Tue Sep 19 15:18:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPl3J-00089L-QS; Tue, 19 Sep 2006 15:14:41 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPl3I-00084X-IT
	for sip@ietf.org; Tue, 19 Sep 2006 15:14:40 -0400
Received: from web52808.mail.yahoo.com ([206.190.48.251])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GPl3F-00008y-1z
	for sip@ietf.org; Tue, 19 Sep 2006 15:14:40 -0400
Received: (qmail 74492 invoked by uid 60001); 19 Sep 2006 19:14:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=boA2eNxuOeaO4BjqgdZczRFEoeoUkKTng9Jgqw/sUags5WHdUxgSZFh1LCDtTUOT8Nrcyf6UZr3kOs/OdEnYcbbnNOCqIKdKM0LiKYz7Jz9v+x+aI0XIGsj5DkMxbC85ichWTtAuipbp8p8dIOseu8xG0CQbJ8kWoPMeG8Pr0/Y=
	; 
Message-ID: <20060919191436.74490.qmail@web52808.mail.yahoo.com>
Received: from [85.97.96.239] by web52808.mail.yahoo.com via HTTP;
	Tue, 19 Sep 2006 12:14:36 PDT
Date: Tue, 19 Sep 2006 12:14:36 -0700 (PDT)
From: =?utf-8?q?Fatih=20Ey=C3=BCp=20NAR?= <fenar@yahoo.com>
Subject: Re: [Sip] Remote-Party ID
To: "Sanjay Sinha \(sanjsinh\)" <sanjsinh@cisco.com>,
	"Paradiso, Francesco" <Francesco_Paradiso@alliedtelesyn.com>, sip@ietf.org
In-Reply-To: <8983EC086A9D954BA74D9763E853CF3E0217C56C@xmb-rtp-215.amer.cisco.com>
MIME-Version: 1.0
X-Spam-Score: 0.3 (/)
X-Scan-Signature: b4a0a5f5992e2a4954405484e7717d8c
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
Reply-To: =?utf-8?q?Fatih=20Ey=C3=BCp=20NAR?= <fenar@yahoo.com>
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0962140452=="
Errors-To: sip-bounces@ietf.org

--===============0962140452==
Content-Type: multipart/alternative; boundary="0-870833552-1158693276=:74139"

--0-870833552-1158693276=:74139
Content-Type: text/plain; charset=us-ascii

+ : "history-info" RFC4244 fills some gaps of -depriated header- rpid , specially for redirection scenarios.


----- Original Message ----
From: Sanjay Sinha (sanjsinh) <sanjsinh@cisco.com>
To: "Paradiso, Francesco" <Francesco_Paradiso@alliedtelesyn.com>; sip@ietf.org
Sent: Friday, September 15, 2006 6:08:31 PM
Subject: RE: [Sip] Remote-Party ID


You can refer to this draft: draft-ietf-sip-privacy-05.txt. Though Remote-Party ID is not standard anymore and has been replaced with PAI. Pl. see RFC3323-3325.
 
Sanjay




From: Paradiso, Francesco [mailto:Francesco_Paradiso@alliedtelesyn.com] 
Sent: Friday, September 15, 2006 10:15 AM
To: sip@ietf.org
Subject: [Sip] Remote-Party ID


Hi all,
where I can find MANDATORY info about Remote-Party ID field in SIP messages?
 
Thanks in advance
 
 
Best Regards,
Francesco
  
 
_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--0-870833552-1158693276=:74139
Content-Type: text/html; charset=us-ascii

<html><head><style type="text/css"><!-- DIV {margin:0px} --></style></head><body><div style="font-family:times new roman, new york, times, serif;font-size:12pt"><DIV style="FONT-SIZE: 12pt; FONT-FAMILY: times new roman, new york, times, serif">+ : "history-info" RFC4244 fills some gaps of -depriated header- rpid , specially for redirection scenarios.<BR><BR>
<DIV style="FONT-SIZE: 12pt; FONT-FAMILY: times new roman, new york, times, serif">----- Original Message ----<BR>From: Sanjay Sinha (sanjsinh) &lt;sanjsinh@cisco.com&gt;<BR>To: "Paradiso, Francesco" &lt;Francesco_Paradiso@alliedtelesyn.com&gt;; sip@ietf.org<BR>Sent: Friday, September 15, 2006 6:08:31 PM<BR>Subject: RE: [Sip] Remote-Party ID<BR><BR>
<DIV dir=ltr align=left><SPAN class=766480515-15092006><FONT face=Arial color=#0000ff size=2>You can refer to this draft: draft-ietf-sip-privacy-05.txt. Though <FONT color=#000000>Rem</FONT><FONT color=#0000ff>ote-Party ID&nbsp;is not standard anymore and has been replaced with PAI. Pl. see RFC3323-3325.</FONT></FONT></SPAN></DIV>
<DIV dir=ltr align=left><SPAN class=766480515-15092006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV dir=ltr align=left><SPAN class=766480515-15092006><FONT face=Arial color=#0000ff size=2>Sanjay</FONT></SPAN></DIV><BR>
<DIV class=OutlookMessageHeader lang=en-us dir=ltr align=left>
<HR tabIndex=-1>
<FONT face=Tahoma size=2><B>From:</B> Paradiso, Francesco [mailto:Francesco_Paradiso@alliedtelesyn.com] <BR><B>Sent:</B> Friday, September 15, 2006 10:15 AM<BR><B>To:</B> sip@ietf.org<BR><B>Subject:</B> [Sip] Remote-Party ID<BR></FONT><BR></DIV>
<DIV></DIV>
<DIV><FONT face=Arial size=2><SPAN class=158385913-15092006>Hi all,</SPAN></FONT></DIV>
<DIV><FONT face=Arial size=2><SPAN class=158385913-15092006>where I can find MANDATORY info about Remote-Party ID field in SIP messages?</SPAN></FONT></DIV>
<DIV><FONT face=Arial size=2><SPAN class=158385913-15092006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=Arial size=2><SPAN class=158385913-15092006>Thanks in advance</SPAN></FONT></DIV>
<DIV><FONT face=Arial size=2><SPAN class=158385913-15092006></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV class=Section1>
<DIV>
<P class=MsoAutoSig align=left><SPAN lang=IT style="FONT-SIZE: 13.5pt; COLOR: black; FONT-FAMILY: Arial"><FONT face="Monotype Corsiva" size=4>Best Regards,<BR>Francesco</FONT></SPAN></P>&nbsp;<SPAN style="FONT-SIZE: 9pt; FONT-FAMILY: Arial"></SPAN> 
<P></P></DIV></DIV>
<DIV>&nbsp;</DIV>
<DIV>_______________________________________________<BR>Sip mailing list&nbsp;&nbsp;<A href="https://www1.ietf.org/mailman/listinfo/sip" target=_blank>https://www1.ietf.org/mailman/listinfo/sip</A><BR>This list is for NEW development of the core SIP Protocol<BR>Use sip-implementors@cs.columbia.edu for questions on current sip<BR>Use sipping@ietf.org for new developments on the application of sip</DIV></DIV><BR></DIV></div></body></html>
--0-870833552-1158693276=:74139--


--===============0962140452==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0962140452==--




From sip-bounces@ietf.org Tue Sep 19 15:21:34 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPl8H-0003oQ-Hr; Tue, 19 Sep 2006 15:19:49 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPl8G-0003h9-IZ
	for sip@ietf.org; Tue, 19 Sep 2006 15:19:48 -0400
Received: from laser.networkresonance.com ([198.144.196.2])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPl8C-0001Lo-7E
	for sip@ietf.org; Tue, 19 Sep 2006 15:19:48 -0400
Received: from networkresonance.com (raman.networkresonance.com
	[198.144.196.3])
	by laser.networkresonance.com (Postfix) with ESMTP id 47EEC222418
	for <sip@ietf.org>; Tue, 19 Sep 2006 12:33:09 -0700 (PDT)
To: sip@ietf.org
X-Mailer: MH-E 7.4.3; nmh 1.2; XEmacs 21.4 (patch 19)
Date: Tue, 19 Sep 2006 12:19:41 -0700
From: Eric Rescorla <ekr@networkresonance.com>
Message-Id: <20060919193309.47EEC222418@laser.networkresonance.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 4adaf050708fb13be3316a9eee889caa
Subject: [Sip] GRUU state and cancellation
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

There was some discussion on the call today about GRUUs and state
storage.

The general technique for stateless GRUUs is of course to push all the
state into the GRUU and use a cryptographic MAC to determine validity
and prevent tampering. I.e., you have a permanent key K and then the
GRUU is constructed as:

        G = GRUU-data || R
     GRUU = G || HMAC(K, G)

Where R is randomly generated. You can obviously determine whether any
GRUU is valid by checking the HMAC and you don't need to store any local
state other than K.

This doesn't allow for any kind of cancellation or revocation, but those
can be provided with fairly limited state storage. The two obvious
options are Bloom filters and bitfields.

The Bloom filter approach is simple is to just insert any revoked
GRUU into the Bloom filter. This works pretty well as long as the
fraction of revoked GRUUs is fairly small but once it gets fairly
high the Bloom filter starts to fill and you get false positives.
So, it only makes sense if you only very occasionally want to
revoke a GRUU which is the target of abuse.


The bitfield approach is to give each GRUU a sequence number N, like:

        G = GRUU-data || R || N

You then just maintain a bitfield with a bit corresponding to each
value N, with a low-water mark indicating the earliest valid N
(you can also use run-length encoding, etc.) This approach makes
a lot more sense if you're mostly issuing single-use GRUUs and
you just want to remember them while they're still valid. 

-Ekr

P.S. There's a lot of analysis of a related system with much
higher churn rates (SSL servers) in:

H. Shacham, D. Boneh, and E. Rescorla. "Client-Side Caching for TLS",
ACM Trans. Info. & Sys. Security, 7(4):553-75, Nov. 2004. 
http://www.hovav.net/dist/sslex.pdf


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 20 02:08:56 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPvBB-0000LG-LZ; Wed, 20 Sep 2006 02:03:29 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPvB9-0000L5-5f
	for sip@ietf.org; Wed, 20 Sep 2006 02:03:27 -0400
Received: from szxga02-in.huawei.com ([61.144.161.54])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPvB6-00046N-0Q
	for sip@ietf.org; Wed, 20 Sep 2006 02:03:27 -0400
Received: from huawei.com (szxga02-in [172.24.2.6])
	by szxga02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J5V006IAOBA3Z@szxga02-in.huawei.com> for
	sip@ietf.org; Wed, 20 Sep 2006 14:21:10 +0800 (CST)
Received: from huawei.com ([172.24.1.3])
	by szxga02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J5V004QROB9NX@szxga02-in.huawei.com> for
	sip@ietf.org; Wed, 20 Sep 2006 14:21:10 +0800 (CST)
Received: from CMTEST6 ([10.70.149.108])
	by szxml01-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J5V0090ROHGRV@szxml01-in.huawei.com>; Wed,
	20 Sep 2006 14:24:53 +0800 (CST)
Date: Wed, 20 Sep 2006 14:02:31 +0800
From: Tina TSOU <tena@huawei.com>
Subject: Re: Re: [Sip] doubts about draft-gurbani-sip-domain-certs
To: "Vijay K. Gurbani" <vkg@lucent.com>
Message-id: <00e801c6dc7a$5c004440$6c95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <A713E425-0CA6-4151-9C0A-B1C213FA71C8@softarmor.com>
	<44932C00.9010705@lucent.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 287c806b254c6353fcb09ee0e53bbc5e
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

See in line with [Tina2: ...]

B. R.
Tina
Messengers: 
MSN: tinatsou6@hotmail.com   Yahoo: tina_tsou    Skype: tinaTSOU    Jabber: tina@jabber.org

----- Original Message ----- 
From: "Vijay K. Gurbani" <vkg@lucent.com>
To: "Tina TSOU" <tena@huawei.com>
Cc: "IETF SIP List" <sip@ietf.org>
Sent: Friday, September 15, 2006 5:46 AM
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs


> Tina TSOU wrote:
>> See in line with [Tina1: ...].
>
> Tina: Please see inline.
>
> (Tina's email is in its entirety at
> http://www1.ietf.org/mail-archive/web/sip/current/msg16278.html;
> here I quote her questions).
>
>> [Tina1: Let me re-phrase the question: In the proposed solution in this
>> draft, there is only one
>> URI label in the extension, but in the text quoted, there are 2 sips
>> URI. How to map 2 sips URI into only one URI label?
>> I am not sure if one sips URI will be matched by URI label, the other
>> URI will be matched by DNS label. But this is not a consistent behavior.]
>
> I think we are talking past one another ... it is not the intent
> to map two SIP URIs into one.  All the section you quote is
> trying to say is that if a proxy is known through multiple
> names (i.e., sips:example.com and sips:downtown.example.com), then
> it is expected that it has keying material corresponding to each
> identity, and that it presents the right certificate when
> contacted.  The draft is trying to argue that a proxy can possess
> one certificate with multiple identities to allow cases where
> it can present the same certificate when contacted through a
> generic URI like "sips:example.com" and a host-specific URI
> (that may appear in a Route) like "sips:downtown.example.com".
[Tina2: Is it possible that we can use another DNS label other than URI label to do the same thing? E.g. instead of using DNS: example.com and sips: downtown.example.com, we can define DNS: example.com and DNS: downtown.example.com label. As DNS label is a transport layer label, then the site certificate will not be bound to the application layer protocol. So after any new application layer protocol stack being added to the same host, it's not required to apply a new certificate. 
Perhaps it's already discussed, however I don't have the need to add the URI label to site certificate as it's a site, so DNS label could be enough. But URI label may be useful for user certificate as the example in sec-flows 4.3. ]

>
>> [Tina1: as in your example, one domain can have multiple applications
>> such as mail, pres, sips, is it mandatory to have multiple URI labels
>> (one for each application)?]
>
> Yes; see example certificate in sec-flows-01, Section 4.3.
>
>> [Tina1: I feel that the statement "This NATPR and SRV may not yield any
>> RRs" doesn't mean 3263 resolution failed, it only means NAPTR or SRV
>> fails, but A/AAAA lookup will succeed, so 3263 resolution still succeed.]
>
> Yes, you are right.  We should qualify the phrase "RFC3263 resolution
> on the URI failed"...
>
>> Also, for sips:downtown.example.com, it may also yield NAPTR RR, say the
>> server want to map this sips URI to TLS over SCTP. As per the rule in
>> draft, if the NAPTR/SRV/A query success, the URI used for query should
>> match the URI label which is sips:example.com in your case, obviously it
>> cannot match. Is anything missed?
>
> In the above case, "sips:downtown.example.com" is a delegated
> subdomain, and thus the URI label in its certificate should say
> "URI:sips:downtown.example.com" and not "URI:sips:example.com".
>
>> [Tina1: As in the certificate, there is already a DN label which
>> intimates the domain and the domain of URL label is same as DN label,
>> why is the URI label required?]
>
> Do you mean DNS label or DN (Distinguished Name)?  I presume you
> meant DNS; if so then this catches the case where you are
> sending request through a specific proxy (probably due to R-R).
> When you opened a TLS connection to that proxy, it will present
> to you a certificate that had the hostname corresponding to the
> one that you opened the TLS connection to.
[Tina2: Thanks, I got it now:-) ]
>
>> In section 9, para 3,
>> <Quote>Certainly, this means that the domain must share the domain's
>> private key with the hosting service.</Quote>
>>
>> Why does the hosting service have to share the same private key? Is it
>> not allowed to have one private key per virtual domain?]
>
> In case of a virtual SIP server, the certificate (and its keying
> material) is owned by me, but the server itself is running on a
> third party's host.  So I do have to make the keying material
> available to the operator...
[Tina2: If the site certificate is different to the user certificate which can be used for S/MIME, it's maybe not a big issue that the hosting service shares its private key to the site.

In section 6 UAS Considerations, 
   "If the domain is one that is allowed by such a policy, the TLS connection can be considered to be authenticated."

This behavior is not consistent with section 5.2 in sip-tls-use which defines a reverse lookup.

"Thus, to be certain, P2 should do a reverse DNS lookup of the source address of the incoming TCP packet and match the result to the contents of the certificate that contain P1's canonical hostname."

Which one should be followed?]
>
> Thanks,
>
> - vijay
> -- 
> Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
> Bell Laboratories, Lucent Technologies, Inc.
> 2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA) 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 20 03:39:44 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPwcp-0008GI-Rt; Wed, 20 Sep 2006 03:36:07 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPwcm-0008AB-Ni
	for sip@ietf.org; Wed, 20 Sep 2006 03:36:04 -0400
Received: from mailgw4.ericsson.se ([193.180.251.62])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPwcZ-0000Oh-1g
	for sip@ietf.org; Wed, 20 Sep 2006 03:36:04 -0400
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	3E9F58E0001; Wed, 20 Sep 2006 09:35:44 +0200 (CEST)
Received: from esealmw128.eemea.ericsson.se ([153.88.254.172]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 20 Sep 2006 09:35:43 +0200
Received: from eesmdmw020.eemea.ericsson.se ([159.107.3.34]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 20 Sep 2006 09:35:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Wed, 20 Sep 2006 09:35:33 +0200
Message-ID: <33D71F0FC0684C4C8A3BB76989EDED9C028BDF73@eesmdmw020.eemea.ericsson.se>
In-Reply-To: <45100E61.9080909@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: Acbch1tGhBt6AUsLT3KoNwyLQtX+Kw==
From: "Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>,
	<Dale.Worley@comcast.net>
X-OriginalArrivalTime: 20 Sep 2006 07:35:43.0220 (UTC)
	FILETIME=[60F80340:01C6DC87]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: f60d0f7806b0c40781eee6b9cd0b2135
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

That approach has the drawback that if I as an end user want to start
consecutive calls that cannot be correlated I need to unregister and
register again. Setting aside the burden of doing that through the
terminal, while I unregister and register again I might miss some
incoming calls.

Wouldn't it be better to allow the UA to request a new pseudonym in a
registration refreshment?

/Javier

-----Original Message-----
From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
Sent: martes, 19 de septiembre de 2006 17:36
To: Dale.Worley@comcast.net
Cc: sip@ietf.org
Subject: Re: [Sip] GRUU and Anonymity

The proposal was that it would have the lifetime of the registration. It
would remain fixed during refreshes, but if your registration lapses and
expires, or is ended with Expires:0, when you log back on with a new
registration you'd get a new pseudononymnous gruu.

-Jonathan R.

Dale.Worley@comcast.net wrote:

>    From: Jonathan Rosenberg <jdrosen@cisco.com>
>=20
>    So what is your view on the specific mechanism I was proposing to
meet=20
>    this objective? Namely, that the registrar would provide you with a

>    'regular' gruu and a pseudononymous one, and the latter changes
every=20
>    time you create a new registration (not refresh, a new one
entirely).
>=20
> I agree that you've shown the necessity of modifying GRUU to support=20
> this level of anonymity.  But one clarification -- is the=20
> "pseudononymous GRUU" expected to have a longer lifetime than the=20
> registration, or do you envision it having the same lifetime?
>=20
> If the latter, it seems that implementing "pseudononymous GRUUs" is=20
> simple, and not much of a burden on Registrars, since they can be=20
> created by any method and stored in the record of the registration.
> If the former, then we need to consider how a family of pseudononymous

> GRUUs for each UA can be managed.
>=20
> Dale
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip Use=20
> sipping@ietf.org for new developments on the application of sip
>=20

--=20
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 20 05:03:35 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPxv7-0000BT-IO; Wed, 20 Sep 2006 04:59:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPxv6-0000BJ-2d
	for sip@ietf.org; Wed, 20 Sep 2006 04:59:04 -0400
Received: from smtp3.versatel.nl ([62.58.50.90])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPxv4-0000mD-IP
	for sip@ietf.org; Wed, 20 Sep 2006 04:59:04 -0400
Received: (qmail 12596 invoked by uid 0); 20 Sep 2006 08:58:58 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp3.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 20 Sep 2006 08:58:58 -0000
Message-ID: <005601c6dc93$02502d70$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>,
	"Jonathan Rosenberg" <jdrosen@cisco.com>, <Dale.Worley@comcast.net>
References: <33D71F0FC0684C4C8A3BB76989EDED9C028BDF73@eesmdmw020.eemea.ericsson.se>
Subject: Re: [Sip] GRUU and Anonymity
Date: Wed, 20 Sep 2006 10:58:57 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7fa173a723009a6ca8ce575a65a5d813
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Javier,

I suspect the reason for excluding refreshes, is that the UAC has no control 
over when they happen (ie at one point it has a choice: refresh or be 
unregistered). If the lifetime of "the" pseudonymous GRUU were implicitly 
ended upon refresh (ie because a new one is issued), any ongoing dialogs 
using that GRUU would break.

But before we discuss the mechanisms: I believe it is a requirement to have 
not only one but N pseudonymous GRUUs in parallel, all with independent 
lifetimes (possibly bound by the lifetime of the registration). 
Implementations may limit N to a "reasonable" amount, but consider that a UA 
may have several long-running event subscriptions. A watcher should have a 
means to prevent correlation of independent subscriptions.

With N parallel pseudonyms, we will need an explicit invalidation mechanism.

The TRUU draft was written under these assumptions: 
http://tools.ietf.org/wg/sip/draft-jbemmel-sip-truu-02.txt
Section 7.1.1 proposes a 'truu-count' parameter to request N TRUUs for a 
contact (default:1, recommended <=10)
Section 7.1.3 discusses explicit TRUU invalidation, which may or may not be 
piggybacked on a registration refresh

Regards,

Jeroen

----- Original Message ----- 
From: "Jesus Javier Arauz (MI/EEM)" <jesus.javier.arauz@ericsson.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>; <Dale.Worley@comcast.net>
Cc: <sip@ietf.org>
Sent: Wednesday, September 20, 2006 9:35 AM
Subject: RE: [Sip] GRUU and Anonymity


That approach has the drawback that if I as an end user want to start
consecutive calls that cannot be correlated I need to unregister and
register again. Setting aside the burden of doing that through the
terminal, while I unregister and register again I might miss some
incoming calls.

Wouldn't it be better to allow the UA to request a new pseudonym in a
registration refreshment?

/Javier

-----Original Message-----
From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]
Sent: martes, 19 de septiembre de 2006 17:36
To: Dale.Worley@comcast.net
Cc: sip@ietf.org
Subject: Re: [Sip] GRUU and Anonymity

The proposal was that it would have the lifetime of the registration. It
would remain fixed during refreshes, but if your registration lapses and
expires, or is ended with Expires:0, when you log back on with a new
registration you'd get a new pseudononymnous gruu.

-Jonathan R.

Dale.Worley@comcast.net wrote:

>    From: Jonathan Rosenberg <jdrosen@cisco.com>
>
>    So what is your view on the specific mechanism I was proposing to
meet
>    this objective? Namely, that the registrar would provide you with a

>    'regular' gruu and a pseudononymous one, and the latter changes
every
>    time you create a new registration (not refresh, a new one
entirely).
>
> I agree that you've shown the necessity of modifying GRUU to support
> this level of anonymity.  But one clarification -- is the
> "pseudononymous GRUU" expected to have a longer lifetime than the
> registration, or do you envision it having the same lifetime?
>
> If the latter, it seems that implementing "pseudononymous GRUUs" is
> simple, and not much of a burden on Registrars, since they can be
> created by any method and stored in the record of the registration.
> If the former, then we need to consider how a family of pseudononymous

> GRUUs for each UA can be managed.
>
> Dale
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use
> sip-implementors@cs.columbia.edu for questions on current sip Use
> sipping@ietf.org for new developments on the application of sip
>

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 20 05:20:46 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPyDb-0006pd-40; Wed, 20 Sep 2006 05:18:11 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPbjc-0002GN-Rv
	for sip@ietf.org; Tue, 19 Sep 2006 05:17:44 -0400
Received: from ihemail3.lucent.com ([135.245.0.37])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPbja-0003KZ-K2
	for sip@ietf.org; Tue, 19 Sep 2006 05:17:44 -0400
Received: from nl0006exch001h.wins.lucent.com (h135-85-76-62.lucent.com
	[135.85.76.62])
	by ihemail3.lucent.com (8.13.6/IER-o) with ESMTP id k8J9Hcgw019622;
	Tue, 19 Sep 2006 04:17:39 -0500 (CDT)
Received: by nl0006exch001h.nl.lucent.com with Internet Mail Service
	(5.5.2657.72) id <R9BLD5C2>; Tue, 19 Sep 2006 11:17:38 +0200
Message-ID: <7D5D48D2CAA3D84C813F5B154F43B1550AB41DB0@nl0006exch001u.nl.lucent.com>
From: "Wijnen, Bert (Bert)" <bwijnen@lucent.com>
To: Jean-Francois Mule <jf.mule@cablelabs.com>, SIP WG List <sip@ietf.org>
Subject: RE: [Sip]  SIP MIB draft-12 submitted
Date: Tue, 19 Sep 2006 11:17:31 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e5ba305d0e64821bf3d8bc5d3bb07228
X-Mailman-Approved-At: Wed, 20 Sep 2006 05:18:09 -0400
Cc: "Dan Romascanu \(E-mail\)" <dromasca@avaya.com>, klingle@cisco.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I checked the new rev 12 (that came out in the ID repository yday)
and I can report that I am happy with it.
Bert 
> -----Original Message-----
> From: Jean-Francois Mule [mailto:jf.mule@cablelabs.com]
> Sent: Friday, September 15, 2006 15:51
> To: SIP WG List
> Cc: klingle@cisco.com; Wijnen, Bert (Bert); Dan Romascanu (E-mail)
> Subject: [Sip] SIP MIB draft-12 submitted
> 
> 
> 
>    We have submitted the final revision of the SIP MIB module. 
> 
>    Draft-12 does address the comments we received during the 
> IESG review
> (logged in the ID tracker), and additional comments from Carl
> Kalbfleisch, Harald Alvestrand, Dan Romascanu, David Harrington, and
> Bert Wijnen. 
> 
>    There are a few technical changes and numerous editorial ones,
> including major object renaming for name consistency. The most notable
> technical change is the addition of many discontinuity timers in the
> tables with Counter32 objects.
> 
>    Special thanks to Bert who spent many hours working on this new
> version of the draft.
> 
> Kevin and Jean-Francois.
> 
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 20 06:09:50 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPyxg-0008IC-7S; Wed, 20 Sep 2006 06:05:48 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPyxe-0008I3-JJ
	for sip@ietf.org; Wed, 20 Sep 2006 06:05:46 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPyxY-0002k8-UB
	for sip@ietf.org; Wed, 20 Sep 2006 06:05:46 -0400
Received: from esealmw127.eemea.ericsson.se (unknown [153.88.254.122])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	4CC584F007B; Wed, 20 Sep 2006 12:05:40 +0200 (CEST)
Received: from esealmw127.eemea.ericsson.se ([153.88.254.175]) by
	esealmw127.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 20 Sep 2006 12:05:38 +0200
Received: from eesmdmw020.eemea.ericsson.se ([159.107.3.34]) by
	esealmw127.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 20 Sep 2006 12:05:36 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Anonymity
Date: Wed, 20 Sep 2006 12:05:34 +0200
Message-ID: <33D71F0FC0684C4C8A3BB76989EDED9C028BE3CE@eesmdmw020.eemea.ericsson.se>
In-Reply-To: <005601c6dc93$02502d70$0601a8c0@BEMBUSTER>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Anonymity
Thread-Index: AcbclEhFWOEux6BUTAqPn9Cg+A67GgABrzSA
From: "Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>
To: "Jeroen van Bemmel" <jbemmel@zonnet.nl>,
	"Jonathan Rosenberg" <jdrosen@cisco.com>, <Dale.Worley@comcast.net>
X-OriginalArrivalTime: 20 Sep 2006 10:05:36.0924 (UTC)
	FILETIME=[51A255C0:01C6DC9C]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 93e7fb8fef2e780414389440f367c879
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

See inline. Regards,
/Javier=20

-----Original Message-----
From: Jeroen van Bemmel [mailto:jbemmel@zonnet.nl]=20
Sent: mi=E9rcoles, 20 de septiembre de 2006 10:59
To: Jesus Javier Arauz (MI/EEM); Jonathan Rosenberg; =
Dale.Worley@comcast.net
Cc: sip@ietf.org
Subject: Re: [Sip] GRUU and Anonymity

Javier,

I suspect the reason for excluding refreshes, is that the UAC has no =
control over when they happen (ie at one point it has a choice: refresh =
or be unregistered). If the lifetime of "the" pseudonymous GRUU were =
implicitly ended upon refresh (ie because a new one is issued), any =
ongoing dialogs using that GRUU would break.

[JJAR] AFAIK the UA may re-register at any time before the registration =
expires, so actually it has control over when it wants to get a new =
pseudonym. To get a new pseudonym does not necessarily imply that older =
pseudonyms are not valid anymore, that's also controlled by the UA by =
means of re-registrations. May be you've changed that in the latest TRUU =
draft but that's the way I remember TRUU works...

But before we discuss the mechanisms: I believe it is a requirement to =
have not only one but N pseudonymous GRUUs in parallel, all with =
independent lifetimes (possibly bound by the lifetime of the =
registration).=20
Implementations may limit N to a "reasonable" amount, but consider that =
a UA may have several long-running event subscriptions. A watcher should =
have a means to prevent correlation of independent subscriptions.

[JJAR] I fully agree, but don't get your point with subscriptions. As =
long as subscriptions are to servers in the network privacy is not an =
issue and GRUU can be used. For e2e subscriptions the UA must either =
keep the pseudonym alive as long as the subscription lasts, or cancel =
the subscription and re-subscribe with the new pseudonym. What have I =
missed here?

With N parallel pseudonyms, we will need an explicit invalidation =
mechanism.

The TRUU draft was written under these assumptions:=20
http://tools.ietf.org/wg/sip/draft-jbemmel-sip-truu-02.txt
Section 7.1.1 proposes a 'truu-count' parameter to request N TRUUs for a =
contact (default:1, recommended <=3D10) Section 7.1.3 discusses explicit =
TRUU invalidation, which may or may not be piggybacked on a registration =
refresh

Regards,

Jeroen

----- Original Message -----
From: "Jesus Javier Arauz (MI/EEM)" <jesus.javier.arauz@ericsson.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>; <Dale.Worley@comcast.net>
Cc: <sip@ietf.org>
Sent: Wednesday, September 20, 2006 9:35 AM
Subject: RE: [Sip] GRUU and Anonymity


That approach has the drawback that if I as an end user want to start
consecutive calls that cannot be correlated I need to unregister and
register again. Setting aside the burden of doing that through the
terminal, while I unregister and register again I might miss some
incoming calls.

Wouldn't it be better to allow the UA to request a new pseudonym in a
registration refreshment?

/Javier

-----Original Message-----
From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]
Sent: martes, 19 de septiembre de 2006 17:36
To: Dale.Worley@comcast.net
Cc: sip@ietf.org
Subject: Re: [Sip] GRUU and Anonymity

The proposal was that it would have the lifetime of the registration. It
would remain fixed during refreshes, but if your registration lapses and
expires, or is ended with Expires:0, when you log back on with a new
registration you'd get a new pseudononymnous gruu.

-Jonathan R.

Dale.Worley@comcast.net wrote:

>    From: Jonathan Rosenberg <jdrosen@cisco.com>
>
>    So what is your view on the specific mechanism I was proposing to
meet
>    this objective? Namely, that the registrar would provide you with a

>    'regular' gruu and a pseudononymous one, and the latter changes
every
>    time you create a new registration (not refresh, a new one
entirely).
>
> I agree that you've shown the necessity of modifying GRUU to support
> this level of anonymity.  But one clarification -- is the
> "pseudononymous GRUU" expected to have a longer lifetime than the
> registration, or do you envision it having the same lifetime?
>
> If the latter, it seems that implementing "pseudononymous GRUUs" is
> simple, and not much of a burden on Registrars, since they can be
> created by any method and stored in the record of the registration.
> If the former, then we need to consider how a family of pseudononymous

> GRUUs for each UA can be managed.
>
> Dale
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use
> sip-implementors@cs.columbia.edu for questions on current sip Use
> sipping@ietf.org for new developments on the application of sip
>

--=20
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip=20


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 20 06:30:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GPzId-0007XR-OX; Wed, 20 Sep 2006 06:27:27 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GPzIc-0007XM-3M
	for sip@ietf.org; Wed, 20 Sep 2006 06:27:26 -0400
Received: from smtp3.versatel.nl ([62.58.50.90])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GPzIa-0008Gx-E7
	for sip@ietf.org; Wed, 20 Sep 2006 06:27:26 -0400
Received: (qmail 25966 invoked by uid 0); 20 Sep 2006 10:27:21 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp3.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 20 Sep 2006 10:27:21 -0000
Message-ID: <008301c6dc9f$5aa28930$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>,
	"Jonathan Rosenberg" <jdrosen@cisco.com>, <Dale.Worley@comcast.net>
References: <33D71F0FC0684C4C8A3BB76989EDED9C028BE3CE@eesmdmw020.eemea.ericsson.se>
Subject: Re: [Sip] GRUU and Anonymity
Date: Wed, 20 Sep 2006 12:27:20 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: cd3fc8e909678b38737fc606dec187f0
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

inline...[JvB]

----- Original Message ----- 
From: "Jesus Javier Arauz (MI/EEM)" <jesus.javier.arauz@ericsson.com>
To: "Jeroen van Bemmel" <jbemmel@zonnet.nl>; "Jonathan Rosenberg" 
<jdrosen@cisco.com>; <Dale.Worley@comcast.net>
Cc: <sip@ietf.org>
Sent: Wednesday, September 20, 2006 12:05 PM
Subject: RE: [Sip] GRUU and Anonymity


See inline. Regards,
/Javier

-----Original Message-----
From: Jeroen van Bemmel [mailto:jbemmel@zonnet.nl]
Sent: mircoles, 20 de septiembre de 2006 10:59
To: Jesus Javier Arauz (MI/EEM); Jonathan Rosenberg; Dale.Worley@comcast.net
Cc: sip@ietf.org
Subject: Re: [Sip] GRUU and Anonymity

Javier,

I suspect the reason for excluding refreshes, is that the UAC has no control 
over when they happen (ie at one point it has a choice: refresh or be 
unregistered). If the lifetime of "the" pseudonymous GRUU were implicitly 
ended upon refresh (ie because a new one is issued), any ongoing dialogs 
using that GRUU would break.

[JJAR] AFAIK the UA may re-register at any time before the registration 
expires, so actually it has control over when it wants to get a new 
pseudonym. To get a new pseudonym does not necessarily imply that older 
pseudonyms are not valid anymore, that's also controlled by the UA by means 
of re-registrations. May be you've changed that in the latest TRUU draft but 
that's the way I remember TRUU works...

[JvB] My interpretation of Jonathan's proposal was that upon a new 
registration a single new pseudononymous gruu is issued (per Contact 
perhaps), and the previous one implicitly becomes invalid. Indeed, the TRUU 
draft proposes a slightly different approach, ie without implicit 
invalidation. My interpretation might be wrong of course

But before we discuss the mechanisms: I believe it is a requirement to have 
not only one but N pseudonymous GRUUs in parallel, all with independent 
lifetimes (possibly bound by the lifetime of the registration).
Implementations may limit N to a "reasonable" amount, but consider that a UA 
may have several long-running event subscriptions. A watcher should have a 
means to prevent correlation of independent subscriptions.

[JJAR] I fully agree, but don't get your point with subscriptions. As long 
as subscriptions are to servers in the network privacy is not an issue and 
GRUU can be used. For e2e subscriptions the UA must either keep the 
pseudonym alive as long as the subscription lasts, or cancel the 
subscription and re-subscribe with the new pseudonym. What have I missed 
here?

[JvB] I was only trying to illustrate a case where a UA could have multiple 
ongoing dialogs, to support the argument for N pseudonyms. With regard to 
subscriptions being to servers in the network, and privacy not being needed 
in that case - (1) The UAC cannot know where the SUBSCRIBE will end up, and 
(2) in case the network in which the servers reside is different from the 
home network, a UA might still want privacy protection. Note that the TRUU 
draft currently does not provide a "keep alive" feature for TRUUs (though it 
could of course); currently, what an UA should do for subscriptions that 
outlive a TRUU being used as remote contact, is to request a new TRUU, and 
then refresh the subscription.

With N parallel pseudonyms, we will need an explicit invalidation mechanism.

The TRUU draft was written under these assumptions:
http://tools.ietf.org/wg/sip/draft-jbemmel-sip-truu-02.txt
Section 7.1.1 proposes a 'truu-count' parameter to request N TRUUs for a 
contact (default:1, recommended <=10) Section 7.1.3 discusses explicit TRUU 
invalidation, which may or may not be piggybacked on a registration refresh

Regards,

Jeroen

----- Original Message -----
From: "Jesus Javier Arauz (MI/EEM)" <jesus.javier.arauz@ericsson.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>; <Dale.Worley@comcast.net>
Cc: <sip@ietf.org>
Sent: Wednesday, September 20, 2006 9:35 AM
Subject: RE: [Sip] GRUU and Anonymity


That approach has the drawback that if I as an end user want to start
consecutive calls that cannot be correlated I need to unregister and
register again. Setting aside the burden of doing that through the
terminal, while I unregister and register again I might miss some
incoming calls.

Wouldn't it be better to allow the UA to request a new pseudonym in a
registration refreshment?

/Javier

-----Original Message-----
From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]
Sent: martes, 19 de septiembre de 2006 17:36
To: Dale.Worley@comcast.net
Cc: sip@ietf.org
Subject: Re: [Sip] GRUU and Anonymity

The proposal was that it would have the lifetime of the registration. It
would remain fixed during refreshes, but if your registration lapses and
expires, or is ended with Expires:0, when you log back on with a new
registration you'd get a new pseudononymnous gruu.

-Jonathan R.

Dale.Worley@comcast.net wrote:

>    From: Jonathan Rosenberg <jdrosen@cisco.com>
>
>    So what is your view on the specific mechanism I was proposing to
meet
>    this objective? Namely, that the registrar would provide you with a

>    'regular' gruu and a pseudononymous one, and the latter changes
every
>    time you create a new registration (not refresh, a new one
entirely).
>
> I agree that you've shown the necessity of modifying GRUU to support
> this level of anonymity.  But one clarification -- is the
> "pseudononymous GRUU" expected to have a longer lifetime than the
> registration, or do you envision it having the same lifetime?
>
> If the latter, it seems that implementing "pseudononymous GRUUs" is
> simple, and not much of a burden on Registrars, since they can be
> created by any method and stored in the record of the registration.
> If the former, then we need to consider how a family of pseudononymous

> GRUUs for each UA can be managed.
>
> Dale
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use
> sip-implementors@cs.columbia.edu for questions on current sip Use
> sipping@ietf.org for new developments on the application of sip
>

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 20 09:23:13 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQ1yz-0006s4-LH; Wed, 20 Sep 2006 09:19:21 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQ1yx-0006rx-UN
	for sip@ietf.org; Wed, 20 Sep 2006 09:19:19 -0400
Received: from smtp3.versatel.nl ([62.58.50.90])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQ1yu-0004zU-Hd
	for sip@ietf.org; Wed, 20 Sep 2006 09:19:19 -0400
Received: (qmail 1053 invoked by uid 0); 20 Sep 2006 13:19:13 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp3.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 20 Sep 2006 13:19:13 -0000
Message-ID: <011b01c6dcb7$5d586d80$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: <sip@ietf.org>
References: <33D71F0FC0684C4C8A3BB76989EDED9C028BE3CE@eesmdmw020.eemea.ericsson.se>
	<008301c6dc9f$5aa28930$0601a8c0@BEMBUSTER>
Subject: use of quotation  (was: Re: [Sip] GRUU and Anonymity)
Date: Wed, 20 Sep 2006 15:19:12 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 79899194edc4f33a41f49410777972f8
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

(slightly off topic)

All,

I received a complaint regarding missing quotation (">") in some of my 
replies to this list. I do have quotation enabled, but it appears that my 
e-mail client (Outlook Express 6) does not use it when the e-mail being 
replied to contains a header 'Content-Transfer-Encoding: quoted-printable'

For example, Javier's previous e-mail to the list has this, while my reply 
to that has not.

This may be a quirk in my client. Still, I would like to ask you to not 
write e-mails using "quoted-printable" encoding if possible (probably a 
setting in your configuration)

Regards,

Jeroen 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 20 10:00:00 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQ2Zo-0007li-EB; Wed, 20 Sep 2006 09:57:24 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQ2Zn-0007ld-32
	for sip@ietf.org; Wed, 20 Sep 2006 09:57:23 -0400
Received: from smtp102.biz.mail.mud.yahoo.com ([68.142.200.237])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GQ2Zl-0000zm-PP
	for sip@ietf.org; Wed, 20 Sep 2006 09:57:23 -0400
Received: (qmail 14722 invoked from network); 20 Sep 2006 13:57:06 -0000
Received: from unknown (HELO Kasturi) (knarayan@sipera.com@69.26.216.147 with
	login)
	by smtp102.biz.mail.mud.yahoo.com with SMTP; 20 Sep 2006 13:57:05 -0000
From: "kasturi Narayanan" <knarayan@sipera.com>
To: "'Jonathan Rosenberg'" <jdrosen@cisco.com>
Date: Wed, 20 Sep 2006 08:57:01 -0500
Message-ID: <012d01c6dcbc$a60b7950$ec00000a@Kasturi>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <008301c6dc9f$5aa28930$0601a8c0@BEMBUSTER>
Thread-Index: Acbcn6+Qw4Ol+SwiS9ComjXvKrAKegAG3V6Q
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: de4f315c9369b71d7dd5909b42224370
Cc: sip@ietf.org
Subject: [Sip] Regarding  GRUU  Draft
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

 Jonathan,
I have a question regarding the requirement for Record Routing by both the
home proxies of the Initiating Domain and Receiving Domain in Section 8.2.2
for dialog initiating Requests with GRUU contact.

Why is this requirement? Why can't it be treated as if a UA has inserted a
Domain name in the Contact and just route it to after resolving the Domain
name (which will happen to be the proxy responsible for that Domain). 
This way the requirement that all subsequent requests have to traverse the
same set of 2 proxies will not be needed, it will be just one proxy
corresponding to the Domain which is responsible for routing based on GRUU.

May be I am missing something.

Kasturi



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 20 12:58:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQ5KM-0006Mi-BA; Wed, 20 Sep 2006 12:53:38 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQ5KK-0006Md-Rb
	for sip@ietf.org; Wed, 20 Sep 2006 12:53:36 -0400
Received: from alnrmhc12.comcast.net ([204.127.225.92])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQ5KI-0005Ja-Jg
	for sip@ietf.org; Wed, 20 Sep 2006 12:53:36 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc12) with ESMTP
	id <20060920165333b1200erm6ne>; Wed, 20 Sep 2006 16:53:33 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8KGrX1f008774
	for <sip@ietf.org>; Wed, 20 Sep 2006 12:53:33 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8KGrXnU008770;
	Wed, 20 Sep 2006 12:53:33 -0400
Date: Wed, 20 Sep 2006 12:53:33 -0400
Message-Id: <200609201653.k8KGrXnU008770@dragon.ariadne.com>
From: Dale.Worley@comcast.net
To: sip@ietf.org
In-reply-to: <33D71F0FC0684C4C8A3BB76989EDED9C028BDF73@eesmdmw020.eemea.ericsson.se>
	(jesus.javier.arauz@ericsson.com)
Subject: Re: [Sip] GRUU and Anonymity
References: <33D71F0FC0684C4C8A3BB76989EDED9C028BDF73@eesmdmw020.eemea.ericsson.se>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 8abaac9e10c826e8252866cbe6766464
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: "Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>

   That approach has the drawback that if I as an end user want to start
   consecutive calls that cannot be correlated I need to unregister and
   register again. Setting aside the burden of doing that through the
   terminal, while I unregister and register again I might miss some
   incoming calls.

   Wouldn't it be better to allow the UA to request a new pseudonym in a
   registration refreshment?

There is some context that you haven't seen -- Rosenberg's proposal is
to provide only a limited amount of anonymity (which is why it's
called pseudonymous), which is the amount that one already obtains
when one does not use GRUU.  Since the current Contact and Via values
reveal the caller's IP address, the pseudonymous GRUUs are only
required to change when the UA registers from a different IP address,
which is provided by the requirement that they change with each new
registration.

On the other hand, since there is only one pseudonymous GRUU per
registration and it lasts only as long as the registration, it
requires a fixed overhead per-registration and no state that lasts
longer than a registration, and hence is not a burden on registrars
with limited resources or no long-term state memory.

The feeling among the people reviewing the GRUU I-D is that it needs
to provide a mechanism that is "at least as anonymous as current
practice" before it can progress to being an RFC, but that providing
"quality anonymity" should be left to another I-D.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 02:35:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQI4E-0001PW-Af; Thu, 21 Sep 2006 02:29:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQI4C-0001PR-Os
	for sip@ietf.org; Thu, 21 Sep 2006 02:29:48 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQI48-0007Gq-47
	for sip@ietf.org; Thu, 21 Sep 2006 02:29:48 -0400
Received: from S4DE8PSAAGT.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Thu, 21 Sep 2006 08:21:50 +0200
Received: from S4DE8PSAAGO.mitte.t-com.de ([10.151.180.14]) by
	S4DE8PSAAGT.mitte.t-com.de with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 21 Sep 2006 08:21:50 +0200
Content-class: urn:content-classes:message
Subject: AW: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 21 Sep 2006 08:21:49 +0200
Message-Id: <85108216918A984C8C60172D7C84770A56F6C5@S4DE8PSAAGO.mitte.t-com.de>
X-MimeOLE: Produced By Microsoft Exchange V6.5
In-Reply-To: <450ABB8B.9040700@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Thread-Index: AcbY1RIXaSQi+LauRVyl992IAVY6qwEcLCLg
From: "Jesske, R" <R.Jesske@t-com.net>
To: <jdrosen@cisco.com>,
    <pkyzivat@cisco.com>
X-OriginalArrivalTime: 21 Sep 2006 06:21:50.0222 (UTC)
	FILETIME=[391BF2E0:01C6DD46]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7268a2980febc47a9fa732aba2b737ba
Cc: sip@ietf.org, drage@lucent.com, esasaki@ntt-at.com,
	dean.willis@softarmor.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I agree so I would like to propose to write this section in more common =
words instead of waiting for the clarification of RFC3323.=20

Roland

> -----Urspr=FCngliche Nachricht-----
> Von: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Gesendet: Freitag, 15. September 2006 16:41
> An: Paul Kyzivat
> Cc: shida@ntt-at.com; Jesske, Roland; sip@ietf.org;=20
> drage@lucent.com; esasaki@ntt-at.com; Dean Willis
> Betreff: Re: AW: [Sip] SIP WGLC Draft draft-ietf-sip-acr-code-02.txt
>=20
>=20
> Right.
>=20
> So what this means for acr-code is that we are really at a stalemate=20
> here until its clear what RFC 3323 is supposed to mean. Its=20
> important to=20
> note that it is certainly not the job of acr-code to clarify=20
> this behavior.
>=20
> -Jonathan R.
>=20
> Paul Kyzivat wrote:
>=20
> >=20
> >=20
> > Jonathan Rosenberg wrote:
> >=20
> >> This is a good point.
> >>
> >> I did not think that the 'header' value applied to P-Asserted-ID.
> >> Rather, the 'id' value does, which is defined specifically for this
> >> purpose in RFC 3325. However I agree with you that *if*=20
> 'header' implied
> >> removal of P-Asserted-ID, it becomes a superset of 'id' and then it
> >> should be added to the list of things that define an=20
> anonymous call.
> >=20
> >=20
> > I agree that the intent is not entirely clear. But like=20
> Jonathan I had=20
> > interpreted the specs so that 'header' privacy did not remove=20
> > P-Asserted-Identity. I just reviewed 3323 and 3325, and I=20
> think that is=20
> > still the correct interpretation based on more or less the=20
> same logic=20
> > Jonathan mentioned earlier:
> >=20
> > - it is suggested that 'header' privacy be applied early on the call
> >   path. (Section 4.3: "It is RECOMMENDED that service=20
> providers couple
> >   the privacy service function with a local outbound proxy.")
> >=20
> > - 'id' privacy must be applied late in the call path or else the
> >   P-Asserted-ID header isn't available to servers that need it.
> >=20
> > - when the 'header' function is carried out, the 'header' token
> >   is to be removed. That is specified in section 5:
> >=20
> >   "When a privacy service performs one of the functions=20
> corresponding to
> >    a privacy level listed in the Privacy header, it SHOULD=20
> remove the
> >    corresponding priv-value from the Privacy header - otherwise, any
> >    other privacy service involved with routing this message might
> >    unnecessarily apply the same function, which in many=20
> cases would be
> >    undesirable."
> >=20
> > I guess the following strategy *could* be used to make the 'header'=20
> > privacy level to be a superset of 'id' privacy:
> >=20
> > - The outbound proxy it would hide most headers ,
> >   but would note that it isn't forwarding across a trust domain
> >   boundary and so not remove P-Asserted-ID.
> >=20
> > - It would remove the 'header' token from the Privacy header,
> >   but because it hasn't completed the job by removing P-Asserted-ID,
> >   it must insert an 'id' token to ensure that is done later.
> >=20
> > While that is a possibility, it seems like quite a stretch=20
> to me. I see=20
> > no hints in either document that this kind of behavior is=20
> expected. It=20
> > seems way more straightforward to treat them as independent options.
> >=20
> >     Paul
> >=20
> >> Perhaps Jon P. can comment on whether the intent was for 'header'
> >> privacy to apply to P-Asserted-ID?
> >>
> >> -Jonathan R.
> >>
> >> Shida Schubert wrote:
> >>
> >>> I personally think RFC3323 is underspecified with what headers to
> >>> be obscured per privacy value. Interestingly though I=20
> found the text in
> >>> IANA consideration that is concise about what each privacy value's
> >>> intent.
> >>>
> >>> "Text from the IANA consideration of RFC3323
> >>>
> >>>    o  user: Request that privacy services provide a=20
> user-level privacy
> >>>       function
> >>>
> >>>    o  header: Request that privacy services modify=20
> headers that cannot
> >>>       be set arbitrarily by the user (Contact/Via)."
> >>>
> >>> Considering the text above, if "header" was set any=20
> headers that can not
> >>> be set
> >>> arbitrarily by the user needs to be obscured/modified by=20
> the privacy
> >>> services, which
> >>> I believe would include P-A-ID as well.
> >>>
> >>> If that's the case, requesting "header" would naturally=20
> mean requesting
> >>> anonymity, as the
> >>> domain supporting P-A-ID would alter the value of the P-A-ID to be
> >>> anonymous as the
> >>> text in IANA suggests.
> >>>
> >>> My original interpretation of "header" privacy value was=20
> actually quite
> >>> different. I saw
> >>> the "header privacy" as a way for UA to request some sort=20
> of topology
> >>> hiding
> >>> (obscuring Contact, via, headers revealing a path to the UA etc.).
> >>> With that interpretation, I could see a scenario where=20
> "header" privacy
> >>> option does NOT
> >>> imply that the originating user desires anonymity(e.g. I=20
> call my client,
> >>> I want to show them
> >>> who I am but not wanting them to find out I am calling=20
> from home.). But
> >>> this can not hold true if the domain provides P-A-ID as=20
> "header' privacy
> >>> value will
> >>> modify the header to obscure the identity of the user,=20
> thus making it an
> >>> anonymous call.
> >>>
> >>> Regards
> >>> Shida
> >>>
> >>> Dean Willis wrote:
> >>>
> >>>> Jesske, R wrote:
> >>>>
> >>>>> At least with the 'header' privacy the origin user=20
> expresses that he
> >>>>> want to be anonymous. So it is an intension of the=20
> user. Of course
> >>>>> the privacy server can strip of the privacy value but=20
> that is due to
> >>>>> the Provider of the server. Within RFC3323 I didn't=20
> found something
> >>>>> that says that if you have privacy performed that you=20
> have to delete
> >>>>> the privacy header itself.
> >>>>
> >>>> Does it? Do we have real scenarios where the "header"=20
> privacy option
> >>>> does NOT imply that the originating user desires anonymity?
> >>>>
> >>>> Or is the case where a call goes out with a "header"=20
> privacy value,
> >>>> but includes an authenticated identity body or other non-header
> >>>> identity mechanism simply an error?
> >>>>
> >>>> If it is an error, what needs to be corrected, in terms of
> >>>>
> >>>> 1) Changing any specifications?
> >>>>
> >>>> 2) Run-time detection of and response to the error condition?
> >>>>
> >>>> --=20
> >>>> dean
> >>>>
> >>>> _______________________________________________
> >>>> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
> >>>> This list is for NEW development of the core SIP Protocol
> >>>> Use sip-implementors@cs.columbia.edu for questions on current sip
> >>>> Use sipping@ietf.org for new developments on the=20
> application of sip
> >>>>
> >>>>
> >>>
> >>>
> >>> _______________________________________________
> >>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >>> This list is for NEW development of the core SIP Protocol
> >>> Use sip-implementors@cs.columbia.edu for questions on current sip
> >>> Use sipping@ietf.org for new developments on the=20
> application of sip
> >>>
> >>
> >=20
>=20
> --=20
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ=20
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 02:40:15 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQICD-0005Rl-UN; Thu, 21 Sep 2006 02:38:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQICD-0005Rg-BN
	for sip@ietf.org; Thu, 21 Sep 2006 02:38:05 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQIC8-0000oT-QH
	for sip@ietf.org; Thu, 21 Sep 2006 02:38:05 -0400
Received: from S4DE8PSAAGT.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Thu, 21 Sep 2006 08:30:49 +0200
Received: from S4DE8PSAAGO.mitte.t-com.de ([10.151.180.14]) by
	S4DE8PSAAGT.mitte.t-com.de with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 21 Sep 2006 08:30:45 +0200
Content-class: urn:content-classes:message
Subject: AW: [Sip] Comments on draft-ietf-sip-acr-code-02
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 21 Sep 2006 08:30:45 +0200
Message-Id: <85108216918A984C8C60172D7C84770A56F6C6@S4DE8PSAAGO.mitte.t-com.de>
X-MimeOLE: Produced By Microsoft Exchange V6.5
In-Reply-To: <5D1A7985295922448D5550C94DE291804684A3@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-acr-code-02
Thread-Index: AcbbDt1ZS5mDa6sHRfKKXcdgtFshxgCN2xOA
From: "Jesske, R" <R.Jesske@t-com.net>
To: <drage@lucent.com>,
    <sip@ietf.org>
X-OriginalArrivalTime: 21 Sep 2006 06:30:45.0738 (UTC)
	FILETIME=[784D34A0:01C6DD47]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 25620135586de10c627e3628c432b04a
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

1)agreed
2)agreed and the other points should be mentioned as examples how =
anonymity is understand
3) What effect you expect?

BR

Roland

> -----Urspr=FCngliche Nachricht-----
> Von: Drage, Keith (Keith) [mailto:drage@lucent.com]=20
> Gesendet: Montag, 18. September 2006 12:32
> An: sip@ietf.org
> Betreff: [Sip] Comments on draft-ietf-sip-acr-code-02
>=20
>=20
> I have reviewed the entire draft.
>=20
> 1)	In section 3, I wondered if it would be appropriate to have a
> couple more key statements of when it does not apply.=20
>=20
> For example, if we are using RFC 4474, and the recipient of the SIP
> request has received the identity but has been unable to obtain the
> certificate for the identity, then the proposed 433 response code is
> inappropriate, and indeed RFC 4474 specifies response codes for this
> situation, which should always be used in preference.
>=20
> 2)	Section 3.=20
>=20
>    o  The request contained a Privacy header field whose=20
> value was 'id'
>       [3] or 'user'.  This explicitly excludes the 'header' and
>       'session' privacy services, since those do not directly=20
> convey the
>       identity of the requestor.
>=20
> I have noted the ongoing discussion on this, and certainly my
> interpretation was that the "header" value in the Privacy header could
> cover the P-Asserted-Identity header. However I think we should avoid
> that this draft attempts to fix unclear specification in RFC 3323 and
> (and possibly RFC 3325). I would therefore suggest that we strike the
> offending words.
>=20
> 3)	Section 4.
>=20
> This section seems to be the one that should talk about dialog usage.
> While identities are usefully provided in the initial transaction in a
> dialog, there is nothing that prevents them being exchanged in later
> transactions, and indeed for the support of some services it is
> necessary, as the identity will have changed.=20
>=20
> The document should indicate the effect of receiving a 433=20
> response to a
> request sent within an existing dialog, where the implementation does
> support this extension, which I assume should be the defauly 4xx
> response treatment.
>=20
> Regards
>=20
> Keith=20
>=20
>=20
>=20
> Keith Drage
> Lucent Technologies
> drage@lucent.com
> tel: +44 1793 776249
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 06:01:40 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQLHw-0006xy-FX; Thu, 21 Sep 2006 05:56:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQLHu-0006x1-6U
	for sip@ietf.org; Thu, 21 Sep 2006 05:56:10 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQLHo-0000ED-Fe
	for sip@ietf.org; Thu, 21 Sep 2006 05:56:10 -0400
Received: from ilexp02.ndc.lucent.com (h135-3-39-2.lucent.com [135.3.39.2])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k8L9tsNk025694;
	Thu, 21 Sep 2006 04:55:54 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp02.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Thu, 21 Sep 2006 04:56:03 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Thu, 21 Sep 2006 11:56:00 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Comments on draft-ietf-sip-acr-code-02
Date: Thu, 21 Sep 2006 11:55:59 +0200
Message-ID: <5D1A7985295922448D5550C94DE291804A500C@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Comments on draft-ietf-sip-acr-code-02
Thread-Index: AcbbDt1ZS5mDa6sHRfKKXcdgtFshxgCN2xOAAAdt8iA=
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: "Jesske, R" <R.Jesske@t-com.net>, <sip@ietf.org>
X-OriginalArrivalTime: 21 Sep 2006 09:56:00.0657 (UTC)
	FILETIME=[2490B810:01C6DD64]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7fa173a723009a6ca8ce575a65a5d813
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

In regard to 3)

See =
http://www.ietf.org/internet-drafts/draft-ietf-sipping-dialogusage-03.txt=


403 Forbidden: This response concerns the transaction, not the usage.
      It has no effect on any other usages of the dialog.  In our
      example scenario, the subscription remains, and is not affected in
      any way.  The invite usage continues to exist.  Similarly, if the
      403 came in response to a reINVITE, the invite usage would
      continue to exist.=20

Which is pretty much what I would expect for the new 433 response code.

Regards

Keith

> -----Original Message-----
> From: Jesske, R [mailto:R.Jesske@t-com.net]=20
> Sent: 21 September 2006 07:31
> To: Drage, Keith (Keith); sip@ietf.org
> Subject: AW: [Sip] Comments on draft-ietf-sip-acr-code-02
>=20
> 1)agreed
> 2)agreed and the other points should be mentioned as examples=20
> how anonymity is understand
> 3) What effect you expect?
>=20
> BR
>=20
> Roland
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Drage, Keith (Keith) [mailto:drage@lucent.com]
> > Gesendet: Montag, 18. September 2006 12:32
> > An: sip@ietf.org
> > Betreff: [Sip] Comments on draft-ietf-sip-acr-code-02
> >=20
> >=20
> > I have reviewed the entire draft.
> >=20
> > 1)	In section 3, I wondered if it would be appropriate to have a
> > couple more key statements of when it does not apply.=20
> >=20
> > For example, if we are using RFC 4474, and the recipient of the SIP=20
> > request has received the identity but has been unable to obtain the=20
> > certificate for the identity, then the proposed 433=20
> response code is=20
> > inappropriate, and indeed RFC 4474 specifies response codes=20
> for this=20
> > situation, which should always be used in preference.
> >=20
> > 2)	Section 3.=20
> >=20
> >    o  The request contained a Privacy header field whose value was=20
> > 'id'
> >       [3] or 'user'.  This explicitly excludes the 'header' and
> >       'session' privacy services, since those do not=20
> directly convey=20
> > the
> >       identity of the requestor.
> >=20
> > I have noted the ongoing discussion on this, and certainly my=20
> > interpretation was that the "header" value in the Privacy=20
> header could=20
> > cover the P-Asserted-Identity header. However I think we=20
> should avoid=20
> > that this draft attempts to fix unclear specification in=20
> RFC 3323 and=20
> > (and possibly RFC 3325). I would therefore suggest that we=20
> strike the=20
> > offending words.
> >=20
> > 3)	Section 4.
> >=20
> > This section seems to be the one that should talk about=20
> dialog usage.
> > While identities are usefully provided in the initial=20
> transaction in a=20
> > dialog, there is nothing that prevents them being exchanged=20
> in later=20
> > transactions, and indeed for the support of some services it is=20
> > necessary, as the identity will have changed.
> >=20
> > The document should indicate the effect of receiving a 433=20
> response to=20
> > a request sent within an existing dialog, where the implementation=20
> > does support this extension, which I assume should be the=20
> defauly 4xx=20
> > response treatment.
> >=20
> > Regards
> >=20
> > Keith
> >=20
> >=20
> >=20
> > Keith Drage
> > Lucent Technologies
> > drage@lucent.com
> > tel: +44 1793 776249
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > sipping@ietf.org for new developments on the application of sip
> >=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 12:58:22 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQRoQ-0003Jm-RQ; Thu, 21 Sep 2006 12:54:10 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQRoP-0003Jh-S9
	for sip@ietf.org; Thu, 21 Sep 2006 12:54:09 -0400
Received: from mailgate.siemenscomms.co.uk ([195.171.110.225]
	helo=bemg01.siemenscomms.co.uk)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQRoG-0005mI-Rv
	for sip@ietf.org; Thu, 21 Sep 2006 12:54:09 -0400
Received: from CONVERSION-DAEMON.siemenscomms.co.uk by siemenscomms.co.uk
	(PMDF V6.0-24 #40642) id <0J5Y00K01C9YFW@siemenscomms.co.uk> for
	sip@ietf.org; Thu, 21 Sep 2006 17:53:58 +0100 (BST)
Received: from ntht207e.uksgcs.siemenscomms.co.uk ([137.223.247.82])
	by siemenscomms.co.uk (PMDF V6.0-24 #40642)
	with ESMTP id <0J5Y00IBEC9YJN@siemenscomms.co.uk>; Thu,
	21 Sep 2006 17:53:58 +0100 (BST)
Received: by ntht207e.uksgcs.siemenscomms.co.uk with Internet Mail Service
	(5.5.2657.72)	id <TCV7WC5T>; Thu, 21 Sep 2006 17:53:43 +0100
Content-return: allowed
Date: Thu, 21 Sep 2006 17:53:40 +0100
From: "Elwell, John" <john.elwell@siemens.com>
Subject: RE: [Sip] draft-ietf-sip-connected-identity-01 comments
To: Paul Kyzivat <pkyzivat@cisco.com>
Message-id: <50B1CBA96870A34799A506B2313F266709E82B57@ntht201e.siemenscomms.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Score: 0.0 (/)
X-Scan-Signature: f60d0f7806b0c40781eee6b9cd0b2135
Cc: SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Paul,

See in-line. Any other opinions on the section 6.2 and 6.5 items?

John 

> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> Sent: 15 September 2006 23:28
> To: Elwell, John
> Cc: SIP
> Subject: Re: [Sip] draft-ietf-sip-connected-identity-01 comments
> 
> I finally read this version carefully. It looks good to me. I 
> only found 
> a few minor things:
> 
> * Section 1 - Terminology:
> 
>         "callee: the user that answers a call by issuing a 
> 2xx response
>          to an INVITE request."
> 
> for consistency with the definition of caller, I suggest this say:
> 
>         "callee: the user of the UA that answers a call by issuing a
>          2xx response to an INVITE request."
[JRE] Yes, my mistake.

> 
> * Section 6.2:
> 
> When sending an UPDATE or reINVITE request that changes the connected 
> identity, I think it makes sense that the sender MUST include 
> Required:id-change. AFAICT in all cases when a change is sent a 
> Supported:id-change has already been received, so it should not be 
> necessary to send a Require. But doing so could cover some cases when 
> things go amiss. And the scope of a Supported header is one of those 
> things that isn't well defined, so better to be safe.
[JRE] Your proposal doesn't seem to do any harm and might conceivably help.
As this would be a technical change, any other opinions?

> 
> * Section 6.5:
> 
> There remains an issue of whether there will in fact be an 
> authentication service on the recorded route for the dialog. 
> To ensure 
> this, during dialog establishment, the presence of 
> Supported:id-change 
> could be used as a hint that an authentication service should be 
> included and Record-Route.
[JRE] This is a good point. I propose the following text: "A proxy that is
able to provide an Authentication Service for mid-dialog requests SHOULD
record route if Supported: id-change is indicated in the dialog forming
request." I used SHOULD because there may be reasons not to (e.g., it is
known that some other proxy or the UA itself can provide an Authentication
Service.

> 
> * Section 11.1 - Normative References:
> 
> Reference [3] is out of date. This is now RFC 4474.
[JRE] OK
> 
> 	Thanks,
> 	Paul
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 13:21:23 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQSBw-0002Vd-SC; Thu, 21 Sep 2006 13:18:28 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQSBv-0002VV-1i
	for sip@ietf.org; Thu, 21 Sep 2006 13:18:27 -0400
Received: from sccrmhc11.comcast.net ([63.240.77.81])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQSBq-000138-Q6
	for sip@ietf.org; Thu, 21 Sep 2006 13:18:27 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (sccrmhc11) with ESMTP
	id <2006092117182001100advhve>; Thu, 21 Sep 2006 17:18:20 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8LHIJ1f010224
	for <sip@ietf.org>; Thu, 21 Sep 2006 13:18:19 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8LHIJg0010220;
	Thu, 21 Sep 2006 13:18:19 -0400
Date: Thu, 21 Sep 2006 13:18:19 -0400
Message-Id: <200609211718.k8LHIJg0010220@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 7aafa0432175920a4b3e118e16c5cb64
Subject: [Sip] GRUU and grid
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I was distracted during part of the last phone call, so I think I
heard the following idea discussed and largely agreed on.  But maybe
not.  Can people fill me in, or explain the ramifications of this
idea?

In previous drafts, a UA could convert a GRUU into a series of GRUU
URIs that would all route to the UA by adding a URI-parameter
"grid=(value)":

	sip:gruu-6@example.com --> sip:gruu-6@example.com;grid=abcde

Then the proxy responsible for the GRUU would carry the grid parameter
into the contact URI that was the final request-URI:

	sip:gruu-6@example.com;grid=abcde routes to
		sip:10.1.1.1;grid=abcde

EKR among others noted that this was rather clunky and non-orthogonal
to the rest of the SIP addressing structure.

But the same effect could be obtained by using a header (in RFC 3261
terminology):

	sip:gruu-6@example.com --> sip:gruu-6@example.com?grid=abcde

At whatever stage of processing (UAC or proxy) this URI is inserted as
a request-URI, the header will be removed from the URI and turned into
a header field (RFC 3261 terminology):

	INVITE sip:gruu-6@example.com
	grid: abcde

The header field will be copied by all proxies and eventually reach
the UAS.

The UAS can thus test for the "grid" header field in the same way that
it could previously test for the "grid" URI-parameter in the previous
proposals.

This new scheme has a number of advantages:

- It requires no new mechanisms, as this processing of headers into
  header fields is specified by RFC 3261.

- It is as easy for the UA to use as the URI-parameter.

- It requires reserving one header field name vs. reserving one
  URI-parameter name.

- UAs (or different layers of processing) could use the same mechanism
  for multiple additional values (as long as they use different header
  field names).

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 14:35:17 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQTJp-0007nW-Ki; Thu, 21 Sep 2006 14:30:41 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQTJo-0007n7-MM
	for sip@ietf.org; Thu, 21 Sep 2006 14:30:40 -0400
Received: from ns0.neustar.com ([156.154.16.158])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQTBs-0004ll-DE
	for sip@ietf.org; Thu, 21 Sep 2006 14:22:29 -0400
Received: from stntsmtp01.cis.neustar.com (smartexch.neustar.com [10.31.13.96])
	by ns0.neustar.com (Postfix) with ESMTP id 5C34732884;
	Thu, 21 Sep 2006 18:22:28 +0000 (GMT)
Received: from stntexch03.cis.neustar.com ([10.31.13.45]) by
	stntsmtp01.cis.neustar.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 21 Sep 2006 14:22:27 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Date: Thu, 21 Sep 2006 14:22:28 -0400
Message-ID: <24EAE5D4448B9D4592C6D234CBEBD597054F455D@stntexch03.cis.neustar.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Thread-Index: AcbY1V/849WN/bPMTaGW/m8ZpT6vNgExkZaA
From: "Peterson, Jon" <jon.peterson@neustar.biz>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>,
	"Paul Kyzivat" <pkyzivat@cisco.com>
X-OriginalArrivalTime: 21 Sep 2006 18:22:27.0761 (UTC)
	FILETIME=[E4B0D210:01C6DDAA]
X-Spam-Score: -2.8 (--)
X-Scan-Signature: f2728948111f2edaaf8980b5b9de55af
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org, drage@lucent.com,
	esasaki@ntt-at.com, Dean Willis <dean.willis@softarmor.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


The 'header' privacy value was never intended to encompass the =
functionality of 'id'. 'id' assumes the existence of trust domains, and =
thus of entities among whom private information could be legitimately =
shared. RFC3323 more or less assumes that the anonymizing function is =
performed by intermediary close to the UAC, and that makes the behavior =
of the 'header' privacy value difficult to apply to P- headers which can =
be shared among a set of trust hosts but not outside the trust domain.=20

Clearly, various intermediaries within a trust domain could perform both =
the 'header' and 'id' functions, but if that's desired, both the =
'header' and 'id' priv-values should be specified in the Privacy header =
by the user agent.

Jon Peterson
NeuStar, Inc.

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]
> Sent: Friday, September 15, 2006 10:41 AM
> To: Paul Kyzivat
> Cc: Jesske, R; sip@ietf.org; esasaki@ntt-at.com; Dean Willis;
> drage@lucent.com
> Subject: Re: AW: [Sip] SIP WGLC Draft draft-ietf-sip-acr-code-02.txt
>=20
>=20
> Right.
>=20
> So what this means for acr-code is that we are really at a stalemate=20
> here until its clear what RFC 3323 is supposed to mean. Its important =
to=20
> note that it is certainly not the job of acr-code to clarify=20
> this behavior.
>=20
> -Jonathan R.
>=20
> Paul Kyzivat wrote:
>=20
> >=20
> >=20
> > Jonathan Rosenberg wrote:
> >=20
> >> This is a good point.
> >>
> >> I did not think that the 'header' value applied to P-Asserted-ID.
> >> Rather, the 'id' value does, which is defined specifically for this
> >> purpose in RFC 3325. However I agree with you that *if*=20
> 'header' implied
> >> removal of P-Asserted-ID, it becomes a superset of 'id' and then it
> >> should be added to the list of things that define an=20
> anonymous call.
> >=20
> >=20
> > I agree that the intent is not entirely clear. But like=20
> Jonathan I had=20
> > interpreted the specs so that 'header' privacy did not remove=20
> > P-Asserted-Identity. I just reviewed 3323 and 3325, and I=20
> think that is=20
> > still the correct interpretation based on more or less the=20
> same logic=20
> > Jonathan mentioned earlier:
> >=20
> > - it is suggested that 'header' privacy be applied early on the call
> >   path. (Section 4.3: "It is RECOMMENDED that service=20
> providers couple
> >   the privacy service function with a local outbound proxy.")
> >=20
> > - 'id' privacy must be applied late in the call path or else the
> >   P-Asserted-ID header isn't available to servers that need it.
> >=20
> > - when the 'header' function is carried out, the 'header' token
> >   is to be removed. That is specified in section 5:
> >=20
> >   "When a privacy service performs one of the functions=20
> corresponding to
> >    a privacy level listed in the Privacy header, it SHOULD=20
> remove the
> >    corresponding priv-value from the Privacy header - otherwise, any
> >    other privacy service involved with routing this message might
> >    unnecessarily apply the same function, which in many=20
> cases would be
> >    undesirable."
> >=20
> > I guess the following strategy *could* be used to make the 'header'=20
> > privacy level to be a superset of 'id' privacy:
> >=20
> > - The outbound proxy it would hide most headers ,
> >   but would note that it isn't forwarding across a trust domain
> >   boundary and so not remove P-Asserted-ID.
> >=20
> > - It would remove the 'header' token from the Privacy header,
> >   but because it hasn't completed the job by removing P-Asserted-ID,
> >   it must insert an 'id' token to ensure that is done later.
> >=20
> > While that is a possibility, it seems like quite a stretch=20
> to me. I see=20
> > no hints in either document that this kind of behavior is=20
> expected. It=20
> > seems way more straightforward to treat them as independent options.
> >=20
> >     Paul
> >=20
> >> Perhaps Jon P. can comment on whether the intent was for 'header'
> >> privacy to apply to P-Asserted-ID?
> >>
> >> -Jonathan R.
> >>
> >> Shida Schubert wrote:
> >>
> >>> I personally think RFC3323 is underspecified with what headers to
> >>> be obscured per privacy value. Interestingly though I=20
> found the text in
> >>> IANA consideration that is concise about what each privacy value's
> >>> intent.
> >>>
> >>> "Text from the IANA consideration of RFC3323
> >>>
> >>>    o  user: Request that privacy services provide a=20
> user-level privacy
> >>>       function
> >>>
> >>>    o  header: Request that privacy services modify=20
> headers that cannot
> >>>       be set arbitrarily by the user (Contact/Via)."
> >>>
> >>> Considering the text above, if "header" was set any=20
> headers that can not
> >>> be set
> >>> arbitrarily by the user needs to be obscured/modified by=20
> the privacy
> >>> services, which
> >>> I believe would include P-A-ID as well.
> >>>
> >>> If that's the case, requesting "header" would naturally=20
> mean requesting
> >>> anonymity, as the
> >>> domain supporting P-A-ID would alter the value of the P-A-ID to be
> >>> anonymous as the
> >>> text in IANA suggests.
> >>>
> >>> My original interpretation of "header" privacy value was=20
> actually quite
> >>> different. I saw
> >>> the "header privacy" as a way for UA to request some sort=20
> of topology
> >>> hiding
> >>> (obscuring Contact, via, headers revealing a path to the UA etc.).
> >>> With that interpretation, I could see a scenario where=20
> "header" privacy
> >>> option does NOT
> >>> imply that the originating user desires anonymity(e.g. I=20
> call my client,
> >>> I want to show them
> >>> who I am but not wanting them to find out I am calling=20
> from home.). But
> >>> this can not hold true if the domain provides P-A-ID as=20
> "header' privacy
> >>> value will
> >>> modify the header to obscure the identity of the user,=20
> thus making it an
> >>> anonymous call.
> >>>
> >>> Regards
> >>> Shida
> >>>
> >>> Dean Willis wrote:
> >>>
> >>>> Jesske, R wrote:
> >>>>
> >>>>> At least with the 'header' privacy the origin user=20
> expresses that he
> >>>>> want to be anonymous. So it is an intension of the=20
> user. Of course
> >>>>> the privacy server can strip of the privacy value but=20
> that is due to
> >>>>> the Provider of the server. Within RFC3323 I didn't=20
> found something
> >>>>> that says that if you have privacy performed that you=20
> have to delete
> >>>>> the privacy header itself.
> >>>>
> >>>> Does it? Do we have real scenarios where the "header"=20
> privacy option
> >>>> does NOT imply that the originating user desires anonymity?
> >>>>
> >>>> Or is the case where a call goes out with a "header"=20
> privacy value,
> >>>> but includes an authenticated identity body or other non-header
> >>>> identity mechanism simply an error?
> >>>>
> >>>> If it is an error, what needs to be corrected, in terms of
> >>>>
> >>>> 1) Changing any specifications?
> >>>>
> >>>> 2) Run-time detection of and response to the error condition?
> >>>>
> >>>> --=20
> >>>> dean
> >>>>
> >>>> _______________________________________________
> >>>> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
> >>>> This list is for NEW development of the core SIP Protocol
> >>>> Use sip-implementors@cs.columbia.edu for questions on current sip
> >>>> Use sipping@ietf.org for new developments on the=20
> application of sip
> >>>>
> >>>>
> >>>
> >>>
> >>> _______________________________________________
> >>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >>> This list is for NEW development of the core SIP Protocol
> >>> Use sip-implementors@cs.columbia.edu for questions on current sip
> >>> Use sipping@ietf.org for new developments on the=20
> application of sip
> >>>
> >>
> >=20
>=20
> --=20
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ=20
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 14:46:03 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQTWY-0007cv-3d; Thu, 21 Sep 2006 14:43:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQTWW-0007cq-T9
	for sip@ietf.org; Thu, 21 Sep 2006 14:43:48 -0400
Received: from sj-iport-4.cisco.com ([171.68.10.86])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQTWQ-0001uY-EC
	for sip@ietf.org; Thu, 21 Sep 2006 14:43:48 -0400
Received: from sj-dkim-7.cisco.com ([171.68.10.88])
	by sj-iport-4.cisco.com with ESMTP; 21 Sep 2006 11:43:42 -0700
X-IronPort-AV: i="4.09,196,1157353200"; 
	d="scan'208"; a="1854714266:sNHT33268622"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-7.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8LIhfo6022422; Thu, 21 Sep 2006 11:43:41 -0700
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8LIhdih019892;
	Thu, 21 Sep 2006 11:43:41 -0700 (PDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 21 Sep 2006 14:43:41 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 21 Sep 2006 14:43:41 -0400
Message-ID: <4512DD5C.80403@cisco.com>
Date: Thu, 21 Sep 2006 14:43:40 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Dale.Worley@comcast.net
Subject: Re: [Sip] GRUU and grid
References: <200609211718.k8LHIJg0010220@dragon.ariadne.com>
In-Reply-To: <200609211718.k8LHIJg0010220@dragon.ariadne.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 21 Sep 2006 18:43:41.0046 (UTC)
	FILETIME=[DBA0B160:01C6DDAD]
DKIM-Signature: a=rsa-sha1; q=dns; l=2955; t=1158864221; x=1159728221;
	c=relaxed/simple; s=sjdkim7002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20grid;
	X=v=3Dcisco.com=3B=20h=3DJ0L+1lFe8flUOjLWQMT19RKfF70=3D;
	b=EORvZ6KR7giEkeqZ/crM/K+EjG+ED2yqKqluD8RSH5ADlVj4hUPNnabHaIOnmczhceGXw2GH
	9sU6dvqi1eZF6r4Y+YfsLjr9CXUXpH9OvmayGfIUeWbs/dVLweOD8bm4;
Authentication-Results: sj-dkim-7.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0fa76816851382eb71b0a882ccdc29ac
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Dale,

If header parameters had been made mandatory in 3261 this would probably 
work well. But inclusion of header parameters into requests is 
discretionary in 3261, and there are warnings of how it can be 
dangerous, so I don't believe it can be relied upon.

If it were only the proxy handing out the gruu that had to be relied 
upon it wouldn't be a problem, because we could make it a mandatory part 
of gruu support. But that isn't the case. Done as you suggest it is the 
server that is putting the request into the R-URI of a request that must 
do it. So I think it would be a quite unreliable mechanism.

	Paul

Dale.Worley@comcast.net wrote:
> I was distracted during part of the last phone call, so I think I
> heard the following idea discussed and largely agreed on.  But maybe
> not.  Can people fill me in, or explain the ramifications of this
> idea?
> 
> In previous drafts, a UA could convert a GRUU into a series of GRUU
> URIs that would all route to the UA by adding a URI-parameter
> "grid=(value)":
> 
> 	sip:gruu-6@example.com --> sip:gruu-6@example.com;grid=abcde
> 
> Then the proxy responsible for the GRUU would carry the grid parameter
> into the contact URI that was the final request-URI:
> 
> 	sip:gruu-6@example.com;grid=abcde routes to
> 		sip:10.1.1.1;grid=abcde
> 
> EKR among others noted that this was rather clunky and non-orthogonal
> to the rest of the SIP addressing structure.
> 
> But the same effect could be obtained by using a header (in RFC 3261
> terminology):
> 
> 	sip:gruu-6@example.com --> sip:gruu-6@example.com?grid=abcde
> 
> At whatever stage of processing (UAC or proxy) this URI is inserted as
> a request-URI, the header will be removed from the URI and turned into
> a header field (RFC 3261 terminology):
> 
> 	INVITE sip:gruu-6@example.com
> 	grid: abcde
> 
> The header field will be copied by all proxies and eventually reach
> the UAS.
> 
> The UAS can thus test for the "grid" header field in the same way that
> it could previously test for the "grid" URI-parameter in the previous
> proposals.
> 
> This new scheme has a number of advantages:
> 
> - It requires no new mechanisms, as this processing of headers into
>   header fields is specified by RFC 3261.
> 
> - It is as easy for the UA to use as the URI-parameter.
> 
> - It requires reserving one header field name vs. reserving one
>   URI-parameter name.
> 
> - UAs (or different layers of processing) could use the same mechanism
>   for multiple additional values (as long as they use different header
>   field names).
> 
> Dale
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 15:46:17 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQURp-00053x-8P; Thu, 21 Sep 2006 15:43:01 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQURn-00053s-T0
	for sip@ietf.org; Thu, 21 Sep 2006 15:42:59 -0400
Received: from mailgate.siemenscomms.co.uk ([195.171.110.225]
	helo=bemg01.siemenscomms.co.uk)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQURm-0006wg-DP
	for sip@ietf.org; Thu, 21 Sep 2006 15:42:59 -0400
Received: from CONVERSION-DAEMON.siemenscomms.co.uk by siemenscomms.co.uk
	(PMDF V6.0-24 #40642) id <0J5Y00G01K40H2@siemenscomms.co.uk> for
	sip@ietf.org; Thu, 21 Sep 2006 20:43:12 +0100 (BST)
Received: from ntht207e.uksgcs.siemenscomms.co.uk ([137.223.247.82])
	by siemenscomms.co.uk (PMDF V6.0-24 #40642)
	with ESMTP id <0J5Y00E5BK40T2@siemenscomms.co.uk>; Thu,
	21 Sep 2006 20:43:12 +0100 (BST)
Received: by ntht207e.uksgcs.siemenscomms.co.uk with Internet Mail Service
	(5.5.2657.72)	id <TCV7W1NP>; Thu, 21 Sep 2006 20:42:57 +0100
Content-return: allowed
Date: Thu, 21 Sep 2006 20:42:56 +0100
From: "Elwell, John" <john.elwell@siemens.com>
Subject: RE: [Sip] Review of draft-ietf-sip-connected-identity-01
To: shida@ntt-at.com, "sip@ietf.org List" <sip@ietf.org>
Message-id: <50B1CBA96870A34799A506B2313F266709E82BD0@ntht201e.siemenscomms.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Score: 1.1 (+)
X-Scan-Signature: e472ca43d56132790a46d9eefd95f0a5
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Shida,

Thanks for your comments. My responses in-line.

John 

> -----Original Message-----
> From: Shida Schubert [mailto:shida@ntt-at.com] 
> Sent: 11 September 2006 07:56
> To: sip@ietf.org List
> Cc: Elwell, John
> Subject: [Sip] Review of draft-ietf-sip-connected-identity-01
> 
> Draft:  draft-ietf-sip-connected-identity-01
> Reviewer: Shida Schubert
> Review Date: 10 Sep 06
> Review Deadline: 18 Sep 06
> Status: Initial review 
> 
> Summary: This draft is almost ready for publication, 
>  but needs some clarifications and has nits that should 
>  be fixed before publication.
> 
> The requested clarifications are listed:
> 
>  - Overall
>    As the draft puts so much emphasis on authenticated 
>   identity that can be verified, I think it would be useful  
>   to clarify the need of authentication service to provide 
>   connected identity that's authenticated.
> 
>    I would go further and possibly describe the implication 
>   of what it means to receive a conneceted-identity without 
>   the signature(Although security consideration explains this 
>   to some detail) and  have some text illustrating how even 
>   when support for "id-change" is indicated, signed 
>   connected-identity may not be provided due to absence of 
>   authentication service in connected domain.  
[JRE] OK, I will add a bit to the solution overview section.
> 
>    Draft should also clarify that support for "id-change" 
>   indicated by UAS does not mean sip-identity will be provided 
>   in reverse direction.
>  
>    There is a lot of text related to the discussions that 
>   took place in the mailing list, I think the draft will be 
>   a lot easier to read if you can move this out or delete them.
[JRE] I read through it again and the only thing I found to remove was the
paragraph that talks about response identity and use of GRUU. Francois Audet
also suggested deletion of this paragraph.  I hope this is sufficient.

> 
> Editorial nits:
> --------------------------
[JRE] Done, except where indicated below.

>  > Section 3
>   - 2nd paragraph, 4th sentence.
>     [Remove "clearly"] & [Change "UAS" -> "callee"]
>    =OLD=
>     "However, this does not necessarily clearly indicate the
>      Address of Record (AoR) of the UAS."
>    =NEW= 
>     "However, this does not necessarily indicate the
>      Address of Record (AoR) of the callee."
>  
>   - 4th paragraph, 3rd sentence.
>      [Put comma behind "B2BUA"]
> 
>   - 5th paragraph, 4th sentence.
>     [Change "not even any" -> "no"]
>    =OLD=
>      "In this case there is probably not even any need to 
>       re-negotiate the session"
>    =NEW= 
>      "In this case there is probably no need to re-negotiate 
>       the session"
> 
>    - 6th paragraph.
>     [Rearranging the text with list]
>    =OLD=
>      "This document defines a mechanism for conveying the 
> callee identity
>       to a caller when a call is answered.  The same 
> mechanism can be used
>       to convey the identity of a user that replaces the 
> caller or callee
>       following a call re-arrangement such as call transfer.  
> In general
>       the mechanism delivers connected identity, or the identity of a
>       connected user.  The same mechanism can also be used to 
> convey the
>       identity of a potential callee prior to answer. 
>    =NEW=
>      "This document defines a mechanism for conveying 
> connected identity, 
>       or the identity of a connected user and can be used in 
> the following 
>       scenarios.
>         - To convey the callee identity to a caller when a call is 
>           answered.
>         - To convey the identity of a user that replacese the 
> caller or 
>           callee following a call re-arrangement such as call 
> transfer.
>         - To convey the identity of a potential callee prior 
> to answer"
> 
> > Section 4
>  - 2nd paragraph, 2nd sentence.
>     [Change "request's source" -> "caller"]
[JRE] I don't agree with this change - the mechanism already available apply
to requests in general (not just INVITE requests).

> 
>  - 5th paragraph, 3rd sentence.
>     [Change "forwarded request" -> "forwarding request"]
[JRE] The existing text is correct.

> 
> > Section 5
>  - 1st paragraph, 2nd sentence.
>     [Add "if the domain supports sip-identity" at the end]
>   =OLD=
>     "A mid-dialog request is used to provide connected 
> identity.  The UAC
>      for that request inserts its identity in the From header 
> field of the
>      request and the Identity header field can be used to provide
>      authentication."
>   =NEW=
>     "A mid-dialog request is used to provide connected 
> identity.  The UAC
>      for that request inserts its identity in the From header 
> field of the
>      request and the Identity header field can be used to provide
>      authentication if the domain supports sip-identity"
[JRE] I have handled this differently, by means of text inserted to cover
one of your general comments.

>  
> > Section 6.1 
>   - 1st paragraph, 1st sentence.
>    [Change "UA that supports changes of URI in the From and 
> To header field during
>     a dialog" -> "UAC compliant to this specification"]
> 
> > Section 6.2 
>   - 1st paragraph, 1st sentence.
>    [Change "UA that supports changes of URI in the From and 
> To header field during
>     a dialog" -> "UAS compliant to this specification"]
> 
>   - 2nd paragraph, 1st sentence.
>    [Change "id-change" -> \"id-change\"]
[JRE] I don't understand.

> 
>  Regards
>   Shida Schubert
> 
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 15:46:22 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQURH-0004vc-Cb; Thu, 21 Sep 2006 15:42:27 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQURG-0004vX-7g
	for sip@ietf.org; Thu, 21 Sep 2006 15:42:26 -0400
Received: from mailgate.siemenscomms.co.uk ([195.171.110.225]
	helo=bemg01.siemenscomms.co.uk)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQURE-0006mX-Ox
	for sip@ietf.org; Thu, 21 Sep 2006 15:42:26 -0400
Received: from CONVERSION-DAEMON.siemenscomms.co.uk by siemenscomms.co.uk
	(PMDF V6.0-24 #40642) id <0J5Y00F01K2YSZ@siemenscomms.co.uk> for
	sip@ietf.org; Thu, 21 Sep 2006 20:42:34 +0100 (BST)
Received: from ntht207e.uksgcs.siemenscomms.co.uk ([137.223.247.82])
	by siemenscomms.co.uk (PMDF V6.0-24 #40642)
	with ESMTP id <0J5Y00E4VK2YT2@siemenscomms.co.uk>; Thu,
	21 Sep 2006 20:42:34 +0100 (BST)
Received: by ntht207e.uksgcs.siemenscomms.co.uk with Internet Mail Service
	(5.5.2657.72)	id <TCV7W1NN>; Thu, 21 Sep 2006 20:42:19 +0100
Content-return: allowed
Date: Thu, 21 Sep 2006 20:42:18 +0100
From: "Elwell, John" <john.elwell@siemens.com>
To: Francois Audet <audet@nortel.com>,
	"Drage, Keith (Keith)" <drage@lucent.com>, sip@ietf.org
Message-id: <50B1CBA96870A34799A506B2313F266709E82BCF@ntht201e.siemenscomms.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Score: 1.1 (+)
X-Scan-Signature: ee80a2074afbfe28d15369f4e74e579d
Cc: 
Subject: [Sip] RE: Review of draft-ietf-sip-connected-identity-01
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Francois,

Thanks for your comments - see below.

Regards,

John 

> -----Original Message-----
> From: Francois Audet [mailto:audet@nortel.com] 
> Sent: 13 September 2006 18:00
> To: Drage, Keith (Keith); sip@ietf.org; Elwell, John
> Subject: Review of draft-ietf-sip-connected-identity-01
> 
> Here is my review of Connected-Identity.
> 
> I believe the document is in good shape and has received 
> ample comments
> over the years 
> from the working groups...
[JRE] In fact this document has been going less than a year, although some
abortive attempts at addressing the problem date back a couple of years or
more.

> 
> 
> 
> General Comments:
> 
> - Section 6.4
> 
>   I'm not sure what is the intent of the first paragraph. Is 
> the intent
> to say that 
>   RFC 4474 MUST be used when updating connected identity, 
> which I would
> interpret as
>   mandating the usage of the Indentity and Identity-Info 
> headers? Or are
> we saying
>   that there are other requirement concerning the From header 
> itself in
> RFC 4474 that
>   must be observed? I think it needs to be clarified.
[JRE] The former is intended. I will add the following: "This will allow an
Authentication Service on the path of the mid-dialog request to insert an
Identity header field."

> 
>   My assumption is that supporting Connected-ID does NOT mandate the
> usage of Identity
>   and Identity-Info headers. Those headers are only mandatory if
> Authenticated Connected
>   Identity is desired. If this is correct, I think it needs to be
> explicitely noted (this
>   is the material in 6.5).
[JRE] Typically a UAC does not provide an Authentication Service, and
therefore does not insert an Identity header field - that is normally the
role of a proxy. Therefore for a UAC we just mandate populating the From
header field in an appropriate way to allow an Authentication Service at a
proxy to do its job. For a UAS, however, we leave it optional whether it
verifies the signature if it receives an Identity header field.
Section 6.5 is applicable only to an Authentication Service, and you cannot
be an Authentication Service (as defined in RFC 4474) unless you also
support RFC 4474. So I don't see how this can be clarified further.

> 
> 
> - Section 6.6
>   
>   This is more of a question than a request for change. Do we know of
> proxies that
>   would have problems with From/To changing in a mid-dialog 
> request? 
[JRE] I don't personally know of any, but my knowledge here is limited. Any
RFC 3261-compliant proxy will not have a problem, and the group agreed not
to continue to take account of RFC 2543-compliant proxies.
> And
> why the 
>   phrase "that record routes"? Does it make any difference?
[JRE]If a proxy does not record route, it will not receive a mid-dialog
request.

> 
> 
> 
> Editorial comments:
> 
> - Section 3
> 
>   First sentence of first paragraph: I'd change "a call and 
> its session"
> to "a session".
[JRE] I prefer to leave as is, because there is a distinction.

> 
>   Last sentence of first paragraph: I'd change "because of call
> forwarding" to "because of
>   retargeting".
[JRE] OK

> 
> 
> - Section 4
> 
>   Last paragraph: remove ", typically located at the outbound 
> proxy, ".
> It's not necessarily
>   false, but I don't think we need to say that as we can't really
> predict how this will be
>   implemented.
[JRE] OK

> 
> 
> - Section 5
> 
>   Third paragraph: I don't believe the wording about response identity
> being subject to study 
>   is appropriate for an RFC: it made sense when we were 
> developping the
> draft, but I'd rather 
>   we remove it now. Similarly, I'm not sure we should keep the wording
> about GRUU, because
>   we can't predict if GRUU will tackle or not the annonymity issue (as
> we saw in the mailing
>   list recently). My suggestion would be to remove the paragraph
> altogether. If this is 
>   not acceptable, then I'd remove all mention of GRUU, and I'd remove
> the second sentence of
>   the paragraph.
[JRE] Deleted.

> 
> 
> - Section 6.3
> 
>   This is more a question than a request for a change. What do we mean
> by using a re-INVITE 
>   instead of an UPDATE if there is "other reasons" for the re-INVITE?
> Any example? The draft
>   makes it mandatory for both ends to support UPDATE. Is this 
> because in
> some cases we
>   may want the identity change to trigger user action (to accept the
> change for example)? If
>   so, maybe we should state it. 
[JRE] Sometimes re-INVITE is needed because you want also to do an
offer-answer and you don't anticipate an immediate answer (e.g., because
user action is anticipated), or you want to solicit an offer from the UAS
(sometimes a B2BUA needs to do that). But unless you have a particular need
to do re-INVITE, you must use UPDATE.

> 
> 
> - Section 7
> 
>   Messages show bunch of "TODO" that needs to be done.
[JRE] Cullen is helping out with calculations.

> 
> 
> - Section 11.1
>   
>   Reference [3] should be replaced with RFC 4474.
[JRE] Done

> 
>   Reference [8] shouuld be updated to draft-ietf-sip-gruu-10.
[JRE] No longer applicable.

> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 19:13:13 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQXeZ-0004sC-M6; Thu, 21 Sep 2006 19:08:23 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQXeX-0004rq-PN
	for sip@ietf.org; Thu, 21 Sep 2006 19:08:21 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQXeV-0002k4-EL
	for sip@ietf.org; Thu, 21 Sep 2006 19:08:21 -0400
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k8LN7xdE028164; 
	Thu, 21 Sep 2006 18:07:59 -0500 (CDT)
Received: from [135.185.244.90] (il0015vkg1.ih.lucent.com [135.185.244.90]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k8LN7xN13271; Thu, 21 Sep 2006 18:07:59 -0500 (CDT)
Message-ID: <45131B4F.3020409@lucent.com>
Date: Thu, 21 Sep 2006 18:07:59 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
Organization: Bell Labs Security Technology Research Group
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Tina TSOU <tena@huawei.com>
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs
References: <A713E425-0CA6-4151-9C0A-B1C213FA71C8@softarmor.com>	<44932C00.9010705@lucent.com>
	<00e801c6dc7a$5c004440$6c95460a@china.huawei.com>
In-Reply-To: <00e801c6dc7a$5c004440$6c95460a@china.huawei.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9a2be21919e71dc6faef12b370c4ecf5
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Tina: Thanks for your comments; please see inline.

Tina TSOU wrote:
> [Tina2: Is it possible that we can use another DNS label other than
> URI label to do the same thing? E.g. instead of using DNS:
> example.com and sips: downtown.example.com, we can define DNS:
> example.com and DNS: downtown.example.com label. 

It is not the intent of the draft to make the certificate a
repository of all DNS aliases.  Instead, we are trying to
determine if a judicious set of identities can help in
increasing the confidence with respect to the authenticity
of the server when it is contacted.

To that extent, the URI label helps when a request is routed
to the server as a result of running RFC3263 on a URI like
"sips:user@example.com", and the DNS label helps when a request
is routed to the server as a result of running RFC3263 on a
URI that may appear in, say, the Route header; i.e.,
"Route: <sips:downtown.example.com;lr>".

> In section 6 UAS Considerations, "If the domain is one that is
> allowed by such a policy, the TLS connection can be considered to be
> authenticated."
> 
> This behavior is not consistent with section 5.2 in sip-tls-use which
> defines a reverse lookup.
> 
> "Thus, to be certain, P2 should do a reverse DNS lookup of the source
> address of the incoming TCP packet and match the result to the
> contents of the certificate that contain P1's canonical hostname."
> 
> Which one should be followed?]

I have learned a few things since sip-tls-use-00 ;-)

Yes, you are right; the above two views are not completely
consistent.  We had a good discussion in the Dallas IETF (I
think) on the merits and de-merits of doing a reverse DNS lookup.
At the time I had wrote sip-tls-use-00, I accorded more trust
to DNS than I did to a compromised certificate.  As was
pointed out in the meeting, this may not be entirely a good
thing.

Assume a certificate C contains a DNS label P1 (i.e., C is bound
to identity P1).  Assume that IPAddress(P1) = 10.1.1.1.

Let's consider DNS to be compromised if the attacker has inserted
bogus RRs.

Let's consider C to be compromised if its passphrase is
stolen (note that if this happens, the legitimate user can
ask the CA to put C in the CRL, but I don't think CRLs are
ubiquitous yet.)  If C is compromised and used from P1
by the attacker, there is nothing that can be done to prevent
this attack due to the lack of CRLs.

Of interest to us is if C is compromised and used on a
different host, or if the legitimate user that owns C uses
it for malicious purposes by possibly using it on a host
other than P1.

Case 1: C is compromised, but DNS is not.  C is used on a
  SIP host P2 (instead of P1, which would be normally where
  C would be used.)  IPAddress(P2) = 10.1.1.2.
  The cracker sends a SIP request with a topmost Via of:

  Via: SIP/2.0/TLS P1;branch=...;received=10.1.1.2

  (received parameter added by the server).  Server does a
  ReverseIPAddress(10.1.1.2) = P2 != P1, and immediately closes
  the connection.

  However, if the attacker changes the source address in the packet
  to be 10.1.1.1, then the server will do a
  ReverseIPAddress(10.1.1.1) = P1, and the attacker succeeds.

Case 2: C is compromised and DNS is also compromised so that
  ReverseIPAddress(10.1.1.2) returns P1; the attacker succeeds.

Case 3: DNS is compromised, C is not.
  The attacker can make DNS return anything to match the identity
  in C.

Case 4: C is NOT compromised, and DNS is NOT compromised.
  We count our lucky stars ;-)

So checking against DNS is not perfect.  Depending on how
the attack is mounted, the server does not know whether or not
DNS was compromised.

I believe that the WG generally leans in the direction that
the server follows some policy when making a decision whether
or not a client certificate should be accepted.  Making that
decision based on the URI label seems appropriate.

When I revise sip-tls-use, I will ensure that it matches with
domain-certs.

Thanks.

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 21 21:10:58 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQZVK-0004eX-Ee; Thu, 21 Sep 2006 21:06:58 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQZVJ-0004eS-4x
	for sip@ietf.org; Thu, 21 Sep 2006 21:06:57 -0400
Received: from agnada.com ([69.36.182.244])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQZVG-0006fS-RK
	for sip@ietf.org; Thu, 21 Sep 2006 21:06:57 -0400
Received: from [192.168.0.101] (S010600095b9792b5.vc.shawcable.net
	[24.85.243.115]) (authenticated)
	by agnada.com (8.11.6/8.11.6) with ESMTP id k8M16kq11673;
	Thu, 21 Sep 2006 19:06:47 -0600
Message-ID: <45133729.9030106@ntt-at.com>
Date: Thu, 21 Sep 2006 18:06:49 -0700
From: Shida Schubert <shida@ntt-at.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: "Elwell, John" <john.elwell@siemens.com>
Subject: Re: [Sip] Review of draft-ietf-sip-connected-identity-01
References: <50B1CBA96870A34799A506B2313F266709E82BD0@ntht201e.siemenscomms.co.uk>
In-Reply-To: <50B1CBA96870A34799A506B2313F266709E82BD0@ntht201e.siemenscomms.co.uk>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Spam-Score: 1.1 (+)
X-Scan-Signature: 9ed51c9d1356100bce94f1ae4ec616a9
Cc: "sip@ietf.org List" <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
Reply-To: shida@ntt-at.com
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi John;

My comments in-line.. I removed all the text that
was irrelevant.


Elwell, John wrote:
>>     
>>> Section 6.2 
>>>       
>>   - 1st paragraph, 1st sentence.
>>    [Change "UA that supports changes of URI in the From and 
>> To header field during
>>     a dialog" -> "UAS compliant to this specification"]
>>
>>   - 2nd paragraph, 1st sentence.
>>    [Change "id-change" -> \"id-change\"]
>>     
> [JRE] I don't understand.
>
>   
id-change is not surrounded by double quotation..
I was trying to escape the double quotation with using \ but obviously
it wasn't clear enough..

Regards
Shida
>>  Regards
>>   Shida Schubert
>>
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>
>>     
>
>
>   


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 22 04:55:23 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQgkg-0006uI-IY; Fri, 22 Sep 2006 04:51:18 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQgke-0006mP-Gu
	for sip@ietf.org; Fri, 22 Sep 2006 04:51:16 -0400
Received: from szxga03-in.huawei.com ([61.144.161.55])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQgkd-0006SZ-EN
	for sip@ietf.org; Fri, 22 Sep 2006 04:51:16 -0400
Received: from huawei.com (szxga03-in [172.24.2.9])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J5Z00H86KRPF9@szxga03-in.huawei.com> for
	sip@ietf.org; Fri, 22 Sep 2006 16:55:01 +0800 (CST)
Received: from huawei.com ([172.24.1.6])
	by szxga03-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J5Z00LETKROTW@szxga03-in.huawei.com> for
	sip@ietf.org; Fri, 22 Sep 2006 16:55:01 +0800 (CST)
Received: from CMTEST6 ([10.70.149.108])
	by szxml02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J5Z003DWL3RBC@szxml02-in.huawei.com>; Fri,
	22 Sep 2006 17:02:16 +0800 (CST)
Date: Fri, 22 Sep 2006 16:43:57 +0800
From: Tina TSOU <tena@huawei.com>
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs
To: "Vijay K. Gurbani" <vkg@lucent.com>
Message-id: <018a01c6de23$3e4e7a70$6c95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <A713E425-0CA6-4151-9C0A-B1C213FA71C8@softarmor.com>
	<44932C00.9010705@lucent.com>
	<00e801c6dc7a$5c004440$6c95460a@china.huawei.com>
	<45131B4F.3020409@lucent.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 2beba50d0fcdeee5f091c59f204d4365
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Vijay: Thanks for your detailed explanation. Please see [Tina3: ...].

B. R.
Tina
Messengers: 
MSN: tinatsou6@hotmail.com   Yahoo: tina_tsou    Skype: tinaTSOU    Jabber: tina@jabber.org

----- Original Message ----- 
From: "Vijay K. Gurbani" <vkg@lucent.com>
To: "Tina TSOU" <tena@huawei.com>
Cc: "IETF SIP List" <sip@ietf.org>
Sent: Friday, September 22, 2006 7:07 AM
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs


> Tina: Thanks for your comments; please see inline.
> 
> Tina TSOU wrote:
> > [Tina2: Is it possible that we can use another DNS label other than
> > URI label to do the same thing? E.g. instead of using DNS:
> > example.com and sips: downtown.example.com, we can define DNS:
> > example.com and DNS: downtown.example.com label. 
> 
> It is not the intent of the draft to make the certificate a
> repository of all DNS aliases.  Instead, we are trying to
> determine if a judicious set of identities can help in
> increasing the confidence with respect to the authenticity
> of the server when it is contacted.
> 
> To that extent, the URI label helps when a request is routed
> to the server as a result of running RFC3263 on a URI like
> "sips:user@example.com", and the DNS label helps when a request
> is routed to the server as a result of running RFC3263 on a
> URI that may appear in, say, the Route header; i.e.,
> "Route: <sips:downtown.example.com;lr>".
[Tina3: 
A.  This solution is not backward compatible with many implementation which only compare the DNS label, either the URI for 3263 resolution like "<sips:downtown.example.com;lr>" or "sips:user@example.com". 

B. What's the advantage in concept-wise or implementing by introducing this URI label? Even a host may have many DNS aliases, but it will not be changed frequently. ]

[Tina3: 
Is a host like multi-user computer the concern of this draft? One kind of attack in multi-user computer is being discussed in connect-reuse draft. If all the users share the same certificate, the same attack can happen for TLS. 
]
> 
> > In section 6 UAS Considerations, "If the domain is one that is
> > allowed by such a policy, the TLS connection can be considered to be
> > authenticated."
> > 
> > This behavior is not consistent with section 5.2 in sip-tls-use which
> > defines a reverse lookup.
> > 
> > "Thus, to be certain, P2 should do a reverse DNS lookup of the source
> > address of the incoming TCP packet and match the result to the
> > contents of the certificate that contain P1's canonical hostname."
> > 
> > Which one should be followed?]
> 
> I have learned a few things since sip-tls-use-00 ;-)
> 
> Yes, you are right; the above two views are not completely
> consistent.  We had a good discussion in the Dallas IETF (I
> think) on the merits and de-merits of doing a reverse DNS lookup.
> At the time I had wrote sip-tls-use-00, I accorded more trust
> to DNS than I did to a compromised certificate.  As was
> pointed out in the meeting, this may not be entirely a good
> thing.
> 
> Assume a certificate C contains a DNS label P1 (i.e., C is bound
> to identity P1).  Assume that IPAddress(P1) = 10.1.1.1.
> 
> Let's consider DNS to be compromised if the attacker has inserted
> bogus RRs.
> 
> Let's consider C to be compromised if its passphrase is
> stolen (note that if this happens, the legitimate user can
> ask the CA to put C in the CRL, but I don't think CRLs are
> ubiquitous yet.)  If C is compromised and used from P1
> by the attacker, there is nothing that can be done to prevent
> this attack due to the lack of CRLs.
> 
> Of interest to us is if C is compromised and used on a
> different host, or if the legitimate user that owns C uses
> it for malicious purposes by possibly using it on a host
> other than P1.
> 
> Case 1: C is compromised, but DNS is not.  C is used on a
>   SIP host P2 (instead of P1, which would be normally where
>   C would be used.)  IPAddress(P2) = 10.1.1.2.
>   The cracker sends a SIP request with a topmost Via of:
> 
>   Via: SIP/2.0/TLS P1;branch=...;received=10.1.1.2
> 
>   (received parameter added by the server).  Server does a
>   ReverseIPAddress(10.1.1.2) = P2 != P1, and immediately closes
>   the connection.
> 
>   However, if the attacker changes the source address in the packet
>   to be 10.1.1.1, then the server will do a
>   ReverseIPAddress(10.1.1.1) = P1, and the attacker succeeds.
> 
> Case 2: C is compromised and DNS is also compromised so that
>   ReverseIPAddress(10.1.1.2) returns P1; the attacker succeeds.
> 
> Case 3: DNS is compromised, C is not.
>   The attacker can make DNS return anything to match the identity
>   in C.
> 
> Case 4: C is NOT compromised, and DNS is NOT compromised.
>   We count our lucky stars ;-)
> 
> So checking against DNS is not perfect.  Depending on how
> the attack is mounted, the server does not know whether or not
> DNS was compromised.
> 
> I believe that the WG generally leans in the direction that
> the server follows some policy when making a decision whether
> or not a client certificate should be accepted.  Making that
> decision based on the URI label seems appropriate.
> 
> When I revise sip-tls-use, I will ensure that it matches with
> domain-certs.
> 
> Thanks.
> 
> - vijay
> -- 
> Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
> Bell Laboratories, Lucent Technologies, Inc.
> 2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 22 05:44:02 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQhXA-0002lb-6B; Fri, 22 Sep 2006 05:41:24 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQhX8-0002lL-Dv
	for sip@ietf.org; Fri, 22 Sep 2006 05:41:22 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQhX6-0000Ov-3Y
	for sip@ietf.org; Fri, 22 Sep 2006 05:41:22 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k8M9fHwX001408
	for <sip@ietf.org>; Fri, 22 Sep 2006 04:41:17 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 22 Sep 2006 04:41:17 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 22 Sep 2006 11:41:15 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 22 Sep 2006 11:41:15 +0200
Message-ID: <5D1A7985295922448D5550C94DE291804A54DA@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: GRUU WGLC comments review
Thread-Index: AcbeKz9KWpNvs73TQjiu/v7PboRAkA==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 22 Sep 2006 09:41:16.0045 (UTC)
	FILETIME=[3FB563D0:01C6DE2B]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 69a74e02bbee44ab4f8eafdbcedd94a1
Subject: [Sip] GRUU WGLC comments review
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

We will be continuing the conference calls on resolving the WGLC
comments on GRUU.

Regards

Keith


> The continuation call will be on:
>=20
> Wednesday September 27th
> ------------------------
>=20
> 7:00 am - 9:00 am Pacific
> 8:00 am - 10:00 am Mountain
> 9:00 am - 11:00 am Central
> 10:00 am - 12:00 midday Eastern
> 3:00 pm - 5:00 pm UK
>=20
> Bridge details
>=20
> Access Phone Number:  8007718734
> International Access Phone Number:  +1 6477233953 7-Digit Access Code:

> 5776249
>=20
> The compiled comments are at:
>=20
> http://www.softarmor.com/sipwg/reviews/gruu/index.html
>=20
> Other documents will also appear in this area, referenced by this same

> index page.

Keith Drage
Lucent Technologies
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 22 06:34:14 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQiIW-0007I0-2w; Fri, 22 Sep 2006 06:30:20 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQiIV-0007Hq-6K
	for sip@ietf.org; Fri, 22 Sep 2006 06:30:19 -0400
Received: from mailgate.siemenscomms.co.uk ([195.171.110.225]
	helo=bemg01.siemenscomms.co.uk)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQiIQ-0000hB-NO
	for sip@ietf.org; Fri, 22 Sep 2006 06:30:19 -0400
Received: from CONVERSION-DAEMON.siemenscomms.co.uk by siemenscomms.co.uk
	(PMDF V6.0-24 #40642) id <0J5Z00501P6M1H@siemenscomms.co.uk> for
	sip@ietf.org; Fri, 22 Sep 2006 11:30:22 +0100 (BST)
Received: from ntht207e.uksgcs.siemenscomms.co.uk ([137.223.247.82])
	by siemenscomms.co.uk (PMDF V6.0-24 #40642)
	with ESMTP id <0J5Z0042VP6IST@siemenscomms.co.uk>; Fri,
	22 Sep 2006 11:30:18 +0100 (BST)
Received: by ntht207e.uksgcs.siemenscomms.co.uk with Internet Mail Service
	(5.5.2657.72)	id <TCV7WMK3>; Fri, 22 Sep 2006 11:30:04 +0100
Content-return: allowed
Date: Fri, 22 Sep 2006 11:29:54 +0100
From: "Elwell, John" <john.elwell@siemens.com>
To: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
Message-id: <50B1CBA96870A34799A506B2313F266709EBBBE9@ntht201e.siemenscomms.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 825e642946eda55cd9bc654a36dab8c2
Cc: 
Subject: [Sip] RE: draft-ietf-sip-connected-identity-01 comments
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Cullen,

Thanks for your review. See below. Also others should take a look at the
first point below in particular.

John 

> -----Original Message-----
> From: Cullen Jennings [mailto:fluffy@cisco.com] 
> Sent: 09 September 2006 19:51
> To: SIP; Elwell, John
> Subject: draft-ietf-sip-connected-identity-01 comments
> 
> 
> John thanks for the work on this - it is looking really good and I  
> like how you have solved the issues. WIth my AD hat on, I 
> really like  
> how this draft it going and looks good. The rest of the comments are  
> sent with  my individual hat on and some of them are far more nit  
> picky that I would feel was appropriate for an IESG comment.
> 
> Few things ....
> 
> When an Update is sent. Are there any conditions under which 
> it might  
> be rejected. Bad identity for example. I think that might need a  
> little discussion and also what the UA does when it sends an update  
> with a no identity and it gets rejected.
[JRE] A very good point. We don't want to get to a situation where it is
impossible to perform a mid-dialog request (e.g., for purposes such as
session timer refresh or session re-negotiation) just because  connected
identity fails. My proposed fix is as follows:
1. Say that a UAS SHOULD NOT reject a mid-dialog request with 428 'Use
Identity Header'.
2. Say that an Authentication Service MUST NOT add an Identity header field
to a mid-dialog request if a previous request on that dialog has resulted in
436 'Bad Identity-Info', 437 'Unsupported Certificate' or 438 'Invalid
Identity Header'.
3. Say that a UAC MUST repeat a mid-dialog request that results in one of
these responses if the mid-dialog request was not solely for the purpose of
connected identity. If solely for the purpose of connected identity there is
no point in repeating it, so I will say "SHOULD NOT take any further
action".
Comments?

> 
> There is a lot of background information about how we got to this  
> decision, other ways that one might do this etc. If this was 
> moved to  
> an appendix, it would probably help implementers focus on the 
> key stuff.
[JRE]OK, I bow to pressure - a couple of others have made similar comments.
Essentially I have moved sections 3 (existing mechanisms for conveying
identity) and 4 (existing mechanisms for authenticated identity) to an
appendix.

> 
> The security section could probably use more work around the 
> issue of  
> what you can trust here and what you can't. Might want to reference  
> history as a possible solution to some of the stuff that this does  
> not solve.
[JRE] I have referenced history-info and also added something about the
possibility of terminating the call if a UA is really not happy with the
absence of a valid Identity header.

> 
> 
> Nits
> 
> In the Header on first page, needs to day updates 3261
> 
> Somewhere in draft need a describe exactly what this changes in 3261
[JRE] I thought this was covered in the existing section 5, but I have
enhanced it slightly. It now says: "This document therefore deprecates
mandatory reflection of the original To and From URIs in mid-dialog requests
and their responses, which constitutes a change to RFC 3261."

> 
> The name of the option tag "id-change" sort of bugs me. What is  
> allowed to change here does not really have to do with identity as  
> much as the from URI. I would prefer the name "from-change" as what  
> this is saying is only that part of 2543 was not required by the UA.
[JRE] Well, the URI is the identity, so I don't really understand your
point. It was changed to "id-change" from something rather longer a draft or
so back, so I would be reluctant to change it again. Any other opinions?

> 
> I computed the Identity Strings - I have a program to do this 
> and can  
> update if the messages change. Make sure we regenerate and check  
> these in in Auth 48.
> 
>   invite(2) base64 identity is xN6gCHR6KxGM 
> +nyiEM13LcWgAFQD3lkni1DPkwgadxh4BB7G 
> +VwY13uRv5hbCI2VSvKuZ4LYN0JNoe7v8VAzruKMyi4Bi4nUghR/ 
> fFGBrpBSjztmfffLTp6SFLxo9XQSVrkm1O4c/4UrKn2ejRz+5BULu9n9kWswzK
> DNjlYlmmc=
> 
>   update(8) base64 identity is g8WJiVEzrbYum+z2lnS3pL 
> +MIhuI439gDiMCHm01fwX5D8Ft5Ib9tewLfBT9mDOUSn6wkPSWVQfqdMF/ 
> QBPkpsIIROIi2sJOYBEMXZpNrhJd8/ 
> uboXMl9KRujDFQefZlmXV8dwD6XsPnMgcH8jAcaZ5aS04NyfWadIwTnGeuxko=
> 
>   update(4) base64 identity is  
> AQFLSjCDRhO2eXlWmTajk99612hkJii9giDMWki5uT6qc4BrekywOUuObcwZI3
> qhJReZCN7y 
> bMBNYFZ5yFXWdyet4j3zLNCONU9ma+rs8ZOv0+z/Q3Z5cD26HrmitU 
> +OCKWPLObaxbkGQry9hQxOmwRmlUgSjkeCEjgnc1iQc3E=
> 
>   reinvite(6) base64 identity is  
> KCd3YLQHj51SlCQhFMnpQjmP6wHh7JGRO8LsB4v5SGEr/Mwu7j6Gpal8ckVM2vd1zqH/ 
> F4WJXYDlB525uuJm/fN3O1A2xsZ9BxRkh4N4U19TL9I2Tok3U3kGg8To/ 
> 6w1mEXpUQjo3OgNYqOBtawHuZI5nrOVaV3IrbQh1b2KgLo=
[JRE] Thanks. The examples have not changed during WGLC, so these are still
valid, but we should check them during Auth48.
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 22 10:16:48 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQln4-0006X5-Ov; Fri, 22 Sep 2006 10:14:06 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQln1-0006VN-Qs
	for sip@ietf.org; Fri, 22 Sep 2006 10:14:04 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQlmx-0003yq-U9
	for sip@ietf.org; Fri, 22 Sep 2006 10:14:03 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 22 Sep 2006 10:13:30 -0400
X-IronPort-AV: i="4.09,202,1157342400"; 
	d="scan'208"; a="103945310:sNHT5047730034"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8MED8Ts017718; Fri, 22 Sep 2006 10:13:08 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8MED7dQ022426; 
	Fri, 22 Sep 2006 10:13:08 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Sep 2006 10:13:07 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Sep 2006 10:13:07 -0400
Message-ID: <4513EF73.70702@cisco.com>
Date: Fri, 22 Sep 2006 10:13:07 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: "Elwell, John" <john.elwell@siemens.com>
Subject: Re: [Sip] RE: draft-ietf-sip-connected-identity-01 comments
References: <50B1CBA96870A34799A506B2313F266709EBBBE9@ntht201e.siemenscomms.co.uk>
In-Reply-To: <50B1CBA96870A34799A506B2313F266709EBBBE9@ntht201e.siemenscomms.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 22 Sep 2006 14:13:07.0652 (UTC)
	FILETIME=[3A2F1840:01C6DE51]
DKIM-Signature: a=rsa-sha1; q=dns; l=2610; t=1158934388; x=1159798388;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20RE=3A=20draft-ietf-sip-connected-identity-01=20comments
	|To:=22Elwell,=20John=22=20<john.elwell@siemens.com>;
	X=v=3Dcisco.com=3B=20h=3DMGkaqj6a/ciTRvoHePMJzGscYKU=3D;
	b=eocs5vIcDjH2S/c2dRqbHIL3lNXy97zbhozOLoryo3PklLIxtXJvfl3pPvOvBQlnfYPZc//9
	SiaRAe91RaxoiLQ69dWZQOltGuCaIDHNyOwofq9Gzo123bo3yYR3pJ8J;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: f607d15ccc2bc4eaf3ade8ffa8af02a0
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Elwell, John wrote:
>> From: Cullen Jennings [mailto:fluffy@cisco.com] 

>> When an Update is sent. Are there any conditions under which 
>> it might  
>> be rejected. Bad identity for example. I think that might need a  
>> little discussion and also what the UA does when it sends an update  
>> with a no identity and it gets rejected.
> [JRE] A very good point. We don't want to get to a situation where it is
> impossible to perform a mid-dialog request (e.g., for purposes such as
> session timer refresh or session re-negotiation) just because  connected
> identity fails.

> My proposed fix is as follows:
> 1. Say that a UAS SHOULD NOT reject a mid-dialog request with 428 'Use
> Identity Header'.

I'm not sure about this. At the least I think this one needs some clear 
explanation of the SHOULD NOT - about the conditions when it can be 
violated.

I see this as somewhat analogous to doing a digest challenge on an 
in-dialog request. In some cases it is the right thing to do.

A UA that imposes such a requirement will be limited in what it can do, 
but that may still be right in some cases.

> 2. Say that an Authentication Service MUST NOT add an Identity header field
> to a mid-dialog request if a previous request on that dialog has resulted in
> 436 'Bad Identity-Info', 437 'Unsupported Certificate' or 438 'Invalid
> Identity Header'.

This requirement would force the authentication service to be dialog 
stateful, which is not ideal. Better to push the state back into the 
sender of the request. This may require a way for the UAC to tell the 
authentication service not to act.

> 3. Say that a UAC MUST repeat a mid-dialog request that results in one of
> these responses if the mid-dialog request was not solely for the purpose of
> connected identity. If solely for the purpose of connected identity there is
> no point in repeating it, so I will say "SHOULD NOT take any further
> action".

This seems wrong to me.

I think that the remedy to these is in the verifier. The purpose of the 
verifier is ultimately to drive an authorization decision. If 
authorization would succeed in the absence of the identity, then the 
request should be permitted to continue as if the identity was not present.

Unfortunately this would seem to require a revision to 4474 even though 
the paint is hardly dry on it.

If this is done, then there is no need of a mechanism to cause the 
authentication service *not* to authenticate. If this is *not* done, 
then that need remains, which will still require a change to 4474.

	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 22 10:40:17 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQm9t-0001Xe-DF; Fri, 22 Sep 2006 10:37:41 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQm9s-0001XY-8D
	for sip@ietf.org; Fri, 22 Sep 2006 10:37:40 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQm9n-0002oi-NI
	for sip@ietf.org; Fri, 22 Sep 2006 10:37:40 -0400
Received: from ilexp02.ndc.lucent.com (h135-3-39-2.lucent.com [135.3.39.2])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k8MEbPGc009680
	for <sip@ietf.org>; Fri, 22 Sep 2006 09:37:25 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp02.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 22 Sep 2006 09:37:24 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Fri, 22 Sep 2006 16:37:23 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 22 Sep 2006 16:37:22 +0200
Message-ID: <5D1A7985295922448D5550C94DE291804A5712@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Notes of GRUU conference calls 11th September and 19th September
Thread-Index: AcbeVJ1d6KtYw3yjSPyVhaCOXKuS/g==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 22 Sep 2006 14:37:23.0095 (UTC)
	FILETIME=[9DB21270:01C6DE54]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: bfe538a859d88717fa3c8a6377d62f90
Subject: [Sip] Notes of GRUU conference calls 11th September and 19th
	September
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Attached find the notes of the two conference calls held so far on
resolution of GRUU comments.

Any corrections / clarifications welcome.

Please open any technical issues on GRUU itself as a new thread.

Regards

Keith



Keith Drage
Lucent Technologies
drage@lucent.com
tel: +44 1793 776249

--------------------------------
Notes of conference call held on 11th September 2006 to review GRUU WGLC

comments.

Participating:

Paul Kyzivat
Alan Hawrylyshen
Robert Sparks
Andrew Allen
Dale Worley
Cullen Jennings
Jonathan Rosenberg (Editor)
Dean Willis (Moderator)
Eric Rescorla
David Hancock
Keith Drage (Scribe)

Review comment status as at this meeting:

https://www.softarmor.com/sipwg/reviews/gruu/gruu-10-comments-v2.htm=20

or

https://www.softarmor.com/sipwg/reviews/gruu/gruu-10-comments-v2.doc

Agenda discussion on what to discuss in what order. Settled on the
following list:

*	Its too complicated (Dean, Ekr)
	>	remove properties discussion?
	>	remove figure 3?
	>	remove some use cases?
	>	rewrite overview?
>	total flush, rewrite, and kill the editor
*	do we discuss UA treatment of a contact if it doesnt have gruu
flag (Paul)
*	do we need more clarification on lifetime of gruus - gruus not
assigned by=20
registration
*	Lack of generality in grid/opaque design. Way for a more generic
demux? (ekr)
*	retargeting, forwarding services applied to gruu? Is this policy
or protocol=20
requirements?=20
*	All of Robert's issue mails:
	>	GRUU as a header and a URI param
	>	statefulness required?
	>	in vs. out of dialog retargeting
*	When to apply GRUU - is at always? Roberts comment.
*	Determining whether a request is mid-dialog or not, to apply
service treatment=20
(and other things) - how to do that? (Robert)
*	Deans comments on whether gruu needs to be explicitly flagged or
not
*	Xavier's alternative proposal on To modification home/edge proxy
terminolgy -=20
where to define, how to define
*	bit about outbound proxies and what GRUU to use - comments that
this is=20
confusing
*	applicability of record-routing languages in basic trapezoid
case
*	anonymity of gruus
*	Altenative gruu construction algorithm from ekr
*	SIP/SIPS text - should we say anything about SIPS? COnsolidate
SIPS processing?
*	tel URI handling (Andrew)
*	GRUU/AOR URI equivalence - an issue? (Dale)
*	Escaping allowed in GRUU contact header param? (Dale)
*	do we need client generated insteance ID (Aki)

Its too complicated (Dean, Ekr) - Comment #008 and others:
Ekr regarded his comment as primarily editorial, however Dean says it is
technically=20
too complex. Ekr indicated that it was difficult to tell normative from
informative.=20
Agreed that we need to extract the explanatory information into a later
part. Restate=20
normative part as differences from RFC 3261 and do not restate RFC 3261.
The=20
primary idea of GRUU is simple but it is the secondary issues that make
it more=20
complex - need to get primary idea across to the audience as quickly as
possible.
There was consensus on the need for reorganisation, with the emphasis on

reorganisation rather than rewriting. Specifically: Figure 3: new
simpler figure plus=20
text. Use cases: REFER use case in introduction and move other use cases
to an=20
additional material area. Rewrite and simplify overview: Ekr agreed to
provide the=20
basis for this.

Anonymity: Cullen comment
Currently can always find the AoR. Lifetimes are infinite - why?
Justification is for=20
debugging and callback. This branches into the lifetime discussion.
Possible enhancements to provide flag in register which indicates please
mint new=20
GRUU - however the old one will remain valid. Dean says this is the
start of his=20
technically too complicated argument - GRUU should be an ephemeral
anonymous=20
identifier.=20
Agreed to take the open issue to the list for discussion and resolution.
Jonathan to=20
draft the issue statement to the list.

Agreed we need another call. Keith Drage to arrange.

------------------------

Notes of conference call held on 11th September 2006 to review GRUU WGLC

comments.

Participating:

Paul Kyzivat
Alan Hawrylyshen
Robert Sparks
Andrew Allen
Dale Worley
Cullen Jennings
Jonathan Rosenberg (Editor)
Dean Willis (Moderator)
Eric Rescorla
David Hancock
Keith Drage (Scribe)

Review comment status as at this meeting:

https://www.softarmor.com/sipwg/reviews/gruu/gruu-10-comments-v3.htm=20

or

https://www.softarmor.com/sipwg/reviews/gruu/gruu-10-comments-v3.doc

1) anonymity of gruus (note we started this on previous call but reached
no conclusion=20
-- I suspect list discussion has suggested that "yes, some change to the
doc is needed"=20
is the answer. Tracker #124A and others)
Noted: Come back to this one later in the call

2) When to apply GRUU - is it always? (Robert, tracker #4).=20
Noted that JDR had followed up on list.
Clarified that the issue is when to use GRUU in Contact rather than when
to create the=20
GRUU.
Robert to send text, which will include 'Not the intent of this draft to
preclude end-to-
end signalling".
One should always provide a contact with GRUU properties, either using
registration-
minting or construction from configuration.

3) Lifetime of GRUU (Robert, tracker #11)
For anonymity to work, one can't require immortal GRUU. However
cancellability=20
requires state and Robert has requirement not to support state.=20
Also need to discuss 404 vs 480 responses, such that the use of 404
responses does=20
not imply state.
Do we think that GRUU must be perpetual? No, we need to specify
mortality as an=20
option.
Noted that we must NOT specify a mechanism that returns 480 to a GRUU
that has=20
never been minted.

4) Explicit mechanism for cancelling a GRUU? Do we need one?
Does removing the contact binding satisfy the requirement? Apparently
not. It seems=20
that the only solution is an automatic anonymizer service engaged by a
privacy header.=20
The contact minted by the anonymity server may need to be flagged as a
GRUU.

5)  Lack of generality in grid/opaque design. Way for a more generic
demux? (ekr,=20
many tracker items)
This led to a discussion of of request-URI processing and rewrites on
contact routing=20
that would allow e2e parameter transparency. Need to ensure that the
Request URI is=20
not rewritten, and will need to be a property per contact.
Proposed that we delete GRID from GRUU, move it to a separate spec that
fixes=20
parameter passage in general. This will be a UA loose route technique
and will be=20
done without additional flags. Robert volunteers to help on this draft.

6) retargeting, forwarding services applied to gruu? Is this policy or
protocol=20
requirements?
Part of this is debate about whether GRUU is an alias for the Contact or
for the AoR.
Noted that the GRUU doc needs to include a statement about intent.

7) GRUU as a header and a URI param (Robert, tracker #5)
Jonathan proposed a solution on email (rename to gr) that all seem happy
with.

8) Statefulness required? (Robert, tracker #11 and others)
Already done, tied into cancellation and anonymity

9) in vs. out of dialog retargeting (Robert, tracker #12)
Robert finds asking a proxy to act differently in or out of dialog as
added complexity.=20
However, if we require this, the current text (test for route header)
for "in or out" fails=20
due to the possibility of preloaded routes.=20
Do we really need to be able to detect this? It seems only
service-treatment depends=20
on it. Noted that 3261 is vague on handling a request with route
headers.
Proposed that we can deal with this at the level of correctly describing
proxy behavior=20
for request with route headers, and not mandate different behavior on
in/out of dialog.
The Route header processing may need further clarification generally.

10) Determining whether a request is mid-dialog or not, to apply service
treatment=20
(and other things) - how to do that? (Robert)
Mooted, see above.

11) Whether gruu needs to be explicitly flagged (This is a GRUU!) or not
(Dean,=20
tracker #6)
Reason is that there is such widespread violation of RFC 3261
requirements that=20
Contact is globally routeable anyway that we need to do something.
Consensus: yes, it must be. No change to doc. If anywhere, this belongs
in transfer=20
spec.

12) Xavier's alternative proposal on To modification (Tracker #1)
Doing this makes GRUU less compatible with RFC 3261.
Consensus on "no" from this review team.

13) Home/edge proxy terminology - where to define, how to define
Suggested that this might belong in Outbound. Author will make a change
to GRUU,=20
referencing the outbound spec for the def. Cullen actioned to follow up
in outbound.

deferred remaining points to next call.

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 22 12:46:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQo6E-00060x-SU; Fri, 22 Sep 2006 12:42:02 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQo6D-00060p-BG
	for sip@ietf.org; Fri, 22 Sep 2006 12:42:01 -0400
Received: from mailgate.siemenscomms.co.uk ([195.171.110.225]
	helo=bemg01.siemenscomms.co.uk)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQo69-0004cZ-PC
	for sip@ietf.org; Fri, 22 Sep 2006 12:42:01 -0400
Received: from CONVERSION-DAEMON.siemenscomms.co.uk by siemenscomms.co.uk
	(PMDF V6.0-24 #40642) id <0J60006016E7EZ@siemenscomms.co.uk> for
	sip@ietf.org; Fri, 22 Sep 2006 17:42:07 +0100 (BST)
Received: from ntht207e.uksgcs.siemenscomms.co.uk ([137.223.247.82])
	by siemenscomms.co.uk (PMDF V6.0-24 #40642)
	with ESMTP id <0J60006066E5EX@siemenscomms.co.uk>; Fri,
	22 Sep 2006 17:42:05 +0100 (BST)
Received: by ntht207e.uksgcs.siemenscomms.co.uk with Internet Mail Service
	(5.5.2657.72)	id <TCV7W407>; Fri, 22 Sep 2006 17:41:50 +0100
Content-return: allowed
Date: Fri, 22 Sep 2006 17:41:47 +0100
From: "Elwell, John" <john.elwell@siemens.com>
To: Paul Kyzivat <pkyzivat@cisco.com>
Message-id: <50B1CBA96870A34799A506B2313F266709EBC0A3@ntht201e.siemenscomms.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 6640e3bbe8a4d70c4469bcdcbbf0921d
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
Subject: [Sip] Rejecting connected identity (was RE:
	draft-ietf-sip-connected-id entity-01 comments)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Paul,

I agree with most of your points, and on reflection I think I agree that the
solution has to be with the verifier.

I think RFC 4474 is not a problem as far as sending a 428 'Use Identity
Header' response is concerned, because that is left to policy, so we could
say in connected-identity that policy should be to not send 428.

However, 436, 437 and 438 responses are all a problem, because RFC 4474 says
that they MUST be sent under respective conditions. Interestingly, though,
there are other failure scenarios that can arise from the procedures of
section 6 of RFC 4474 for which no normative statement is given on how to
respond, e.g. invalid Date header field, signer not authoritative for the
domain.

So one way to solve the present problem would be for the connected-identity
draft to modify verifier behaviour in RFC 4474 in the case of mid-dialog
requests. I guess this would mean that it would update RFC 4474 as well as
updating RFC 3261. But I don't like this, because it seems to remove some of
the security properties of RFC 4474.

Another way would be to accept that 436, 437 and 438 responses will be sent,
and failure to verify a signature will therefore result in inability to
process the UPDATE or re-INVITE request, and hence if the UPDATE or
re-INVITE request was for some other purpose such as session timer refresh
or modifying the session, that action will fail. Then the call will fail (in
the case of inability to refresh the session timer) or the session
modification will fail. I guess this is somewhat analogous to caller ID
verification failure in an INVITE request - it is impossible to establish a
call if verification fails. Moreover, the UAC has no ability to rectify the
situation, since it is at the mercy of a proxy-based Authentication Service
that puts a rogue Identity header field in every request. In the connected
identity case, the only difference is that the call is already established
but is likely to fail if verification fails.

Of course, if the mid-dialog request is indeed from the wrong source, then
sending a 436, 437 or 438 response is indeed the correct thing to do, and
overriding the verification procedures of RFC 4474 would indeed be the wrong
thing to do. So perhaps we just have to accept that these response codes can
be received and will lead to failure.

So, my preferred way forward is simply to recommend not sending a 428 and
accept the consequences of other responses that the verifier might send.

John

> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> Sent: 22 September 2006 15:13
> To: Elwell, John
> Cc: Cullen Jennings; SIP
> Subject: Re: [Sip] RE: draft-ietf-sip-connected-identity-01 comments
> 
> 
> 
> Elwell, John wrote:
> >> From: Cullen Jennings [mailto:fluffy@cisco.com] 
> 
> >> When an Update is sent. Are there any conditions under which 
> >> it might  
> >> be rejected. Bad identity for example. I think that might need a  
> >> little discussion and also what the UA does when it sends 
> an update  
> >> with a no identity and it gets rejected.
> > [JRE] A very good point. We don't want to get to a 
> situation where it is
> > impossible to perform a mid-dialog request (e.g., for 
> purposes such as
> > session timer refresh or session re-negotiation) just 
> because  connected
> > identity fails.
> 
> > My proposed fix is as follows:
> > 1. Say that a UAS SHOULD NOT reject a mid-dialog request 
> with 428 'Use
> > Identity Header'.
> 
> I'm not sure about this. At the least I think this one needs 
> some clear 
> explanation of the SHOULD NOT - about the conditions when it can be 
> violated.
> 
> I see this as somewhat analogous to doing a digest challenge on an 
> in-dialog request. In some cases it is the right thing to do.
> 
> A UA that imposes such a requirement will be limited in what 
> it can do, 
> but that may still be right in some cases.
> 
> > 2. Say that an Authentication Service MUST NOT add an 
> Identity header field
> > to a mid-dialog request if a previous request on that 
> dialog has resulted in
> > 436 'Bad Identity-Info', 437 'Unsupported Certificate' or 
> 438 'Invalid
> > Identity Header'.
> 
> This requirement would force the authentication service to be dialog 
> stateful, which is not ideal. Better to push the state back into the 
> sender of the request. This may require a way for the UAC to tell the 
> authentication service not to act.
> 
> > 3. Say that a UAC MUST repeat a mid-dialog request that 
> results in one of
> > these responses if the mid-dialog request was not solely 
> for the purpose of
> > connected identity. If solely for the purpose of connected 
> identity there is
> > no point in repeating it, so I will say "SHOULD NOT take any further
> > action".
> 
> This seems wrong to me.
> 
> I think that the remedy to these is in the verifier. The 
> purpose of the 
> verifier is ultimately to drive an authorization decision. If 
> authorization would succeed in the absence of the identity, then the 
> request should be permitted to continue as if the identity 
> was not present.
> 
> Unfortunately this would seem to require a revision to 4474 
> even though 
> the paint is hardly dry on it.
> 
> If this is done, then there is no need of a mechanism to cause the 
> authentication service *not* to authenticate. If this is *not* done, 
> then that need remains, which will still require a change to 4474.
> 
> 	Paul
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 22 14:31:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQpiz-00080A-GZ; Fri, 22 Sep 2006 14:26:09 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQpix-000805-Lp
	for sip@ietf.org; Fri, 22 Sep 2006 14:26:07 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQpiv-0001Ju-6D
	for sip@ietf.org; Fri, 22 Sep 2006 14:26:07 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 22 Sep 2006 14:26:05 -0400
X-IronPort-AV: i="4.09,204,1157342400"; 
	d="scan'208"; a="103997735:sNHT34843374"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8MIQ4Hk008626; Fri, 22 Sep 2006 14:26:04 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8MIQ4uK004757; 
	Fri, 22 Sep 2006 14:26:04 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Sep 2006 14:26:04 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 22 Sep 2006 14:26:04 -0400
Message-ID: <45142ABB.3000008@cisco.com>
Date: Fri, 22 Sep 2006 14:26:03 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: "Elwell, John" <john.elwell@siemens.com>
References: <50B1CBA96870A34799A506B2313F266709EBC0A3@ntht201e.siemenscomms.co.uk>
In-Reply-To: <50B1CBA96870A34799A506B2313F266709EBC0A3@ntht201e.siemenscomms.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 22 Sep 2006 18:26:04.0110 (UTC)
	FILETIME=[900ECEE0:01C6DE74]
DKIM-Signature: a=rsa-sha1; q=dns; l=7126; t=1158949565; x=1159813565;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20Rejecting=20connected=20identity=20(was=20RE=3A=20draft-ietf-sip
	-connected-id=0A=20entity-01=20comments)
	|To:=22Elwell,=20John=22=20<john.elwell@siemens.com>;
	X=v=3Dcisco.com=3B=20h=3DS4xSfmMGvR5AankN25yZQ3o7tT4=3D;
	b=cuAug5qo4ZnSYVY89MC4DcpIZ0ySHf2EdZhgiSoXVzKb6zS6avanM0WC+WfWAUljjEN4WE0C
	X6Qv8tjCsqP1mHHBesD3WTSX+Hvv0yKS4375tyPOWGjCr0DD6iRW3T5u;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 3fbd9b434023f8abfcb1532abaec7a21
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
Subject: [Sip] Re: Rejecting connected identity (was RE:
 draft-ietf-sip-connected-id entity-01 comments)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

John,

I want to hear what others, especially Jon and Cullen, have to say about 
this.

It is of some concern to me that a call might fail because of some 
problem with the identity mechanism when the same call might have 
succeeded in the absence of any identity.

But possibly the solution to this is policy in the implementation of the 
verifier. What to do in the case of the conditions that lead to these 
errors could be configurable in the verifier: either to generate the 
error or simply to remove the identity info from the message. And the 
policy could conceivably vary based on attributes of the message, such 
as whether it is in-dialog or not.

Does it require a change to 4474 to permit that kind of policy?

It would be annoying if the end user had no control over the insertion 
and verification of identity, and it resulted in calls failing that the 
user would like to permit. But I suppose that is itself a policy 
decision. There are certainly enterprises that want to exert that kind 
of control over what users are permitted to do.

	Paul

Elwell, John wrote:
> Paul,
> 
> I agree with most of your points, and on reflection I think I agree that the
> solution has to be with the verifier.
> 
> I think RFC 4474 is not a problem as far as sending a 428 'Use Identity
> Header' response is concerned, because that is left to policy, so we could
> say in connected-identity that policy should be to not send 428.
> 
> However, 436, 437 and 438 responses are all a problem, because RFC 4474 says
> that they MUST be sent under respective conditions. Interestingly, though,
> there are other failure scenarios that can arise from the procedures of
> section 6 of RFC 4474 for which no normative statement is given on how to
> respond, e.g. invalid Date header field, signer not authoritative for the
> domain.
> 
> So one way to solve the present problem would be for the connected-identity
> draft to modify verifier behaviour in RFC 4474 in the case of mid-dialog
> requests. I guess this would mean that it would update RFC 4474 as well as
> updating RFC 3261. But I don't like this, because it seems to remove some of
> the security properties of RFC 4474.
> 
> Another way would be to accept that 436, 437 and 438 responses will be sent,
> and failure to verify a signature will therefore result in inability to
> process the UPDATE or re-INVITE request, and hence if the UPDATE or
> re-INVITE request was for some other purpose such as session timer refresh
> or modifying the session, that action will fail. Then the call will fail (in
> the case of inability to refresh the session timer) or the session
> modification will fail. I guess this is somewhat analogous to caller ID
> verification failure in an INVITE request - it is impossible to establish a
> call if verification fails. Moreover, the UAC has no ability to rectify the
> situation, since it is at the mercy of a proxy-based Authentication Service
> that puts a rogue Identity header field in every request. In the connected
> identity case, the only difference is that the call is already established
> but is likely to fail if verification fails.
> 
> Of course, if the mid-dialog request is indeed from the wrong source, then
> sending a 436, 437 or 438 response is indeed the correct thing to do, and
> overriding the verification procedures of RFC 4474 would indeed be the wrong
> thing to do. So perhaps we just have to accept that these response codes can
> be received and will lead to failure.
> 
> So, my preferred way forward is simply to recommend not sending a 428 and
> accept the consequences of other responses that the verifier might send.
> 
> John
> 
>> -----Original Message-----
>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
>> Sent: 22 September 2006 15:13
>> To: Elwell, John
>> Cc: Cullen Jennings; SIP
>> Subject: Re: [Sip] RE: draft-ietf-sip-connected-identity-01 comments
>>
>>
>>
>> Elwell, John wrote:
>>>> From: Cullen Jennings [mailto:fluffy@cisco.com] 
>>>> When an Update is sent. Are there any conditions under which 
>>>> it might  
>>>> be rejected. Bad identity for example. I think that might need a  
>>>> little discussion and also what the UA does when it sends 
>> an update  
>>>> with a no identity and it gets rejected.
>>> [JRE] A very good point. We don't want to get to a 
>> situation where it is
>>> impossible to perform a mid-dialog request (e.g., for 
>> purposes such as
>>> session timer refresh or session re-negotiation) just 
>> because  connected
>>> identity fails.
>>> My proposed fix is as follows:
>>> 1. Say that a UAS SHOULD NOT reject a mid-dialog request 
>> with 428 'Use
>>> Identity Header'.
>> I'm not sure about this. At the least I think this one needs 
>> some clear 
>> explanation of the SHOULD NOT - about the conditions when it can be 
>> violated.
>>
>> I see this as somewhat analogous to doing a digest challenge on an 
>> in-dialog request. In some cases it is the right thing to do.
>>
>> A UA that imposes such a requirement will be limited in what 
>> it can do, 
>> but that may still be right in some cases.
>>
>>> 2. Say that an Authentication Service MUST NOT add an 
>> Identity header field
>>> to a mid-dialog request if a previous request on that 
>> dialog has resulted in
>>> 436 'Bad Identity-Info', 437 'Unsupported Certificate' or 
>> 438 'Invalid
>>> Identity Header'.
>> This requirement would force the authentication service to be dialog 
>> stateful, which is not ideal. Better to push the state back into the 
>> sender of the request. This may require a way for the UAC to tell the 
>> authentication service not to act.
>>
>>> 3. Say that a UAC MUST repeat a mid-dialog request that 
>> results in one of
>>> these responses if the mid-dialog request was not solely 
>> for the purpose of
>>> connected identity. If solely for the purpose of connected 
>> identity there is
>>> no point in repeating it, so I will say "SHOULD NOT take any further
>>> action".
>> This seems wrong to me.
>>
>> I think that the remedy to these is in the verifier. The 
>> purpose of the 
>> verifier is ultimately to drive an authorization decision. If 
>> authorization would succeed in the absence of the identity, then the 
>> request should be permitted to continue as if the identity 
>> was not present.
>>
>> Unfortunately this would seem to require a revision to 4474 
>> even though 
>> the paint is hardly dry on it.
>>
>> If this is done, then there is no need of a mechanism to cause the 
>> authentication service *not* to authenticate. If this is *not* done, 
>> then that need remains, which will still require a change to 4474.
>>
>> 	Paul
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 22 22:46:47 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GQxTA-0001j7-JG; Fri, 22 Sep 2006 22:42:20 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GQxT8-0001j2-VI
	for sip@ietf.org; Fri, 22 Sep 2006 22:42:18 -0400
Received: from agnada.com ([69.36.182.244])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GQxT8-0006rN-Dq
	for sip@ietf.org; Fri, 22 Sep 2006 22:42:18 -0400
Received: from [192.168.0.101] (S010600095b9792b5.vc.shawcable.net
	[24.85.243.115]) (authenticated)
	by agnada.com (8.11.6/8.11.6) with ESMTP id k8N2g1T21812;
	Fri, 22 Sep 2006 20:42:01 -0600
Message-ID: <45149EF8.6020800@ntt-at.com>
Date: Fri, 22 Sep 2006 19:42:00 -0700
From: Shida Schubert <shida@ntt-at.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Paul Kyzivat <pkyzivat@cisco.com>
Subject: Re: [Sip] Re: Rejecting connected identity (was RE:
	draft-ietf-sip-connected-id entity-01 comments)
References: <50B1CBA96870A34799A506B2313F266709EBC0A3@ntht201e.siemenscomms.co.uk>
	<45142ABB.3000008@cisco.com>
In-Reply-To: <45142ABB.3000008@cisco.com>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 17e5edc4dfd335965c1d21372171c01c
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>, "Elwell,
	John" <john.elwell@siemens.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
Reply-To: shida@ntt-at.com
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi;

I thought about this a bit, and with connected-identity even 428
seems to be somewhat problematic.

Imagine a scenario where call with SIP-identity+"id-change" tag
gets forked to 2UAs served by different domains. UA1 whose
domain provides Identity service and UA2 whose domain does not
provide identity service. (Both UAs are compliant to connected-identity)

UA2 beats the race and established the call and sends back an UPDATE
without SIP-identity and gets rejected with 428 because its domain does
not provide identity services.

If there was a way to indicate the need of sip-identity in return, we
might be able to avoid this problem as call can be forwarded using this
indication to the domain supporting the identity services but as of now I
don't think there is anything we can do to avoid this. So I am leaning
towards
changing the verifier's behavior a bit more lenient when it's dealing with
mid-dialog identity.

Regards
Shida


Paul Kyzivat wrote:
> John,
>
> I want to hear what others, especially Jon and Cullen, have to say
> about this.
>
> It is of some concern to me that a call might fail because of some
> problem with the identity mechanism when the same call might have
> succeeded in the absence of any identity.
>
> But possibly the solution to this is policy in the implementation of
> the verifier. What to do in the case of the conditions that lead to
> these errors could be configurable in the verifier: either to generate
> the error or simply to remove the identity info from the message. And
> the policy could conceivably vary based on attributes of the message,
> such as whether it is in-dialog or not.
>
> Does it require a change to 4474 to permit that kind of policy?
>
> It would be annoying if the end user had no control over the insertion
> and verification of identity, and it resulted in calls failing that
> the user would like to permit. But I suppose that is itself a policy
> decision. There are certainly enterprises that want to exert that kind
> of control over what users are permitted to do.
>
> Paul
>
> Elwell, John wrote:
>> Paul,
>>
>> I agree with most of your points, and on reflection I think I agree
>> that the
>> solution has to be with the verifier.
>>
>> I think RFC 4474 is not a problem as far as sending a 428 'Use Identity
>> Header' response is concerned, because that is left to policy, so we
>> could
>> say in connected-identity that policy should be to not send 428.
>>
>> However, 436, 437 and 438 responses are all a problem, because RFC
>> 4474 says
>> that they MUST be sent under respective conditions. Interestingly,
>> though,
>> there are other failure scenarios that can arise from the procedures of
>> section 6 of RFC 4474 for which no normative statement is given on
>> how to
>> respond, e.g. invalid Date header field, signer not authoritative for
>> the
>> domain.
>>
>> So one way to solve the present problem would be for the
>> connected-identity
>> draft to modify verifier behaviour in RFC 4474 in the case of mid-dialog
>> requests. I guess this would mean that it would update RFC 4474 as
>> well as
>> updating RFC 3261. But I don't like this, because it seems to remove
>> some of
>> the security properties of RFC 4474.
>>
>> Another way would be to accept that 436, 437 and 438 responses will
>> be sent,
>> and failure to verify a signature will therefore result in inability to
>> process the UPDATE or re-INVITE request, and hence if the UPDATE or
>> re-INVITE request was for some other purpose such as session timer
>> refresh
>> or modifying the session, that action will fail. Then the call will
>> fail (in
>> the case of inability to refresh the session timer) or the session
>> modification will fail. I guess this is somewhat analogous to caller ID
>> verification failure in an INVITE request - it is impossible to
>> establish a
>> call if verification fails. Moreover, the UAC has no ability to
>> rectify the
>> situation, since it is at the mercy of a proxy-based Authentication
>> Service
>> that puts a rogue Identity header field in every request. In the
>> connected
>> identity case, the only difference is that the call is already
>> established
>> but is likely to fail if verification fails.
>>
>> Of course, if the mid-dialog request is indeed from the wrong source,
>> then
>> sending a 436, 437 or 438 response is indeed the correct thing to do,
>> and
>> overriding the verification procedures of RFC 4474 would indeed be
>> the wrong
>> thing to do. So perhaps we just have to accept that these response
>> codes can
>> be received and will lead to failure.
>>
>> So, my preferred way forward is simply to recommend not sending a 428
>> and
>> accept the consequences of other responses that the verifier might send.
>>
>> John
>>
>>> -----Original Message-----
>>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] Sent: 22 September
>>> 2006 15:13
>>> To: Elwell, John
>>> Cc: Cullen Jennings; SIP
>>> Subject: Re: [Sip] RE: draft-ietf-sip-connected-identity-01 comments
>>>
>>>
>>>
>>> Elwell, John wrote:
>>>>> From: Cullen Jennings [mailto:fluffy@cisco.com] When an Update is
>>>>> sent. Are there any conditions under which it might be rejected.
>>>>> Bad identity for example. I think that might need a little
>>>>> discussion and also what the UA does when it sends 
>>> an update
>>>>> with a no identity and it gets rejected.
>>>> [JRE] A very good point. We don't want to get to a 
>>> situation where it is
>>>> impossible to perform a mid-dialog request (e.g., for 
>>> purposes such as
>>>> session timer refresh or session re-negotiation) just 
>>> because connected
>>>> identity fails.
>>>> My proposed fix is as follows:
>>>> 1. Say that a UAS SHOULD NOT reject a mid-dialog request 
>>> with 428 'Use
>>>> Identity Header'.
>>> I'm not sure about this. At the least I think this one needs some
>>> clear explanation of the SHOULD NOT - about the conditions when it
>>> can be violated.
>>>
>>> I see this as somewhat analogous to doing a digest challenge on an
>>> in-dialog request. In some cases it is the right thing to do.
>>>
>>> A UA that imposes such a requirement will be limited in what it can
>>> do, but that may still be right in some cases.
>>>
>>>> 2. Say that an Authentication Service MUST NOT add an 
>>> Identity header field
>>>> to a mid-dialog request if a previous request on that 
>>> dialog has resulted in
>>>> 436 'Bad Identity-Info', 437 'Unsupported Certificate' or 
>>> 438 'Invalid
>>>> Identity Header'.
>>> This requirement would force the authentication service to be dialog
>>> stateful, which is not ideal. Better to push the state back into the
>>> sender of the request. This may require a way for the UAC to tell
>>> the authentication service not to act.
>>>
>>>> 3. Say that a UAC MUST repeat a mid-dialog request that 
>>> results in one of
>>>> these responses if the mid-dialog request was not solely 
>>> for the purpose of
>>>> connected identity. If solely for the purpose of connected 
>>> identity there is
>>>> no point in repeating it, so I will say "SHOULD NOT take any further
>>>> action".
>>> This seems wrong to me.
>>>
>>> I think that the remedy to these is in the verifier. The purpose of
>>> the verifier is ultimately to drive an authorization decision. If
>>> authorization would succeed in the absence of the identity, then the
>>> request should be permitted to continue as if the identity was not
>>> present.
>>>
>>> Unfortunately this would seem to require a revision to 4474 even
>>> though the paint is hardly dry on it.
>>>
>>> If this is done, then there is no need of a mechanism to cause the
>>> authentication service *not* to authenticate. If this is *not* done,
>>> then that need remains, which will still require a change to 4474.
>>>
>>> Paul
>>>
>>> _______________________________________________
>>> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
>>
>
> _______________________________________________
> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>
>


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 23 10:11:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GR88U-0007mX-Td; Sat, 23 Sep 2006 10:05:42 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GR88T-0007mR-7y
	for sip@ietf.org; Sat, 23 Sep 2006 10:05:41 -0400
Received: from [2001:6b0:1:1300:20e:7fff:fef0:f8bb] (helo=mx3.kth.se)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GR88R-0005bs-P6
	for sip@ietf.org; Sat, 23 Sep 2006 10:05:41 -0400
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx3.kth.se (Postfix) with ESMTP id 4903514099B
	for <sip@ietf.org>; Sat, 23 Sep 2006 16:05:22 +0200 (CEST)
Received: from mx3.kth.se ([127.0.0.1])
	by localhost (mx3.kth.se [127.0.0.1]) (amavisd-new,
	port 10024) with LMTP
	id 27760-02-48; Sat, 23 Sep 2006 16:05:21 +0200 (CEST)
Received: from webmail.sys.kth.se (mensageiro.sys.kth.se [130.237.48.58])
	by mx3.kth.se (Postfix) with ESMTP id 5BE37140937;
	Sat, 23 Sep 2006 16:05:21 +0200 (CEST)
Received: from 83.227.173.153 (SquirrelMail authenticated user eehrlund)
	by webmail.sys.kth.se with HTTP;
	Sat, 23 Sep 2006 16:05:21 +0200 (CEST)
Message-ID: <32800.83.227.173.153.1159020321.squirrel@webmail.sys.kth.se>
Date: Sat, 23 Sep 2006 16:05:21 +0200 (CEST)
From: "Erik Ehrlund" <eehrlund@kth.se>
To: sip@ietf.org
User-Agent: SquirrelMail/1.4.5
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
X-Priority: 3 (Normal)
Importance: Normal
References: 
In-Reply-To: 
X-Virus-Scanned: by amavisd-new at kth.se
Content-Transfer-Encoding: quoted-printable
X-Spam-Score: -2.8 (--)
X-Scan-Signature: 50a516d93fd399dc60588708fd9a3002
Cc: vatn@kth.se, eliasson@it.kth.se
Subject: [Sip] draft-ietf-sip-certs-01, end-to-end securiy issue?
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hello,

I have a question about how the routing of messages between the client an=
d
server is done when the client downloads its credentials in
draft-ietf-sip-certs-01.

In Section "7.15.  Behavior of a Proxy Server" its said that the behavior
is the same as in Section "6.13" which says " There are no additional
requirements on a SIP Proxy, other than to transparently forward the
SUBSCRIBE and NOTIFY requests as required in SIP...."

My question comes from the fact that it's said earlier that "Bob's UA
(Bob2) does a TLS [11] handshake with the credential server to
authenticate that the UA is connected to the correct credential
server...." and later in Security Considerations "First it forms a TLS
connection to the Server, which provides integrity and privacy protection
and also authenticates the server to Bob's UA."

How can regular SIP routing with proxies be done with end to end transpor=
t
layer security? ( the proxies between the client and server won't be able
to read the SIP headers )

As I understand it end-to-end security between the SIP UA and Credential
Server is not easily accomplished when SIP Proxy routing is used. Thus, I
see two approaches, but none of them seems satisfactory:
* Require that there can be no SIP proxy between the SIP UA and the
  SIP proxy co-located with the Credential Server. This approach seems le=
ss
  attractive, since prohibiting SIP proxying for a specific SIP message
  can lead to problems in some environments.
* Allow the SIP proxy to route the messages to a backend Credential
  Server. Then the TLS session will be established between the SIP UA and
  the first SIP proxy, and some other security mechanism will be used to
  protect the communication between the SIP proxy and the Credential Serv=
er.
  The communication between the SIP UA and the Credential Server will be
  readable (clear-text or protected by weak password) at the SIP Proxy.
  Thus, we will not have any end-to-end protection of the data (private
  key, certificates) that is downloaded from the Credential Server. In ca=
ses
  when the user not trust the SIP proxy enough, this approach is not
  satisfying.


Best Regards
Erik Ehrlund


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sun Sep 24 05:00:25 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRPm2-0002Ak-Fu; Sun, 24 Sep 2006 04:55:42 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRPm1-0002Af-Db
	for sip@ietf.org; Sun, 24 Sep 2006 04:55:41 -0400
Received: from mailgate.siemenscomms.co.uk ([195.171.110.225]
	helo=bemg01.siemenscomms.co.uk)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRPly-0001Ej-QP
	for sip@ietf.org; Sun, 24 Sep 2006 04:55:41 -0400
Received: from CONVERSION-DAEMON.siemenscomms.co.uk by siemenscomms.co.uk
	(PMDF V6.0-24 #40642) id <0J6300D01A4N0Q@siemenscomms.co.uk> for
	sip@ietf.org; Sun, 24 Sep 2006 09:55:35 +0100 (BST)
Received: from ntht207e.uksgcs.siemenscomms.co.uk ([137.223.247.82])
	by siemenscomms.co.uk (PMDF V6.0-24 #40642)
	with ESMTP id <0J6300B39A4N8S@siemenscomms.co.uk>; Sun,
	24 Sep 2006 09:55:35 +0100 (BST)
Received: by ntht207e.uksgcs.siemenscomms.co.uk with Internet Mail Service
	(5.5.2657.72)	id <TCV7W6M5>; Sun, 24 Sep 2006 09:55:20 +0100
Content-return: allowed
Date: Sun, 24 Sep 2006 09:55:19 +0100
From: "Elwell, John" <john.elwell@siemens.com>
Subject: RE: [Sip] Re: Rejecting connected identity (was RE: draft-ietf-si
	p-connected-id entity-01 comments)
To: shida@ntt-at.com, Paul Kyzivat <pkyzivat@cisco.com>
Message-id: <50B1CBA96870A34799A506B2313F266709EBC128@ntht201e.siemenscomms.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 681e62a2ce9b0804b459fe780d892beb
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Shida,

When I said 428 was not a problem, what I meant was that RFC 4474 leaves it
as a matter of policy whether to send 428. So in connected-identity we could
recommend use of a policy that avoids sending 428 to mid-dialog requests.
This would not be a problem in that it would not violate RFC 4474.

So your scenario would work if policy at the caller's UA is not to send 428
to a mid-dialog request that does not contain Identity. 

John

> -----Original Message-----
> From: Shida Schubert [mailto:shida@ntt-at.com] 
> Sent: 23 September 2006 03:42
> To: Paul Kyzivat
> Cc: Elwell, John; Cullen Jennings; SIP
> Subject: Re: [Sip] Re: Rejecting connected identity (was RE: 
> draft-ietf-sip-connected-id entity-01 comments)
> 
> 
> Hi;
> 
> I thought about this a bit, and with connected-identity even 428
> seems to be somewhat problematic.
> 
> Imagine a scenario where call with SIP-identity+"id-change" tag
> gets forked to 2UAs served by different domains. UA1 whose
> domain provides Identity service and UA2 whose domain does not
> provide identity service. (Both UAs are compliant to 
> connected-identity)
> 
> UA2 beats the race and established the call and sends back an UPDATE
> without SIP-identity and gets rejected with 428 because its 
> domain does
> not provide identity services.
> 
> If there was a way to indicate the need of sip-identity in return, we
> might be able to avoid this problem as call can be forwarded 
> using this
> indication to the domain supporting the identity services but 
> as of now I
> don't think there is anything we can do to avoid this. So I am leaning
> towards
> changing the verifier's behavior a bit more lenient when it's 
> dealing with
> mid-dialog identity.
> 
> Regards
> Shida
> 
> 
> Paul Kyzivat wrote:
> > John,
> >
> > I want to hear what others, especially Jon and Cullen, have to say
> > about this.
> >
> > It is of some concern to me that a call might fail because of some
> > problem with the identity mechanism when the same call might have
> > succeeded in the absence of any identity.
> >
> > But possibly the solution to this is policy in the implementation of
> > the verifier. What to do in the case of the conditions that lead to
> > these errors could be configurable in the verifier: either 
> to generate
> > the error or simply to remove the identity info from the 
> message. And
> > the policy could conceivably vary based on attributes of 
> the message,
> > such as whether it is in-dialog or not.
> >
> > Does it require a change to 4474 to permit that kind of policy?
> >
> > It would be annoying if the end user had no control over 
> the insertion
> > and verification of identity, and it resulted in calls failing that
> > the user would like to permit. But I suppose that is itself a policy
> > decision. There are certainly enterprises that want to 
> exert that kind
> > of control over what users are permitted to do.
> >
> > Paul
> >
> > Elwell, John wrote:
> >> Paul,
> >>
> >> I agree with most of your points, and on reflection I think I agree
> >> that the
> >> solution has to be with the verifier.
> >>
> >> I think RFC 4474 is not a problem as far as sending a 428 
> 'Use Identity
> >> Header' response is concerned, because that is left to 
> policy, so we
> >> could
> >> say in connected-identity that policy should be to not send 428.
> >>
> >> However, 436, 437 and 438 responses are all a problem, because RFC
> >> 4474 says
> >> that they MUST be sent under respective conditions. Interestingly,
> >> though,
> >> there are other failure scenarios that can arise from the 
> procedures of
> >> section 6 of RFC 4474 for which no normative statement is given on
> >> how to
> >> respond, e.g. invalid Date header field, signer not 
> authoritative for
> >> the
> >> domain.
> >>
> >> So one way to solve the present problem would be for the
> >> connected-identity
> >> draft to modify verifier behaviour in RFC 4474 in the case 
> of mid-dialog
> >> requests. I guess this would mean that it would update RFC 4474 as
> >> well as
> >> updating RFC 3261. But I don't like this, because it seems 
> to remove
> >> some of
> >> the security properties of RFC 4474.
> >>
> >> Another way would be to accept that 436, 437 and 438 responses will
> >> be sent,
> >> and failure to verify a signature will therefore result in 
> inability to
> >> process the UPDATE or re-INVITE request, and hence if the UPDATE or
> >> re-INVITE request was for some other purpose such as session timer
> >> refresh
> >> or modifying the session, that action will fail. Then the call will
> >> fail (in
> >> the case of inability to refresh the session timer) or the session
> >> modification will fail. I guess this is somewhat analogous 
> to caller ID
> >> verification failure in an INVITE request - it is impossible to
> >> establish a
> >> call if verification fails. Moreover, the UAC has no ability to
> >> rectify the
> >> situation, since it is at the mercy of a proxy-based Authentication
> >> Service
> >> that puts a rogue Identity header field in every request. In the
> >> connected
> >> identity case, the only difference is that the call is already
> >> established
> >> but is likely to fail if verification fails.
> >>
> >> Of course, if the mid-dialog request is indeed from the 
> wrong source,
> >> then
> >> sending a 436, 437 or 438 response is indeed the correct 
> thing to do,
> >> and
> >> overriding the verification procedures of RFC 4474 would indeed be
> >> the wrong
> >> thing to do. So perhaps we just have to accept that these response
> >> codes can
> >> be received and will lead to failure.
> >>
> >> So, my preferred way forward is simply to recommend not 
> sending a 428
> >> and
> >> accept the consequences of other responses that the 
> verifier might send.
> >>
> >> John
> >>
> >>> -----Original Message-----
> >>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] Sent: 22 September
> >>> 2006 15:13
> >>> To: Elwell, John
> >>> Cc: Cullen Jennings; SIP
> >>> Subject: Re: [Sip] RE: 
> draft-ietf-sip-connected-identity-01 comments
> >>>
> >>>
> >>>
> >>> Elwell, John wrote:
> >>>>> From: Cullen Jennings [mailto:fluffy@cisco.com] When an 
> Update is
> >>>>> sent. Are there any conditions under which it might be rejected.
> >>>>> Bad identity for example. I think that might need a little
> >>>>> discussion and also what the UA does when it sends 
> >>> an update
> >>>>> with a no identity and it gets rejected.
> >>>> [JRE] A very good point. We don't want to get to a 
> >>> situation where it is
> >>>> impossible to perform a mid-dialog request (e.g., for 
> >>> purposes such as
> >>>> session timer refresh or session re-negotiation) just 
> >>> because connected
> >>>> identity fails.
> >>>> My proposed fix is as follows:
> >>>> 1. Say that a UAS SHOULD NOT reject a mid-dialog request 
> >>> with 428 'Use
> >>>> Identity Header'.
> >>> I'm not sure about this. At the least I think this one needs some
> >>> clear explanation of the SHOULD NOT - about the conditions when it
> >>> can be violated.
> >>>
> >>> I see this as somewhat analogous to doing a digest challenge on an
> >>> in-dialog request. In some cases it is the right thing to do.
> >>>
> >>> A UA that imposes such a requirement will be limited in 
> what it can
> >>> do, but that may still be right in some cases.
> >>>
> >>>> 2. Say that an Authentication Service MUST NOT add an 
> >>> Identity header field
> >>>> to a mid-dialog request if a previous request on that 
> >>> dialog has resulted in
> >>>> 436 'Bad Identity-Info', 437 'Unsupported Certificate' or 
> >>> 438 'Invalid
> >>>> Identity Header'.
> >>> This requirement would force the authentication service 
> to be dialog
> >>> stateful, which is not ideal. Better to push the state 
> back into the
> >>> sender of the request. This may require a way for the UAC to tell
> >>> the authentication service not to act.
> >>>
> >>>> 3. Say that a UAC MUST repeat a mid-dialog request that 
> >>> results in one of
> >>>> these responses if the mid-dialog request was not solely 
> >>> for the purpose of
> >>>> connected identity. If solely for the purpose of connected 
> >>> identity there is
> >>>> no point in repeating it, so I will say "SHOULD NOT take 
> any further
> >>>> action".
> >>> This seems wrong to me.
> >>>
> >>> I think that the remedy to these is in the verifier. The 
> purpose of
> >>> the verifier is ultimately to drive an authorization decision. If
> >>> authorization would succeed in the absence of the 
> identity, then the
> >>> request should be permitted to continue as if the identity was not
> >>> present.
> >>>
> >>> Unfortunately this would seem to require a revision to 4474 even
> >>> though the paint is hardly dry on it.
> >>>
> >>> If this is done, then there is no need of a mechanism to cause the
> >>> authentication service *not* to authenticate. If this is 
> *not* done,
> >>> then that need remains, which will still require a change to 4474.
> >>>
> >>> Paul
> >>>
> >>> _______________________________________________
> >>> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
> >>> This list is for NEW development of the core SIP Protocol
> >>> Use sip-implementors@cs.columbia.edu for questions on current sip
> >>> Use sipping@ietf.org for new developments on the 
> application of sip
> >>>
> >>
> >
> > _______________________________________________
> > Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> >
> >
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sun Sep 24 11:19:58 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRVh2-0006Mk-Sz; Sun, 24 Sep 2006 11:14:56 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRVh0-0006L4-NY
	for sip@ietf.org; Sun, 24 Sep 2006 11:14:54 -0400
Received: from ihemail3.lucent.com ([135.245.0.37])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRVgz-0000Y4-Fm
	for sip@ietf.org; Sun, 24 Sep 2006 11:14:54 -0400
Received: from ihmail.ih.lucent.com (h135-1-218-70.lucent.com [135.1.218.70])
	by ihemail3.lucent.com (8.13.6/IER-o) with ESMTP id k8OFEg2e015886; 
	Sun, 24 Sep 2006 10:14:42 -0500 (CDT)
Received: from [135.244.1.48] (vkg.lra.lucent.com [135.244.1.48]) by
	ihmail.ih.lucent.com (8.11.7p1+Sun/EMS-1.5 sol2)
	id k8OFEfU27201; Sun, 24 Sep 2006 10:14:42 -0500 (CDT)
Message-ID: <4516A0E1.4050305@lucent.com>
Date: Sun, 24 Sep 2006 10:14:41 -0500
From: "Vijay K. Gurbani" <vkg@lucent.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: Tina TSOU <tena@huawei.com>
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs
References: <A713E425-0CA6-4151-9C0A-B1C213FA71C8@softarmor.com>	<44932C00.9010705@lucent.com>	<00e801c6dc7a$5c004440$6c95460a@china.huawei.com>	<45131B4F.3020409@lucent.com>
	<018a01c6de23$3e4e7a70$6c95460a@china.huawei.com>
In-Reply-To: <018a01c6de23$3e4e7a70$6c95460a@china.huawei.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9182cfff02fae4f1b6e9349e01d62f32
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Tina TSOU wrote:
> [Tina3: A.  This solution is not backward compatible with many
> implementation which only compare the DNS label, either the URI for
> 3263 resolution like "<sips:downtown.example.com;lr>" or
> "sips:user@example.com".

Backwards compatibility to what?  At the current time, there
is a fair amount of work in the WG to provide better guidelines
for both the SIPS URI as well as certificate use in SIP.

> B. What's the advantage in concept-wise or implementing by
> introducing this URI label? Even a host may have many DNS aliases,
> but it will not be changed frequently. ]

A host may have many DNS aliases, yes.  But if it is inserting
its URI in a R-R header, it can pick the alias whose canonical
name appears in the certificate.

Thanks.

- vijay
-- 
Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
Bell Laboratories, Lucent Technologies, Inc.
2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sun Sep 24 15:52:29 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRZzJ-00066p-Ri; Sun, 24 Sep 2006 15:50:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRZzG-00060T-54; Sun, 24 Sep 2006 15:50:02 -0400
Received: from ns1.neustar.com ([2001:503:c779:1a::9c9a:108a])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GRZzF-0007DA-Ti; Sun, 24 Sep 2006 15:50:02 -0400
Received: from stiedprstage1.ietf.org (stiedprstage1.va.neustar.com
	[10.31.47.10]) by ns1.neustar.com (Postfix) with ESMTP id D937D26E1B;
	Sun, 24 Sep 2006 19:50:01 +0000 (GMT)
Received: from ietf by stiedprstage1.ietf.org with local (Exim 4.43)
	id 1GRZzF-0007zN-OV; Sun, 24 Sep 2006 15:50:01 -0400
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
To: i-d-announce@ietf.org
From: Internet-Drafts@ietf.org
Message-Id: <E1GRZzF-0007zN-OV@stiedprstage1.ietf.org>
Date: Sun, 24 Sep 2006 15:50:01 -0400
X-Spam-Score: -2.5 (--)
X-Scan-Signature: 73734d43604d52d23b3eba644a169745
Cc: sip@ietf.org
Subject: [Sip] I-D ACTION:draft-ietf-sip-uri-list-message-00.txt 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts 
directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.

	Title		: Multiple-Recipient MESSAGE Requests in the Session Initiation Protocol (SIP)
	Author(s)	: M. Garcia-Martin, G. Camarillo
	Filename	: draft-ietf-sip-uri-list-message-00.txt
	Pages		: 18
	Date		: 2006-9-24
	
This document specifies a mechanism that allows a SIP User Agent
Client (UAC) to request a SIP URI-list (Uniform Resource Identifier
list) service to send a SIP MESSAGE request to a set of destinations.
The client sends a SIP MESSAGE request that includes the payload
along with the URI-list to the MESSAGE URI-list service, which sends
a similar MESSAGE request to each of the URIs included in the list.


A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-uri-list-message-00.txt

To remove yourself from the I-D Announcement list, send a message to 
i-d-announce-request@ietf.org with the word unsubscribe in the body of 
the message. 
You can also visit https://www1.ietf.org/mailman/listinfo/I-D-announce 
to change your subscription settings.

Internet-Drafts are also available by anonymous FTP. Login with the 
username "anonymous" and a password of your e-mail address. After 
logging in, type "cd internet-drafts" and then 
"get draft-ietf-sip-uri-list-message-00.txt".

A list of Internet-Drafts directories can be found in
http://www.ietf.org/shadow.html 
or ftp://ftp.ietf.org/ietf/1shadow-sites.txt

Internet-Drafts can also be obtained by e-mail.

Send a message to:
	mailserv@ietf.org.
In the body type:
	"FILE /internet-drafts/draft-ietf-sip-uri-list-message-00.txt".
	
NOTE:	The mail server at ietf.org can return the document in
	MIME-encoded form by using the "mpack" utility.  To use this
	feature, insert the command "ENCODING mime" before the "FILE"
	command.  To decode the response(s), you will need "munpack" or
	a MIME-compliant mail reader.  Different MIME-compliant mail readers
	exhibit different behavior, especially when dealing with
	"multipart" MIME messages (i.e. documents which have been split
	up into multiple messages), so check your local documentation on
	how to manipulate these messages.

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Multipart/Alternative; Boundary="OtherAccess"

--OtherAccess
Content-Type: Message/External-body; access-type="mail-server";
	server="mailserv@ietf.org"

Content-Type: text/plain
Content-ID: <2006-9-24105150.I-D@ietf.org>

ENCODING mime
FILE /internet-drafts/draft-ietf-sip-uri-list-message-00.txt

--OtherAccess
Content-Type: Message/External-body;
	name="draft-ietf-sip-uri-list-message-00.txt";
	site="ftp.ietf.org"; access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2006-9-24105150.I-D@ietf.org>


--OtherAccess--

--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--



From sip-bounces@ietf.org Sun Sep 24 15:52:29 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRZzZ-0006E3-87; Sun, 24 Sep 2006 15:50:21 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRZzI-00062p-65; Sun, 24 Sep 2006 15:50:04 -0400
Received: from ns0.neustar.com ([156.154.16.158])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GRZzF-0007D9-Ru; Sun, 24 Sep 2006 15:50:04 -0400
Received: from stiedprstage1.ietf.org (stiedprstage1.va.neustar.com
	[10.31.47.10]) by ns0.neustar.com (Postfix) with ESMTP id CCF0D32892;
	Sun, 24 Sep 2006 19:50:01 +0000 (GMT)
Received: from ietf by stiedprstage1.ietf.org with local (Exim 4.43)
	id 1GRZzF-0007zH-N9; Sun, 24 Sep 2006 15:50:01 -0400
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
To: i-d-announce@ietf.org
From: Internet-Drafts@ietf.org
Message-Id: <E1GRZzF-0007zH-N9@stiedprstage1.ietf.org>
Date: Sun, 24 Sep 2006 15:50:01 -0400
X-Spam-Score: -2.5 (--)
X-Scan-Signature: 73734d43604d52d23b3eba644a169745
Cc: sip@ietf.org
Subject: [Sip] I-D ACTION:draft-ietf-sip-uri-list-subscribe-00.txt 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts 
directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.

	Title		: Subscriptions to Request-Contained Resource Lists in the Session Initiation Protocol (SIP)
	Author(s)	: G. Camarillo, et al.
	Filename	: draft-ietf-sip-uri-list-subscribe-00.txt
	Pages		: 10
	Date		: 2006-9-24
	
This document specifies a way to create subscription to a list of
resources in SIP.  This is achieved by including the list of
resources in the body of a SUBSCRIBE.  Instead of having a subscriber
send a SUBSCRIBE for each resource individually, the subscriber
defines the resource list, subscribes to it, and gets notifications
about changes in the resources' state using a single SUBSCRIBE
dialog.


A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-uri-list-subscribe-00.txt

To remove yourself from the I-D Announcement list, send a message to 
i-d-announce-request@ietf.org with the word unsubscribe in the body of 
the message. 
You can also visit https://www1.ietf.org/mailman/listinfo/I-D-announce 
to change your subscription settings.

Internet-Drafts are also available by anonymous FTP. Login with the 
username "anonymous" and a password of your e-mail address. After 
logging in, type "cd internet-drafts" and then 
"get draft-ietf-sip-uri-list-subscribe-00.txt".

A list of Internet-Drafts directories can be found in
http://www.ietf.org/shadow.html 
or ftp://ftp.ietf.org/ietf/1shadow-sites.txt

Internet-Drafts can also be obtained by e-mail.

Send a message to:
	mailserv@ietf.org.
In the body type:
	"FILE /internet-drafts/draft-ietf-sip-uri-list-subscribe-00.txt".
	
NOTE:	The mail server at ietf.org can return the document in
	MIME-encoded form by using the "mpack" utility.  To use this
	feature, insert the command "ENCODING mime" before the "FILE"
	command.  To decode the response(s), you will need "munpack" or
	a MIME-compliant mail reader.  Different MIME-compliant mail readers
	exhibit different behavior, especially when dealing with
	"multipart" MIME messages (i.e. documents which have been split
	up into multiple messages), so check your local documentation on
	how to manipulate these messages.

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Multipart/Alternative; Boundary="OtherAccess"

--OtherAccess
Content-Type: Message/External-body; access-type="mail-server";
	server="mailserv@ietf.org"

Content-Type: text/plain
Content-ID: <2006-9-24104719.I-D@ietf.org>

ENCODING mime
FILE /internet-drafts/draft-ietf-sip-uri-list-subscribe-00.txt

--OtherAccess
Content-Type: Message/External-body;
	name="draft-ietf-sip-uri-list-subscribe-00.txt";
	site="ftp.ietf.org"; access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2006-9-24104719.I-D@ietf.org>


--OtherAccess--

--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--






From sip-bounces@ietf.org Sun Sep 24 15:52:30 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRZzv-0006OS-QH; Sun, 24 Sep 2006 15:50:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRZzo-0006GX-Ol; Sun, 24 Sep 2006 15:50:36 -0400
Received: from stsc1260-eth-s1-s1p1-vip.va.neustar.com ([156.154.16.129]
	helo=chiedprmail1.ietf.org)
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GRZzo-0007Eo-M3; Sun, 24 Sep 2006 15:50:36 -0400
Received: from ns3.neustar.com ([156.154.24.138])
	by chiedprmail1.ietf.org with esmtp (Exim 4.43)
	id 1GRZzk-0001Tj-BD; Sun, 24 Sep 2006 15:50:36 -0400
Received: from stiedprstage1.ietf.org (stiedprstage1.va.neustar.com
	[10.31.47.10]) by ns3.neustar.com (Postfix) with ESMTP id 0BAFB17596;
	Sun, 24 Sep 2006 19:50:02 +0000 (GMT)
Received: from ietf by stiedprstage1.ietf.org with local (Exim 4.43)
	id 1GRZzF-0007z2-Jl; Sun, 24 Sep 2006 15:50:01 -0400
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
To: i-d-announce@ietf.org
From: Internet-Drafts@ietf.org
Message-Id: <E1GRZzF-0007z2-Jl@stiedprstage1.ietf.org>
Date: Sun, 24 Sep 2006 15:50:01 -0400
X-Spam-Score: -5.9 (-----)
X-Scan-Signature: 10d3e4e3c32e363f129e380e644649be
Cc: sip@ietf.org
Subject: [Sip] I-D ACTION:draft-ietf-sip-consent-framework-00.txt 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts 
directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.

	Title		: A Framework for Consent-Based Communications in the Session Initiation Protocol (SIP)
	Author(s)	: J. Rosenberg, et al.
	Filename	: draft-ietf-sip-consent-framework-00.txt
	Pages		: 25
	Date		: 2006-9-24
	
   The Session Initiation Protocol (SIP) supports communications across
   many media types, including real-time audio, video, text, instant
   messaging, and presence.  In its current form, it allows session
   invitations, instant messages, and other requests to be delivered
   from one party to another without requiring explicit consent of the
   recipient.  Without such consent, it is possible for SIP to be used
   for malicious purposes, including amplification, and DoS (Denial of
   Service) attacks.  This document identifies a framework for consent-
   based communications in SIP.

A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-consent-framework-00.txt

To remove yourself from the I-D Announcement list, send a message to 
i-d-announce-request@ietf.org with the word unsubscribe in the body of 
the message. 
You can also visit https://www1.ietf.org/mailman/listinfo/I-D-announce 
to change your subscription settings.

Internet-Drafts are also available by anonymous FTP. Login with the 
username "anonymous" and a password of your e-mail address. After 
logging in, type "cd internet-drafts" and then 
"get draft-ietf-sip-consent-framework-00.txt".

A list of Internet-Drafts directories can be found in
http://www.ietf.org/shadow.html 
or ftp://ftp.ietf.org/ietf/1shadow-sites.txt

Internet-Drafts can also be obtained by e-mail.

Send a message to:
	mailserv@ietf.org.
In the body type:
	"FILE /internet-drafts/draft-ietf-sip-consent-framework-00.txt".
	
NOTE:	The mail server at ietf.org can return the document in
	MIME-encoded form by using the "mpack" utility.  To use this
	feature, insert the command "ENCODING mime" before the "FILE"
	command.  To decode the response(s), you will need "munpack" or
	a MIME-compliant mail reader.  Different MIME-compliant mail readers
	exhibit different behavior, especially when dealing with
	"multipart" MIME messages (i.e. documents which have been split
	up into multiple messages), so check your local documentation on
	how to manipulate these messages.

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Multipart/Alternative; Boundary="OtherAccess"

--OtherAccess
Content-Type: Message/External-body; access-type="mail-server";
	server="mailserv@ietf.org"

Content-Type: text/plain
Content-ID: <2006-9-24103249.I-D@ietf.org>

ENCODING mime
FILE /internet-drafts/draft-ietf-sip-consent-framework-00.txt

--OtherAccess
Content-Type: Message/External-body;
	name="draft-ietf-sip-consent-framework-00.txt";
	site="ftp.ietf.org"; access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2006-9-24103249.I-D@ietf.org>


--OtherAccess--

--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--




From sip-bounces@ietf.org Sun Sep 24 15:52:35 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRZzY-0006Dw-I1; Sun, 24 Sep 2006 15:50:20 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRZzI-00062y-AO; Sun, 24 Sep 2006 15:50:04 -0400
Received: from ns0.neustar.com ([156.154.16.158])
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GRZzG-0007DB-13; Sun, 24 Sep 2006 15:50:04 -0400
Received: from stiedprstage1.ietf.org (stiedprstage1.va.neustar.com
	[10.31.47.10]) by ns0.neustar.com (Postfix) with ESMTP id 013313288E;
	Sun, 24 Sep 2006 19:50:02 +0000 (GMT)
Received: from ietf by stiedprstage1.ietf.org with local (Exim 4.43)
	id 1GRZzF-0007zZ-Rj; Sun, 24 Sep 2006 15:50:01 -0400
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
To: i-d-announce@ietf.org
From: Internet-Drafts@ietf.org
Message-Id: <E1GRZzF-0007zZ-Rj@stiedprstage1.ietf.org>
Date: Sun, 24 Sep 2006 15:50:01 -0400
X-Spam-Score: -2.5 (--)
X-Scan-Signature: 3002fc2e661cd7f114cb6bae92fe88f1
Cc: sip@ietf.org
Subject: [Sip] I-D ACTION:draft-ietf-sip-uri-list-conferencing-00.txt 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts 
directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.

	Title		: Conference Establishment Using Request-Contained Lists in the Session Initiation Protocol (SIP)
	Author(s)	: G. Camarillo, A. Johnston
	Filename	: draft-ietf-sip-uri-list-conferencing-00.txt
	Pages		: 15
	Date		: 2006-9-24
	
This document describes how to create a conference using SIP URI-list
services.  In particular, it describes a mechanism that allows a
client to provide a conference server with the initial list of
participants using an INVITE-contained URI-list.


A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-uri-list-conferencing-00.txt

To remove yourself from the I-D Announcement list, send a message to 
i-d-announce-request@ietf.org with the word unsubscribe in the body of 
the message. 
You can also visit https://www1.ietf.org/mailman/listinfo/I-D-announce 
to change your subscription settings.

Internet-Drafts are also available by anonymous FTP. Login with the 
username "anonymous" and a password of your e-mail address. After 
logging in, type "cd internet-drafts" and then 
"get draft-ietf-sip-uri-list-conferencing-00.txt".

A list of Internet-Drafts directories can be found in
http://www.ietf.org/shadow.html 
or ftp://ftp.ietf.org/ietf/1shadow-sites.txt

Internet-Drafts can also be obtained by e-mail.

Send a message to:
	mailserv@ietf.org.
In the body type:
	"FILE /internet-drafts/draft-ietf-sip-uri-list-conferencing-00.txt".
	
NOTE:	The mail server at ietf.org can return the document in
	MIME-encoded form by using the "mpack" utility.  To use this
	feature, insert the command "ENCODING mime" before the "FILE"
	command.  To decode the response(s), you will need "munpack" or
	a MIME-compliant mail reader.  Different MIME-compliant mail readers
	exhibit different behavior, especially when dealing with
	"multipart" MIME messages (i.e. documents which have been split
	up into multiple messages), so check your local documentation on
	how to manipulate these messages.

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Multipart/Alternative; Boundary="OtherAccess"

--OtherAccess
Content-Type: Message/External-body; access-type="mail-server";
	server="mailserv@ietf.org"

Content-Type: text/plain
Content-ID: <2006-9-24110350.I-D@ietf.org>

ENCODING mime
FILE /internet-drafts/draft-ietf-sip-uri-list-conferencing-00.txt

--OtherAccess
Content-Type: Message/External-body;
	name="draft-ietf-sip-uri-list-conferencing-00.txt";
	site="ftp.ietf.org"; access-type="anon-ftp";
	directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2006-9-24110350.I-D@ietf.org>


--OtherAccess--

--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--





From sip-bounces@ietf.org Sun Sep 24 15:52:47 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRa0F-0007OW-Mn; Sun, 24 Sep 2006 15:51:03 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRZzs-0006Lg-Kh; Sun, 24 Sep 2006 15:50:40 -0400
Received: from stsc1260-eth-s1-s1p1-vip.va.neustar.com ([156.154.16.129]
	helo=chiedprmail1.ietf.org)
	by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GRZzs-0007FR-IQ; Sun, 24 Sep 2006 15:50:40 -0400
Received: from ns3.neustar.com ([156.154.24.138])
	by chiedprmail1.ietf.org with esmtp (Exim 4.43)
	id 1GRZzk-0001Tn-Il; Sun, 24 Sep 2006 15:50:40 -0400
Received: from stiedprstage1.ietf.org (stiedprstage1.va.neustar.com
	[10.31.47.10]) by ns3.neustar.com (Postfix) with ESMTP id 45F5F17599;
	Sun, 24 Sep 2006 19:50:02 +0000 (GMT)
Received: from ietf by stiedprstage1.ietf.org with local (Exim 4.43)
	id 1GRZzF-0007zT-Ps; Sun, 24 Sep 2006 15:50:01 -0400
Content-Type: Multipart/Mixed; Boundary="NextPart"
Mime-Version: 1.0
To: i-d-announce@ietf.org
From: Internet-Drafts@ietf.org
Message-Id: <E1GRZzF-0007zT-Ps@stiedprstage1.ietf.org>
Date: Sun, 24 Sep 2006 15:50:01 -0400
X-Spam-Score: -4.9 (----)
X-Scan-Signature: c3a18ef96977fc9bcc21a621cbf1174b
Cc: sip@ietf.org
Subject: [Sip] I-D ACTION:draft-ietf-sip-multiple-refer-00.txt 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

--NextPart

A New Internet-Draft is available from the on-line Internet-Drafts 
directories.
This draft is a work item of the Session Initiation Protocol Working Group of the IETF.

	Title		: Refering to Multiple Resources in the Session Initiation Protocol (SIP)
	Author(s)	: G. Camarillo, et al.
	Filename	: draft-ietf-sip-multiple-refer-00.txt
	Pages		: 14
	Date		: 2006-9-24
	
This document defines extensions to the SIP REFER method so that this
method can be used to refer servers to multiple resources.  These
extensions include the use of pointers to Uniform Resource Identifier
(URI)-lists in the Refer-To header field and the ""multiple-refer"" SIP
option-tag.



A URL for this Internet-Draft is:
http://www.ietf.org/internet-drafts/draft-ietf-sip-multiple-refer-00.txt

To remove yourself from the I-D Announcement list, send a message to 
i-d-announce-request@ietf.org with the word unsubscribe in the body of 
the message. 
You can also visit https://www1.ietf.org/mailman/listinfo/I-D-announce 
to change your subscription settings.

Internet-Drafts are also available by anonymous FTP. Login with the 
username "anonymous" and a password of your e-mail address. After 
logging in, type "cd internet-drafts" and then 
"get draft-ietf-sip-multiple-refer-00.txt".

A list of Internet-Drafts directories can be found in
http://www.ietf.org/shadow.html 
or ftp://ftp.ietf.org/ietf/1shadow-sites.txt

Internet-Drafts can also be obtained by e-mail.

Send a message to:
	mailserv@ietf.org.
In the body type:
	"FILE /internet-drafts/draft-ietf-sip-multiple-refer-00.txt".
	
NOTE:	The mail server at ietf.org can return the document in
	MIME-encoded form by using the "mpack" utility.  To use this
	feature, insert the command "ENCODING mime" before the "FILE"
	command.  To decode the response(s), you will need "munpack" or
	a MIME-compliant mail reader.  Different MIME-compliant mail readers
	exhibit different behavior, especially when dealing with
	"multipart" MIME messages (i.e. documents which have been split
	up into multiple messages), so check your local documentation on
	how to manipulate these messages.

Below is the data which will enable a MIME compliant mail reader
implementation to automatically retrieve the ASCII version of the
Internet-Draft.

--NextPart
Content-Type: Multipart/Alternative; Boundary="OtherAccess"

--OtherAccess
Content-Type: Message/External-body; access-type="mail-server";
	server="mailserv@ietf.org"

Content-Type: text/plain
Content-ID: <2006-9-24105815.I-D@ietf.org>

ENCODING mime
FILE /internet-drafts/draft-ietf-sip-multiple-refer-00.txt

--OtherAccess
Content-Type: Message/External-body;
	name="draft-ietf-sip-multiple-refer-00.txt"; site="ftp.ietf.org";
	access-type="anon-ftp"; directory="internet-drafts"

Content-Type: text/plain
Content-ID: <2006-9-24105815.I-D@ietf.org>


--OtherAccess--

--NextPart
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--NextPart--




From sip-bounces@ietf.org Sun Sep 24 22:49:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRgUg-0004dA-LQ; Sun, 24 Sep 2006 22:46:54 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRgUf-0004ac-GE
	for sip@ietf.org; Sun, 24 Sep 2006 22:46:53 -0400
Received: from alnrmhc12.comcast.net ([206.18.177.52])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRgUe-0001xv-9a
	for sip@ietf.org; Sun, 24 Sep 2006 22:46:53 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc12) with ESMTP
	id <20060925024651b1200eo10ke>; Mon, 25 Sep 2006 02:46:51 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8P2kpUm013197
	for <sip@ietf.org>; Sun, 24 Sep 2006 22:46:51 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8P2ko0k013193;
	Sun, 24 Sep 2006 22:46:50 -0400
Date: Sun, 24 Sep 2006 22:46:50 -0400
Message-Id: <200609250246.k8P2ko0k013193@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <4512DD5C.80403@cisco.com> (pkyzivat@cisco.com)
Subject: Re: [Sip] GRUU and grid
References: <200609211718.k8LHIJg0010220@dragon.ariadne.com>
	<4512DD5C.80403@cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 7a6398bf8aaeabc7a7bb696b6b0a2aad
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Paul Kyzivat <pkyzivat@cisco.com>

   If header parameters had been made mandatory in 3261 this would
   probably work well. But inclusion of header parameters into
   requests is discretionary in 3261, and there are warnings of how it
   can be dangerous, so I don't believe it can be relied upon.

My reading is that including a header parameters is mandatory unless
the UA has a positive reason not to include it.  Maybe that means that
some UAs don't bother to process any header parameter, but that seems
to me to be a violation.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Sun Sep 24 22:49:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRgTH-0004BK-8y; Sun, 24 Sep 2006 22:45:27 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRgTF-0004Aw-TW
	for sip@ietf.org; Sun, 24 Sep 2006 22:45:25 -0400
Received: from szxga02-in.huawei.com ([61.144.161.54])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRgOD-00016h-4j
	for sip@ietf.org; Sun, 24 Sep 2006 22:40:14 -0400
Received: from huawei.com (szxga02-in [172.24.2.6])
	by szxga02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J6400G0OO8WSJ@szxga02-in.huawei.com> for
	sip@ietf.org; Mon, 25 Sep 2006 10:58:09 +0800 (CST)
Received: from huawei.com ([172.24.1.6])
	by szxga02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J6400FCIO8WCB@szxga02-in.huawei.com> for
	sip@ietf.org; Mon, 25 Sep 2006 10:58:08 +0800 (CST)
Received: from CMTEST6 ([10.70.149.108])
	by szxml02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J64009RMO88O3@szxml02-in.huawei.com>; Mon,
	25 Sep 2006 10:57:44 +0800 (CST)
Date: Mon, 25 Sep 2006 10:39:19 +0800
From: Tina TSOU From sip-bounces@ietf.org Sun Sep 24 22:49:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRgUg-0004dA-LQ; Sun, 24 Sep 2006 22:46:54 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRgUf-0004ac-GE
	for sip@ietf.org; Sun, 24 Sep 2006 22:46:53 -0400
Received: from alnrmhc12.comcast.net ([206.18.177.52])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRgUe-0001xv-9a
	for sip@ietf.org; Sun, 24 Sep 2006 22:46:53 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc12) with ESMTP
	id <20060925024651b1200eo10ke>; Mon, 25 Sep 2006 02:46:51 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8P2kpUm013197
	for <sip@ietf.org>; Sun, 24 Sep 2006 22:46:51 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8P2ko0k013193;
	Sun, 24 Sep 2006 22:46:50 -0400
Date: Sun, 24 Sep 2006 22:46:50 -0400
Message-Id: <200609250246.k8P2ko0k013193@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <4512DD5C.80403@cisco.com> (pkyzivat@cisco.com)
Subject: Re: [Sip] GRUU and grid
References: <200609211718.k8LHIJg0010220@dragon.ariadne.com>
	<4512DD5C.80403@cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 7a6398bf8aaeabc7a7bb696b6b0a2aad
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Paul Kyzivat <pkyzivat@cisco.com>

   If header parameters had been made mandatory in 3261 this would
   probably work well. But inclusion of header parameters into
   requests is discretionary in 3261, and there are warnings of how it
   can be dangerous, so I don't believe it can be relied upon.

My reading is that including a header parameters is mandatory unless
the UA has a positive reason not to include it.  Maybe that means that
some UAs don't bother to process any header parameter, but that seems
to me to be a violation.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

From sip-bounces@ietf.org Sun Sep 24 22:49:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRgTH-0004BK-8y; Sun, 24 Sep 2006 22:45:27 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRgTF-0004Aw-TW
	for sip@ietf.org; Sun, 24 Sep 2006 22:45:25 -0400
Received: from szxga02-in.huawei.com ([61.144.161.54])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRgOD-00016h-4j
	for sip@ietf.org; Sun, 24 Sep 2006 22:40:14 -0400
Received: from huawei.com (szxga02-in [172.24.2.6])
	by szxga02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J6400G0OO8WSJ@szxga02-in.huawei.com> for
	sip@ietf.org; Mon, 25 Sep 2006 10:58:09 +0800 (CST)
Received: from huawei.com ([172.24.1.6])
	by szxga02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTP id <0J6400FCIO8WCB@szxga02-in.huawei.com> for
	sip@ietf.org; Mon, 25 Sep 2006 10:58:08 +0800 (CST)
Received: from CMTEST6 ([10.70.149.108])
	by szxml02-in.huawei.com (iPlanet Messaging Server 5.2 HotFix 1.25
	(built Mar
	3 2004)) with ESMTPA id <0J64009RMO88O3@szxml02-in.huawei.com>; Mon,
	25 Sep 2006 10:57:44 +0800 (CST)
Date: Mon, 25 Sep 2006 10:39:19 +0800
From: Tina TSOU <tena@huawei.com>
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs
To: "Vijay K. Gurbani" <vkg@lucent.com>
Message-id: <015201c6e04b$cd12fae0$6c95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <A713E425-0CA6-4151-9C0A-B1C213FA71C8@softarmor.com>
	<44932C00.9010705@lucent.com>
	<00e801c6dc7a$5c004440$6c95460a@china.huawei.com>
	<45131B4F.3020409@lucent.com>
	<018a01c6de23$3e4e7a70$6c95460a@china.huawei.com>
	<4516A0E1.4050305@lucent.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: cab78e1e39c4b328567edb48482b6a69
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Vijay,
See in line with [Tina 4: ...]
Thanks a lot(:

B. R.
Tina
----- Original Message ----- 
From: "Vijay K. Gurbani" <vkg@lucent.com>
To: "Tina TSOU" <tena@huawei.com>
Cc: "IETF SIP List" <sip@ietf.org>
Sent: Sunday, September 24, 2006 11:14 PM
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs


> Tina TSOU wrote:
> > [Tina3: A.  This solution is not backward compatible with many
> > implementation which only compare the DNS label, either the URI for
> > 3263 resolution like "<sips:downtown.example.com;lr>" or
> > "sips:user@example.com".
> 
> Backwards compatibility to what?  At the current time, there
> is a fair amount of work in the WG to provide better guidelines
> for both the SIPS URI as well as certificate use in SIP.
[Tina4: In sip-sec-flow-01 section 8 Additional test scenarios, there is only DNS label being compared. But in this draft, URI label must be compared. This behavior is not compatible.]
> 
> > B. What's the advantage in concept-wise or implementing by
> > introducing this URI label? Even a host may have many DNS aliases,
> > but it will not be changed frequently. ]
> 
> A host may have many DNS aliases, yes.  But if it is inserting
> its URI in a R-R header, it can pick the alias whose canonical
> name appears in the certificate.
[Tina4: Perhaps I had missed some discussions on this draft about why SIP URI label should be introduced to TLS certificate verification and DNS label checking is not the preferred choice. Would you give me a reference?

This is the question which missed in the text jungle in last mail.
Is a host like multi-user computer within the scope of this draft? One kind of attack in multi-user computer is being discussed in connect-reuse draft section 9.3. If all the users share the same site certificate, the same attack can happen for TLS. ]
> 
> Thanks.
> 
> - vijay
> -- 
> Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
> Bell Laboratories, Lucent Technologies, Inc.
> 2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





<tena@huawei.com>
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs
To: "Vijay K. Gurbani" <vkg@lucent.com>
Message-id: <015201c6e04b$cd12fae0$6c95460a@china.huawei.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <A713E425-0CA6-4151-9C0A-B1C213FA71C8@softarmor.com>
	<44932C00.9010705@lucent.com>
	<00e801c6dc7a$5c004440$6c95460a@china.huawei.com>
	<45131B4F.3020409@lucent.com>
	<018a01c6de23$3e4e7a70$6c95460a@china.huawei.com>
	<4516A0E1.4050305@lucent.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: cab78e1e39c4b328567edb48482b6a69
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Vijay,
See in line with [Tina 4: ...]
Thanks a lot(:

B. R.
Tina
----- Original Message ----- 
From: "Vijay K. Gurbani" <vkg@lucent.com>
To: "Tina TSOU" <tena@huawei.com>
Cc: "IETF SIP List" <sip@ietf.org>
Sent: Sunday, September 24, 2006 11:14 PM
Subject: Re: [Sip] doubts about draft-gurbani-sip-domain-certs


> Tina TSOU wrote:
> > [Tina3: A.  This solution is not backward compatible with many
> > implementation which only compare the DNS label, either the URI for
> > 3263 resolution like "<sips:downtown.example.com;lr>" or
> > "sips:user@example.com".
> 
> Backwards compatibility to what?  At the current time, there
> is a fair amount of work in the WG to provide better guidelines
> for both the SIPS URI as well as certificate use in SIP.
[Tina4: In sip-sec-flow-01 section 8 Additional test scenarios, there is only DNS label being compared. But in this draft, URI label must be compared. This behavior is not compatible.]
> 
> > B. What's the advantage in concept-wise or implementing by
> > introducing this URI label? Even a host may have many DNS aliases,
> > but it will not be changed frequently. ]
> 
> A host may have many DNS aliases, yes.  But if it is inserting
> its URI in a R-R header, it can pick the alias whose canonical
> name appears in the certificate.
[Tina4: Perhaps I had missed some discussions on this draft about why SIP URI label should be introduced to TLS certificate verification and DNS label checking is not the preferred choice. Would you give me a reference?

This is the question which missed in the text jungle in last mail.
Is a host like multi-user computer within the scope of this draft? One kind of attack in multi-user computer is being discussed in connect-reuse draft section 9.3. If all the users share the same site certificate, the same attack can happen for TLS. ]
> 
> Thanks.
> 
> - vijay
> -- 
> Vijay K. Gurbani  vkg@{lucent.com,research.bell-labs.com,acm.org}
> Bell Laboratories, Lucent Technologies, Inc.
> 2701 Lucent Lane, Rm. 9F-546, Lisle, Illinois 60532 (USA)
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Mon Sep 25 00:31:54 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRi4d-00037f-Ki; Mon, 25 Sep 2006 00:28:07 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRi4b-00036z-OP
	for sip@ietf.org; Mon, 25 Sep 2006 00:28:05 -0400
Received: from agnada.com ([69.36.182.244])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRi4W-0003ba-Md
	for sip@ietf.org; Mon, 25 Sep 2006 00:28:05 -0400
Received: from [192.168.0.101] (S010600095b9792b5.vc.shawcable.net
	[24.85.243.115]) (authenticated)
	by agnada.com (8.11.6/8.11.6) with ESMTP id k8P4RZg20383;
	Sun, 24 Sep 2006 22:27:35 -0600
Message-ID: <45175AB6.6000702@ntt-at.com>
Date: Sun, 24 Sep 2006 21:27:34 -0700
From: Shida Schubert <shida@ntt-at.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: "Elwell, John" <john.elwell@siemens.com>
Subject: Re: [Sip] Re: Rejecting connected identity (was RE: draft-ietf-si
	p-connected-id entity-01 comments)
References: <50B1CBA96870A34799A506B2313F266709EBC128@ntht201e.siemenscomms.co.uk>
In-Reply-To: <50B1CBA96870A34799A506B2313F266709EBC128@ntht201e.siemenscomms.co.uk>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9c7d7a899dc8f3389bf7ace6f0ad8e29
Cc: Cullen Jennings <fluffy@cisco.com>, SIP <sip@ietf.org>,
	Paul Kyzivat <pkyzivat@cisco.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
Reply-To: shida@ntt-at.com
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi John;

I agree to your statement.
What you noted below would solve my concern.

Thanks
Shida

Elwell, John wrote:
> Shida,
>
> When I said 428 was not a problem, what I meant was that RFC 4474 leaves it
> as a matter of policy whether to send 428. So in connected-identity we could
> recommend use of a policy that avoids sending 428 to mid-dialog requests.
> This would not be a problem in that it would not violate RFC 4474.
>
> So your scenario would work if policy at the caller's UA is not to send 428
> to a mid-dialog request that does not contain Identity. 
>
> John
>
>   
>> -----Original Message-----
>> From: Shida Schubert [mailto:shida@ntt-at.com] 
>> Sent: 23 September 2006 03:42
>> To: Paul Kyzivat
>> Cc: Elwell, John; Cullen Jennings; SIP
>> Subject: Re: [Sip] Re: Rejecting connected identity (was RE: 
>> draft-ietf-sip-connected-id entity-01 comments)
>>
>>
>> Hi;
>>
>> I thought about this a bit, and with connected-identity even 428
>> seems to be somewhat problematic.
>>
>> Imagine a scenario where call with SIP-identity+"id-change" tag
>> gets forked to 2UAs served by different domains. UA1 whose
>> domain provides Identity service and UA2 whose domain does not
>> provide identity service. (Both UAs are compliant to 
>> connected-identity)
>>
>> UA2 beats the race and established the call and sends back an UPDATE
>> without SIP-identity and gets rejected with 428 because its 
>> domain does
>> not provide identity services.
>>
>> If there was a way to indicate the need of sip-identity in return, we
>> might be able to avoid this problem as call can be forwarded 
>> using this
>> indication to the domain supporting the identity services but 
>> as of now I
>> don't think there is anything we can do to avoid this. So I am leaning
>> towards
>> changing the verifier's behavior a bit more lenient when it's 
>> dealing with
>> mid-dialog identity.
>>
>> Regards
>> Shida
>>
>>
>> Paul Kyzivat wrote:
>>     
>>> John,
>>>
>>> I want to hear what others, especially Jon and Cullen, have to say
>>> about this.
>>>
>>> It is of some concern to me that a call might fail because of some
>>> problem with the identity mechanism when the same call might have
>>> succeeded in the absence of any identity.
>>>
>>> But possibly the solution to this is policy in the implementation of
>>> the verifier. What to do in the case of the conditions that lead to
>>> these errors could be configurable in the verifier: either 
>>>       
>> to generate
>>     
>>> the error or simply to remove the identity info from the 
>>>       
>> message. And
>>     
>>> the policy could conceivably vary based on attributes of 
>>>       
>> the message,
>>     
>>> such as whether it is in-dialog or not.
>>>
>>> Does it require a change to 4474 to permit that kind of policy?
>>>
>>> It would be annoying if the end user had no control over 
>>>       
>> the insertion
>>     
>>> and verification of identity, and it resulted in calls failing that
>>> the user would like to permit. But I suppose that is itself a policy
>>> decision. There are certainly enterprises that want to 
>>>       
>> exert that kind
>>     
>>> of control over what users are permitted to do.
>>>
>>> Paul
>>>
>>> Elwell, John wrote:
>>>       
>>>> Paul,
>>>>
>>>> I agree with most of your points, and on reflection I think I agree
>>>> that the
>>>> solution has to be with the verifier.
>>>>
>>>> I think RFC 4474 is not a problem as far as sending a 428 
>>>>         
>> 'Use Identity
>>     
>>>> Header' response is concerned, because that is left to 
>>>>         
>> policy, so we
>>     
>>>> could
>>>> say in connected-identity that policy should be to not send 428.
>>>>
>>>> However, 436, 437 and 438 responses are all a problem, because RFC
>>>> 4474 says
>>>> that they MUST be sent under respective conditions. Interestingly,
>>>> though,
>>>> there are other failure scenarios that can arise from the 
>>>>         
>> procedures of
>>     
>>>> section 6 of RFC 4474 for which no normative statement is given on
>>>> how to
>>>> respond, e.g. invalid Date header field, signer not 
>>>>         
>> authoritative for
>>     
>>>> the
>>>> domain.
>>>>
>>>> So one way to solve the present problem would be for the
>>>> connected-identity
>>>> draft to modify verifier behaviour in RFC 4474 in the case 
>>>>         
>> of mid-dialog
>>     
>>>> requests. I guess this would mean that it would update RFC 4474 as
>>>> well as
>>>> updating RFC 3261. But I don't like this, because it seems 
>>>>         
>> to remove
>>     
>>>> some of
>>>> the security properties of RFC 4474.
>>>>
>>>> Another way would be to accept that 436, 437 and 438 responses will
>>>> be sent,
>>>> and failure to verify a signature will therefore result in 
>>>>         
>> inability to
>>     
>>>> process the UPDATE or re-INVITE request, and hence if the UPDATE or
>>>> re-INVITE request was for some other purpose such as session timer
>>>> refresh
>>>> or modifying the session, that action will fail. Then the call will
>>>> fail (in
>>>> the case of inability to refresh the session timer) or the session
>>>> modification will fail. I guess this is somewhat analogous 
>>>>         
>> to caller ID
>>     
>>>> verification failure in an INVITE request - it is impossible to
>>>> establish a
>>>> call if verification fails. Moreover, the UAC has no ability to
>>>> rectify the
>>>> situation, since it is at the mercy of a proxy-based Authentication
>>>> Service
>>>> that puts a rogue Identity header field in every request. In the
>>>> connected
>>>> identity case, the only difference is that the call is already
>>>> established
>>>> but is likely to fail if verification fails.
>>>>
>>>> Of course, if the mid-dialog request is indeed from the 
>>>>         
>> wrong source,
>>     
>>>> then
>>>> sending a 436, 437 or 438 response is indeed the correct 
>>>>         
>> thing to do,
>>     
>>>> and
>>>> overriding the verification procedures of RFC 4474 would indeed be
>>>> the wrong
>>>> thing to do. So perhaps we just have to accept that these response
>>>> codes can
>>>> be received and will lead to failure.
>>>>
>>>> So, my preferred way forward is simply to recommend not 
>>>>         
>> sending a 428
>>     
>>>> and
>>>> accept the consequences of other responses that the 
>>>>         
>> verifier might send.
>>     
>>>> John
>>>>
>>>>         
>>>>> -----Original Message-----
>>>>> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] Sent: 22 September
>>>>> 2006 15:13
>>>>> To: Elwell, John
>>>>> Cc: Cullen Jennings; SIP
>>>>> Subject: Re: [Sip] RE: 
>>>>>           
>> draft-ietf-sip-connected-identity-01 comments
>>     
>>>>>
>>>>> Elwell, John wrote:
>>>>>           
>>>>>>> From: Cullen Jennings [mailto:fluffy@cisco.com] When an 
>>>>>>>               
>> Update is
>>     
>>>>>>> sent. Are there any conditions under which it might be rejected.
>>>>>>> Bad identity for example. I think that might need a little
>>>>>>> discussion and also what the UA does when it sends 
>>>>>>>               
>>>>> an update
>>>>>           
>>>>>>> with a no identity and it gets rejected.
>>>>>>>               
>>>>>> [JRE] A very good point. We don't want to get to a 
>>>>>>             
>>>>> situation where it is
>>>>>           
>>>>>> impossible to perform a mid-dialog request (e.g., for 
>>>>>>             
>>>>> purposes such as
>>>>>           
>>>>>> session timer refresh or session re-negotiation) just 
>>>>>>             
>>>>> because connected
>>>>>           
>>>>>> identity fails.
>>>>>> My proposed fix is as follows:
>>>>>> 1. Say that a UAS SHOULD NOT reject a mid-dialog request 
>>>>>>             
>>>>> with 428 'Use
>>>>>           
>>>>>> Identity Header'.
>>>>>>             
>>>>> I'm not sure about this. At the least I think this one needs some
>>>>> clear explanation of the SHOULD NOT - about the conditions when it
>>>>> can be violated.
>>>>>
>>>>> I see this as somewhat analogous to doing a digest challenge on an
>>>>> in-dialog request. In some cases it is the right thing to do.
>>>>>
>>>>> A UA that imposes such a requirement will be limited in 
>>>>>           
>> what it can
>>     
>>>>> do, but that may still be right in some cases.
>>>>>
>>>>>           
>>>>>> 2. Say that an Authentication Service MUST NOT add an 
>>>>>>             
>>>>> Identity header field
>>>>>           
>>>>>> to a mid-dialog request if a previous request on that 
>>>>>>             
>>>>> dialog has resulted in
>>>>>           
>>>>>> 436 'Bad Identity-Info', 437 'Unsupported Certificate' or 
>>>>>>             
>>>>> 438 'Invalid
>>>>>           
>>>>>> Identity Header'.
>>>>>>             
>>>>> This requirement would force the authentication service 
>>>>>           
>> to be dialog
>>     
>>>>> stateful, which is not ideal. Better to push the state 
>>>>>           
>> back into the
>>     
>>>>> sender of the request. This may require a way for the UAC to tell
>>>>> the authentication service not to act.
>>>>>
>>>>>           
>>>>>> 3. Say that a UAC MUST repeat a mid-dialog request that 
>>>>>>             
>>>>> results in one of
>>>>>           
>>>>>> these responses if the mid-dialog request was not solely 
>>>>>>             
>>>>> for the purpose of
>>>>>           
>>>>>> connected identity. If solely for the purpose of connected 
>>>>>>             
>>>>> identity there is
>>>>>           
>>>>>> no point in repeating it, so I will say "SHOULD NOT take 
>>>>>>             
>> any further
>>     
>>>>>> action".
>>>>>>             
>>>>> This seems wrong to me.
>>>>>
>>>>> I think that the remedy to these is in the verifier. The 
>>>>>           
>> purpose of
>>     
>>>>> the verifier is ultimately to drive an authorization decision. If
>>>>> authorization would succeed in the absence of the 
>>>>>           
>> identity, then the
>>     
>>>>> request should be permitted to continue as if the identity was not
>>>>> present.
>>>>>
>>>>> Unfortunately this would seem to require a revision to 4474 even
>>>>> though the paint is hardly dry on it.
>>>>>
>>>>> If this is done, then there is no need of a mechanism to cause the
>>>>> authentication service *not* to authenticate. If this is 
>>>>>           
>> *not* done,
>>     
>>>>> then that need remains, which will still require a change to 4474.
>>>>>
>>>>> Paul
>>>>>
>>>>> _______________________________________________
>>>>> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
>>>>> This list is for NEW development of the core SIP Protocol
>>>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>>>> Use sipping@ietf.org for new developments on the 
>>>>>           
>> application of sip
>>     
>>> _______________________________________________
>>> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol
>>> Use sip-implementors@cs.columbia.edu for questions on current sip
>>> Use sipping@ietf.org for new developments on the application of sip
>>>
>>>
>>>       
>
>
>   


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 25 01:46:41 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRjFX-0004Cg-T7; Mon, 25 Sep 2006 01:43:27 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRjFW-0004CW-Jb
	for sip@ietf.org; Mon, 25 Sep 2006 01:43:26 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRjFS-0007FF-QK
	for sip@ietf.org; Mon, 25 Sep 2006 01:43:26 -0400
Received: from S4DE8PSAAGT.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Mon, 25 Sep 2006 07:34:13 +0200
Received: from S4DE8PSAAGO.mitte.t-com.de ([10.151.180.14]) by
	S4DE8PSAAGT.mitte.t-com.de with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Sep 2006 07:34:12 +0200
Subject: AW: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Date: Mon, 25 Sep 2006 07:34:12 +0200
Message-Id: <85108216918A984C8C60172D7C84770A56F6E3@S4DE8PSAAGO.mitte.t-com.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
in-reply-to: <24EAE5D4448B9D4592C6D234CBEBD597054F455D@stntexch03.cis.neustar.com>
X-MS-Has-Attach: 
Content-class: urn:content-classes:message
X-MS-TNEF-Correlator: 
X-MimeOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: AW: [Sip] SIP WGLC  Draft draft-ietf-sip-acr-code-02.txt
Thread-Index: AcbY1V/849WN/bPMTaGW/m8ZpT6vNgExkZaAALFQkYA=
From: "Jesske, R" <R.Jesske@t-com.net>
To: <jon.peterson@neustar.biz>, <jdrosen@cisco.com>, <pkyzivat@cisco.com>
X-OriginalArrivalTime: 25 Sep 2006 05:34:12.0788 (UTC)
	FILETIME=[3B991F40:01C6E064]
X-Spam-Score: 0.5 (/)
X-Scan-Signature: 96d3a783a4707f1ab458eb15058bb2d7
Cc: sip@ietf.org, esasaki@ntt-at.com, drage@lucent.com,
	dean.willis@softarmor.com
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


It is good to know that this was never intended, but the RFC3323 and =
RFC3325 does not specify this. So there is a GAP, that must be closed. =
But meanwhile there are implementations in the world that interprets =
'id' as an subset of 'header'. So the clarification needed in RFC3325 =
need to take this into consideration.

Nevertheless I would like to go with Keiths proposal for the ACR =
response-code:
2)	Section 3.=20

   o  The request contained a Privacy header field whose value was 'id'
      [3] or 'user'.  This explicitly excludes the 'header' and
      'session' privacy services, since those do not directly convey the
      identity of the requestor.

I have noted the ongoing discussion on this, and certainly my
interpretation was that the "header" value in the Privacy header could
cover the P-Asserted-Identity header. However I think we should avoid
that this draft attempts to fix unclear specification in RFC 3323 and
(and possibly RFC 3325). I would therefore suggest that we strike the
offending words.

Best Regards

Roland=20

> -----Urspr=FCngliche Nachricht-----
> Von: Peterson, Jon [mailto:jon.peterson@neustar.biz]=20
> Gesendet: Donnerstag, 21. September 2006 20:22
> An: Jonathan Rosenberg; Paul Kyzivat
> Cc: Jesske, Roland; sip@ietf.org; drage@lucent.com;=20
> esasaki@ntt-at.com; Dean Willis
> Betreff: RE: AW: [Sip] SIP WGLC Draft draft-ietf-sip-acr-code-02.txt
>=20
>=20
>=20
> The 'header' privacy value was never intended to encompass=20
> the functionality of 'id'. 'id' assumes the existence of=20
> trust domains, and thus of entities among whom private=20
> information could be legitimately shared. RFC3323 more or=20
> less assumes that the anonymizing function is performed by=20
> intermediary close to the UAC, and that makes the behavior of=20
> the 'header' privacy value difficult to apply to P- headers=20
> which can be shared among a set of trust hosts but not=20
> outside the trust domain.=20
>=20
> Clearly, various intermediaries within a trust domain could=20
> perform both the 'header' and 'id' functions, but if that's=20
> desired, both the 'header' and 'id' priv-values should be=20
> specified in the Privacy header by the user agent.
>=20
> Jon Peterson
> NeuStar, Inc.
>=20
> > -----Original Message-----
> > From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]
> > Sent: Friday, September 15, 2006 10:41 AM
> > To: Paul Kyzivat
> > Cc: Jesske, R; sip@ietf.org; esasaki@ntt-at.com; Dean Willis;
> > drage@lucent.com
> > Subject: Re: AW: [Sip] SIP WGLC Draft draft-ietf-sip-acr-code-02.txt
> >=20
> >=20
> > Right.
> >=20
> > So what this means for acr-code is that we are really at a=20
> stalemate=20
> > here until its clear what RFC 3323 is supposed to mean. Its=20
> important to=20
> > note that it is certainly not the job of acr-code to clarify=20
> > this behavior.
> >=20
> > -Jonathan R.
> >=20
> > Paul Kyzivat wrote:
> >=20
> > >=20
> > >=20
> > > Jonathan Rosenberg wrote:
> > >=20
> > >> This is a good point.
> > >>
> > >> I did not think that the 'header' value applied to P-Asserted-ID.
> > >> Rather, the 'id' value does, which is defined=20
> specifically for this
> > >> purpose in RFC 3325. However I agree with you that *if*=20
> > 'header' implied
> > >> removal of P-Asserted-ID, it becomes a superset of 'id'=20
> and then it
> > >> should be added to the list of things that define an=20
> > anonymous call.
> > >=20
> > >=20
> > > I agree that the intent is not entirely clear. But like=20
> > Jonathan I had=20
> > > interpreted the specs so that 'header' privacy did not remove=20
> > > P-Asserted-Identity. I just reviewed 3323 and 3325, and I=20
> > think that is=20
> > > still the correct interpretation based on more or less the=20
> > same logic=20
> > > Jonathan mentioned earlier:
> > >=20
> > > - it is suggested that 'header' privacy be applied early=20
> on the call
> > >   path. (Section 4.3: "It is RECOMMENDED that service=20
> > providers couple
> > >   the privacy service function with a local outbound proxy.")
> > >=20
> > > - 'id' privacy must be applied late in the call path or else the
> > >   P-Asserted-ID header isn't available to servers that need it.
> > >=20
> > > - when the 'header' function is carried out, the 'header' token
> > >   is to be removed. That is specified in section 5:
> > >=20
> > >   "When a privacy service performs one of the functions=20
> > corresponding to
> > >    a privacy level listed in the Privacy header, it SHOULD=20
> > remove the
> > >    corresponding priv-value from the Privacy header -=20
> otherwise, any
> > >    other privacy service involved with routing this message might
> > >    unnecessarily apply the same function, which in many=20
> > cases would be
> > >    undesirable."
> > >=20
> > > I guess the following strategy *could* be used to make=20
> the 'header'=20
> > > privacy level to be a superset of 'id' privacy:
> > >=20
> > > - The outbound proxy it would hide most headers ,
> > >   but would note that it isn't forwarding across a trust domain
> > >   boundary and so not remove P-Asserted-ID.
> > >=20
> > > - It would remove the 'header' token from the Privacy header,
> > >   but because it hasn't completed the job by removing=20
> P-Asserted-ID,
> > >   it must insert an 'id' token to ensure that is done later.
> > >=20
> > > While that is a possibility, it seems like quite a stretch=20
> > to me. I see=20
> > > no hints in either document that this kind of behavior is=20
> > expected. It=20
> > > seems way more straightforward to treat them as=20
> independent options.
> > >=20
> > >     Paul
> > >=20
> > >> Perhaps Jon P. can comment on whether the intent was for 'header'
> > >> privacy to apply to P-Asserted-ID?
> > >>
> > >> -Jonathan R.
> > >>
> > >> Shida Schubert wrote:
> > >>
> > >>> I personally think RFC3323 is underspecified with what=20
> headers to
> > >>> be obscured per privacy value. Interestingly though I=20
> > found the text in
> > >>> IANA consideration that is concise about what each=20
> privacy value's
> > >>> intent.
> > >>>
> > >>> "Text from the IANA consideration of RFC3323
> > >>>
> > >>>    o  user: Request that privacy services provide a=20
> > user-level privacy
> > >>>       function
> > >>>
> > >>>    o  header: Request that privacy services modify=20
> > headers that cannot
> > >>>       be set arbitrarily by the user (Contact/Via)."
> > >>>
> > >>> Considering the text above, if "header" was set any=20
> > headers that can not
> > >>> be set
> > >>> arbitrarily by the user needs to be obscured/modified by=20
> > the privacy
> > >>> services, which
> > >>> I believe would include P-A-ID as well.
> > >>>
> > >>> If that's the case, requesting "header" would naturally=20
> > mean requesting
> > >>> anonymity, as the
> > >>> domain supporting P-A-ID would alter the value of the=20
> P-A-ID to be
> > >>> anonymous as the
> > >>> text in IANA suggests.
> > >>>
> > >>> My original interpretation of "header" privacy value was=20
> > actually quite
> > >>> different. I saw
> > >>> the "header privacy" as a way for UA to request some sort=20
> > of topology
> > >>> hiding
> > >>> (obscuring Contact, via, headers revealing a path to=20
> the UA etc.).
> > >>> With that interpretation, I could see a scenario where=20
> > "header" privacy
> > >>> option does NOT
> > >>> imply that the originating user desires anonymity(e.g. I=20
> > call my client,
> > >>> I want to show them
> > >>> who I am but not wanting them to find out I am calling=20
> > from home.). But
> > >>> this can not hold true if the domain provides P-A-ID as=20
> > "header' privacy
> > >>> value will
> > >>> modify the header to obscure the identity of the user,=20
> > thus making it an
> > >>> anonymous call.
> > >>>
> > >>> Regards
> > >>> Shida
> > >>>
> > >>> Dean Willis wrote:
> > >>>
> > >>>> Jesske, R wrote:
> > >>>>
> > >>>>> At least with the 'header' privacy the origin user=20
> > expresses that he
> > >>>>> want to be anonymous. So it is an intension of the=20
> > user. Of course
> > >>>>> the privacy server can strip of the privacy value but=20
> > that is due to
> > >>>>> the Provider of the server. Within RFC3323 I didn't=20
> > found something
> > >>>>> that says that if you have privacy performed that you=20
> > have to delete
> > >>>>> the privacy header itself.
> > >>>>
> > >>>> Does it? Do we have real scenarios where the "header"=20
> > privacy option
> > >>>> does NOT imply that the originating user desires anonymity?
> > >>>>
> > >>>> Or is the case where a call goes out with a "header"=20
> > privacy value,
> > >>>> but includes an authenticated identity body or other non-header
> > >>>> identity mechanism simply an error?
> > >>>>
> > >>>> If it is an error, what needs to be corrected, in terms of
> > >>>>
> > >>>> 1) Changing any specifications?
> > >>>>
> > >>>> 2) Run-time detection of and response to the error condition?
> > >>>>
> > >>>> --=20
> > >>>> dean
> > >>>>
> > >>>> _______________________________________________
> > >>>> Sip mailing list https://www1.ietf.org/mailman/listinfo/sip
> > >>>> This list is for NEW development of the core SIP Protocol
> > >>>> Use sip-implementors@cs.columbia.edu for questions on=20
> current sip
> > >>>> Use sipping@ietf.org for new developments on the=20
> > application of sip
> > >>>>
> > >>>>
> > >>>
> > >>>
> > >>> _______________________________________________
> > >>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > >>> This list is for NEW development of the core SIP Protocol
> > >>> Use sip-implementors@cs.columbia.edu for questions on=20
> current sip
> > >>> Use sipping@ietf.org for new developments on the=20
> > application of sip
> > >>>
> > >>
> > >=20
> >=20
> > --=20
> > Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> > Cisco Fellow                                   Parsippany, NJ=20
> > 07054-2711
> > Cisco Systems
> > jdrosen@cisco.com                              FAX:   (973) 952-5050
> > http://www.jdrosen.net                         PHONE: (973) 952-5000
> > http://www.cisco.com
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> >=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 25 05:40:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRmt5-0000R4-KR; Mon, 25 Sep 2006 05:36:31 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRmt3-0000Qz-VE
	for sip@ietf.org; Mon, 25 Sep 2006 05:36:29 -0400
Received: from mail.sbs.be ([193.109.72.11])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRmsy-00021U-R1
	for sip@ietf.org; Mon, 25 Sep 2006 05:36:29 -0400
Received: from bruc001x.sbs.be (bruc001x.sbs.be [193.210.175.38])
	by mail.sbs.be (8.12.10/8.12.10/SuSE Linux 0.7) with ESMTP id
	k8P9aMhs031388; Mon, 25 Sep 2006 11:36:22 +0200
Received: from bru0032a.ww018.siemens.net (bru0032a.ww018.siemens.net
	[193.210.175.90])
	by bruc001x.sbs.be (8.12.10/8.12.10/SuSE Linux 0.7) with ESMTP id
	k8P9aK3V021664; Mon, 25 Sep 2006 11:36:20 +0200
Received: from BRU0038A.ww018.siemens.net ([193.210.175.28]) by
	bru0032a.ww018.siemens.net with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Sep 2006 11:36:16 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Mon, 25 Sep 2006 11:36:15 +0200
Message-ID: <C12A115F71992249AC6EA6AEA5DED00601472634@BRU0038A.ww018.siemens.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Comments on draft-niemi-sip-subnot-etags-01
thread-index: AcbghgwDlNAKufGFS4qDU6RpP1NKsA==
From: "Vrancken, Johnny" <Johnny.Vrancken@siemens.com>
To: <aki.niemi@nokia.com>
X-OriginalArrivalTime: 25 Sep 2006 09:36:16.0612 (UTC)
	FILETIME=[0C78CA40:01C6E086]
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 2d133cc328f58695161c98bb4f4dc213
Cc: sip@ietf.org
Subject: [Sip] Comments on draft-niemi-sip-subnot-etags-01
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0935308993=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0935308993==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E086.0C374AB2"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6E086.0C374AB2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi Aki,

Here are some comments on your document.=20

PAGE 2  "When such a condition fails, the event state is not sent in a
notification."
COMMENT: As you have introduced the conditions "Suppress-Body-If-Match"
and "Suppress-Notify-If-Match", you may have that the event state is not
sent in a notification or no notification is sent at all.

PAGE 4:  "... the SIP events framework does not include different
protocol methods for initial  subscriptions, subscription refreshes and
fetches inside and outside of the SIP dialog."
COMMENT: the same holds for terminating a subscription (unsubscription)

PAGE 5: REQ1: "... triggered by a subscription refresh, ..."
COMMENT: the same holds for a subscription termination (unsubscription)

PAGE 6: "If the entity-tags match, either an empty entity body is sent
in a notification, or no notification is sent"
COMMENT: "An empty entity body" could be misinterpreted as e.g. "an
empty presence document" in the presence context (e.g. <presence
entity=3D"XXX" />), so it is recommended to reformulate it as "a
notification without a body".

PAGE 7: "The views might correspond to different groups of users that
have varying levels of access rights to the resource state."
COMMENT: you may add "and/or subscribers that have indicated via a
subscription filter interest in a particular view of the resource
state."

PAGE 7: "... the local entity-tag for the resource and the subscriber
provided entity-tag ..."
COMMENT: should be "... the local entity-tag for the resource state to
be notified and the subscriber provided entity-tag ...", as there might
be several different entity tags per resource - see section 4.1

PAGE 7: "The Content-Type header field of the NOTIFY request is set an
appropriate value, depending on the event package, but  .....The
Content-Length MUST be set to zero, and no payload is attached to the
message."
COMMENT: The first part of this sentence is to be omitted, as a
Content-Type header field is only required if the message body is not
empty.

PAGE 8: "When a condition to suppress a NOTIFY is true, i.e., the local
entity-tag and the subscriber provided entity-tag in a
Suppress-Notify-If-Match ..."
COMMENT: To align it with the text of section 4.1: "When a condition for
suppressing a NOTIFY request is true, i.e., the local entity-tag for the
resource state to be notified and the subscriber provided entity-tag in
a Suppress-Notify-If-Match ..."

PAGE 9: "and entity-tag in RFC3265"
COMMENT: entity-tag is defined in RFC3903

PAGE 9: Grammar
COMMENT: the syntax of the new header allows a subscriber to supply only
a single entity-tag value. The syntax of similar header fields for
conditional requests in RFC2616 (If-Match, If-None-Match) allows to
provide multiple entity-tag values for these headers.
Therefore, it can be considered to allow multiple entity-tag values for
the new Suppress-Body-If-Match header. If there is a match, the NOTIFY
request will contain the entity-tag of the resource state that is valid.
Allowing multiple entity-tag values for the Suppress-Notify-If-Match
header is not meaningful, as the subscriber, in case of a match, does
not receive information (NOTIFY request) about which one of entity-tags
is valid.

General COMMENT: Applicability of the ETag mechanism for resource list
subscriptions.
The document focuses on an ETag mechanism for subscriptions targeted on
a single resource. However, one can also subscribe for a resource list
(RFC4662). In that case, the resulting NOTIFY requests comprise the
resource state of no / one / multiple resources in addition to Resource
List Meta Information (RLMI) pertaining to the resource list
subscription. This RLMI information contains information about the
individual resources and the status of the virtual subscriptions.
Your document preferably should include a statement about the
applicability of the ETag mechanism for resource list subscriptions.
You may either state that
1. it is out of scope of the document
2. the mechanism also can be applied to resource list subscriptions. In
that case you need to clearly specify what the ETag represents (e.g.
does it also include the full RLMI information ?)
3. you could consider to exchange a set of ETags, one for each resource
in the list. In the NOTIFY request, these ETags can be included in the
RLMI information but for the SUBSCRIBE request a new mechanism is to be
introduced to exchange the ETags of the individual resources.


Kind regards,

Johnny Vrancken

=20







------_=_NextPart_001_01C6E086.0C374AB2
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7650.5">
<TITLE>Comments on draft-niemi-sip-subnot-etags-01</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><SPAN LANG=3D"nl-be"><FONT SIZE=3D2 FACE=3D"Arial">Hi =
Aki,</FONT></SPAN>
</P>

<P><SPAN LANG=3D"nl-be"><FONT SIZE=3D2 FACE=3D"Arial">Here are some =
comments on your document. </FONT></SPAN>
</P>

<P><SPAN LANG=3D"nl-be"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 2&nbsp; =
&quot;When such a condition fails, the event state is not sent in a =
notification.&quot;</FONT></SPAN>

<BR><SPAN LANG=3D"nl-be"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: As you =
have introduced the conditions &quot;Suppress-Body-If-Match&quot; and =
&quot;Suppress-Notify-If-Match&quot;, you may have that the event state =
is not sent in a notification or no notification is sent at =
all.</FONT></SPAN></P>

<P><SPAN LANG=3D"nl-be"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 4:&nbsp; =
&quot;&#8230; the SIP events framework does not include different =
protocol methods for initial&nbsp; subscriptions, subscription refreshes =
and fetches inside and outside of the SIP =
dialog.&quot;</FONT></SPAN></P>

<P><SPAN LANG=3D"nl-be"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: the same =
holds for terminating a subscription (unsubscription)</FONT></SPAN>
</P>

<P><SPAN LANG=3D"nl-be"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 5: REQ1: =
&quot;&#8230; triggered by a subscription refresh, =
&#8230;&quot;</FONT></SPAN>

<BR><SPAN LANG=3D"nl-be"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: the same =
holds for a subscription termination (unsubscription)</FONT></SPAN>
</P>

<P><SPAN LANG=3D"nl-be"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 6: &quot;If =
the entity-tags match, either an empty entity body is sent in a =
notification, or no notification is sent&quot;</FONT></SPAN>

<BR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: &quot;An =
empty entity body&quot; could be misinterpreted as e.g. &quot;an empty =
presence document&quot; in the presence context (e.g. &lt;presence =
entity=3D&quot;XXX&quot; /&gt;), so it is recommended to reformulate it =
as &quot;a notification without a body&quot;.</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 7: &quot;The =
views might correspond to different groups of users that have varying =
levels of access rights to the resource state.&quot;</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: you may =
add &quot;and/or subscribers that have indicated via a subscription =
filter interest in a particular view of the resource =
state.&quot;</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 7: =
&quot;&#8230; the local entity-tag for the resource and the subscriber =
provided entity-tag &#8230;&quot;</FONT></SPAN>

<BR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: should =
be &quot;&#8230; the local entity-tag for the resource state to be =
notified and the subscriber provided entity-tag &#8230;&quot;, as there =
might be several different entity tags per resource - see section =
4.1</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 7: &quot;The =
Content-Type header field of the NOTIFY request is set an appropriate =
value, depending on the event package, but&nbsp; &#8230;..The =
Content-Length MUST be set to zero, and no payload is attached to the =
message.&quot;</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: The first =
part of this sentence is to be omitted, as a Content-Type header field =
is only required if the message body is not empty.</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 8: &quot;When =
a condition to suppress a NOTIFY is true, i.e., the local entity-tag and =
the subscriber provided entity-tag in a Suppress-Notify-If-Match =
...&quot;</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: To align =
it with the text of section 4.1: &quot;When a condition for suppressing =
a NOTIFY request is true, i.e., the local entity-tag for the resource =
state to be notified and the subscriber provided entity-tag in a =
Suppress-Notify-If-Match ...&quot;</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 9: &quot;and =
entity-tag in RFC3265&quot;</FONT></SPAN>

<BR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: =
entity-tag is defined in RFC3903</FONT></SPAN>
</P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">PAGE 9: =
Grammar</FONT></SPAN>

<BR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">COMMENT: the =
syntax of the new header allows a subscriber to supply only a single =
entity-tag value. The syntax of similar header fields for conditional =
requests in RFC2616 (If-Match, If-None-Match) allows to provide multiple =
entity-tag values for these headers.</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">Therefore, it can =
be considered to allow multiple entity-tag values for the new =
Suppress-Body-If-Match header. If there is a match, the NOTIFY request =
will contain the entity-tag of the resource state that is =
valid.</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">Allowing multiple =
entity-tag values for the Suppress-Notify-If-Match header is not =
meaningful, as the subscriber, in case of a match, does not receive =
information (NOTIFY request) about which one of entity-tags is =
valid.</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">General COMMENT: =
Applicability of the ETag mechanism for resource list =
subscriptions.</FONT></SPAN>

<BR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">The document =
focuses on an ETag mechanism for subscriptions targeted on a single =
resource. However, one can also subscribe for a resource list (RFC4662). =
In that case, the resulting NOTIFY requests comprise the resource state =
of no / one / multiple resources in addition to Resource List Meta =
Information (RLMI) pertaining to the resource list subscription. This =
RLMI information contains information about the individual resources and =
the status of the virtual subscriptions.</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">Your document =
preferably should include a statement about the applicability of the =
ETag mechanism for resource list subscriptions.</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">You may either =
state that</FONT></SPAN>

<BR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">1. it is out of =
scope of the document</FONT></SPAN>

<BR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">2. the mechanism =
also can be applied to resource list subscriptions. In that case you =
need to clearly specify what the ETag represents (e.g. does it also =
include the full RLMI information ?)</FONT></SPAN></P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">3. you could =
consider to exchange a set of ETags, one for each resource in the list. =
In the NOTIFY request, these ETags can be included in the RLMI =
information but for the SUBSCRIBE request a new mechanism is to be =
introduced to exchange the ETags of the individual =
resources.</FONT></SPAN></P>
<BR>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">Kind =
regards,</FONT></SPAN>
</P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">Johnny =
Vrancken</FONT></SPAN>
</P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Arial">&nbsp;</FONT></SPAN>
</P>
<BR>
<BR>
<BR>
<BR>
<BR>

</BODY>
</HTML>
------_=_NextPart_001_01C6E086.0C374AB2--


--===============0935308993==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0935308993==--




From sip-bounces@ietf.org Mon Sep 25 05:57:13 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRnBA-0008Ja-2A; Mon, 25 Sep 2006 05:55:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRnB8-0008I8-4a
	for sip@ietf.org; Mon, 25 Sep 2006 05:55:10 -0400
Received: from ihemail3.lucent.com ([135.245.0.37])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRnB4-0006BG-PK
	for sip@ietf.org; Mon, 25 Sep 2006 05:55:10 -0400
Received: from ilexp02.ndc.lucent.com (h135-3-39-2.lucent.com [135.3.39.2])
	by ihemail3.lucent.com (8.13.6/IER-o) with ESMTP id k8P9sxoB017422
	for <sip@ietf.org>; Mon, 25 Sep 2006 04:54:59 -0500 (CDT)
Received: from DEEXP01.de.lucent.com ([135.248.187.65]) by
	ilexp02.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 25 Sep 2006 04:54:59 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP01.de.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 25 Sep 2006 11:54:57 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 25 Sep 2006 11:54:56 +0200
Message-ID: <5D1A7985295922448D5550C94DE291804A59A9@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: URI list services
Thread-Index: AcbghtgB1pbPnkKDTYy3Xzi0gb6+fQ==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 25 Sep 2006 09:54:57.0825 (UTC)
	FILETIME=[A8C45110:01C6E088]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 69a74e02bbee44ab4f8eafdbcedd94a1
Subject: [Sip] URI list services
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

(As WG chair)

The following documents have been reissued as SIP documents as they
contain option tag definitions and header field definitions, which have
to be presented to IETF from the SIP group.

http://www.ietf.org/internet-drafts/draft-ietf-sip-uri-list-message-00.t
xt
http://www.ietf.org/internet-drafts/draft-ietf-sip-uri-list-conferencing
-00.txt
http://www.ietf.org/internet-drafts/draft-ietf-sip-uri-list-subscribe-00
.txt
http://www.ietf.org/internet-drafts/draft-ietf-sip-multiple-refer-00.txt


However these documents have already undergoing thorough review and WGLC
in the SIPPING group (WGLC initiated 12th January 2005 to complete 12th
February 2005) and for that reason, in the recent charter revision, no
WGLC milestone was given for the these documents, and the documents will
be submitted directly to the IESG by the SIP chairs.

However, while we produce the documentation for IESG submission, now
would be an extremely good time if you are seeing these documents for
the first time, to have a look and raise any concerns.

The documents are based on the framework described in
http://www.ietf.org/internet-drafts/draft-ietf-sipping-uri-services-06.t
xt. This document remains with SIPPING, and is indeed has completed IESG
last call. It has recently been updated to cater for the name changes in
the above documents.

Regards

Keith=20

Keith Drage
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 25 11:59:51 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRso9-0001OO-3k; Mon, 25 Sep 2006 11:55:49 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRso7-0001O4-Mb
	for sip@ietf.org; Mon, 25 Sep 2006 11:55:47 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRso5-0002uw-CQ
	for sip@ietf.org; Mon, 25 Sep 2006 11:55:47 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 25 Sep 2006 11:55:37 -0400
X-IronPort-AV: i="4.09,215,1157342400"; 
	d="scan'208"; a="104348694:sNHT363334398"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8PFtWu1031906; Mon, 25 Sep 2006 11:55:32 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8PFtWuI005349; 
	Mon, 25 Sep 2006 11:55:32 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Sep 2006 11:55:32 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Mon, 25 Sep 2006 11:55:32 -0400
Message-ID: <4517FBF3.4060708@cisco.com>
Date: Mon, 25 Sep 2006 11:55:31 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Dale.Worley@comcast.net
Subject: Re: [Sip] GRUU and grid
References: <200609211718.k8LHIJg0010220@dragon.ariadne.com>	<4512DD5C.80403@cisco.com>
	<200609250246.k8P2ko0k013193@dragon.ariadne.com>
In-Reply-To: <200609250246.k8P2ko0k013193@dragon.ariadne.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 25 Sep 2006 15:55:32.0233 (UTC)
	FILETIME=[07E0FF90:01C6E0BB]
DKIM-Signature: a=rsa-sha1; q=dns; l=2025; t=1159199732; x=1160063732;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20grid
	|To:Dale.Worley@comcast.net;
	X=v=3Dcisco.com=3B=20h=3DJ0L+1lFe8flUOjLWQMT19RKfF70=3D;
	b=tDHPnrMvEoK1O+2A5BVff6An43QDNKyvqmDlToxNnhIO+nUnNJKQ6tX8ZaP1u3dNyeFbMUuU
	/fplWi32qA4luj6pFIVb90L1SSSajJSxts3OyHwUqpXIHUi2FMmJUjFO;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: cab78e1e39c4b328567edb48482b6a69
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Dale.Worley@comcast.net wrote:
>    From: Paul Kyzivat <pkyzivat@cisco.com>
> 
>    If header parameters had been made mandatory in 3261 this would
>    probably work well. But inclusion of header parameters into
>    requests is discretionary in 3261, and there are warnings of how it
>    can be dangerous, so I don't believe it can be relied upon.
> 
> My reading is that including a header parameters is mandatory unless
> the UA has a positive reason not to include it.  Maybe that means that
> some UAs don't bother to process any header parameter, but that seems
> to me to be a violation.

What did you use to form your interpretation? The following is from 19.1.5:

    An implementation SHOULD treat the presence of any headers or body
    parts in the URI as a desire to include them in the message, and
    choose to honor the request on a per-component basis.

    An implementation SHOULD NOT honor these obviously dangerous header
    fields: From, Call-ID, CSeq, Via, and Record-Route.

    An implementation SHOULD NOT honor any requested Route header field
    values in order to not be used as an unwitting agent in malicious
    attacks.

    An implementation SHOULD NOT honor requests to include header fields
    that may cause it to falsely advertise its location or capabilities.
    These include: Accept, Accept-Encoding, Accept-Language, Allow,
    Contact (in its dialog usage), Organization, Supported, and User-
    Agent.

    An implementation SHOULD verify the accuracy of any requested
    descriptive header fields, including: Content-Disposition, Content-
    Encoding, Content-Language, Content-Length, Content-Type, Date,
    Mime-Version, and Timestamp.

This seems to give the UA complete freedom to ignore the desire to 
include headers as it sees fit. Given the requirement not to include any 
obviously dangerous header fields. I expect that a UA will would be 
imprudent if it included any header field it doesn't understand.

	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 25 18:40:02 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRz3U-0000EU-0E; Mon, 25 Sep 2006 18:36:04 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRz3T-0000E7-9e
	for sip@ietf.org; Mon, 25 Sep 2006 18:36:03 -0400
Received: from ihemail1.lucent.com ([135.245.0.33])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRz3R-0001QU-Tu
	for sip@ietf.org; Mon, 25 Sep 2006 18:36:03 -0400
Received: from ilexp01.ndc.lucent.com (h135-3-39-1.lucent.com [135.3.39.1])
	by ihemail1.lucent.com (8.13.6/IER-o) with ESMTP id k8PMZtcR029001
	for <sip@ietf.org>; Mon, 25 Sep 2006 17:35:55 -0500 (CDT)
Received: from DEEXP02.DE.lucent.com ([135.248.187.66]) by
	ilexp01.ndc.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Mon, 25 Sep 2006 17:35:55 -0500
Received: from DEEXC1U01.de.lucent.com ([135.248.187.20]) by
	DEEXP02.DE.lucent.com with Microsoft SMTPSVC(6.0.3790.0); 
	Tue, 26 Sep 2006 00:35:53 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 26 Sep 2006 00:35:51 +0200
Message-ID: <5D1A7985295922448D5550C94DE291804A5D7F@DEEXC1U01.de.lucent.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WGLC: draft-ietf-sip-consent-framework-00
Thread-Index: Acbg8vQ+HDWNH8NTSfm8bQQllmTQ0A==
From: "Drage, Keith \(Keith\)" <drage@lucent.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 25 Sep 2006 22:35:53.0881 (UTC)
	FILETIME=[F5E59890:01C6E0F2]
X-Spam-Score: 1.1 (+)
X-Scan-Signature: cab78e1e39c4b328567edb48482b6a69
Subject: [Sip] WGLC: draft-ietf-sip-consent-framework-00
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

(As WG chair)

Because the document

A Framework for Consent-Based Communications in the Session Initiation
Protocol (SIP)

At

http://www.ietf.org/internet-drafts/draft-ietf-sip-consent-framework-00.
txt

Defines new response codes, and header fields, it has been transferred
to the SIP WG from SIPPING.

This mail is to announce Working Group Last Call for this document=20
                         -----------------------
for which we request comments to be made by=20

	17th October 2006
	-----------------

For each comment, please indicate clearly:
-	the nature of the comment (editorial, minor technical,
technical, spec is totally broken...),=20
-	the position in the document (section and paragraph numbers
please (it helps if you also quote the sentence or paragraph you are
addressing),
-	the comment itself,
-	any proposed resolution.

This WGLC is coordinated with two related documents that remain in the
SIPPING group

draft-ietf-sipping-pending-additions-00.txt
draft-ietf-sipping-consent-format-00.txt

Regards

Keith


Keith Drage
drage@lucent.com
tel: +44 1793 776249

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Mon Sep 25 19:19:53 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GRzha-00030l-M1; Mon, 25 Sep 2006 19:17:30 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GRzhZ-00030g-3v
	for sip@ietf.org; Mon, 25 Sep 2006 19:17:29 -0400
Received: from rwcrmhc12.comcast.net ([216.148.227.152])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GRzhX-0008Hr-SU
	for sip@ietf.org; Mon, 25 Sep 2006 19:17:29 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (rwcrmhc12) with ESMTP
	id <20060925231723m1200orag2e>; Mon, 25 Sep 2006 23:17:24 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8PNHMUm013680;
	Mon, 25 Sep 2006 19:17:22 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8PNHMuG013676;
	Mon, 25 Sep 2006 19:17:22 -0400
Date: Mon, 25 Sep 2006 19:17:22 -0400
Message-Id: <200609252317.k8PNHMuG013676@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <4517FBF3.4060708@cisco.com> (pkyzivat@cisco.com)
Subject: Re: [Sip] GRUU and grid
References: <200609211718.k8LHIJg0010220@dragon.ariadne.com>	<4512DD5C.80403@cisco.com>
	<200609250246.k8P2ko0k013193@dragon.ariadne.com>
	<4517FBF3.4060708@cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 08170828343bcf1325e4a0fb4584481c
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Paul Kyzivat <pkyzivat@cisco.com>

   What did you use to form your interpretation? The following is from 19.1.5:

       An implementation SHOULD treat the presence of any headers or body
       parts in the URI as a desire to include them in the message, and
       choose to honor the request on a per-component basis.

I take "SHOULD" as meaning "Do it unless you've got a good reason not
to."

But has anyone taken a survey on what real UAs do?  It seems that's
the important question.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 26 03:41:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GS7Vi-0000jv-90; Tue, 26 Sep 2006 03:37:46 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GS7Vh-0000jh-0e
	for sip@ietf.org; Tue, 26 Sep 2006 03:37:45 -0400
Received: from mgw-ext13.nokia.com ([131.228.20.172])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GS7Vf-00078K-Gb
	for sip@ietf.org; Tue, 26 Sep 2006 03:37:44 -0400
Received: from esebh105.NOE.Nokia.com (esebh105.ntc.nokia.com [172.21.138.211])
	by mgw-ext13.nokia.com (Switch-3.1.10/Switch-3.1.10) with ESMTP id
	k8Q7bgIM023470; Tue, 26 Sep 2006 10:37:42 +0300
Received: from esebh001.NOE.Nokia.com ([172.21.138.28]) by
	esebh105.NOE.Nokia.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Sep 2006 10:37:42 +0300
Received: from [172.21.36.67] ([172.21.36.67]) by esebh001.NOE.Nokia.com with
	Microsoft SMTPSVC(5.0.2195.6881); Tue, 26 Sep 2006 10:37:41 +0300
Message-ID: <4518D8C5.6060804@nokia.com>
Date: Tue, 26 Sep 2006 10:37:41 +0300
From: Aki Niemi <aki.niemi@nokia.com>
User-Agent: Thunderbird 1.5.0.5 (X11/20060728)
MIME-Version: 1.0
To: "ext Vrancken, Johnny" <Johnny.Vrancken@siemens.com>
References: <C12A115F71992249AC6EA6AEA5DED00601472634@BRU0038A.ww018.siemens.net>
In-Reply-To: <C12A115F71992249AC6EA6AEA5DED00601472634@BRU0038A.ww018.siemens.net>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 26 Sep 2006 07:37:41.0745 (UTC)
	FILETIME=[A617FE10:01C6E13E]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: c3a18ef96977fc9bcc21a621cbf1174b
Cc: sip@ietf.org
Subject: [Sip] Re: Comments on draft-niemi-sip-subnot-etags-01
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Johnny,

Thanks for the feedback. A couple of comments inline; the rest I patched
into my working copy.

ext Vrancken, Johnny kirjoitti:
> PAGE 7: "The Content-Type header field of the NOTIFY request is set an
> appropriate value, depending on the event package, but  .....The
> Content-Length MUST be set to zero, and no payload is attached to the
> message."
> COMMENT: The first part of this sentence is to be omitted, as a
> Content-Type header field is only required if the message body is not
> empty.

The way this was intended to work was that the notifier sends a NULL
body, like this:

...
Content-Type: application/pidf+xml
Content-Length: 0

What you're suggesting is that the notifier sends no body at all. I
think that might not work, as some UAs might reject a NOTIFY that has no
body (as it's supposed to always have one).

<snip />

> PAGE 9: "and entity-tag in RFC3265"
> COMMENT: entity-tag is defined in RFC3903
> 
> PAGE 9: Grammar
> COMMENT: the syntax of the new header allows a subscriber to supply only
> a single entity-tag value. The syntax of similar header fields for
> conditional requests in RFC2616 (If-Match, If-None-Match) allows to
> provide multiple entity-tag values for these headers.

True, but the grammar for these only allows a single entity-tag.

> Therefore, it can be considered to allow multiple entity-tag values for
> the new Suppress-Body-If-Match header. If there is a match, the NOTIFY
> request will contain the entity-tag of the resource state that is valid.
> Allowing multiple entity-tag values for the Suppress-Notify-If-Match
> header is not meaningful, as the subscriber, in case of a match, does
> not receive information (NOTIFY request) about which one of entity-tags
> is valid.

I'm not sure if you're arguing for or against having multiple
entity-tags in these fields.

As entity-tags in SIP events are always tied to a subscription anyway,
there's no use-case I came up with that would actually make use of more
than a single entity-tag. Similarly, I dropped the notion of weak entity
tags, as they are a contentious issue even in HTTP and I had absolutely
no idea how they would work in SIP.

> General COMMENT: Applicability of the ETag mechanism for resource list
> subscriptions.
> The document focuses on an ETag mechanism for subscriptions targeted on
> a single resource. However, one can also subscribe for a resource list
> (RFC4662). In that case, the resulting NOTIFY requests comprise the
> resource state of no / one / multiple resources in addition to Resource
> List Meta Information (RLMI) pertaining to the resource list
> subscription. This RLMI information contains information about the
> individual resources and the status of the virtual subscriptions.
> Your document preferably should include a statement about the
> applicability of the ETag mechanism for resource list subscriptions.
> You may either state that
> 1. it is out of scope of the document
> 2. the mechanism also can be applied to resource list subscriptions. In
> that case you need to clearly specify what the ETag represents (e.g.
> does it also include the full RLMI information ?)
> 3. you could consider to exchange a set of ETags, one for each resource
> in the list. In the NOTIFY request, these ETags can be included in the
> RLMI information but for the SUBSCRIBE request a new mechanism is to be
> introduced to exchange the ETags of the individual resources.

I think this mechanism applies to resource-list subscriptions
out-of-the-box, as it should to any type of subscriptions. The etags
work on the level of subscriptions, and really don't care what event
package is carried on top.

Can you elaborate why there would need to be a need for additional
specification?

Cheers,
Aki

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 26 09:37:04 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSD45-0006O1-TU; Tue, 26 Sep 2006 09:33:37 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSD44-0006BD-0Q
	for sip@ietf.org; Tue, 26 Sep 2006 09:33:36 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSD3z-000137-Md
	for sip@ietf.org; Tue, 26 Sep 2006 09:33:35 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 26 Sep 2006 09:33:30 -0400
X-IronPort-AV: i="4.09,219,1157342400"; 
	d="scan'208"; a="104532561:sNHT205576210"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8QDXTMk029273; Tue, 26 Sep 2006 09:33:29 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8QDXTuI019937; 
	Tue, 26 Sep 2006 09:33:29 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Sep 2006 09:33:29 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Sep 2006 09:33:29 -0400
Message-ID: <45192C28.3030302@cisco.com>
Date: Tue, 26 Sep 2006 09:33:28 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Dale.Worley@comcast.net
Subject: Re: [Sip] GRUU and grid
References: <200609211718.k8LHIJg0010220@dragon.ariadne.com>	<4512DD5C.80403@cisco.com>	<200609250246.k8P2ko0k013193@dragon.ariadne.com>	<4517FBF3.4060708@cisco.com>
	<200609252317.k8PNHMuG013676@dragon.ariadne.com>
In-Reply-To: <200609252317.k8PNHMuG013676@dragon.ariadne.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 26 Sep 2006 13:33:29.0183 (UTC)
	FILETIME=[5A2886F0:01C6E170]
DKIM-Signature: a=rsa-sha1; q=dns; l=1586; t=1159277609; x=1160141609;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20grid
	|To:Dale.Worley@comcast.net;
	X=v=3Dcisco.com=3B=20h=3DJ0L+1lFe8flUOjLWQMT19RKfF70=3D;
	b=ck1LX1a8nP6F3br+by4zp0I+xYWauOStu5HLaqN2gsY2DQA9qRbB2ljEq3agPxSbcPR74ow3
	66iZx8Hin0WdWYRp/IZo5JVwzO3Qu/hTZAiBYpAGCZjeSbrrXyahJvLc;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 39bd8f8cbb76cae18b7e23f7cf6b2b9f
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Dale.Worley@comcast.net wrote:
>    From: Paul Kyzivat <pkyzivat@cisco.com>
> 
>    What did you use to form your interpretation? The following is from 19.1.5:
> 
>        An implementation SHOULD treat the presence of any headers or body
>        parts in the URI as a desire to include them in the message, and
>        choose to honor the request on a per-component basis.
> 
> I take "SHOULD" as meaning "Do it unless you've got a good reason not
> to."

I agree with you about the meaning of SHOULD. But the quote is worded in 
an unusual way. It doesn't say the implementation should include them in 
the request. It says the implementation should treat the presence of the 
header as a desire (on the part of creator of the URI I presume) to have 
them included in the message, and that the implementation should "choose 
to honor the request on a per-component basis".

The last is a little bit vague. I take it to mean that the 
implementation should *choose* (that is follow the policy of the 
implementation) to honor *each* header in the URI on a header by header 
basis based on local policy for that header.

So I think all the SHOULD is saying is that the implementation should 
not ignore the headers out of hand, but instead should apply a local 
policy to each one. But it could still be the case that the local policy 
for all headers is to leave them out.

> But has anyone taken a survey on what real UAs do?  It seems that's
> the important question.

I agree, and I don't know. Maybe Robert has some data from SIPIT.

	Paul

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 26 16:06:50 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSJ8E-0002ly-3J; Tue, 26 Sep 2006 16:02:18 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSJ8D-0002lt-8F
	for sip@ietf.org; Tue, 26 Sep 2006 16:02:17 -0400
Received: from mailgate.siemenscomms.co.uk ([195.171.110.225]
	helo=bemg01.siemenscomms.co.uk)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSJ8A-0000hA-Ku
	for sip@ietf.org; Tue, 26 Sep 2006 16:02:17 -0400
Received: from CONVERSION-DAEMON.siemenscomms.co.uk by siemenscomms.co.uk
	(PMDF V6.0-24 #40642) id <0J6700D01UBW2I@siemenscomms.co.uk> for
	sip@ietf.org; Tue, 26 Sep 2006 21:02:20 +0100 (BST)
Received: from ntht207e.uksgcs.siemenscomms.co.uk ([137.223.247.82])
	by siemenscomms.co.uk (PMDF V6.0-24 #40642)
	with ESMTP id <0J6700C3GUBVEG@siemenscomms.co.uk>; Tue,
	26 Sep 2006 21:02:19 +0100 (BST)
Received: by ntht207e.uksgcs.siemenscomms.co.uk with Internet Mail Service
	(5.5.2657.72)	id <TCV7YFZ6>; Tue, 26 Sep 2006 21:02:05 +0100
Content-return: allowed
Date: Tue, 26 Sep 2006 21:02:02 +0100
From: "Elwell, John" <john.elwell@siemens.com>
To: Cullen Jennings <fluffy@cisco.com>, Jon Peterson <jon.peterson@neustar.biz>
Message-id: <50B1CBA96870A34799A506B2313F266709F22FA1@ntht201e.siemenscomms.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 187ae6c2eea74946c0ab707161f6256d
Cc: SIP <sip@ietf.org>, Paul Kyzivat <pkyzivat@cisco.com>
Subject: [Sip] FW: Rejecting connected identity (was RE:
 draft-ietf-sip-connecte	d-id entity-01 comments)
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Cullen, Jon,

In case you missed this (it wasn't addressed directly to you), I would
greatly appreciate an opinion from each of you on this remaining issue in
connected-identity. Just to summarise, RFC 4474 leaves it up to policy
whether to return a 428 response if Identity is missing, but mandates the
sending of a 436, 437 or 438 response for certain errors arising while
verifying the signature. It seems that for mid dialog requests this
behaviour could be harmful. What does the UAC for the mid dialog request do
if it receives 436, 437 or 438? If the mid-dialog request was solely for the
purpose of connected identity, it can give up and allow the call to continue
as is. But if the request was for some other purpose (e.g., renegotiating
the session because of hold, say, or session timer refresh), the UAC really
wants it to work. For the normal case where the Authentication Service is at
a proxy, not at the UAC, the UAC cannot force the Authentication Service to
refrain from putting this unverifiable signature in the mid-dialog request,
so any attempts to repeat the request would most likely be doomed to getting
the same response.

It seems there are three things we could do, none very attractive:
1. Get connected-identity to modify the procedures of RFC 4474 for a
verifier by softening the requirements for sending 436, 437 and 438 in
response to mid-dialog requests. But then a mid-dialog request from a rogue
source would be accepted.
2. Say that the Authentication Service should omit the signing of mid-dialog
requests if a previous attempt has resulted in 436, 437 or 438. But this
implies statefulness at the AS.
3. Accept the fact the mid-dialog requests can fail in this way and
therefore things like session refresh and session renegotiation cannot be
done, probably resulting in call failure. Sounds bad, but it is no different
from an initial INVITE request, where there is nothing the UAC can do if the
AS inserts an Identity header that gets rejected with 436, 437 or 438.

John

> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> Sent: 22 September 2006 19:26
> To: Elwell, John
> Cc: Cullen Jennings; SIP
> Subject: Re: Rejecting connected identity (was RE: 
> draft-ietf-sip-connected-id entity-01 comments)
> 
> John,
> 
> I want to hear what others, especially Jon and Cullen, have 
> to say about 
> this.
> 
> It is of some concern to me that a call might fail because of some 
> problem with the identity mechanism when the same call might have 
> succeeded in the absence of any identity.
> 
> But possibly the solution to this is policy in the 
> implementation of the 
> verifier. What to do in the case of the conditions that lead to these 
> errors could be configurable in the verifier: either to generate the 
> error or simply to remove the identity info from the message. And the 
> policy could conceivably vary based on attributes of the 
> message, such 
> as whether it is in-dialog or not.
> 
> Does it require a change to 4474 to permit that kind of policy?
> 
> It would be annoying if the end user had no control over the 
> insertion 
> and verification of identity, and it resulted in calls 
> failing that the 
> user would like to permit. But I suppose that is itself a policy 
> decision. There are certainly enterprises that want to exert 
> that kind 
> of control over what users are permitted to do.
> 
> 	Paul
> 
> Elwell, John wrote:
> > Paul,
> > 
> > I agree with most of your points, and on reflection I think 
> I agree that the
> > solution has to be with the verifier.
> > 
> > I think RFC 4474 is not a problem as far as sending a 428 
> 'Use Identity
> > Header' response is concerned, because that is left to 
> policy, so we could
> > say in connected-identity that policy should be to not send 428.
> > 
> > However, 436, 437 and 438 responses are all a problem, 
> because RFC 4474 says
> > that they MUST be sent under respective conditions. 
> Interestingly, though,
> > there are other failure scenarios that can arise from the 
> procedures of
> > section 6 of RFC 4474 for which no normative statement is 
> given on how to
> > respond, e.g. invalid Date header field, signer not 
> authoritative for the
> > domain.
> > 
> > So one way to solve the present problem would be for the 
> connected-identity
> > draft to modify verifier behaviour in RFC 4474 in the case 
> of mid-dialog
> > requests. I guess this would mean that it would update RFC 
> 4474 as well as
> > updating RFC 3261. But I don't like this, because it seems 
> to remove some of
> > the security properties of RFC 4474.
> > 
> > Another way would be to accept that 436, 437 and 438 
> responses will be sent,
> > and failure to verify a signature will therefore result in 
> inability to
> > process the UPDATE or re-INVITE request, and hence if the UPDATE or
> > re-INVITE request was for some other purpose such as 
> session timer refresh
> > or modifying the session, that action will fail. Then the 
> call will fail (in
> > the case of inability to refresh the session timer) or the session
> > modification will fail. I guess this is somewhat analogous 
> to caller ID
> > verification failure in an INVITE request - it is 
> impossible to establish a
> > call if verification fails. Moreover, the UAC has no 
> ability to rectify the
> > situation, since it is at the mercy of a proxy-based 
> Authentication Service
> > that puts a rogue Identity header field in every request. 
> In the connected
> > identity case, the only difference is that the call is 
> already established
> > but is likely to fail if verification fails.
> > 
> > Of course, if the mid-dialog request is indeed from the 
> wrong source, then
> > sending a 436, 437 or 438 response is indeed the correct 
> thing to do, and
> > overriding the verification procedures of RFC 4474 would 
> indeed be the wrong
> > thing to do. So perhaps we just have to accept that these 
> response codes can
> > be received and will lead to failure.
> > 
> > So, my preferred way forward is simply to recommend not 
> sending a 428 and
> > accept the consequences of other responses that the 
> verifier might send.
> > 
> > John
> > 
> >> -----Original Message-----
> >> From: Paul Kyzivat [mailto:pkyzivat@cisco.com] 
> >> Sent: 22 September 2006 15:13
> >> To: Elwell, John
> >> Cc: Cullen Jennings; SIP
> >> Subject: Re: [Sip] RE: 
> draft-ietf-sip-connected-identity-01 comments
> >>
> >>
> >>
> >> Elwell, John wrote:
> >>>> From: Cullen Jennings [mailto:fluffy@cisco.com] 
> >>>> When an Update is sent. Are there any conditions under which 
> >>>> it might  
> >>>> be rejected. Bad identity for example. I think that 
> might need a  
> >>>> little discussion and also what the UA does when it sends 
> >> an update  
> >>>> with a no identity and it gets rejected.
> >>> [JRE] A very good point. We don't want to get to a 
> >> situation where it is
> >>> impossible to perform a mid-dialog request (e.g., for 
> >> purposes such as
> >>> session timer refresh or session re-negotiation) just 
> >> because  connected
> >>> identity fails.
> >>> My proposed fix is as follows:
> >>> 1. Say that a UAS SHOULD NOT reject a mid-dialog request 
> >> with 428 'Use
> >>> Identity Header'.
> >> I'm not sure about this. At the least I think this one needs 
> >> some clear 
> >> explanation of the SHOULD NOT - about the conditions when 
> it can be 
> >> violated.
> >>
> >> I see this as somewhat analogous to doing a digest challenge on an 
> >> in-dialog request. In some cases it is the right thing to do.
> >>
> >> A UA that imposes such a requirement will be limited in what 
> >> it can do, 
> >> but that may still be right in some cases.
> >>
> >>> 2. Say that an Authentication Service MUST NOT add an 
> >> Identity header field
> >>> to a mid-dialog request if a previous request on that 
> >> dialog has resulted in
> >>> 436 'Bad Identity-Info', 437 'Unsupported Certificate' or 
> >> 438 'Invalid
> >>> Identity Header'.
> >> This requirement would force the authentication service to 
> be dialog 
> >> stateful, which is not ideal. Better to push the state 
> back into the 
> >> sender of the request. This may require a way for the UAC 
> to tell the 
> >> authentication service not to act.
> >>
> >>> 3. Say that a UAC MUST repeat a mid-dialog request that 
> >> results in one of
> >>> these responses if the mid-dialog request was not solely 
> >> for the purpose of
> >>> connected identity. If solely for the purpose of connected 
> >> identity there is
> >>> no point in repeating it, so I will say "SHOULD NOT take 
> any further
> >>> action".
> >> This seems wrong to me.
> >>
> >> I think that the remedy to these is in the verifier. The 
> >> purpose of the 
> >> verifier is ultimately to drive an authorization decision. If 
> >> authorization would succeed in the absence of the 
> identity, then the 
> >> request should be permitted to continue as if the identity 
> >> was not present.
> >>
> >> Unfortunately this would seem to require a revision to 4474 
> >> even though 
> >> the paint is hardly dry on it.
> >>
> >> If this is done, then there is no need of a mechanism to cause the 
> >> authentication service *not* to authenticate. If this is 
> *not* done, 
> >> then that need remains, which will still require a change to 4474.
> >>
> >> 	Paul
> >>
> >> _______________________________________________
> >> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >> This list is for NEW development of the core SIP Protocol
> >> Use sip-implementors@cs.columbia.edu for questions on current sip
> >> Use sipping@ietf.org for new developments on the application of sip
> >>
> > 
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Tue Sep 26 22:27:44 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSP5a-00052A-Vu; Tue, 26 Sep 2006 22:23:58 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSP5Z-000515-Jt
	for sip@ietf.org; Tue, 26 Sep 2006 22:23:57 -0400
Received: from alnrmhc14.comcast.net ([206.18.177.54])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSP57-0007yB-MC
	for sip@ietf.org; Tue, 26 Sep 2006 22:23:31 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc14) with ESMTP
	id <20060927022325b1400jbsdfe>; Wed, 27 Sep 2006 02:23:29 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8R2NOUm024763
	for <sip@ietf.org>; Tue, 26 Sep 2006 22:23:24 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8R2NODr024759;
	Tue, 26 Sep 2006 22:23:24 -0400
Date: Tue, 26 Sep 2006 22:23:24 -0400
Message-Id: <200609270223.k8R2NODr024759@dragon.ariadne.com>
From: Dale.Worley@comcast.net
To: sip@ietf.org
In-reply-to: <45192C28.3030302@cisco.com> (pkyzivat@cisco.com)
Subject: Re: [Sip] GRUU and grid
References: <200609211718.k8LHIJg0010220@dragon.ariadne.com>	<4512DD5C.80403@cisco.com>	<200609250246.k8P2ko0k013193@dragon.ariadne.com>	<4517FBF3.4060708@cisco.com>
	<200609252317.k8PNHMuG013676@dragon.ariadne.com>
	<45192C28.3030302@cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: d6b246023072368de71562c0ab503126
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Paul Kyzivat <pkyzivat@cisco.com>

   I agree with you about the meaning of SHOULD. But the quote is worded in 
   an unusual way. It doesn't say the implementation should include them in 
   the request. It says the implementation should treat the presence of the 
   header as a desire (on the part of creator of the URI I presume) to have 
   them included in the message, and that the implementation should "choose 
   to honor the request on a per-component basis".

Yeah, I have to admit you have a point there.

   > But has anyone taken a survey on what real UAs do?  It seems that's
   > the important question.

   I agree, and I don't know. Maybe Robert has some data from SIPIT.

There's a SIPit coming up in a month...

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 01:53:57 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSSIy-0001ln-9H; Wed, 27 Sep 2006 01:50:00 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSSIw-0001lZ-8Q
	for sip@ietf.org; Wed, 27 Sep 2006 01:49:58 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSSIr-0005WZ-So
	for sip@ietf.org; Wed, 27 Sep 2006 01:49:58 -0400
Received: from sj-dkim-7.cisco.com ([171.68.10.88])
	by sj-iport-5.cisco.com with ESMTP; 26 Sep 2006 22:49:52 -0700
X-IronPort-AV: i="4.09,223,1157353200"; 
	d="scan'208"; a="325727969:sNHT170465586"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-7.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8R5npcs022209 for <sip@ietf.org>; Tue, 26 Sep 2006 22:49:51 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com
	[128.107.191.100])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8R5npid019699
	for <sip@ietf.org>; Tue, 26 Sep 2006 22:49:51 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.211);
	Tue, 26 Sep 2006 22:49:50 -0700
Received: from [10.32.241.149] ([10.32.241.149]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Sep 2006 22:49:50 -0700
Message-ID: <451A10FD.8040809@cisco.com>
Date: Wed, 27 Sep 2006 01:49:49 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: IETF SIP List <sip@ietf.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 27 Sep 2006 05:49:50.0777 (UTC)
	FILETIME=[BF826290:01C6E1F8]
DKIM-Signature: a=rsa-sha1; q=dns; l=2220; t=1159336191; x=1160200191;
	c=relaxed/simple; s=sjdkim7002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:GRUU=20and=20Grid=20alternative;
	X=v=3Dcisco.com=3B=20h=3DBjylQNNbuVm/szx83UP/baT2hIw=3D;
	b=lygZ3sIBWhSEwPzfS/tjMIk7WQBQ6nImFfYMlMNXr7LSPiMa3NAOIJFgCAXoeq00zAX+yly5
	Gqeqcb2U7Tv+JdQFKWQnAJyXUBojpWjLkRQVRcAKeWThacnTig4+uHXN;
Authentication-Results: sj-dkim-7.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 21c69d3cfc2dd19218717dbe1d974352
Subject: [Sip] GRUU and Grid alternative
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

During our call on GRUU last week, there was a discussion on this issue 
that ekr raised, where he would like to see the grid usable outside of 
just gruu, i.e., with any AOR.

During the call, I made a suggestion for an alternative solution, and 
there was agreement amongst those on the call for the proposed approach.

The basic idea would be to remove the grid mechanism entirely from the 
gruu draft. Instead, a separate specification would be developed which 
would allow for loose routing to apply to user agents. So, consider a UA 
which registers. It would include a contact and a Supported header field 
with the value "ua-route". The registrar, assuming it understands this, 
notes that the UA supports UA loose routing and stores the contact. When 
an incoming call arrives for the AOR, rather than rewriting the R-URI 
with the registered contact, it pushes the registered contact into a 
Route header and leaves the R-URI alone (assuming the registered UA 
supports this mechanism).

How does this solve the grid problem? Lets say my AOR is 
sip:jdrosen@cisco.com. I, as a UA, can mint a URI with some arbitrary 
parameter, say sip:jdrosen@cisco.com;foo=baz, and hand it out to some 
correspondent. When a correspondent sends a request to that URI, it 
arrives at my home proxy. From there, since the R-URI is NOT rewritten, 
the entire URI, parameters and all, is passed to the UA. Thus, the UA 
knows the URI that was de-referenced. We wouldn't necessarily have to 
standardize a specific URI parameter, like grid, to carry the opaque data.

This trick solves a whole bunch of other problems too. It would 
eliminate the need for the IMS P-Called-Party-ID header field, and it 
would help clarify when a request is retargeted (change in R-URI) vs. 
when its just being delivered to the recipient (no change in R-URI).

Comments?

-Jonathan R.


-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 01:58:38 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSSPF-0005bV-6w; Wed, 27 Sep 2006 01:56:29 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSSPD-0005Zv-3Y
	for sip@ietf.org; Wed, 27 Sep 2006 01:56:27 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSSPB-0006DG-PW
	for sip@ietf.org; Wed, 27 Sep 2006 01:56:27 -0400
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-6.cisco.com with ESMTP; 26 Sep 2006 22:56:25 -0700
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-3.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8R5uPPa028537; Tue, 26 Sep 2006 22:56:25 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com
	[128.107.191.100])
	by sj-core-5.cisco.com (8.12.10/8.12.6) with ESMTP id k8R5uP1E022953;
	Tue, 26 Sep 2006 22:56:25 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.211);
	Tue, 26 Sep 2006 22:56:24 -0700
Received: from [10.32.241.149] ([10.32.241.149]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Sep 2006 22:56:24 -0700
Message-ID: <451A1287.6040208@cisco.com>
Date: Wed, 27 Sep 2006 01:56:23 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: kasturi Narayanan <knarayan@sipera.com>
References: <012d01c6dcbc$a60b7950$ec00000a@Kasturi>
In-Reply-To: <012d01c6dcbc$a60b7950$ec00000a@Kasturi>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 27 Sep 2006 05:56:24.0631 (UTC)
	FILETIME=[AA43BC70:01C6E1F9]
DKIM-Signature: a=rsa-sha1; q=dns; l=1352; t=1159336585; x=1160200585;
	c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20Regarding=20=20GRUU=20=20Draft;
	X=v=3Dcisco.com=3B=20h=3DGEfSFPgTQ9D7kcromx6Q/DJcWsU=3D;
	b=o+BWd6hKLy6DcFamQDQaVGWycRLgZaBGtwiQwMMR3A/Z1MQWP/34aVhmAIwtN6KswM4cROtq
	/1q1oXKMrLpNMw7+/C/9yWCxsf6JCGHb6LYggx43QACEFXoIgy6TZfh9;
Authentication-Results: sj-dkim-3.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b19722fc8d3865b147c75ae2495625f2
Cc: sip@ietf.org
Subject: [Sip] Re: Regarding  GRUU  Draft
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

This requirement is there to eliminate spirals that would otherwise 
occur if there is a separate edge and home proxy. That problem existed 
in many previous versions of the draft with a very ugly hack on 
record-route removal to fix.

-Jonathan R.

kasturi Narayanan wrote:

>  Jonathan,
> I have a question regarding the requirement for Record Routing by both the
> home proxies of the Initiating Domain and Receiving Domain in Section 8.2.2
> for dialog initiating Requests with GRUU contact.
> 
> Why is this requirement? Why can't it be treated as if a UA has inserted a
> Domain name in the Contact and just route it to after resolving the Domain
> name (which will happen to be the proxy responsible for that Domain). 
> This way the requirement that all subsequent requests have to traverse the
> same set of 2 proxies will not be needed, it will be just one proxy
> corresponding to the Domain which is responsible for routing based on GRUU.
> 
> May be I am missing something.
> 
> Kasturi
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 02:00:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSSRJ-0007Cj-5l; Wed, 27 Sep 2006 01:58:37 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSSRH-000744-Ad
	for sip@ietf.org; Wed, 27 Sep 2006 01:58:35 -0400
Received: from sj-iport-3-in.cisco.com ([171.71.176.72]
	helo=sj-iport-3.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GSSRF-0006M5-UP for sip@ietf.org; Wed, 27 Sep 2006 01:58:35 -0400
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-3.cisco.com with ESMTP; 26 Sep 2006 22:58:33 -0700
X-IronPort-AV: i="4.09,223,1157353200"; 
	d="scan'208"; a="444314588:sNHT54468612"
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8R5wX4F016442; Tue, 26 Sep 2006 22:58:33 -0700
Received: from xbh-sjc-211.amer.cisco.com (xbh-sjc-211.cisco.com
	[171.70.151.144])
	by sj-core-5.cisco.com (8.12.10/8.12.6) with ESMTP id k8R5wX1E023666;
	Tue, 26 Sep 2006 22:58:33 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Sep 2006 22:58:33 -0700
Received: from [10.32.241.149] ([10.32.241.149]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Tue, 26 Sep 2006 22:58:32 -0700
Message-ID: <451A1307.6020809@cisco.com>
Date: Wed, 27 Sep 2006 01:58:31 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Dale.Worley@comcast.net
Subject: Re: [Sip] GRUU and Anonymity
References: <33D71F0FC0684C4C8A3BB76989EDED9C028BDF73@eesmdmw020.eemea.ericsson.se>
	<200609201653.k8KGrXnU008770@dragon.ariadne.com>
In-Reply-To: <200609201653.k8KGrXnU008770@dragon.ariadne.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 27 Sep 2006 05:58:33.0039 (UTC)
	FILETIME=[F6CD3DF0:01C6E1F9]
DKIM-Signature: a=rsa-sha1; q=dns; l=2618; t=1159336713; x=1160200713;
	c=relaxed/simple; s=sjdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=NynhaMI5E613zE4Dq4aWjwhcxHJyJTlfT9dChZYu8Sq8Fy0ZuOS7INPPDoG+d9jhWfbhG8nU
	0OXRh764EQabEyvUHxqmZsUTkzkikgeOt0wu5jSFzHpAigmMET/wLoUK;
Authentication-Results: sj-dkim-1.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 82c9bddb247d9ba4471160a9a865a5f3
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

One other point on this - if you want to have consecutive calls that 
cannot be correlated, then another solution is to include Privacy: 
header,id into the request. A network anonymization service as already 
defined in RFC 3323 will provide this level of anonymity.

-Jonathan R.

Dale.Worley@comcast.net wrote:

>    From: "Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>
> 
>    That approach has the drawback that if I as an end user want to start
>    consecutive calls that cannot be correlated I need to unregister and
>    register again. Setting aside the burden of doing that through the
>    terminal, while I unregister and register again I might miss some
>    incoming calls.
> 
>    Wouldn't it be better to allow the UA to request a new pseudonym in a
>    registration refreshment?
> 
> There is some context that you haven't seen -- Rosenberg's proposal is
> to provide only a limited amount of anonymity (which is why it's
> called pseudonymous), which is the amount that one already obtains
> when one does not use GRUU.  Since the current Contact and Via values
> reveal the caller's IP address, the pseudonymous GRUUs are only
> required to change when the UA registers from a different IP address,
> which is provided by the requirement that they change with each new
> registration.
> 
> On the other hand, since there is only one pseudonymous GRUU per
> registration and it lasts only as long as the registration, it
> requires a fixed overhead per-registration and no state that lasts
> longer than a registration, and hence is not a burden on registrars
> with limited resources or no long-term state memory.
> 
> The feeling among the people reviewing the GRUU I-D is that it needs
> to provide a mechanism that is "at least as anonymous as current
> practice" before it can progress to being an RFC, but that providing
> "quality anonymity" should be left to another I-D.
> 
> Dale
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 04:12:50 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSUTr-0000Rk-Il; Wed, 27 Sep 2006 04:09:23 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSUTq-0000Rf-9X
	for sip@ietf.org; Wed, 27 Sep 2006 04:09:22 -0400
Received: from mailgate.siemenscomms.co.uk ([195.171.110.225]
	helo=bemg01.siemenscomms.co.uk)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSUTm-0007gL-Sd
	for sip@ietf.org; Wed, 27 Sep 2006 04:09:22 -0400
Received: from CONVERSION-DAEMON.siemenscomms.co.uk by siemenscomms.co.uk
	(PMDF V6.0-24 #40642) id <0J6800601RZQUZ@siemenscomms.co.uk> for
	sip@ietf.org; Wed, 27 Sep 2006 09:09:26 +0100 (BST)
Received: from ntht207e.uksgcs.siemenscomms.co.uk ([137.223.247.82])
	by siemenscomms.co.uk (PMDF V6.0-24 #40642)
	with ESMTP id <0J680066QRZLC7@siemenscomms.co.uk>; Wed,
	27 Sep 2006 09:09:21 +0100 (BST)
Received: by ntht207e.uksgcs.siemenscomms.co.uk with Internet Mail Service
	(5.5.2657.72)	id <TCV7YK7H>; Wed, 27 Sep 2006 09:09:07 +0100
Content-return: allowed
Date: Wed, 27 Sep 2006 09:09:02 +0100
From: "Elwell, John" <john.elwell@siemens.com>
Subject: RE: [Sip] GRUU and Grid alternative
To: Jonathan Rosenberg <jdrosen@cisco.com>, IETF SIP List <sip@ietf.org>
Message-id: <50B1CBA96870A34799A506B2313F266709F23062@ntht201e.siemenscomms.co.uk>
MIME-version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0fa76816851382eb71b0a882ccdc29ac
Cc: Alan Johnston <alan@sipstation.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Yes, and it would also make RFC 4458 (Voicemail-URI) applicable in more
situations (without needing to rely on RFC 4244 (History-Info)), it would
make RFC 4244 more usable, and it would also help with the problem Alan
Johnstone is trying to address in his cc-uui draft in SIPPING. Of course,
the existing deployed base will be a problem for some of these applications.

John

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com] 
> Sent: 27 September 2006 06:50
> To: IETF SIP List
> Subject: [Sip] GRUU and Grid alternative
> 
> During our call on GRUU last week, there was a discussion on 
> this issue 
> that ekr raised, where he would like to see the grid usable 
> outside of 
> just gruu, i.e., with any AOR.
> 
> During the call, I made a suggestion for an alternative solution, and 
> there was agreement amongst those on the call for the 
> proposed approach.
> 
> The basic idea would be to remove the grid mechanism entirely 
> from the 
> gruu draft. Instead, a separate specification would be 
> developed which 
> would allow for loose routing to apply to user agents. So, 
> consider a UA 
> which registers. It would include a contact and a Supported 
> header field 
> with the value "ua-route". The registrar, assuming it 
> understands this, 
> notes that the UA supports UA loose routing and stores the 
> contact. When 
> an incoming call arrives for the AOR, rather than rewriting the R-URI 
> with the registered contact, it pushes the registered contact into a 
> Route header and leaves the R-URI alone (assuming the registered UA 
> supports this mechanism).
> 
> How does this solve the grid problem? Lets say my AOR is 
> sip:jdrosen@cisco.com. I, as a UA, can mint a URI with some arbitrary 
> parameter, say sip:jdrosen@cisco.com;foo=baz, and hand it out to some 
> correspondent. When a correspondent sends a request to that URI, it 
> arrives at my home proxy. From there, since the R-URI is NOT 
> rewritten, 
> the entire URI, parameters and all, is passed to the UA. Thus, the UA 
> knows the URI that was de-referenced. We wouldn't necessarily have to 
> standardize a specific URI parameter, like grid, to carry the 
> opaque data.
> 
> This trick solves a whole bunch of other problems too. It would 
> eliminate the need for the IMS P-Called-Party-ID header field, and it 
> would help clarify when a request is retargeted (change in R-URI) vs. 
> when its just being delivered to the recipient (no change in R-URI).
> 
> Comments?
> 
> -Jonathan R.
> 
> 
> -- 
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ 
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 06:35:37 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSWhk-0002Ge-Ez; Wed, 27 Sep 2006 06:31:52 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSWhj-0002GZ-E0
	for sip@ietf.org; Wed, 27 Sep 2006 06:31:51 -0400
Received: from bounce.versatel.nl ([62.58.50.92])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSWhh-00032o-UB
	for sip@ietf.org; Wed, 27 Sep 2006 06:31:51 -0400
Received: (qmail 3531 invoked by uid 0); 27 Sep 2006 10:31:48 -0000
Received: from dns03.admin.zonnet.nl (HELO dell057.admin.zonnet.nl)
	(postfix@[10.170.1.5]) (envelope-sender <jbemmel@zonnet.nl>)
	by bounce.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 27 Sep 2006 10:31:48 -0000
Received: by dell057.admin.zonnet.nl (Postfix, from userid 33)
	id D9B3C1AE5; Wed, 27 Sep 2006 12:31:47 +0200 (CEST)
Received: from ip-64-7-30-107.dsl.nyc.megapath.net
	(ip-64-7-30-107.dsl.nyc.megapath.net [64.7.30.107]) by
	webmail.versatel.nl
	(Horde MIME library) with HTTP; Wed, 27 Sep 2006 12:31:47 +0200
Message-ID: <20060927123147.bv4koeahkdw8gooc@webmail.versatel.nl>
Date: Wed, 27 Sep 2006 12:31:47 +0200
From: jbemmel@zonnet.nl
To: Jonathan Rosenberg <jdrosen@cisco.com>
Subject: Re: [Sip] GRUU and Grid alternative
References: <451A10FD.8040809@cisco.com>
In-Reply-To: <451A10FD.8040809@cisco.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.0.4)
X-Spam-Score: 0.2 (/)
X-Scan-Signature: cd26b070c2577ac175cd3a6d878c6248
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Jonathan,

Yes, I think this would work as a cleaner / more general solution than grid

For the mechanism, the UA would need to insert a 'lr' parameter into 
its Contact. This is needed for Path proxy traversal, and makes the 
logic at the registrar simpler (i.e. if registered contact URI contains 
a lr then append Route, else rewrite)

Perhaps 'lr' alone could be sufficient (i.e. no Supported) although you 
may want an option tag to detect support for this feature

One difference with request URI rewriting is that the latter is 
automatically a one-time operation: once the URI is rewritten, the 
proxy won't rewrite again when the request spirals. For Route this is 
not the case. OTOH, if there are any Route headers the proxy shouldn't 
be rewriting / adding a route in the first place, so I guess it would 
be covered (my interpretation, RFC3261 doesn't say this explicitly, so 
perhaps worth spending a few words on)

Regards,

Jeroen

> During our call on GRUU last week, there was a discussion on this 
> issue that ekr raised, where he would like to see the grid usable 
> outside of just gruu, i.e., with any AOR.
>
> During the call, I made a suggestion for an alternative solution, and 
> there was agreement amongst those on the call for the proposed 
> approach.
>
> The basic idea would be to remove the grid mechanism entirely from 
> the gruu draft. Instead, a separate specification would be developed 
> which would allow for loose routing to apply to user agents. So, 
> consider a UA which registers. It would include a contact and a 
> Supported header field with the value "ua-route". The registrar, 
> assuming it understands this, notes that the UA supports UA loose 
> routing and stores the contact. When an incoming call arrives for the 
> AOR, rather than rewriting the R-URI with the registered contact, it 
> pushes the registered contact into a Route header and leaves the 
> R-URI alone (assuming the registered UA supports this mechanism).
>
> How does this solve the grid problem? Lets say my AOR is 
> sip:jdrosen@cisco.com. I, as a UA, can mint a URI with some arbitrary 
> parameter, say sip:jdrosen@cisco.com;foo=baz, and hand it out to some 
> correspondent. When a correspondent sends a request to that URI, it 
> arrives at my home proxy. From there, since the R-URI is NOT 
> rewritten, the entire URI, parameters and all, is passed to the UA. 
> Thus, the UA knows the URI that was de-referenced. We wouldn't 
> necessarily have to standardize a specific URI parameter, like grid, 
> to carry the opaque data.
>
> This trick solves a whole bunch of other problems too. It would 
> eliminate the need for the IMS P-Called-Party-ID header field, and it 
> would help clarify when a request is retargeted (change in R-URI) vs. 
> when its just being delivered to the recipient (no change in R-URI).
>
> Comments?
>
> -Jonathan R.
>
>
> -- 
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 07:08:43 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSXF4-00025V-Md; Wed, 27 Sep 2006 07:06:18 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSXF2-00025L-GO
	for sip@ietf.org; Wed, 27 Sep 2006 07:06:16 -0400
Received: from bounce.versatel.nl ([62.58.50.92])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSXF1-0007rT-27
	for sip@ietf.org; Wed, 27 Sep 2006 07:06:16 -0400
Received: (qmail 23753 invoked by uid 0); 27 Sep 2006 11:06:13 -0000
Received: from dns03.admin.zonnet.nl (HELO dell057.admin.zonnet.nl)
	(postfix@[10.170.1.5]) (envelope-sender <jbemmel@zonnet.nl>)
	by bounce.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 27 Sep 2006 11:06:13 -0000
Received: by dell057.admin.zonnet.nl (Postfix, from userid 33)
	id D446D1AE5; Wed, 27 Sep 2006 13:06:13 +0200 (CEST)
Received: from ip-64-7-30-107.dsl.nyc.megapath.net
	(ip-64-7-30-107.dsl.nyc.megapath.net [64.7.30.107]) by
	webmail.versatel.nl
	(Horde MIME library) with HTTP; Wed, 27 Sep 2006 13:06:13 +0200
Message-ID: <20060927130613.q97z7cd0p4dcc8og@webmail.versatel.nl>
Date: Wed, 27 Sep 2006 13:06:13 +0200
From: jbemmel@zonnet.nl
To: "Drage, Keith (Keith)" <drage@lucent.com>
Subject: Re: [Sip] WGLC: draft-ietf-sip-consent-framework-00
References: <5D1A7985295922448D5550C94DE291804A5D7F@DEEXC1U01.de.lucent.com>
In-Reply-To: <5D1A7985295922448D5550C94DE291804A5D7F@DEEXC1U01.de.lucent.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.0.4)
X-Spam-Score: 1.3 (+)
X-Scan-Signature: 25620135586de10c627e3628c432b04a
Cc: "sip@ietf.org" <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Major technical comment on section 5.8: the proposed Trigger-Consent 
mechanism looks like one big hack to me. It does not comply with 
RFC3515, and appears to be an inappropriate use of REFER. Suggestion: 
use SUBSCRIBE / NOTIFY

Technical comment on Trigger-Consent: the ABNF in section 5.11 allows 
multiple instances of this header. Is this desired? If so, a note on 
what should be done when multiple instances are present is needed. If 
not, the ABNF should be adapted ( I suspect the latter is the 
appropriate choice )

Minor technical comment on Figure 5 and the example in 5.11: the 
escaping of the Refer-To URI is invalid, '<' and '>' should be 
%-encoded too (but: see first comment, suggest to remove this Refer-To 
header entirely)

Regards,

Jeroen

> (As WG chair)
>
> Because the document
>
> A Framework for Consent-Based Communications in the Session Initiation
> Protocol (SIP)
>
> At
>
> http://www.ietf.org/internet-drafts/draft-ietf-sip-consent-framework-00.
> txt
>
> Defines new response codes, and header fields, it has been transferred
> to the SIP WG from SIPPING.
>
> This mail is to announce Working Group Last Call for this document
>                         -----------------------
> for which we request comments to be made by
>
> 	17th October 2006
> 	-----------------
>
> For each comment, please indicate clearly:
> -	the nature of the comment (editorial, minor technical,
> technical, spec is totally broken...),
> -	the position in the document (section and paragraph numbers
> please (it helps if you also quote the sentence or paragraph you are
> addressing),
> -	the comment itself,
> -	any proposed resolution.
>
> This WGLC is coordinated with two related documents that remain in the
> SIPPING group
>
> draft-ietf-sipping-pending-additions-00.txt
> draft-ietf-sipping-consent-format-00.txt
>
> Regards
>
> Keith
>
>
> Keith Drage
> drage@lucent.com
> tel: +44 1793 776249
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 10:18:39 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSaBw-0001vk-DQ; Wed, 27 Sep 2006 10:15:16 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSaBv-0001uG-4f
	for sip@ietf.org; Wed, 27 Sep 2006 10:15:15 -0400
Received: from sonussf1.sonusnet.com ([208.45.178.26])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSaBt-0006EG-TU
	for sip@ietf.org; Wed, 27 Sep 2006 10:15:15 -0400
Received: from sonusmail06.sonusnet.com (sonusmail06.sonusnet.com
	[10.128.32.156])
	by sonussf1.sonusnet.com (8.13.3/8.13.3) with ESMTP id k8REFDxd009810
	for <sip@ietf.org>; Wed, 27 Sep 2006 10:15:13 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: [Sip] RFC 3261 section 17.1.1.2 INVITE Client transaction State
	Machine
Date: Wed, 27 Sep 2006 10:15:13 -0400
Message-ID: <EC7F5E697D3DCC4E838A142768417A6E08B75A@sonusmail06.sonusnet.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] RFC 3261 section 17.1.1.2 INVITE Client transaction State
	Machine
thread-index: AcbiQil6VK8scn4iSqKGTz6pMZl2iw==
From: "Nayak, Subhransu S" <ssnayak@sonusnet.com>
To: <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0ddefe323dd869ab027dbfff7eff0465
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

There is an obvious flaw in the INVITE client transaction state machine. =
Once in "proceeding" state, State Machine is purely driven by the peer's =
response to the INVITE. If peer goes down, then  INVITE client =
transaction gets stuck in the "proceeding" state forever. From an =
implementation's perspective, when does the TU in an UAC release the =
transaction resource in this case ?  =20

                   |INVITE from TU
             Timer A fires     |INVITE sent
             Reset A,          V                      Timer B fires
             INVITE sent +-----------+                or Transport Err.
               +---------|           |---------------+inform TU
               |         |  Calling  |               |
               +-------->|           |-------------->|
                         +-----------+ 2xx           |
                            |  |       2xx to TU     |
                            |  |1xx                  |
    300-699 +---------------+  |1xx to TU            |
   ACK sent |                  |                     |
resp. to TU |  1xx             V                     |
            |  1xx to TU  -----------+               |
            |  +---------|           |               |
            |  |         |Proceeding |-------------->|
            |  +-------->|           | 2xx           |
            |            +-----------+ 2xx to TU     |
            |       300-699    |                     |
            |       ACK sent,  |                     |
            |       resp. to TU|                     |
            |                  |                     |      NOTE:
            |  300-699         V                     |
            |  ACK sent  +-----------+Transport Err. |  transitions
            |  +---------|           |Inform TU      |  labeled with
            |  |         | Completed |-------------->|  the event
            |  +-------->|           |               |  over the action
            |            +-----------+               |  to take
            |              ^   |                     |
            |              |   | Timer D fires       |
            +--------------+   | -                   |
                               |                     |
                               V                     |
                         +-----------+               |
                         |           |               |
                         | Terminated|<--------------+
                         |           |
                         +-----------+

                 Figure 5: INVITE client transaction

Thanks,
- Subhransu=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 10:33:00 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSaRF-0003AL-Ux; Wed, 27 Sep 2006 10:31:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSaRE-00039q-Tg
	for sip@ietf.org; Wed, 27 Sep 2006 10:31:04 -0400
Received: from wip-ec-wd.wipro.com ([203.91.193.32])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSaR8-0000rW-Vj
	for sip@ietf.org; Wed, 27 Sep 2006 10:31:04 -0400
Received: from wip-ec-wd.wipro.com (localhost.wipro.com [127.0.0.1])
	by localhost (Postfix) with ESMTP id 8024C210EC
	for <sip@ietf.org>; Wed, 27 Sep 2006 19:56:20 +0530 (IST)
Received: from blr-ec-bh02.wipro.com (blr-ec-bh02.wipro.com [10.201.50.92])
	by wip-ec-wd.wipro.com (Postfix) with ESMTP id 6AE2720918
	for <sip@ietf.org>; Wed, 27 Sep 2006 19:56:20 +0530 (IST)
Received: from BLR-EC-MBX02.wipro.com ([10.201.50.162]) by
	blr-ec-bh02.wipro.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 20:00:52 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] RFC 3261 section 17.1.1.2 INVITE Client transaction
	StateMachine
Date: Wed, 27 Sep 2006 20:00:52 +0530
Message-ID: <8A24F115EA58164490CD026E9D0CEAD4AB0071@BLR-EC-MBX02.wipro.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] RFC 3261 section 17.1.1.2 INVITE Client transaction
	StateMachine
Thread-Index: AcbiQil6VK8scn4iSqKGTz6pMZl2iwAAP71Q
From: <sreeram.kanumuri@wipro.com>
To: <ssnayak@sonusnet.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 27 Sep 2006 14:30:52.0768 (UTC)
	FILETIME=[891BA600:01C6E241]
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 92df29fa99cf13e554b84c8374345c17
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi,
Refer Bug 706 @
http://bugs.sipit.net/show_bug.cgi?id=3D706

HTH,
Sreeram.


-----Original Message-----
From: Nayak, Subhransu S [mailto:ssnayak@sonusnet.com]=20
Sent: Wednesday, September 27, 2006 7:45 PM
To: sip@ietf.org
Subject: [Sip] RFC 3261 section 17.1.1.2 INVITE Client transaction
StateMachine

There is an obvious flaw in the INVITE client transaction state machine.
Once in "proceeding" state, State Machine is purely driven by the peer's
response to the INVITE. If peer goes down, then  INVITE client
transaction gets stuck in the "proceeding" state forever. From an
implementation's perspective, when does the TU in an UAC release the
transaction resource in this case ?  =20

                   |INVITE from TU
             Timer A fires     |INVITE sent
             Reset A,          V                      Timer B fires
             INVITE sent +-----------+                or Transport Err.
               +---------|           |---------------+inform TU
               |         |  Calling  |               |
               +-------->|           |-------------->|
                         +-----------+ 2xx           |
                            |  |       2xx to TU     |
                            |  |1xx                  |
    300-699 +---------------+  |1xx to TU            |
   ACK sent |                  |                     |
resp. to TU |  1xx             V                     |
            |  1xx to TU  -----------+               |
            |  +---------|           |               |
            |  |         |Proceeding |-------------->|
            |  +-------->|           | 2xx           |
            |            +-----------+ 2xx to TU     |
            |       300-699    |                     |
            |       ACK sent,  |                     |
            |       resp. to TU|                     |
            |                  |                     |      NOTE:
            |  300-699         V                     |
            |  ACK sent  +-----------+Transport Err. |  transitions
            |  +---------|           |Inform TU      |  labeled with
            |  |         | Completed |-------------->|  the event
            |  +-------->|           |               |  over the action
            |            +-----------+               |  to take
            |              ^   |                     |
            |              |   | Timer D fires       |
            +--------------+   | -                   |
                               |                     |
                               V                     |
                         +-----------+               |
                         |           |               |
                         | Terminated|<--------------+
                         |           |
                         +-----------+

                 Figure 5: INVITE client transaction

Thanks,
- Subhransu=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 12:12:45 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSbyr-000090-8C; Wed, 27 Sep 2006 12:09:53 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSbyp-00008t-Sh
	for sip@ietf.org; Wed, 27 Sep 2006 12:09:51 -0400
Received: from mail.sbs.be ([193.109.72.11])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSbym-0007F9-Sv
	for sip@ietf.org; Wed, 27 Sep 2006 12:09:51 -0400
Received: from bruc001x.sbs.be (bruc001x.sbs.be [193.210.175.38])
	by mail.sbs.be (8.12.10/8.12.10/SuSE Linux 0.7) with ESMTP id
	k8RG9gG5015532; Wed, 27 Sep 2006 18:09:42 +0200
Received: from bru0032a.ww018.siemens.net (bru0032a.ww018.siemens.net
	[193.210.175.90])
	by bruc001x.sbs.be (8.12.10/8.12.10/SuSE Linux 0.7) with ESMTP id
	k8RG9eCO007558; Wed, 27 Sep 2006 18:09:41 +0200
Received: from BRU0038A.ww018.siemens.net ([193.210.175.28]) by
	bru0032a.ww018.siemens.net with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 18:09:38 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Re: Comments on draft-niemi-sip-subnot-etags-01
Date: Wed, 27 Sep 2006 18:09:38 +0200
Message-ID: <C12A115F71992249AC6EA6AEA5DED0060149C380@BRU0038A.ww018.siemens.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Re: Comments on draft-niemi-sip-subnot-etags-01
thread-index: AcbhPyzm6+0dw8nMQW6uVOhaeP2naQA0nkBA
From: "Vrancken, Johnny" <Johnny.Vrancken@siemens.com>
To: "Aki Niemi" <aki.niemi@nokia.com>
X-OriginalArrivalTime: 27 Sep 2006 16:09:38.0767 (UTC)
	FILETIME=[554755F0:01C6E24F]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e8c5db863102a3ada84e0cd52a81a79e
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Aki,

See replies inline ...

Kind regards,
Johnny

-----Original Message-----
From: Aki Niemi [mailto:aki.niemi@nokia.com]=20
Sent: dinsdag 26 september 2006 9:38
To: Vrancken, Johnny
Cc: sip@ietf.org
Subject: [Sip] Re: Comments on draft-niemi-sip-subnot-etags-01

Hi Johnny,

Thanks for the feedback. A couple of comments inline; the rest I patched
into my working copy.

ext Vrancken, Johnny kirjoitti:
> PAGE 7: "The Content-Type header field of the NOTIFY request is set an
> appropriate value, depending on the event package, but  .....The
> Content-Length MUST be set to zero, and no payload is attached to the
> message."
> COMMENT: The first part of this sentence is to be omitted, as a
> Content-Type header field is only required if the message body is not
> empty.

The way this was intended to work was that the notifier sends a NULL
body, like this:

...
Content-Type: application/pidf+xml
Content-Length: 0

What you're suggesting is that the notifier sends no body at all. I
think that might not work, as some UAs might reject a NOTIFY that has no
body (as it's supposed to always have one).

[Johnny] This problem also has popped up in OMA-PAG interoperability =
tests.
RFC3265 states that there could be empty NOTIFY messages (section =
3.1.6.2), so UA's should/must be prepared to receive a NOTIFY request =
without a body. I think a body in a NOTIFY request is only required, if =
you have to convey information that is not contained in the NOTIFY =
request headers.
The new Suppress-Body-If-Match header you introduced may result in =
NOTIFY request without a body, isn't it?

Considering the descriptions of Content-Length (=A720.14) and =
Content-Type (=A720.15) in RFC 3261:
* "the Content-Length header MUST be set to zero if no body is present =
in a message."
* "the Content-Type header MUST be present if the body is not empty", =
hence there is not a MUST for the cases where the body is empty.=20
Moreover, in RFC3265 (section 7.1) the Content-Type header for NOTIFYs =
has a "*", meaning (according to RFC 3261 section 20) that "the header =
field is required if the message body is not empty".

<snip />

> PAGE 9: "and entity-tag in RFC3265"
> COMMENT: entity-tag is defined in RFC3903
>=20
> PAGE 9: Grammar
> COMMENT: the syntax of the new header allows a subscriber to supply =
only
> a single entity-tag value. The syntax of similar header fields for
> conditional requests in RFC2616 (If-Match, If-None-Match) allows to
> provide multiple entity-tag values for these headers.

True, but the grammar for these only allows a single entity-tag.
[Johnny] I assume you want to say that in the current version of your =
document the Suppress-Body-If-Match and Suppress-Notify-If-Match header =
only allow to provide a single entity-tag.

> Therefore, it can be considered to allow multiple entity-tag values =
for
> the new Suppress-Body-If-Match header. If there is a match, the NOTIFY
> request will contain the entity-tag of the resource state that is =
valid.
> Allowing multiple entity-tag values for the Suppress-Notify-If-Match
> header is not meaningful, as the subscriber, in case of a match, does
> not receive information (NOTIFY request) about which one of =
entity-tags
> is valid.

I'm not sure if you're arguing for or against having multiple
entity-tags in these fields.

[Johnny]I'm arguing for having multiple entity-tags for the =
Suppress-Body-If-Match header, merely to have a syntax similar to =
If-Match and If-None-Match in RFC2616.
You mentioned that optionally the notifier could keep record in a =
journal of recent resource states and their associated entity tags. The =
subscriber could do the same.
A use case that crosses my mind is an RLS server that makes back-end =
subscriptions of behalf of different watchers to the same resource. =
Hence, the RLS server may have stored multiple entity-tags (and =
associated state information) for this resource. When the RLS server =
sends a back-end SUBSCRIBE request for a resource, it could supply e.g. =
the most recently received entity-tags pertaining to this resource.
But if you decide to allow only a single entity-tag for the =
Suppress-Body-If-Match header, I will not be disappointed.

As entity-tags in SIP events are always tied to a subscription anyway,
there's no use-case I came up with that would actually make use of more
than a single entity-tag. Similarly, I dropped the notion of weak entity
tags, as they are a contentious issue even in HTTP and I had absolutely
no idea how they would work in SIP.
[Johnny]When you state "As entity-tags in SIP events are always tied to =
a subscription", do you mean subscription in general or a particular =
subscription? As I understood it, an entity-tag uniquely =
references/identifies a particular resource state in a subscriber / =
notifier information exchange.=20

> General COMMENT: Applicability of the ETag mechanism for resoure list
> subscriptions.
> The document focuses on an ETag mechanism for subscriptions targeted =
on
> a single resource. However, one can also subscribe for a resource list
> (RFC4662). In that case, the resulting NOTIFY requests comprise the
> resource state of no / one / multiple resources in addition to =
Resource
> List Meta Information (RLMI) pertaining to the resource list
> subscription. This RLMI information contains information about the
> individual resources and the status of the virtual subscriptions.
> Your document preferably should include a statement about the
> applicability of the ETag mechanism for resource list subscriptions.
> You may either state that
> 1. it is out of scope of the document
> 2. the mechanism also can be applied to resource list subscriptions. =
In
> that case you need to clearly specify what the ETag represents (e.g.
> does it also include the full RLMI information ?)
> 3. you could consider to exchange a set of ETags, one for each =
resource
> in the list. In the NOTIFY request, these ETags can be included in the
> RLMI information but for the SUBSCRIBE request a new mechanism is to =
be
> introduced to exchange the ETags of the individual resources.

I think this mechanism applies to resource-list subscriptions
out-of-the-box, as it should to any type of subscriptions. The etags
work on the level of subscriptions, and really don't care what event
package is carried on top.
[Johnny]I don't get your point. I agree that the etag mechanism works =
for any event package.

Can you elaborate why there would need to be a need for additional
specification?
[Johnny] Suppose you are polling the event state of a resource list.
The resulting NOTIFY request contains an etag, RLMI information about =
the N resources in the list (resource info, info on the back-end =
subscriptions), and the resource state of M resources for which =
successfully a back-end subscription was made.
Suppose that in a subsequent poll for the same resource list, the =
resource state of the same M resources has not changed but some RLMI =
information has changed, e.g.
 - information about a resource in the resource list has changed=20
 - information about a back-end subscription has changed
 - a resource is added / deleted, for which for whatever reason no =
resource state is notified
Does the notifier generated local entity tag and the subscriber provided =
etag match in this case?

In the above resource list polling example and assuming that a single =
entity tag is used for the whole resource list,  ALL M resource states =
are to be included in the resulting NOTIFY request if there is a change =
in ONE of the resource states. If entity tags per resource were =
conveyed, then only the resource state of the resources that actually =
have changed would have to be notified.
Please note that usage of a set of Etags (one per resource) in case of a =
resource list subscription is just a suggestion, nothing more.


Cheers,
Aki

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 12:20:06 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSc6l-0006lN-Ch; Wed, 27 Sep 2006 12:18:03 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSc6j-0006lE-Sr
	for sip@ietf.org; Wed, 27 Sep 2006 12:18:01 -0400
Received: from web31808.mail.mud.yahoo.com ([68.142.207.71])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GSc6f-0008Mb-I5
	for sip@ietf.org; Wed, 27 Sep 2006 12:18:01 -0400
Received: (qmail 75437 invoked by uid 60001); 27 Sep 2006 16:17:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
	b=dI7/fs8b5kL2OuxtLSG9NUWwcao8wPQ1Fpl9XOJQj/w9WHOpML56dKBlKkPypaEu17YEQFWifhuj5Bje7uqlcqVrlnrPmnvn1oqEjGeGNxXKv6OZuyvoDYHcpzPHKI0mOAX+LvTfwrTv+fIW02bIaoAGWswru/UaTT2uIxuYpCY=
	; 
Message-ID: <20060927161756.75435.qmail@web31808.mail.mud.yahoo.com>
Received: from [68.236.123.187] by web31808.mail.mud.yahoo.com via HTTP;
	Wed, 27 Sep 2006 09:17:56 PDT
Date: Wed, 27 Sep 2006 09:17:56 -0700 (PDT)
From: Dan Petrie <dgpetrie@yahoo.com>
To: sip@ietf.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9466e0365fc95844abaf7c3f15a05c7d
Subject: [Sip] New Event package response code
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

At the Montreal IETF we identified one problem with the config package
usage with XCAP.  XCAP is not manditory to be supported by the profile
delivery server.  The problem was how does the server indicate that it
does not support XCAP.  We agreed to use the Event header profile-type
as the indication that XCAP is required (i.e.
profile-type="application").  We also agreed that an error response was
required if the server does not support XCAP.

I propose that we create a new error code that extends RFC 3265.  The
error code is to indicate that an Event header has an invalid or
unsupported value.  I also propose that we create a new header field
that contains the event header parameter(s) and unsupported values(s). 


E.g. Invalid-Event-Parameters: profile-type="application"

I think that it is generally useful for 3265 implementation that have
Event header parameters with enumerated values (tokens or strings). 
That is to indicate that the Event header parameter value is not valid
or supported.  As this is a protocol change issue, I am submitting this
to the SIP list for suggestings and comments.

Cheers,
Dan

SIPez LLC  
SIP VoIP, IM and Presence Consulting  
http:/www.sipez.com  
tel: +1 (617) 273-4000

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 15:18:56 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSesM-0007Rg-76; Wed, 27 Sep 2006 15:15:22 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSesK-0007RX-2a
	for sip@ietf.org; Wed, 27 Sep 2006 15:15:20 -0400
Received: from sj-iport-4.cisco.com ([171.68.10.86])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSesI-0000Yb-OF
	for sip@ietf.org; Wed, 27 Sep 2006 15:15:20 -0400
Received: from sj-dkim-5.cisco.com ([171.68.10.79])
	by sj-iport-4.cisco.com with ESMTP; 27 Sep 2006 12:15:15 -0700
X-IronPort-AV: i="4.09,225,1157353200"; 
	d="scan'208"; a="1855602650:sNHT8325507166"
Received: from sj-core-4.cisco.com (sj-core-4.cisco.com [171.68.223.138])
	by sj-dkim-5.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8RJFFTm021838; Wed, 27 Sep 2006 12:15:15 -0700
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by sj-core-4.cisco.com (8.12.10/8.12.6) with ESMTP id k8RJFCil023388;
	Wed, 27 Sep 2006 12:15:14 -0700 (PDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 15:15:14 -0400
Received: from [161.44.55.134] ([161.44.55.134]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 15:15:13 -0400
Message-ID: <451ACDC0.1050105@cisco.com>
Date: Wed, 27 Sep 2006 15:15:12 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: "Elwell, John" <john.elwell@siemens.com>
Subject: Re: [Sip] GRUU and Grid alternative
References: <50B1CBA96870A34799A506B2313F266709F23062@ntht201e.siemenscomms.co.uk>
In-Reply-To: <50B1CBA96870A34799A506B2313F266709F23062@ntht201e.siemenscomms.co.uk>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 27 Sep 2006 19:15:13.0459 (UTC)
	FILETIME=[42128030:01C6E269]
DKIM-Signature: a=rsa-sha1; q=dns; l=803; t=1159384515; x=1160248515;
	c=relaxed/simple; s=sjdkim5002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Grid=20alternative;
	X=v=3Dcisco.com=3B=20h=3D5DtO8DGMv0uaAyOdOxaj3gFe+Iw=3D;
	b=mfN5jFDgiF1kkwXzD5QKzh0lYhPci59Ja8x4hfsSkvs/ytPG1H3Z6kwGgjmijKhlSv5rA5Ni
	GlWkYHmJN7QpYoSHWkofmyS1JjQCxU2rvKpylVEI1i6dyTEBrNkzzQiD;
Authentication-Results: sj-dkim-5.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 798b2e660f1819ae38035ac1d8d5e3ab
Cc: IETF SIP List <sip@ietf.org>, Alan Johnston <alan@sipstation.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Elwell, John wrote:

> Yes, and it would also make RFC 4458 (Voicemail-URI) applicable in more
> situations (without needing to rely on RFC 4244 (History-Info)), it would
> make RFC 4244 more usable, and it would also help with the problem Alan
> Johnstone is trying to address in his cc-uui draft in SIPPING.

Right. This is exactly why its a generalization of grid; its a more 
general solution for the problem of conveying information to users.

-Jonathan R.


-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 18:18:47 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GShg2-000726-Hp; Wed, 27 Sep 2006 18:14:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GShg0-000721-VM
	for sip@ietf.org; Wed, 27 Sep 2006 18:14:48 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GShfz-0001uY-JT
	for sip@ietf.org; Wed, 27 Sep 2006 18:14:48 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8RMEht23322; Wed, 27 Sep 2006 18:14:43 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Grid alternative
Date: Wed, 27 Sep 2006 17:14:39 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D4E5178@zrc2hxm0.corp.nortel.com>
In-Reply-To: <451ACDC0.1050105@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Grid alternative
Thread-Index: AcbiaeaZ/93SmhesTuO7EOgbfSmPogAF/PBA
From: "Francois Audet" <audet@nortel.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>,
	"Elwell, John" <john.elwell@siemens.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 50a516d93fd399dc60588708fd9a3002
Cc: IETF SIP List <sip@ietf.org>, Alan Johnston <alan@sipstation.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I am liking this idea a lot. It will also help with RFC 4240.

It will certainly be much more understandable, and solves many problems=20
at one.

I'm assuming that Jonathan would take the action of removing grid from
GRUU
and generating the draft with the proposal?=20

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Sent: Wednesday, September 27, 2006 12:15 PM
> To: Elwell, John
> Cc: IETF SIP List; Alan Johnston
> Subject: Re: [Sip] GRUU and Grid alternative
>=20
>=20
>=20
> Elwell, John wrote:
>=20
> > Yes, and it would also make RFC 4458 (Voicemail-URI) applicable in=20
> > more situations (without needing to rely on RFC 4244=20
> (History-Info)),=20
> > it would make RFC 4244 more usable, and it would also help with the=20
> > problem Alan Johnstone is trying to address in his cc-uui=20
> draft in SIPPING.
>=20
> Right. This is exactly why its a generalization of grid; its=20
> a more general solution for the problem of conveying=20
> information to users.
>=20
> -Jonathan R.
>=20
>=20
> --=20
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ=20
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 18:43:08 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSi4y-000561-Ia; Wed, 27 Sep 2006 18:40:36 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSi4x-0004zs-2m
	for sip@ietf.org; Wed, 27 Sep 2006 18:40:35 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSi4u-0004EF-Mx
	for sip@ietf.org; Wed, 27 Sep 2006 18:40:35 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 27 Sep 2006 18:40:31 -0400
X-IronPort-AV: i="4.09,226,1157342400"; 
	d="scan'208"; a="104787068:sNHT57439732"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8RMeU4m032472; Wed, 27 Sep 2006 18:40:30 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8RMdTuO021106; 
	Wed, 27 Sep 2006 18:40:30 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 18:40:28 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 18:40:28 -0400
Message-ID: <451AFDDB.4000600@cisco.com>
Date: Wed, 27 Sep 2006 18:40:27 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
Subject: Re: [Sip] GRUU and Grid alternative
References: <1ECE0EB50388174790F9694F77522CCF0D4E5178@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0D4E5178@zrc2hxm0.corp.nortel.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 27 Sep 2006 22:40:28.0409 (UTC)
	FILETIME=[EE5ABE90:01C6E285]
DKIM-Signature: a=rsa-sha1; q=dns; l=3086; t=1159396830; x=1160260830;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Grid=20alternative
	|To:Francois=20Audet=20<audet@nortel.com>;
	X=v=3Dcisco.com=3B=20h=3D37wdfzTcXxsKFn2cKwMMZsWTSx8=3D;
	b=MVmARcZWWM4sUUnJpXfEZnAHiKdT2di580LPhWH6i/uM6TxqcyqlLhrco3z4jVZ7tMEjTyXO
	n5gpZ29sp1lx1/MYOsxLDQh69cMtcZDaJ3mH9oV9wpyB5c9Vsi9F/Czj;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0fa76816851382eb71b0a882ccdc29ac
Cc: IETF SIP List <sip@ietf.org>, Alan Johnston <alan@sipstation.com>, "Elwell,
	John" <john.elwell@siemens.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I liked this when it was previously suggested, for reasons unrelated to 
gruu. It does feel like this is the way 3261 should have done things.

BUT, its going to present some compatibility problems for proxies that 
don't expect to encounter Route headers in some contexts. That is 
non-compliant but its out there. In particular, IMS P-CSCFs aren't going 
to be at all happy routing a request outbound to an UE in this way.

Its especially a problem because a UA that requests a GRUU and wants to 
use it is dealing with the the home proxy, and has no good way to even 
understand if an edge proxy is going to present problems. I guess we 
could invent a new option tag and use Proxy-Require to test for it. But 
when the UA discovers its edge proxy is a problem, what does it do?

One option is to simply have no mercy on non-compliant proxies. But if 
it is a big enough problem we may need to seek another solution. (One 
isn't leaping to mind for me.)

	Paul

Francois Audet wrote:
> I am liking this idea a lot. It will also help with RFC 4240.
> 
> It will certainly be much more understandable, and solves many problems 
> at one.
> 
> I'm assuming that Jonathan would take the action of removing grid from
> GRUU
> and generating the draft with the proposal? 
> 
>> -----Original Message-----
>> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com] 
>> Sent: Wednesday, September 27, 2006 12:15 PM
>> To: Elwell, John
>> Cc: IETF SIP List; Alan Johnston
>> Subject: Re: [Sip] GRUU and Grid alternative
>>
>>
>>
>> Elwell, John wrote:
>>
>>> Yes, and it would also make RFC 4458 (Voicemail-URI) applicable in 
>>> more situations (without needing to rely on RFC 4244 
>> (History-Info)), 
>>> it would make RFC 4244 more usable, and it would also help with the 
>>> problem Alan Johnstone is trying to address in his cc-uui 
>> draft in SIPPING.
>>
>> Right. This is exactly why its a generalization of grid; its 
>> a more general solution for the problem of conveying 
>> information to users.
>>
>> -Jonathan R.
>>
>>
>> -- 
>> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
>> Cisco Fellow                                   Parsippany, NJ 
>> 07054-2711
>> Cisco Systems
>> jdrosen@cisco.com                              FAX:   (973) 952-5050
>> http://www.jdrosen.net                         PHONE: (973) 952-5000
>> http://www.cisco.com
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol Use 
>> sip-implementors@cs.columbia.edu for questions on current sip 
>> Use sipping@ietf.org for new developments on the application of sip
>>
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 20:36:58 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSjqE-0004P3-4w; Wed, 27 Sep 2006 20:33:30 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSjqC-0004Mb-UU
	for sip@ietf.org; Wed, 27 Sep 2006 20:33:28 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSjqB-0004ub-LT
	for sip@ietf.org; Wed, 27 Sep 2006 20:33:28 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8S0XNY04455; Wed, 27 Sep 2006 20:33:24 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Grid alternative
Date: Wed, 27 Sep 2006 19:32:03 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D4E5349@zrc2hxm0.corp.nortel.com>
In-Reply-To: <451AFDDB.4000600@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Grid alternative
Thread-Index: AcbihfpXSHs/zYINQHWG02t6lYxwsQADzXOg
From: "Francois Audet" <audet@nortel.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 1ac7cc0a4cd376402b85bc1961a86ac2
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
> BUT, its going to present some compatibility problems for=20
> proxies that don't expect to encounter Route headers in some=20
> contexts. That is non-compliant but its out there. In=20
> particular, IMS P-CSCFs aren't going to be at all happy=20
> routing a request outbound to an UE in this way.

Hi Paul,

Can you describe this in IETF terms for those of us who are
not IMS-conversant?

What is the problem with these proxies and Route headers, and when?


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 22:56:18 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSm1F-0003qR-01; Wed, 27 Sep 2006 22:53:01 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSm1D-0003qM-D5
	for sip@ietf.org; Wed, 27 Sep 2006 22:52:59 -0400
Received: from sj-iport-4.cisco.com ([171.68.10.86])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSm1B-0004fR-19
	for sip@ietf.org; Wed, 27 Sep 2006 22:52:59 -0400
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-4.cisco.com with ESMTP; 27 Sep 2006 19:52:57 -0700
X-IronPort-AV: i="4.09,227,1157353200"; 
	d="scan'208"; a="1855680035:sNHT53892084"
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-3.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8S2quQR013436; Wed, 27 Sep 2006 19:52:56 -0700
Received: from xbh-sjc-211.amer.cisco.com (xbh-sjc-211.cisco.com
	[171.70.151.144])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8S2quQV028900;
	Wed, 27 Sep 2006 19:52:56 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 19:52:55 -0700
Received: from [10.32.241.149] ([10.32.241.149]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 19:52:55 -0700
Message-ID: <451B3906.1000903@cisco.com>
Date: Wed, 27 Sep 2006 22:52:54 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: jbemmel@zonnet.nl
Subject: Re: [Sip] GRUU and Grid alternative
References: <451A10FD.8040809@cisco.com>
	<20060927123147.bv4koeahkdw8gooc@webmail.versatel.nl>
In-Reply-To: <20060927123147.bv4koeahkdw8gooc@webmail.versatel.nl>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Sep 2006 02:52:55.0846 (UTC)
	FILETIME=[32EE3460:01C6E2A9]
DKIM-Signature: a=rsa-sha1; q=dns; l=2946; t=1159411976; x=1160275976;
	c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Grid=20alternative;
	X=v=3Dcisco.com=3B=20h=3D5DtO8DGMv0uaAyOdOxaj3gFe+Iw=3D;
	b=YAC73QleMW1YW0mRA/CFRR/1ru/eO41oXo1msr/MH+UVnPtu+Oc28tthNTamIzIf25neN0Xj
	d5bthCJXo3xwPQ50fCLeZAQZlu97PobKwcoq8xSCk5H8YIss8+HWCUqV;
Authentication-Results: sj-dkim-3.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 244a2fd369eaf00ce6820a760a3de2e8
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



jbemmel@zonnet.nl wrote:

> Jonathan,
> 
> Yes, I think this would work as a cleaner / more general solution than grid
> 
> For the mechanism, the UA would need to insert a 'lr' parameter into its 
> Contact. This is needed for Path proxy traversal, and makes the logic at 
> the registrar simpler (i.e. if registered contact URI contains a lr then 
> append Route, else rewrite)
> 
> Perhaps 'lr' alone could be sufficient (i.e. no Supported) although you 
> may want an option tag to detect support for this feature

Indeed. This was going to be my next post.

One of the problems with using Supported/Require in REGISTER, is that it 
only works for proxy translation services based on registrations. Other 
services, such as routing to a PSTN gateway, or application routing, are 
not populated by a registration. So, how would a proxy know whether to 
rewrite the R-URI or push a Route?

The idea, as you suggest, is that if the target URI has a ;lr parameter, 
the proxy would push a Route. Otherwise, it rewrites the request uri. In 
this case, when a UA registers, rather than using Supported/Require, it 
could just place a URI into the Contact which contains the ;lr parameter.

This works just fine as long as you assume that existing UA and routing 
table configurations are NOT using the ;lr parameter. I got some reports 
that existing UA were populating the Contact header field with URIs with 
the ;lr parameter, just because they "support" loose routing (RFC 3261). 
This behavior would break the idea of using the ;lr flag to indicate 
this feature.

A hybrid is to use the ;lr flag just for non-register based location 
services, and then use Supported/Require for registrations.


> 
> One difference with request URI rewriting is that the latter is 
> automatically a one-time operation: once the URI is rewritten, the proxy 
> won't rewrite again when the request spirals. For Route this is not the 
> case. OTOH, if there are any Route headers the proxy shouldn't be 
> rewriting / adding a route in the first place,

No. Consider the case of a Path headers. In this case, the home proxy 
would populate the Route headers from the path set, and then push the UA 
route as the *last* Route header field. But anyway I don't understand 
the issue you are raising with spiraling. On each spiral, a new Route 
gets pushed. If instead you had R-URI rewriting, the only way the 
request would get back to the proxy is if the r-uri pointed to that 
proxy, and upon arriving there it would be rewritten again. So there is 
no difference.

-Jonathan R.
-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 22:56:18 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSm1k-0003ty-A2; Wed, 27 Sep 2006 22:53:32 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSm1i-0003tt-08
	for sip@ietf.org; Wed, 27 Sep 2006 22:53:30 -0400
Received: from sj-iport-1-in.cisco.com ([171.71.176.70]
	helo=sj-iport-1.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GSm1g-0004zI-Mh for sip@ietf.org; Wed, 27 Sep 2006 22:53:29 -0400
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-1.cisco.com with ESMTP; 27 Sep 2006 19:53:28 -0700
Received: from sj-core-5.cisco.com (sj-core-5.cisco.com [171.71.177.238])
	by sj-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8S2rSvr001438; Wed, 27 Sep 2006 19:53:28 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com
	[128.107.191.100])
	by sj-core-5.cisco.com (8.12.10/8.12.6) with ESMTP id k8S2rR1E003083;
	Wed, 27 Sep 2006 19:53:27 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.211);
	Wed, 27 Sep 2006 19:53:27 -0700
Received: from [10.32.241.149] ([10.32.241.149]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 19:53:27 -0700
Message-ID: <451B3926.1090306@cisco.com>
Date: Wed, 27 Sep 2006 22:53:26 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
Subject: Re: [Sip] GRUU and Grid alternative
References: <1ECE0EB50388174790F9694F77522CCF0D4E5178@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0D4E5178@zrc2hxm0.corp.nortel.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Sep 2006 02:53:27.0404 (UTC)
	FILETIME=[45BD92C0:01C6E2A9]
DKIM-Signature: a=rsa-sha1; q=dns; l=689; t=1159412008; x=1160276008;
	c=relaxed/simple; s=sjdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Grid=20alternative;
	X=v=3Dcisco.com=3B=20h=3D5DtO8DGMv0uaAyOdOxaj3gFe+Iw=3D;
	b=FHpgKkfMLDDzzr2nZH+wlLWWWBQPhvGIhPuRGRz6586UeBnT1GAgFnmj/Q2zNv59YOWrscqR
	LLvtL2Qwtgz4uKa2zTrOa5C/zdXeGRGIiLyL3Flygv5rDot22Fp++qs+;
Authentication-Results: sj-dkim-1.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9466e0365fc95844abaf7c3f15a05c7d
Cc: IETF SIP List <sip@ietf.org>, Alan Johnston <alan@sipstation.com>, "Elwell,
	John" <john.elwell@siemens.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



Francois Audet wrote:

> I am liking this idea a lot. It will also help with RFC 4240.

Yes.

> 
> It will certainly be much more understandable, and solves many problems 
> at one.
> 
> I'm assuming that Jonathan would take the action of removing grid from
> GRUU
> and generating the draft with the proposal? 

Yes and yes.

-Jonathan R.



-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 23:02:41 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSm8X-0000xL-H6; Wed, 27 Sep 2006 23:00:33 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSm8W-0000wz-BY
	for sip@ietf.org; Wed, 27 Sep 2006 23:00:32 -0400
Received: from sj-iport-1-in.cisco.com ([171.71.176.70]
	helo=sj-iport-1.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GSm8U-0006cl-0L for sip@ietf.org; Wed, 27 Sep 2006 23:00:32 -0400
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
	by sj-iport-1.cisco.com with ESMTP; 27 Sep 2006 20:00:29 -0700
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8S30Tpe005402; Wed, 27 Sep 2006 20:00:29 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8S30TQV001632;
	Wed, 27 Sep 2006 20:00:29 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 20:00:29 -0700
Received: from [10.32.241.149] ([10.32.241.149]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 20:00:28 -0700
Message-ID: <451B3ACB.9010009@cisco.com>
Date: Wed, 27 Sep 2006 23:00:27 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Jeroen van Bemmel <jbemmel@zonnet.nl>
Subject: Re: [Sip] GRUU and Anonymity
References: <33D71F0FC0684C4C8A3BB76989EDED9C028BE3CE@eesmdmw020.eemea.ericsson.se>
	<008301c6dc9f$5aa28930$0601a8c0@BEMBUSTER>
In-Reply-To: <008301c6dc9f$5aa28930$0601a8c0@BEMBUSTER>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Sep 2006 03:00:28.0664 (UTC)
	FILETIME=[40D4BF80:01C6E2AA]
DKIM-Signature: a=rsa-sha1; q=dns; l=1835; t=1159412429; x=1160276429;
	c=relaxed/simple; s=sjdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=UfyfH87OQFvISzPtABEosFPcznA6+ryQy9EvGuqwY04GunAH7uTkxinX+CEthsjvVOpJbRrE
	jBbWaQbtSUefiHXhuqjE5JVKBME3VZuz83VPwl0muK+iUXJMWj64CWQH;
Authentication-Results: sj-dkim-1.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 21c69d3cfc2dd19218717dbe1d974352
Cc: sip@ietf.org,
	"Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

inline.

Jeroen van Bemmel wrote:


> But before we discuss the mechanisms: I believe it is a requirement to 
> have not only one but N pseudonymous GRUUs in parallel, all with 
> independent lifetimes (possibly bound by the lifetime of the registration).
> Implementations may limit N to a "reasonable" amount, but consider that 
> a UA may have several long-running event subscriptions. A watcher should 
> have a means to prevent correlation of independent subscriptions.

This is a fine thing to want, and its not unreasonable for a draft like 
truu to propose it.

However, the MAIN point I am trying to make in gruu is that I believe we 
do not need to provide anonymity that is any better than RFC 3261. RFC 
3261 does NOT provide (without a privacy service) correlation of 
independent subscriptions. The Contact header IP address will provide 
such a correlator. Consequently, I do not think we need to do better in 
GRUU.

With RFC 3261, if you want to have uncorrelatable dialogs of any sort, 
you need to use an anonymizer service. With my proposal, when using 
GRUU, you would still need to use such an anonymizer service and it 
would be as effective (or ineffective) prior to GRUU.

I am not trying to solve the whole of anonymity here. I am trying to 
propose a minimal set of functions that is sufficient for gruu to pass. 
We should continue to pursue privacy mechanisms independently of gruu 
that do better than gruu/rfc3261 alone.

Thanks,
Jonathan R.



-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Wed Sep 27 23:04:48 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSmAt-00030X-Or; Wed, 27 Sep 2006 23:02:59 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSmAr-00030J-LL
	for sip@ietf.org; Wed, 27 Sep 2006 23:02:57 -0400
Received: from sj-iport-5.cisco.com ([171.68.10.87])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSmAp-00070R-AT
	for sip@ietf.org; Wed, 27 Sep 2006 23:02:57 -0400
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-5.cisco.com with ESMTP; 27 Sep 2006 20:02:54 -0700
X-IronPort-AV: i="4.09,227,1157353200"; 
	d="scan'208"; a="326123903:sNHT49729796"
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-3.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8S32sSL019410 for <sip@ietf.org>; Wed, 27 Sep 2006 20:02:54 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8S32sYr008147
	for <sip@ietf.org>; Wed, 27 Sep 2006 20:02:54 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 20:02:54 -0700
Received: from [10.32.241.149] ([10.32.241.149]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Wed, 27 Sep 2006 20:02:54 -0700
Message-ID: <451B3B5D.8050306@cisco.com>
Date: Wed, 27 Sep 2006 23:02:53 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: IETF SIP List <sip@ietf.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Sep 2006 03:02:54.0259 (UTC)
	FILETIME=[979CC830:01C6E2AA]
DKIM-Signature: a=rsa-sha1; q=dns; l=1169; t=1159412574; x=1160276574;
	c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:GRUU=20and=20SIPS;
	X=v=3Dcisco.com=3B=20h=3DeCZPeW3OS/JmSUsFU6hDTyKmdSI=3D;
	b=Ad0WFFTV8oqkhOL3EGrzpWgAENIbWFN5SaQiGiZpTPamKABZuvsrEKwrGdwl/5HB4Ut8h+WE
	iUAQVn/Ncj7aQqB5wIcAN17GPC3UXCiZy4Gpcuso73fBx4o95il1CfeK;
Authentication-Results: sj-dkim-3.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 93238566e09e6e262849b4f805833007
Subject: [Sip] GRUU and SIPS
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

During the GRUU call today, the topic of SIPS was discussed. The 
question is what should or should not the GRUU spec say on SIPS, given 
we are revising the mechanism. I had previously wanted to more or less 
say what it says now, but have recently changed my mind on this. Given 
that we are producing a document to clarify sips, and given that, no 
matter what we do say in gruu, implementors would have to reconcile the 
two, it is easier I think to leave the problem in its entirety to the 
sips document.

So, my proposal is to remove all discussion of sips from gruu, with the 
exception of a sentence that says applicability and usage with sips is 
out of scope for this document and is to be treated elsewhere. Then the 
sips document will handle gruu, outbound and rfc3261 implications of sips.

Thoughts?

-Jonathan R.
-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 00:21:58 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSnLx-0004Vu-G8; Thu, 28 Sep 2006 00:18:29 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSnLw-0004Vm-6D
	for sip@ietf.org; Thu, 28 Sep 2006 00:18:28 -0400
Received: from bounce.versatel.nl ([62.58.50.92])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSnLt-0006rJ-MT
	for sip@ietf.org; Thu, 28 Sep 2006 00:18:28 -0400
Received: (qmail 7279 invoked by uid 0); 28 Sep 2006 04:18:24 -0000
Received: from dns03.admin.zonnet.nl (HELO dell057.admin.zonnet.nl)
	(postfix@[10.170.1.5]) (envelope-sender <jbemmel@zonnet.nl>)
	by bounce.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 28 Sep 2006 04:18:24 -0000
Received: by dell057.admin.zonnet.nl (Postfix, from userid 33)
	id 24B031AEF; Thu, 28 Sep 2006 06:18:24 +0200 (CEST)
Received: from ip-64-7-30-107.dsl.nyc.megapath.net
	(ip-64-7-30-107.dsl.nyc.megapath.net [64.7.30.107]) by
	webmail.versatel.nl
	(Horde MIME library) with HTTP; Thu, 28 Sep 2006 06:18:24 +0200
Message-ID: <20060928061824.1zvjynhaixus4sgc@webmail.versatel.nl>
Date: Thu, 28 Sep 2006 06:18:24 +0200
From: jbemmel@zonnet.nl
To: Dan Petrie <dgpetrie@yahoo.com>
Subject: Re: [Sip] New Event package response code
References: <20060927161756.75435.qmail@web31808.mail.mud.yahoo.com>
In-Reply-To: <20060927161756.75435.qmail@web31808.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.0.4)
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 02ec665d00de228c50c93ed6b5e4fc1a
Cc: "sip@ietf.org" <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Dan,

The basic model in RFC3265 (and SIP/HTTP in general) is that the R-URI 
contains sufficient information to identify the resource. Adding 
parameters to the Event header as you propose would break this model: 
the resource would be a function of the R-URI and these parameters. So 
the choice is between fundamentally changing SIP or rethinking your 
draft / solution

Cleanest would perhaps be SUBSCRIBE 
http://xcap.example.com/root/resource-lists/users/joe, but the problem 
is that most SIP proxies won't route such a request. The next best 
thing would probably be a new URI parameter, e.g. SUBSCRIBE 
sip:xcap-server.provider.com;document=http%3a//xcap.example.com/root/resource-lists/users/joe or an embedding in the user part, i.e. SUBSCRIBE 
sip:http%3a//xcap.example.com/root/resource-lists/users/joe@xcap-server.provider.com

404 Not found would be the error response when the server does not 
support this

Regards,

Jeroen

> At the Montreal IETF we identified one problem with the config package
> usage with XCAP.  XCAP is not manditory to be supported by the profile
> delivery server.  The problem was how does the server indicate that it
> does not support XCAP.  We agreed to use the Event header profile-type
> as the indication that XCAP is required (i.e.
> profile-type="application").  We also agreed that an error response was
> required if the server does not support XCAP.
>
> I propose that we create a new error code that extends RFC 3265.  The
> error code is to indicate that an Event header has an invalid or
> unsupported value.  I also propose that we create a new header field
> that contains the event header parameter(s) and unsupported values(s).
>
>
> E.g. Invalid-Event-Parameters: profile-type="application"
>
> I think that it is generally useful for 3265 implementation that have
> Event header parameters with enumerated values (tokens or strings).
> That is to indicate that the Event header parameter value is not valid
> or supported.  As this is a protocol change issue, I am submitting this
> to the SIP list for suggestings and comments.
>
> Cheers,
> Dan
>
> SIPez LLC
> SIP VoIP, IM and Presence Consulting
> http:/www.sipez.com
> tel: +1 (617) 273-4000
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 00:40:52 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSnfh-0001HJ-Td; Thu, 28 Sep 2006 00:38:53 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSnfg-0001H8-CL
	for sip@ietf.org; Thu, 28 Sep 2006 00:38:52 -0400
Received: from bounce.versatel.nl ([62.58.50.92])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSnfe-0001ay-UI
	for sip@ietf.org; Thu, 28 Sep 2006 00:38:52 -0400
Received: (qmail 11297 invoked by uid 0); 28 Sep 2006 04:38:50 -0000
Received: from dns03.admin.zonnet.nl (HELO dell057.admin.zonnet.nl)
	(postfix@[10.170.1.5]) (envelope-sender <jbemmel@zonnet.nl>)
	by bounce.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 28 Sep 2006 04:38:50 -0000
Received: by dell057.admin.zonnet.nl (Postfix, from userid 33)
	id F3F4D1AE3; Thu, 28 Sep 2006 06:38:49 +0200 (CEST)
Received: from ip-64-7-30-107.dsl.nyc.megapath.net
	(ip-64-7-30-107.dsl.nyc.megapath.net [64.7.30.107]) by
	webmail.versatel.nl
	(Horde MIME library) with HTTP; Thu, 28 Sep 2006 06:38:49 +0200
Message-ID: <20060928063849.qfp2hrxqw2f4wwsw@webmail.versatel.nl>
Date: Thu, 28 Sep 2006 06:38:49 +0200
From: jbemmel@zonnet.nl
To: Jonathan Rosenberg <jdrosen@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
References: <33D71F0FC0684C4C8A3BB76989EDED9C028BE3CE@eesmdmw020.eemea.ericsson.se>
	<008301c6dc9f$5aa28930$0601a8c0@BEMBUSTER> <451B3ACB.9010009@cisco.com>
In-Reply-To: <451B3ACB.9010009@cisco.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.0.4)
X-Spam-Score: 0.2 (/)
X-Scan-Signature: c0bedb65cce30976f0bf60a0a39edea4
Cc: "sip@ietf.org" <sip@ietf.org>,
	"Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Jonathan,

In that case, I personally would prefer to do it properly in a separate 
draft, and for GRUU say something like: "GRUU provides the equivalent 
of a fixed public IP address. All privacy issues associated with the 
use of such an address also apply to GRUUs. If additional privacy 
protection is required, it is recommended to use a privacy service 
[ref]"

I don't see much added value in providing something that addresses the 
issues "kind of half". By adding a relatively simple feature now, we 
would create complexity in terms of the number of available 
options/alternatives later.

Regards,

Jeroen

> inline.
>
> Jeroen van Bemmel wrote:
>
>
>> But before we discuss the mechanisms: I believe it is a requirement 
>> to have not only one but N pseudonymous GRUUs in parallel, all with 
>> independent lifetimes (possibly bound by the lifetime of the 
>> registration).
>> Implementations may limit N to a "reasonable" amount, but consider 
>> that a UA may have several long-running event subscriptions. A 
>> watcher should have a means to prevent correlation of independent 
>> subscriptions.
>
> This is a fine thing to want, and its not unreasonable for a draft 
> like truu to propose it.
>
> However, the MAIN point I am trying to make in gruu is that I believe 
> we do not need to provide anonymity that is any better than RFC 3261. 
> RFC 3261 does NOT provide (without a privacy service) correlation of 
> independent subscriptions. The Contact header IP address will provide 
> such a correlator. Consequently, I do not think we need to do better 
> in GRUU.
>
> With RFC 3261, if you want to have uncorrelatable dialogs of any 
> sort, you need to use an anonymizer service. With my proposal, when 
> using GRUU, you would still need to use such an anonymizer service 
> and it would be as effective (or ineffective) prior to GRUU.
>
> I am not trying to solve the whole of anonymity here. I am trying to 
> propose a minimal set of functions that is sufficient for gruu to 
> pass. We should continue to pursue privacy mechanisms independently 
> of gruu that do better than gruu/rfc3261 alone.
>
> Thanks,
> Jonathan R.
>
>
>
> -- 
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>



_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 01:58:32 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSorD-0004lw-J9; Thu, 28 Sep 2006 01:54:51 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSorB-0004jU-LY
	for sip@ietf.org; Thu, 28 Sep 2006 01:54:49 -0400
Received: from ussjmh01.bea.com ([63.96.162.5])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSor9-0006U1-93
	for sip@ietf.org; Thu, 28 Sep 2006 01:54:49 -0400
Received: from JPTOFE01.apac.bea.com (jptofe01.bea.com [10.144.0.25])
	by ussjmh01.bea.com (Switch-3.2.2/Switch-3.2.2) with ESMTP id
	k8S5sbbD002264 for <sip@ietf.org>; Wed, 27 Sep 2006 22:54:40 -0700
Received: from CNBJEX01.apac.bea.com ([10.130.0.15]) by JPTOFE01.apac.bea.com
	with Microsoft SMTPSVC(5.0.2195.6713); 
	Thu, 28 Sep 2006 14:54:37 +0900
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 28 Sep 2006 13:54:35 +0800
Message-ID: <A9C75DC940DA4B4E8D58349F6B804279334240@cnbjex01.bea.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: modify content-type in the answer
Thread-Index: AcbiwpN01CTzB3SxSUWto1bVBUFNOA==
From: "Xi Tang" <xtang@bea.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 28 Sep 2006 05:54:37.0302 (UTC)
	FILETIME=[94B46160:01C6E2C2]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.4.0.264935,
	Antispam-Data: 2006.9.25.95443
X-Spam-Score: 0.4 (/)
X-Scan-Signature: 5ebbf074524e58e662bc8209a6235027
Subject: [Sip] modify content-type in the answer
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1581991206=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============1581991206==
content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E2C2.93C4524C"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6E2C2.93C4524C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all sip experts, I have a question about modify content-type, if I
receive an offer, can I modify content-type in the answer?

If we can not, can I modify it in the UPDATE message's content-type
during early dialog? Thanks!

=20=20=20

>>Register now for BEA World 2006 --- See http://www.bea.com/beaworld<<
_______________________________________________________________________
Notice:  This email message, together with any attachments, may contain
information  of  BEA Systems,  Inc.,  its subsidiaries  and  affiliated
entities,  that may be confidential,  proprietary,  copyrighted  and/or
legally privileged, and is intended solely for the use of the individual
or entity named in this message. If you are not the intended recipient,
and have received this message in error, please immediately return this
by email and then delete it.

------_=_NextPart_001_01C6E2C2.93C4524C
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office" xmlns:w=3D"urn:sc=
hemas-microsoft-com:office:word" xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=3DContent-Type content=3D"text/html; charset=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:Arial;
	color:windowtext;}
 /* Page Definitions */
 @page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:15.6pt;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DZH-CN link=3Dblue vlink=3Dpurple style=3D'text-justify-trim:pu=
nctuation'>

<div class=3DSection1 style=3D'layout-grid:15.6pt'>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>Hi all sip experts, I have a question about modify
content-type, if I receive an offer, can I modify content-type in the answe=
r?<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>If we can not, can I modify it in the UPDATE messa=
ge&#8217;s
content-type during early dialog?</span></font><span lang=3DEN-US> Thanks!<=
o:p></o:p></span></p>

<p class=3DMsoNormal><font size=3D1 face=3DArial><span lang=3DEN-US style=
=3D'font-size:
9.0pt;font-family:Arial'>&nbsp;&nbsp; <o:p></o:p></span></font></p>

</div>

</body>

</html>
<PRE>>>Register now for BEA World 2006 --- See http://www.bea.com/beaworld<<
_______________________________________________________________________
Notice:  This email message, together with any attachments, may contain
information  of  BEA Systems,  Inc.,  its subsidiaries  and  affiliated
entities,  that may be confidential,  proprietary,  copyrighted  and/or
legally privileged, and is intended solely for the use of the individual
or entity named in this message. If you are not the intended recipient,
and have received this message in error, please immediately return this
by email and then delete it.
</PRE>
------_=_NextPart_001_01C6E2C2.93C4524C--


--===============1581991206==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1581991206==--




From sip-bounces@ietf.org Thu Sep 28 09:03:49 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSvUz-0002Dc-Ph; Thu, 28 Sep 2006 09:00:21 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSvUr-0002AX-6A
	for sip@ietf.org; Thu, 28 Sep 2006 09:00:13 -0400
Received: from out002.iad.hostedmail.net ([209.225.56.24])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSvUo-0002cL-Vd
	for sip@ietf.org; Thu, 28 Sep 2006 09:00:13 -0400
Received: from ATL1VEXC008.usdom003.tco.tc ([10.158.7.26]) by
	out002.iad.hostedmail.net with Microsoft SMTPSVC(6.0.3790.1830);
	Thu, 28 Sep 2006 08:59:37 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] modify content-type in the answer
Date: Thu, 28 Sep 2006 09:00:07 -0400
Message-ID: <77BD870EA838FC469FDD2AE248B1357BFA0CE3@ATL1VEXC008.usdom003.tco.tc>
In-Reply-To: <A9C75DC940DA4B4E8D58349F6B804279334240@cnbjex01.bea.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] modify content-type in the answer
Thread-Index: AcbiwpN01CTzB3SxSUWto1bVBUFNOAAN/Isg
From: "Brett Tate" <brett@broadsoft.com>
To: "Xi Tang" <xtang@bea.com>,
	<sip@ietf.org>
X-OriginalArrivalTime: 28 Sep 2006 12:59:37.0542 (UTC)
	FILETIME=[F4083660:01C6E2FD]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 93238566e09e6e262849b4f805833007
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

> I have a question about modify content-type, if I=20
> receive an offer, can I modify content-type in=20
> the answer?

The content-type is for this individual request or response.  Thus it
has no direct relation to content-type within other requests or
response.  However checking contents of a received Accept header
provides indication of what content-type values are supported.

For instance, it is acceptable for INVITE to contain content-type
application/sdp and 200 response to contain a multipart body which also
contains application/sdp if INVITE indicated multipart support.


> If we can not, can I modify it in the UPDATE=20
> message's content-type during early dialog?

See above. =20

And as an fyi, questions related to existing SIP RFCs should usually be
directed to sip-implementors.

https://lists.cs.columbia.edu/mailman/listinfo/sip-implementors


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 09:05:32 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSvYJ-00044u-OO; Thu, 28 Sep 2006 09:03:47 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSvYI-00044p-JO
	for sip@ietf.org; Thu, 28 Sep 2006 09:03:46 -0400
Received: from mailgw4.ericsson.se ([193.180.251.62])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSvYB-0003IN-4n
	for sip@ietf.org; Thu, 28 Sep 2006 09:03:46 -0400
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	965FD8E0001
	for <sip@ietf.org>; Thu, 28 Sep 2006 15:03:38 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 15:03:38 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 28 Sep 2006 15:03:37 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403BC802E@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Escaping rules of SIP-URI userpart
Thread-Index: Acbi/oL1oFJ+h1jCQjKTtHDMizdlPw==
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: <sip@ietf.org>
X-OriginalArrivalTime: 28 Sep 2006 13:03:38.0162 (UTC)
	FILETIME=[8373E920:01C6E2FE]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: ea4ac80f790299f943f0a53be7e1a21a
Subject: [Sip] Escaping rules of SIP-URI userpart
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi,

Chapter 19.1.1 of RFC3261 says that the sip scheme follows the
guidelines in RFC2396. As a result of that, the "#" character is used to
used to delimit a URI from a fragment identifier, and if one wants to
use the "#" as a part of a URI value itself it must be escaped.

RFC3966 (TEL-URI) does allow the usage of "#" (unescaped) in
local-numbers.

The SIP-URI userpart shall be parsed as a TEL-URI telephone-subscriber
if user=3Dphone is indicated, but according to chapter 19.1.2 of RFC3261
the "#" character must still be escaped.

My question is: why?

If the userpart is parsed as telephone-subscriber, there is no such
thing as a fragment identifier in the userpart, so why can't "#" be
unescaped in that case?

"#" will be used pretty much with service codes, and I think that being
forced to escape it is unecessary. Also, if you do a conversion between
a SIP-URI and TEL-URI you always need to check for this character, which
takes time.

Regards,

Christer


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 09:18:56 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSvkt-0003T3-VG; Thu, 28 Sep 2006 09:16:47 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSvkr-0003EM-PT
	for sip@ietf.org; Thu, 28 Sep 2006 09:16:45 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSvkq-0004u6-D2
	for sip@ietf.org; Thu, 28 Sep 2006 09:16:45 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 07F0013F8E0; Thu, 28 Sep 2006 16:16:38 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (plasmid146.gprs.dnafinland.fi [62.78.124.146])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 61AEE13F8DB;
	Thu, 28 Sep 2006 16:16:25 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 59021F0257; Thu, 28 Sep 2006 16:17:09 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17691.52053.238582.906810@rautu.tutpro.com>
Date: Thu, 28 Sep 2006 16:17:09 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Christer Holmberg (JO/LMF)" <christer.holmberg@ericsson.com>
Subject: [Sip] Escaping rules of SIP-URI userpart
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB59403BC802E@esealmw113.eemea.ericsson.se>
References: <5EB80D22825EEE42872083AD5BFFB59403BC802E@esealmw113.eemea.ericsson.se>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 68c8cc8a64a9d0402e43b8eee9fc4199
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Christer Holmberg (JO/LMF) writes:

 > If the userpart is parsed as telephone-subscriber, there is no such
 > thing as a fragment identifier in the userpart, so why can't "#" be
 > unescaped in that case?

i don't know what fragment identifier is, but most sip phones on the
market do not escape # in request-uri userpart and i haven't noticed any
problems associated with it.  so i suggest to allow # unescaped also in
sip uri userparts.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 09:22:47 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSvox-0005j1-ND; Thu, 28 Sep 2006 09:20:59 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSvow-0005iv-6r
	for sip@ietf.org; Thu, 28 Sep 2006 09:20:58 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSvou-0005Pu-TD
	for sip@ietf.org; Thu, 28 Sep 2006 09:20:58 -0400
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	2328D4F013C; Thu, 28 Sep 2006 15:20:54 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 15:20:53 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 15:20:52 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403BC80F4@esealmw113.eemea.ericsson.se>
In-Reply-To: <17691.52053.238582.906810@rautu.tutpro.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjAFdDo7W4lgXwR0GND8ubaHy/fQAADsww
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Juha Heinanen" <jh@tutpro.com>
X-OriginalArrivalTime: 28 Sep 2006 13:20:53.0645 (UTC)
	FILETIME=[ECA613D0:01C6E300]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 856eb5f76e7a34990d1d457d8e8e5b7f
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi,=20

>>If the userpart is parsed as telephone-subscriber, there=20
>>is no such thing as a fragment identifier in the userpart,=20
>>so why can't "#" be  > unescaped in that case?
>=20
>i don't know what fragment identifier is, but most sip phones=20
>on the market do not escape # in request-uri userpart and i=20
>haven't noticed any problems associated with it.  so i=20
>suggest to allow # unescaped also in sip uri userparts.

I have also seen SIP nodes using # unescaped in the userpart, and I
haven't heard of any problems.

Regards,

Christer

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 09:31:33 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSvww-0000W6-Fc; Thu, 28 Sep 2006 09:29:14 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSvwu-0000Vw-PN
	for sip@ietf.org; Thu, 28 Sep 2006 09:29:12 -0400
Received: from s1.mailresponder.info ([193.24.237.10])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSvwp-0006Z1-L3
	for sip@ietf.org; Thu, 28 Sep 2006 09:29:12 -0400
Received: from moonfish.nero.com (193.47.77.31)
	by s1.mailresponder.info with MERCUR Mailserver (v4.02.30
	ODAtMjQzOS03MTc5) for <sip@ietf.org>; Thu, 28 Sep 2006 15:27:48 +0200
Received: from smtp.ahead.de (unknown [192.168.1.222])
	by moonfish.nero.com (Postfix) with ESMTP id CE3C61FE4B96;
	Thu, 28 Sep 2006 15:24:29 +0200 (CEST)
Received: from [192.168.12.144] (unknown [192.168.12.144])
	by smtp.ahead.de (Postfix) with ESMTP
	id D33912DE92D; Thu, 28 Sep 2006 15:27:42 +0200 (CEST)
Message-ID: <451BCDCE.1060003@nero.com>
Date: Thu, 28 Sep 2006 15:27:42 +0200
From: Markus Hofmann <mhofmann@nero.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: "Christer Holmberg (JO/LMF)" <christer.holmberg@ericsson.com>
Subject: Re: [Sip] Escaping rules of SIP-URI userpart
References: <5EB80D22825EEE42872083AD5BFFB59403BC80F4@esealmw113.eemea.ericsson.se>
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB59403BC80F4@esealmw113.eemea.ericsson.se>
X-Enigmail-Version: 0.94.1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 50a516d93fd399dc60588708fd9a3002
Cc: sip@ietf.org, Juha Heinanen <jh@tutpro.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Christer,

for time ago I was asked the question how to handle # in a user URI.

Paul Kyzivat wrote this:
"
Not quite. RFC 3261 section 19.1.2 says:

    The telephone-subscriber subset of the user component has special
    escaping considerations.  The set of characters not reserved in the
    RFC 2806 [9] description of telephone-subscriber contains a number of
    characters in various syntax elements that need to be escaped when
    used in SIP URIs.  Any characters occurring in a telephone-subscriber
    that do not appear in an expansion of the BNF for the user rule MUST
    be escaped.

So you will have to go with: <sip:003%23xyz@hello.com>".

I hope this helps.

Regards,
Markus



Christer Holmberg (JO/LMF) wrote:
> Hi, 
> 
>>> If the userpart is parsed as telephone-subscriber, there 
>>> is no such thing as a fragment identifier in the userpart, 
>>> so why can't "#" be  > unescaped in that case?
>> i don't know what fragment identifier is, but most sip phones 
>> on the market do not escape # in request-uri userpart and i 
>> haven't noticed any problems associated with it.  so i 
>> suggest to allow # unescaped also in sip uri userparts.
> 
> I have also seen SIP nodes using # unescaped in the userpart, and I
> haven't heard of any problems.
> 
> Regards,
> 
> Christer
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 09:37:36 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSw2p-0004xc-5s; Thu, 28 Sep 2006 09:35:19 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSw2n-0004xX-8c
	for sip@ietf.org; Thu, 28 Sep 2006 09:35:17 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSw2g-0007Jl-Kg
	for sip@ietf.org; Thu, 28 Sep 2006 09:35:17 -0400
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	183364F0147; Thu, 28 Sep 2006 15:35:10 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 15:35:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 15:35:08 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403BC81B4@esealmw113.eemea.ericsson.se>
In-Reply-To: <451BCDCE.1060003@nero.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjAgzfecs8tciMSUen9y8isOpcfAAAEWfg
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Markus Hofmann" <mhofmann@nero.com>
X-OriginalArrivalTime: 28 Sep 2006 13:35:09.0712 (UTC)
	FILETIME=[EAE78900:01C6E302]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 14582b0692e7f70ce7111d04db3781c8
Cc: sip@ietf.org, Juha Heinanen <jh@tutpro.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi Markus,

I know what section 19.1.2 says.

The issue is that I don't understand why that rule is needed. =
User=3Dphone
means that the userpart shall be parsed as a telephone-subscriber, and
within a telephone-subscriber the "#" does not have any special meaning,
so there is no need to escape it.=20

So, yes, you probably have to go with:

sip:003%23xyz@hello.com

But, I see no reason why you should have to go with:

sip:003%23xyz@hello.com;user=3Dphone

Instead you could use:

sip:003#xyz@hello.com;user=3Dphone

Regards,

Christer


=20

> -----Original Message-----
> From: Markus Hofmann [mailto:mhofmann@nero.com]=20
> Sent: 28. syyskuuta 2006 16:28
> To: Christer Holmberg (JO/LMF)
> Cc: Juha Heinanen; sip@ietf.org
> Subject: Re: [Sip] Escaping rules of SIP-URI userpart
>=20
> Hi Christer,
>=20
> for time ago I was asked the question how to handle # in a user URI.
>=20
> Paul Kyzivat wrote this:
> "
> Not quite. RFC 3261 section 19.1.2 says:
>=20
>     The telephone-subscriber subset of the user component has special
>     escaping considerations.  The set of characters not=20
> reserved in the
>     RFC 2806 [9] description of telephone-subscriber contains=20
> a number of
>     characters in various syntax elements that need to be escaped when
>     used in SIP URIs.  Any characters occurring in a=20
> telephone-subscriber
>     that do not appear in an expansion of the BNF for the=20
> user rule MUST
>     be escaped.
>=20
> So you will have to go with: <sip:003%23xyz@hello.com>".
>=20
> I hope this helps.
>=20
> Regards,
> Markus
>=20
>=20
>=20
> Christer Holmberg (JO/LMF) wrote:
> > Hi,
> >=20
> >>> If the userpart is parsed as telephone-subscriber, there=20
> is no such=20
> >>> thing as a fragment identifier in the userpart, so why=20
> can't "#" be =20
> >>> > unescaped in that case?
> >> i don't know what fragment identifier is, but most sip=20
> phones on the=20
> >> market do not escape # in request-uri userpart and i=20
> haven't noticed=20
> >> any problems associated with it.  so i suggest to allow #=20
> unescaped=20
> >> also in sip uri userparts.
> >=20
> > I have also seen SIP nodes using # unescaped in the userpart, and I=20
> > haven't heard of any problems.
> >=20
> > Regards,
> >=20
> > Christer
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > sipping@ietf.org for new developments on the application of sip
>=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 09:43:56 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSw9B-0001pq-V9; Thu, 28 Sep 2006 09:41:53 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSw8p-0001nv-Tg
	for sip@ietf.org; Thu, 28 Sep 2006 09:41:31 -0400
Received: from mail119.messagelabs.com ([216.82.241.179])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GSw8o-00088J-Lk
	for sip@ietf.org; Thu, 28 Sep 2006 09:41:31 -0400
X-VirusChecked: Checked
X-Env-Sender: vineet.gupta@motorola.com
X-Msg-Ref: server-8.tower-119.messagelabs.com!1159450889!8280302!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [129.188.136.9]
Received: (qmail 21590 invoked from network); 28 Sep 2006 13:41:29 -0000
Received: from ftpbox.mot.com (HELO ftpbox.mot.com) (129.188.136.9)
	by server-8.tower-119.messagelabs.com with SMTP;
	28 Sep 2006 13:41:29 -0000
Received: from az33exr04.mot.com (az33exr04.mot.com [10.64.251.234])
	by ftpbox.mot.com (8.12.11/Motorola) with ESMTP id k8SDfTeU012354
	for <sip@ietf.org>; Thu, 28 Sep 2006 08:41:29 -0500 (CDT)
Received: from ZMY16EXM66.ds.mot.com (zmy16exm66.ap.mot.com [10.179.4.26])
	by az33exr04.mot.com (8.13.1/8.13.0) with ESMTP id k8SDfRaT009034
	for <sip@ietf.org>; Thu, 28 Sep 2006 08:41:28 -0500 (CDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Date: Thu, 28 Sep 2006 21:41:25 +0800
Message-ID: <C82A9B11BE247C4E952DC733EA98DAA101FE01AF@ZMY16EXM66.ds.mot.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Doubt related to the contact header in the INVITE responses.
Thread-Index: AcbjA8rxr4s6o25RS9aza2Ak3bZymQ==
From: "Gupta Vineet-A18467" <vineet.gupta@motorola.com>
To: <sip@ietf.org>
X-Spam-Score: 0.1 (/)
X-Scan-Signature: d185fa790257f526fedfd5d01ed9c976
Subject: [Sip] Doubt related to the contact header in the INVITE responses.
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0184485745=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0184485745==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E303.CBA74682"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6E303.CBA74682
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I had a doubt related to the setting of the contact header in responses =
to INVITE request.

 As per RFC-3261, it is clear that the remote-target (which is the URI =
part of the contact header set by the remote party), can only be =
modified through the INVITE request or any responses to INVITE request.  =
It cannot be modified through any other requests within the INVITE =
dialog.

But what is not clear is that, "Whether some UAS can set a different =
contact header, then the one it had set in a provisional response (like =
183 session in progress), in subsequent provisional (like 180 ringing) =
or final response to the INVITE transaction?"

At present I am not able to think of the scenario, where such feature =
might be required, but as I wanted to know whether an RFC-3261 compliant =
SIP stack should allow/disallow this.

Regards,
Vineet.

------_=_NextPart_001_01C6E303.CBA74682
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Diso-8859-1">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7650.21">
<TITLE>Doubt related to the contact header in the INVITE =
responses.</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">I had a doubt related to the<B> setting =
of the contact header in responses</B> to INVITE request.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">&nbsp;As per RFC-3261, it is clear that =
the remote-target (which is the URI part of the contact header set by =
the remote party), can only be modified through the INVITE request or =
any responses to INVITE request.&nbsp; It cannot be modified through any =
other requests within the INVITE dialog.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">But what is not clear is =
that,</FONT><B> <FONT SIZE=3D2 FACE=3D"Arial">&quot;Whether some UAS can =
set a different contact header, then the one it had set in a provisional =
response (like 183 session in progress), in subsequent provisional (like =
180 ringing) or final response to the INVITE =
transaction?&quot;</FONT></B></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">At present I am not able to think of =
the scenario, where such feature might be required, but as I wanted to =
know whether an RFC-3261 compliant SIP stack should allow/disallow =
this.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Regards,</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">Vineet.</FONT>
</P>

</BODY>
</HTML>
------_=_NextPart_001_01C6E303.CBA74682--


--===============0184485745==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0184485745==--




From sip-bounces@ietf.org Thu Sep 28 09:58:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSwN3-0007ug-KM; Thu, 28 Sep 2006 09:56:13 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSwN1-0007sb-Ia
	for sip@ietf.org; Thu, 28 Sep 2006 09:56:11 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSwMw-0001mO-Ti
	for sip@ietf.org; Thu, 28 Sep 2006 09:56:11 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 28 Sep 2006 09:56:07 -0400
X-IronPort-AV: i="4.09,231,1157342400"; 
	d="scan'208"; a="104867956:sNHT50368488"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8SDu6Gi005781; Thu, 28 Sep 2006 09:56:06 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8SDu6uI029932; 
	Thu, 28 Sep 2006 09:56:06 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 09:56:06 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 09:56:06 -0400
Message-ID: <451BD475.8060501@cisco.com>
Date: Thu, 28 Sep 2006 09:56:05 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Francois Audet <audet@nortel.com>
Subject: Re: [Sip] GRUU and Grid alternative
References: <1ECE0EB50388174790F9694F77522CCF0D4E5349@zrc2hxm0.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0D4E5349@zrc2hxm0.corp.nortel.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Sep 2006 13:56:06.0254 (UTC)
	FILETIME=[D7DCA0E0:01C6E305]
DKIM-Signature: a=rsa-sha1; q=dns; l=1357; t=1159451766; x=1160315766;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Grid=20alternative
	|To:Francois=20Audet=20<audet@nortel.com>;
	X=v=3Dcisco.com=3B=20h=3D37wdfzTcXxsKFn2cKwMMZsWTSx8=3D;
	b=i/NKfqzFmDu57eetXSE9ttv0gvE0IV4is4Bbxr9LbPtpcPaZ3/Nv7o1tyyGYBQk2lEWjqkxk
	uoa9tc7gdtTNFvnZHMcJtHwmnG0twDrg2A8hY8YjbOIguQEfZPzjJ9M5;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b19722fc8d3865b147c75ae2495625f2
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Francois,

I may have spoken too soon. I went back and looked at the relevant IMS 
spec, and it looks like things may be ok there. At the relevant point it 
simply calls for following 3261, and while it certainly doesn't seem to 
anticipate there being route headers in this case it should probably be 
ok. I only looked at a recent version of the IMS specs, not older ones 
that have been deployed, but there is at least a chance that things will 
be ok.

My concern was that IMS does a bunch of stuff to save and verify the 
contents of Vias, Route headers, etc. And it also sometimes uses the 
saved stuff to initiate a BYE message from the middle. (Transitioning 
from being a proxy to a B2BUA. Ugh!) This change could have messed that 
logic up, but it looks like it may squeak through. (Perhaps by dumb luck.)

	Paul

Francois Audet wrote:
>  
>> BUT, its going to present some compatibility problems for 
>> proxies that don't expect to encounter Route headers in some 
>> contexts. That is non-compliant but its out there. In 
>> particular, IMS P-CSCFs aren't going to be at all happy 
>> routing a request outbound to an UE in this way.
> 
> Hi Paul,
> 
> Can you describe this in IETF terms for those of us who are
> not IMS-conversant?
> 
> What is the problem with these proxies and Route headers, and when?
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 09:58:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSwNC-0007wr-FB; Thu, 28 Sep 2006 09:56:22 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSwNB-0007wg-0N
	for sip@ietf.org; Thu, 28 Sep 2006 09:56:21 -0400
Received: from ahmler8.mail.eds.com ([192.85.154.82])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSwN7-0001ns-KB
	for sip@ietf.org; Thu, 28 Sep 2006 09:56:20 -0400
Received: from ahmlir2.mail.eds.com (ahmlir2-2.mail.eds.com [192.85.154.132])
	by ahmler8.mail.eds.com (8.13.8/8.12.10) with ESMTP id
	k8SDu70p016357; Thu, 28 Sep 2006 09:56:11 -0400
Received: from ahmlir2.mail.eds.com (localhost [127.0.0.1])
	by ahmlir2.mail.eds.com (8.13.8/8.12.10) with ESMTP id k8SDtwWw015800; 
	Thu, 28 Sep 2006 09:55:58 -0400
Received: from usut001.3com.com ([205.142.126.149])
	by ahmlir2.mail.eds.com (8.13.8/8.12.10) with ESMTP id k8SDtwAs015789; 
	Thu, 28 Sep 2006 09:55:58 -0400
To: sip-implementors@cs.columbia.edu
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.2 June 01, 2004
Message-ID: <OF79E7A141.A15FC0C5-ON652571F7.004C6D0E-652571F7.004C9542@3com.com>
From: Udit_Goyal@3com.com
Date: Thu, 28 Sep 2006 19:29:11 +0530
X-MIMETrack: Serialize by Router on USUT001/US/3Com(Release 6.0.3|September 26,
	2003) at 09/28/2006 06:56:03 AM,
	Serialize complete at 09/28/2006 06:56:03 AM
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 538aad3a3c4f01d8b6a6477ca4248793
Cc: sip@ietf.org
Subject: [Sip] PRACK query
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0546858332=="
Errors-To: sip-bounces@ietf.org

This is a multipart message in MIME format.
--===============0546858332==
Content-Type: multipart/alternative;
	boundary="=_alternative 004C9540652571F7_="

This is a multipart message in MIME format.
--=_alternative 004C9540652571F7_=
Content-Type: text/plain; charset="US-ASCII"

Hi,

Please let me know if my understanding is correct for regular session 
offer-answer when PRACK is used:

For INVITE containing SDP, and if offer answer done in the using reliable 
183 response for early media, 200 OK response SDP will have an answer for 
the regular session, so 200 OK SDP will be answer to the offer sent in 
initial SDP.

Similarly, if INVITE does not  have SDP, and if offer-answer done using 
PRACK, still 200 OK will contain the regular session offer and answer will 
be present n the ACK message.

Similarly, if UPDATE is used for offer-answer before call is connected, it 
will not affect the regular session offer-answer, it will be taken care by 
initial INVITE , final 200 OK and ACK message.

Thank,s
Udit


--=_alternative 004C9540652571F7_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2 face="sans-serif">Hi,</font>
<br>
<br><font size=2 face="sans-serif">Please let me know if my understanding
is correct for regular session offer-answer when PRACK is used:</font>
<br>
<br><font size=2 face="sans-serif">For INVITE containing SDP, and if offer
answer done in the using reliable 183 response for early media, 200 OK
response SDP will have an answer for the regular session, so 200 OK SDP
will be answer to the offer sent in initial SDP.</font>
<br>
<br><font size=2 face="sans-serif">Similarly, if INVITE does not &nbsp;have
SDP, and if offer-answer done using PRACK, still 200 OK will contain the
regular session offer and answer will be present n the ACK message.</font>
<br>
<br><font size=2 face="sans-serif">Similarly, if UPDATE is used for offer-answer
before call is connected, it will not affect the regular session offer-answer,
it will be taken care by initial INVITE , final 200 OK and ACK message.</font>
<br>
<br><font size=2 face="sans-serif">Thank,s</font>
<br><font size=2 face="sans-serif">Udit</font>
<br>
<br>
--=_alternative 004C9540652571F7_=--


--===============0546858332==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0546858332==--




From sip-bounces@ietf.org Thu Sep 28 10:05:31 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSwTK-0006iC-Vl; Thu, 28 Sep 2006 10:02:42 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSwTJ-0006fz-D8
	for sip@ietf.org; Thu, 28 Sep 2006 10:02:41 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSwTF-0002XQ-Kz
	for sip@ietf.org; Thu, 28 Sep 2006 10:02:41 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-2.cisco.com with ESMTP; 28 Sep 2006 10:02:37 -0400
X-IronPort-AV: i="4.09,231,1157342400"; 
	d="scan'208,217"; a="104869079:sNHT90469612"
Received: from rtp-core-2.cisco.com (rtp-core-2.cisco.com [64.102.124.13])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8SE2bdA010314; Thu, 28 Sep 2006 10:02:37 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8SE2buI001809; 
	Thu, 28 Sep 2006 10:02:37 -0400 (EDT)
Received: from xmb-rtp-215.amer.cisco.com ([64.102.31.124]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 10:02:37 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: [Sip] Doubt related to the contact header in the INVITE responses.
Date: Thu, 28 Sep 2006 10:02:32 -0400
Message-ID: <8983EC086A9D954BA74D9763E853CF3E02236D05@xmb-rtp-215.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Doubt related to the contact header in the INVITE
	responses.
Thread-Index: AcbjA8rxr4s6o25RS9aza2Ak3bZymQAAh9Ig
From: "Sanjay Sinha \(sanjsinh\)" <sanjsinh@cisco.com>
To: "Gupta Vineet-A18467" <vineet.gupta@motorola.com>, <sip@ietf.org>
X-OriginalArrivalTime: 28 Sep 2006 14:02:37.0267 (UTC)
	FILETIME=[C0EC7A30:01C6E306]
DKIM-Signature: a=rsa-sha1; q=dns; l=5051; t=1159452157; x=1160316157;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=sanjsinh@cisco.com;
	z=From:=22Sanjay=20Sinha=20\(sanjsinh\)=22=20<sanjsinh@cisco.com>
	|Subject:RE=3A=20[Sip]=20Doubt=20related=20to=20the=20contact=20header=20in=20the
	=20INVITE=20responses.
	|To:=22Gupta=20Vineet-A18467=22=20<vineet.gupta@motorola.com>,
	=20<sip@ietf.o rg>;
	X=v=3Dcisco.com=3B=20h=3DaH9LokEowsXmDPxm8d0GgPL+FwE=3D;
	b=HoSZ8VqoYJ3wc7kjqZwhn5KTjbMzsoj1ZM8t1GCQ7M4WiNpkUr8/U0FHtpTfladCRofa1873
	N6nyz10Q4Rzl3EJVNfK/EQwggmu1slwnKq0EF0cpcPFKeHC5USZvjunp;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=sanjsinh@cisco.com;
	dkim=pass (
	59 extraneous bytes; sig from cisco.com verified; ); 
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 22bbb45ef41b733eb2d03ee71ece8243
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0184814976=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0184814976==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E306.C0C2611A"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6E306.C0C2611A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20
Pl. see inline ..

________________________________

From: Gupta Vineet-A18467 [mailto:vineet.gupta@motorola.com]=20
Sent: Thursday, September 28, 2006 9:41 AM
To: sip@ietf.org
Subject: [Sip] Doubt related to the contact header in the INVITE
responses.



Hi,=20

I had a doubt related to the setting of the contact header in responses
to INVITE request.=20

 As per RFC-3261, it is clear that the remote-target (which is the URI
part of the contact header set by the remote party), can only be
modified through the INVITE request or any responses to INVITE request.
It cannot be modified through any other requests within the INVITE
dialog.=20

It can be modified with UPDATE also.=20

But what is not clear is that, "Whether some UAS can set a different
contact header, then the one it had set in a provisional response (like
183 session in progress), in subsequent provisional (like 180 ringing)
or final response to the INVITE transaction?"=20

If the provisional response is sent reliably, then it does not make
sense for UAS to have different Contact header in provisional response
and the final response. Prack and ACK will be sent at different UAs
which may not even have knowledge of the dialog.

Sanjay

At present I am not able to think of the scenario, where such feature
might be required, but as I wanted to know whether an RFC-3261 compliant
SIP stack should allow/disallow this.

Regards,=20
Vineet.=20


------_=_NextPart_001_01C6E306.C0C2611A
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Doubt related to the contact header in the INVITE =
responses.</TITLE>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2900.2976" name=3DGENERATOR></HEAD>
<BODY>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff=20
size=3D2></FONT>&nbsp;</DIV><SPAN =
class=3D078375613-28092006></SPAN><FONT=20
face=3DArial><FONT color=3D#0000ff><FONT=20
size=3D2>Pl.&nbsp;see&nbsp;inline&nbsp;..<SPAN=20
class=3D078375613-28092006></SPAN></FONT></FONT></FONT><BR>
<DIV class=3DOutlookMessageHeader lang=3Den-us dir=3Dltr align=3Dleft>
<HR tabIndex=3D-1>
<FONT face=3DTahoma size=3D2><B>From:</B> Gupta Vineet-A18467=20
[mailto:vineet.gupta@motorola.com] <BR><B>Sent:</B> Thursday, September =
28, 2006=20
9:41 AM<BR><B>To:</B> sip@ietf.org<BR><B>Subject:</B> [Sip] Doubt =
related to the=20
contact header in the INVITE responses.<BR></FONT><BR></DIV>
<DIV></DIV><!-- Converted from text/rtf format -->
<P><FONT face=3DArial size=3D2>Hi,</FONT> </P>
<P><FONT face=3DArial size=3D2>I had a doubt related to the<B> setting =
of the=20
contact header in responses</B> to INVITE request.</FONT> </P>
<P><FONT face=3DArial><FONT size=3D2>&nbsp;As per RFC-3261, it is clear =
that the=20
remote-target (which is the URI part of the contact header set by the =
remote=20
party), can only be modified through the INVITE request or any responses =
to=20
INVITE request.&nbsp; It cannot be modified through any other requests =
within=20
the INVITE dialog.<SPAN class=3D078375613-28092006><FONT=20
color=3D#0000ff>&nbsp;</FONT></SPAN></FONT></FONT></P>
<P><FONT face=3DArial><FONT size=3D2><SPAN =
class=3D078375613-28092006><FONT=20
color=3D#0000ff>It can be modified&nbsp;with UPDATE=20
also.</FONT>&nbsp;</SPAN></FONT></FONT></P>
<P><FONT face=3DArial size=3D2>But what is not clear is =
that,</FONT><STRONG>=20
</STRONG><FONT face=3DArial><FONT size=3D2><STRONG>"Whether some UAS can =
set a=20
different contact header, then the one it had set in a provisional =
response=20
(like 183 session in progress), in subsequent provisional (like 180 =
ringing) or=20
final response to the INVITE transaction?"</STRONG><SPAN=20
class=3D078375613-28092006><FONT=20
color=3D#0000ff>&nbsp;</FONT></SPAN></FONT></FONT></P>
<P><FONT face=3DArial><FONT color=3D#0000ff size=3D2><SPAN =
class=3D078375613-28092006>If=20
the&nbsp;provisional response is sent reliably, then it does =
not&nbsp;make sense=20
for UAS to have different Contact header in provisional response and the =
final=20
response. Prack and ACK will be sent at different UAs which may not even =
have=20
knowledge of the dialog.</SPAN></FONT></FONT></P>
<P><FONT face=3DArial><FONT color=3D#0000ff size=3D2><SPAN=20
class=3D078375613-28092006>Sanjay</SPAN></FONT></FONT></P>
<P><FONT face=3DArial size=3D2>At present I am not able to think of the =
scenario,=20
where such feature might be required, but as I wanted to know whether an =

RFC-3261 compliant SIP stack should allow/disallow this.</FONT></P>
<P><FONT face=3DArial size=3D2>Regards,</FONT> <BR><FONT face=3DArial=20
size=3D2>Vineet.</FONT> </P></BODY></HTML>

------_=_NextPart_001_01C6E306.C0C2611A--


--===============0184814976==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0184814976==--




From sip-bounces@ietf.org Thu Sep 28 10:18:22 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSwgZ-000599-UN; Thu, 28 Sep 2006 10:16:23 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSwgY-000594-Vs
	for sip@ietf.org; Thu, 28 Sep 2006 10:16:22 -0400
Received: from mailgw4.ericsson.se ([193.180.251.62])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSwgR-0005BJ-Gt
	for sip@ietf.org; Thu, 28 Sep 2006 10:16:22 -0400
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	BF66D8E0001; Thu, 28 Sep 2006 16:16:12 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 16:16:12 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] PRACK query
Date: Thu, 28 Sep 2006 16:16:11 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403BF8F76@esealmw113.eemea.ericsson.se>
In-Reply-To: <OF79E7A141.A15FC0C5-ON652571F7.004C6D0E-652571F7.004C9542@3com.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] PRACK query
Thread-Index: AcbjBgr/emLGyRb7TKWhPfUdfraOngAAfJsw
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: <Udit_Goyal@3com.com>,
	<sip-implementors@cs.columbia.edu>
X-OriginalArrivalTime: 28 Sep 2006 14:16:12.0242 (UTC)
	FILETIME=[A6AFCB20:01C6E308]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 50a516d93fd399dc60588708fd9a3002
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi,=20

>Please let me know if my understanding is correct for regular session
offer-answer when PRACK is used:=20
>=09
>For INVITE containing SDP, and if offer answer done in the using
reliable 183 response for early media, 200 OK response SDP will have an
answer for the=20
>regular session, so 200 OK SDP will be answer to the offer sent in
initial SDP.=20

Yes.

Of course, since you have already received the answer reliably, you
really don't need to care about the SDP in 200 OK, but according to the
rules it should be the same as previously sent in 18x.
=09
>Similarly, if INVITE does not  have SDP, and if offer-answer done using
PRACK, still 200 OK will contain the regular session offer and answer
will be=20
>present n the ACK message.=20

I would assume so, yes. But, again, you don't really need to care.

>Similarly, if UPDATE is used for offer-answer before call is connected,
it will not affect the regular session offer-answer, it will be taken
care by=20
>initial INVITE , final 200 OK and ACK message.=20

I don't know what you mean by "not affect".

If you send an offer in INVITE, and receives an answer in a reliable
18x, the offer/answer exchange in UPDATE will then replace the one
previously done.=20

But, yes, the SDP you get in the 200 OK should still be the same that
you got in 18x, even if you have performed offer/answer exchanges after
that.

At least this is how I understand it - but you can never be sure when it
comes to offer/answer :)

Regards,

Christer
=09
=09


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 10:48:06 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSx9Z-00077Z-Li; Thu, 28 Sep 2006 10:46:21 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSx9Y-00075L-00
	for sip@ietf.org; Thu, 28 Sep 2006 10:46:20 -0400
Received: from rtp-iport-2.cisco.com ([64.102.122.149])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSwuO-0008Oq-Sp
	for sip@ietf.org; Thu, 28 Sep 2006 10:30:42 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-2.cisco.com with ESMTP; 28 Sep 2006 10:30:41 -0400
X-IronPort-AV: i="4.09,231,1157342400"; 
	d="scan'208"; a="104874115:sNHT387336574"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8SEUeaP008647; Thu, 28 Sep 2006 10:30:40 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8SEUddM021989; 
	Thu, 28 Sep 2006 10:30:39 -0400 (EDT)
Received: from xmb-rtp-215.amer.cisco.com ([64.102.31.124]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 10:30:39 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 10:30:34 -0400
Message-ID: <8983EC086A9D954BA74D9763E853CF3E02236D38@xmb-rtp-215.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjAgzfecs8tciMSUen9y8isOpcfAAAEWfgAAIAbQA=
From: "Sanjay Sinha \(sanjsinh\)" <sanjsinh@cisco.com>
To: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>,
	"Markus Hofmann" <mhofmann@nero.com>
X-OriginalArrivalTime: 28 Sep 2006 14:30:39.0909 (UTC)
	FILETIME=[ABDB4550:01C6E30A]
DKIM-Signature: a=rsa-sha1; q=dns; l=3440; t=1159453840; x=1160317840;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=sanjsinh@cisco.com;
	z=From:=22Sanjay=20Sinha=20\(sanjsinh\)=22=20<sanjsinh@cisco.com>
	|Subject:RE=3A=20[Sip]=20Escaping=20rules=20of=20SIP-URI=20userpart
	|To:=22Christer=20Holmberg=20\(JO/LMF\)=22=20<christer.holmberg@ericsson.com
	>,=0A=20=20=20=20=20=20=20=20=22Markus=20Hofmann=22=20<mhofmann@nero.com>;
	X=v=3Dcisco.com=3B=20h=3DsaUH+cXQS7A21GChUTGlATalGPw=3D;
	b=qBJBKejmTaBpXWr4/mrgj5JuX+OTViPEPC/1nIzckbWZwmowEggyNfXQYMj+O1iyhKhoI5Zk
	h3pJdMdN0rWHeBtSGJMxKKjMonjFs0RY/HNj1+b7Prqdp5OZv8wVj8Zh;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=sanjsinh@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 3a4bc66230659131057bb68ed51598f8
Cc: sip@ietf.org, Juha Heinanen <jh@tutpro.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I have a related query about display name? if there is a reserved
character, like " ", inside the display name, (for example, "DEIDRE
"PHONE LADY" BROWN"), should that be escaped?=20

Thanks
Sanjay

-----Original Message-----
From: Christer Holmberg (JO/LMF) [mailto:christer.holmberg@ericsson.com]

Sent: Thursday, September 28, 2006 9:35 AM
To: Markus Hofmann
Cc: sip@ietf.org; Juha Heinanen
Subject: RE: [Sip] Escaping rules of SIP-URI userpart


Hi Markus,

I know what section 19.1.2 says.

The issue is that I don't understand why that rule is needed. =
User=3Dphone
means that the userpart shall be parsed as a telephone-subscriber, and
within a telephone-subscriber the "#" does not have any special meaning,
so there is no need to escape it.=20

So, yes, you probably have to go with:

sip:003%23xyz@hello.com

But, I see no reason why you should have to go with:

sip:003%23xyz@hello.com;user=3Dphone

Instead you could use:

sip:003#xyz@hello.com;user=3Dphone

Regards,

Christer


=20

> -----Original Message-----
> From: Markus Hofmann [mailto:mhofmann@nero.com]
> Sent: 28. syyskuuta 2006 16:28
> To: Christer Holmberg (JO/LMF)
> Cc: Juha Heinanen; sip@ietf.org
> Subject: Re: [Sip] Escaping rules of SIP-URI userpart
>=20
> Hi Christer,
>=20
> for time ago I was asked the question how to handle # in a user URI.
>=20
> Paul Kyzivat wrote this:
> "
> Not quite. RFC 3261 section 19.1.2 says:
>=20
>     The telephone-subscriber subset of the user component has special
>     escaping considerations.  The set of characters not reserved in=20
> the
>     RFC 2806 [9] description of telephone-subscriber contains a number

> of
>     characters in various syntax elements that need to be escaped when
>     used in SIP URIs.  Any characters occurring in a=20
> telephone-subscriber
>     that do not appear in an expansion of the BNF for the user rule=20
> MUST
>     be escaped.
>=20
> So you will have to go with: <sip:003%23xyz@hello.com>".
>=20
> I hope this helps.
>=20
> Regards,
> Markus
>=20
>=20
>=20
> Christer Holmberg (JO/LMF) wrote:
> > Hi,
> >=20
> >>> If the userpart is parsed as telephone-subscriber, there
> is no such
> >>> thing as a fragment identifier in the userpart, so why
> can't "#" be
> >>> > unescaped in that case?
> >> i don't know what fragment identifier is, but most sip
> phones on the
> >> market do not escape # in request-uri userpart and i
> haven't noticed
> >> any problems associated with it.  so i suggest to allow #
> unescaped
> >> also in sip uri userparts.
> >=20
> > I have also seen SIP nodes using # unescaped in the userpart, and I=20
> > haven't heard of any problems.
> >=20
> > Regards,
> >=20
> > Christer
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > sipping@ietf.org for new developments on the application of sip
>=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol Use
sip-implementors@cs.columbia.edu for questions on current sip Use
sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 10:48:06 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSx98-0006z8-Pt; Thu, 28 Sep 2006 10:45:54 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSx97-0006yj-HV
	for sip@ietf.org; Thu, 28 Sep 2006 10:45:53 -0400
Received: from alnrmhc12.comcast.net ([206.18.177.52])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSx5e-0002gh-4B
	for sip@ietf.org; Thu, 28 Sep 2006 10:42:19 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc12) with ESMTP
	id <20060928144217b1200epvhie>; Thu, 28 Sep 2006 14:42:17 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8SEgGUm018880
	for <sip@ietf.org>; Thu, 28 Sep 2006 10:42:16 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8SEgGfl018876;
	Thu, 28 Sep 2006 10:42:16 -0400
Date: Thu, 28 Sep 2006 10:42:16 -0400
Message-Id: <200609281442.k8SEgGfl018876@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <5EB80D22825EEE42872083AD5BFFB59403BC81B4@esealmw113.eemea.ericsson.se>
	(christer.holmberg@ericsson.com)
Subject: Re: [Sip] Escaping rules of SIP-URI userpart
References: <5EB80D22825EEE42872083AD5BFFB59403BC81B4@esealmw113.eemea.ericsson.se>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 798b2e660f1819ae38035ac1d8d5e3ab
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>

   The issue is that I don't understand why that rule is needed. User=phone
   means that the userpart shall be parsed as a telephone-subscriber, and
   within a telephone-subscriber the "#" does not have any special meaning,
   so there is no need to escape it. 

   So, yes, you probably have to go with:

   sip:003%23xyz@hello.com

   But, I see no reason why you should have to go with:

   sip:003%23xyz@hello.com;user=phone

   Instead you could use:

   sip:003#xyz@hello.com;user=phone

How would you write a left-to-right parser that could cope with that?

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 10:52:10 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSxDW-0002Ym-Ln; Thu, 28 Sep 2006 10:50:26 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSxDU-0002Yc-Gg
	for sip@ietf.org; Thu, 28 Sep 2006 10:50:24 -0400
Received: from sccrmhc15.comcast.net ([204.127.200.85])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSxDT-0004Wc-Aj
	for sip@ietf.org; Thu, 28 Sep 2006 10:50:24 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (sccrmhc15) with ESMTP
	id <2006092814502201500inls0e>; Thu, 28 Sep 2006 14:50:22 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8SEoMUm019055
	for <sip@ietf.org>; Thu, 28 Sep 2006 10:50:22 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8SEoMaI019051;
	Thu, 28 Sep 2006 10:50:22 -0400
Date: Thu, 28 Sep 2006 10:50:22 -0400
Message-Id: <200609281450.k8SEoMaI019051@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <5EB80D22825EEE42872083AD5BFFB59403BC80F4@esealmw113.eemea.ericsson.se>
	(christer.holmberg@ericsson.com)
Subject: Re: [Sip] Escaping rules of SIP-URI userpart
References: <5EB80D22825EEE42872083AD5BFFB59403BC80F4@esealmw113.eemea.ericsson.se>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 30ac594df0e66ffa5a93eb4c48bcb014
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>

   I have also seen SIP nodes using # unescaped in the userpart, and I
   haven't heard of any problems.

sipX is strict on URI syntax, and it rejects requests that don't
escape "#".  We've had some problems with that.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 10:52:24 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSxDt-0002vZ-KA; Thu, 28 Sep 2006 10:50:49 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSxDs-0002vK-5G
	for sip@ietf.org; Thu, 28 Sep 2006 10:50:48 -0400
Received: from mail128.messagelabs.com ([216.82.250.131])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GSxDq-0004bK-KV
	for sip@ietf.org; Thu, 28 Sep 2006 10:50:48 -0400
X-VirusChecked: Checked
X-Env-Sender: vineet.gupta@motorola.com
X-Msg-Ref: server-13.tower-128.messagelabs.com!1159455045!1315813!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [129.188.136.7]
Received: (qmail 31224 invoked from network); 28 Sep 2006 14:50:45 -0000
Received: from motgate7.mot.com (HELO motgate7.mot.com) (129.188.136.7)
	by server-13.tower-128.messagelabs.com with SMTP;
	28 Sep 2006 14:50:45 -0000
Received: from az33exr03.mot.com ([10.64.251.233])
	by motgate7.mot.com (8.12.11/Motorola) with ESMTP id k8SEoiUx006248
	for <sip@ietf.org>; Thu, 28 Sep 2006 07:50:44 -0700 (MST)
Received: from ZMY16EXM66.ds.mot.com (zmy16exm66.ap.mot.com [10.179.4.26])
	by az33exr03.mot.com (8.13.1/8.13.0) with ESMTP id k8SEog1h003620
	for <sip@ietf.org>; Thu, 28 Sep 2006 09:50:43 -0500 (CDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: [Sip] Doubt related to the contact header in the INVITE responses.
Date: Thu, 28 Sep 2006 22:50:40 +0800
Message-ID: <C82A9B11BE247C4E952DC733EA98DAA101FE01D7@ZMY16EXM66.ds.mot.com>
In-Reply-To: <8983EC086A9D954BA74D9763E853CF3E02236D05@xmb-rtp-215.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Doubt related to the contact header in the INVITE
	responses.
Thread-Index: AcbjA8rxr4s6o25RS9aza2Ak3bZymQAAh9IgAAFjmbA=
From: "Gupta Vineet-A18467" <vineet.gupta@motorola.com>
To: "Sanjay Sinha \(sanjsinh\)" <sanjsinh@cisco.com>
X-Spam-Score: 0.1 (/)
X-Scan-Signature: d9238570526f12788af3d33c67f37625
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0789837992=="
Errors-To: sip-bounces@ietf.org

This is a multi-part message in MIME format.

--===============0789837992==
Content-class: urn:content-classes:message
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E30D.7823B57A"

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6E30D.7823B57A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi Sanjay,
=20
Thanks for the response.=20
=20
However, I think UPDATE request can also be sent before INVITE dialog is
established at the UAS through the receipt of ACK. So, I see that the
possibility of the ACK/PRACK being sent to the UAs which don't have  the
knowledge of the INVITE dialog, in case of the modification of the
target-URI through the UPDATE request too.
=20
So, can we assume that even RFC-3261 does not restrict users from
setting the contact headers in different responses to the INVITE
request, even though such a feature may not serve any useful purpose (at
least, as per the use cases envisioned as of now).
=20
Regards,
Vineet.

-----Original Message-----
From: Sanjay Sinha (sanjsinh) [mailto:sanjsinh@cisco.com]
Sent: Thursday, September 28, 2006 7:33 PM
To: Gupta Vineet-A18467; sip@ietf.org
Subject: RE: [Sip] Doubt related to the contact header in the INVITE
responses.


=20
Pl. see inline ..

  _____ =20

From: Gupta Vineet-A18467 [mailto:vineet.gupta@motorola.com]=20
Sent: Thursday, September 28, 2006 9:41 AM
To: sip@ietf.org
Subject: [Sip] Doubt related to the contact header in the INVITE
responses.



Hi,=20

I had a doubt related to the setting of the contact header in responses
to INVITE request.=20

 As per RFC-3261, it is clear that the remote-target (which is the URI
part of the contact header set by the remote party), can only be
modified through the INVITE request or any responses to INVITE request.
It cannot be modified through any other requests within the INVITE
dialog.=20

It can be modified with UPDATE also.=20

But what is not clear is that, "Whether some UAS can set a different
contact header, then the one it had set in a provisional response (like
183 session in progress), in subsequent provisional (like 180 ringing)
or final response to the INVITE transaction?"=20

If the provisional response is sent reliably, then it does not make
sense for UAS to have different Contact header in provisional response
and the final response. Prack and ACK will be sent at different UAs
which may not even have knowledge of the dialog.

Sanjay

At present I am not able to think of the scenario, where such feature
might be required, but as I wanted to know whether an RFC-3261 compliant
SIP stack should allow/disallow this.

Regards,=20
Vineet.=20


------_=_NextPart_001_01C6E30D.7823B57A
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<TITLE>Doubt related to the contact header in the INVITE =
responses.</TITLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =
size=3D2>Hi=20
Sanjay,</FONT></SPAN></DIV>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =

size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =
size=3D2>Thanks=20
for the response. </FONT></SPAN></DIV>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =

size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =

size=3D2>However, I think UPDATE request can also be sent before INVITE =
dialog is=20
established at the UAS through the receipt of ACK. So,&nbsp;I see that =
the=20
possibility of the ACK/PRACK being sent to the UAs which don't =
have&nbsp; the=20
knowledge of the INVITE dialog, in case of the modification of the =
target-URI=20
through the UPDATE request too.</FONT></SPAN></DIV>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =

size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =
size=3D2>So,=20
can we assume that even RFC-3261 does not restrict users from setting =
the=20
contact headers in different responses to the INVITE request, even =
though such a=20
feature may not serve any useful purpose (at least, as per the use cases =

envisioned as of now).</FONT></SPAN></DIV>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =

size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =

size=3D2>Regards,</FONT></SPAN></DIV>
<DIV><SPAN class=3D497233614-28092006><FONT face=3DArial color=3D#0000ff =

size=3D2>Vineet.</FONT></SPAN></DIV>
<BLOCKQUOTE dir=3Dltr style=3D"MARGIN-RIGHT: 0px">
  <DIV class=3DOutlookMessageHeader dir=3Dltr align=3Dleft><FONT =
face=3DTahoma=20
  size=3D2>-----Original Message-----<BR><B>From:</B> Sanjay Sinha =
(sanjsinh)=20
  [mailto:sanjsinh@cisco.com]<BR><B>Sent:</B> Thursday, September 28, =
2006 7:33=20
  PM<BR><B>To:</B> Gupta Vineet-A18467; sip@ietf.org<BR><B>Subject:</B> =
RE:=20
  [Sip] Doubt related to the contact header in the INVITE=20
  responses.<BR><BR></FONT></DIV>
  <DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff=20
  size=3D2></FONT>&nbsp;</DIV><SPAN =
class=3D078375613-28092006></SPAN><FONT=20
  face=3DArial><FONT color=3D#0000ff><FONT=20
  size=3D2>Pl.&nbsp;see&nbsp;inline&nbsp;..<SPAN=20
  class=3D078375613-28092006></SPAN></FONT></FONT></FONT><BR>
  <DIV class=3DOutlookMessageHeader lang=3Den-us dir=3Dltr align=3Dleft>
  <HR tabIndex=3D-1>
  <FONT face=3DTahoma size=3D2><B>From:</B> Gupta Vineet-A18467=20
  [mailto:vineet.gupta@motorola.com] <BR><B>Sent:</B> Thursday, =
September 28,=20
  2006 9:41 AM<BR><B>To:</B> sip@ietf.org<BR><B>Subject:</B> [Sip] Doubt =
related=20
  to the contact header in the INVITE responses.<BR></FONT><BR></DIV>
  <DIV></DIV><!-- Converted from text/rtf format -->
  <P><FONT face=3DArial size=3D2>Hi,</FONT> </P>
  <P><FONT face=3DArial size=3D2>I had a doubt related to the<B> setting =
of the=20
  contact header in responses</B> to INVITE request.</FONT> </P>
  <P><FONT face=3DArial><FONT size=3D2>&nbsp;As per RFC-3261, it is =
clear that the=20
  remote-target (which is the URI part of the contact header set by the =
remote=20
  party), can only be modified through the INVITE request or any =
responses to=20
  INVITE request.&nbsp; It cannot be modified through any other requests =
within=20
  the INVITE dialog.<SPAN class=3D078375613-28092006><FONT=20
  color=3D#0000ff>&nbsp;</FONT></SPAN></FONT></FONT></P>
  <P><FONT face=3DArial><FONT size=3D2><SPAN =
class=3D078375613-28092006><FONT=20
  color=3D#0000ff>It can be modified&nbsp;with UPDATE=20
  also.</FONT>&nbsp;</SPAN></FONT></FONT></P>
  <P><FONT face=3DArial size=3D2>But what is not clear is =
that,</FONT><STRONG>=20
  </STRONG><FONT face=3DArial><FONT size=3D2><STRONG>"Whether some UAS =
can set a=20
  different contact header, then the one it had set in a provisional =
response=20
  (like 183 session in progress), in subsequent provisional (like 180 =
ringing)=20
  or final response to the INVITE transaction?"</STRONG><SPAN=20
  class=3D078375613-28092006><FONT=20
  color=3D#0000ff>&nbsp;</FONT></SPAN></FONT></FONT></P>
  <P><FONT face=3DArial><FONT color=3D#0000ff size=3D2><SPAN=20
  class=3D078375613-28092006>If the&nbsp;provisional response is sent =
reliably,=20
  then it does not&nbsp;make sense for UAS to have different Contact =
header in=20
  provisional response and the final response. Prack and ACK will be =
sent at=20
  different UAs which may not even have knowledge of the=20
  dialog.</SPAN></FONT></FONT></P>
  <P><FONT face=3DArial><FONT color=3D#0000ff size=3D2><SPAN=20
  class=3D078375613-28092006>Sanjay</SPAN></FONT></FONT></P>
  <P><FONT face=3DArial size=3D2>At present I am not able to think of =
the scenario,=20
  where such feature might be required, but as I wanted to know whether =
an=20
  RFC-3261 compliant SIP stack should allow/disallow this.</FONT></P>
  <P><FONT face=3DArial size=3D2>Regards,</FONT> <BR><FONT face=3DArial=20
  size=3D2>Vineet.</FONT> </P></BLOCKQUOTE></BODY></HTML>

------_=_NextPart_001_01C6E30D.7823B57A--


--===============0789837992==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0789837992==--




From sip-bounces@ietf.org Thu Sep 28 10:53:45 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSxEt-0004Dq-LK; Thu, 28 Sep 2006 10:51:51 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSxEs-0004Dh-6F
	for sip@ietf.org; Thu, 28 Sep 2006 10:51:50 -0400
Received: from alnrmhc11.comcast.net ([204.127.225.91])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSxEq-0004wp-Vr
	for sip@ietf.org; Thu, 28 Sep 2006 10:51:50 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc11) with ESMTP
	id <20060928145146b110087j10e>; Thu, 28 Sep 2006 14:51:46 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8SEpjUm019087
	for <sip@ietf.org>; Thu, 28 Sep 2006 10:51:45 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8SEpj3c019083;
	Thu, 28 Sep 2006 10:51:45 -0400
Date: Thu, 28 Sep 2006 10:51:45 -0400
Message-Id: <200609281451.k8SEpj3c019083@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <5EB80D22825EEE42872083AD5BFFB59403BC802E@esealmw113.eemea.ericsson.se>
	(christer.holmberg@ericsson.com)
Subject: Re: [Sip] Escaping rules of SIP-URI userpart
References: <5EB80D22825EEE42872083AD5BFFB59403BC802E@esealmw113.eemea.ericsson.se>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 68c8cc8a64a9d0402e43b8eee9fc4199
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>

   "#" will be used pretty much with service codes, and I think that being
   forced to escape it is unecessary. Also, if you do a conversion between
   a SIP-URI and TEL-URI you always need to check for this character, which
   takes time.

You have to check for more than that, as SIP allows *any* character to
be written as an escape.  If tel: URIs don't admit escaping, you have
to un-escape when you convert...

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 11:31:07 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSxnx-0000U0-6J; Thu, 28 Sep 2006 11:28:05 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSxnv-0000TW-K8
	for sip@ietf.org; Thu, 28 Sep 2006 11:28:03 -0400
Received: from sccrmhc12.comcast.net ([63.240.77.82])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSxnu-0002He-E6
	for sip@ietf.org; Thu, 28 Sep 2006 11:28:03 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (sccrmhc12) with ESMTP
	id <20060928152756012002di51e>; Thu, 28 Sep 2006 15:28:01 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8SFRuUm019967
	for <sip@ietf.org>; Thu, 28 Sep 2006 11:27:56 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8SFRucd019963;
	Thu, 28 Sep 2006 11:27:56 -0400
Date: Thu, 28 Sep 2006 11:27:56 -0400
Message-Id: <200609281527.k8SFRucd019963@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <8983EC086A9D954BA74D9763E853CF3E02236D38@xmb-rtp-215.amer.cisco.com>
	(sanjsinh@cisco.com)
Subject: Re: [Sip] Escaping rules of SIP-URI userpart
References: <8983EC086A9D954BA74D9763E853CF3E02236D38@xmb-rtp-215.amer.cisco.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: cf4fa59384e76e63313391b70cd0dd25
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: "Sanjay Sinha \(sanjsinh\)" <sanjsinh@cisco.com>

   I have a related query about display name? if there is a reserved
   character, like " ", inside the display name, (for example, "DEIDRE
   "PHONE LADY" BROWN"), should that be escaped? 

If the display name does not fall in the syntax "token" (which has a
narrow range of characters and has no escaping mechanism), it must be
quoted with "...".  Within "...", though, only '\' and '"' are
reserved, and must be represented by preceding them with '\'.  See RFC
3261 section 25.1 for the details.

Which characters are reserved depends on which part of the URI you are
talking about.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 11:56:34 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSyDY-0001Dq-Gh; Thu, 28 Sep 2006 11:54:32 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSyDW-0001Dl-N7
	for sip@ietf.org; Thu, 28 Sep 2006 11:54:30 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSyDV-00071x-Bj
	for sip@ietf.org; Thu, 28 Sep 2006 11:54:30 -0400
Received: from rtp-dkim-2.cisco.com ([64.102.121.159])
	by rtp-iport-1.cisco.com with ESMTP; 28 Sep 2006 08:54:04 -0700
X-IronPort-AV: i="4.09,231,1157353200"; 
	d="scan'208"; a="44007712:sNHT67935383790"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-2.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8SFs4Yj029140; Thu, 28 Sep 2006 11:54:04 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8SFs3dO029781; 
	Thu, 28 Sep 2006 11:54:04 -0400 (EDT)
Received: from xfe-rtp-202.amer.cisco.com ([64.102.31.21]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 11:54:04 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-202.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 11:54:03 -0400
Message-ID: <451BF01A.30800@cisco.com>
Date: Thu, 28 Sep 2006 11:54:02 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: Udit_Goyal@3com.com
References: <OF79E7A141.A15FC0C5-ON652571F7.004C6D0E-652571F7.004C9542@3com.com>
In-Reply-To: <OF79E7A141.A15FC0C5-ON652571F7.004C6D0E-652571F7.004C9542@3com.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Sep 2006 15:54:03.0390 (UTC)
	FILETIME=[5229E1E0:01C6E316]
DKIM-Signature: a=rsa-sha1; q=dns; l=1221; t=1159458844; x=1160322844;
	c=relaxed/simple; s=rtpdkim2001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20[Sip-implementors]=20PRACK=20query
	|To:Udit_Goyal@3com.com;
	X=v=3Dcisco.com=3B=20h=3Dqfg2XqsdVrKJBnNbRVmIL1TTd3Y=3D;
	b=IJfN7mOb3DrWqrp8LvS3OdS8z2x1T5/21O7HWoP9DH/tg4GMD0qizjZ9iMc+u8A3P8n6oQM7
	YY4RagfnTlC2LxJnU2vX/B1X6K7TyF5rTbWZmDb3DI3eWINGNdos7+az;
Authentication-Results: rtp-dkim-2.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: bb8f917bb6b8da28fc948aeffb74aa17
Cc: sip@ietf.org, sip-implementors@cs.columbia.edu
Subject: [Sip] Re: [Sip-implementors] PRACK query
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

This is a complex subject. Start by reading

http://www.ietf.org/internet-drafts/draft-sawada-sipping-sip-offeranswer-01.txt

If that doesn't answer your questions, then ask again.

	Paul

Udit_Goyal@3com.com wrote:
> Hi,
> 
> Please let me know if my understanding is correct for regular session 
> offer-answer when PRACK is used:
> 
> For INVITE containing SDP, and if offer answer done in the using reliable 
> 183 response for early media, 200 OK response SDP will have an answer for 
> the regular session, so 200 OK SDP will be answer to the offer sent in 
> initial SDP.
> 
> Similarly, if INVITE does not  have SDP, and if offer-answer done using 
> PRACK, still 200 OK will contain the regular session offer and answer will 
> be present n the ACK message.
> 
> Similarly, if UPDATE is used for offer-answer before call is connected, it 
> will not affect the regular session offer-answer, it will be taken care by 
> initial INVITE , final 200 OK and ACK message.
> 
> Thank,s
> Udit
> 
> _______________________________________________
> Sip-implementors mailing list
> Sip-implementors@cs.columbia.edu
> https://lists.cs.columbia.edu/cucslists/listinfo/sip-implementors
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 12:10:06 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSyPy-0002nb-7P; Thu, 28 Sep 2006 12:07:22 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSyPv-0002nW-Rg
	for sip@ietf.org; Thu, 28 Sep 2006 12:07:19 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSyPo-0008TA-Bz
	for sip@ietf.org; Thu, 28 Sep 2006 12:07:19 -0400
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	A07BC4F013A; Thu, 28 Sep 2006 18:07:09 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 18:07:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: VS: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 18:03:23 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB5940294EC5C@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjDRGB6srriVRpRAWOUwWdJlDxAAACo6UA
References: <5EB80D22825EEE42872083AD5BFFB59403BC81B4@esealmw113.eemea.ericsson.se>
	<200609281442.k8SEgGfl018876@dragon.ariadne.com>
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: <Dale.Worley@comcast.net>,
	<sip@ietf.org>
X-OriginalArrivalTime: 28 Sep 2006 16:07:09.0119 (UTC)
	FILETIME=[267E9CF0:01C6E318]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7aafa0432175920a4b3e118e16c5cb64
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Dale,


>   The issue is that I don't understand why that rule is needed. =
User=3Dphone
>   means that the userpart shall be parsed as a telephone-subscriber, =
and
>   within a telephone-subscriber the "#" does not have any special =
meaning,
>   so there is no need to escape it.
>
>   So, yes, you probably have to go with:
>
>   sip:003%23xyz@hello.com
>
>  But, I see no reason why you should have to go with:
>
>   sip:003%23xyz@hello.com;user=3Dphone
>
>   Instead you could use:
>
>   sip:003#xyz@hello.com;user=3Dphone
>
How would you write a left-to-right parser that could cope with that?

[CHH] Well, you can't really perform a detailed parse of the userpart =
before you have parsed the user parameter anyway.
=20
And, whatever the value of the user parameter is, I have never seen "#" =
used as this kind of delmiter in a SIP-URI anyway...
=20
Regards,
=20
Christer

=20

=20

=20

=20

=20


Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 12:11:55 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSySh-00045X-Eg; Thu, 28 Sep 2006 12:10:11 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSySg-00045M-1a
	for sip@ietf.org; Thu, 28 Sep 2006 12:10:10 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSySe-0000R1-N3
	for sip@ietf.org; Thu, 28 Sep 2006 12:10:10 -0400
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id 26208DEE; 
	Thu, 28 Sep 2006 18:10:08 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 18:10:07 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: VS: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 18:08:10 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB5940294EC5D@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjDcGDPmfz9L83T5CbCgUNbtI/8QAComAt
References: <5EB80D22825EEE42872083AD5BFFB59403BC802E@esealmw113.eemea.ericsson.se>
	<200609281451.k8SEpj3c019083@dragon.ariadne.com>
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: <Dale.Worley@comcast.net>,
	<sip@ietf.org>
X-OriginalArrivalTime: 28 Sep 2006 16:10:07.0615 (UTC)
	FILETIME=[90E2F0F0:01C6E318]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 52e1467c2184c31006318542db5614d5
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi Dale,

>>   "#" will be used pretty much with service codes, and I think that =
being
>>   forced to escape it is unecessary. Also, if you do a conversion =
between
>>   a SIP-URI and TEL-URI you always need to check for this character, =
which
>>   takes time.
>>
>You have to check for more than that, as SIP allows *any* character to
>be written as an escape.  If tel: URIs don't admit escaping, you have
>to un-escape when you convert...

I do think that tel-URI also convert escaping, so  I guess you would =
only have to do the check when you map from TEL to SIP. But, that is bad =
enough :)

Regards,

Christer

=20

=20



Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 13:03:08 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSzEm-0002aS-0y; Thu, 28 Sep 2006 12:59:52 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSzEk-0002aN-LR
	for sip@ietf.org; Thu, 28 Sep 2006 12:59:50 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSzEh-0005y7-20
	for sip@ietf.org; Thu, 28 Sep 2006 12:59:50 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-1.cisco.com with ESMTP; 28 Sep 2006 09:59:47 -0700
X-IronPort-AV: i="4.09,231,1157353200"; 
	d="scan'208"; a="44015692:sNHT55617428"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8SGxkGO020433; Thu, 28 Sep 2006 12:59:46 -0400
Received: from xbh-rtp-211.amer.cisco.com (xbh-rtp-211.cisco.com
	[64.102.31.102])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8SGxkdM002358; 
	Thu, 28 Sep 2006 12:59:46 -0400 (EDT)
Received: from xmb-rtp-20b.amer.cisco.com ([64.102.31.53]) by
	xbh-rtp-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 12:59:46 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Grid alternative
Date: Thu, 28 Sep 2006 12:59:44 -0400
Message-ID: <072C5B76F7CEAB488172C6F64B30B5E301FEEEC4@xmb-rtp-20b.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Grid alternative
Thread-Index: AcbiqfESzMYd6YHIQSizqQ8surZ1iQAdYHwA
From: "Michael Hammer \(mhammer\)" <mhammer@cisco.com>
To: "Jonathan Rosenberg \(jdrosen\)" <jdrosen@cisco.com>, <jbemmel@zonnet.nl>
X-OriginalArrivalTime: 28 Sep 2006 16:59:46.0273 (UTC)
	FILETIME=[804E1510:01C6E31F]
DKIM-Signature: a=rsa-sha1; q=dns; l=3831; t=1159462786; x=1160326786;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=mhammer@cisco.com;
	z=From:=22Michael=20Hammer=20\(mhammer\)=22=20<mhammer@cisco.com>
	|Subject:RE=3A=20[Sip]=20GRUU=20and=20Grid=20alternative
	|To:=22Jonathan=20Rosenberg=20\(jdrosen\)=22=20<jdrosen@cisco.com>,
	=20<jbemm el@zonnet.nl>;
	X=v=3Dcisco.com=3B=20h=3DneyUEl8wQ+fdDb/cVRyg3kSqtxU=3D;
	b=BOt6Ers75DNowaUj5srBKtPXQcbm3r26HZ8chGDQxGRp8+VO7BFQ5Wq3gUqHemOS3QSGofYS
	E7HEjyGTFoVVaG5Pnt7Ec3wadctKkRptNUwfEzwe7zv61Pa72UQ1VZNE;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=mhammer@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 14582b0692e7f70ce7111d04db3781c8
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Jonathan,

Loose Targetting?  ;lt

Mike
=20

> -----Original Message-----
> From: Jonathan Rosenberg (jdrosen)=20
> Sent: Wednesday, September 27, 2006 10:53 PM
> To: jbemmel@zonnet.nl
> Cc: IETF SIP List
> Subject: Re: [Sip] GRUU and Grid alternative
>=20
>=20
>=20
> jbemmel@zonnet.nl wrote:
>=20
> > Jonathan,
> >=20
> > Yes, I think this would work as a cleaner / more general=20
> solution than=20
> > grid
> >=20
> > For the mechanism, the UA would need to insert a 'lr'=20
> parameter into=20
> > its Contact. This is needed for Path proxy traversal, and makes the=20
> > logic at the registrar simpler (i.e. if registered contact URI=20
> > contains a lr then append Route, else rewrite)
> >=20
> > Perhaps 'lr' alone could be sufficient (i.e. no Supported) although=20
> > you may want an option tag to detect support for this feature
>=20
> Indeed. This was going to be my next post.
>=20
> One of the problems with using Supported/Require in REGISTER,=20
> is that it only works for proxy translation services based on=20
> registrations. Other services, such as routing to a PSTN=20
> gateway, or application routing, are not populated by a=20
> registration. So, how would a proxy know whether to rewrite=20
> the R-URI or push a Route?
>=20
> The idea, as you suggest, is that if the target URI has a ;lr=20
> parameter, the proxy would push a Route. Otherwise, it=20
> rewrites the request uri. In this case, when a UA registers,=20
> rather than using Supported/Require, it could just place a=20
> URI into the Contact which contains the ;lr parameter.
>=20
> This works just fine as long as you assume that existing UA=20
> and routing table configurations are NOT using the ;lr=20
> parameter. I got some reports that existing UA were=20
> populating the Contact header field with URIs with the ;lr=20
> parameter, just because they "support" loose routing (RFC 3261).=20
> This behavior would break the idea of using the ;lr flag to=20
> indicate this feature.
>=20
> A hybrid is to use the ;lr flag just for non-register based=20
> location services, and then use Supported/Require for registrations.
>=20
>=20
> >=20
> > One difference with request URI rewriting is that the latter is=20
> > automatically a one-time operation: once the URI is=20
> rewritten, the proxy=20
> > won't rewrite again when the request spirals. For Route=20
> this is not the=20
> > case. OTOH, if there are any Route headers the proxy shouldn't be=20
> > rewriting / adding a route in the first place,
>=20
> No. Consider the case of a Path headers. In this case, the home proxy=20
> would populate the Route headers from the path set, and then=20
> push the UA=20
> route as the *last* Route header field. But anyway I don't understand=20
> the issue you are raising with spiraling. On each spiral, a new Route=20
> gets pushed. If instead you had R-URI rewriting, the only way the=20
> request would get back to the proxy is if the r-uri pointed to that=20
> proxy, and upon arriving there it would be rewritten again.=20
> So there is=20
> no difference.
>=20
> -Jonathan R.
> --=20
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ=20
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 13:03:08 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSzFV-0002iN-M8; Thu, 28 Sep 2006 13:00:37 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSzFU-0002gh-Ix
	for sip@ietf.org; Thu, 28 Sep 2006 13:00:36 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSzFT-00060a-8U
	for sip@ietf.org; Thu, 28 Sep 2006 13:00:36 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8SH0VM14897; Thu, 28 Sep 2006 13:00:31 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and Grid alternative
Date: Thu, 28 Sep 2006 12:00:30 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D52EBE4@zrc2hxm0.corp.nortel.com>
In-Reply-To: <451BD475.8060501@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and Grid alternative
Thread-Index: AcbjBiK74BOja+8OQC6/9vcfFzqaLgAGXAew
From: "Francois Audet" <audet@nortel.com>
To: "Paul Kyzivat" <pkyzivat@cisco.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0ddefe323dd869ab027dbfff7eff0465
Cc: IETF SIP List <sip@ietf.org>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Excellent.=20

Thanks.=20

> -----Original Message-----
> From: Paul Kyzivat [mailto:pkyzivat@cisco.com]=20
> Sent: Thursday, September 28, 2006 6:56 AM
> To: Audet, Francois (SC100:3055)
> Cc: IETF SIP List
> Subject: Re: [Sip] GRUU and Grid alternative
>=20
> Francois,
>=20
> I may have spoken too soon. I went back and looked at the=20
> relevant IMS spec, and it looks like things may be ok there.=20
> At the relevant point it simply calls for following 3261, and=20
> while it certainly doesn't seem to anticipate there being=20
> route headers in this case it should probably be ok. I only=20
> looked at a recent version of the IMS specs, not older ones=20
> that have been deployed, but there is at least a chance that=20
> things will be ok.
>=20
> My concern was that IMS does a bunch of stuff to save and=20
> verify the contents of Vias, Route headers, etc. And it also=20
> sometimes uses the saved stuff to initiate a BYE message from=20
> the middle. (Transitioning from being a proxy to a B2BUA.=20
> Ugh!) This change could have messed that logic up, but it=20
> looks like it may squeak through. (Perhaps by dumb luck.)
>=20
> 	Paul
>=20
> Francois Audet wrote:
> > =20
> >> BUT, its going to present some compatibility problems for proxies=20
> >> that don't expect to encounter Route headers in some=20
> contexts. That=20
> >> is non-compliant but its out there. In particular, IMS=20
> P-CSCFs aren't=20
> >> going to be at all happy routing a request outbound to an=20
> UE in this=20
> >> way.
> >=20
> > Hi Paul,
> >=20
> > Can you describe this in IETF terms for those of us who are not=20
> > IMS-conversant?
> >=20
> > What is the problem with these proxies and Route headers, and when?
> >=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 13:08:20 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GSzL9-0005qc-0L; Thu, 28 Sep 2006 13:06:27 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GSzL7-0005qP-LW
	for sip@ietf.org; Thu, 28 Sep 2006 13:06:25 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GSzL5-0006Sq-AF
	for sip@ietf.org; Thu, 28 Sep 2006 13:06:25 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8SH6JM05167; Thu, 28 Sep 2006 13:06:19 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and SIPS
Date: Thu, 28 Sep 2006 12:05:28 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D52EBF7@zrc2hxm0.corp.nortel.com>
In-Reply-To: <451B3B5D.8050306@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and SIPS
Thread-Index: AcbiqqXLarf3I9w5QOOSrnjmjlUkawAdF/Pw
From: "Francois Audet" <audet@nortel.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>, "IETF SIP List" <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 82c9bddb247d9ba4471160a9a865a5f3
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I agree with this approach.

I will point out that the latest version of the sips-guidelines draft is
very=20
much in line with what was in GRUU-10. I have used the same model as
GRUU for the=20
Registration procedure.=20

Draft is at:
http://www.ietf.org/internet-drafts/draft-audet-sip-sips-guidelines-03.t
xt

I'm just about ready to issue an -04 update with the consolidated
agreements from
the list.

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Sent: Wednesday, September 27, 2006 8:03 PM
> To: IETF SIP List
> Subject: [Sip] GRUU and SIPS
>=20
> During the GRUU call today, the topic of SIPS was discussed.=20
> The question is what should or should not the GRUU spec say=20
> on SIPS, given we are revising the mechanism. I had=20
> previously wanted to more or less say what it says now, but=20
> have recently changed my mind on this. Given that we are=20
> producing a document to clarify sips, and given that, no=20
> matter what we do say in gruu, implementors would have to=20
> reconcile the two, it is easier I think to leave the problem=20
> in its entirety to the sips document.
>=20
> So, my proposal is to remove all discussion of sips from=20
> gruu, with the exception of a sentence that says=20
> applicability and usage with sips is out of scope for this=20
> document and is to be treated elsewhere. Then the sips=20
> document will handle gruu, outbound and rfc3261 implications of sips.
>=20
> Thoughts?
>=20
> -Jonathan R.
> --=20
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ=20
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 14:02:11 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT0AF-0003IW-NQ; Thu, 28 Sep 2006 13:59:15 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT0AE-0003IR-HI
	for sip@ietf.org; Thu, 28 Sep 2006 13:59:14 -0400
Received: from alnrmhc11.comcast.net ([206.18.177.51])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT0AC-0003z5-AG
	for sip@ietf.org; Thu, 28 Sep 2006 13:59:14 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc11) with ESMTP
	id <20060928175911b11008e8p4e>; Thu, 28 Sep 2006 17:59:11 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8SHxAUm021993
	for <sip@ietf.org>; Thu, 28 Sep 2006 13:59:10 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8SHxA0s021989;
	Thu, 28 Sep 2006 13:59:10 -0400
Date: Thu, 28 Sep 2006 13:59:10 -0400
Message-Id: <200609281759.k8SHxA0s021989@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <5EB80D22825EEE42872083AD5BFFB5940294EC5C@esealmw113.eemea.ericsson.se>
	(christer.holmberg@ericsson.com)
Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
References: <5EB80D22825EEE42872083AD5BFFB59403BC81B4@esealmw113.eemea.ericsson.se>
	<200609281442.k8SEgGfl018876@dragon.ariadne.com>
	<5EB80D22825EEE42872083AD5BFFB5940294EC5C@esealmw113.eemea.ericsson.se>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 7bac9cb154eb5790ae3b2913587a40de
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>

   And, whatever the value of the user parameter is, I have never seen
   "#" used as this kind of delmiter in a SIP-URI anyway...

Whether it has any use in a SIP URI is not particularly important --
as a URI it has to follow the generic syntax of URIs, RFC 2396.  And
RFC 2396 reserves the use of '#' for fragment identifiers.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 14:10:40 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT0Is-0001DX-ET; Thu, 28 Sep 2006 14:08:10 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT0Iq-0001DP-MC
	for sip@ietf.org; Thu, 28 Sep 2006 14:08:08 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT0Ip-0005C2-B6
	for sip@ietf.org; Thu, 28 Sep 2006 14:08:08 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id C575814001D; Thu, 28 Sep 2006 21:07:58 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (plasmid146.gprs.dnafinland.fi [62.78.124.146])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id F0854140017;
	Thu, 28 Sep 2006 21:07:52 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id BE746F0257; Thu, 28 Sep 2006 21:08:35 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17692.4003.668286.233835@rautu.tutpro.com>
Date: Thu, 28 Sep 2006 21:08:35 +0300
From: Juha Heinanen <jh@tutpro.com>
To: Dale.Worley@comcast.net
Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
In-Reply-To: <200609281759.k8SHxA0s021989@dragon.ariadne.com>
References: <5EB80D22825EEE42872083AD5BFFB59403BC81B4@esealmw113.eemea.ericsson.se>
	<200609281442.k8SEgGfl018876@dragon.ariadne.com>
	<5EB80D22825EEE42872083AD5BFFB5940294EC5C@esealmw113.eemea.ericsson.se>
	<200609281759.k8SHxA0s021989@dragon.ariadne.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7bac9cb154eb5790ae3b2913587a40de
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Dale.Worley@comcast.net writes:

 > Whether it has any use in a SIP URI is not particularly important --
 > as a URI it has to follow the generic syntax of URIs, RFC 2396.  And
 > RFC 2396 reserves the use of '#' for fragment identifiers.

there are various exceptions in rfc3261 regarding other standards that
rfc3261 uses.  why can't there be an exception on # too?

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 15:14:40 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT1H4-0006ex-Sq; Thu, 28 Sep 2006 15:10:22 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT1H3-0006es-Or
	for sip@ietf.org; Thu, 28 Sep 2006 15:10:21 -0400
Received: from host10.216.41.24.conversent.net ([216.41.24.10]
	helo=acmepacket.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GT1H1-0001ZX-Bn for sip@ietf.org; Thu, 28 Sep 2006 15:10:21 -0400
Received: from BPenfield [10.0.200.6] by acmepacket.com with ESMTP
	(SMTPD-9.10) id ADEA0300; Thu, 28 Sep 2006 15:09:30 -0400
Message-ID: <00bd01c6e331$9fec1630$800101df@acmepacket.com>
From: "Bob Penfield" <BPenfield@acmepacket.com>
To: "Juha Heinanen" <jh@tutpro.com>,
	<Dale.Worley@comcast.net>
References: <5EB80D22825EEE42872083AD5BFFB59403BC81B4@esealmw113.eemea.ericsson.se><200609281442.k8SEgGfl018876@dragon.ariadne.com><5EB80D22825EEE42872083AD5BFFB5940294EC5C@esealmw113.eemea.ericsson.se><200609281759.k8SHxA0s021989@dragon.ariadne.com>
	<17692.4003.668286.233835@rautu.tutpro.com>
Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 15:09:30 -0400
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: a7d6aff76b15f3f56fcb94490e1052e4
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I suspect it might be because a SIP-URI could be placed elsewhere, like on 
some web page or in some other application that parses all URIs according to 
RFC 2396. Such a generic URI parser would interpret everything after the '#' 
as a fragment. This would result in a mis-interpretation of the URI.

cheers,
(-:bob

Robert F. Penfield
Chief Software Architect
Acme Packet, Inc.
71 Third Avenue
Burlington, MA 01803
bpenfield@acmepacket.com


----- Original Message ----- 
From: "Juha Heinanen" <jh@tutpro.com>
To: <Dale.Worley@comcast.net>
Cc: <sip@ietf.org>
Sent: Thursday, September 28, 2006 2:08 PM
Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart


> Dale.Worley@comcast.net writes:
>
> > Whether it has any use in a SIP URI is not particularly important --
> > as a URI it has to follow the generic syntax of URIs, RFC 2396.  And
> > RFC 2396 reserves the use of '#' for fragment identifiers.
>
> there are various exceptions in rfc3261 regarding other standards that
> rfc3261 uses.  why can't there be an exception on # too?
>
> -- juha
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 15:20:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT1ON-0001Mr-Vh; Thu, 28 Sep 2006 15:17:55 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT1OM-0001Ml-QE
	for sip@ietf.org; Thu, 28 Sep 2006 15:17:54 -0400
Received: from dsl001-129-069.dfw1.dsl.speakeasy.net ([72.1.129.69]
	helo=vicuna.estacado.net) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GT1OL-00038S-Bj for sip@ietf.org; Thu, 28 Sep 2006 15:17:54 -0400
Received: from [172.17.2.244] ([172.17.2.244]) (authenticated bits=0)
	by vicuna.estacado.net (8.13.8/8.13.4) with ESMTP id k8SJHncI053340
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Thu, 28 Sep 2006 14:17:50 -0500 (CDT)
	(envelope-from bcampen@estacado.net)
In-Reply-To: <EC7F5E697D3DCC4E838A142768417A6E08B75A@sonusmail06.sonusnet.com>
References: <EC7F5E697D3DCC4E838A142768417A6E08B75A@sonusmail06.sonusnet.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Message-Id: <D38596F7-B88F-42A9-B831-0273A657F2D2@estacado.net>
From: Byron Campen <bcampen@estacado.net>
Subject: Re: [Sip] RFC 3261 section 17.1.1.2 INVITE Client transaction State
	Machine
Date: Thu, 28 Sep 2006 14:17:29 -0500
To: "Nayak, Subhransu S" <ssnayak@sonusnet.com>
X-Mailer: Apple Mail (2.752.2)
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 22bbb45ef41b733eb2d03ee71ece8243
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0322955542=="
Errors-To: sip-bounces@ietf.org


--===============0322955542==
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-9-775243422;
	protocol="application/pkcs7-signature"


--Apple-Mail-9-775243422
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

	This depends on the TU. For an endpoint, we often rely on the human  
user. (eventually the human user will decide they have waited long  
enough for an answer, and hang up, prompting the UAC to send a  
CANCEL) For a proxy, we rely on Timer C. I do not know of any  
specific mechanism for B2BUAs, but it follows that they should be  
prepared to handle this case.

Best regards,
Byron Campen

> There is an obvious flaw in the INVITE client transaction state  
> machine. Once in "proceeding" state, State Machine is purely driven  
> by the peer's response to the INVITE. If peer goes down, then   
> INVITE client transaction gets stuck in the "proceeding" state  
> forever. From an implementation's perspective, when does the TU in  
> an UAC release the transaction resource in this case ?
>
>                    |INVITE from TU
>              Timer A fires     |INVITE sent
>              Reset A,          V                      Timer B fires
>              INVITE sent +-----------+                or Transport  
> Err.
>                +---------|           |---------------+inform TU
>                |         |  Calling  |               |
>                +-------->|           |-------------->|
>                          +-----------+ 2xx           |
>                             |  |       2xx to TU     |
>                             |  |1xx                  |
>     300-699 +---------------+  |1xx to TU            |
>    ACK sent |                  |                     |
> resp. to TU |  1xx             V                     |
>             |  1xx to TU  -----------+               |
>             |  +---------|           |               |
>             |  |         |Proceeding |-------------->|
>             |  +-------->|           | 2xx           |
>             |            From sip-bounces@ietf.org Thu Sep 28 15:20:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT1ON-0001Mr-Vh; Thu, 28 Sep 2006 15:17:55 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT1OM-0001Ml-QE
	for sip@ietf.org; Thu, 28 Sep 2006 15:17:54 -0400
Received: from dsl001-129-069.dfw1.dsl.speakeasy.net ([72.1.129.69]
	helo=vicuna.estacado.net) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GT1OL-00038S-Bj for sip@ietf.org; Thu, 28 Sep 2006 15:17:54 -0400
Received: from [172.17.2.244] ([172.17.2.244]) (authenticated bits=0)
	by vicuna.estacado.net (8.13.8/8.13.4) with ESMTP id k8SJHncI053340
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Thu, 28 Sep 2006 14:17:50 -0500 (CDT)
	(envelope-from bcampen@estacado.net)
In-Reply-To: <EC7F5E697D3DCC4E838A142768417A6E08B75A@sonusmail06.sonusnet.com>
References: <EC7F5E697D3DCC4E838A142768417A6E08B75A@sonusmail06.sonusnet.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Message-Id: <D38596F7-B88F-42A9-B831-0273A657F2D2@estacado.net>
From: Byron Campen <bcampen@estacado.net>
Subject: Re: [Sip] RFC 3261 section 17.1.1.2 INVITE Client transaction State
	Machine
Date: Thu, 28 Sep 2006 14:17:29 -0500
To: "Nayak, Subhransu S" <ssnayak@sonusnet.com>
X-Mailer: Apple Mail (2.752.2)
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 22bbb45ef41b733eb2d03ee71ece8243
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============0322955542=="
Errors-To: sip-bounces@ietf.org


--===============0322955542==
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-9-775243422;
	protocol="application/pkcs7-signature"


--Apple-Mail-9-775243422
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

	This depends on the TU. For an endpoint, we often rely on the human  
user. (eventually the human user will decide they have waited long  
enough for an answer, and hang up, prompting the UAC to send a  
CANCEL) For a proxy, we rely on Timer C. I do not know of any  
specific mechanism for B2BUAs, but it follows that they should be  
prepared to handle this case.

Best regards,
Byron Campen

> There is an obvious flaw in the INVITE client transaction state  
> machine. Once in "proceeding" state, State Machine is purely driven  
> by the peer's response to the INVITE. If peer goes down, then   
> INVITE client transaction gets stuck in the "proceeding" state  
> forever. From an implementation's perspective, when does the TU in  
> an UAC release the transaction resource in this case ?
>
>                    |INVITE from TU
>              Timer A fires     |INVITE sent
>              Reset A,          V                      Timer B fires
>              INVITE sent +-----------+                or Transport  
> Err.
>                +---------|           |---------------+inform TU
>                |         |  Calling  |               |
>                +-------->|           |-------------->|
>                          +-----------+ 2xx           |
>                             |  |       2xx to TU     |
>                             |  |1xx                  |
>     300-699 +---------------+  |1xx to TU            |
>    ACK sent |                  |                     |
> resp. to TU |  1xx             V                     |
>             |  1xx to TU  -----------+               |
>             |  +---------|           |               |
>             |  |         |Proceeding |-------------->|
>             |  +-------->|           | 2xx           |
>             |            +-----------+ 2xx to TU     |
>             |       300-699    |                     |
>             |       ACK sent,  |                     |
>             |       resp. to TU|                     |
>             |                  |                     |      NOTE:
>             |  300-699         V                     |
>             |  ACK sent  +-----------+Transport Err. |  transitions
>             |  +---------|           |Inform TU      |  labeled with
>             |  |         | Completed |-------------->|  the event
>             |  +-------->|           |               |  over the  
> action
>             |            +-----------+               |  to take
>             |              ^   |                     |
>             |              |   | Timer D fires       |
>             +--------------+   | -                   |
>                                |                     |
>                                V                     |
>                          +-----------+               |
>                          |           |               |
>                          | Terminated|<--------------+
>                          |           |
>                          +-----------+
>
>                  Figure 5: INVITE client transaction
>
> Thanks,
> - Subhransu
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip


--Apple-Mail-9-775243422
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGHDCCAtUw
ggI+oAMCAQICAw/ajDANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0EwHhcNMDUxMTE0MTU0MTEwWhcNMDYxMTE0MTU0MTEwWjBGMR8wHQYDVQQD
ExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMSMwIQYJKoZIhvcNAQkBFhRiY2FtcGVuQGVzdGFjYWRv
Lm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAOCNiipMJyBctmUQ60JYKRF7lCag
P2snNEtYKe0nPmYidfE+LO3nYtReQjIjhg0mZgeHC+DkJp0Oed5RYUKbXG//ypur8hdQZ9vqqjOX
RNf5hh6LOc6YgOSs89BwmF2IkxNVIps274V67MYoJwy8yPReSBGWF1tQIJEVC8EKUvFA/GMGlNB+
FTjRZrGWlsCSDNG1xbZBmktDnm9wjpijkA30mKAjKv4UHlOHNM8v1FXQzOzrdMMgOubdamWansGx
z5BvX84EYDnXfxlkTgUKeP5Oh91F017q7lgIOsHcttMwk2pm8ZGilCwAaLfwcXeA7LxYX6CDBu9V
l//VlLw+530CAwEAAaMxMC8wHwYDVR0RBBgwFoEUYmNhbXBlbkBlc3RhY2Fkby5uZXQwDAYDVR0T
AQH/BAIwADANBgkqhkiG9w0BAQQFAAOBgQCpWkyCfYvEDCBGwv7a0goMQb+OPFAkuwVVqzpLle/u
FTsomyNM38ZCwK13QUZ59v7Ek9G7BEuPUx1SoEw/3e+IXKbkY5pqhWEhE1xy9bnpPLJVCToXQaYE
PZi+5VhGWsFjPIWhwcwv9ghAHVtcNqgdwkJUY52InMTzfNpYSideVTCCAz8wggKooAMCAQICAQ0w
DQYJKoZIhvcNAQEFBQAwgdExCzAJBgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQ
BgNVBAcTCUNhcGUgVG93bjEaMBgGA1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0Nl
cnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBG
cmVlbWFpbCBDQTErMCkGCSqGSIb3DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAe
Fw0wMzA3MTcwMDAwMDBaFw0xMzA3MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxU
aGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJl
ZW1haWwgSXNzdWluZyBDQTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065ypla
HmjAdQRwnd/p/6Me7L3N9VvyGna9fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688
Cwfn8R+RNiQqE88r1fOCdz0Dviv+uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJg
t/sCAwEAAaOBlDCBkTASBgNVHRMBAf8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6
Ly9jcmwudGhhd3RlLmNvbS9UaGF3dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIB
BjApBgNVHREEIjAgpB4wHDEaMBgGA1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEF
BQADgYEASIzRUIPqCy7MDaNmrGcPf6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFi
w9k6GX6EsZkbAMUaC4J0niVQlGLH2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU13
41YheILcIRk13iSx0x1G/11fZU8xggLnMIIC4wIBATBpMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQK
ExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwg+-----------+ 2xx to TU     |
>             |       300-699    |                     |
>             |       ACK sent,  |                     |
>             |       resp. to TU|                     |
>             |                  |                     |      NOTE:
>             |  300-699         V                     |
>             |  ACK sent  +-----------+Transport Err. |  transitions
>             |  +---------|           |Inform TU      |  labeled with
>             |  |         | Completed |-------------->|  the event
>             |  +-------->|           |               |  over the  
> action
>             |            +-----------+               |  to take
>             |              ^   |                     |
>             |              |   | Timer D fires       |
>             +--------------+   | -                   |
>                                |                     |
>                                V                     |
>                          +-----------+               |
>                          |           |               |
>                          | Terminated|<--------------+
>                          |           |
>                          +-----------+
>
>                  Figure 5: INVITE client transaction
>
> Thanks,
> - Subhransu
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip


--Apple-Mail-9-775243422
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGHDCCAtUw
ggI+oAMCAQICAw/ajDANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0EwHhcNMDUxMTE0MTU0MTEwWhcNMDYxMTE0MTU0MTEwWjBGMR8wHQYDVQQD
ExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMSMwIQYJKoZIhvcNAQkBFhRiY2FtcGVuQGVzdGFjYWRv
Lm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAOCNiipMJyBctmUQ60JYKRF7lCag
P2snNEtYKe0nPmYidfE+LO3nYtReQjIjhg0mZgeHC+DkJp0Oed5RYUKbXG//ypur8hdQZ9vqqjOX
RNf5hh6LOc6YgOSs89BwmF2IkxNVIps274V67MYoJwy8yPReSBGWF1tQIJEVC8EKUvFA/GMGlNB+
FTjRZrGWlsCSDNG1xbZBmktDnm9wjpijkA30mKAjKv4UHlOHNM8v1FXQzOzrdMMgOubdamWansGx
z5BvX84EYDnXfxlkTgUKeP5Oh91F017q7lgIOsHcttMwk2pm8ZGilCwAaLfwcXeA7LxYX6CDBu9V
l//VlLw+530CAwEAAaMxMC8wHwYDVR0RBBgwFoEUYmNhbXBlbkBlc3RhY2Fkby5uZXQwDAYDVR0T
AQH/BAIwADANBgkqhkiG9w0BAQQFAAOBgQCpWkyCfYvEDCBGwv7a0goMQb+OPFAkuwVVqzpLle/u
FTsomyNM38ZCwK13QUZ59v7Ek9G7BEuPUx1SoEw/3e+IXKbkY5pqhWEhE1xy9bnpPLJVCToXQaYE
PZi+5VhGWsFjPIWhwcwv9ghAHVtcNqgdwkJUY52InMTzfNpYSideVTCCAz8wggKooAMCAQICAQ0w
DQYJKoZIhvcNAQEFBQAwgdExCzAJBgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQ
BgNVBAcTCUNhcGUgVG93bjEaMBgGA1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0Nl
cnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBG
cmVlbWFpbCBDQTErMCkGCSqGSIb3DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAe
Fw0wMzA3MTcwMDAwMDBaFw0xMzA3MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxU
aGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJl
ZW1haWwgSXNzdWluZyBDQTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065ypla
HmjAdQRwnd/p/6Me7L3N9VvyGna9fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688
Cwfn8R+RNiQqE88r1fOCdz0Dviv+uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJg
t/sCAwEAAaOBlDCBkTASBgNVHRMBAf8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6
Ly9jcmwudGhhd3RlLmNvbS9UaGF3dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIB
BjApBgNVHREEIjAgpB4wHDEaMBgGA1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEF
BQADgYEASIzRUIPqCy7MDaNmrGcPf6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFi
w9k6GX6EsZkbAMUaC4J0niVQlGLH2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU13
41YheILcIRk13iSx0x1G/11fZU8xggLnMIIC4wIBATBpMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQK
ExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwg
RnJlZW1haWwgSXNzdWluZyBDQQIDD9qMMAkGBSsOAwIaBQCgggFTMBgGCSqGSIb3DQEJAzELBgkq
hkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDkyODE5MTczMFowIwYJKoZIhvcNAQkEMRYEFAYs
43vB4z9sAj3jC7dKm/ELZsmvMHgGCSsGAQQBgjcQBDFrMGkwYjELMAkGA1UEBhMCWkExJTAjBgNV
BAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25h
bCBGcmVlbWFpbCBJc3N1aW5nIENBAgMP2owwegYLKoZIhvcNAQkQAgsxa6BpMGIxCzAJBgNVBAYT
AlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3
dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIDD9qMMA0GCSqGSIb3DQEBAQUABIIBAGLB
Zn9dxaVXqRJzjvn5gCiSnq/jGZATxk/K5Dw+jATtCY56oFywcWtI3K0fPXMo3LqzS7d3c15i9qme
DSBwd9Ouvo079HsfjEBU6tA1lOxKjH8lOL4lln/LTR5oyNBaH5KxvEl07yLPXp4S0hCCx/pIAu5H
2Ifv4+LUyU9MKjTjhIUKlHebf+l2wkbo2K3zHRvsgs/VcbLgqEYhTeppxqZNnN0rVJm8mXUlQYvT
+9Zp7EO2XM65IpQJVt0eXwRM+hkr+PWpD2AmfdoRNThtvEckZzXA/cXK4R10hVb6r1iIaGKPVGc0
JiZI/z+EhG1kt02dCGhYw9z/xMuGKAA2gE4AAAAAAAA=

--Apple-Mail-9-775243422--


--===============0322955542==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0322955542==--


From sip-bounces@ietf.org Thu Sep 28 15:20:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT1Nw-0001IJ-4e; Thu, 28 Sep 2006 15:17:28 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT1Nu-0001IE-JZ
	for sip@ietf.org; Thu, 28 Sep 2006 15:17:26 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT1Nn-00033i-F6
	for sip@ietf.org; Thu, 28 Sep 2006 15:17:26 -0400
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	B88914F0007; Thu, 28 Sep 2006 21:17:16 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 21:17:16 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 21:17:14 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403BF96C9@esealmw113.eemea.ericsson.se>
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB5940294EC5C@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjDRGB6srriVRpRAWOUwWdJlDxAAACo6UAAAaHePA=
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: <Dale.Worley@comcast.net>,
	<sip@ietf.org>
X-OriginalArrivalTime: 28 Sep 2006 19:17:16.0486 (UTC)
	FILETIME=[B5D0AE60:01C6E332]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 057ebe9b96adec30a7efb2aeda4c26a4
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
Also, I don't think that the RFC 3261 ABNF even allows for the usage of
"#" as a delimiter, as defned in RFC2396.

Chapter 4 of RFC2396 says:

URI-reference =3D [ absoluteURI | relativeURI ] [ "#" fragment ]

First, we can see that the fragment part cannot be within the URI, it
optionally follows the URI

Second, we can see that the fragment is not part of the URI, it is part
of URI
RnJlZW1haWwgSXNzdWluZyBDQQIDD9qMMAkGBSsOAwIaBQCgggFTMBgGCSqGSIb3DQEJAzELBgkq
hkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDkyODE5MTczMFowIwYJKoZIhvcNAQkEMRYEFAYs
43vB4z9sAj3jC7dKm/ELZsmvMHgGCSsGAQQBgjcQBDFrMGkwYjELMAkGA1UEBhMCWkExJTAjBgNV
BAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25h
bCBGcmVlbWFpbCBJc3N1aW5nIENBAgMP2owwegYLKoZIhvcNAQkQAgsxa6BpMGIxCzAJBgNVBAYT
AlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3
dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIDD9qMMA0GCSqGSIb3DQEBAQUABIIBAGLB
Zn9dxaVXqRJzjvn5gCiSnq/jGZATxk/K5Dw+jATtCY56oFywcWtI3K0fPXMo3LqzS7d3c15i9qme
DSBwd9Ouvo079HsfjEBU6tA1lOxKjH8lOL4lln/LTR5oyNBaH5KxvEl07yLPXp4S0hCCx/pIAu5H
2Ifv4+LUyU9MKjTjhIUKlHebf+l2wkbo2K3zHRvsgs/VcbLgqEYhTeppxqZNnN0rVJm8mXUlQYvT
+9Zp7EO2XM65IpQJVt0eXwRM+hkr+PWpD2AmfdoRNThtvEckZzXA/cXK4R10hVb6r1iIaGKPVGc0
JiZI/z+EhG1kt02dCGhYw9z/xMuGKAA2gE4AAAAAAAA=

--Apple-Mail-9-775243422--


--===============0322955542==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============0322955542==--


From sip-bounces@ietf.org Thu Sep 28 15:20:21 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT1Nw-0001IJ-4e; Thu, 28 Sep 2006 15:17:28 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT1Nu-0001IE-JZ
	for sip@ietf.org; Thu, 28 Sep 2006 15:17:26 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT1Nn-00033i-F6
	for sip@ietf.org; Thu, 28 Sep 2006 15:17:26 -0400
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	B88914F0007; Thu, 28 Sep 2006 21:17:16 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 21:17:16 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 21:17:14 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403BF96C9@esealmw113.eemea.ericsson.se>
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB5940294EC5C@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjDRGB6srriVRpRAWOUwWdJlDxAAACo6UAAAaHePA=
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: <Dale.Worley@comcast.net>,
	<sip@ietf.org>
X-OriginalArrivalTime: 28 Sep 2006 19:17:16.0486 (UTC)
	FILETIME=[B5D0AE60:01C6E332]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 057ebe9b96adec30a7efb2aeda4c26a4
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
Also, I don't think that the RFC 3261 ABNF even allows for the usage of
"#" as a delimiter, as defned in RFC2396.

Chapter 4 of RFC2396 says:

URI-reference =3D [ absoluteURI | relativeURI ] [ "#" fragment ]

First, we can see that the fragment part cannot be within the URI, it
optionally follows the URI

Second, we can see that the fragment is not part of the URI, it is part
of URI-reference.

Third, there is no mentioning of URI-reference in the SIP ABNF.


For example, the Request-URI is defined as:=20

Request-URI =3D  SIP-URI / SIPS-URI / absoluteURI

But, nowhere is ["#" fragment] mentioned.=20

So, I doubt that many parsers implemented based on the SIP ABNF would
even accept a URI followed by a fragment in a SIP message.

Regards,

Christer








> -----Original Message-----
> From: Christer Holmberg (JO/LMF)=20
> [mailto:christer.holmberg@ericsson.com]=20
> Sent: 28. syyskuuta 2006 19:03
> To: Dale.Worley@comcast.net; sip@ietf.org
> Subject: VS: [Sip] Escaping rules of SIP-URI userpart
>=20
> Hi Dale,
>=20
>=20
> >   The issue is that I don't understand why that rule is=20
> needed. User=3Dphone
> >   means that the userpart shall be parsed as a=20
> telephone-subscriber, and
> >   within a telephone-subscriber the "#" does not have any=20
> special meaning,
> >   so there is no need to escape it.
> >
> >   So, yes, you probably have to go with:
> >
> >   sip:003%23xyz@hello.com
> >
> >  But, I see no reason why you should have to go with:
> >
> >   sip:003%23xyz@hello.com;user=3Dphone
> >
> >   Instead you could use:
> >
> >   sip:003#xyz@hello.com;user=3Dphone
> >
> How would you write a left-to-right parser that could cope with that?
>=20
> [CHH] Well, you can't really perform a detailed parse of the=20
> userpart before you have parsed the user parameter anyway.
> =20
> And, whatever the value of the user parameter is, I have=20
> never seen "#" used as this kind of delmiter in a SIP-URI anyway...
> =20
> Regards,
> =20
> Christer
>=20
> =20
>=20
> =20
>=20
> =20
>=20
> =20
>=20
> =20
>=20
>=20
> Dale
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





-reference.

Third, there is no mentioning of URI-reference in the SIP ABNF.


For example, the Request-URI is defined as:=20

Request-URI =3D  SIP-URI / SIPS-URI / absoluteURI

But, nowhere is ["#" fragment] mentioned.=20

So, I doubt that many parsers implemented based on the SIP ABNF would
even accept a URI followed by a fragment in a SIP message.

Regards,

Christer








> -----Original Message-----
> From: Christer Holmberg (JO/LMF)=20
> [mailto:christer.holmberg@ericsson.com]=20
> Sent: 28. syyskuuta 2006 19:03
> To: Dale.Worley@comcast.net; sip@ietf.org
> Subject: VS: [Sip] Escaping rules of SIP-URI userpart
>=20
> Hi Dale,
>=20
>=20
> >   The issue is that I don't understand why that rule is=20
> needed. User=3Dphone
> >   means that the userpart shall be parsed as a=20
> telephone-subscriber, and
> >   within a telephone-subscriber the "#" does not have any=20
> special meaning,
> >   so there is no need to escape it.
> >
> >   So, yes, you probably have to go with:
> >
> >   sip:003%23xyz@hello.com
> >
> >  But, I see no reason why you should have to go with:
> >
> >   sip:003%23xyz@hello.com;user=3Dphone
> >
> >   Instead you could use:
> >
> >   sip:003#xyz@hello.com;user=3Dphone
> >
> How would you write a left-to-right parser that could cope with that?
>=20
> [CHH] Well, you can't really perform a detailed parse of the=20
> userpart before you have parsed the user parameter anyway.
> =20
> And, whatever the value of the user parameter is, I have=20
> never seen "#" used as this kind of delmiter in a SIP-URI anyway...
> =20
> Regards,
> =20
> Christer
>=20
> =20
>=20
> =20
>=20
> =20
>=20
> =20
>=20
> =20
>=20
>=20
> Dale
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip





From sip-bounces@ietf.org Thu Sep 28 15:31:48 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT1Yu-0001BI-62; Thu, 28 Sep 2006 15:28:48 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT1Yt-0001BD-01
	for sip@ietf.org; Thu, 28 Sep 2006 15:28:47 -0400
Received: from mailgw4.ericsson.se ([193.180.251.62])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT1Yn-0006Kc-Fm
	for sip@ietf.org; Thu, 28 Sep 2006 15:28:46 -0400
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	DA0068E0002; Thu, 28 Sep 2006 21:28:01 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 21:28:01 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: VS: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 21:28:00 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403BF96E1@esealmw113.eemea.ericsson.se>
In-Reply-To: <00bd01c6e331$9fec1630$800101df@acmepacket.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: VS: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjMkoCsFfhcyfMSre0+l1Tdct/UAAANNwQ
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Bob Penfield" <BPenfield@acmepacket.com>, "Juha Heinanen" <jh@tutpro.com>,
	<Dale.Worley@comcast.net>
X-OriginalArrivalTime: 28 Sep 2006 19:28:01.0391 (UTC)
	FILETIME=[36355FF0:01C6E334]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 31247fb3be228bb596db9127becad0bc
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi,

Again, when I read the SIP ABNF the only URIs that can be used are
absoluteURI, and of course SIP-URI, and none of these contain the
optional fragment part.

So, instead of:

Request-URI    =3D  SIP-URI / SIPS-URI / absoluteURI

...the ABNF should have said something like:

Request-URI   =3D ((SIP-URI / SIPS-URI)["#" fragment]) / URI-reference)

...or something like that.


Regards,

Christer=20


> -----Original Message-----
> From: Bob Penfield [mailto:BPenfield@acmepacket.com]=20
> Sent: 28. syyskuuta 2006 22:10
> To: Juha Heinanen; Dale.Worley@comcast.net
> Cc: sip@ietf.org
> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>=20
> I suspect it might be because a SIP-URI could be placed=20
> elsewhere, like on some web page or in some other application=20
> that parses all URIs according to RFC 2396. Such a generic=20
> URI parser would interpret everything after the '#'=20
> as a fragment. This would result in a mis-interpretation of the URI.
>=20
> cheers,
> (-:bob
>=20
> Robert F. Penfield
> Chief Software Architect
> Acme Packet, Inc.
> 71 Third Avenue
> Burlington, MA 01803
> bpenfield@acmepacket.com
>=20
>=20
> ----- Original Message -----
> From: "Juha Heinanen" <jh@tutpro.com>
> To: <Dale.Worley@comcast.net>
> Cc: <sip@ietf.org>
> Sent: Thursday, September 28, 2006 2:08 PM
> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>=20
>=20
> > Dale.Worley@comcast.net writes:
> >
> > > Whether it has any use in a SIP URI is not particularly=20
> important --
> > > as a URI it has to follow the generic syntax of URIs, RFC=20
> 2396.  And
> > > RFC 2396 reserves the use of '#' for fragment identifiers.
> >
> > there are various exceptions in rfc3261 regarding other=20
> standards that
> > rfc3261 uses.  why can't there be an exception on # too?
> >
> > -- juha
> >
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> >=20
>=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 15:50:25 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT1r8-0005Km-Am; Thu, 28 Sep 2006 15:47:38 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT1r7-0005Kg-0c
	for sip@ietf.org; Thu, 28 Sep 2006 15:47:37 -0400
Received: from host10.216.41.24.conversent.net ([216.41.24.10]
	helo=acmepacket.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GT1r5-0002qy-Lb for sip@ietf.org; Thu, 28 Sep 2006 15:47:36 -0400
Received: from BPenfield [10.0.200.6] by acmepacket.com with ESMTP
	(SMTPD-9.10) id A6C30288; Thu, 28 Sep 2006 15:47:15 -0400
Message-ID: <011701c6e336$e5e8b490$800101df@acmepacket.com>
From: "Bob Penfield" <BPenfield@acmepacket.com>
To: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>,
	"Juha Heinanen" <jh@tutpro.com>, <Dale.Worley@comcast.net>
References: <5EB80D22825EEE42872083AD5BFFB59403BF96E1@esealmw113.eemea.ericsson.se>
Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 15:47:15 -0400
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.1 (/)
X-Scan-Signature: 5ebbf074524e58e662bc8209a6235027
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

True, but if the SIP-URI is held in a place where a URI-reference is 
allowed, everything after the # would be interpreted as a fragment. That is 
why 2396 indicates it needs to be escaped.

cheers,
(-:bob

Robert F. Penfield
Chief Software Architect
Acme Packet, Inc.
71 Third Avenue
Burlington, MA 01803
bpenfield@acmepacket.com

----- Original Message ----- 
From: "Christer Holmberg (JO/LMF)" <christer.holmberg@ericsson.com>
To: "Bob Penfield" <BPenfield@acmepacket.com>; "Juha Heinanen" 
<jh@tutpro.com>; <Dale.Worley@comcast.net>
Cc: <sip@ietf.org>
Sent: Thursday, September 28, 2006 3:28 PM
Subject: RE: VS: [Sip] Escaping rules of SIP-URI userpart



Hi,

Again, when I read the SIP ABNF the only URIs that can be used are
absoluteURI, and of course SIP-URI, and none of these contain the
optional fragment part.

So, instead of:

Request-URI    =  SIP-URI / SIPS-URI / absoluteURI

...the ABNF should have said something like:

Request-URI   = ((SIP-URI / SIPS-URI)["#" fragment]) / URI-reference)

...or something like that.


Regards,

Christer


> -----Original Message-----
> From: Bob Penfield [mailto:BPenfield@acmepacket.com]
> Sent: 28. syyskuuta 2006 22:10
> To: Juha Heinanen; Dale.Worley@comcast.net
> Cc: sip@ietf.org
> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>
> I suspect it might be because a SIP-URI could be placed
> elsewhere, like on some web page or in some other application
> that parses all URIs according to RFC 2396. Such a generic
> URI parser would interpret everything after the '#'
> as a fragment. This would result in a mis-interpretation of the URI.
>
> cheers,
> (-:bob
>
> Robert F. Penfield
> Chief Software Architect
> Acme Packet, Inc.
> 71 Third Avenue
> Burlington, MA 01803
> bpenfield@acmepacket.com
>
>
> ----- Original Message -----
> From: "Juha Heinanen" <jh@tutpro.com>
> To: <Dale.Worley@comcast.net>
> Cc: <sip@ietf.org>
> Sent: Thursday, September 28, 2006 2:08 PM
> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>
>
> > Dale.Worley@comcast.net writes:
> >
> > > Whether it has any use in a SIP URI is not particularly
> important --
> > > as a URI it has to follow the generic syntax of URIs, RFC
> 2396.  And
> > > RFC 2396 reserves the use of '#' for fragment identifiers.
> >
> > there are various exceptions in rfc3261 regarding other
> standards that
> > rfc3261 uses.  why can't there be an exception on # too?
> >
> > -- juha
> >
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> >
>
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 16:27:09 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT2PV-0001rb-JM; Thu, 28 Sep 2006 16:23:09 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT2PU-0001pu-7D
	for sip@ietf.org; Thu, 28 Sep 2006 16:23:08 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT2PS-00023i-M5
	for sip@ietf.org; Thu, 28 Sep 2006 16:23:08 -0400
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id
	EDFD24F0140; Thu, 28 Sep 2006 21:54:45 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 21:54:45 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: VS: [Sip] Escaping rules of SIP-URI userpart
Date: Thu, 28 Sep 2006 21:54:44 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403BF971D@esealmw113.eemea.ericsson.se>
In-Reply-To: <011701c6e336$e5e8b490$800101df@acmepacket.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: VS: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjNvnRzisG4LWsT92X2uiIEwx0vAAADGvQ
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Bob Penfield" <BPenfield@acmepacket.com>, "Juha Heinanen" <jh@tutpro.com>,
	<Dale.Worley@comcast.net>
X-OriginalArrivalTime: 28 Sep 2006 19:54:45.0725 (UTC)
	FILETIME=[F27750D0:01C6E337]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: b1c41982e167b872076d0018e4e1dc3c
Cc: sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
Hi Bob,

>True, but if the SIP-URI is held in a place where a URI-reference is
allowed, everything after the # would be=20
>interpreted as a fragment. That is why 2396 indicates it needs to be
escaped.

Well, if you put your SIP-URI in such a place then escape what needs to
be escaped - but you don't need to escape it when inserted into a SIP
request.

And, in any case one of course needs to make sure that the fragment is
removed before the SIP-URI is inserted into a SIP request, since the SIP
ABNF doesn't allow it...

Regards,

Christer




> Robert F. Penfield
> Chief Software Architect
> Acme Packet, Inc.
> 71 Third Avenue
> Burlington, MA 01803
> bpenfield@acmepacket.com
>=20
> ----- Original Message -----
> From: "Christer Holmberg (JO/LMF)" <christer.holmberg@ericsson.com>
> To: "Bob Penfield" <BPenfield@acmepacket.com>; "Juha Heinanen"=20
> <jh@tutpro.com>; <Dale.Worley@comcast.net>
> Cc: <sip@ietf.org>
> Sent: Thursday, September 28, 2006 3:28 PM
> Subject: RE: VS: [Sip] Escaping rules of SIP-URI userpart
>=20
>=20
>=20
> Hi,
>=20
> Again, when I read the SIP ABNF the only URIs that can be used are
> absoluteURI, and of course SIP-URI, and none of these contain the
> optional fragment part.
>=20
> So, instead of:
>=20
> Request-URI    =3D  SIP-URI / SIPS-URI / absoluteURI
>=20
> ...the ABNF should have said something like:
>=20
> Request-URI   =3D ((SIP-URI / SIPS-URI)["#" fragment]) / =
URI-reference)
>=20
> ...or something like that.
>=20
>=20
> Regards,
>=20
> Christer
>=20
>=20
> > -----Original Message-----
> > From: Bob Penfield [mailto:BPenfield@acmepacket.com]
> > Sent: 28. syyskuuta 2006 22:10
> > To: Juha Heinanen; Dale.Worley@comcast.net
> > Cc: sip@ietf.org
> > Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
> >
> > I suspect it might be because a SIP-URI could be placed
> > elsewhere, like on some web page or in some other application
> > that parses all URIs according to RFC 2396. Such a generic
> > URI parser would interpret everything after the '#'
> > as a fragment. This would result in a mis-interpretation of the URI.
> >
> > cheers,
> > (-:bob
> >
> > Robert F. Penfield
> > Chief Software Architect
> > Acme Packet, Inc.
> > 71 Third Avenue
> > Burlington, MA 01803
> > bpenfield@acmepacket.com
> >
> >
> > ----- Original Message -----
> > From: "Juha Heinanen" <jh@tutpro.com>
> > To: <Dale.Worley@comcast.net>
> > Cc: <sip@ietf.org>
> > Sent: Thursday, September 28, 2006 2:08 PM
> > Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
> >
> >
> > > Dale.Worley@comcast.net writes:
> > >
> > > > Whether it has any use in a SIP URI is not particularly
> > important --
> > > > as a URI it has to follow the generic syntax of URIs, RFC
> > 2396.  And
> > > > RFC 2396 reserves the use of '#' for fragment identifiers.
> > >
> > > there are various exceptions in rfc3261 regarding other
> > standards that
> > > rfc3261 uses.  why can't there be an exception on # too?
> > >
> > > -- juha
> > >
> > > _______________________________________________
> > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > This list is for NEW development of the core SIP Protocol
> > > Use sip-implementors@cs.columbia.edu for questions on current sip
> > > Use sipping@ietf.org for new developments on the=20
> application of sip
> > >
> >
> >
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol
> > Use sip-implementors@cs.columbia.edu for questions on current sip
> > Use sipping@ietf.org for new developments on the application of sip
> >
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 17:47:51 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT3gI-00057K-K1; Thu, 28 Sep 2006 17:44:34 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT3gG-00057E-Ui
	for sip@ietf.org; Thu, 28 Sep 2006 17:44:32 -0400
Received: from sj-iport-6.cisco.com ([171.71.176.117])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT3gD-00069p-Is
	for sip@ietf.org; Thu, 28 Sep 2006 17:44:32 -0400
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-6.cisco.com with ESMTP; 28 Sep 2006 14:44:29 -0700
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-4.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8SLiS5b029632; Thu, 28 Sep 2006 14:44:28 -0700
Received: from xbh-sjc-231.amer.cisco.com (xbh-sjc-231.cisco.com
	[128.107.191.100])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8SLiSQV026849;
	Thu, 28 Sep 2006 14:44:28 -0700 (PDT)
Received: from xfe-sjc-211.amer.cisco.com ([171.70.151.174]) by
	xbh-sjc-231.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.211);
	Thu, 28 Sep 2006 14:44:28 -0700
Received: from [10.32.241.149] ([10.32.241.149]) by xfe-sjc-211.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 14:44:28 -0700
Message-ID: <451C423A.4060106@cisco.com>
Date: Thu, 28 Sep 2006 17:44:26 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: jbemmel@zonnet.nl
Subject: Re: [Sip] GRUU and Anonymity
References: <33D71F0FC0684C4C8A3BB76989EDED9C028BE3CE@eesmdmw020.eemea.ericsson.se>	<008301c6dc9f$5aa28930$0601a8c0@BEMBUSTER>
	<451B3ACB.9010009@cisco.com>
	<20060928063849.qfp2hrxqw2f4wwsw@webmail.versatel.nl>
In-Reply-To: <20060928063849.qfp2hrxqw2f4wwsw@webmail.versatel.nl>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Sep 2006 21:44:28.0238 (UTC)
	FILETIME=[45F316E0:01C6E347]
DKIM-Signature: a=rsa-sha1; q=dns; l=1527; t=1159479868; x=1160343868;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20[Sip]=20GRUU=20and=20Anonymity;
	X=v=3Dcisco.com=3B=20h=3DxIwWjqACKZ+rp+PleKwPe+IfG6o=3D;
	b=LbhZNPiXlE3l3K7rShiGqr7mlXquctP/cewno9zV7fD27jiK4AlgRPOYoFfenAdhZWNJ+FER
	7aYunO/fDuqO76wP0AigZL7SEtSxjVXejkPa6LnyMqapVEqRkyDeG6p/;
Authentication-Results: sj-dkim-4.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: a7d6aff76b15f3f56fcb94490e1052e4
Cc: "sip@ietf.org" <sip@ietf.org>,
	"Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



jbemmel@zonnet.nl wrote:

> Jonathan,
> 
> In that case, I personally would prefer to do it properly in a separate 
> draft, and for GRUU say something like: "GRUU provides the equivalent of 
> a fixed public IP address.

But its worse than that. Today, it will give you a GRUU which is 
personally identifying you. An IP address is more of a pseudonym and is 
useful primary as a correlator. Thats the issue; GRUU makes things WORSE 
than rfc3261.


> All privacy issues associated with the use of 
> such an address also apply to GRUUs. If additional privacy protection is 
> required, it is recommended to use a privacy service [ref]"

While we could merely suggest usage of a privacy service, it would imply 
that a b2bua function is required for any kind of anonymity services 
with gruu enabled. That is a tough pill to swallow.

> 
> I don't see much added value in providing something that addresses the 
> issues "kind of half". By adding a relatively simple feature now, we 
> would create complexity in terms of the number of available 
> options/alternatives later.

Its not 'kind of half' - its addressing them exactly like RFC 3261 does.

-Jonathan R.


-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 17:52:23 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT3m1-0000hT-Bt; Thu, 28 Sep 2006 17:50:29 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT3m0-0000hN-42
	for sip@ietf.org; Thu, 28 Sep 2006 17:50:28 -0400
Received: from sj-iport-1-in.cisco.com ([171.71.176.70]
	helo=sj-iport-1.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GT3ly-0006yT-GE for sip@ietf.org; Thu, 28 Sep 2006 17:50:28 -0400
Received: from sj-dkim-3.cisco.com ([171.71.179.195])
	by sj-iport-1.cisco.com with ESMTP; 28 Sep 2006 14:50:26 -0700
Received: from sj-core-1.cisco.com (sj-core-1.cisco.com [171.71.177.237])
	by sj-dkim-3.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8SLoP7g025163; Thu, 28 Sep 2006 14:50:25 -0700
Received: from xbh-sjc-221.amer.cisco.com (xbh-sjc-221.cisco.com
	[128.107.191.63])
	by sj-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8SLoOQX002704;
	Thu, 28 Sep 2006 14:50:25 -0700 (PDT)
Received: from xfe-sjc-212.amer.cisco.com ([171.70.151.187]) by
	xbh-sjc-221.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 14:50:25 -0700
Received: from [10.32.241.149] ([10.32.241.149]) by xfe-sjc-212.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Thu, 28 Sep 2006 14:50:24 -0700
Message-ID: <451C439F.9020508@cisco.com>
Date: Thu, 28 Sep 2006 17:50:23 -0400
From: Jonathan Rosenberg <jdrosen@cisco.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US;
	rv:1.7.8) Gecko/20050511
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Bob Penfield <BPenfield@acmepacket.com>
Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
References: <5EB80D22825EEE42872083AD5BFFB59403BF96E1@esealmw113.eemea.ericsson.se>
	<011701c6e336$e5e8b490$800101df@acmepacket.com>
In-Reply-To: <011701c6e336$e5e8b490$800101df@acmepacket.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Sep 2006 21:50:24.0653 (UTC)
	FILETIME=[1A63B3D0:01C6E348]
DKIM-Signature: a=rsa-sha1; q=dns; l=4673; t=1159480225; x=1160344225;
	c=relaxed/simple; s=sjdkim3002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=jdrosen@cisco.com;
	z=From:Jonathan=20Rosenberg=20<jdrosen@cisco.com>
	|Subject:Re=3A=20VS=3A=20[Sip]=20Escaping=20rules=20of=20SIP-URI=20userpart;
	X=v=3Dcisco.com=3B=20h=3DEJqpxq1xsMB8tulbWqgO55/X9yQ=3D;
	b=S0hNsj3xcu+R5gr7jDjBr50Nh/Ow1Ge5K5aLMgSrNNF49Dz//XNlEHoGWqteAeNnou5sEhsx
	GsZg9qZW3hH3USXAPKqwvujeTJ89Mug6p2XBiteSZjUcri5qYb7N2VSv;
Authentication-Results: sj-dkim-3.cisco.com; header.From=jdrosen@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 93e7fb8fef2e780414389440f367c879
Cc: sip@ietf.org, Juha Heinanen <jh@tutpro.com>,
	"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I agree here with Bob, Dale and others. The SIP URI is derived from RFC 
2396 and inherits its constraints. That is part of the cost of being a 
URI as opposed to a SIP-specific type of identifier. Just because some 
implementations have not followed the spec on this point does not change 
what the spec says or why its there.

-Jonathan R.

Bob Penfield wrote:

> True, but if the SIP-URI is held in a place where a URI-reference is 
> allowed, everything after the # would be interpreted as a fragment. That 
> is why 2396 indicates it needs to be escaped.
> 
> cheers,
> (-:bob
> 
> Robert F. Penfield
> Chief Software Architect
> Acme Packet, Inc.
> 71 Third Avenue
> Burlington, MA 01803
> bpenfield@acmepacket.com
> 
> ----- Original Message ----- From: "Christer Holmberg (JO/LMF)" 
> <christer.holmberg@ericsson.com>
> To: "Bob Penfield" <BPenfield@acmepacket.com>; "Juha Heinanen" 
> <jh@tutpro.com>; <Dale.Worley@comcast.net>
> Cc: <sip@ietf.org>
> Sent: Thursday, September 28, 2006 3:28 PM
> Subject: RE: VS: [Sip] Escaping rules of SIP-URI userpart
> 
> 
> 
> Hi,
> 
> Again, when I read the SIP ABNF the only URIs that can be used are
> absoluteURI, and of course SIP-URI, and none of these contain the
> optional fragment part.
> 
> So, instead of:
> 
> Request-URI    =  SIP-URI / SIPS-URI / absoluteURI
> 
> ...the ABNF should have said something like:
> 
> Request-URI   = ((SIP-URI / SIPS-URI)["#" fragment]) / URI-reference)
> 
> ...or something like that.
> 
> 
> Regards,
> 
> Christer
> 
> 
>> -----Original Message-----
>> From: Bob Penfield [mailto:BPenfield@acmepacket.com]
>> Sent: 28. syyskuuta 2006 22:10
>> To: Juha Heinanen; Dale.Worley@comcast.net
>> Cc: sip@ietf.org
>> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>>
>> I suspect it might be because a SIP-URI could be placed
>> elsewhere, like on some web page or in some other application
>> that parses all URIs according to RFC 2396. Such a generic
>> URI parser would interpret everything after the '#'
>> as a fragment. This would result in a mis-interpretation of the URI.
>>
>> cheers,
>> (-:bob
>>
>> Robert F. Penfield
>> Chief Software Architect
>> Acme Packet, Inc.
>> 71 Third Avenue
>> Burlington, MA 01803
>> bpenfield@acmepacket.com
>>
>>
>> ----- Original Message -----
>> From: "Juha Heinanen" <jh@tutpro.com>
>> To: <Dale.Worley@comcast.net>
>> Cc: <sip@ietf.org>
>> Sent: Thursday, September 28, 2006 2:08 PM
>> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>>
>>
>> > Dale.Worley@comcast.net writes:
>> >
>> > > Whether it has any use in a SIP URI is not particularly
>> important --
>> > > as a URI it has to follow the generic syntax of URIs, RFC
>> 2396.  And
>> > > RFC 2396 reserves the use of '#' for fragment identifiers.
>> >
>> > there are various exceptions in rfc3261 regarding other
>> standards that
>> > rfc3261 uses.  why can't there be an exception on # too?
>> >
>> > -- juha
>> >
>> > _______________________________________________
>> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> > This list is for NEW development of the core SIP Protocol
>> > Use sip-implementors@cs.columbia.edu for questions on current sip
>> > Use sipping@ietf.org for new developments on the application of sip
>> >
>>
>>
>> _______________________________________________
>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>> This list is for NEW development of the core SIP Protocol
>> Use sip-implementors@cs.columbia.edu for questions on current sip
>> Use sipping@ietf.org for new developments on the application of sip
>>
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

-- 
Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
Cisco Fellow                                   Parsippany, NJ 07054-2711
Cisco Systems
jdrosen@cisco.com                              FAX:   (973) 952-5050
http://www.jdrosen.net                         PHONE: (973) 952-5000
http://www.cisco.com

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 18:43:53 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT4YW-00060u-M6; Thu, 28 Sep 2006 18:40:36 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT4YU-00060e-UB
	for sip@ietf.org; Thu, 28 Sep 2006 18:40:34 -0400
Received: from zrtps0kp.nortel.com ([47.140.192.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT4YT-0006Co-LB
	for sip@ietf.org; Thu, 28 Sep 2006 18:40:34 -0400
Received: from zrc2hxm2.corp.nortel.com (zrc2hxm2.corp.nortel.com
	[47.103.123.73])
	by zrtps0kp.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8SMeUe19028; Thu, 28 Sep 2006 18:40:30 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] GRUU and SIPS
Date: Thu, 28 Sep 2006 17:40:28 -0500
Message-ID: <62B9B0847CC47543B6B3B5E26BD268E60EBE1EEE@zrc2hxm2.corp.nortel.com>
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0D52EBF7@zrc2hxm0.corp.nortel.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] GRUU and SIPS
Thread-index: AcbiqqXLarf3I9w5QOOSrnjmjlUkawAdF/PwAAv9hQA=
From: "Samir Srivastava" <samirsr@nortel.com>
To: "Francois Audet" <audet@nortel.com>,
	"Jonathan Rosenberg" <jdrosen@cisco.com>, "IETF SIP List" <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e1e48a527f609d1be2bc8d8a70eb76cb
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi,

I already posted enough on ugliness of SIPS on the list. I think in
Montreal people were only thinking of retargeting. There are new issues
with TELL URI etc within 3261 itself.=20
=20
Only DNS service providers will love SIPS, TELLS,etc :-)

In the age of design patterns, nice medicine of non-modularity.=20

Cheers
Samir

PS: No more cries from this baby. Others wake up or enjoy kill -9 getpid
().

> -----Original Message-----
> From: Audet, Francois (SC100:3055)
> Sent: Thursday, September 28, 2006 10:05 AM
> To: Jonathan Rosenberg; IETF SIP List
> Subject: RE: [Sip] GRUU and SIPS
>=20
> I agree with this approach.
>=20
> I will point out that the latest version of the sips-guidelines draft
is
> very
> much in line with what was in GRUU-10. I have used the same model as
> GRUU for the
> Registration procedure.
>=20
> Draft is at:
>
http://www.ietf.org/internet-drafts/draft-audet-sip-sips-guidelines-03.t
> xt
>=20
> I'm just about ready to issue an -04 update with the consolidated
> agreements from
> the list.
>=20
=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 23:08:58 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT8gK-00040B-Bz; Thu, 28 Sep 2006 23:04:56 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT8gI-000401-Rd
	for sip@ietf.org; Thu, 28 Sep 2006 23:04:54 -0400
Received: from rwcrmhc15.comcast.net ([204.127.192.85])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT8gG-0005fu-If
	for sip@ietf.org; Thu, 28 Sep 2006 23:04:54 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (rwcrmhc15) with ESMTP
	id <20060929030441m1500laokre>; Fri, 29 Sep 2006 03:04:51 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8T34eUm030799
	for <sip@ietf.org>; Thu, 28 Sep 2006 23:04:40 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8T34eRp030795;
	Thu, 28 Sep 2006 23:04:40 -0400
Date: Thu, 28 Sep 2006 23:04:40 -0400
Message-Id: <200609290304.k8T34eRp030795@dragon.ariadne.com>
From: Dale.Worley@comcast.net
To: sip@ietf.org
In-reply-to: <20060928061824.1zvjynhaixus4sgc@webmail.versatel.nl>
	(jbemmel@zonnet.nl)
Subject: Re: [Sip] New Event package response code
References: <20060927161756.75435.qmail@web31808.mail.mud.yahoo.com>
	<20060928061824.1zvjynhaixus4sgc@webmail.versatel.nl>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 8b30eb7682a596edff707698f4a80f7d
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   > I propose that we create a new error code that extends RFC 3265.  The
   > error code is to indicate that an Event header has an invalid or
   > unsupported value.  I also propose that we create a new header field
   > that contains the event header parameter(s) and unsupported values(s).
   >
   > E.g. Invalid-Event-Parameters: profile-type="application"
   >
   > I think that it is generally useful for 3265 implementation that have
   > Event header parameters with enumerated values (tokens or strings).
   > That is to indicate that the Event header parameter value is not valid
   > or supported.  As this is a protocol change issue, I am submitting this
   > to the SIP list for suggestings and comments.

I'm not fully aware of your application, but as a general rule, one
expects a notifier to ignore parameters on the Event value that it
does not understand.

So is the invalid-event-parameter processing to be activated when a
notifier receives an event parameter whose *name* it does not
understand, or when it receives a *value* that it does not
support/understand on a parmater that it does?

Could the desired effect be achieved by defining a new option-tag to
use in the Require header?  Could it be achieved with an Accept or
Accept-Encoding header?

   From: jbemmel@zonnet.nl

   The basic model in RFC3265 (and SIP/HTTP in general) is that the R-URI 
   contains sufficient information to identify the resource. Adding 
   parameters to the Event header as you propose would break this model: 
   the resource would be a function of the R-URI and these parameters. So 
   the choice is between fundamentally changing SIP or rethinking your 
   draft / solution

Is this use of XCAP accessing a different resource or just a different
method of accessing the "same" resource?

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Thu Sep 28 23:34:16 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GT96n-00023D-7m; Thu, 28 Sep 2006 23:32:17 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GT96l-00022z-MP
	for sip@ietf.org; Thu, 28 Sep 2006 23:32:15 -0400
Received: from mailgw3.ericsson.se ([193.180.251.60])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GT96e-0001LX-Vi
	for sip@ietf.org; Thu, 28 Sep 2006 23:32:15 -0400
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw3.ericsson.se (Symantec Mail Security) with ESMTP id AB6A7DE2; 
	Fri, 29 Sep 2006 05:31:59 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 29 Sep 2006 05:31:58 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: VS: [Sip] Escaping rules of SIP-URI userpart
Date: Fri, 29 Sep 2006 05:31:57 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403BF9876@esealmw113.eemea.ericsson.se>
In-Reply-To: <451C439F.9020508@cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: VS: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjSBx107PIeb95TXq4vu8RfXCmgAAL3HAw
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>,
	"Bob Penfield" <BPenfield@acmepacket.com>
X-OriginalArrivalTime: 29 Sep 2006 03:31:58.0694 (UTC)
	FILETIME=[D1CA3060:01C6E377]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 1449ead51a2ff026dcb23465f5379250
Cc: sip@ietf.org, Juha Heinanen <jh@tutpro.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi Jonathan,

No matter what people have implemented, the SIP ABNF does not allow the
fragment. The SIP-URI does not allow the fragment.

Regards,

Christer
=20

> -----Original Message-----
> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com]=20
> Sent: 29. syyskuuta 2006 0:50
> To: Bob Penfield
> Cc: Christer Holmberg (JO/LMF); Juha Heinanen;=20
> Dale.Worley@comcast.net; sip@ietf.org
> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>=20
> I agree here with Bob, Dale and others. The SIP URI is=20
> derived from RFC
> 2396 and inherits its constraints. That is part of the cost=20
> of being a URI as opposed to a SIP-specific type of=20
> identifier. Just because some implementations have not=20
> followed the spec on this point does not change what the spec=20
> says or why its there.
>=20
> -Jonathan R.
>=20
> Bob Penfield wrote:
>=20
> > True, but if the SIP-URI is held in a place where a=20
> URI-reference is=20
> > allowed, everything after the # would be interpreted as a fragment.=20
> > That is why 2396 indicates it needs to be escaped.
> >=20
> > cheers,
> > (-:bob
> >=20
> > Robert F. Penfield
> > Chief Software Architect
> > Acme Packet, Inc.
> > 71 Third Avenue
> > Burlington, MA 01803
> > bpenfield@acmepacket.com
> >=20
> > ----- Original Message ----- From: "Christer Holmberg (JO/LMF)"=20
> > <christer.holmberg@ericsson.com>
> > To: "Bob Penfield" <BPenfield@acmepacket.com>; "Juha Heinanen"=20
> > <jh@tutpro.com>; <Dale.Worley@comcast.net>
> > Cc: <sip@ietf.org>
> > Sent: Thursday, September 28, 2006 3:28 PM
> > Subject: RE: VS: [Sip] Escaping rules of SIP-URI userpart
> >=20
> >=20
> >=20
> > Hi,
> >=20
> > Again, when I read the SIP ABNF the only URIs that can be used are=20
> > absoluteURI, and of course SIP-URI, and none of these contain the=20
> > optional fragment part.
> >=20
> > So, instead of:
> >=20
> > Request-URI    =3D  SIP-URI / SIPS-URI / absoluteURI
> >=20
> > ...the ABNF should have said something like:
> >=20
> > Request-URI   =3D ((SIP-URI / SIPS-URI)["#" fragment]) /=20
> URI-reference)
> >=20
> > ...or something like that.
> >=20
> >=20
> > Regards,
> >=20
> > Christer
> >=20
> >=20
> >> -----Original Message-----
> >> From: Bob Penfield [mailto:BPenfield@acmepacket.com]
> >> Sent: 28. syyskuuta 2006 22:10
> >> To: Juha Heinanen; Dale.Worley@comcast.net
> >> Cc: sip@ietf.org
> >> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
> >>
> >> I suspect it might be because a SIP-URI could be placed elsewhere,=20
> >> like on some web page or in some other application that parses all=20
> >> URIs according to RFC 2396. Such a generic URI parser=20
> would interpret=20
> >> everything after the '#'
> >> as a fragment. This would result in a mis-interpretation=20
> of the URI.
> >>
> >> cheers,
> >> (-:bob
> >>
> >> Robert F. Penfield
> >> Chief Software Architect
> >> Acme Packet, Inc.
> >> 71 Third Avenue
> >> Burlington, MA 01803
> >> bpenfield@acmepacket.com
> >>
> >>
> >> ----- Original Message -----
> >> From: "Juha Heinanen" <jh@tutpro.com>
> >> To: <Dale.Worley@comcast.net>
> >> Cc: <sip@ietf.org>
> >> Sent: Thursday, September 28, 2006 2:08 PM
> >> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
> >>
> >>
> >> > Dale.Worley@comcast.net writes:
> >> >
> >> > > Whether it has any use in a SIP URI is not particularly
> >> important --
> >> > > as a URI it has to follow the generic syntax of URIs, RFC
> >> 2396.  And
> >> > > RFC 2396 reserves the use of '#' for fragment identifiers.
> >> >
> >> > there are various exceptions in rfc3261 regarding other
> >> standards that
> >> > rfc3261 uses.  why can't there be an exception on # too?
> >> >
> >> > -- juha
> >> >
> >> > _______________________________________________
> >> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >> > This list is for NEW development of the core SIP Protocol Use=20
> >> > sip-implementors@cs.columbia.edu for questions on=20
> current sip Use=20
> >> > sipping@ietf.org for new developments on the application of sip
> >> >
> >>
> >>
> >> _______________________________________________
> >> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> >> This list is for NEW development of the core SIP Protocol Use=20
> >> sip-implementors@cs.columbia.edu for questions on current sip Use=20
> >> sipping@ietf.org for new developments on the application of sip
> >>
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > sipping@ietf.org for new developments on the application of sip
> >=20
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > sipping@ietf.org for new developments on the application of sip
> >=20
>=20
> --=20
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ=20
> 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 06:48:09 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTFqv-0004uc-J2; Fri, 29 Sep 2006 06:44:21 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTFqu-0004uX-TW
	for sip@ietf.org; Fri, 29 Sep 2006 06:44:20 -0400
Received: from tcmail33.telekom.de ([217.6.95.240])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTFqt-0005qV-Cd
	for sip@ietf.org; Fri, 29 Sep 2006 06:44:20 -0400
Received: from S4DE8PSAAGT.mitte.t-com.de by tcmail31.dmz.telekom.de with
	ESMTP; Fri, 29 Sep 2006 12:44:11 +0200
Received: from S4DE8PSAAGO.mitte.t-com.de ([10.151.180.14]) by
	S4DE8PSAAGT.mitte.t-com.de with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 29 Sep 2006 12:44:10 +0200
Content-class: urn:content-classes:message
Subject: AW: [Sip] Escaping rules of SIP-URI userpart
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 29 Sep 2006 12:44:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-Id: <85108216918A984C8C60172D7C84770A56F72E@S4DE8PSAAGO.mitte.t-com.de>
in-reply-to: <5EB80D22825EEE42872083AD5BFFB59403BF96C9@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjMybUD7Kg0BXTTyCCC9LTsXyD2QAgI0Jg
From: "Jesske, R" <R.Jesske@t-com.net>
To: <christer.holmberg@ericsson.com>, <Dale.Worley@comcast.net>, <sip@ietf.org>
X-OriginalArrivalTime: 29 Sep 2006 10:44:10.0282 (UTC)
	FILETIME=[323880A0:01C6E3B4]
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7da5a831c477fb6ef97f379a05fb683c
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Christer, Dale,
I really confused about this discussion regarding'#'.
The range of a telephone number Digit is 0,1,2...9,A,B,C,D,F as far as I =
know (it's a binary 4 Digit code ).
You can look in Q.764 which of the digits are used for what and also =
E.164 gives a guideline.

So for what Telephone application '#' is used?

Best Regards

Roland

> -----Urspr=FCngliche Nachricht-----
> Von: Christer Holmberg (JO/LMF)=20
> [mailto:christer.holmberg@ericsson.com]=20
> Gesendet: Donnerstag, 28. September 2006 21:17
> An: Dale.Worley@comcast.net; sip@ietf.org
> Betreff: RE: [Sip] Escaping rules of SIP-URI userpart
>=20
>=20
> =20
> Also, I don't think that the RFC 3261 ABNF even allows for=20
> the usage of
> "#" as a delimiter, as defned in RFC2396.
>=20
> Chapter 4 of RFC2396 says:
>=20
> URI-reference =3D [ absoluteURI | relativeURI ] [ "#" fragment ]
>=20
> First, we can see that the fragment part cannot be within the URI, it
> optionally follows the URI
>=20
> Second, we can see that the fragment is not part of the URI,=20
> it is part
> of URI-reference.
>=20
> Third, there is no mentioning of URI-reference in the SIP ABNF.
>=20
>=20
> For example, the Request-URI is defined as:=20
>=20
> Request-URI =3D  SIP-URI / SIPS-URI / absoluteURI
>=20
> But, nowhere is ["#" fragment] mentioned.=20
>=20
> So, I doubt that many parsers implemented based on the SIP ABNF would
> even accept a URI followed by a fragment in a SIP message.
>=20
> Regards,
>=20
> Christer
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
> > -----Original Message-----
> > From: Christer Holmberg (JO/LMF)=20
> > [mailto:christer.holmberg@ericsson.com]=20
> > Sent: 28. syyskuuta 2006 19:03
> > To: Dale.Worley@comcast.net; sip@ietf.org
> > Subject: VS: [Sip] Escaping rules of SIP-URI userpart
> >=20
> > Hi Dale,
> >=20
> >=20
> > >   The issue is that I don't understand why that rule is=20
> > needed. User=3Dphone
> > >   means that the userpart shall be parsed as a=20
> > telephone-subscriber, and
> > >   within a telephone-subscriber the "#" does not have any=20
> > special meaning,
> > >   so there is no need to escape it.
> > >
> > >   So, yes, you probably have to go with:
> > >
> > >   sip:003%23xyz@hello.com
> > >
> > >  But, I see no reason why you should have to go with:
> > >
> > >   sip:003%23xyz@hello.com;user=3Dphone
> > >
> > >   Instead you could use:
> > >
> > >   sip:003#xyz@hello.com;user=3Dphone
> > >
> > How would you write a left-to-right parser that could cope=20
> with that?
> >=20
> > [CHH] Well, you can't really perform a detailed parse of the=20
> > userpart before you have parsed the user parameter anyway.
> > =20
> > And, whatever the value of the user parameter is, I have=20
> > never seen "#" used as this kind of delmiter in a SIP-URI anyway...
> > =20
> > Regards,
> > =20
> > Christer
> >=20
> > =20
> >=20
> > =20
> >=20
> > =20
> >=20
> > =20
> >=20
> > =20
> >=20
> >=20
> > Dale
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip=20
> > Use sipping@ietf.org for new developments on the application of sip
> >=20
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip=20
> > Use sipping@ietf.org for new developments on the application of sip
> >=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 06:57:41 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTG1u-0002WU-Sj; Fri, 29 Sep 2006 06:55:42 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTG1s-0002U4-JS
	for sip@ietf.org; Fri, 29 Sep 2006 06:55:40 -0400
Received: from mailgw4.ericsson.se ([193.180.251.62])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTG1l-0006zW-To
	for sip@ietf.org; Fri, 29 Sep 2006 06:55:40 -0400
Received: from esealmw128.eemea.ericsson.se (unknown [153.88.254.121])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	296E1500003; Fri, 29 Sep 2006 12:55:31 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw128.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 29 Sep 2006 12:55:30 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Fri, 29 Sep 2006 12:55:29 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403C2623D@esealmw113.eemea.ericsson.se>
In-Reply-To: <85108216918A984C8C60172D7C84770A56F72E@S4DE8PSAAGO.mitte.t-com.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjMybUD7Kg0BXTTyCCC9LTsXyD2QAgI0JgAABy70A=
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Jesske, R" <R.Jesske@t-com.net>, <Dale.Worley@comcast.net>, <sip@ietf.org>
X-OriginalArrivalTime: 29 Sep 2006 10:55:30.0251 (UTC)
	FILETIME=[C78389B0:01C6E3B5]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: c54bc2f42d02429833c0ca4b8725abd7
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org


Hi Roland,=20

>I really confused about this discussion regarding'#'.
>The range of a telephone number Digit is 0,1,2...9,A,B,C,D,F=20
>as far as I know (it's a binary 4 Digit code ).
>You can look in Q.764 which of the digits are used for what=20
>and also E.164 gives a guideline.
>=20
>So for what Telephone application '#' is used?

You can use if for service codes. *21#3455

...or something like that.

...or "Please enter your pin code, followed by #".

Regards,

Christer





> > -----Urspr=FCngliche Nachricht-----
> > Von: Christer Holmberg (JO/LMF)
> > [mailto:christer.holmberg@ericsson.com]
> > Gesendet: Donnerstag, 28. September 2006 21:17
> > An: Dale.Worley@comcast.net; sip@ietf.org
> > Betreff: RE: [Sip] Escaping rules of SIP-URI userpart
> >=20
> >=20
> > =20
> > Also, I don't think that the RFC 3261 ABNF even allows for=20
> the usage=20
> > of "#" as a delimiter, as defned in RFC2396.
> >=20
> > Chapter 4 of RFC2396 says:
> >=20
> > URI-reference =3D [ absoluteURI | relativeURI ] [ "#" fragment ]
> >=20
> > First, we can see that the fragment part cannot be within=20
> the URI, it=20
> > optionally follows the URI
> >=20
> > Second, we can see that the fragment is not part of the URI, it is=20
> > part of URI-reference.
> >=20
> > Third, there is no mentioning of URI-reference in the SIP ABNF.
> >=20
> >=20
> > For example, the Request-URI is defined as:=20
> >=20
> > Request-URI =3D  SIP-URI / SIPS-URI / absoluteURI
> >=20
> > But, nowhere is ["#" fragment] mentioned.=20
> >=20
> > So, I doubt that many parsers implemented based on the SIP=20
> ABNF would=20
> > even accept a URI followed by a fragment in a SIP message.
> >=20
> > Regards,
> >=20
> > Christer
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> > > -----Original Message-----
> > > From: Christer Holmberg (JO/LMF)
> > > [mailto:christer.holmberg@ericsson.com]
> > > Sent: 28. syyskuuta 2006 19:03
> > > To: Dale.Worley@comcast.net; sip@ietf.org
> > > Subject: VS: [Sip] Escaping rules of SIP-URI userpart
> > >=20
> > > Hi Dale,
> > >=20
> > >=20
> > > >   The issue is that I don't understand why that rule is
> > > needed. User=3Dphone
> > > >   means that the userpart shall be parsed as a
> > > telephone-subscriber, and
> > > >   within a telephone-subscriber the "#" does not have any
> > > special meaning,
> > > >   so there is no need to escape it.
> > > >
> > > >   So, yes, you probably have to go with:
> > > >
> > > >   sip:003%23xyz@hello.com
> > > >
> > > >  But, I see no reason why you should have to go with:
> > > >
> > > >   sip:003%23xyz@hello.com;user=3Dphone
> > > >
> > > >   Instead you could use:
> > > >
> > > >   sip:003#xyz@hello.com;user=3Dphone
> > > >
> > > How would you write a left-to-right parser that could cope
> > with that?
> > >=20
> > > [CHH] Well, you can't really perform a detailed parse of the=20
> > > userpart before you have parsed the user parameter anyway.
> > > =20
> > > And, whatever the value of the user parameter is, I have=20
> never seen=20
> > > "#" used as this kind of delmiter in a SIP-URI anyway...
> > > =20
> > > Regards,
> > > =20
> > > Christer
> > >=20
> > > =20
> > >=20
> > > =20
> > >=20
> > > =20
> > >=20
> > > =20
> > >=20
> > > =20
> > >=20
> > >=20
> > > Dale
> > >=20
> > > _______________________________________________
> > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > This list is for NEW development of the core SIP Protocol Use=20
> > > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > > sipping@ietf.org for new developments on the application of sip
> > >=20
> > >=20
> > > _______________________________________________
> > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > This list is for NEW development of the core SIP Protocol Use=20
> > > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > > sipping@ietf.org for new developments on the application of sip
> > >=20
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > sipping@ietf.org for new developments on the application of sip
> >=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 07:02:30 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTG6c-0004ub-Tg; Fri, 29 Sep 2006 07:00:34 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTG6b-0004uL-J8
	for sip@ietf.org; Fri, 29 Sep 2006 07:00:33 -0400
Received: from mailgw4.ericsson.se ([193.180.251.62])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTG6V-0007Sr-WD
	for sip@ietf.org; Fri, 29 Sep 2006 07:00:33 -0400
Received: from esealmw126.eemea.ericsson.se (unknown [153.88.254.123])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	D18288E0002; Fri, 29 Sep 2006 12:59:26 +0200 (CEST)
Received: from esealmw113.eemea.ericsson.se ([153.88.200.4]) by
	esealmw126.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 29 Sep 2006 12:59:26 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Fri, 29 Sep 2006 12:59:25 +0200
Message-ID: <5EB80D22825EEE42872083AD5BFFB59403C26279@esealmw113.eemea.ericsson.se>
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB59403C2623D@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjMybUD7Kg0BXTTyCCC9LTsXyD2QAgI0JgAABy70AAACwxUA==
From: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
To: "Jesske, R" <R.Jesske@t-com.net>, <Dale.Worley@comcast.net>, <sip@ietf.org>
X-OriginalArrivalTime: 29 Sep 2006 10:59:26.0173 (UTC)
	FILETIME=[542260D0:01C6E3B6]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7e439b86d3292ef5adf93b694a43a576
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20
>>I really confused about this discussion regarding'#'.
>>The range of a telephone number Digit is 0,1,2...9,A,B,C,D,F=20
>>as far as I know (it's a binary 4 Digit code ).
>>You can look in Q.764 which of the digits are used for what and also=20
>>E.164 gives a guideline.
>>=20
>>So for what Telephone application '#' is used?
>=20
>You can use if for service codes. *21#3455
>=20
>...or something like that.
>=20
>...or "Please enter your pin code, followed by #".

Well, that's a bad example, because you wouldn't send the pin code in a =
SIP-URI.

But, the service code example is still valid.

Regards,

Christer





> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Christer Holmberg (JO/LMF)
> > > [mailto:christer.holmberg@ericsson.com]
> > > Gesendet: Donnerstag, 28. September 2006 21:17
> > > An: Dale.Worley@comcast.net; sip@ietf.org
> > > Betreff: RE: [Sip] Escaping rules of SIP-URI userpart
> > >=20
> > >=20
> > > =20
> > > Also, I don't think that the RFC 3261 ABNF even allows for
> > the usage
> > > of "#" as a delimiter, as defned in RFC2396.
> > >=20
> > > Chapter 4 of RFC2396 says:
> > >=20
> > > URI-reference =3D [ absoluteURI | relativeURI ] [ "#" fragment ]
> > >=20
> > > First, we can see that the fragment part cannot be within
> > the URI, it
> > > optionally follows the URI
> > >=20
> > > Second, we can see that the fragment is not part of the=20
> URI, it is=20
> > > part of URI-reference.
> > >=20
> > > Third, there is no mentioning of URI-reference in the SIP ABNF.
> > >=20
> > >=20
> > > For example, the Request-URI is defined as:=20
> > >=20
> > > Request-URI =3D  SIP-URI / SIPS-URI / absoluteURI
> > >=20
> > > But, nowhere is ["#" fragment] mentioned.=20
> > >=20
> > > So, I doubt that many parsers implemented based on the SIP
> > ABNF would
> > > even accept a URI followed by a fragment in a SIP message.
> > >=20
> > > Regards,
> > >=20
> > > Christer
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > > > -----Original Message-----
> > > > From: Christer Holmberg (JO/LMF)
> > > > [mailto:christer.holmberg@ericsson.com]
> > > > Sent: 28. syyskuuta 2006 19:03
> > > > To: Dale.Worley@comcast.net; sip@ietf.org
> > > > Subject: VS: [Sip] Escaping rules of SIP-URI userpart
> > > >=20
> > > > Hi Dale,
> > > >=20
> > > >=20
> > > > >   The issue is that I don't understand why that rule is
> > > > needed. User=3Dphone
> > > > >   means that the userpart shall be parsed as a
> > > > telephone-subscriber, and
> > > > >   within a telephone-subscriber the "#" does not have any
> > > > special meaning,
> > > > >   so there is no need to escape it.
> > > > >
> > > > >   So, yes, you probably have to go with:
> > > > >
> > > > >   sip:003%23xyz@hello.com
> > > > >
> > > > >  But, I see no reason why you should have to go with:
> > > > >
> > > > >   sip:003%23xyz@hello.com;user=3Dphone
> > > > >
> > > > >   Instead you could use:
> > > > >
> > > > >   sip:003#xyz@hello.com;user=3Dphone
> > > > >
> > > > How would you write a left-to-right parser that could cope
> > > with that?
> > > >=20
> > > > [CHH] Well, you can't really perform a detailed parse of the=20
> > > > userpart before you have parsed the user parameter anyway.
> > > > =20
> > > > And, whatever the value of the user parameter is, I have
> > never seen
> > > > "#" used as this kind of delmiter in a SIP-URI anyway...
> > > > =20
> > > > Regards,
> > > > =20
> > > > Christer
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > >=20
> > > > Dale
> > > >=20
> > > > _______________________________________________
> > > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > > This list is for NEW development of the core SIP Protocol Use=20
> > > > sip-implementors@cs.columbia.edu for questions on=20
> current sip Use=20
> > > > sipping@ietf.org for new developments on the application of sip
> > > >=20
> > > >=20
> > > > _______________________________________________
> > > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > > This list is for NEW development of the core SIP Protocol Use=20
> > > > sip-implementors@cs.columbia.edu for questions on=20
> current sip Use=20
> > > > sipping@ietf.org for new developments on the application of sip
> > > >=20
> > >=20
> > > _______________________________________________
> > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > This list is for NEW development of the core SIP Protocol Use=20
> > > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > > sipping@ietf.org for new developments on the application of sip
> > >=20
> >=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 08:14:26 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTHCc-0000Fu-SU; Fri, 29 Sep 2006 08:10:50 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTHCa-0000Fh-N2
	for sip@ietf.org; Fri, 29 Sep 2006 08:10:48 -0400
Received: from mail146.messagelabs.com ([216.82.245.131])
	by ietf-mx.ietf.org with smtp (Exim 4.43) id 1GTHCW-0000GS-BL
	for sip@ietf.org; Fri, 29 Sep 2006 08:10:48 -0400
X-VirusChecked: Checked
X-Env-Sender: mdolly@att.com
X-Msg-Ref: server-8.tower-146.messagelabs.com!1159531843!4391915!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [134.24.146.4]
Received: (qmail 17688 invoked from network); 29 Sep 2006 12:10:43 -0000
Received: from unknown (HELO attrh9i.attrh.att.com) (134.24.146.4)
	by server-8.tower-146.messagelabs.com with SMTP;
	29 Sep 2006 12:10:43 -0000
Received: from attrh.att.com (localhost [127.0.0.1])
	by attrh9i.attrh.att.com (8.13.7/8.13.7) with ESMTP id k8TC4sY8024480; 
	Fri, 29 Sep 2006 08:04:54 -0400 (EDT)
Received: from OCCLUST04EVS1.ugd.att.com (ocst07.ugd.att.com [135.38.164.12])
	by attrh9i.attrh.att.com (8.13.7/8.13.7) with ESMTP id
	k8TC4jXm024431; Fri, 29 Sep 2006 08:04:49 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Fri, 29 Sep 2006 07:10:34 -0500
Message-ID: <28F05913385EAC43AF019413F674A017101B6F86@OCCLUST04EVS1.ugd.att.com>
In-Reply-To: <85108216918A984C8C60172D7C84770A56F72E@S4DE8PSAAGO.mitte.t-com.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjMybUD7Kg0BXTTyCCC9LTsXyD2QAgI0JgAAMf2kA=
From: "Dolly, Martin C, ALABS" <mdolly@att.com>
To: "Jesske, R" <R.Jesske@t-com.net>, <christer.holmberg@ericsson.com>,
	<Dale.Worley@comcast.net>, <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: c54bc2f42d02429833c0ca4b8725abd7
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Binary Coded Decimal (BCD)=20

-----Original Message-----
From: Jesske, R [mailto:R.Jesske@t-com.net]=20
Sent: Friday, September 29, 2006 6:44 AM
To: christer.holmberg@ericsson.com; Dale.Worley@comcast.net; =
sip@ietf.org
Subject: AW: [Sip] Escaping rules of SIP-URI userpart

Christer, Dale,
I really confused about this discussion regarding'#'.
The range of a telephone number Digit is 0,1,2...9,A,B,C,D,F as far as I =
know (it's a binary 4 Digit code ).
You can look in Q.764 which of the digits are used for what and also =
E.164 gives a guideline.

So for what Telephone application '#' is used?

Best Regards

Roland

> -----Urspr=FCngliche Nachricht-----
> Von: Christer Holmberg (JO/LMF)=20
> [mailto:christer.holmberg@ericsson.com]=20
> Gesendet: Donnerstag, 28. September 2006 21:17
> An: Dale.Worley@comcast.net; sip@ietf.org
> Betreff: RE: [Sip] Escaping rules of SIP-URI userpart
>=20
>=20
> =20
> Also, I don't think that the RFC 3261 ABNF even allows for=20
> the usage of
> "#" as a delimiter, as defned in RFC2396.
>=20
> Chapter 4 of RFC2396 says:
>=20
> URI-reference =3D [ absoluteURI | relativeURI ] [ "#" fragment ]
>=20
> First, we can see that the fragment part cannot be within the URI, it
> optionally follows the URI
>=20
> Second, we can see that the fragment is not part of the URI,=20
> it is part
> of URI-reference.
>=20
> Third, there is no mentioning of URI-reference in the SIP ABNF.
>=20
>=20
> For example, the Request-URI is defined as:=20
>=20
> Request-URI =3D  SIP-URI / SIPS-URI / absoluteURI
>=20
> But, nowhere is ["#" fragment] mentioned.=20
>=20
> So, I doubt that many parsers implemented based on the SIP ABNF would
> even accept a URI followed by a fragment in a SIP message.
>=20
> Regards,
>=20
> Christer
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
> > -----Original Message-----
> > From: Christer Holmberg (JO/LMF)=20
> > [mailto:christer.holmberg@ericsson.com]=20
> > Sent: 28. syyskuuta 2006 19:03
> > To: Dale.Worley@comcast.net; sip@ietf.org
> > Subject: VS: [Sip] Escaping rules of SIP-URI userpart
> >=20
> > Hi Dale,
> >=20
> >=20
> > >   The issue is that I don't understand why that rule is=20
> > needed. User=3Dphone
> > >   means that the userpart shall be parsed as a=20
> > telephone-subscriber, and
> > >   within a telephone-subscriber the "#" does not have any=20
> > special meaning,
> > >   so there is no need to escape it.
> > >
> > >   So, yes, you probably have to go with:
> > >
> > >   sip:003%23xyz@hello.com
> > >
> > >  But, I see no reason why you should have to go with:
> > >
> > >   sip:003%23xyz@hello.com;user=3Dphone
> > >
> > >   Instead you could use:
> > >
> > >   sip:003#xyz@hello.com;user=3Dphone
> > >
> > How would you write a left-to-right parser that could cope=20
> with that?
> >=20
> > [CHH] Well, you can't really perform a detailed parse of the=20
> > userpart before you have parsed the user parameter anyway.
> > =20
> > And, whatever the value of the user parameter is, I have=20
> > never seen "#" used as this kind of delmiter in a SIP-URI anyway...
> > =20
> > Regards,
> > =20
> > Christer
> >=20
> > =20
> >=20
> > =20
> >=20
> > =20
> >=20
> > =20
> >=20
> > =20
> >=20
> >=20
> > Dale
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip=20
> > Use sipping@ietf.org for new developments on the application of sip
> >=20
> >=20
> > _______________________________________________
> > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > This list is for NEW development of the core SIP Protocol Use=20
> > sip-implementors@cs.columbia.edu for questions on current sip=20
> > Use sipping@ietf.org for new developments on the application of sip
> >=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 08:17:27 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTHHL-0003NR-A3; Fri, 29 Sep 2006 08:15:43 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTHHI-0003ML-FC
	for sip@ietf.org; Fri, 29 Sep 2006 08:15:40 -0400
Received: from sccrmhc12.comcast.net ([204.127.200.82])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTHHH-00014K-9A
	for sip@ietf.org; Fri, 29 Sep 2006 08:15:40 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (sccrmhc12) with ESMTP
	id <20060929121538012002gleve>; Fri, 29 Sep 2006 12:15:38 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8TCFcUm013542
	for <sip@ietf.org>; Fri, 29 Sep 2006 08:15:38 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8TCFcrq013538;
	Fri, 29 Sep 2006 08:15:38 -0400
Date: Fri, 29 Sep 2006 08:15:38 -0400
Message-Id: <200609291215.k8TCFcrq013538@dragon.ariadne.com>
From: Dale.Worley@comcast.net
To: sip@ietf.org
In-reply-to: <85108216918A984C8C60172D7C84770A56F72E@S4DE8PSAAGO.mitte.t-com.de>
	(R.Jesske@t-com.net)
Subject: Re: AW: [Sip] Escaping rules of SIP-URI userpart
References: <85108216918A984C8C60172D7C84770A56F72E@S4DE8PSAAGO.mitte.t-com.de>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: bb8f917bb6b8da28fc948aeffb74aa17
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: "Jesske, R" <R.Jesske@t-com.net>

   I really confused about this discussion regarding'#'.
   The range of a telephone number Digit is 0,1,2...9,A,B,C,D,F as far
   as I know (it's a binary 4 Digit code ).
   You can look in Q.764 which of the digits are used for what and
   also E.164 gives a guideline.

   So for what Telephone application '#' is used?

The real table of DTMF digits, laid out according to the organization
of the *dual tones*, is:

	1 2 3 A

	4 5 6 B

	7 8 9 C

	* 0 # D

but most keypads don't have the right-hand column.

You can also see "*" and "#" in the RTP encoding chart, RFC 2833
section 3.10.

"*" and "#" are used for invoking special features in many phone
systems.  (E.g., in sipX, "*78" is the default call pick-up code, and
"*4" the default call retrieval code.)

Also, when dialing calls for which the central office doesn't have
knowledge of when the dial string has ended (e.g., international
calls), "#" is used as a signal that the dial string is finished.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 08:34:52 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTHXs-00044s-WC; Fri, 29 Sep 2006 08:32:49 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTHXr-00043R-0T
	for sip@ietf.org; Fri, 29 Sep 2006 08:32:47 -0400
Received: from smtp1.versatel.nl ([62.58.50.88])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTHXo-0004uK-HV
	for sip@ietf.org; Fri, 29 Sep 2006 08:32:46 -0400
Received: (qmail 12714 invoked by uid 0); 29 Sep 2006 12:32:26 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp1.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 29 Sep 2006 12:32:26 -0000
Message-ID: <003301c6e3c3$517c5b30$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Jonathan Rosenberg" <jdrosen@cisco.com>
References: <33D71F0FC0684C4C8A3BB76989EDED9C028BE3CE@eesmdmw020.eemea.ericsson.se>	<008301c6dc9f$5aa28930$0601a8c0@BEMBUSTER>
	<451B3ACB.9010009@cisco.com>
	<20060928063849.qfp2hrxqw2f4wwsw@webmail.versatel.nl>
	<451C423A.4060106@cisco.com>
Subject: Re: [Sip] GRUU and Anonymity
Date: Fri, 29 Sep 2006 14:32:23 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: bdc523f9a54890b8a30dd6fd53d5d024
Cc: sip@ietf.org,
	"Jesus Javier Arauz \(MI/EEM\)" <jesus.javier.arauz@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Jonathan,

see inline

Regards,

jeroen

----- Original Message ----- 
From: "Jonathan Rosenberg" <jdrosen@cisco.com>
To: <jbemmel@zonnet.nl>
Cc: "Jesus Javier Arauz (MI/EEM)" <jesus.javier.arauz@ericsson.com>; 
<Dale.Worley@comcast.net>; <sip@ietf.org>
Sent: Thursday, September 28, 2006 11:44 PM
Subject: Re: [Sip] GRUU and Anonymity


>
>
> jbemmel@zonnet.nl wrote:
>
>> Jonathan,
>>
>> In that case, I personally would prefer to do it properly in a separate 
>> draft, and for GRUU say something like: "GRUU provides the equivalent of 
>> a fixed public IP address.
>
> But its worse than that. Today, it will give you a GRUU which is 
> personally identifying you. An IP address is more of a pseudonym and is 
> useful primary as a correlator. Thats the issue; GRUU makes things WORSE 
> than rfc3261.
>
>

I assume you're refering to the case where the GRUU would contain the AoR 
verbatim? That would be an implementation choice (and as I'm sure you are 
aware, appendix A.2 provides a more privacy-preserving example for GRUU 
construction). So the draft already provides options to implement something 
more or less equivalent to RFC3261 (unless you had some other aspect in mind 
which makes it worse?).

>> All privacy issues associated with the use of such an address also apply 
>> to GRUUs. If additional privacy protection is required, it is recommended 
>> to use a privacy service [ref]"
>
> While we could merely suggest usage of a privacy service, it would imply 
> that a b2bua function is required for any kind of anonymity services with 
> gruu enabled. That is a tough pill to swallow.
>

IMHO it is better to have {GRUU draft as-is + RFC3323 privacy} while we are 
working on additional anonimity features and the underlying requirements, as 
opposed to {GRUU draft ammended with 1 temporary anonymous GRUU per Contact 
which changes for each registration}

>>
>> I don't see much added value in providing something that addresses the 
>> issues "kind of half". By adding a relatively simple feature now, we 
>> would create complexity in terms of the number of available 
>> options/alternatives later.
>
> Its not 'kind of half' - its addressing them exactly like RFC 3261 does.
>

For the GRUU draft I agree on this scope. With 'the issues' above I was 
refering to the more general case of providing privacy/anonymity, for that I 
think we need more work and consensus on the requirements first


> -Jonathan R.
>
>
> -- 
> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
> Cisco Fellow                                   Parsippany, NJ 07054-2711
> Cisco Systems
> jdrosen@cisco.com                              FAX:   (973) 952-5050
> http://www.jdrosen.net                         PHONE: (973) 952-5000
> http://www.cisco.com 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 09:38:45 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTIWN-0003nc-KZ; Fri, 29 Sep 2006 09:35:19 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTIWL-0003nV-4C
	for sip@ietf.org; Fri, 29 Sep 2006 09:35:17 -0400
Received: from ahmler6.mail.eds.com ([192.85.154.80])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTIWJ-0006TK-6t
	for sip@ietf.org; Fri, 29 Sep 2006 09:35:16 -0400
Received: from ahmlir5.mail.eds.com (ahmlir5-2.mail.eds.com [192.85.154.135])
	by ahmler6.mail.eds.com (8.13.8/8.12.10) with ESMTP id
	k8TDZ3IR027679; Fri, 29 Sep 2006 09:35:07 -0400
Received: from ahmlir5.mail.eds.com (localhost [127.0.0.1])
	by ahmlir5.mail.eds.com (8.13.8/8.12.10) with ESMTP id k8TDYIN7007724; 
	Fri, 29 Sep 2006 09:34:18 -0400
Received: from usut001.3com.com ([205.142.126.149])
	by ahmlir5.mail.eds.com (8.13.8/8.12.10) with ESMTP id k8TDYIeO007714; 
	Fri, 29 Sep 2006 09:34:18 -0400
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB59403BF8F76@esealmw113.eemea.ericsson.se>
To: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
Subject: RE: [Sip] PRACK query
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.2 June 01, 2004
Message-ID: <OF54CFA34A.AB6FA0F0-ON652571F8.004A9B66-652571F8.004A925F@3com.com>
From: Udit_Goyal@3com.com
Date: Fri, 29 Sep 2006 19:07:48 +0530
X-MIMETrack: Serialize by Router on USUT001/US/3Com(Release 6.0.3|September 26,
	2003) at 09/29/2006 06:34:21 AM,
	Serialize complete at 09/29/2006 06:34:21 AM
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 501044f827b673024f6a4cb1d46e67d2
Cc: sip@ietf.org, sip-implementors@cs.columbia.edu
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1086840648=="
Errors-To: sip-bounces@ietf.org

This is a multipart message in MIME format.
--===============1086840648==
Content-Type: multipart/alternative;
	boundary="=_alternative 004A9251652571F8_="

This is a multipart message in MIME format.
--=_alternative 004A9251652571F8_=
Content-Type: text/plain; charset="US-ASCII"

SDP in 1xx response and 200 OK can be different because of early media 
announcements and actual calle connected.

If 200 OK SDP will be same, then how can early media will be 
differentiated with regular session
(basically early media is used for announcements and 200 OK will tell the 
actual callee connected)

Regards,
Udit




"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com> 
09/28/2006 07:46 PM

To
Udit Goyal/C/US/3Com@3Com, <sip-implementors@cs.columbia.edu>
cc
sip@ietf.org
Subject
RE: [Sip] PRACK query







Hi,

>Please let me know if my understanding is correct for regular session
offer-answer when PRACK is used:
>
>For INVITE containing SDP, and if offer answer done in the using
reliable 183 response for early media, 200 OK response SDP will have an
answer for the
>regular session, so 200 OK SDP will be answer to the offer sent in
initial SDP.

Yes.

Of course, since you have already received the answer reliably, you
really don't need to care about the SDP in 200 OK, but according to the
rules it should be the same as previously sent in 18x.


>Similarly, if INVITE does not  have SDP, and if offer-answer done using
PRACK, still 200 OK will contain the regular session offer and answer
will be
>present n the ACK message.

I would assume so, yes. But, again, you don't really need to care.

>Similarly, if UPDATE is used for offer-answer before call is connected,
it will not affect the regular session offer-answer, it will be taken
care by
>initial INVITE , final 200 OK and ACK message.

I don't know what you mean by "not affect".

If you send an offer in INVITE, and receives an answer in a reliable
18x, the offer/answer exchange in UPDATE will then replace the one
previously done.

But, yes, the SDP you get in the 200 OK should still be the same that
you got in 18x, even if you have performed offer/answer exchanges after
that.

At least this is how I understand it - but you can never be sure when it
comes to offer/answer :)

Regards,

Christer




_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip

--=_alternative 004A9251652571F8_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2><tt>SDP in 1xx response and 200 OK can be different because
of early media announcements and actual calle connected.</tt></font>
<br>
<br><font size=2><tt>If 200 OK SDP will be same, then how can early media
will be differentiated with regular session</tt></font>
<br><font size=2><tt>(basically early media is used for announcements and
200 OK will tell the actual callee connected)<br>
</tt></font>
<br><font size=2><tt>Regards,</tt></font>
<br><font size=2><tt>Udit</tt></font>
<br>
<br>
<br>
<br>
<table width=100%>
<tr valign=top>
<td width=40%><font size=1 face="sans-serif"><b>&quot;Christer Holmberg
\(JO/LMF\)&quot; &lt;christer.holmberg@ericsson.com&gt;</b> </font>
<p><font size=1 face="sans-serif">09/28/2006 07:46 PM</font>
<td width=59%>
<table width=100%>
<tr>
<td>
<div align=right><font size=1 face="sans-serif">To</font></div>
<td valign=top><font size=1 face="sans-serif">Udit Goyal/C/US/3Com@3Com,
&lt;sip-implementors@cs.columbia.edu&gt;</font>
<tr>
<td>
<div align=right><font size=1 face="sans-serif">cc</font></div>
<td valign=top><font size=1 face="sans-serif">sip@ietf.org</font>
<tr>
<td>
<div align=right><font size=1 face="sans-serif">Subject</font></div>
<td valign=top><font size=1 face="sans-serif">RE: [Sip] PRACK query</font></table>
<br>
<table>
<tr valign=top>
<td>
<td></table>
<br></table>
<br>
<br>
<br>
<br><font size=2><tt>Hi,<br>
</tt></font>
<br><font size=2><tt>&gt;Please let me know if my understanding is correct
for regular session<br>
offer-answer when PRACK is used:<br>
&gt;<br>
&gt;For INVITE containing SDP, and if offer answer done in the using<br>
reliable 183 response for early media, 200 OK response SDP will have an<br>
answer for the<br>
&gt;regular session, so 200 OK SDP will be answer to the offer sent in<br>
initial SDP.<br>
</tt></font>
<br><font size=2><tt>Yes.<br>
</tt></font>
<br><font size=2><tt>Of course, since you have already received the answer
reliably, you<br>
really don't need to care about the SDP in 200 OK, but according to the<br>
rules it should be the same as previously sent in 18x.</tt></font>
<br>
<br>
<br><font size=2><tt>&gt;Similarly, if INVITE does not &nbsp;have SDP,
and if offer-answer done using<br>
PRACK, still 200 OK will contain the regular session offer and answer<br>
will be<br>
&gt;present n the ACK message.<br>
</tt></font>
<br><font size=2><tt>I would assume so, yes. But, again, you don't really
need to care.<br>
</tt></font>
<br><font size=2><tt>&gt;Similarly, if UPDATE is used for offer-answer
before call is connected,<br>
it will not affect the regular session offer-answer, it will be taken<br>
care by<br>
&gt;initial INVITE , final 200 OK and ACK message.<br>
</tt></font>
<br><font size=2><tt>I don't know what you mean by &quot;not affect&quot;.<br>
</tt></font>
<br><font size=2><tt>If you send an offer in INVITE, and receives an answer
in a reliable<br>
18x, the offer/answer exchange in UPDATE will then replace the one<br>
previously done.<br>
</tt></font>
<br><font size=2><tt>But, yes, the SDP you get in the 200 OK should still
be the same that<br>
you got in 18x, even if you have performed offer/answer exchanges after<br>
that.<br>
</tt></font>
<br><font size=2><tt>At least this is how I understand it - but you can
never be sure when it<br>
comes to offer/answer :)<br>
</tt></font>
<br><font size=2><tt>Regards,<br>
</tt></font>
<br><font size=2><tt>Christer<br>
</tt></font>
<br>
<br>
<br>
<br><font size=2><tt>_______________________________________________<br>
Sip mailing list &nbsp;https://www1.ietf.org/mailman/listinfo/sip<br>
This list is for NEW development of the core SIP Protocol<br>
Use sip-implementors@cs.columbia.edu for questions on current sip</tt></font>
<br><font size=2><tt>Use sipping@ietf.org for new developments on the application
of sip</tt></font>
<br>
--=_alternative 004A9251652571F8_=--


--===============1086840648==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1086840648==--




From sip-bounces@ietf.org Fri Sep 29 10:37:09 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTJRO-000691-RN; Fri, 29 Sep 2006 10:34:14 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTJRN-00068v-8G
	for sip@ietf.org; Fri, 29 Sep 2006 10:34:13 -0400
Received: from mailgw4.ericsson.se ([193.180.251.62])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTJRD-0005pF-Jv
	for sip@ietf.org; Fri, 29 Sep 2006 10:34:13 -0400
Received: from esealmw129.eemea.ericsson.se (unknown [153.88.254.120])
	by mailgw4.ericsson.se (Symantec Mail Security) with ESMTP id
	D4FA98E0002; Fri, 29 Sep 2006 16:34:00 +0200 (CEST)
Received: from esealmw127.eemea.ericsson.se ([153.88.254.171]) by
	esealmw129.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 29 Sep 2006 16:34:00 +0200
Received: from [136.225.183.89] ([136.225.183.89]) by
	esealmw127.eemea.ericsson.se with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 29 Sep 2006 16:33:55 +0200
From: "Christer Holmberg" <christer.holmberg@ericsson.com>
To: Udit_Goyal@3com.com
Subject: RE: [Sip] PRACK query
Date: Fri, 29 Sep 2006 17:32:40 +0300
Message-ID: <YmMdGk1Sy61k.tm4nfxNN@se-smtp.ericsson.se>
X-Mailer: EPOC Email Version 2.10
MIME-Version: 1.0
Content-Language: i-default
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 29 Sep 2006 14:33:58.0168 (UTC)
	FILETIME=[4C70F180:01C6E3D4]
X-Brightmail-Tracker: AAAAAA==
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 287c806b254c6353fcb09ee0e53bbc5e
Cc: sip@ietf.org, sip-implementors@cs.columbia.edu
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
Reply-To: Christer Holmberg <christer.holmberg@ericsson.com>
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Hi,

If you want to use a different SDP in 200 OK you need to use a different To =
tag. You can not "update" an answer within the same dialog by sending a new =
SDP in 200 OK.

Regards,

Christer

________________ Reply Header ________________
Subject:	RE: [Sip] PRACK query
Author:	Udit_Goyal@3com.com
Date:		29th September 2006 7:07:48 pm

SDP in 1xx response and 200 OK can be different because of early media =

announcements and actual calle connected.

If 200 OK SDP will be same, then how can early media will be=20
differentiated with regular session
(basically early media is used for announcements and 200 OK will tell the =

actual callee connected)

Regards,
Udit




"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>=20
09/28/2006 07:46 PM

To
Udit Goyal/C/US/3Com@3Com, <sip-implementors@cs.columbia.edu>
cc
sip@ietf.org
Subject
RE: [Sip] PRACK query







Hi,

>Please let me know if my understanding is correct for regular =
session
offer-answer when PRACK is used:
>
>For INVITE containing SDP, and if offer answer done in the using
reliable 183 response for early media, 200 OK response SDP will have =
an
answer for the
>regular session, so 200 OK SDP will be answer to the offer sent in
initial SDP.

Yes.

Of course, since you have already received the answer reliably, you
really don't need to care about the SDP in 200 OK, but according to =
the
rules it should be the same as previously sent in 18x.


>Similarly, if INVITE does not  have SDP, and if offer-answer done =
using
PRACK, still 200 OK will contain the regular session offer and answer
will be
>present n the ACK message.

I would assume so, yes. But, again, you don't really need to care.

>Similarly, if UPDATE is used for offer-answer before call is =
connected,
it will not affect the regular session offer-answer, it will be taken
care by
>initial INVITE , final 200 OK and ACK message.

I don't know what you mean by "not affect".

If you send an offer in INVITE, and receives an answer in a reliable
18x, the offer/answer exchange in UPDATE will then replace the one
previously done.

But, yes, the SDP you get in the 200 OK should still be the same that
you got in 18x, even if you have performed offer/answer exchanges =
after
that.

At least this is how I understand it - but you can never be sure when =
it
comes to offer/answer :)

Regards,

Christer




_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 11:38:53 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTKOJ-0006LT-MD; Fri, 29 Sep 2006 11:35:07 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTKOI-0006LO-Pf
	for sip@ietf.org; Fri, 29 Sep 2006 11:35:06 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTKOH-0006jB-CX
	for sip@ietf.org; Fri, 29 Sep 2006 11:35:06 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id EF3C713F8BF; Fri, 29 Sep 2006 18:34:43 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (primer93.gprs.dnafinland.fi [62.78.125.93])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id 01CF913F8AC;
	Fri, 29 Sep 2006 18:34:36 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 2E5BDF0257; Fri, 29 Sep 2006 18:35:21 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17693.15673.900236.501498@rautu.tutpro.com>
Date: Fri, 29 Sep 2006 18:35:21 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Christer Holmberg (JO/LMF)" <christer.holmberg@ericsson.com>
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB59403C2623D@esealmw113.eemea.ericsson.se>
References: <85108216918A984C8C60172D7C84770A56F72E@S4DE8PSAAGO.mitte.t-com.de>
	<5EB80D22825EEE42872083AD5BFFB59403C2623D@esealmw113.eemea.ericsson.se>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 1ac7cc0a4cd376402b85bc1961a86ac2
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Christer Holmberg (JO/LMF) writes:

 > So for what Telephone application '#' is used?

operators use # in various prefixes to the dialled number, for example:

- #31#number means privacy off for this call

- #21# means turn off unconditional transfer

i suggest that sip proxy and phone vendors follow the usual ietf
practise: be liberal in what you accept.

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 12:39:07 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTLLZ-0006HM-71; Fri, 29 Sep 2006 12:36:21 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTLKa-0005Tp-9T
	for sip@ietf.org; Fri, 29 Sep 2006 12:35:20 -0400
Received: from zcars04f.nortel.com ([47.129.242.57])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTL7x-0003tH-F8
	for sip@ietf.org; Fri, 29 Sep 2006 12:22:18 -0400
Received: from zrc2hxm1.corp.nortel.com (zrc2hxm1.corp.nortel.com
	[47.103.123.72])
	by zcars04f.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8TGLtN09070; Fri, 29 Sep 2006 12:21:56 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 29 Sep 2006 11:21:55 -0500
Message-ID: <E3F9D87C63E2774390FE67C924EC99BB0AB3DDF7@zrc2hxm1.corp.nortel.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sipping] URI list for INVITE
Thread-Index: AcbgFi+mioYwzCOSSR+iuszZwi5HJADfYFUgABPebQA=
From: "Mary Barnes" <mary.barnes@nortel.com>
To: <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 386e0819b1192672467565a524848168
Cc: gonzalo.camarillo@ericsson.com
Subject: [Sip] FW: [Sipping] URI list for INVITE
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I'm forwarding this thread to the SIP list for discussion, since these
documents are=20
being progressed in the SIP WG.=20

Mary


-----Original Message-----
From: Darshan Bildikar [mailto:dbildikar@ipunity.com]=20
Sent: Friday, September 29, 2006 2:59 AM
To: sipping@ietf.org
Subject: [Sipping] URI list for INVITE


List,

I have recently gone through three drafts that I found interesting=20

"draft-ietf-sip-uri-list-subscribe" - That allows a UA to create a
subscription to a list of resources in SIP


"draft-ietf-sip-uri-list-conferencing" - Allows conference creation
using
SIP URI list services.=20

"draft-ietf-sip-multiple-refer" - Refer a server to multiple resources.=20

My understanding is that these drafts allow SIP requests to map to
multiple
resources in order to avoid sending multiple requests.=20

In this regard, I was wondering whether it can be extended to an INVITE
request too! That is, the mechanism defined in
"draft-ietf-sip-uri-list-conferencing" can be extended to normal INVITE
requests. The basic requirement is to allow an INVITE request to address
multiple AOR's.=20

I know I am describing what is typically handled in by proxies through
parallel/sequential forking. But as I understand it, there is no
mechanism
(correct me if I am wrong) to indicate to a server WHETHER to carry out
sequential or parallel forking. Also it is not currently possible to use
a
combination of the two. Consequently, I can think of a few use cases
where
in this information might be provided as user input. Some of them are
presented below

Use Case 1: Alice would like to indicate through an interface on her GUI
soft phone or a web page that she would like to talk to either Bob or
Carol.
Note that Bob and Carol have different AOR's registered that MAY map to
multiple devices as indicated during REGISTRATION.

Use Case 2: A user could indicate through a web page for example, that
he
wishes to talk to either of three people Alice, Bob or Carol. She wants
Alice and Bob to be tried in PARALLEL and if neither of them is
available
then she would like to talk to Carol.=20

Use Case 3: It would allow a server to offer this as a primitive to
requesting UA's i.e. a UA can request a server to "Route my call to a
list
of SIP URI's one by one". It could then be exposed as a "service" that
could
be invoked by enterprise applications through a generic interface (not
necessarily SIP)

In my opinion such a strategy would be of use when forking (using the
term
loosely here) information is available only in RUNTIME (possibly as user
input) and cannot be configured statically in a proxy.=20

I think this could be achieved by expanding the scope of
"draft-ietf-sip-uri-list-conferencing" to make it more generic. We need
even
actually use a forking mechanism. An AS behaves as a B2BUA and generates
a
separate dialog for each SIP URI in the list.

Thoughts/Comments?

Darshan


_______________________________________________
Sipping mailing list  https://www1.ietf.org/mailman/listinfo/sipping
This list is for NEW development of the application of SIP
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sip@ietf.org for new developments of core SIP

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 14:51:49 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTNOY-00008X-6S; Fri, 29 Sep 2006 14:47:34 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTNOX-00006b-7U
	for sip@ietf.org; Fri, 29 Sep 2006 14:47:33 -0400
Received: from zcars04e.nortel.com ([47.129.242.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTNOV-0005uX-Mj
	for sip@ietf.org; Fri, 29 Sep 2006 14:47:33 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04e.nortel.com (Switch-2.2.0/Switch-2.2.0) with ESMTP id
	k8TIeoq29337; Fri, 29 Sep 2006 14:40:51 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Fri, 29 Sep 2006 13:47:00 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D58B72D@zrc2hxm0.corp.nortel.com>
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB59403C2623D@esealmw113.eemea.ericsson.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjMybUD7Kg0BXTTyCCC9LTsXyD2QAgI0JgAABy70AAEHIvcA==
From: "Francois Audet" <audet@nortel.com>
To: "Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>,
	"Jesske, R" <R.Jesske@t-com.net>, <Dale.Worley@comcast.net>, <sip@ietf.org>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 2a76bcd37b1c8a21336eb0a1ea6bbf48
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org



> -----Original Message-----
> From: Christer Holmberg (JO/LMF)=20
> [mailto:christer.holmberg@ericsson.com]=20
> Sent: Friday, September 29, 2006 3:55 AM
> To: Jesske, R; Dale.Worley@comcast.net; sip@ietf.org
> Subject: RE: [Sip] Escaping rules of SIP-URI userpart
>=20
>=20
> Hi Roland,=20
>=20
> >I really confused about this discussion regarding'#'.
> >The range of a telephone number Digit is 0,1,2...9,A,B,C,D,F=20
> as far as=20
> >I know (it's a binary 4 Digit code ).
> >You can look in Q.764 which of the digits are used for what and also=20
> >E.164 gives a guideline.
> >=20
> >So for what Telephone application '#' is used?
>=20
> You can use if for service codes. *21#3455
>=20
> ...or something like that.

There is no need for this in a URI. The service code should be=20
translatable by the phone to a real URI that actually means something.
=20
> ...or "Please enter your pin code, followed by #".

That's not a phone number: it's dialled digits, and it is coverered by=20
KPML and RFC 2833. It has no place in a URI.

> Regards,
>=20
> Christer
>=20
>=20
>=20
>=20
>=20
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Christer Holmberg (JO/LMF)
> > > [mailto:christer.holmberg@ericsson.com]
> > > Gesendet: Donnerstag, 28. September 2006 21:17
> > > An: Dale.Worley@comcast.net; sip@ietf.org
> > > Betreff: RE: [Sip] Escaping rules of SIP-URI userpart
> > >=20
> > >=20
> > > =20
> > > Also, I don't think that the RFC 3261 ABNF even allows for
> > the usage
> > > of "#" as a delimiter, as defned in RFC2396.
> > >=20
> > > Chapter 4 of RFC2396 says:
> > >=20
> > > URI-reference =3D [ absoluteURI | relativeURI ] [ "#" fragment ]
> > >=20
> > > First, we can see that the fragment part cannot be within
> > the URI, it
> > > optionally follows the URI
> > >=20
> > > Second, we can see that the fragment is not part of the=20
> URI, it is=20
> > > part of URI-reference.
> > >=20
> > > Third, there is no mentioning of URI-reference in the SIP ABNF.
> > >=20
> > >=20
> > > For example, the Request-URI is defined as:=20
> > >=20
> > > Request-URI =3D  SIP-URI / SIPS-URI / absoluteURI
> > >=20
> > > But, nowhere is ["#" fragment] mentioned.=20
> > >=20
> > > So, I doubt that many parsers implemented based on the SIP
> > ABNF would
> > > even accept a URI followed by a fragment in a SIP message.
> > >=20
> > > Regards,
> > >=20
> > > Christer
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > > > -----Original Message-----
> > > > From: Christer Holmberg (JO/LMF)
> > > > [mailto:christer.holmberg@ericsson.com]
> > > > Sent: 28. syyskuuta 2006 19:03
> > > > To: Dale.Worley@comcast.net; sip@ietf.org
> > > > Subject: VS: [Sip] Escaping rules of SIP-URI userpart
> > > >=20
> > > > Hi Dale,
> > > >=20
> > > >=20
> > > > >   The issue is that I don't understand why that rule is
> > > > needed. User=3Dphone
> > > > >   means that the userpart shall be parsed as a
> > > > telephone-subscriber, and
> > > > >   within a telephone-subscriber the "#" does not have any
> > > > special meaning,
> > > > >   so there is no need to escape it.
> > > > >
> > > > >   So, yes, you probably have to go with:
> > > > >
> > > > >   sip:003%23xyz@hello.com
> > > > >
> > > > >  But, I see no reason why you should have to go with:
> > > > >
> > > > >   sip:003%23xyz@hello.com;user=3Dphone
> > > > >
> > > > >   Instead you could use:
> > > > >
> > > > >   sip:003#xyz@hello.com;user=3Dphone
> > > > >
> > > > How would you write a left-to-right parser that could cope
> > > with that?
> > > >=20
> > > > [CHH] Well, you can't really perform a detailed parse of the=20
> > > > userpart before you have parsed the user parameter anyway.
> > > > =20
> > > > And, whatever the value of the user parameter is, I have
> > never seen
> > > > "#" used as this kind of delmiter in a SIP-URI anyway...
> > > > =20
> > > > Regards,
> > > > =20
> > > > Christer
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > >=20
> > > > Dale
> > > >=20
> > > > _______________________________________________
> > > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > > This list is for NEW development of the core SIP Protocol Use=20
> > > > sip-implementors@cs.columbia.edu for questions on=20
> current sip Use=20
> > > > sipping@ietf.org for new developments on the application of sip
> > > >=20
> > > >=20
> > > > _______________________________________________
> > > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > > This list is for NEW development of the core SIP Protocol Use=20
> > > > sip-implementors@cs.columbia.edu for questions on=20
> current sip Use=20
> > > > sipping@ietf.org for new developments on the application of sip
> > > >=20
> > >=20
> > > _______________________________________________
> > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > This list is for NEW development of the core SIP Protocol Use=20
> > > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > > sipping@ietf.org for new developments on the application of sip
> > >=20
> >=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 15:22:00 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTNtE-0002XB-Gy; Fri, 29 Sep 2006 15:19:16 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTNtC-0002Vf-QK
	for sip@ietf.org; Fri, 29 Sep 2006 15:19:14 -0400
Received: from lohi.tutpro.com ([192.98.100.2] helo=tutpro.com)
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTNtB-0004WE-Eq
	for sip@ietf.org; Fri, 29 Sep 2006 15:19:14 -0400
Received: by tutpro.com (Postfix, from userid 65534)
	id 368C513F8C1; Fri, 29 Sep 2006 22:19:09 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on lohi.tutpro.com
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.3
Received: from rautu (primer93.gprs.dnafinland.fi [62.78.125.93])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tutpro.com (Postfix) with ESMTP id B2DFF13F8BF;
	Fri, 29 Sep 2006 22:18:58 +0300 (EEST)
Received: by rautu (Postfix, from userid 1000)
	id 4FC25F0257; Fri, 29 Sep 2006 22:19:41 +0300 (EEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17693.29133.121440.204325@rautu.tutpro.com>
Date: Fri, 29 Sep 2006 22:19:41 +0300
From: Juha Heinanen <jh@tutpro.com>
To: "Francois Audet" <audet@nortel.com>
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
In-Reply-To: <1ECE0EB50388174790F9694F77522CCF0D58B72D@zrc2hxm0.corp.nortel.com>
References: <5EB80D22825EEE42872083AD5BFFB59403C2623D@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF0D58B72D@zrc2hxm0.corp.nortel.com>
X-Mailer: VM 7.19 under Emacs 21.4.1
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 7a6398bf8aaeabc7a7bb696b6b0a2aad
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org,
	"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Francois Audet writes:

 > There is no need for this in a URI. The service code should be 
 > translatable by the phone to a real URI that actually means
 > something.

i don't understand what you are trying to say.  #31# prefix of phone
number, for example, means something to PSTN and needs to be carried
there from the SIP phone, which cannot have a clue of various PSTN dial
string conventions.  or can you explain what kind of magic translation
nortel SIP phones do when user dial #31# followed by a phone number?

-- juha

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 16:21:16 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTOne-0008Jp-FJ; Fri, 29 Sep 2006 16:17:34 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTOnc-0008Jh-LA
	for sip@ietf.org; Fri, 29 Sep 2006 16:17:32 -0400
Received: from dsl001-129-069.dfw1.dsl.speakeasy.net ([72.1.129.69]
	helo=vicuna.estacado.net) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GTOnb-0004eM-3M for sip@ietf.org; Fri, 29 Sep 2006 16:17:32 -0400
Received: from [172.17.2.244] ([172.17.2.244]) (authenticated bits=0)
	by vicuna.estacado.net (8.13.8/8.13.4) with ESMTP id k8TKHOUw042641
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO);
	Fri, 29 Sep 2006 15:17:24 -0500 (CDT)
	(envelope-from bcampen@estacado.net)
In-Reply-To: <17693.15673.900236.501498@rautu.tutpro.com>
References: <85108216918A984C8C60172D7C84770A56F72E@S4DE8PSAAGO.mitte.t-com.de>
	<5EB80D22825EEE42872083AD5BFFB59403C2623D@esealmw113.eemea.ericsson.se>
	<17693.15673.900236.501498@rautu.tutpro.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Message-Id: <F40866AB-8367-47D3-B364-4AE823E0C782@estacado.net>
From: Byron Campen <bcampen@estacado.net>
Subject: Re: [Sip] Escaping rules of SIP-URI userpart
Date: Fri, 29 Sep 2006 15:17:14 -0500
To: Juha Heinanen <jh@tutpro.com>
X-Mailer: Apple Mail (2.752.2)
X-Spam-Score: 0.1 (/)
X-Scan-Signature: e1b0e72ff1bbd457ceef31828f216a86
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org,
	"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Content-Type: multipart/mixed; boundary="===============1491731586=="
Errors-To: sip-bounces@ietf.org


--===============1491731586==
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-13-865215664;
	protocol="application/pkcs7-signature"


--Apple-Mail-13-865215664
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

	Sigh, I was hoping not to get wound up about this, but here I go...  
(comment inline)

> Christer Holmberg (JO/LMF) writes:
>
>> So for what Telephone application '#' is used?
>
> operators use # in various prefixes to the dialled number, for  
> example:
>
> - #31#number means privacy off for this call
>
> - #21# means turn off unconditional transfer
>
> i suggest that sip proxy and phone vendors follow the usual ietf
> practise: be liberal in what you accept.
>

	And be conservative in what you send. (Postel's Law) This discussion  
is primarily about what a SIP UA should be willing to throw onto the  
wire. UAs have no business sending unescaped '#' onto the wire,  
because they are bound by the constraints of the aforementioned RFCs.  
If the receiving endpoint is unable to recognize the escaped form,  
and interpret it as '#', that is the fault of the receiving endpoint.  
(Not to mention a direct violation of the "be liberal in what you  
accept" clause of Postel's Law) It is infuriating that otherwise  
compliant UAs are being forced to engage in this broken behavior to  
pick up the slack.

Best regards,
Byron Campen

> -- juha
>
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip


--Apple-Mail-13-865215664
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGHDCCAtUw
ggI+oAMCAQICAw/ajDANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0EwHhcNMDUxMTE0MTU0MTEwWhcNMDYxMTE0MTU0MTEwWjBGMR8wHQYDVQQD
ExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMSMwIQYJKoZIhvcNAQkBFhRiY2FtcGVuQGVzdGFjYWRv
Lm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAOCNiipMJyBctmUQ60JYKRF7lCag
P2snNEtYKe0nPmYidfE+LO3nYtReQjIjhg0mZgeHC+DkJp0Oed5RYUKbXG//ypur8hdQZ9vqqjOX
RNf5hh6LOc6YgOSs89BwmF2IkxNVIps274V67MYoJwy8yPReSBGWF1tQIJEVC8EKUvFA/GMGlNB+
FTjRZrGWlsCSDNG1xbZBmktDnm9wjpijkA30mKAjKv4UHlOHNM8v1FXQzOzrdMMgOubdamWansGx
z5BvX84EYDnXfxlkTgUKeP5Oh91F017q7lgIOsHcttMwk2pm8ZGilCwAaLfwcXeA7LxYX6CDBu9V
l//VlLw+530CAwEAAaMxMC8wHwYDVR0RBBgwFoEUYmNhbXBlbkBlc3RhY2Fkby5uZXQwDAYDVR0T
AQH/BAIwADANBgkqhkiG9w0BAQQFAAOBgQCpWkyCfYvEDCBGwv7a0goMQb+OPFAkuwVVqzpLle/u
FTsomyNM38ZCwK13QUZ59v7Ek9G7BEuPUx1SoEw/3e+IXKbkY5pqhWEhE1xy9bnpPLJVCToXQaYE
PZi+5VhGWsFjPIWhwcwv9ghAHVtcNqgdwkJUY52InMTzfNpYSideVTCCAz8wggKooAMCAQICAQ0w
DQYJKoZIhvcNAQEFBQAwgdExCzAJBgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQ
BgNVBAcTCUNhcGUgVG93bjEaMBgGA1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0Nl
cnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBG
cmVlbWFpbCBDQTErMCkGCSqGSIb3DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAe
Fw0wMzA3MTcwMDAwMDBaFw0xMzA3MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxU
aGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJl
ZW1haWwgSXNzdWluZyBDQTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065ypla
HmjAdQRwnd/p/6Me7L3N9VvyGna9fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688
Cwfn8R+RNiQqE88r1fOCdz0Dviv+uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJg
t/sCAwEAAaOBlDCBkTASBgNVHRMBAf8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6
Ly9jcmwudGhhd3RlLmNvbS9UaGF3dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIB
BjApBgNVHREEIjAgpB4wHDEaMBgGA1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEF
BQADgYEASIzRUIPqCy7MDaNmrGcPf6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFi
w9k6GX6EsZkbAMUaC4J0niVQlGLH2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU13
41YheILcIRk13iSx0x1G/11fZU8xggLnMIIC4wIBATBpMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQK
ExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwg
RnJlZW1haWwgSXNzdWluZyBDQQIDD9qMMAkGBSsOAwIaBQCgggFTMBgGCSqGSIb3DQEJAzELBgkq
hkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDkyOTIwMTcxNVowIwYJKoZIhvcNAQkEMRYEFPhJ
JBdW0nMt0X8Bqa9yd9rA0IGiMHgGCSsGAQQBgjcQBDFrMGkwYjELMAkGA1UEBhMCWkExJTAjBgNV
BAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25h
bCBGcmVlbWFpbCBJc3N1aW5nIENBAgMP2owwegYLKoZIhvcNAQkQAgsxa6BpMGIxCzAJBgNVBAYT
AlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3
dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIDD9qMMA0GCSqGSIb3DQEBAQUABIIBAN6/
KR/le7wtIBom0xex9wphxlkmlMqShu81bAzC7hAGA5h/OmhPNS13dxP46H8IFlm3pGW3xyhPP16x
F+IzRRcXipqWCeFdUBB4bYbfdqedk7rPTThFIAKJr1REElXbMo5dxESg4aCv0OesL9NtGznkh7hl
SizqPlkb1ca2BpBoSgDVNR0I1xQnU6AtUaTvZ9PlPFHSf2wkAKdOP5MM5YfIPZV5NX0EpZQ2KfFs
4+W9N5vuuaFVUfqkWiuF0ucmCgycOHtNijGnXK4meGz2hwPw7Wod1IKSumLUAcEdU5GJmitDGFrD
6SI9SoP4QvI+rSrpc2cMJNob8p86ywemwhAAAAAAAAA=

--Apple-Mail-13-865215664--


--===============1491731586==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip
--===============1491731586==--




From sip-bounces@ietf.org Fri Sep 29 18:40:14 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTQyW-0006q1-Bc; Fri, 29 Sep 2006 18:36:56 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTQyV-0006pw-DR
	for sip@ietf.org; Fri, 29 Sep 2006 18:36:55 -0400
Received: from rtp-iport-1.cisco.com ([64.102.122.148])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTQyS-0003X2-V5
	for sip@ietf.org; Fri, 29 Sep 2006 18:36:55 -0400
Received: from rtp-dkim-1.cisco.com ([64.102.121.158])
	by rtp-iport-1.cisco.com with ESMTP; 29 Sep 2006 15:36:52 -0700
X-IronPort-AV: i="4.09,238,1157353200"; 
	d="scan'208"; a="44196975:sNHT64741008"
Received: from rtp-core-1.cisco.com (rtp-core-1.cisco.com [64.102.124.12])
	by rtp-dkim-1.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8TMaq7T024670; Fri, 29 Sep 2006 18:36:52 -0400
Received: from xbh-rtp-201.amer.cisco.com (xbh-rtp-201.cisco.com
	[64.102.31.12])
	by rtp-core-1.cisco.com (8.12.10/8.12.6) with ESMTP id k8TMaqdM007192; 
	Fri, 29 Sep 2006 18:36:52 -0400 (EDT)
Received: from xfe-rtp-201.amer.cisco.com ([64.102.31.38]) by
	xbh-rtp-201.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 29 Sep 2006 18:36:52 -0400
Received: from [161.44.79.176] ([161.44.79.176]) by xfe-rtp-201.amer.cisco.com
	with Microsoft SMTPSVC(6.0.3790.1830); 
	Fri, 29 Sep 2006 18:36:51 -0400
Message-ID: <451DA002.8060704@cisco.com>
Date: Fri, 29 Sep 2006 18:36:50 -0400
From: Paul Kyzivat <pkyzivat@cisco.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: "Christer Holmberg (JO/LMF)" <christer.holmberg@ericsson.com>
Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
References: <5EB80D22825EEE42872083AD5BFFB59403BF9876@esealmw113.eemea.ericsson.se>
In-Reply-To: <5EB80D22825EEE42872083AD5BFFB59403BF9876@esealmw113.eemea.ericsson.se>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 29 Sep 2006 22:36:51.0701 (UTC)
	FILETIME=[C2033A50:01C6E417]
DKIM-Signature: a=rsa-sha1; q=dns; l=5971; t=1159569412; x=1160433412;
	c=relaxed/simple; s=rtpdkim1001;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=pkyzivat@cisco.com;
	z=From:Paul=20Kyzivat=20<pkyzivat@cisco.com>
	|Subject:Re=3A=20VS=3A=20[Sip]=20Escaping=20rules=20of=20SIP-URI=20userpart
	|To:=22Christer=20Holmberg=20(JO/LMF)=22=20<christer.holmberg@ericsson.com>;
	X=v=3Dcisco.com=3B=20h=3D1qEfQq+1Ydy2JTfq/59yoszflQI=3D;
	b=I4BCVc79g2aAmYivzz+IQ+BnwYRWIbZOuvM9JhyOj73ulUTsXO2B/yIFWayeLljVj0PxSxaJ
	NATbxL9m/r4TSjlMyvBE42Qa1Qxl5n9krUPpV1Vw3+kVwTcnC+G2R7H/;
Authentication-Results: rtp-dkim-1.cisco.com; header.From=pkyzivat@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 0cff8c3ec906d056784362c06f5f88c1
Cc: Bob Penfield <BPenfield@acmepacket.com>, sip@ietf.org,
	Juha Heinanen <jh@tutpro.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

I'm speculating here, but perhaps AbsoluteURIs are forbidden from having 
unescaped # so that a URI-reference, with its use of #, can be 
unambiguously parsed.

	Paul

Christer Holmberg (JO/LMF) wrote:
> Hi Jonathan,
> 
> No matter what people have implemented, the SIP ABNF does not allow the
> fragment. The SIP-URI does not allow the fragment.
> 
> Regards,
> 
> Christer
>  
> 
>> -----Original Message-----
>> From: Jonathan Rosenberg [mailto:jdrosen@cisco.com] 
>> Sent: 29. syyskuuta 2006 0:50
>> To: Bob Penfield
>> Cc: Christer Holmberg (JO/LMF); Juha Heinanen; 
>> Dale.Worley@comcast.net; sip@ietf.org
>> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>>
>> I agree here with Bob, Dale and others. The SIP URI is 
>> derived from RFC
>> 2396 and inherits its constraints. That is part of the cost 
>> of being a URI as opposed to a SIP-specific type of 
>> identifier. Just because some implementations have not 
>> followed the spec on this point does not change what the spec 
>> says or why its there.
>>
>> -Jonathan R.
>>
>> Bob Penfield wrote:
>>
>>> True, but if the SIP-URI is held in a place where a 
>> URI-reference is 
>>> allowed, everything after the # would be interpreted as a fragment. 
>>> That is why 2396 indicates it needs to be escaped.
>>>
>>> cheers,
>>> (-:bob
>>>
>>> Robert F. Penfield
>>> Chief Software Architect
>>> Acme Packet, Inc.
>>> 71 Third Avenue
>>> Burlington, MA 01803
>>> bpenfield@acmepacket.com
>>>
>>> ----- Original Message ----- From: "Christer Holmberg (JO/LMF)" 
>>> <christer.holmberg@ericsson.com>
>>> To: "Bob Penfield" <BPenfield@acmepacket.com>; "Juha Heinanen" 
>>> <jh@tutpro.com>; <Dale.Worley@comcast.net>
>>> Cc: <sip@ietf.org>
>>> Sent: Thursday, September 28, 2006 3:28 PM
>>> Subject: RE: VS: [Sip] Escaping rules of SIP-URI userpart
>>>
>>>
>>>
>>> Hi,
>>>
>>> Again, when I read the SIP ABNF the only URIs that can be used are 
>>> absoluteURI, and of course SIP-URI, and none of these contain the 
>>> optional fragment part.
>>>
>>> So, instead of:
>>>
>>> Request-URI    =  SIP-URI / SIPS-URI / absoluteURI
>>>
>>> ...the ABNF should have said something like:
>>>
>>> Request-URI   = ((SIP-URI / SIPS-URI)["#" fragment]) / 
>> URI-reference)
>>> ...or something like that.
>>>
>>>
>>> Regards,
>>>
>>> Christer
>>>
>>>
>>>> -----Original Message-----
>>>> From: Bob Penfield [mailto:BPenfield@acmepacket.com]
>>>> Sent: 28. syyskuuta 2006 22:10
>>>> To: Juha Heinanen; Dale.Worley@comcast.net
>>>> Cc: sip@ietf.org
>>>> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>>>>
>>>> I suspect it might be because a SIP-URI could be placed elsewhere, 
>>>> like on some web page or in some other application that parses all 
>>>> URIs according to RFC 2396. Such a generic URI parser 
>> would interpret 
>>>> everything after the '#'
>>>> as a fragment. This would result in a mis-interpretation 
>> of the URI.
>>>> cheers,
>>>> (-:bob
>>>>
>>>> Robert F. Penfield
>>>> Chief Software Architect
>>>> Acme Packet, Inc.
>>>> 71 Third Avenue
>>>> Burlington, MA 01803
>>>> bpenfield@acmepacket.com
>>>>
>>>>
>>>> ----- Original Message -----
>>>> From: "Juha Heinanen" <jh@tutpro.com>
>>>> To: <Dale.Worley@comcast.net>
>>>> Cc: <sip@ietf.org>
>>>> Sent: Thursday, September 28, 2006 2:08 PM
>>>> Subject: Re: VS: [Sip] Escaping rules of SIP-URI userpart
>>>>
>>>>
>>>>> Dale.Worley@comcast.net writes:
>>>>>
>>>>>> Whether it has any use in a SIP URI is not particularly
>>>> important --
>>>>>> as a URI it has to follow the generic syntax of URIs, RFC
>>>> 2396.  And
>>>>>> RFC 2396 reserves the use of '#' for fragment identifiers.
>>>>> there are various exceptions in rfc3261 regarding other
>>>> standards that
>>>>> rfc3261 uses.  why can't there be an exception on # too?
>>>>>
>>>>> -- juha
>>>>>
>>>>> _______________________________________________
>>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>>> This list is for NEW development of the core SIP Protocol Use 
>>>>> sip-implementors@cs.columbia.edu for questions on 
>> current sip Use 
>>>>> sipping@ietf.org for new developments on the application of sip
>>>>>
>>>>
>>>> _______________________________________________
>>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>>> This list is for NEW development of the core SIP Protocol Use 
>>>> sip-implementors@cs.columbia.edu for questions on current sip Use 
>>>> sipping@ietf.org for new developments on the application of sip
>>>>
>>> _______________________________________________
>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol Use 
>>> sip-implementors@cs.columbia.edu for questions on current sip Use 
>>> sipping@ietf.org for new developments on the application of sip
>>>
>>>
>>> _______________________________________________
>>> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
>>> This list is for NEW development of the core SIP Protocol Use 
>>> sip-implementors@cs.columbia.edu for questions on current sip Use 
>>> sipping@ietf.org for new developments on the application of sip
>>>
>> -- 
>> Jonathan D. Rosenberg, Ph.D.                   600 Lanidex Plaza
>> Cisco Fellow                                   Parsippany, NJ 
>> 07054-2711
>> Cisco Systems
>> jdrosen@cisco.com                              FAX:   (973) 952-5050
>> http://www.jdrosen.net                         PHONE: (973) 952-5000
>> http://www.cisco.com
>>
> 
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol
> Use sip-implementors@cs.columbia.edu for questions on current sip
> Use sipping@ietf.org for new developments on the application of sip
> 

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 19:30:15 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTRjp-0008Hb-JA; Fri, 29 Sep 2006 19:25:49 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTRjo-0008HU-9v
	for sip@ietf.org; Fri, 29 Sep 2006 19:25:48 -0400
Received: from zcars04e.nortel.com ([47.129.242.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTRjl-0008PI-VS
	for sip@ietf.org; Fri, 29 Sep 2006 19:25:48 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zcars04e.nortel.com (Switch-2.2.0/Switch-2.2.0) with ESMTP id
	k8TNJEq13856; Fri, 29 Sep 2006 19:19:14 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Fri, 29 Sep 2006 18:25:38 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D58BB79@zrc2hxm0.corp.nortel.com>
In-Reply-To: <17693.29133.121440.204325@rautu.tutpro.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: Acbj/ClEUb3UhuieTWa7DZzTNf5pbAAHpdpA
From: "Francois Audet" <audet@nortel.com>
To: "Juha Heinanen" <jh@tutpro.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: 9ed51c9d1356100bce94f1ae4ec616a9
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org,
	"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

=20

Francois Audet writes:
>=20
>  > There is no need for this in a URI. The service code=20
> should be  > translatable by the phone to a real URI that=20
> actually means  > something.
>=20
> i don't understand what you are trying to say.  #31# prefix=20
> of phone number, for example, means something to PSTN and=20
> needs to be carried there from the SIP phone, which cannot=20
> have a clue of various PSTN dial string conventions.  or can=20
> you explain what kind of magic translation nortel SIP phones=20
> do when user dial #31# followed by a phone number?

I'm saying doing what you are proposing, i.e., using # in a phone
number ON THE WIRE (I.e., in a URI), is an extremely bad idea that=20
we shouldn't attempt to do in SIP. And it won't work except in
isolated proprietary implementations.

In the example you gave (I'm hearing that some network operator
is using this for privacy).

What you need to do is intercept the digit pattern in the phone,
make the call to the destination without the proprietary digits, and
then mark your From header as anonymous@anonymous.invalid.

To do it your way would MANDATE a B2BUA since my proxy would have
to remove the From and replace it (making it a B2BUA). And it would
magically have to understand all the dialling plans in the universe.

So publishing a URI with a # means most people won't
be able to reach it. #31# means absolutely nothing to me
in North America. If I try to call you with this, it just won't
work. =20

As a side note, on many phones, "#" means end-of-dialling.=20
It stops digit collection. And it is NOT transmitted on the wire.






_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 19:59:16 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTSDF-000806-Fy; Fri, 29 Sep 2006 19:56:13 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTSDD-0007zz-C2
	for sip@ietf.org; Fri, 29 Sep 2006 19:56:11 -0400
Received: from smtp2.versatel.nl ([62.58.50.89])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTSDB-0004Xk-Ti
	for sip@ietf.org; Fri, 29 Sep 2006 19:56:11 -0400
Received: (qmail 25378 invoked by uid 0); 29 Sep 2006 23:55:56 -0000
Received: from ip198-11-212-87.adsl2.versatel.nl (HELO BEMBUSTER)
	([87.212.11.198]) (envelope-sender <jbemmel@zonnet.nl>)
	by smtp2.versatel.nl (qmail-ldap-1.03) with SMTP
	for < >; 29 Sep 2006 23:55:56 -0000
Message-ID: <000a01c6e422$d2174840$0601a8c0@BEMBUSTER>
From: "Jeroen van Bemmel" <jbemmel@zonnet.nl>
To: "Francois Audet" <audet@nortel.com>,
	"Juha Heinanen" <jh@tutpro.com>
References: <1ECE0EB50388174790F9694F77522CCF0D58BB79@zrc2hxm0.corp.nortel.com>
Subject: Re: [Sip] Escaping rules of SIP-URI userpart
Date: Sat, 30 Sep 2006 01:56:02 +0200
MIME-Version: 1.0
Content-Type: text/plain; format=flowed; charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Score: 0.0 (/)
X-Scan-Signature: d0bdc596f8dd1c226c458f0b4df27a88
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org,
	"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Francois,

As long as one adheres to the escaping rules, it is perfectly valid to use # 
in URIs. The UA should not attempt any interpretation, but simply 
escape-and-pass anything the user dials.

The UA user interface can be such that '#' means end-of-input (ie <enter>), 
but it is also valid on the wire (when escaped)

Regards,

jeroen

----- Original Message ----- 
From: "Francois Audet" <audet@nortel.com>
To: "Juha Heinanen" <jh@tutpro.com>
Cc: "Jesske, R" <R.Jesske@t-com.net>; <sip@ietf.org>; "Christer Holmberg 
(JO/LMF)" <christer.holmberg@ericsson.com>
Sent: Saturday, September 30, 2006 1:25 AM
Subject: RE: [Sip] Escaping rules of SIP-URI userpart




Francois Audet writes:
>
>  > There is no need for this in a URI. The service code
> should be  > translatable by the phone to a real URI that
> actually means  > something.
>
> i don't understand what you are trying to say.  #31# prefix
> of phone number, for example, means something to PSTN and
> needs to be carried there from the SIP phone, which cannot
> have a clue of various PSTN dial string conventions.  or can
> you explain what kind of magic translation nortel SIP phones
> do when user dial #31# followed by a phone number?

I'm saying doing what you are proposing, i.e., using # in a phone
number ON THE WIRE (I.e., in a URI), is an extremely bad idea that
we shouldn't attempt to do in SIP. And it won't work except in
isolated proprietary implementations.

In the example you gave (I'm hearing that some network operator
is using this for privacy).

What you need to do is intercept the digit pattern in the phone,
make the call to the destination without the proprietary digits, and
then mark your From header as anonymous@anonymous.invalid.

To do it your way would MANDATE a B2BUA since my proxy would have
to remove the From and replace it (making it a B2BUA). And it would
magically have to understand all the dialling plans in the universe.

So publishing a URI with a # means most people won't
be able to reach it. #31# means absolutely nothing to me
in North America. If I try to call you with this, it just won't
work.

As a side note, on many phones, "#" means end-of-dialling.
It stops digit collection. And it is NOT transmitted on the wire.






_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip 


_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 20:25:06 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTScO-00043C-8s; Fri, 29 Sep 2006 20:22:12 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTScM-00042b-7h
	for sip@ietf.org; Fri, 29 Sep 2006 20:22:10 -0400
Received: from zrtps0kp.nortel.com ([47.140.192.56])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTSR7-0007DF-0J
	for sip@ietf.org; Fri, 29 Sep 2006 20:10:34 -0400
Received: from zrc2hxm0.corp.nortel.com (zrc2hxm0.corp.nortel.com
	[47.103.123.71])
	by zrtps0kp.nortel.com (Switch-2.2.6/Switch-2.2.0) with ESMTP id
	k8U0ATa20570; Fri, 29 Sep 2006 20:10:29 -0400 (EDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Fri, 29 Sep 2006 19:10:28 -0500
Message-ID: <1ECE0EB50388174790F9694F77522CCF0D58BBC2@zrc2hxm0.corp.nortel.com>
In-Reply-To: <000a01c6e422$d2174840$0601a8c0@BEMBUSTER>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbkItqn8jztxEpHSY+Zb/SKvr4qRQAAKqyA
From: "Francois Audet" <audet@nortel.com>
To: "Jeroen van Bemmel" <jbemmel@zonnet.nl>, "Juha Heinanen" <jh@tutpro.com>
X-Spam-Score: 0.0 (/)
X-Scan-Signature: e1b0e72ff1bbd457ceef31828f216a86
Cc: "Jesske, R" <R.Jesske@t-com.net>, sip@ietf.org,
	"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

It's a valid URI, yes, not necessarily a valid phone number.

Certainly not a valid global phone number.

The specific example mentioned (privacy=3Don) is very broken since
it really won't give you privacy at all.=20

What bothers me with this thread is not that people want to use
strange characters in URIs.

What bothers me is that people want to use it to replicate
analog telephone keypad codes, the same way it was done back then,
in SIP. It was broken then, and it is even more broken now that
addresses
are supposed to be global.

> -----Original Message-----
> From: Jeroen van Bemmel [mailto:jbemmel@zonnet.nl]=20
> Sent: Friday, September 29, 2006 4:56 PM
> To: Audet, Francois (SC100:3055); Juha Heinanen
> Cc: Jesske, R; sip@ietf.org; Christer Holmberg (JO/LMF)
> Subject: Re: [Sip] Escaping rules of SIP-URI userpart
>=20
> Francois,
>=20
> As long as one adheres to the escaping rules, it is perfectly=20
> valid to use # in URIs. The UA should not attempt any=20
> interpretation, but simply escape-and-pass anything the user dials.
>=20
> The UA user interface can be such that '#' means end-of-input=20
> (ie <enter>), but it is also valid on the wire (when escaped)
>=20
> Regards,
>=20
> jeroen
>=20
> ----- Original Message -----
> From: "Francois Audet" <audet@nortel.com>
> To: "Juha Heinanen" <jh@tutpro.com>
> Cc: "Jesske, R" <R.Jesske@t-com.net>; <sip@ietf.org>;=20
> "Christer Holmberg (JO/LMF)" <christer.holmberg@ericsson.com>
> Sent: Saturday, September 30, 2006 1:25 AM
> Subject: RE: [Sip] Escaping rules of SIP-URI userpart
>=20
>=20
>=20
>=20
> Francois Audet writes:
> >
> >  > There is no need for this in a URI. The service code=20
> should be  >=20
> > translatable by the phone to a real URI that actually means  >=20
> > something.
> >
> > i don't understand what you are trying to say.  #31# prefix=20
> of phone=20
> > number, for example, means something to PSTN and needs to=20
> be carried=20
> > there from the SIP phone, which cannot have a clue of various PSTN=20
> > dial string conventions.  or can you explain what kind of magic=20
> > translation nortel SIP phones do when user dial #31# followed by a=20
> > phone number?
>=20
> I'm saying doing what you are proposing, i.e., using # in a=20
> phone number ON THE WIRE (I.e., in a URI), is an extremely=20
> bad idea that we shouldn't attempt to do in SIP. And it won't=20
> work except in isolated proprietary implementations.
>=20
> In the example you gave (I'm hearing that some network=20
> operator is using this for privacy).
>=20
> What you need to do is intercept the digit pattern in the=20
> phone, make the call to the destination without the=20
> proprietary digits, and then mark your From header as=20
> anonymous@anonymous.invalid.
>=20
> To do it your way would MANDATE a B2BUA since my proxy would=20
> have to remove the From and replace it (making it a B2BUA).=20
> And it would magically have to understand all the dialling=20
> plans in the universe.
>=20
> So publishing a URI with a # means most people won't be able=20
> to reach it. #31# means absolutely nothing to me in North=20
> America. If I try to call you with this, it just won't work.
>=20
> As a side note, on many phones, "#" means end-of-dialling.
> It stops digit collection. And it is NOT transmitted on the wire.
>=20
>=20
>=20
>=20
>=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip=20
> Use sipping@ietf.org for new developments on the application of sip=20
>=20
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Fri Sep 29 21:44:30 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTTpg-0007kf-U1; Fri, 29 Sep 2006 21:40:00 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTTpf-0007kZ-0Z
	for sip@ietf.org; Fri, 29 Sep 2006 21:39:59 -0400
Received: from alnrmhc13.comcast.net ([206.18.177.53])
	by ietf-mx.ietf.org with esmtp (Exim 4.43) id 1GTTpd-0006wd-Ph
	for sip@ietf.org; Fri, 29 Sep 2006 21:39:58 -0400
Received: from dragon.ariadne.com (dworley.hsd1.ma.comcast.net[24.34.79.42])
	by comcast.net (alnrmhc13) with ESMTP
	id <20060930013953b1300l6fc3e>; Sat, 30 Sep 2006 01:39:57 +0000
Received: from dragon.ariadne.com (dragon.ariadne.com [127.0.0.1])
	by dragon.ariadne.com (8.12.8/8.12.8) with ESMTP id k8U1dqUm002689
	for <sip@ietf.org>; Fri, 29 Sep 2006 21:39:52 -0400
Received: (from worley@localhost)
	by dragon.ariadne.com (8.12.8/8.12.8/Submit) id k8U1dq1F002685;
	Fri, 29 Sep 2006 21:39:52 -0400
Date: Fri, 29 Sep 2006 21:39:52 -0400
Message-Id: <200609300139.k8U1dq1F002685@dragon.ariadne.com>
To: sip@ietf.org
From: Dale.Worley@comcast.net
In-reply-to: <17693.29133.121440.204325@rautu.tutpro.com> (jh@tutpro.com)
Subject: Re: [Sip] Escaping rules of SIP-URI userpart
References: <5EB80D22825EEE42872083AD5BFFB59403C2623D@esealmw113.eemea.ericsson.se>
	<1ECE0EB50388174790F9694F77522CCF0D58B72D@zrc2hxm0.corp.nortel.com>
	<17693.29133.121440.204325@rautu.tutpro.com>
X-Spam-Score: 0.2 (/)
X-Scan-Signature: 856eb5f76e7a34990d1d457d8e8e5b7f
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

   From: Juha Heinanen <jh@tutpro.com>

   i don't understand what you are trying to say.  #31# prefix of phone
   number, for example, means something to PSTN and needs to be carried
   there from the SIP phone, which cannot have a clue of various PSTN dial
   string conventions.  or can you explain what kind of magic translation
   nortel SIP phones do when user dial #31# followed by a phone number?

I don't know whether it's worth doing, but it certainly is possible to
have the UA recognize certain dial strings and do something useful
based on that.  For example, the default sipX configuration uses
*78xxx for call pick-up on extension xxx.  Generally, the phones don't
know this, and the sipX proxy/redirector handles the machinery for
turning this INVITE into an INVITE-with-Replaces to perform the
pick-up operation.  But the phone could be programmed to know that *78
is the pick-up prefix, and perform the pick-up operation itself.

Dale

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



From sip-bounces@ietf.org Sat Sep 30 17:20:25 2006
Received: from [127.0.0.1] (helo=stiedprmman1.va.neustar.com)
	by megatron.ietf.org with esmtp (Exim 4.43)
	id 1GTmBc-0001ih-UW; Sat, 30 Sep 2006 17:15:52 -0400
Received: from [10.91.34.44] (helo=ietf-mx.ietf.org)
	by megatron.ietf.org with esmtp (Exim 4.43) id 1GTmBb-0001ia-AB
	for sip@ietf.org; Sat, 30 Sep 2006 17:15:51 -0400
Received: from sj-iport-1-in.cisco.com ([171.71.176.70]
	helo=sj-iport-1.cisco.com) by ietf-mx.ietf.org with esmtp (Exim 4.43)
	id 1GTmBZ-0004cW-NK for sip@ietf.org; Sat, 30 Sep 2006 17:15:51 -0400
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
	by sj-iport-1.cisco.com with ESMTP; 30 Sep 2006 14:15:49 -0700
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-4.cisco.com (8.12.11.20060308/8.12.11) with ESMTP id
	k8ULFnaX014776; Sat, 30 Sep 2006 14:15:49 -0700
Received: from xbh-sjc-211.amer.cisco.com (xbh-sjc-211.cisco.com
	[171.70.151.144])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id k8ULFmYr018646;
	Sat, 30 Sep 2006 14:15:48 -0700 (PDT)
Received: from xmb-sjc-21c.amer.cisco.com ([171.70.151.176]) by
	xbh-sjc-211.amer.cisco.com with Microsoft SMTPSVC(6.0.3790.1830); 
	Sat, 30 Sep 2006 14:15:48 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [Sip] Escaping rules of SIP-URI userpart
Date: Sat, 30 Sep 2006 14:15:47 -0700
Message-ID: <13D1EAB852BE194C94773A947138483D026D99D7@xmb-sjc-21c.amer.cisco.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Sip] Escaping rules of SIP-URI userpart
Thread-Index: AcbjMybUD7Kg0BXTTyCCC9LTsXyD2QAgI0JgAABy70AAEHIvcAA1lDjQ
From: "Hector Morales \(hemorale\)" <hemorale@cisco.com>
To: "Francois Audet" <audet@nortel.com>,
	"Christer Holmberg \(JO/LMF\)" <christer.holmberg@ericsson.com>,
	"Jesske, R" <R.Jesske@t-com.net>, <Dale.Worley@comcast.net>, <sip@ietf.org>
X-OriginalArrivalTime: 30 Sep 2006 21:15:48.0417 (UTC)
	FILETIME=[99AEBB10:01C6E4D5]
DKIM-Signature: a=rsa-sha1; q=dns; l=6595; t=1159650949; x=1160514949;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=hemorale@cisco.com;
	z=From:=22Hector=20Morales=20\(hemorale\)=22=20<hemorale@cisco.com>
	|Subject:RE=3A=20[Sip]=20Escaping=20rules=20of=20SIP-URI=20userpart;
	X=v=3Dcisco.com=3B=20h=3DnNNeh7HYVBabO5MoHxSv/HQvL+s=3D;
	b=kIUKailFOgpvXntG1WGdlFx29CQLaupP6+BIXTFCAgnVnAeIPTv89SCoEs+bv2bTzxt4q0d8
	11r/NM12M0Vr4rvbG9Y/7QRBaXJWBYugYLpUc+7V68Cocq91brNtMVNj;
Authentication-Results: sj-dkim-4.cisco.com; header.From=hemorale@cisco.com;
	dkim=pass ( sig from cisco.com verified; ); 
X-Spam-Score: 0.0 (/)
X-Scan-Signature: cdb443e3957ca9b4c5b55e78cfcf4b26
Cc: 
X-BeenThere: sip@ietf.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: Session Initiation Protocol <sip.ietf.org>
List-Unsubscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=unsubscribe>
List-Post: <mailto:sip@ietf.org>
List-Help: <mailto:sip-request@ietf.org?subject=help>
List-Subscribe: <https://www1.ietf.org/mailman/listinfo/sip>,
	<mailto:sip-request@ietf.org?subject=subscribe>
Errors-To: sip-bounces@ietf.org

Francois,
What I have seen in many implementations is that the # is part of the =
SIP URI userpart, when there is a B2BUA that has to activate or =
deactivate a service like the ones mentioned in the thread.

The question would be if this is a valid usage on such implementations

Saludos
Hector

Hector Morales
Consulting Systems Engineer
Cisco Systems=20
hemorale@cisco.com

-----Original Message-----
From: Francois Audet [mailto:audet@nortel.com]=20
Sent: Friday, September 29, 2006 1:47 PM
To: Christer Holmberg (JO/LMF); Jesske, R; Dale.Worley@comcast.net; =
sip@ietf.org
Subject: RE: [Sip] Escaping rules of SIP-URI userpart



> -----Original Message-----
> From: Christer Holmberg (JO/LMF)
> [mailto:christer.holmberg@ericsson.com]
> Sent: Friday, September 29, 2006 3:55 AM
> To: Jesske, R; Dale.Worley@comcast.net; sip@ietf.org
> Subject: RE: [Sip] Escaping rules of SIP-URI userpart
>=20
>=20
> Hi Roland,
>=20
> >I really confused about this discussion regarding'#'.
> >The range of a telephone number Digit is 0,1,2...9,A,B,C,D,F
> as far as
> >I know (it's a binary 4 Digit code ).
> >You can look in Q.764 which of the digits are used for what and also
> >E.164 gives a guideline.
> >=20
> >So for what Telephone application '#' is used?
>=20
> You can use if for service codes. *21#3455
>=20
> ...or something like that.

There is no need for this in a URI. The service code should be =
translatable by the phone to a real URI that actually means something.
=20
> ...or "Please enter your pin code, followed by #".

That's not a phone number: it's dialled digits, and it is coverered by =
KPML and RFC 2833. It has no place in a URI.

> Regards,
>=20
> Christer
>=20
>=20
>=20
>=20
>=20
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Christer Holmberg (JO/LMF)
> > > [mailto:christer.holmberg@ericsson.com]
> > > Gesendet: Donnerstag, 28. September 2006 21:17
> > > An: Dale.Worley@comcast.net; sip@ietf.org
> > > Betreff: RE: [Sip] Escaping rules of SIP-URI userpart
> > >=20
> > >=20
> > > =20
> > > Also, I don't think that the RFC 3261 ABNF even allows for
> > the usage
> > > of "#" as a delimiter, as defned in RFC2396.
> > >=20
> > > Chapter 4 of RFC2396 says:
> > >=20
> > > URI-reference =3D [ absoluteURI | relativeURI ] [ "#" fragment ]
> > >=20
> > > First, we can see that the fragment part cannot be within
> > the URI, it
> > > optionally follows the URI
> > >=20
> > > Second, we can see that the fragment is not part of the
> URI, it is
> > > part of URI-reference.
> > >=20
> > > Third, there is no mentioning of URI-reference in the SIP ABNF.
> > >=20
> > >=20
> > > For example, the Request-URI is defined as:=20
> > >=20
> > > Request-URI =3D  SIP-URI / SIPS-URI / absoluteURI
> > >=20
> > > But, nowhere is ["#" fragment] mentioned.=20
> > >=20
> > > So, I doubt that many parsers implemented based on the SIP
> > ABNF would
> > > even accept a URI followed by a fragment in a SIP message.
> > >=20
> > > Regards,
> > >=20
> > > Christer
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > > > -----Original Message-----
> > > > From: Christer Holmberg (JO/LMF)=20
> > > > [mailto:christer.holmberg@ericsson.com]
> > > > Sent: 28. syyskuuta 2006 19:03
> > > > To: Dale.Worley@comcast.net; sip@ietf.org
> > > > Subject: VS: [Sip] Escaping rules of SIP-URI userpart
> > > >=20
> > > > Hi Dale,
> > > >=20
> > > >=20
> > > > >   The issue is that I don't understand why that rule is
> > > > needed. User=3Dphone
> > > > >   means that the userpart shall be parsed as a
> > > > telephone-subscriber, and
> > > > >   within a telephone-subscriber the "#" does not have any
> > > > special meaning,
> > > > >   so there is no need to escape it.
> > > > >
> > > > >   So, yes, you probably have to go with:
> > > > >
> > > > >   sip:003%23xyz@hello.com
> > > > >
> > > > >  But, I see no reason why you should have to go with:
> > > > >
> > > > >   sip:003%23xyz@hello.com;user=3Dphone
> > > > >
> > > > >   Instead you could use:
> > > > >
> > > > >   sip:003#xyz@hello.com;user=3Dphone
> > > > >
> > > > How would you write a left-to-right parser that could cope
> > > with that?
> > > >=20
> > > > [CHH] Well, you can't really perform a detailed parse of the=20
> > > > userpart before you have parsed the user parameter anyway.
> > > > =20
> > > > And, whatever the value of the user parameter is, I have
> > never seen
> > > > "#" used as this kind of delmiter in a SIP-URI anyway...
> > > > =20
> > > > Regards,
> > > > =20
> > > > Christer
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > > =20
> > > >=20
> > > >=20
> > > > Dale
> > > >=20
> > > > _______________________________________________
> > > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > > This list is for NEW development of the core SIP Protocol Use=20
> > > > sip-implementors@cs.columbia.edu for questions on
> current sip Use
> > > > sipping@ietf.org for new developments on the application of sip
> > > >=20
> > > >=20
> > > > _______________________________________________
> > > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > > This list is for NEW development of the core SIP Protocol Use=20
> > > > sip-implementors@cs.columbia.edu for questions on
> current sip Use
> > > > sipping@ietf.org for new developments on the application of sip
> > > >=20
> > >=20
> > > _______________________________________________
> > > Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> > > This list is for NEW development of the core SIP Protocol Use=20
> > > sip-implementors@cs.columbia.edu for questions on current sip Use=20
> > > sipping@ietf.org for new developments on the application of sip
> > >=20
> >=20
>=20
> _______________________________________________
> Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
> This list is for NEW development of the core SIP Protocol Use=20
> sip-implementors@cs.columbia.edu for questions on current sip Use=20
> sipping@ietf.org for new developments on the application of sip
>=20

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol Use =
sip-implementors@cs.columbia.edu for questions on current sip Use =
sipping@ietf.org for new developments on the application of sip

_______________________________________________
Sip mailing list  https://www1.ietf.org/mailman/listinfo/sip
This list is for NEW development of the core SIP Protocol
Use sip-implementors@cs.columbia.edu for questions on current sip
Use sipping@ietf.org for new developments on the application of sip



